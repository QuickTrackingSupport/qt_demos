/*! 2021-12-20 17:29:33 */
module.exports = function(e) {
    function t(a) {
        if (n[a]) return n[a].exports;
        var o = n[a] = {
            exports: {},
            id: a,
            loaded: !1
        };
        return e[a].call(o.exports, o, o.exports, t), o.loaded = !0, o.exports;
    }
    var n = {};
    return t.m = e, t.c = n, t.p = "", t(0);
}([ function(e, t, n) {
    e.exports = n(1);
}, function(e, t, n) {
    "use strict";
    n(2).initGlobal(), e.exports = function(e) {
        var t = n(4);
        return n(91)(e, t);
    };
}, function(e, t, n) {
    "use strict";
    var a, o = n(3), r = o.APLUS, s = o.APLUS_QUEUE, i = o.GOLDLOG, u = o.GOLDLOG_QUEUE, c = !1;
    try {
        a = window, c = !0;
    } catch (e) {
        a = {};
    }
    t.getContext = function() {
        return a;
    }, t.initGlobal = function(e) {
        a = e ? e : {
            v: 1,
            aplus: {},
            aplus_queue: []
        };
        var t, n;
        if (c) try {
            t = a.aplus || (a.aplus = {});
            var o = a.goldlog_queue || (a.goldlog_queue = []);
            n = a.aplus_queue || (a.aplus_queue = []), n = o.concat(n);
        } catch (e) {} else t = a.aplus, n = a.aplus_queue;
        return a.aplus = a.goldlog = t, a.aplus_queue = a.goldlog_queue = n, a;
    };
    var p = function(e) {
        if (e === r || e === i) {
            var t = a[r] || a[i];
            return t || (t = a[r] = a[i] = {}), t;
        }
        var n = u, o = s;
        if (e === o || e === n) {
            var c = a[o] || a[n];
            return c || (c = a[o] = a[n] = []), c;
        }
    };
    t.getGlobalValue = p, t.setGlobalValue = function(e, t) {
        a[e] = t;
    };
    var l = function(e) {
        var t;
        try {
            var n = p(r);
            t = n[e];
        } catch (e) {
            t = "";
        } finally {
            return t;
        }
    };
    t.getGoldlogVal = l;
    var g = function(e, t) {
        var n = !1;
        try {
            var a = p(r);
            e && (a[e] = t, n = !0);
        } catch (e) {
            n = !1;
        } finally {
            return n;
        }
    };
    t.setGoldlogVal = g, t.getClientInfo = function() {
        return l("_aplus_client") || {};
    };
}, function(e, t) {
    var n = "aplus", a = "goldlog", o = n + "_queue", r = a + "_queue", s = "mw_change", i = "MetaInfo", u = "append" + i, c = "set" + i, p = "http", l = "_pubsub", g = "other", f = "2101", d = "2201", h = "2202", _ = "19999", v = "1023", m = "1010", y = 3e4, b = 18e5, S = "ekvs", P = 1e4, I = 1, C = 3e3, A = "$$_page_start", T = "$$_page_end", E = "$$_app_start", x = "$$_app_end", M = "aplus_user_profile", O = "imprint", w = "aplus-idtype", U = "aplus-jsbridge-only", k = "aplus-page-config", N = "aplus-skip-apv-rules";
    e.exports = {
        PAGE_ENTER: "PAGE_ENTER",
        CURRENT_PAGE_CONFIG: "CURRENT_PAGE_CONFIG",
        _ANONY_ID: "_anony_id",
        _USER_ID: "_user_id",
        DEFAULT_CODE: g,
        OTHER: _,
        EVENT_MAP: {
            "2101": "click",
            "2201": "exposure",
            "2202": "exposure",
            "19999": g,
            "1023": "app_show",
            "1010": "app_hide_or_unload"
        },
        EVENT_ID_MAP: {
            EXP: d,
            IMPEXP: h,
            CLK: f,
            OTHER: _,
            SHOW: v,
            H_OR_U: m
        },
        APLUS: n,
        GOLDLOG: a,
        UNSUBSCRIBE: n + "." + n + l + ".unsubscribe",
        SUBSCRIBE: n + "." + n + l + ".subscribe",
        PUBLISH: n + "." + n + l + ".publish",
        CACHE_PUBS: n + "." + n + l + ".cachePubs",
        APLUS_UNIVERSAL: n + "_universal",
        APLUS_QUEUE: o,
        GOLDLOG_QUEUE: r,
        COMPLETE: "complete",
        PV_CODE: "2001",
        EXP_CODE: d,
        CLK_CODE: f,
        OTHER_CODE: _,
        CLK: "CLK",
        EXP: "EXP",
        SPM_CNT: "spm-cnt",
        SPM_URL: "spm-url",
        SPM_PRE: "spm-pre",
        MW_CHANGE_PV: s + "_pv",
        MW_CHANGE_HJLJ: s + "_hjlj",
        HTTP: p + ":",
        HTTPS: "https:",
        APPEND_META_INFO: u,
        SET_META_INFO: c,
        APLUS_APPEND_META_INFO: n + "." + u,
        APLUS_SET_META_INFO: n + "." + c,
        PVID: "pvid",
        APLUS_LOG_PIPE: "aplus-log-pipe",
        openAPIs: [ "send", "enter", "sendPV", "record", "combineRecord", "recordUdata", "requestVTConfig", "setPageSPM", "setMetaInfo", "appendMetaInfo", "updatePageProperties", "updateNextPageProperties", "updatePageUtparam", "updateNextPageUtparam", "pageAppear", "pageDisappear", "skipPage", "updateSessionProperties", "getPageSpmUrl", "getPageSpmPre", "setPageName", "getElementSPM" ],
        SESSION_INTERVAL: y,
        SESSION_PAUSE_TIME: "session_pause_time",
        IMPRINT: "imprint",
        CURRENT_SESSION: "current_session",
        MAX_EVENTID_LENGTH: 128,
        MAX_PROPERTY_KEY_LENGTH: 256,
        MAX_PROPERTY_KEYS_COUNT: 100,
        REQUESTS: "requests",
        SHARES: "shares",
        APLUS_SSRC: "_aplus_ssrc",
        EKVS: S,
        EVENT_MAX_COUNT: P,
        MEMORY_MAX_COUNT: I,
        EVENT_SEND_DEFAULT_INTERVAL: C,
        PAGE_START: A,
        PAGE_END: T,
        APP_START: E,
        APP_END: x,
        USER_PROFILE_KEY: M,
        SHARE_CACHE_INTERVAL: b,
        IMPRINT: O,
        ID_TYPE: w,
        JSBRIDGE_ONLY: U,
        PAGE_CONFIG: k,
        APLUS_SKIP_APV_RULES: N
    };
}, function(e, t, n) {
    e.exports = {
        metaInfo: {
            "aplus-rhost-v": "",
            "aplus-rhost-g": "",
            "aplus-mmstat-timeout": "10000",
            sdkId: "aplus_mini_cloud_um"
        },
        globalConfig: {
            isAli: !1,
            isDecodeUrl: !0,
            APLUS_QUEUE: "aplus_queue",
            ETAG_STORAGE_KEY: "__ETAG__CNA__ID__",
            script_name: "aplus_mini.js",
            "aplus-globaldata": {},
            lver: "1.7.10"
        },
        plugins: [ {
            name: "inject_app_um",
            path: n(5)
        }, {
            name: "inject_page_um",
            path: n(31)
        }, {
            name: "open_api",
            path: n(33)
        }, {
            name: "aplus_client",
            path: n(34)
        }, {
            name: "pubsub",
            path: n(35)
        }, {
            name: "aplus_meta_inject",
            path: n(38)
        }, {
            name: "aplus_ac",
            path: n(42),
            deps: [ "inject_page_um" ]
        }, {
            name: "aplus_ae",
            path: n(47),
            deps: [ "inject_page_um" ]
        }, {
            name: "aplus_mini_spm",
            path: n(54)
        }, {
            name: "aplus_mini_report_um",
            path: n(55)
        }, {
            name: "aplus_log_inject",
            path: n(60),
            deps: [ "aplus_meta_inject" ],
            config: {
                plugins: {
                    pv: [ {
                        name: "etag",
                        path: n(61)
                    }, {
                        name: "when_to_sendpv",
                        path: n(66),
                        config: {
                            aplusWaiting: ""
                        }
                    }, {
                        name: "where_to_send",
                        path: n(67)
                    }, {
                        name: "what_to_send",
                        path: n(68),
                        config: {
                            logdataToUt: {}
                        }
                    }, {
                        name: "miniapp_data",
                        path: n(72)
                    }, {
                        name: "what_to_sendpv_userdata",
                        path: n(73),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "can_to_sendpv",
                        path: n(74)
                    } ],
                    hjlj: [ {
                        name: "etag",
                        path: n(61)
                    }, {
                        name: "where_to_send",
                        path: n(67)
                    }, {
                        name: "what_to_send",
                        path: n(68),
                        deps: []
                    }, {
                        name: "miniapp_data",
                        path: n(72)
                    }, {
                        name: "what_to_hjlj_userdata",
                        path: n(75)
                    } ]
                }
            }
        }, {
            name: "aplus_api",
            path: n(76),
            deps: [ "aplus_log_inject", "aplus_meta_inject" ]
        }, {
            name: "meta_queue",
            path: n(83),
            config: {
                isOpenApi: !0
            }
        }, {
            name: "etag",
            path: n(61)
        }, {
            name: "aplus_queue",
            path: n(85),
            config: {
                isOpenApi: !0
            }
        }, {
            name: "auto_tracker_um",
            path: n(86),
            deps: [ "inject_page_um" ]
        } ]
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        var n = {};
        t && (n.scene = t), e && e.miniappDebugId && (n.debugId = e.miniappDebugId);
        for (var a in e) "$$_share_uid" !== a && 0 !== a.indexOf("$$_utm_") || (n[a] = e[a]);
        return n;
    }
    function o(e) {
        h().load(function() {
            v.logger({
                msg: "aplus-----cache init success"
            });
        });
        var t = {}, n = p(e);
        for (var a in n) "object" == typeof n[a] ? t = y.assign(n[a], t) : n[a] && (t[a] = n[a]);
        d().load();
        var o = g().resume(t), r = g().getCurrentSessionId();
        f().setSessionId(r), o && d().add(_.DataType.HALF_SESSION, {}, function() {
            v.logger({
                msg: "-----before send session"
            }), d().send();
        });
    }
    function r() {
        g().pause(), d().send(_.DataType.CLOSE_SESSION, {}, function() {
            d().save(), h().save(), v.logger({
                msg: "-----after send session"
            });
        });
    }
    function s() {
        var e = App, t = !1, n = !1, s = i.getContext(), p = l.getContext(), g = {
            onLaunch: function(e) {
                l.initIsTB();
                var t = e ? e.query : {}, n = e ? e.referrerInfo : {};
                if (S += 1, s.aplus_queue.push({
                    action: "aplus.appendMetaInfo",
                    arguments: [ "aplus-session-args", y.assign(n, {
                        scene: e.scene || ""
                    }) ]
                }), t) {
                    var o = {};
                    if (t.spm && (s.aplus.spm_orign = t.spm), e.scene && (o.scene = e.scene), t.miniappDebugId) {
                        var r = t.miniappDebugId.trim(), i = r.split("_");
                        o = y.assign(o, {
                            aplus_work_no: i.length > 2 ? i[1] : r,
                            aplus_track_debug_id: r,
                            aplus_flag: "aplus_test"
                        });
                    }
                    s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-exdata", o ]
                    }), s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-cpvdata", o ]
                    }), s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-global-args", a(t, e.scene) ]
                    });
                }
            },
            onShow: function(e) {
                S += 1;
                var n, r = e ? e.query : {}, i = e ? e.scene : "";
                s.aplus_queue.push({
                    action: "aplus.setMetaInfo",
                    arguments: [ "aplus-global-args", a(r, i) ]
                }), i && (s.aplus_queue.push({
                    action: "aplus.appendMetaInfo",
                    arguments: [ "aplus-exdata", {
                        scene: i
                    } ]
                }), s.aplus_queue.push({
                    action: "aplus.appendMetaInfo",
                    arguments: [ "aplus-cpvdata", {
                        scene: i
                    } ]
                }), s.aplus_queue.push({
                    action: "aplus.appendMetaInfo",
                    arguments: [ "aplus-session-args", {
                        scene: i
                    } ]
                })), 2 === S ? n = 1 : 1 === S ? n = 0 : v.logger({
                    msg: "APP_LAUNCH_TYPE should not reach this, value = " + S
                }), u.onAplusReady(s.aplus_queue, c.SUBSCRIBE, function() {
                    t || (t = !0, o(e));
                    var a = s.aplus.globalConfig || {};
                    if (!a.isAli) {
                        var r = m.getPageCode();
                        s.onAppShowTime = new Date().getTime(), s.aplus_queue.push({
                            action: "aplus.record",
                            arguments: [ c.APP_START, "SHOW", {
                                start_type: n,
                                page_name: r || e.path || "-",
                                url: e.path || "-"
                            } ]
                        });
                    }
                });
            },
            onHide: function() {
                u.onAplusReady(s.aplus_queue, c.SUBSCRIBE, function() {
                    var e = s.aplus.globalConfig || {}, n = m.getPageCode();
                    if (!e.isAli) {
                        var a = m.getCurrentPagePath(), o = new Date().getTime() - s.onAppShowTime;
                        s.aplus_queue.push({
                            action: "aplus.record",
                            arguments: [ c.APP_END, "H_OR_U", {
                                duration: o,
                                end_type: 0,
                                page_name: n || a || "-",
                                url: a || "-",
                                start_time: s.onAppShowTime
                            } ]
                        });
                    }
                    t = !1, r();
                }), S = 0;
            }
        };
        App = function(t) {
            var n = i.getContext();
            t.aplus = n, e(t);
        }, p.onAppShow(function(e) {
            if (!n) {
                var t = {};
                t = b(p.getLaunchOptionsSync) ? p.getLaunchOptionsSync() || {} : e, g.onLaunch(t), 
                n = !0;
            }
            g.onShow(e);
        }), p.onAppHide(function() {
            g.onHide();
        });
    }
    var i = n(2), u = n(6), c = n(3), p = n(7), l = n(8), g = n(11), f = n(17), d = n(19), h = n(12), _ = n(15), v = n(26), m = n(30), y = n(28), b = n(9), S = 0;
    e.exports = function() {
        return {
            run: function() {
                [ "object", "function" ].indexOf(typeof App) > -1 && s();
            }
        };
    };
}, function(e, t) {
    e.exports = {
        resetFn: function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function() {}, a = e[t];
            e[t] = function() {
                var e = a && a.apply(this, arguments);
                return e ? n.call(this, e) : n.apply(this, arguments);
            };
        },
        rewriteFn: function(e, t, n) {
            var a = e[t];
            e[t] = function(e) {
                n.call(this, e), a && a.call(this, e);
            };
        },
        onAplusReady: function(e, t, n) {
            e.push({
                action: t,
                arguments: [ "aplusReady", function(e) {
                    "complete" === e && "function" == typeof n && n();
                } ]
            });
        }
    };
}, function(e, t) {
    function n(e) {
        var t, a = Array.isArray(e) ? [] : {};
        if ("object" == typeof e) {
            if (JSON && JSON.parse) t = JSON.stringify(e), a = JSON.parse(t); else for (var o in e) a[o] = "object" == typeof e[o] ? n(e[o]) : e[o];
            return a;
        }
    }
    e.exports = n;
}, function(e, t, n) {
    "use strict";
    function a() {
        if ("boolean" == typeof u) return u;
        var e = !1;
        try {
            var t = navigator ? navigator.userAgent || navigator.swuserAgent : "";
            e = !!/AliApp/i.test(t), (/AliApp\(AP/i.test(t) || /AliApp\(DingTalk/i.test(t) || /AliApp\(AMAP/i.test(t)) && (e = !1), 
            /AliApp\(KB/i.test(t) && (e = !!/Mist/.test(t)), /AlipayIDE Taobao/.test(t) && (e = !0);
            var n = c().ctx;
            "function" == typeof n.canIUse && (e = !!n.canIUse("callUserTrack"));
        } catch (e) {}
        return u = e, e;
    }
    function o() {
        return "boolean" == typeof u ? !!u : a();
    }
    var r = n(9), s = n(2), i = n(10);
    t.getCurrentPage = function() {
        var e = getCurrentPages();
        return e[e.length - 1] || {};
    };
    var u;
    t.resetIsTB = function(e) {
        u = e;
    }, t.initIsTB = a;
    var c = function() {
        try {
            return {
                ctx: dd,
                platType: "dd",
                sdkType: "ddmp",
                logDomain: "/ddm_logs"
            };
        } catch (e) {
            try {
                return {
                    ctx: my,
                    platType: my && my.tb ? "taobao" : "my",
                    sdkType: my && my.tb ? "taobaomp" : "mymp",
                    logDomain: "/alipaym_logs"
                };
            } catch (e) {
                try {
                    return {
                        ctx: tt,
                        platType: "tt",
                        sdkType: "ttmp",
                        logDomain: "/bytedancem_logs"
                    };
                } catch (e) {
                    try {
                        return {
                            ctx: swan,
                            platType: "bd",
                            sdkType: "bdmp",
                            logDomain: "/baidum_logs"
                        };
                    } catch (e) {
                        try {
                            return {
                                ctx: wx,
                                platType: "wx",
                                sdkType: "wxmp",
                                logDomain: "/wxm_logs"
                            };
                        } catch (e) {
                            return {
                                ctx: {},
                                platType: "UNKNOW",
                                sdkType: "UNKNOW"
                            };
                        }
                    }
                }
            }
        }
    };
    t.isTB = o, t.getPlatformType = function() {
        return c().platType;
    }, t.getSdkType = function() {
        return c().sdkType;
    }, t.getContext = function() {
        return c().ctx;
    }, t.getLogDomain = function() {
        return c().logDomain;
    };
    var p = "httpRequest", l = "request", g = function() {};
    t.request = function(e, t, n, a) {
        var o = c().ctx;
        t || (t = {}), r(a) || (a = g), r(n) || (n = g);
        var u = t.requestMethodName || l, f = o[u];
        r(f) || (u !== l ? u = l : u !== p && (u = p), f = o[u]);
        var d = t.dataType || "json", h = t.timeout || 5e3, _ = t.method || "GET";
        e = i.can2https(e);
        var v;
        if (r(f)) {
            var m = {
                url: e,
                method: _,
                dataType: d,
                timeout: h,
                success: function(e) {
                    n(e);
                },
                fail: function(t) {
                    console && console.warn("request " + e + " failure, the msg is ", t), a(t);
                }
            };
            "object" == typeof t.data && "POST" === _ && (m.data = t.data, m.url = m.url.split("?")[0]);
            var y = s.getGlobalValue("aplus"), b = y.getMetaInfo("aplus-request-extinfo");
            "object" == typeof b && (m._extInfo = b), f(m);
        } else console && console.warn('can not find "' + u + '"!'), a(v);
    };
}, function(e, t) {
    "use strict";
    e.exports = function(e) {
        return "function" == typeof e;
    };
}, function(e, t) {
    "use strict";
    function n(e) {
        var t, n, o, r = [], s = e.length;
        for (o = 0; o < s; o++) t = e[o][0], n = e[o][1], r.push(0 === t.indexOf(a) ? n : t + "=" + encodeURIComponent(n));
        return r.join("&");
    }
    var a = "::-plain-::";
    t.mkPlainKey = function() {
        return a + Math.random();
    }, t.s_plain_obj = a, t.mkPlainKeyForExparams = function(e) {
        var t = e || a;
        return t + "exparams";
    }, t.arr2param = n, t.param2arr = function(e) {
        for (var t, n = e.split("&"), a = 0, o = n.length, r = []; a < o; a++) t = n[a].split("="), 
        r.push([ t.shift(), t.join("=") ]);
        return r;
    }, t.arr2obj = function(e) {
        var t, n, a, o = {}, r = e.length;
        for (a = 0; a < r; a++) t = e[a][0], n = e[a][1], o[t] = n;
        return o;
    }, t.jsonLikeStr2JSON = function(e) {
        if (!e || "string" != typeof e) return {};
        for (var t = e.replace(/['"{}]+/g, ""), n = t.split(","), a = [], o = 0; o < n.length; o++) a.push(n[o].split(":"));
        var r = this.arr2obj(a);
        return r;
    }, t.can2https = function(e) {
        if (0 === e.indexOf("//")) {
            var t = "https:";
            /(\d+\.){3,}\d+/.test(e) && (t = "http:"), e = t + e;
        }
        return e;
    }, t.checkEmptyObj = function(e) {
        return "object" != typeof e || 0 === Object.keys(e).length;
    };
}, function(e, t, n) {
    var a = n(12), o = n(14), r = n(3), s = n(8), i = n(7), u = n(15), c = n(2);
    e.exports = function() {
        function e() {
            return {
                resume: function(e) {
                    var t = !1;
                    f || (f = a().get(r.CURRENT_SESSION));
                    var s = new Date();
                    return g = s.getTime(), !f || !f.end_time || g - f.end_time > r.SESSION_INTERVAL ? (t = !0, 
                    n(e), o().v("开始新的session(%s): ", f.id, f)) : o().v("延续上一次session(%s): %s ", f.id, s.toLocaleTimeString(), f), 
                    t;
                },
                pause: function() {
                    p();
                },
                getCurrentSessionId: function() {
                    return (f || {}).id;
                },
                getCurrentSession: function() {
                    return f;
                },
                cloneCurrentSession: function() {
                    return i(f);
                }
            };
        }
        function t(e) {
            var t = {};
            for (var n in e) t[n] = e[n];
            return o().v("query: ", e), t;
        }
        function n(e) {
            try {
                var n = (f || {}).options || {}, a = u.assign({}, t(e.query));
                a.path = e.path || n.path, a.scene = e.scene ? s.getPlatformType() + "_" + e.scene : n.scene;
                var r = e.referrerInfo;
                r && (a.referrerAppId = r.appId), o().v("session options: ", a);
                var i = c.getGlobalValue("aplus"), p = i.getMetaInfo("globalproperty"), l = Date.now();
                f = {
                    id: u.getRandomStr(10) + l,
                    start_time: l,
                    options: a,
                    state_s: 1
                }, p && (f.gp = p);
            } catch (e) {
                o().e("生成新session失败: ", e);
            }
        }
        function p() {
            if (f) {
                var e = new Date();
                f.end_time = e.getTime(), "number" != typeof f.duration && (f.duration = 0), f.duration = f.end_time - g, 
                f.state_s = 0, a().set(r.CURRENT_SESSION, f), o().v("退出会话(%s): %s ", f.id, e.toLocaleTimeString(), f);
            }
        }
        var l = null, g = null, f = null;
        return function() {
            return l || (l = e()), l;
        };
    }();
}, function(e, t, n) {
    var a = n(8), o = n(9), r = n(13), s = n(14);
    e.exports = function() {
        function e() {
            var e = a.getContext(), t = n(2), p = t.getGlobalValue("aplus");
            this.load = function(t) {
                u ? (e.removeStorage({
                    key: i
                }), o(t) && t()) : (i = "aplus_cache_" + (p.getMetaInfo("appKey") || p.getMetaInfo("appId")), 
                e.getStorage({
                    key: i,
                    success: function(n) {
                        u = n && n.data ? r.parse(n.data) || {} : {}, c = !0, e.removeStorage({
                            key: i
                        }), o(t) && t();
                    },
                    fail: function(n) {
                        s().w(i + ": " + n.errMsg), u = {}, c = !0, e.removeStorage({
                            key: i
                        }), o(t) && t();
                    }
                }));
            }, this.save = function() {
                u && e.setStorage({
                    key: i,
                    data: r.stringfy(u)
                });
            }, this.set = function(e, t) {
                u && (u[e] = t);
            }, this.get = function(e) {
                return (u || {})[e];
            }, this.remove = function(e) {
                u && u[e] && delete u[e];
            }, this.getAll = function() {
                return u;
            }, this.clear = function() {
                u = null;
            }, this.has = function(e) {
                return !!this.get(e);
            }, this.isLoaded = function() {
                return c;
            };
        }
        var t = null, i = "", u = null, c = !1;
        return function() {
            return t || (t = new e()), t;
        };
    }();
}, function(e, t) {
    t.stringfy = function(e) {
        if (e) try {
            return JSON.stringify(e);
        } catch (e) {}
        return "";
    }, t.parse = function(e) {
        if (e) try {
            return JSON.parse(e);
        } catch (e) {}
        return null;
    }, t.parseToArray = function(e) {
        if (e) try {
            return JSON.parse(e);
        } catch (e) {}
        return [];
    };
}, function(e, t) {
    var n = "[APLUS] -- ";
    e.exports = function() {
        function e() {
            this.setDebug = function(e) {
                a = e;
            }, this.d = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.debug.apply(console, arguments);
                } catch (e) {}
            }, this.i = function() {
                try {
                    if (a) try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.info.apply(console, arguments);
                    } catch (e) {}
                } catch (e) {}
            }, this.e = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.error.apply(console, arguments);
                } catch (e) {}
            }, this.w = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.warn.apply(console, arguments);
                } catch (e) {}
            }, this.v = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.log.apply(console, arguments);
                } catch (e) {}
            }, this.t = function() {
                if (a) try {
                    console.table.apply(console, arguments);
                } catch (e) {}
            }, this.tip = function() {
                try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.log.apply(console, arguments);
                } catch (e) {}
            }, this.tip_w = function(e) {
                try {
                    console.log("%c " + n + e, "background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;");
                } catch (e) {}
            }, this.err = function() {
                try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.error.apply(console, arguments);
                } catch (e) {}
            }, this.repeat = function(e) {
                for (var t = e; t.length < 86; ) t += e;
                return t;
            };
        }
        var t = null, a = !1;
        return function() {
            return null === t && (t = new e()), t;
        };
    }();
}, function(e, t, n) {
    t.getRandomStr = function(e) {
        for (var t = "", n = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z" ], a = 0; a < Number(e); a++) {
            var o = Math.round(Math.random() * (n.length - 1));
            t += n[o];
        }
        return t;
    }, t.startsWith = function(e, t) {
        return !(!e || !t || 0 === t.length || t.length > e.length) && e.substr(0, t.length) === t;
    }, t.assign = function(e) {
        if (void 0 === e || null === e) throw new TypeError("Cannot convert undefined or null to object");
        for (var t = Object(e), n = 1; n < arguments.length; n++) {
            var a = arguments[n];
            if (a) for (var o in a) Object.prototype.hasOwnProperty.call(a, o) && (t[o] = a[o]);
        }
        return t;
    }, t.checkEvent = function(e, t) {
        var a = n(3), o = n(14);
        if (!e || "string" != typeof e) return o().e('please check trackEvent id. id should be "string" and not null'), 
        !1;
        var r = [ "id", "du" ], s = {};
        if (r.forEach(function(e) {
            s[e] = 1;
        }), s[e]) return o().e("eventId不能与以下保留字冲突: " + r.join(",")), !1;
        if (e.length > a.MAX_EVENTID_LENGTH) return o().e("The maximum length of event id shall not exceed " + a.MAX_EVENTID_LENGTH), 
        !1;
        if (t && ("object" != typeof t || Array.isArray(t)) && "string" != typeof t) return o().e("please check trackEvent properties. properties should be string or object(not include Array)"), 
        !1;
        if ("object" == typeof t) {
            var i = 0;
            for (var u in t) if ({}.hasOwnProperty.call(t, u)) {
                if (u.length > a.MAX_PROPERTY_KEY_LENGTH) return o().e("The maximum length of property key shall not exceed " + a.MAX_PROPERTY_KEY_LENGTH), 
                !1;
                if (i >= a.MAX_PROPERTY_KEYS_COUNT) return o().e("The maximum count of properties shall not exceed " + a.MAX_PROPERTY_KEYS_COUNT), 
                !1;
                if (s[u]) return o().e("属性中的key不能与以下保留字冲突: " + r.join(",")), !1;
                i += 1;
            }
        }
        return !0;
    };
    var a = n(16);
    t.deleteInfo = function(e, t) {
        return a(t, function(t) {
            delete e[t];
        }), e;
    }, t.checkEmptyObj = function(e) {
        return "object" != typeof e || 0 === Object.keys(e).length;
    }, t.DataType = {
        HALF_SESSION: "half_session",
        CLOSE_SESSION: "close_session",
        EKV: "ekv",
        ENTER_PAGE: "enter_page",
        LEAVE_PAGE: "leave_page"
    }, t.AccessType = {
        MOBILE_NETWORK_2G: "2g",
        MOBILE_NETWORK_3G: "3g",
        MOBILE_NETWORK_4G: "4g",
        MOBILE_NETWORK_NONE: "none"
    };
}, function(e, t) {
    "use strict";
    e.exports = function(e, t) {
        var n, a = e.length;
        for (n = 0; n < a; n++) {
            var o = t(e[n], n);
            if ("break" === o) break;
        }
    };
}, function(e, t, n) {
    var a = n(12), o = n(14), r = n(3), s = n(18);
    e.exports = function() {
        function e() {
            if (p.length) {
                var e = a().get(r.EKVS);
                n(e) + p.length <= r.EVENT_MAX_COUNT && (e = t(e, p), a().set(r.EKVS, e));
            }
        }
        function t(e, t) {
            e = e || {};
            var n = e[c];
            return s(n) && n.length ? e[c] = n.concat(t) : e[c] = [].concat(t), e;
        }
        function n(e) {
            var t = 0;
            for (var n in e) s(e[n]) && (t += e[n].length);
            return t;
        }
        function i() {
            return {
                addEvent: function(t) {
                    t && (c ? (p.unshift(t), p.length > r.MEMORY_MAX_COUNT && (e(c), p.length = 0)) : (o().w("session id is null: ", c), 
                    l.unshift(t)));
                },
                setSessionId: function(e) {
                    if (c = e, o().v("setSessionId: ", c), s(l) && l.length && c) {
                        for (var t = 0; t < l.length; t++) this.addEvent(l[t]);
                        l.length = 0;
                    }
                },
                getEkvs: function() {
                    var e = a().get(r.EKVS);
                    return p && p.length && (e = t(e, p)), e;
                },
                clear: function() {
                    a().remove(r.EKVS), p.length = 0, l.length = 0;
                }
            };
        }
        var u, c, p = [], l = [];
        return function() {
            return u || (u = i()), u;
        };
    }();
}, function(e, t) {
    "use strict";
    e.exports = function(e) {
        return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
    };
}, function(e, t, n) {
    var a = n(20), o = n(12), r = n(3), s = n(14), i = n(21), u = n(22), c = n(27), p = n(9), l = n(28), g = n(7), f = 50;
    e.exports = function() {
        function e(e, t, o) {
            t = t || {};
            var s = i(e);
            if (s) {
                var u = n(2), c = u.getGlobalValue(r.APLUS), g = c._aplus_client || {};
                s.header = l.assign(s.header, a.getNetInfo(g)), s.noCache = t.noCache, b.enqueue(s);
            }
            p(o) && o();
        }
        function t(e) {
            var n = b.front(), a = function() {
                b.dequeue(), t(e);
            }, o = function() {
                var n = b.dequeue();
                n && !n.noCache && y.push(n), t(e);
            };
            n ? u(n, a, o) : (d(), e());
        }
        function d() {
            y.forEach(function(e) {
                b.enqueue(e);
            }), y.length = 0;
        }
        function h(e) {
            if (m) return void s().i("队列正在发送中");
            m = !0;
            var n = function() {
                m = !1, p(e) && e();
            };
            t(n);
        }
        function _() {
            this.send = function(e, t, n) {
                e ? this.add(e, t, function() {
                    h(n);
                }) : h(n);
            }, this.add = function(t, n, a) {
                e(t, n, a);
            }, this.load = function() {
                var e = o().get(r.REQUESTS);
                e && e.length && e.forEach(function(e) {
                    b.enqueue(e);
                }), o().remove(r.REQUESTS);
            }, this.save = function() {
                o().set(r.REQUESTS, g(b.items())), b.clear();
            };
        }
        var v = null, m = !1, y = [], b = new c(f);
        return function() {
            return v || (v = new _()), v;
        };
    }();
}, function(e, t, n) {
    var a = n(8), o = n(3), r = n(12), s = n(2), i = n(15);
    t.getNetInfo = function(e) {
        var t = {}, n = e.networkType;
        switch ("none" === n && (n = "unknown"), n = n ? n.toLowerCase() : "") {
          case i.AccessType.MOBILE_NETWORK_4G:
            t.access_subtype = "LTE", t.access = "4G";
            break;

          case i.AccessType.MOBILE_NETWORK_3G:
            t.access_subtype = "CDMA", t.access = "3G";
            break;

          case i.AccessType.MOBILE_NETWORK_2G:
            t.access_subtype = "GRPS", t.access = "2G";
            break;

          default:
            t.access = n, delete t.access_subtype;
        }
        return t;
    }, t.getHeaderInfo = function() {
        var e = {}, t = s.getGlobalValue(o.APLUS), n = t.globalConfig || {}, i = t._aplus_client || {}, u = r().get(o.IMPRINT);
        u && (e.imprint = u), e.device_type = "Phone", e.sdk_version = n.lver, e.appkey = t.getMetaInfo("appKey") || t.getMetaInfo("appId"), 
        e.device_info = "", e.appid = i.appId, e.app_env = i.appEnv, e.app_version = t.getMetaInfo("appVersion") || "devtools";
        var c = t.getMetaInfo("aplus-global-args");
        c && c.debugId && (e.miniappDebugId = c.debugId);
        var p = i || {};
        p.safeArea = p.safeArea || {};
        var l = p.model || "", g = p.platform || "", f = p.brand || "", d = f.toLowerCase();
        e.sdk_type = a.getSdkType(), e.platform = a.getPlatformType(), e.platform_sdk_version = p.SDKVersion, 
        e.platform_version = p.platformVersion;
        var h = Math.round(p.screenWidth * p.pixelRatio), _ = Math.round(p.screenHeight * p.pixelRatio);
        e.resolution = h > _ ? h + "*" + _ : _ + "*" + h, e.pixel_ratio = p.pixelRatio, 
        e.os = g, e.font_size_setting = p.fontSizeSetting, e.device_model = l, e.device_brand = f, 
        e.device_manufacturer = d, e.device_manuid = l, e.device_name = l, e.os_version = p.os_version, 
        e.language = p.language;
        var v = this.getNetInfo(i);
        return e.access = v.access, v.access_subtype && (e.access_subtype = v.access_subtype), 
        e;
    };
}, function(e, t, n) {
    function a() {
        var e = null, t = s().cloneCurrentSession();
        return t && (e = {
            header: {
                st: "1"
            },
            analytics: {
                sessions: [ t ]
            }
        }), e;
    }
    function o() {
        var e = null, t = {}, n = s().cloneCurrentSession();
        n && (t.sessions = [ n ]);
        var a = i().getEkvs();
        return a && (t.ekvs = c(a), i().clear()), (t.sessions || t.ekvs) && (e = {
            analytics: t
        }), e;
    }
    function r() {
        var e = null, t = i().getEkvs();
        return t && (e = {
            analytics: {
                ekvs: c(t)
            }
        }, i().clear()), e;
    }
    var s = n(11), i = n(17), u = n(15), c = n(7);
    e.exports = function(e) {
        var t = null;
        switch (e) {
          case u.DataType.HALF_SESSION:
            t = a();
            break;

          case u.DataType.CLOSE_SESSION:
            t = o();
            break;

          case u.DataType.EKV:
            t = r();
        }
        return t;
    };
}, function(e, t, n) {
    function a() {
        var e = d.getGlobalValue(_.APLUS), t = e.getMetaInfo("aplus-rhost-v"), n = i.getLogDomain();
        if (!t || !n) return m.logger({
            msg: "current request domain invalid, please check your aplus-rhost-v value inside metainfo!"
        }), "";
        var a = [ "//", t, n ].join(""), o = _.HTTPS;
        return /(\d+\.){3,}\d+/.test(a) && (o = "http:"), a = o + a;
    }
    function o(e) {
        var t = i.getContext(), n = e.success, a = e.fail, o = !1, r = null;
        e.success = function(e) {
            o || (r && clearTimeout(r), v(n) && n(e));
        }, e.fail = function() {
            o || (r && clearTimeout(r), v(a) && a(!1));
        };
        try {
            t.request(e);
        } catch (t) {
            try {
                dd && dd.httpRequest(e);
            } catch (e) {
                l().w("请求发送失败: ", e);
            }
        }
        r = setTimeout(function() {
            r && clearTimeout(r), o = !0, v(a) && a(o);
        }, e.timeout || y);
    }
    function r(e) {
        e && (p.set(e), p.save(), l().v("imprint: ", p.getImpObj()));
    }
    function s() {
        var e = i.getSdkType() + "/json", t = !1;
        try {
            my && (t = !0);
        } catch (e) {}
        return t ? {
            headers: {
                "Content-Type": e,
                "Msg-Type": e
            }
        } : {
            header: {
                "Content-Type": e,
                "Msg-Type": e
            }
        };
    }
    var i = n(8), u = n(20), c = n(23), p = n(24), l = n(14), g = n(13), f = n(25), d = n(2), h = n(15), _ = n(3), v = n(9), m = n(26), y = 5e3;
    e.exports = function(e, t, n, m) {
        var y = d.getGlobalValue(_.APLUS), b = u.getHeaderInfo();
        if ("my" === i.getPlatformType() || "taobao" === i.getPlatformType() ? (b.id_type = "alipay_id", 
        b.id_tracking = {
            alipay_id: y.getMetaInfo(_._ANONY_ID) || "",
            unionid: y.getMetaInfo("_dev_id") || "",
            userId: y.getMetaInfo(_._USER_ID) || ""
        }) : (b.id_type = "openid", b.id_tracking = {
            openid: y.getMetaInfo(_._ANONY_ID) || "",
            unionid: y.getMetaInfo("_dev_id") || "",
            userId: y.getMetaInfo(_._USER_ID) || ""
        }), p.get() && (b[_.IMPRINT] = p.get()), e.analytics) {
            var S = y.getMetaInfo(_._USER_ID), P = y.getMetaInfo("_user_nick");
            e.analytics.active_user = {
                puid: S,
                provider: P
            };
        }
        e.header = h.assign(b, e.header, {
            ts: Date.now(),
            traceId: h.getRandomStr(10) + Date.now() + h.getRandomStr(9)
        });
        var I = c(e), C = g.stringfy(I), A = a(), T = {
            url: A,
            method: "POST",
            data: f.encode(C),
            success: function(a) {
                var o = a.code || a.status || a.statusCode;
                200 === o || 413 === o ? (l().i("数据发送成功: ", e, C), r((a.data || {}).imprint), v(t) && t(a)) : (l().w("数据发送失败: ", C), 
                v(n) && n());
            },
            fail: function(e) {
                l().w("超时: ", C), v(n) && n();
            },
            complete: function() {
                v(m) && m();
            }
        };
        o(h.assign(T, s()));
    };
}, function(e, t) {
    function n(e, t) {
        var n = a(e, t);
        return e && e.id_tracking && (n[t.id_tracking || "id_tracking"] = a(e.id_tracking, i)), 
        n;
    }
    function a(e, t) {
        var n = {};
        for (var a in e) t[a] ? n[t[a]] = e[a] : n[a] = e[a];
        return n;
    }
    function o(e, t) {
        var n = {};
        if (e) for (var a in e) e[a] && (n[t[a]] = e[a]);
        return n;
    }
    var r = {
        sessions: "sn",
        ekvs: "e",
        active_user: "active_user"
    }, s = {
        sdk_type: "sdt",
        access: "ac",
        access_subtype: "acs",
        device_model: "dm",
        language: "lang",
        device_type: "dt",
        device_manufacturer: "dmf",
        device_name: "dn",
        platform_version: "pv",
        id_type: "it",
        font_size_setting: "fss",
        os_version: "ov",
        device_manuid: "did",
        platform_sdk_version: "psv",
        device_brand: "db",
        appkey: "ak",
        _id: "id",
        id_tracking: "itr",
        imprint: "imp",
        sdk_version: "sv",
        resolution: "rl",
        testToken: "ttn",
        miniappDebugId: "dk",
        pixel_ratio: "pr"
    }, i = {
        uuid: "ud",
        unionid: "und",
        openid: "od",
        anonymousid: "nd",
        alipay_id: "ad",
        device_id: "dd",
        userid: "puid"
    };
    e.exports = function(e) {
        return {
            h: n(e.header, s),
            a: o(e.analytics, r)
        };
    };
}, function(e, t, n) {
    function a() {
        var e = "", t = this;
        this.set = function(t) {
            e = t;
        }, this.get = function() {
            return e;
        }, this.getImpObj = function() {
            return r.parse(s.decode(e));
        }, this.getItem = function(e) {
            var n = t.getImpObj();
            return n ? n[e] || "" : "";
        }, this.load = function() {
            e = o().get(i.IMPRINT);
        }, this.save = function() {
            e && o().set(i.IMPRINT, e);
        };
    }
    var o = n(12), r = n(13), s = n(25), i = n(3), u = new a();
    e.exports = u;
}, function(e, t) {
    var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = function(e) {
        for (var t = {}, n = 0, a = e.length; n < a; n++) t[e.charAt(n)] = n;
        return t;
    }(n), o = String.fromCharCode, r = function(e) {
        var t;
        return e.length < 2 ? (t = e.charCodeAt(0), t < 128 ? e : t < 2048 ? o(192 | t >>> 6) + o(128 | 63 & t) : o(224 | t >>> 12 & 15) + o(128 | t >>> 6 & 63) + o(128 | 63 & t)) : (t = 65536 + 1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320), 
        o(240 | t >>> 18 & 7) + o(128 | t >>> 12 & 63) + o(128 | t >>> 6 & 63) + o(128 | 63 & t));
    }, s = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, i = function(e) {
        return e.replace(s, r);
    }, u = function(e) {
        var t = [ 0, 2, 1 ][e.length % 3], a = e.charCodeAt(0) << 16 | (e.length > 1 ? e.charCodeAt(1) : 0) << 8 | (e.length > 2 ? e.charCodeAt(2) : 0), o = [ n.charAt(a >>> 18), n.charAt(a >>> 12 & 63), t >= 2 ? "=" : n.charAt(a >>> 6 & 63), t >= 1 ? "=" : n.charAt(63 & a) ];
        return o.join("");
    }, c = function(e) {
        return e.replace(/[\s\S]{1,3}/g, u);
    }, p = function(e) {
        return c(i(e));
    }, l = function(e, t) {
        return t ? p(String(e)).replace(/[+\/]/g, function(e) {
            return "+" == e ? "-" : "_";
        }).replace(/\=/g, "") : p(String(e));
    }, g = new RegExp([ "[À-ß][-¿]", "[à-ï][-¿]{2}", "[ð-÷][-¿]{3}" ].join("|"), "g"), f = function(e) {
        switch (e.length) {
          case 4:
            var t = (7 & e.charCodeAt(0)) << 18 | (63 & e.charCodeAt(1)) << 12 | (63 & e.charCodeAt(2)) << 6 | 63 & e.charCodeAt(3), n = t - 65536;
            return o((n >>> 10) + 55296) + o((1023 & n) + 56320);

          case 3:
            return o((15 & e.charCodeAt(0)) << 12 | (63 & e.charCodeAt(1)) << 6 | 63 & e.charCodeAt(2));

          default:
            return o((31 & e.charCodeAt(0)) << 6 | 63 & e.charCodeAt(1));
        }
    }, d = function(e) {
        return e.replace(g, f);
    }, h = function(e) {
        var t = e.length, n = t % 4, r = (t > 0 ? a[e.charAt(0)] << 18 : 0) | (t > 1 ? a[e.charAt(1)] << 12 : 0) | (t > 2 ? a[e.charAt(2)] << 6 : 0) | (t > 3 ? a[e.charAt(3)] : 0), s = [ o(r >>> 16), o(r >>> 8 & 255), o(255 & r) ];
        return s.length -= [ 0, 0, 2, 1 ][n], s.join("");
    }, _ = function(e) {
        return e.replace(/[\s\S]{1,4}/g, h);
    }, v = function(e) {
        return d(_(e));
    }, m = function(e) {
        return v(String(e).replace(/[-_]/g, function(e) {
            return "-" == e ? "+" : "/";
        }).replace(/[^A-Za-z0-9\+\/]/g, ""));
    };
    t.encode = l, t.decode = m;
}, function(e, t, n) {
    "use strict";
    var a = "[aplus log]: ";
    t.logger = function(e) {
        e || (e = {});
        var t = e.level || "warn";
        console && console[t] && console[t](a + e.msg);
    }, t.debugLog = function(e) {
        var t = n(2).getGlobalValue("aplus");
        t && t.aplusDebug && this.logger(e);
    };
}, function(e, t, n) {
    var a = n(14);
    e.exports = function(e) {
        var t = e, n = [];
        this.enqueue = function(e) {
            "number" == typeof t && this.size() >= t && this.dequeue(), n.push(e);
        }, this.dequeue = function() {
            return n.shift();
        }, this.front = function() {
            return n[0];
        }, this.isEmpty = function() {
            return 0 === n.length;
        }, this.clear = function() {
            n.length = 0;
        }, this.size = function() {
            return n.length;
        }, this.items = function() {
            return n;
        }, this.print = function() {
            a().v("---queue: ", n.toString());
        };
    };
}, function(e, t, n) {
    "use strict";
    t.assign = n(29), t.makeCacheNum = function() {
        return Math.floor(268435456 * Math.random()).toString(16);
    }, t.isStartWith = function(e, t) {
        return 0 === e.indexOf(t);
    }, t.isEndWith = function(e, t) {
        var n = e.length, a = t.length;
        return n >= a && e.indexOf(t) == n - a;
    }, t.any = function(e, t) {
        var n, a = e.length;
        for (n = 0; n < a; n++) if (t(e[n])) return !0;
        return !1;
    }, t.isNumber = function(e) {
        return "number" == typeof e;
    }, t.isNaN = function(e) {
        return isNaN ? isNaN(e) : e !== e;
    }, t.isContain = function(e, t) {
        return e.indexOf(t) > -1;
    };
    var a = function(e) {
        var t, n = e.constructor === Array ? [] : {};
        if ("object" == typeof e) {
            if (JSON && JSON.parse) t = JSON.stringify(e), n = JSON.parse(t); else for (var o in e) n[o] = "object" == typeof e[o] ? a(e[o]) : e[o];
            return n;
        }
    };
    t.cloneDeep = a;
}, function(e, t) {
    e.exports = function(e, t) {
        return "function" != typeof Object.assign ? function(e) {
            for (var t = Object(e), n = 1; n < arguments.length; n++) {
                var a = arguments[n];
                if (null !== a) for (var o in a) Object.prototype.hasOwnProperty.call(a, o) && (t[o] = a[o]);
            }
            return t;
        }(e, t) : Object.assign({}, e, t);
    };
}, function(e, t, n) {
    function a(e, t) {
        if (!e) return "";
        var n = [];
        for (var a in t) n.push(a + "=" + t[a]);
        var o = n.join("&");
        return o ? e + "?" + o : e;
    }
    var o = n(2), r = "", s = {};
    t.getCurrentPagePath = function() {
        return r;
    }, t.setCurrentPath = function(e) {
        e && (r = e);
    }, t.getPageQuery = function(e) {
        if (e) return s[e];
    }, t.setPageQuery = function(e, t) {
        e && (s[e] = t);
    }, t.getFullPath = function(e) {
        return a(r, s[e]);
    }, t.getPageName = function(e) {
        var t = o.getGlobalValue("aplus"), n = t.getMetaInfo("pageConfig"), a = e || r;
        try {
            if (n && "object" == typeof n) for (var s in n) {
                if (s === a) break;
                if (n[s] && n[s].regRule) {
                    a = n[s].regRule.test(e) ? s : a;
                    break;
                }
            }
        } catch (e) {}
        return n[a];
    }, t.getPageCode = function(e) {
        return (this.getPageName(e) || {}).pageName;
    }, t.getVTRealtimeCode = function() {
        if (r) {
            var e = s[r] || {}, t = /^\$vt_/, n = decodeURIComponent(e.scene);
            return n && t.test(n) && n.replace(t, "");
        }
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        var n = m.getContext(), a = A.getCurrentPage(), o = a.route || a.is || "", r = a.options || {}, s = P.obj2param(r, !0);
        s && (o = o + "?" + s), e.query || (e.query = {}), e.query.$$_share_uid = n.aplus.getMetaInfo("_anony_id") || n.aplus.__ETAG__CNA__ID__, 
        e.query.$$_utm_medium = 3, e.query = S.assign({}, r, e.query);
        var i = e.path || o, u = "$$_share_uid=" + e.query.$$_share_uid + "&$$_utm_medium=3";
        return i.indexOf("?") > -1 ? e.path = i + "&" + u : e.path = i + "?" + u, e.status = "ready", 
        n.aplus_queue.push({
            action: y.PUBLISH,
            arguments: [ t, e ]
        }), e;
    }
    function o() {
        var e = m.getContext(), t = {
            status: "ready"
        };
        e.aplus_queue.push({
            action: y.PUBLISH,
            arguments: [ "onPullDownRefresh", t ]
        });
    }
    function r() {
        var e = m.getContext(), t = this, n = {
            status: "ready",
            context: t
        };
        e.aplus_queue.push({
            action: y.PUBLISH,
            arguments: [ "onReachBottom", n ]
        });
    }
    function s(e) {
        var t = m.getContext();
        try {
            C.setCurrentPath(this.route), e && C.setPageQuery(this.route, e), I().v("Page onLoad: ", this.route, e);
            var n = this;
            b.onAplusReady(t.aplus_queue, y.SUBSCRIBE, function() {
                t.aplus_queue.push({
                    action: y.PUBLISH,
                    arguments: [ "onLoad", {
                        status: "ready",
                        context: n
                    } ]
                });
                var e = A.getCurrentPage();
                b.resetFn(e, "setData", function(e) {
                    t.aplus_queue.push({
                        action: y.PUBLISH,
                        arguments: [ "onPageDataChanged", {
                            data: e,
                            context: n
                        } ]
                    });
                });
            });
        } catch (e) {
            I().w("onPageLoad: ", e);
        }
    }
    function i() {
        var e = m.getContext();
        try {
            C.setCurrentPath(this.route), b.onAplusReady(e.aplus_queue, y.SUBSCRIBE, function() {
                var t = this;
                e.aplus_queue.push({
                    action: y.PUBLISH,
                    arguments: [ "onShow", {
                        status: "ready",
                        context: t
                    } ]
                });
            });
        } catch (e) {
            I().w("onPageShow: ", e);
        }
    }
    function u() {
        var e = m.getContext();
        try {
            var t = this;
            e.aplus_queue.push({
                action: y.PUBLISH,
                arguments: [ "onReady", {
                    status: "ready",
                    context: t
                } ]
            });
        } catch (e) {
            I().w("onPageReady: ", e);
        }
    }
    function c() {
        var e = m.getContext();
        try {
            e.aplus_queue.push({
                action: y.PUBLISH,
                arguments: [ "onHide", {
                    status: "ready"
                } ]
            });
        } catch (e) {
            I().w("onPageHide: ", e);
        }
    }
    function p() {
        var e = m.getContext();
        try {
            e.aplus_queue.push({
                action: y.PUBLISH,
                arguments: [ "onUnload", {
                    status: "ready"
                } ]
            });
        } catch (e) {
            I().w("onPageUnload: ", e);
        }
    }
    function l(e) {
        var t = m.getContext();
        t.aplus_queue.push({
            action: y.PUBLISH,
            arguments: [ "onAplusClk", {
                status: "ready",
                event: e,
                context: this
            } ]
        });
    }
    function g(e) {
        var t = m.getContext(), n = this;
        t.aplus_queue.push({
            action: y.PUBLISH,
            arguments: [ "onAplusTouch", {
                status: "ready",
                context: n,
                event: e
            } ]
        });
    }
    function f(e) {
        if (e.onShareAppMessage) {
            var t = e.onShareAppMessage;
            e.onShareAppMessage = function(e) {
                var n = t.call(this, e) || {};
                return a(n, "onShareAppMessage");
            };
        }
    }
    function d(e) {
        if (e.onShareTimeline) {
            var t = e.onShareTimeline;
            e.onShareTimeline = function(e) {
                var n = t.call(this, e) || {};
                return a(n, "onShareTimeline");
            };
        }
    }
    function h() {
        try {
            var e = Page;
            Page = function(t) {
                b.rewriteFn(t, "onShow", i), b.rewriteFn(t, "onHide", c), b.rewriteFn(t, "onUnload", p), 
                b.rewriteFn(t, "onLoad", s), b.rewriteFn(t, "onReady", u), b.rewriteFn(t, "onPullDownRefresh", o), 
                b.rewriteFn(t, "onReachBottom", r), b.rewriteFn(t, "onAplusClk", l), b.rewriteFn(t, "onAplusTouch", g), 
                f(t), d(t), e(t);
            };
        } catch (e) {
            I().w("Page 重写异常");
        }
    }
    function _() {
        try {
            var e = Component;
            Component = function(t) {
                try {
                    t.methods = t.methods || {};
                    var n = t.methods;
                    b.rewriteFn(n, "onShow", i), b.rewriteFn(n, "onHide", c), b.rewriteFn(n, "onUnload", c), 
                    b.rewriteFn(n, "onLoad", s), f(n), e(t);
                } catch (n) {
                    e(t);
                }
            };
        } catch (e) {
            I().w("Component 重写异常");
        }
    }
    function v(e, t, n) {
        [ "object", "function" ].indexOf(typeof e) > -1 ? n() : console.log("typeof " + t + " is not object cant watchExp.");
    }
    var m = n(2), y = n(3), b = n(6), S = n(15), P = n(32), I = n(14), C = n(30), A = n(8);
    e.exports = function() {
        return {
            run: function() {
                v(Page, "Page", h), v(Component, "Component", _);
            }
        };
    };
}, function(e, t) {
    "use strict";
    function n(e, t) {
        var n, o, r, s = [], i = e.length;
        for (r = 0; r < i; r++) {
            n = e[r][0], o = e[r][1];
            var u = 0 === n.indexOf(a), c = u || t ? o : encodeURIComponent(o);
            s.push(u ? c : n + "=" + c);
        }
        return s.join("&");
    }
    t.arr2obj = function(e) {
        var t, n, a, o = {}, r = e.length;
        for (a = 0; a < r; a++) t = e[a][0], n = e[a][1], o[t] = n;
        return o;
    }, t.param2obj = function(e) {
        if ("object" == typeof e) return e;
        e || (e = "");
        for (var t = {}, n = e.split("&"), a = 0; a < n.length; a++) {
            var o = n[a], r = o.indexOf("="), s = o.split("="), i = o.length;
            if (2 === s.length) t[s[0]] = s[1] || ""; else if (r > 0) {
                var u = o.slice(0, r), c = o.slice(r + 1, i) || "";
                t[u] = c;
            } else t[s[0]] = "";
        }
        return t;
    };
    var a = "::-plain-::";
    t.s_plain_obj = a, t.arr2param = n, t.obj2param = function(e, t) {
        var n, o, r, s = [];
        for (n in e) n && e.hasOwnProperty(n) && (o = "" + e[n], r = n + "=" + o, t ? s.push(r) : s.push(0 === n.indexOf(a) ? o : r));
        return s.join("&");
    }, t.encodeGokeyValue = function(e) {
        return e;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(3), r = n(16);
    e.exports = function() {
        return {
            pushQueue: function(e, t) {
                var n = a.getGlobalValue("aplus_queue");
                n.push({
                    action: "aplus." + e,
                    arguments: t
                });
            },
            run: function() {
                var e = this, t = a.getGlobalValue(o.APLUS);
                r(o.openAPIs, function(n) {
                    t[n] = function() {
                        var t = [];
                        r(arguments, function(e) {
                            t.push(e);
                        });
                        var a = "enter" === n ? "_sendPV" : "_" + n;
                        e.pushQueue(a, t);
                    };
                });
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(8), o = n(2);
    e.exports = function() {
        return {
            _getNetworkType: function(e) {
                var t = a.getContext();
                t.getNetworkType ? t.getNetworkType({
                    success: function(t) {
                        e(t ? t.networkType : "");
                    }
                }) : e("");
            },
            _getSystemInfo: function(e) {
                var t = this, n = {}, o = t.SYSTEM_INFO || {};
                if (o && o.version) e(t.SYSTEM_INFO); else try {
                    a.getContext().getSystemInfo({
                        complete: function(a) {
                            a && a.version ? t._getNetworkType(function(n) {
                                a.networkType = n, t.SYSTEM_INFO = a, e(a);
                            }) : t._getNetworkType(function(t) {
                                n.networkType = t, e(n);
                            });
                        }
                    });
                } catch (t) {
                    e(n);
                }
            },
            _getAccountInfoSync: function() {
                var e = {};
                try {
                    var t = a.getContext();
                    if (t.getAccountInfoSync && t.canIUse("getAccountInfoSync")) {
                        var n = t.getAccountInfoSync(), o = n.miniProgram || {}, r = n.plugin || {};
                        e.appId = o.appId, e.appVersion = o.version || o.envVersion, e.pluginAppId = r.appId, 
                        e.pluginAppVersion = r.version;
                    } else if (t.getAppIdSync && t.canIUse("getAppIdSync")) {
                        var s = t.getAppIdSync() || {};
                        e.appId = s.appId || "";
                    }
                } catch (e) {}
                return e;
            },
            run: function(e, t) {
                var n = this;
                return this._getSystemInfo(function(e) {
                    e.userAgent = "-", e.os = e.platform ? e.platform.toLocaleUpperCase() : "", e.os_version = e.system ? e.system : "", 
                    e.access = e.brand ? e.brand : "";
                    var a = "";
                    e.host && "string" == typeof e.host.env && (a = e.host.env), e.host = a;
                    var r = n._getAccountInfoSync(), s = Object.assign({}, e, r), i = o.getGlobalValue("aplus");
                    i._aplus_client = s, t();
                }), 2e3;
            }
        };
    };
}, function(e, t, n) {
    var a = n(36), o = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = o.getGlobalValue("aplus");
                e.aplus_pubsub || (e.aplus_pubsub = a.create());
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(9), o = n(37), r = function(e) {
        for (var t = e.length, n = new Array(t - 1), a = 1; a < t; a++) n[a - 1] = e[a];
        return n;
    }, s = o.extend({
        callable: function(e) {
            if (!a(e)) throw new TypeError(e + " is not a function");
            return e;
        },
        create: function(e) {
            var t = new this();
            for (var n in e) t[n] = e[n];
            return t.handlers = [], t.pubs = {}, t;
        },
        setHandlers: function(e) {
            this.handlers = e;
        },
        subscribe: function(e, t) {
            this.callable(t);
            var n = this, a = n.pubs || {}, o = a[e] || [];
            if (o) for (var r = 0; r < o.length; r++) {
                var s = o[r]();
                t.apply(n, s);
            }
            var i = n.handlers || [];
            return e in i || (i[e] = []), i[e].push(t), n.setHandlers(i), n;
        },
        unsubscribe: function(e, t) {
            this.callable(t);
            try {
                var n = this.handlers[e];
                if (!n) return this;
                if ("object" == typeof n && n.length > 0) {
                    for (var a = 0; a < n.length; a++) {
                        var o = t.toString(), r = n[a].toString();
                        o === r && n.splice(a, 1);
                    }
                    this.handlers[e] = n;
                } else delete this.handlers[e];
            } catch (e) {}
            return this;
        },
        publish: function(e) {
            var t = r(arguments), n = this.handlers || [], o = n[e] ? n[e].length : 0;
            if (o > 0) for (var s = 0; s < o; s++) {
                var i = n[e][s];
                a(i) && i.apply(this, t);
            }
            return this;
        },
        cachePubs: function(e) {
            var t = this.pubs || {}, n = r(arguments);
            t[e] || (t[e] = []), t[e].push(function() {
                return n;
            });
        }
    });
    e.exports = s;
}, function(e, t, n) {
    "use strict";
    function a() {}
    var o = n(9);
    a.prototype.extend = function() {}, a.prototype.create = function() {}, a.extend = function(e) {
        return this.prototype.extend.call(this, e);
    }, a.prototype.create = function(e) {
        var t = new this();
        for (var n in e) t[n] = e[n];
        return t;
    }, a.prototype.extend = function(e) {
        var t = function() {};
        try {
            o(Object.create) || (Object.create = function(e) {
                function t() {}
                return t.prototype = e, new t();
            }), t.prototype = Object.create(this.prototype);
            for (var n in e) t.prototype[n] = e[n];
            t.prototype.constructor = t, t.extend = t.prototype.extend, t.create = t.prototype.create;
        } catch (e) {
            console && console.log(e);
        } finally {
            return t;
        }
    }, e.exports = a;
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(39)(this.options.context.aplus_config);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(3), r = n(40);
    e.exports = function(e) {
        var t = a.getGlobalValue(o.APLUS), n = t._$ = t._$ || {};
        n.is_terminal = !0, n.send_pv_count = 0, n.spm = {
            data: {}
        }, n.meta_info = r.qGet() || {}, t.globalConfig = e.globalConfig;
        for (var s in e.metaInfo) r.setMetaInfo(s, e.metaInfo[s]);
        t._$ = n, t.isInternational = function() {
            return !1;
        };
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        return s = p || {}, p;
    }
    function o() {
        return s || a();
    }
    function r(e, t) {
        return s || (s = {}), s[e] = t, !0;
    }
    var s, i = n(41), u = n(32), c = n(2), p = {}, l = "object", g = "string";
    t.getInfo = a, t.qGet = o, t.setMetaInfo = r;
    var f = function(e) {
        return s || (s = {}), s[e] || "";
    };
    t.getMetaInfo = f;
    var d = function(e, t) {
        if (e && t) {
            var n, a = function(n) {
                try {
                    var a = typeof t === g ? JSON.parse(t) : t;
                    s(e, Object.assign({}, n, a));
                } catch (e) {}
            }, o = function(n) {
                try {
                    var a = typeof t === g ? JSON.parse(t) : t;
                    s(e, n.concat(a));
                } catch (e) {}
            }, r = function(e) {
                e.constructor === Array ? o(e) : a(e);
            }, s = function(e, t) {
                h(e, t, {
                    from: "appendMetaInfo"
                });
            }, i = f(e);
            if ("aplus-exinfo" === e && (s(e, Object.assign({}, i, u.param2obj(t))), n = !0), 
            "aplus-page-properties" === e) {
                var c = t;
                if (i) for (var p in i) t[p] ? c[p] = Object.assign({}, i[p], t[p]) : c[p] = i[p];
                s(e, c), n = !0;
            }
            if (i) if (typeof i === l) r(i), n = !0; else try {
                var d = JSON.parse(i);
                typeof d === l && (r(d), n = !0);
            } catch (e) {}
            n || s(e, t);
        }
    };
    t.appendMetaInfo = d;
    var h = function(e, t) {
        var n, a, s = "OVERWRITE", u = s;
        if ("object" == typeof e ? (n = e.metaName, a = e.metaValue, u = e.mode || s) : (n = e, 
        a = t), u !== s) return d(n, a);
        if (r(n, a)) {
            var p = c.getGoldlogVal("_$") || {};
            p.meta_info = o();
            var l = c.setGoldlogVal("_$", p), g = [ "setMetaInfo", n, a, {} ];
            return i.doPubMsg(g), i.doCachePubs(g), l;
        }
    };
    t._setMetaInfo = h;
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = "function", r = function() {
        var e = a.getGlobalValue("aplus"), t = e.aplus_pubsub || {}, n = typeof t.publish === o;
        return n ? t : "";
    };
    t.doPubMsg = function(e) {
        var t = r();
        t && typeof t.publish === o && t.publish.apply(t, e);
    }, t.doCachePubs = function(e) {
        var t = r();
        t && typeof t.cachePubs === o && t.cachePubs.apply(t, e);
    }, t.doSubMsg = function(e, t) {
        var n = r();
        n && typeof n.subscribe === o && n.subscribe(e, t);
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(43)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(44), o = n(2), r = n(3), s = n(18), i = n(7), u = n(28), c = n(30);
    e.exports = function() {
        var e = o.getContext(), t = o.getGlobalValue("aplus"), n = [], p = function(e) {
            n = t.getMetaInfo("aplus-auto-clk");
            var o = c.getPageCode();
            s(n) && n.forEach(function(t) {
                u.isStartWith(t.cssSelector, ".") || (t.cssSelector = "." + t.cssSelector), t.spmB || (t.spmB = o);
                var n = e.context.createSelectorQuery().selectAll(t.cssSelector);
                "function" == typeof n.fields ? n.fields({
                    id: !0,
                    dataset: !0,
                    rect: !0,
                    scrollOffset: !0
                }, function(n) {
                    a.watch_click(e.event || e.res, i(n), t);
                }).exec() : n.boundingClientRect().exec(function(n) {
                    n && n.length > 0 && n[0] && a.watch_click(e.event, i(n[0]), t);
                });
            });
        };
        e.aplus_queue.push({
            action: r.SUBSCRIBE,
            arguments: [ "aplusReady", function(e) {
                "complete" === e && (n = t.getMetaInfo("aplus-auto-clk"));
            } ]
        }), e.aplus_queue.push({
            action: r.SUBSCRIBE,
            arguments: [ "onShow", function() {} ]
        }), e.aplus_queue.push({
            action: r.SUBSCRIBE,
            arguments: [ "onHide", function() {} ]
        }), e.aplus_queue.push({
            action: r.SUBSCRIBE,
            arguments: [ "onAplusClk", function(e) {
                "ready" === e.status && p(e);
            } ]
        }), t.aplus_pubsub.subscribe("onUnload", function(e) {
            "ready" === e.status;
        });
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        var n = r.getGoldlogVal("_aplus_auto_exp") || {}, a = n.hashMap || {};
        for (var s in a) for (var u = a[s] || [], c = 0; c < u.length; c++) {
            var p = u[c] || {}, l = p.expConfig || {};
            if (e.cssSelector === l.cssSelector) {
                var g = i({
                    index: t
                }, l);
                if (g === p.hash_value) return o(p.dataset);
            }
        }
    }
    var o = n(7), r = n(2), s = n(45), i = n(46), u = n(10);
    t.watch_click = function(e, t, n) {
        function o(e, t) {
            var n = {};
            e && (e.changedTouches ? n = e.changedTouches[0] : e.detail && (n = e.detail));
            var a = n.clientX || 0, o = n.clientY || 0, r = t.top, s = t.bottom;
            return t.scrollTop && (r += t.scrollTop, s += t.scrollTop), t.left < a && a < t.right && r < o && o < s;
        }
        for (var i = r.getGlobalValue("aplus"), c = 0; c < t.length; c++) {
            var p = t[c];
            if (o(e, p)) {
                var l = c + 1, g = p.dataset || a(n, l) || {}, f = {}, d = u.jsonLikeStr2JSON(g.trackerParams) || {};
                if (i.globalConfig.isAli) {
                    var h = g.tracker || n.cssSelector.replace(/\'|\"|\;|\:|\=|\[|\]|\.|\#|\-|\/|\|/g, "");
                    if (f = i._$.spm.data || {}, f.c = h, f.c && "0" !== f.c) {
                        var _ = "d" + l;
                        f.d = _;
                    }
                } else f.b = n.spmB, n.spmC ? f.c = n.spmC : f.c = d.spmC ? encodeURIComponent(d.spmC) : "", 
                n.spmD ? f.d = l ? n.spmD + "_" + l : n.spmD : f.d = d.spmD ? encodeURIComponent(d.spmD) : "";
                s.pushEvent("CLK", g, n, p, f);
            }
        }
    };
}, function(e, t, n) {
    function a(e, t, n) {
        var a = r.getGlobalValue("aplus") || {}, o = a.getMetaInfo;
        if ("function" == typeof o) {
            var u = o(e), c = {};
            return "function" == typeof u && (c = u(t ? i(t) : {}, n)), s.param2obj(c);
        }
        return {};
    }
    function o(e, t) {
        var n = "";
        try {
            var a = new Number(e);
            n = parseFloat(a.toFixed(t));
        } catch (t) {
            n = e;
        }
        return n;
    }
    var r = n(2), s = n(32), i = n(7), u = n(18), c = n(37), p = {}, l = 3, g = "POST", f = "EXP", d = c.extend({
        push: function(e) {
            var t = r.getGlobalValue("aplus");
            for (this.buffer.push(e); this.buffer.length >= this.pkgSize; ) {
                var n = this.buffer.splice(0, this.pkgSize);
                n.length > 0 && t.combineRecord(this.logkey, f, n, this.method);
            }
        }
    });
    t.pushEvent = function(e, t, n, s, i) {
        var c = r.getGlobalValue("aplus"), l = n.props || [], d = {}, h = {};
        if (t) for (var _ in t) h[_.toLowerCase().replace(/^data-/, "").replace(/-/g, "")] = t[_];
        if (l && u(l)) for (var v = 0; v < l.length; v++) {
            var m = l[v].toLowerCase().replace(/^data-/, "").replace(/-/g, "");
            d[l[v]] = h[m];
        } else d = Object.assign({}, h);
        s && e === f && (d = Object.assign({}, d, {
            _w: o(s.width, 2),
            _h: o(s.height, 2),
            _x: o(s.x, 2),
            _y: o(s.y, 2),
            _rate: o(s.viewabilityRate || s.intersectionRatio, 2),
            _viewability: "intersection"
        })), n._vt && (d._vt = n._vt);
        var y = e === f ? "aplus-auto-exp-userfn" : "aplus-auto-clk-userfn", b = a(y, s, n.cssSelector);
        b.spm || (c.globalConfig.isAli && i && i.a && i.b ? b.spm = [ i.a, i.b, i.c || "0", i.d || "0" ].join(".") : b.spm = i && i.b ? i : void 0);
        var S = {}, P = t.trackerParams || t["tracker-params"];
        if (P) try {
            var I = JSON.parse(P);
            d = Object.assign(d, I), delete d.trackerParams, delete d.trackerparams;
        } catch (e) {}
        "EXP" === e && c.globalConfig.isAli && p[n.logkey] ? (S = Object.assign({}, {
            exargs: d
        }, b), p[n.logkey].push(S)) : (S = Object.assign({}, d, b, n.customArgs), c.record(n.logkey, e, S, g));
    }, t.watchRecord = function(e) {
        var t = r.getGlobalValue("aplus");
        t.globalConfig.isAli && e && e.forEach(function(e) {
            p.hasOwnProperty(e.logkey) || (p[e.logkey] = d.create({
                length: 0,
                buffer: [],
                logkey: e.logkey,
                pkgSize: "number" == typeof e.pkgSize && e.pkgSize || l,
                method: e.method || g
            }));
        });
    }, t.clearRecord = function() {
        var e = r.getGlobalValue("aplus");
        if (e.globalConfig.isAli) for (var t in p) {
            var n = p[t].buffer;
            n.length > 0 && (e.combineRecord(t, f, n, g), p[t].buffer = []);
        }
    };
}, function(e, t) {
    e.exports = function(e, t) {
        var n = [ t.logkey, t.cssSelector, t.positionSelector ];
        return e.id && n.push(e.id), e.dataset && n.push(JSON.stringify(e.dataset)), n = n.join("_");
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(48)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(49), r = n(50), s = n(3), i = n(8), u = {};
    e.exports = function() {
        function e(e, t, n) {
            var a = function(n, a) {
                if ("aplus-auto-exp" === n) {
                    var s = r.getAutoExpConfig(a);
                    if (JSON.stringify(s) === JSON.stringify(f)) return;
                    f = s, a && f && f.length > 0 && o.watch_exposure(e, f, t);
                }
            };
            c.aplus_queue.push({
                action: n,
                arguments: [ "setMetaInfo", a ]
            });
        }
        function t(e, t) {
            f = g.getMetaInfo("aplus-auto-exp"), setTimeout(function() {
                o.watch_exposure(e, f, t);
            }, 0);
        }
        function n(e) {
            try {
                var n = i.getCurrentPage(), a = n.route || n.is, o = u[a], r = JSON.stringify(e.data);
                o !== r && (u[a] = r, t(e.context, 0));
            } catch (e) {}
        }
        var c = a.getContext(), p = 0, l = 0, g = a.getGlobalValue("aplus");
        if (!g._aplus_auto_exp) {
            g._aplus_auto_exp = {
                hashMap: {}
            };
            var f = [];
            c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onShow", function(n) {
                    if ("ready" === n.status) {
                        e(n.context, 1, s.SUBSCRIBE), 0 === p ? (t(n.context, 1), p = 1) : t(n.context, 0);
                        try {
                            var a = i.getCurrentPage(), o = a.route || a.is;
                            u[o] = o;
                        } catch (e) {}
                    }
                } ]
            }), c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onAplusTouch", function(e) {
                    "ready" === e.status && (0 === l ? (l = 1, t(e.context, 1)) : n(e));
                } ]
            }), c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onPageDataChanged", function(e) {
                    setTimeout(function() {
                        n(e);
                    }, 200);
                } ]
            }), c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onHide", function(t) {
                    "ready" === t.status && (u = {}, p = 0, l = 0, e(t.context, 1, s.UNSUBSCRIBE), o.clear());
                } ]
            }), c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onUnload", function(e) {
                    "ready" === e.status && (u = {}, o.clear());
                } ]
            });
        }
    };
}, function(e, t, n) {
    "use strict";
    var a, o = n(2), r = n(50), s = n(7), i = n(45), u = n(46), c = [], p = n(8), l = n(28), g = n(10), f = n(51), d = n(30);
    t.watch_exposure = function(e, t, n, h) {
        function _(o) {
            function r(e) {
                var t = u[0];
                t && !l.isStartWith(u[0], ".") && (t = "." + t);
                try {
                    var n = a.createSelectorQuery().selectAll(t);
                    "function" == typeof n.fields ? n.fields({
                        dataset: !0,
                        id: !0
                    }, function(t) {
                        if (t && f.isArray(t)) {
                            for (var n = 0; n < t.length; n++) t[n].index = "" + (n + 1);
                            e({
                                elements: t,
                                type: "COMMON"
                            });
                        }
                    }).exec() : console.warn("该平台不支持自动曝光");
                } catch (e) {
                    console.warn("该平台不支持自动曝光, err = ", e);
                }
            }
            if (o < t.length) {
                var i = t[o];
                I = 0, c.forEach(function(e) {
                    e.subject[0] === i.cssSelector && e.subject[1] === i.positionSelector && (I = 1);
                });
                var u = [ i.cssSelector, i.positionSelector ];
                r(function(t) {
                    for (var a = t.elements || [], r = 0; r < a.length; r++) {
                        var p = a[r];
                        if (0 === I || 0 === n) {
                            var l = y(e);
                            l.subject = u, c.push(l), p.index && !v(p, i) && (m(p, i), b(l, i, p.index, function(e, t, n) {
                                if (n) {
                                    var a = s(e);
                                    a.index = "" + n;
                                    var o = s(a.dataset);
                                    m({
                                        id: a.id,
                                        index: a.index,
                                        dataset: o
                                    }, t), S(a, o, i);
                                }
                            }));
                        }
                    }
                    _(++o);
                });
            }
        }
        function v(e, t) {
            var n = u(e, t), a = e.index;
            return A[t.logkey] && A[t.logkey].forEach(function(e) {
                if (e.hash_value === n && e.index === a) return !0;
            }), !1;
        }
        function m(e, t) {
            var n = u(e, t);
            try {
                var a = e.index;
                if (A[t.logkey]) {
                    var o = 0;
                    A[t.logkey].forEach(function(t) {
                        t.hash_value === n && (o = 1, e.id && (t.id = e.id), e.dataset && (t.dataset = e.dataset), 
                        e.status && (t.status = e.status));
                    }), o || A[t.logkey].push({
                        id: e.id,
                        hash_value: n,
                        status: 0,
                        expConfig: t,
                        dataset: e.dataset,
                        index: a
                    });
                } else A[t.logkey] = [ {
                    id: e.id,
                    hash_value: n,
                    status: 0,
                    expConfig: t,
                    dataset: e.dataset,
                    index: a
                } ];
            } catch (e) {
                console.log("error === ", e);
            }
        }
        function y(e) {
            var t = {
                thresholds: [ r.AUTO_AT_VIEW_RATE ],
                initialRatio: 0
            }, n = !1;
            try {
                my && (n = !0);
            } catch (e) {}
            return n ? (t.selectAll = !0, a.createIntersectionObserver(t)) : (t.observeAll = !0, 
            a.createIntersectionObserver(e, t));
        }
        function b(e, t, n, a) {
            var o = t.cssSelector;
            o && !l.isStartWith(o, ".") && (o = "." + o), t.positionSelector ? e.relativeTo(t.positionSelector).observe(o, function(e) {
                try {
                    a(e, t, n);
                } catch (e) {
                    console.log("errorMessage: ", e);
                }
            }) : e.relativeToViewport().observe(o, function(e) {
                try {
                    a(e, t, n);
                } catch (e) {
                    console.log("errorMessage: ", e);
                }
            });
        }
        function S(e, t, n) {
            var a = o.getGlobalValue("aplus"), r = new Date().getTime(), u = P(r, e, n);
            if (u && u.length > 0) {
                var c = u[0], p = t.tracker || n.cssSelector.replace(/\'|\"|\;|\:|\=|\[|\]|\.|\#|\-|\/|\|/g, ""), l = {}, f = g.jsonLikeStr2JSON(t.trackerParams || {}) || {}, h = c.index;
                if (a.globalConfig.isAli) {
                    if (l = s(a._$.spm.data || {}), l.c = p, l.c && "0" !== l.c) {
                        var _ = "d" + h;
                        l.d = _;
                    }
                } else d.getPageCode() && (l.b = d.getPageCode()), n.spmC ? l.c = n.spmC : l.c = f.spmC ? encodeURIComponent(f.spmC) : "", 
                n.spmD ? l.d = h ? n.spmD + "_" + h : n.spmD : l.d = f.spmD ? encodeURIComponent(f.spmD) : "";
                i.pushEvent("EXP", t, n, Object.assign({}, e, {
                    x: c.x,
                    y: c.y,
                    width: c.width,
                    height: c.height,
                    hash_value: c.hash_value
                }), l);
            }
        }
        function P(e, t, n) {
            var a = o.getGoldlogVal("_aplus_auto_exp") || {}, s = a.hashMap || {}, i = [];
            for (var c in s) for (var p = s[c] || [], l = 0; l < p.length; l++) {
                var g = u(t, n), f = p[l] || {};
                if (0 === f.status && f.expConfig && g === f.hash_value) {
                    var d = t.boundingClientRect || {};
                    d.width && d.height && (f.dataset = t.dataset, f.x = d.left, f.y = d.top, f.width = d.width, 
                    f.height = d.height, f.size = d.width * d.height, t.intersectionRatio >= r.AUTO_AT_VIEW_RATE && (f.exposureTime = e, 
                    f.status = 1, i.push(f)));
                }
            }
            return i;
        }
        a && !h || (a = p.getContext());
        var I, C = o.getGoldlogVal("_aplus_auto_exp") || {}, A = C.hashMap || {};
        i.watchRecord(t), _(0);
    }, t.reset = function() {}, t.clear = function() {
        i.clearRecord();
        for (var e = 0; e < c.length; e++) c[e].disconnect();
        c = [];
        var t = o.getGoldlogVal("_aplus_auto_exp") || {}, n = t.hashMap || {};
        for (var a in n) delete n[a];
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        return aplus && aplus.getMetaInfo ? aplus.getMetaInfo(e) : r.getMetaCnt(e);
    }
    var o = n(51), r = n(52), s = n(26);
    t.DATA_APLUS_AE_KEY = "data-aplus-ae", t.DATA_APLUS_AC_KEY = "data-aplus-clk", t.DATA_APLUS_SPM_ANCHOR_ID_KEY = "data-spm-anchor-id", 
    t.DATA_APLUS_VT_ITEM_INDEX_KEY = "data-aplus-vt-pos", t.LOOP_TIME = 1e3, t.getDefaultRequestCfg = function() {
        return {
            method: "POST",
            pkgSize: 10
        };
    };
    var i = function(e) {
        var t = e;
        try {
            var n = a("aplus-auto-exp-visible");
            n && (t = parseFloat(n)), t <= 0 && (t = e);
        } catch (n) {
            t = e;
        } finally {
            return t;
        }
    };
    t.AUTO_AT_VIEW_RATE = i(.3);
    var u = function(e) {
        var t = e;
        try {
            var n = a("aplus-auto-exp-duration"), o = parseInt(n);
            o + "" != "NaN" && (t = o);
        } catch (e) {} finally {
            return t;
        }
    };
    t.EXP_DURATION = u(300);
    var c = function(e, t) {
        var n, r = [], i = [];
        try {
            n = t || a(e);
            var u = [];
            if (n && "string" == typeof n) try {
                u = JSON.parse(n);
            } catch (e) {
                u = JSON.parse(n.replace(/'/g, '"'));
            } else "object" == typeof n && n.constructor === Array && (u = n);
            if (u && u.constructor === Array) for (var c = 0; c < u.length; c++) {
                var p = u[c] || {}, l = p.logkey || "", g = p.tag ? p.tag : "", f = p.filter, d = p.cssSelector, h = d || g && f;
                if (!l || !h) throw new Error("meta " + e + " config error, " + JSON.stringify(p));
                f = "string" == typeof f ? f.split("=") : [];
                var _ = g;
                if (f.length >= 2 ? _ += "[" + f.shift() + '="' + decodeURIComponent(f.join("")) + '"]' : 1 == f.length && f[0] && (_ += "[" + decodeURIComponent(f[0]) + "]"), 
                d && (_ += d), p.elementSelector = _, o.indexof(i, _) > -1) throw new Error("meta " + e + " config error, tag_filter_cssSelector " + _ + " repeated");
                i.push(_), r.push(p);
            }
        } catch (e) {
            s.logger({
                msg: e
            });
        } finally {
            return r;
        }
    };
    t.getAutoExpConfig = function(e) {
        return c("aplus-auto-exp", e) || [];
    }, t.getAutoExpUserFn = function() {
        var e = a("aplus-auto-exp-userfn");
        if (e) {
            var t = window[e] || e;
            if ("function" == typeof t) return t;
        }
        return null;
    }, t.isThrottleWatchDom = function() {
        var e = !1;
        try {
            e = "throttle" === a("aplus-auto-exp-watchdom");
        } catch (e) {}
        return e;
    }, t.getAutoClkConfig = function(e) {
        return c("aplus-auto-clk", e) || [];
    }, t.getAutoClkUserFn = function() {
        var e = a("aplus-auto-clk-userfn");
        if (e) {
            var t = window[e] || e;
            if ("function" == typeof t) return t;
        }
        return null;
    };
}, function(e, t) {
    "use strict";
    t.indexof = function(e, t) {
        var n = -1;
        try {
            n = e.indexOf(t);
        } catch (o) {
            for (var a = 0; a < e.length; a++) e[a] === t && (n = a);
        } finally {
            return n;
        }
    }, t.itemMatch = function(e, t) {
        var n = !1;
        try {
            if (!this.isArray(e)) return n;
            n = e.some(function(e) {
                return e && e.length > 0 && t.indexOf(e) !== -1;
            });
        } catch (o) {
            for (var a = 0; a < e.length; a++) if (t.indexOf(e[a]) !== -1) {
                n = !0;
                break;
            }
        }
        return n;
    }, t.isArray = function(e) {
        return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        return s = s || document.getElementsByTagName("head")[0], i && !e ? i : s ? i = s.getElementsByTagName("meta") : [];
    }
    function o(e, t) {
        var n, o, r, s = a(), i = s.length;
        for (n = 0; n < i; n++) o = s[n], u.tryToGetAttribute(o, "name") === e && (r = u.tryToGetAttribute(o, t || "content"));
        return r || "";
    }
    function r(e) {
        var t = {
            isonepage: "-1",
            urlpagename: ""
        }, n = e.qGet();
        if (n && n.hasOwnProperty("isonepage_data")) t.isonepage = n.isonepage_data.isonepage, 
        t.urlpagename = n.isonepage_data.urlpagename; else {
            var a = o("isonepage") || "-1", r = a.split("|");
            t.isonepage = r[0], t.urlpagename = r[1] ? r[1] : "";
        }
        return t;
    }
    var s, i, u = n(53);
    t.getMetaTags = a, t.getMetaCnt = o, t.getOnePageInfo = r;
}, function(e, t) {
    "use strict";
    t.tryToGetAttribute = function(e, t) {
        return e && e.getAttribute ? e.getAttribute(t) || "" : "";
    };
    var n = function(e, t, n) {
        if (e && e.setAttribute) try {
            e.setAttribute(t, n);
        } catch (e) {}
    };
    t.tryToSetAttribute = n, t.tryToRemoveAttribute = function(e, t) {
        if (e && e.removeAttribute) try {
            e.removeAttribute(t);
        } catch (a) {
            n(e, t, "");
        }
    };
}, function(e, t, n) {
    var a = n(2), o = n(18), r = n(3), s = n(8);
    e.exports = function() {
        return {
            resetLastPageSpm: function() {
                var e = a.getGlobalValue(r.APLUS, {}), t = e._$.spm || {};
                t.spm_cnt = "";
            },
            listen: function() {
                var e = this, t = a.getGlobalValue(r.APLUS_QUEUE, []);
                t.push({
                    action: r.SUBSCRIBE,
                    arguments: [ "onShow", function(e) {
                        if ("ready" === e.status) {
                            var t = a.getGlobalValue(r.APLUS, {}), n = t.getMetaInfo("pages"), i = s.getCurrentPage(), u = i.route || i.is;
                            if (o(n)) for (var c = 0; c < n.length; c++) {
                                var p = n[c];
                                if (p.matchUrl === u) {
                                    t.setPageSPM(p.spmA, p.spmB);
                                    break;
                                }
                            }
                        }
                    } ]
                }), t.push({
                    action: r.SUBSCRIBE,
                    arguments: [ "clearPageSPM", function() {
                        e.resetLastPageSpm();
                    } ]
                }), t.push({
                    action: r.SUBSCRIBE,
                    arguments: [ "setPageSPM", function(e) {
                        try {
                            var t = a.getGlobalValue(r.APLUS, {}), n = t._$.spm || {}, o = getCurrentPages() || [], s = e.spmCnt ? e.spmCnt.split(".") : [ n.data.a || "0", n.data.b || "0" ];
                            2 === s.length && (s = s.concat([ "0", "0" ]));
                            var i = s.join("."), u = o[o.length - 1], c = o[o.length - 2] || {}, p = o[o.length - 3] || {};
                            o.length > 0 && u && (o[o.length - 1].spm = i);
                            var l = n.data && n.data.a ? [ n.data.a, n.data.b, n.data.c || "0", n.data.d || "0" ].join(".") : "";
                            n.data.a = s[0] ? "" + s[0] : "0", n.data.b = s[1] ? "" + s[1] : "0", n.data.c = "0", 
                            n.data.d = "0", n.page_referrer = o.length > 1 && u ? u.route || u.is : "", n.spm_cnt = i;
                            var g = t.spm_orign || n.spm_orign;
                            n.spm_pre = e.spmPre || n.spm_url || p.spm || "", n.spm_url = e.spmUrl || l || c.spm || g || "", 
                            t._$.spm = n;
                        } catch (e) {
                            console.log("setPageSPM error, the errorInfo is ", e);
                        }
                    } ]
                });
            },
            run: function() {
                this.listen();
            }
        };
    };
}, function(e, t, n) {
    e.exports = function() {
        return {
            run: function() {
                var e = n(56), t = e.create();
                t.run(this.options);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        if (u().v("event: ", e, t), i.checkEvent(e, t)) {
            var a = n(59)(e, t);
            r().addEvent(a), s().send(i.DataType.EKV, {
                noCache: !1
            }, function() {
                u().i("event send success: ", e, a);
            });
        }
    }
    var o = n(57), r = n(17), s = n(19), i = n(15), u = n(14), c = n(7), p = n(28), l = n(2), g = n(8), f = n(3), d = n(30);
    e.exports = o.extend({
        handlerMiddleware: function(e) {
            var t = l.getGlobalValue("aplus");
            u().setDebug(!!t.getMetaInfo("DEBUG"));
            var n, o, r, s = e && e.userdata && e.userdata.logkey, h = e && e.userdata && e.userdata.gmkey, _ = e && e.what_to_send && e.what_to_send.logdata && e.what_to_send.logdata || {}, v = t.getMetaInfo("globalproperty");
            if ("CLK" === h || "EXP" === h || "OTHER" === h || s === f.APP_START || s === f.APP_END) {
                n = c(e && e.userdata && e.userdata.gokey || {}), o = _.gokey || {};
                var m, y = {};
                "$$_share" === s && (y.refer_page = _.url, y.share_type = n.share_type), o.scene && (y.scene = g.getPlatformType() + "_" + o.scene), 
                r = n["data-pagename"] || n.page_name || n.spm && n.spm.b || t.getPageName() || _.url || "", 
                y.page_name = r, y.url = _.url || "-", (n.page_name || n["data-pagename"]) && (delete n.page_name, 
                delete n["data-pagename"]), v && (y.gp = v), n.spm && (y["spm-cnt"] = [ encodeURIComponent(r), n.spm.c, n.spm.d ].filter(function(e) {
                    return !!e;
                }).join("."), delete n.spm);
                var b = c(n);
                for (var S in b) "string" == typeof S && i.startsWith(S, "_") && (y[S] = b[S], delete n[S]);
                m = s === f.APP_START || s === f.APP_END ? p.assign(y, n) : p.assign(y, {
                    cusp: n
                }), a(s, m);
            } else if ("2001" === _.event_code) {
                var P = {}, I = f.PAGE_START;
                o = c(_.gokey || {}), r = o.page_name || t.getPageName() || d.getPageCode(_.url) || _.url || "", 
                P.r = _.arg1 || _.logkey || "-", P.page_name = r, P.url = _.url || "-", P.ref_url = _.pre, 
                o._page_auto_pv ? (P.is_auto = 1, delete o._page_auto_pv) : P.is_auto = 0, o.duration && (P.duration = o.duration, 
                delete o.duration), v && (P.gp = v), o.scene && (P.scene = g.getPlatformType() + "_" + o.scene), 
                o = i.deleteInfo(o, [ "_anony_id", "_dev_id", "_session_id", "_user_id", "_user_nick", "uaid", "pvid", "scene" ]), 
                P["spm-cnt"] = encodeURIComponent(r), o._page_auto_id && (I = o._page_auto_id, delete o._page_auto_id), 
                o.page_start && (P.page_start = o.page_start, delete o.page_start), o.page_name, 
                a(I, p.assign(P, {
                    cusp: o
                }));
            }
        },
        run: function() {
            this.watchLOG();
        }
    });
}, function(e, t, n) {
    "use strict";
    var a = n(37), o = n(58), r = n(3);
    e.exports = a.extend({
        subscribeLogs: function(e, t) {
            o.pushIntoGoldlogQueue(r.SUBSCRIBE, [ e, function(e) {
                e.status === r.COMPLETE && t(e);
            } ]);
        },
        getLogicSymbol: function() {
            return "ALI" === this.format ? "&" : "||";
        },
        handlerMiddleware: function() {},
        watchLOG: function() {
            var e = this;
            e.subscribeLogs(r.MW_CHANGE_PV, function(t) {
                e.handlerMiddleware(t, "pv");
            }), e.subscribeLogs(r.MW_CHANGE_HJLJ, function(t) {
                e.handlerMiddleware(t, r.APLUS);
            });
        },
        run: function() {
            this.watchLOG();
        }
    });
}, function(e, t, n) {
    "use strict";
    var a = n(2);
    t.pushIntoGoldlogQueue = function(e, t) {
        var n = a.getGlobalValue("aplus_queue"), o = a.getGlobalValue("aplus"), r = e.split("."), s = o[r[1]], i = s ? s[r[2]] : null;
        o && 2 === r.length && s ? s.apply(o, t) : 3 === r.length && i ? i.apply(s, t) : n.push({
            action: e,
            arguments: t
        });
    };
}, function(e, t, n) {
    var a = n(2);
    e.exports = function(e, t) {
        if ("string" != typeof e) return null;
        var n = Object.create(null);
        n.id = e, t && t.ts || (n.ts = Date.now());
        var o = typeof t;
        if ("object" === o) for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);
        var s = a.getGlobalValue("aplus"), i = s.getMetaInfo("globalproperty");
        return i && (n.gp = i), n;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(16);
    e.exports = function() {
        return {
            getLogConfig: function() {
                var e = {}, t = this.options.config.plugins;
                for (var n in t) e[n] = {
                    plugins: t[n],
                    context: {}
                }, a(t[n], function(t) {
                    e[n].context[t.name] = t.config || {};
                });
                return e;
            },
            run: function() {
                this.options.context.logConfig = this.getLogConfig(), this.options.context.logConfig.pageLoadTime = this.options.context.PAGE_LOAD_TIME;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(8), r = n(3), s = n(62), i = "EMPTY_CNA";
    e.exports = function() {
        return {
            _syncEtag: function(e) {
                var t, n = a.getGlobalValue(r.APLUS), u = this, c = function(t) {
                    var o = t && t.data ? t.data.cna : "";
                    o ? (a.setGoldlogVal(g, o), e(o)) : "Y" === n.fetchEtagStatus ? n.aplus_pubsub.subscribe("etag", function(t) {
                        e(t);
                    }) : f();
                }, p = n.getMetaInfo("aplus-rhost-v");
                p && (t = s.getUrl({
                    egUrl: (p.indexOf("//") === -1 ? "//" + p : p) + "/eg.js"
                }), u.options.context.etag && (u.options.context.etag.egUrl = t));
                var l = o.getContext(), g = n.globalConfig.ETAG_STORAGE_KEY, f = function() {
                    t && (n.fetchEtagStatus = "Y", o.request(t, {
                        dataType: "text",
                        requestMethodName: "request"
                    }, function(t) {
                        n.fetchEtagStatus = "N";
                        var o = "";
                        try {
                            var r = t.data || "", s = r.split(";");
                            if (s.length > 1) {
                                var u = s[1], c = u.split("=");
                                o = c[1] || "", o = o.replace(/\"/g, ""), a.setGoldlogVal(g, o), l.setStorage({
                                    key: g,
                                    data: {
                                        cna: o
                                    }
                                }), n.aplus_pubsub.publish("etag", o), n.aplus_pubsub.cachePubs("etag", o);
                            }
                        } catch (e) {
                            console.log(e);
                        }
                        o || (o = i), e(o);
                    }, function(e) {
                        console.log(e);
                    }));
                }, d = a.getGoldlogVal(g);
                d ? e(d) : l.getStorage({
                    key: g,
                    success: function(e) {
                        c(e);
                    },
                    fail: function(e) {
                        c(e);
                    }
                });
            },
            run: function(e, t) {
                var n = this, o = a.getGlobalValue("aplus"), r = o.getMetaInfo("aplus-etag-timeout"), s = 200, i = s;
                try {
                    i = parseInt(r), isNaN(i) && (i = s);
                } catch (e) {}
                if (this._syncEtag(function(e) {
                    n.options.context.etag && (n.options.context.etag.cna = e), i >= 200 && t(e);
                }), !(i < 200)) return i;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(63);
    t.getUrl = function(e) {
        var t = a.getUrl(e && e.egUrl);
        if (0 !== t.indexOf("http")) {
            var n = "https:";
            /(\d+\.){3,}\d+/.test(t) && (n = "http:"), t = n + t;
        }
        return t;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(64), o = n(65), r = n(2);
    e.exports = {
        tryToDecodeURIComponent: function(e, t) {
            var n = t || "";
            if (e) try {
                n = decodeURIComponent(e);
            } catch (e) {}
            return n;
        },
        parseSemicolonContent: function(e, t, n) {
            t = t || {};
            var o, r, s = e.split(";"), i = s.length;
            for (o = 0; o < i; o++) {
                r = s[o].split("=");
                var u = a.trim(r.slice(1).join("="));
                t[a.trim(r[0]) || ""] = n ? u : this.tryToDecodeURIComponent(u);
            }
            return t;
        },
        nodeListToArray: function(e) {
            var t, n;
            try {
                return t = [].slice.call(e);
            } catch (o) {
                t = [], n = e.length;
                for (var a = 0; a < n; a++) t.push(e[a]);
                return t;
            }
        },
        getLsCna: function(e, t) {
            if (o.set && o.test()) {
                var n = "", a = o.get(e);
                if (a) {
                    var r = a.split("_") || [];
                    n = t ? r.length > 1 && t === r[0] ? r[1] : "" : r.length > 1 ? r[1] : "";
                }
                return decodeURIComponent(n);
            }
            return "";
        },
        setLsCna: function(e, t, n) {
            n && o.set && o.test() && o.set(e, t + "_" + encodeURIComponent(n));
        },
        getUrl: function(e) {
            var t = r.getGlobalValue("aplus"), n = e || "//log.mmstat.com/eg.js";
            try {
                var a = t.getMetaInfo("aplus-rhost-v"), o = /[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/, s = a.match(o);
                s && s[0] && (n = "//" + s[0] + "/eg.js");
            } catch (e) {}
            return n;
        }
    };
}, function(e, t) {
    "use strict";
    function n(e) {
        return "string" == typeof e ? e.replace(/^\s+|\s+$/g, "") : "";
    }
    t.trim = n;
}, function(e, t) {
    "use strict";
    e.exports = {
        set: function(e, t) {
            try {
                return localStorage.setItem(e, t), !0;
            } catch (e) {
                return !1;
            }
        },
        get: function(e) {
            try {
                return localStorage.getItem(e);
            } catch (e) {
                return "";
            }
        },
        test: function() {
            var e = "grey_test_key";
            try {
                return localStorage.setItem(e, 1), localStorage.removeItem(e), !0;
            } catch (e) {
                return !1;
            }
        },
        remove: function(e) {
            localStorage.removeItem(e);
        }
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(3);
    e.exports = function() {
        return {
            getMetaInfo: function() {
                var e = a.getGoldlogVal("_$") || {}, t = e.meta_info;
                return t;
            },
            getAplusWaiting: function() {
                var e = this.getMetaInfo() || {};
                return e["aplus-waiting"];
            },
            run: function(e, t) {
                var n = this.options.config || {}, a = this.getAplusWaiting();
                if (a && n.is_auto) switch (a = this.getAplusWaiting() + "", this.options.context.when_to_sendpv = {
                    aplusWaiting: a
                }, a) {
                  case o._USER_ID:
                  case o._ANONY_ID:
                  case "MAN":
                    return "done";

                  case "1":
                    return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                        t();
                    }, 6e3), 6e3;

                  default:
                    var r = 1 * a;
                    if (r + "" != "NaN") return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                        t();
                    }, r), r;
                }
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(26), r = n(8), s = n(3);
    e.exports = function() {
        return {
            getMetaInfo: function(e) {
                var t = a.getGoldlogVal("_$") || {};
                return (t.meta_info || {})[e];
            },
            getHostUrl: function() {
                var e = this.getMetaInfo("aplus-rhost-v"), t = r.getLogDomain();
                if (!e || !t) return o.logger({
                    msg: "current request domain invalid, please check your aplus-rhost-v value inside metainfo!"
                }), "";
                var n = [ "//", e, t ];
                return n.join("");
            },
            run: function() {
                this.options.context.where_to_send.method = "POST";
                var e = this.getHostUrl();
                if (!e) return "done";
                if (0 !== e.indexOf("//")) return o.logger({
                    msg: "上报域名无效: " + e
                }), "done";
                var t = s.HTTPS;
                /(\d+\.){3,}\d+/.test(e) && (t = "http:"), e = t + e, this.options.context.where_to_send.url = e;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(3), r = n(26), s = n(8), i = n(69), u = n(71), c = o.SPM_CNT, p = o.SPM_URL, l = o.SPM_PRE;
    e.exports = function() {
        return {
            getCommonParams: function() {
                var e = a.getGlobalValue(o.APLUS), t = this.options.context || {}, n = t.etag || {}, g = t.userdata || {}, f = a.getGoldlogVal("_$") || {}, d = f.spm || {}, h = this.options.config || {}, _ = e.getMetaInfo("platformType") || s.getPlatformType(), v = {
                    _dev_id: e.getMetaInfo("_dev_id"),
                    _anony_id: e.getMetaInfo(o._ANONY_ID),
                    _user_id: e.getMetaInfo(o._USER_ID),
                    _user_nick: e.getMetaInfo("_user_nick"),
                    _session_id: e.getMetaInfo("_session_id"),
                    uaid: e.getMetaInfo("uaid") + "" == "1" ? 1 : 0
                }, m = e._aplus_client || {}, y = e.globalConfig || {}, b = "-";
                try {
                    var S = getCurrentPages()[0];
                    b = S.route || S.is;
                } catch (e) {}
                var P = new Date().getTime() + b, I = m.model + m.networkType + h.title + n.cna, C = (y.isDecodeUrl ? "DC_" : "") + i.getLogId(P, I), A = e.getMetaInfo("appKey") || e.getMetaInfo("appId");
                A || r.logger({
                    msg: "please set appId in aplus metaInfo before sendPV!"
                });
                var T = Object.assign({}, {
                    appKey: A,
                    cache: C,
                    cna: n.cna,
                    etag: n,
                    pre: f.page_referrer || "-",
                    sdk_info: {
                        jsver: y.script_name,
                        lver: y.lver,
                        customSdkId: e.getMetaInfo("customSdkId") || "",
                        platformType: _.toLowerCase()
                    },
                    title: h.title || "",
                    url: b || "-",
                    client: m,
                    timeZone: u.getTimeZone(),
                    gmkey: g.gmkey || "",
                    method: this.options.context.where_to_send.method
                }, v), E = v;
                return d.spm_url && (E[p] = d.spm_url || ""), d.spm_pre && (E[l] = d.spm_pre || ""), 
                d.spm_cnt && (E[c] = d.spm_cnt || ""), E[o.PVID] = e.pvid || "", T.sessionArgs = e.getMetaInfo("aplus-session-args"), 
                T.globalArgs = e.getMetaInfo("aplus-global-args"), T.gokey = E, T;
            },
            getPvParams: function() {
                var e = a.getGlobalValue(o.APLUS), t = this.getCommonParams();
                return this.options.config.is_auto || (t.sdk_info.mansndlog = 1), Object.assign({}, t, {
                    event_code: o.PV_CODE,
                    logtype: "1",
                    logkey: "/vx.gif",
                    event_timestamp: e._$.send_pv_count > 0 ? new Date() : e.logConfig.pageLoadTime
                });
            },
            getHjljParams: function() {
                var e = this.options.context || {}, t = e.userdata || {}, n = {
                    event_code: o.EVENT_ID_MAP[t.gmkey] || t.gmkey,
                    logtype: "2",
                    logkey: t.logkey,
                    event_timestamp: new Date()
                };
                return Object.assign({}, this.getCommonParams(), n);
            },
            run: function() {
                var e = {};
                e = "PV" === this.options.config.recordType ? this.getPvParams() : this.getHjljParams(), 
                this.options.context.what_to_send.logdata = e;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t, n) {
        return e ? o.hash(encodeURIComponent(e)).substr(0, t) : n;
    }
    var o = n(70), r = function(e) {
        function t(e) {
            var t = "0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ", n = "0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ";
            return 1 == e ? t.substr(Math.floor(60 * Math.random()), 1) : 2 == e ? n.substr(Math.floor(60 * Math.random()), 1) : "0";
        }
        for (var n, a = "", o = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", r = !1; a.length < e; ) n = o.substr(Math.floor(62 * Math.random()), 1), 
        !r && a.length <= 2 && ("g" == n.toLowerCase() || "l" == n.toLowerCase()) && (0 === a.length && "g" == n.toLowerCase() ? Math.random() < .5 && (n = t(1), 
        r = !0) : 1 == a.length && "l" == n.toLowerCase() && "g" == a.charAt(0).toLowerCase() && (n = t(2), 
        r = !0)), a += n;
        return a;
    };
    t.getLogId = function(e, t) {
        var n = r(8), o = n.substr(0, 4), s = n.substr(0, 6);
        return [ a(e, 4, o), a(t, 4, o), s ].join("");
    };
}, function(e, t) {
    "use strict";
    t.hash = function(e, t) {
        var n, a, o = 1315423911, r = t || o;
        for (n = e.length - 1; n >= 0; n--) a = e.charCodeAt(n), r ^= (r << 5) + a + (r >> 2);
        var s = (2147483647 & r).toString(16);
        return s;
    };
}, function(e, t) {
    t.getTimeZone = function() {
        var e = -new Date().getTimezoneOffset() / 60, t = "+";
        e < 0 && (t = "-");
        var n = Math.abs(parseInt(e)), a = Math.abs(parseInt(e) - e), o = "00";
        return a > 0 && (o = 60 * a), "GMT" + t + (n > 9 ? n : "0" + n) + ":" + o;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(3), o = n(2), r = n(8);
    e.exports = function() {
        return {
            run: function() {
                var e = r.isTB(), t = o.getGlobalValue(a.APLUS), n = this.options.context.what_to_send.logdata || {}, s = getCurrentPages(), i = s[s.length - 1] || {};
                i && !n.title && (n.title = i.route || ""), n.url = (!e && t.globalConfig.isAli ? "https://" : "") + (i.route || i.is || "-");
                var u = "-";
                if (s.length > 1) {
                    var c = s[s.length - 2] || {};
                    u = (!e && t.globalConfig.isAli ? "https://" : "") + (c.route || c.is || "-");
                }
                n.pre = u, n.sdk_info && (n.sdk_info.windmill = "1"), this.options.context.what_to_send.logdata = n;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(32), o = n(18), r = n(2), s = n(3), i = n(8);
    e.exports = function() {
        return {
            getUserdata: function() {
                var e = r.getGlobalValue("aplus"), t = this.options.config || {}, n = {};
                t && !t.is_auto && t.gokey && ("string" == typeof t.gokey ? n = a.param2obj(t.gokey) : "object" == typeof t.gokey && (n = t.gokey));
                var s = function(e) {
                    o(e) ? e.forEach(function(e) {
                        n = Object.assign({}, n, e);
                    }) : n = Object.assign({}, n, e);
                };
                s(e.getMetaInfo("aplus-cpvdata"));
                var u = i.getCurrentPage(), c = u.route || u.is || "page", p = e.getMetaInfo("aplus-page-properties") || {}, l = p[c];
                "object" == typeof l && s(l);
                var g = this.options.context || {}, f = g.userdata || {};
                return s(f), n;
            },
            updatePre: function(e) {
                var t = this.options.config || {}, n = r.getGoldlogVal("_$") || {};
                return t && t.referrer && (n.page_referrer = t.referrer, e.pre = t.referrer), r.setGoldlogVal("_$", n), 
                e;
            },
            updateUrl: function(e) {
                var t = this.options.config || {};
                return t && t.pageUrl && (e.url = t.pageUrl), e;
            },
            updateSpmUrl: function(e) {
                var t = this.options.config || {}, n = t[s.SPM_URL] || t.spmUrl;
                return n && (e.gokey[s.SPM_URL] = n), e;
            },
            run: function() {
                var e = this.options.context.what_to_send.logdata, t = Object.assign({}, this.getUserdata(), e.userdata || {});
                e.gokey = Object.assign({}, e.gokey, t), e = this.updatePre(e), e = this.updateUrl(e), 
                e = this.updateSpmUrl(e), this.options.context.what_to_send.logdata = e, this.options.context.userdata = e.gokey;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = a.getGoldlogVal("_$") || {}, t = e.send_pv_count || 0;
                e.send_pv_count = ++t, a.setGoldlogVal("_$", e);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(32), o = n(18), r = n(2);
    e.exports = function() {
        return {
            getUserData: function() {
                var e = r.getGlobalValue("aplus"), t = this.options.context || {}, n = t.userdata || {}, s = t.what_to_send.logdata.gokey;
                s = Object.assign({}, s, a.param2obj(n.gokey)), s = Object.assign({}, s, a.param2obj(e.getMetaInfo("aplus-exinfo") || {}));
                var i = e.getMetaInfo("aplus-exdata");
                return o(i) ? i.forEach(function(e) {
                    s = Object.assign({}, s, e);
                }) : s = Object.assign({}, s, i || {}), s;
            },
            run: function() {
                var e = this.options.context.what_to_send.logdata, t = this.getUserData();
                "1010" === e.gmkey && (e.arg1 = t.duration || e.logkey), e.gokey = t, this.options.context.what_to_send.logdata = e;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(77)(this.options.context.logConfig);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(41), o = n(3), r = n(2);
    e.exports = function(e) {
        var t = r.getGlobalValue(o.APLUS);
        if (!t._aplus_api) {
            t._aplus_api = {
                status: o.COMPLETE
            };
            var s = n(78).run.create({
                logConfig: e
            });
            for (var i in s) t[i] = s[i];
            r.setGlobalValue(o.APLUS, t);
            var u = [ o.APLUS + "Ready", o.COMPLETE ];
            a.doPubMsg(u), a.doCachePubs(u);
        }
    };
}, function(e, t, n) {
    "use strict";
    var a = n(37), o = n(9), r = n(8), s = n(18), i = n(3), u = n(41), c = n(7), p = n(2), l = n(79), g = n(40), f = n(82), d = n(26), h = n(10), _ = n(30), v = function(e, t) {
        my && my.call && "function" == typeof t && my.call("handleLoggingAction", {
            type: "behavior",
            subType: e.subType
        }, function(n) {
            var a = {};
            a[e.spmType] = n[e.spmType], t(a);
        });
    }, m = a.extend({
        _send: function(e, t, n, a, o) {
            return e = h.can2https(e), "object" == typeof t && "POST" === n ? r.request(e, {
                method: n,
                data: t,
                dataType: "base64"
            }, a, o) : r.request(e + "?" + t, {
                method: n,
                dataType: "base64"
            }, a, o), e;
        },
        _requestVTConfig: function(e, t, n) {
            if (0 === e.indexOf("//")) {
                var a = i.HTTPS;
                /(\d+\.){3,}\d+/.test(e) && (a = "http:"), e = a + e;
            }
            r.request(e, {
                method: "GET"
            }, t, n);
        },
        _sendPV: function(e, t) {
            var n = p.getGlobalValue(i.APLUS);
            e = e || {}, e.pageName && n._setMetaInfo(i.APLUS + "-pagename", e.pageName);
            var a = new l();
            e.recordType = "PV", e.method || (e.method = "GET");
            var o = n.logConfig.pv;
            return a.run({
                plugins: o.plugins,
                context: c(o.context)
            }, {
                config: e,
                userdata: t || {},
                pubsubType: "pv",
                middlewareMessageKey: "mw_change_pv"
            }), !0;
        },
        _combineRecord: function(e, t, n, a) {
            var o = p.getGlobalValue(i.APLUS), r = "EXP";
            if (!o.globalConfig.isAli || t !== r && "CLK" !== t) console.warn("only support EXP or CLK log to combile record!"); else if (s(n)) {
                a || (a = "POST");
                var u = [], c = "true";
                n.forEach(function(e) {
                    u.push({
                        exargs: "object" == typeof e.exargs ? e.exargs : {},
                        scm: e.scm,
                        spm: e.spm,
                        aplusContentId: e.aplusContentId
                    }), "false" === e._aplus_sendtomy && "true" === c && (c = "false");
                });
                var l = [];
                l.push((t === r ? "expdata=" : "clkdata=") + JSON.stringify(u)), l.push(t === r ? "_is_auto_exp=1" : "_is_auto_clk=1"), 
                l.push("_eventType=custom"), l.push("_method=" + a), l.push("_pkgSize=" + n.length), 
                "false" === c && l.push("_aplus_sendtomy=false"), o.record(e, t, l.join("&"), a);
            } else console.warn("type of gokeys must be ArrayObject!");
        },
        _record: function(e, t, n, a, r) {
            var s = p.getGlobalValue(i.APLUS);
            e += "", e && 0 !== e.indexOf("/") && s.globalConfig.isAli && (e = "/" + e);
            var u = new l(), g = s.logConfig.hjlj;
            return u.run({
                plugins: g.plugins,
                context: c(g.context)
            }, {
                config: {
                    recordType: "COMMON_HJLJ",
                    method: a || "GET"
                },
                userdata: {
                    logkey: e,
                    gmkey: t,
                    gokey: n
                },
                pubsubType: "hjlj",
                middlewareMessageKey: "mw_change_hjlj"
            }, function() {
                o(r) && r();
            }), !0;
        },
        getPageSPM: function() {
            var e = p.getGlobalValue(i.APLUS), t = e._$ || {}, n = t.spm || {}, a = n.data || {};
            return [ a.a, a.b ];
        },
        _setPageSPM: function() {
            var e, t = {}, n = arguments;
            "object" == typeof n[0] ? (t = n[0], e = n[1]) : (t.spmCnt = [ n[0], n[1], "0", "0" ].join("."), 
            e = n[2]);
            var a;
            t.spmCnt || t.spmUrl || !g.getMetaInfo("pageConfig") ? (a = [ "setPageSPM", t ], 
            u.doPubMsg(a), u.doCachePubs(a)) : (a = [ "clearPageSPM" ], u.doPubMsg(a), u.doCachePubs(a));
            var o = "function" == typeof e ? e : function() {};
            o(a);
        },
        _setMetaInfo: function(e, t) {
            return g._setMetaInfo(e, t);
        },
        _updatePageProperties: function(e) {
            if ("object" == typeof e) {
                f() ? my.reportAnalytics("updatePageProperties", e) : "my" === r.getPlatformType() && my.call("reportData", {
                    spmDetail: e,
                    ignoreDefaultPageMonitor: !0
                });
                var t = r.getCurrentPage(), n = t.route || t.is || "page", a = {};
                a[n] = e, g.appendMetaInfo("aplus-page-properties", a);
            }
        },
        _updateNextPageProperties: function(e) {
            if (e || (e = {}), my) {
                var t = {
                    type: "updateNextProp",
                    eventId: -1,
                    eventid: -1,
                    name: "",
                    pageName: "",
                    comName: "",
                    arg1: "",
                    arg2: "",
                    arg3: "",
                    param: e,
                    params: e
                };
                my.callUserTrack ? my.callUserTrack("commitut", t) : my.reportAnalytics && my.reportAnalytics("enter", t);
            }
        },
        _appendMetaInfo: g.appendMetaInfo,
        getMetaInfo: function(e) {
            return g.getMetaInfo(e);
        },
        cloneDeep: c,
        _skipPage: function() {
            my && my.callUserTrack && my.callUserTrack("skipPage");
        },
        _pageAppear: function() {
            my && my.callUserTrack && this.isPageDisAppear && (this.isPageDisAppear = !1, this.isPageAppear = !0, 
            my.callUserTrack("pageAppear"));
        },
        _pageDisappear: function() {
            my && my.callUserTrack && this.isPageAppear && (this.isPageDisAppear = !0, this.isPageAppear = !1, 
            my.callUserTrack("pageDisappear"));
        },
        _updatePageUtparam: function(e) {
            e || (e = {}), my && my.callUserTrack && my.callUserTrack("updatePageUtparam", {
                utParamJson: JSON.stringify(e)
            });
        },
        _updateNextPageUtparam: function(e) {
            e || (e = {}), my && my.callUserTrack && my.callUserTrack("updateNextPageUtparam", {
                utParamJson: JSON.stringify(e)
            });
        },
        _updateSessionProperties: function(e) {
            my && my.call && "object" == typeof e && my.call("handleLoggingAction", {
                type: "behavior",
                subType: "updateSessionProperties",
                extData: e
            });
        },
        _getPageSpmUrl: function(e) {
            v({
                subType: "getPageSpmUrl",
                spmType: "spmUrl"
            }, e);
        },
        _getPageSpmPre: function(e) {
            v({
                subType: "getPageSpmPre",
                spmType: "spmPre"
            }, e);
        },
        _setPageName: function(e, t) {
            if (!e) return void d.logger({
                msg: "setPageName failed:  pageName=" + e
            });
            var n = t || _.getCurrentPagePath(), a = c(g.getMetaInfo("pageConfig") || {});
            a[n] = e, g.appendMetaInfo("pageConfig", a);
        },
        getPageName: function(e) {
            return _.getPageCode(e);
        },
        _getElementSPM: function(e, t) {
            if (e) {
                var n = _.getPageCode() || "";
                if ("string" != typeof e) {
                    var a = e.dataset && e.dataset.trackerParams || "", o = h.jsonLikeStr2JSON(a);
                    return [ n, o.spmC, o.spmD ].join(".");
                }
                var s, i = r.getContext(), u = g.getMetaInfo("aplus-auto-clk") || [], c = g.getMetaInfo("aplus-auto-exp") || [];
                try {
                    var p;
                    for (p = 0; p < u.length; p++) {
                        var l = u[p];
                        if (l.cssSelector === e) {
                            s = [ n, l.spmC, l.spmD ].join(".");
                            break;
                        }
                    }
                    for (p = 0; p < c.length; p++) {
                        var f = c[p];
                        if (f.cssSelector === e) {
                            s = [ n, f.spmC, f.spmD ].join(".");
                            break;
                        }
                    }
                    var d = i.createSelectorQuery().selectAll(e);
                    "function" == typeof d.fields && d.fields({
                        dataset: !0,
                        id: !0
                    }, function(e) {
                        var n = [];
                        if (e && e.length > 0) {
                            for (var a = 1; a <= e.length; a++) n.push(s + "_" + a);
                            t && "function" == typeof t && t(n);
                        }
                    }).exec();
                } catch (e) {
                    console.warn("该平台不支持dom元素查询, err = ", e);
                }
            }
        }
    });
    t.run = m;
}, function(e, t, n) {
    "use strict";
    var a = n(16), o = n(2), r = n(9), s = n(41), i = n(26), u = n(3), c = n(80), p = n(81), l = function() {};
    l.prototype.run = function(e, t, n) {
        var l = new p();
        l.init({
            middleware: [],
            config: t.config,
            plugins: e.plugins
        });
        var g = l.run(), f = r(e.context) ? new e.context() : e.context;
        f.userdata = t.userdata, f.logger = i.logger;
        var d = {
            context: f,
            pubsub: o.getGoldlogVal("aplus_pubsub"),
            pubsubType: t && t.pubsubType
        }, h = new c();
        h.create(d), h.wrap(g, function() {
            d.context.status = u.COMPLETE, t && (t.middlewareMessageKey && s.doPubMsg([ t.middlewareMessageKey, d.context ]), 
            t.messageFnQueue && a(t.messageFnQueue, function(t) {
                t(o.getGlobalValue(u.APLUS), e);
            })), r(n) && n(d.context);
        })();
    }, e.exports = l;
}, function(e, t, n) {
    "use strict";
    function a() {}
    var o = n(9), r = n(51), s = n(26);
    a.prototype.create = function(e) {
        for (var t in e) "undefined" == typeof this[t] && (this[t] = e[t]);
        return this;
    }, a.prototype.calledList = [], a.prototype.setCalledList = function(e) {
        r.indexof(this.calledList, e) === -1 && this.calledList.push(e);
    }, a.prototype.resetCalledList = function() {
        this.calledList = [];
    }, a.prototype.wrap = function(e, t) {
        var n = this, a = this.context || {}, i = a.compose || {}, u = i.maxTimeout || 1e4;
        return function(a) {
            var i, c = e.length, p = 0, l = 0, g = function(f, d) {
                if (p === c) return a = "done", n.resetCalledList(), o(t) && d !== a && t.call(n, a), 
                void clearTimeout(i);
                if (r.indexof(n.calledList, p) === -1) {
                    if (n.setCalledList && n.setCalledList(p), !(e && e[p] && o(e[p][0]))) return;
                    try {
                        a = e[p][0].call(n, a, function() {
                            p++, l = 1, g(p);
                        });
                    } catch (e) {
                        s.logger({
                            msg: e
                        });
                    }
                }
                var h = "number" == typeof a;
                if ("pause" === a || h) {
                    l = 0;
                    var _ = h ? a : u, v = e[p] ? e[p][1] : "";
                    i = setTimeout(function() {
                        0 === l && (s.logger({
                            msg: "jump the middleware about " + v + ", because waiting timeout maxTimeout = " + _
                        }), a = null, p++, g(p));
                    }, _);
                } else "done" === a ? (p = c, g(p, a)) : (p++, g(p));
            };
            return n.calledList && n.calledList.length > 0 && n.resetCalledList(), g(p);
        };
    }, e.exports = a;
}, function(e, t, n) {
    "use strict";
    var a = n(29), o = n(26);
    e.exports = function() {
        return {
            init: function(e) {
                this.opts = e, e && "object" == typeof e.middleware && e.middleware.length > 0 ? this.middleware = e.middleware : this.middleware = [], 
                this.plugins_name = [];
            },
            pubsubInfo: function(e, t) {
                try {
                    var n = e.pubsub;
                    n && n.publish("plugins_change_" + e.pubsubType, t);
                } catch (e) {
                    o.logger({
                        msg: e
                    });
                }
            },
            run: function(e) {
                e || (e = 0);
                var t = this, n = this.middleware, o = this.opts || {}, r = o.plugins;
                if (r && "object" == typeof r && r.length > 0) {
                    var s = r[e];
                    if (this.plugins_name.push(s.name), n.push([ function(e, n) {
                        t.pubsubInfo(this, s);
                        var r = new s.path();
                        return r.init || (r.init = function(e) {
                            this.options = e;
                        }), r.init({
                            context: this.context,
                            config: a(s.config || {}, o.config)
                        }), r.run(e, function(e) {
                            setTimeout(function() {
                                n(s, e);
                            }, 1);
                        });
                    }, s.name ]), e++, r[e]) return this.run(e);
                }
                return n;
            }
        };
    };
}, function(e, t) {
    function n() {
        try {
            var e = navigator ? navigator.userAgent || navigator.swuserAgent : "";
            return /Triver/g.test(e);
        } catch (e) {
            return !1;
        }
    }
    e.exports = n;
}, function(e, t, n) {
    "use strict";
    var a = n(84), o = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE, n = o.getContext(), r = n[t] || [], s = a.getFormatQueue(r, "metaQueue");
                n[t] = s.queue, a.processGoldlogQueue(s.formatQueue, this.options.config);
            }
        };
    };
}, function(e, t, n) {
    function a() {
        var e = u.getGoldlogVal("_$") || {}, t = e.meta_info;
        return t;
    }
    function o() {
        var e = a() || {}, t = e.uaid + "";
        return "1" !== t || e._anony_id ? e._hold || e["aplus-waiting"] : "BLOCK";
    }
    function r(e) {
        var t = o(), n = a() || {}, r = !0, s = e.arguments || [], i = s[0], u = s[1], c = "START";
        if ("_hold" === i && u === c) return c;
        if ("_anony_id" === i && u) return c;
        if (e && /sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo$/.test(e.action)) switch (t) {
          case "BLOCK":
            n[t] || (_.push(e), r = !1);
        }
        return r;
    }
    function s(e) {
        f(d, e), f(h, e), f(_, e);
    }
    function i(e, t) {
        return t && g.openAPIs.indexOf(e) > -1 && (e = "_" + e), e;
    }
    var u = n(2), c = n(51), p = n(9), l = n(26), g = n(3), f = function(e, t) {
        function n() {
            if (e && c.isArray(e) && e.length) {
                for (var n = m(e).queue, a = {}, o = []; a = n.shift(); ) v(a, t, function(e) {
                    o.push(e);
                });
                o.length > 0 && setTimeout(function() {
                    for (;a = o.shift(); ) v(a, t);
                }, 100);
            }
        }
        try {
            n();
        } catch (e) {
            l.logger({
                msg: e
            });
        }
    };
    t.processGoldlogQueue = f;
    var d = [], h = [], _ = [];
    t.subscribeAndProcessQueue = function(e, t) {
        var n = u.getGlobalValue(e);
        n.push({
            action: g.SUBSCRIBE,
            arguments: [ g.SET_META_INFO, function(e, n) {
                e === g._USER_ID && n ? f(d, t) : e === g._ANONY_ID && n ? f(h, t) : "_hold" === e && "START" === n && s(t);
            } ]
        });
    };
    var v = function(e, t, n) {
        var a = !!t.isOpenApi, o = e ? e.action : "", g = e ? e.arguments : "", f = r(e);
        if (f) {
            var d = u.getContext();
            try {
                if (o && g && c.isArray(g)) {
                    var h, _ = o.split("."), v = d, m = d;
                    if (3 === _.length) v = d[_[0]][_[1]] || {}, h = i(_[2], a), m = v[h] ? v[h] : ""; else for (;_.length; ) if (h = i(_.shift(), a), 
                    m = v = v[h], !v) return void (p(n) && n(e));
                    p(m) && m.apply(v, g), "START" === f && s(t);
                }
            } catch (e) {
                l.logger({
                    msg: e
                });
            }
        }
    };
    t.processTask = v;
    var m = function(e, t) {
        for (var n = {
            subscribeMwChangeQueue: [],
            subscribeMetaQueue: [],
            subscribeQueue: [],
            metaQueue: [],
            othersQueue: []
        }, a = [], o = {}; o = e.shift(); ) try {
            var r = o.action, s = o.arguments[0];
            /subscribe/.test(r) ? "setMetaInfo" === s ? n.subscribeMetaQueue.push(o) : s === g.MW_CHANGE_PV || s === g.MW_CHANGE_HJLJ ? n.subscribeMwChangeQueue.push(o) : n.subscribeQueue.push(o) : /MetaInfo/.test(r) ? n.metaQueue.push(o) : n.othersQueue.push(o);
        } catch (e) {
            l.logger({
                msg: e
            }), n.othersQueue.push(o);
        }
        var i;
        return t && n[t] && (i = n[t], n[t] = []), a = n.subscribeMwChangeQueue.concat(n.metaQueue), 
        a = a.concat(n.subscribeQueue), a = a.concat(n.subscribeMetaQueue, n.othersQueue), 
        {
            queue: a,
            formatQueue: i
        };
    };
    t.getFormatQueue = m;
}, function(e, t, n) {
    "use strict";
    var a = n(37), o = n(2), r = n(84), s = a.extend({
        push: function(e) {
            this.length++, r.processTask(e, this.opts);
        }
    });
    e.exports = function() {
        return {
            processAplusQueue: function(e) {
                var t = this.options.config || {}, n = o.getGlobalValue(e);
                r.processGoldlogQueue(n, t), o.setGlobalValue(e, s.create({
                    opts: t,
                    startLength: n.length,
                    length: 0
                }));
            },
            run: function() {
                var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE;
                this.processAplusQueue(t), "aplus_queue" === t && this.processAplusQueue("goldlog_queue"), 
                r.subscribeAndProcessQueue(t, this.options.config);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        function e() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "", t = s.getCurrentPage(), n = t.route || t.is;
            switch (e) {
              case "onPullDownRefresh":
                b.onPullDownRefresh += 1, v.push({
                    action: "aplus.record",
                    arguments: [ c.logkey || "$$_pull_down_refresh", "CLK", {
                        event: e,
                        pagename: f.getPageCode() || n,
                        count: b.onPullDownRefresh
                    } ]
                });
                break;

              case "onReachBottom":
                b.onReachBottom += 1, v.push({
                    action: "aplus.record",
                    arguments: [ a.logkey || "$$_reach_bottom", "CLK", {
                        event: e,
                        pagename: f.getPageCode() || n,
                        count: b.onReachBottom
                    } ]
                });
                break;

              case "onShareAppMessage":
                b.onShareAppMessage += 1, v.push({
                    action: "aplus.record",
                    arguments: [ d.logkey || "$$_share", "CLK", {
                        event: e,
                        pagename: f.getPageCode() || n,
                        count: b.onShareAppMessage,
                        share_type: 1
                    } ]
                });
                break;

              case "onShareTimeline":
                b.onShareTimeline += 1, v.push({
                    action: "aplus.record",
                    arguments: [ d.logkey || "$$_share", "CLK", {
                        event: e,
                        pagename: f.getPageCode() || n,
                        count: b.onShareTimeline,
                        share_type: 0
                    } ]
                });
                break;

              case "onPageShow":
                if (_.globalConfig.isAli) {
                    var o = _.getMetaInfo("pageConfig"), p = t.route || t.is;
                    o && o[p] ? u(o[p].spm) ? v.push({
                        action: "aplus.setPageSPM",
                        arguments: o[p].spm
                    }) : i.logger({
                        level: "error",
                        msg: p + '在metaInfo.pageConfig中配置的spm格式不对，正确格式为：["spma","spmb"]'
                    }) : i.logger({
                        level: "error",
                        msg: "未匹配该页面(" + p + ")的spm，请检查metaInfo.pageConfig"
                    });
                }
                t.route && !m && (y = {
                    ts: Date.now(),
                    path: t.route,
                    page_name: t.route
                }, m = !0);
                break;

              case "onPageHide":
                if (m) {
                    var l = Date.now() - y.ts;
                    if (_.getMetaInfo("aplus-vt-cfg-url") || f.getVTRealtimeCode()) {
                        var g = (f.getPageName() || {}).extraParams, h = Object.assign({}, g, {
                            duration: l,
                            path: y.path,
                            page_name: f.getPageCode(),
                            page_start: y.ts,
                            isMini: !0,
                            _page_auto_id: r.PAGE_END,
                            _page_auto_pv: !0
                        });
                        _.sendPV({
                            is_auto: !0
                        }, h);
                    } else _.sendPV({
                        is_auto: !0
                    }, {
                        duration: l,
                        path: y.path,
                        page_name: f.getPageCode() || y.page_name,
                        page_start: y.ts,
                        isMini: !0,
                        _page_auto_id: r.PAGE_END,
                        _page_auto_pv: !0
                    });
                    y = null, m = !1;
                }
            }
        }
        function t() {
            a = _.getMetaInfo("rb_config"), c = _.getMetaInfo("pdr_config"), d = _.getMetaInfo("share_config");
        }
        function n(e, t) {
            if (e && t) try {
                var n = _.getMetaInfo("aplus-api-host"), a = /[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/, o = n.match(a);
                if (o && o[0]) {
                    var u = r.HTTPS;
                    /(\d+\.){3,}\d+/.test(o[0]) && (u = "http:");
                    var c = u + "//" + n + "/vt/loadTransferConfig?code=" + e + "&appInfoId=" + t;
                    s.request(c, {}, function(e) {
                        try {
                            var t = e.data && e.data.data && e.data.data.config || "", n = e.data && e.data.data && e.data.data.debugId || "";
                            n && _.appendMetaInfo("aplus-global-args", {
                                debugId: n
                            });
                            var a = new Date().getTime();
                            _._minicfg_load = new Date().getTime() - a, t && (_._aplus_vt_cfg = JSON.parse(t) || {}, 
                            g.vt2autoEvent());
                        } catch (e) {
                            i.logger({
                                level: "error",
                                msg: "拉取实时可视化埋点验证失败, 错误信息：" + e
                            });
                        }
                    });
                }
            } catch (e) {}
        }
        var a, c, d, h = o.getContext(), _ = o.getGlobalValue(r.APLUS), v = o.getGlobalValue(r.APLUS_QUEUE), m = !1, y = null, b = {
            onPullDownRefresh: 0,
            onShareTimeline: 0,
            onReachBottom: 0,
            onShareAppMessage: 0,
            onClick: 0
        };
        v.push({
            action: r.SUBSCRIBE,
            arguments: [ "aplusReady", function(e) {
                "complete" === e && t();
            } ]
        }), _.aplus_pubsub.subscribe("onLoad", function(e) {
            if ("ready" === e.status) try {
                var t = f.getVTRealtimeCode();
                if (t) {
                    var a = _.getMetaInfo("appInfoId");
                    n(t, a);
                } else !!_.getMetaInfo("aplus-vt-cfg-url") && g.vt2autoEvent();
            } catch (e) {
                i.logger({
                    level: "error",
                    msg: "拉取实时可视化埋点验证信息失败， 错误原因：" + e
                });
            }
        }), _.aplus_pubsub.subscribe("onShow", function(t) {
            if ("ready" === t.status) {
                var n = "MAN" !== h.aplus.getMetaInfo("aplus-waiting");
                n && e("onPageShow");
            }
        }), _.aplus_pubsub.subscribe("onHide", function(t) {
            if ("ready" === t.status) {
                var n = "MAN" !== h.aplus.getMetaInfo("aplus-waiting");
                n && e("onPageHide");
            }
        }), _.aplus_pubsub.subscribe("onPullDownRefresh", function(t) {
            "ready" === t.status && e("onPullDownRefresh");
        }), _.aplus_pubsub.subscribe("onReachBottom", function(t) {
            "ready" === t.status && e("onReachBottom");
        }), _.aplus_pubsub.subscribe("onShareAppMessage", function(t) {
            "ready" === t.status && e("onShareAppMessage");
        }), _.aplus_pubsub.subscribe("onShareTimeline", function(t) {
            "ready" === t.status && e("onShareTimeline");
        }), _.getMetaInfo("aplus-vt-cfg-url") && p.pushIntoGoldlogQueue(r.SUBSCRIBE, [ l, function(e) {
            var t = e.pageConfig;
            t && t.enabled && (_._aplus_vt_cfg = t);
        } ]);
    }
    var o = n(2), r = n(3), s = n(8), i = n(26), u = n(18), c = n(87), p = n(58), l = "MiniVtConfigFormat", g = n(90), f = n(30);
    e.exports = function() {
        return {
            run: function() {
                var e = o.getGlobalValue("aplus");
                if (a(), !e._aplus_aleady_load_minivt) {
                    e._aplus_aleady_load_minivt = 1;
                    var t = c.create();
                    t.run();
                }
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(37), o = n(58), r = n(88), s = n(16), i = n(28), u = n(89), c = n(3), p = n(2), l = "MiniVtConfigBack", g = "MiniVtConfigFormat", f = c.PUBLISH;
    e.exports = a.extend(i.assign(u, {
        pathname: "",
        pageConfig: {},
        originSpm: {
            spmA: "",
            spmB: ""
        },
        updateCfgLs: function() {
            var e = this;
            setTimeout(function() {
                e.fetchFromCdn();
            }, 1e3);
        },
        fetchFromCdn: function() {
            var e = this, t = p.getGlobalValue("aplus"), n = t.getMetaInfo("aplus-vt-cfg-url");
            if (n) {
                var a = new Date().getTime();
                t.requestVTConfig(n, function(n) {
                    var r = n.data;
                    if (t._minicfg_load = new Date().getTime() - a, r) try {
                        t._aplus_vt_cfg = "object" == typeof r ? r : JSON.parse(r), t._aplus_vt_cfg.points && s(t._aplus_vt_cfg.points, function(e) {
                            e.selector = decodeURIComponent(e.selector);
                        }), e.setConfigIntoLs(t._aplus_vt_cfg);
                    } catch (e) {
                        t._aplus_vt_cfg = {
                            enabled: !1
                        };
                    }
                    o.pushIntoGoldlogQueue(f, [ l, {
                        pageConfig: t._aplus_vt_cfg,
                        enable: 0
                    } ]);
                }, function(e) {
                    t._aplus_vt_cfg && t._aplus_vt_cfg.enabled && o.pushIntoGoldlogQueue(f, [ l, {
                        pageConfig: t._aplus_vt_cfg,
                        enable: 0
                    } ]), r.catchException("getTrackerCfg", e, {
                        msg: n
                    });
                }, {
                    timeout: 5e3
                });
            }
        },
        getMiniVtData: function(e, t, n) {
            var a = p.getGlobalValue("aplus");
            if (a._minicfg_load = 0, e) {
                var r = this.fetchFromLS(e);
                if ("string" == typeof r) try {
                    r = JSON.parse(r);
                } catch (e) {
                    r = {};
                }
                r && r.enabled && (a._aplus_vt_cfg = r), n ? this.fetchFromCdn(e, t) : o.pushIntoGoldlogQueue(f, [ l, {
                    pageConfig: r,
                    enable: 0
                } ]);
            }
        },
        syncMiniVtData: function() {
            var e = this.getVtConfigPath();
            this.getMiniVtData(e, "", !0);
        },
        init: function() {
            var e = this, t = c.SUBSCRIBE;
            o.pushIntoGoldlogQueue(t, [ l, function(t) {
                t.enable || (e.pageConfig = t.pageConfig), o.pushIntoGoldlogQueue(f, [ g, {
                    pageConfig: e.pageConfig,
                    originSpm: e.originSpm
                } ]), !t.enable && e.setConfigIntoLs(e.pageConfig);
            } ]), e.syncMiniVtData();
        },
        run: function() {
            return this.init(), this;
        }
    }));
}, function(e, t, n) {
    "use strict";
    var a = n(58);
    t.catchException = function(e, t) {
        var n = e;
        "object" == typeof t && t.message && (n = n + "_" + t.message), a.pushIntoGoldlogQueue("aplus._aplus_cplugin_m.do_tracker_jserror", [ {
            message: n,
            error: JSON.stringify(t),
            filename: e
        } ]);
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), o = n(8);
    e.exports = {
        lsMinivtConfigKey: "APLUS_MINI_CONFIG",
        getMiniVtTplCdnPath: function() {
            var e = a.getGlobalValue("aplus"), t = e.getMetaInfo("aplus-track-config-id"), n = t && t.turnon, o = t && t.value;
            return "1" === n && o ? o : "";
        },
        getVtConfigPath: function() {
            var e, t = a.getGlobalValue("aplus"), n = this.getMiniVtTplCdnPath(), o = [], r = t.getMetaInfo("appkey") || t.getMetaInfo("appId") || t.getMetaInfo("appKey");
            return r && (e = r), e && (o = e.split(".")), 2 === o.length ? this.originSpm = {
                spmA: o[0],
                spmB: o[1]
            } : 1 === o.length && (this.originSpm.spmA = o[0]), n ? n : 2 === o.length ? o.join("_") : 1 === o.length ? o[0] : void 0;
        },
        fetchFromLS: function(e) {
            this.cdnpath || (this.cdnpath = e || this.getMiniVtTplCdnPath());
            var t = o.getContext();
            return decodeURIComponent(t.getStorageSync(this.lsMinivtConfigKey + "-" + e)) || {};
        },
        setConfigIntoLs: function(e) {
            this.cdnpath || (this.cdnpath = this.getVtConfigPath());
            var t = o.getContext();
            t.setStorageSync(this.lsMinivtConfigKey + "-" + this.cdnpath, encodeURIComponent(JSON.stringify(e)));
        }
    };
}, function(e, t, n) {
    "use strict";
    var a = n(8), o = n(2), r = n(16), s = o.getGlobalValue("aplus"), i = n(30);
    t.getCurrentPageVTCfg = function() {
        var e = s._aplus_vt_cfg;
        if (e) for (var t = i.getCurrentPagePath(), n = 0; n < e.pages.length; n++) {
            var a = e.pages[n];
            if (a.matchUrl === t) return a;
        }
    }, t.vt2autoEvent = function() {
        var e = s._aplus_vt_cfg;
        if (e) {
            var t = a.getCurrentPage(), n = t.route || t.is;
            r(e.pages, function(t) {
                if (s.setPageName({
                    pageName: t.spmB,
                    extraParams: t.extraParams
                }, t.matchUrl), t.matchUrl === n) {
                    var a = [], o = [];
                    r(e.points, function(e) {
                        t.spmB === e.spmB && ("exposure" === e.trackerType ? a.push({
                            cssSelector: e.selector,
                            logkey: e.logkey,
                            props: e.selectorType,
                            spmC: e.spmC,
                            spmD: e.spmD,
                            customArgs: e.customArgs,
                            _vt: t.template || t.stdId ? 2 : 1
                        }) : o.push({
                            cssSelector: e.selector,
                            logkey: e.logkey,
                            props: e.selectorType,
                            spmC: e.spmC,
                            spmD: e.spmD,
                            customArgs: e.customArgs,
                            _vt: t.template || t.stdId ? 2 : 1
                        }));
                    }), a.length > 0 && s.appendMetaInfo("aplus-auto-exp", a), o.length > 0 && s.appendMetaInfo("aplus-auto-clk", o);
                }
            });
        }
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function(e, t) {
        var a = n(2), o = n(41), r = n(26), s = n(16), i = n(8), u = n(92);
        i.initIsTB(), "object" == typeof e && (e.siteId && (t.globalConfig.siteId = e.siteId), 
        t.metaInfo = Object.assign({}, t.metaInfo, e.metaInfo));
        var c = "running", p = "complete", l = [ "aplusReady", c ];
        return o.doPubMsg(l), u.run({
            plugins: t.plugins,
            context: function() {
                var e = {
                    PAGE_LOAD_TIME: new Date()
                }, n = [];
                return s(t.plugins, function(t) {
                    e[t.name] = t.config, "aplus_log_inject" === t.name && t.config && t.config.plugins && (n = t.config.plugins.pv, 
                    s(n, function(t) {
                        e[t.name] = t.config;
                    }));
                }), Object.assign({}, e, {
                    aplus_config: t
                });
            }
        }, function() {
            r.logger({
                msg: "APLUS INIT SUCCESS"
            }), l[1] = p, o.doPubMsg(l);
        }), a.getContext();
    };
}, function(e, t, n) {
    "use strict";
    var a = n(79), o = n(9), r = n(41);
    t.run = function(e, t) {
        var n = new a();
        n.run({
            plugins: e.plugins,
            context: e.context
        }, {
            config: {},
            userdata: {},
            pubsubType: "aplusinit",
            messageFnQueue: [],
            middlewareMessageKey: "mw_change_aplusinit"
        }, function(e) {
            var n = [ "aplusInitContext", e ];
            r.doPubMsg(n), r.doCachePubs(n), o(t) && t(e);
        });
    };
} ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBsdXNfbWluaV9jbG91ZF91bS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNWE0YjNmYjdhYzMxN2QxZGY3NzAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwbHVzX21pbmlfY2xvdWRfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxHb2xkbG9nLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9hcGx1c1N0YXRpYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBsdXNfbWluaV9jbG91ZF91bV9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfYXBwX3VtX25ldy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9jbG9uZURlZXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3VtX3Nlc3Npb25fbWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vY2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2pzb25VdGlsLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS91bG9nLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvZWFjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vZXZlbnRNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9pc0FycmF5LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9yZXF1ZXN0UXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3VtX2hlYWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vYm9keUJ1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3JlcXVlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL21hbmdsZV9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9pbXByaW50TWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vYmFzZTY0LmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsTG9nZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9xdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbERhc2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2Fzc2lnbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfcGFnZV91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvZm9ybWF0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvb3Blbl9hcGkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfY2xpZW50X21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21lc3NhZ2VyL3B1YnN1Yl9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1B1YlN1Yi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9CYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX21ldGFfaW5qZWN0X21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21ldGEvbWFpbl9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9tZXRhL21ldGFJbmZvTWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFB1YnN1Yi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl9jbGsuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19jbGsvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2Nsay9jb2xsZWN0X2Nsay5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL3dhdGNoVHJhY2tlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL2dldEhhc2hLZXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfZXhwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvbGliX2F1dG9fZXhwL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19leHAvY29sbGVjdF9leHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2xpYl9jb21tb24vY29uZmlnLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxNZXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsQXR0cmlidXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvbWluaV9zcG0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfbWluaV9yZXBvcnRfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbWFpbl9taW5pX3VtX2h0dHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbWFpbl9iYXNlX2h0dHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vZXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfbG9nX2luamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEV0YWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxEYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsVHJpbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFN0b3JlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGVuX3RvX3NlbmRwdi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfbWluaV91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF9taW5pX2Nsb3VkLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9sb2dJZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEhhc2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi91dGlsUGFyYW1zLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YV9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9jYW5fdG9fc2VuZHB2X21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfYXBpX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2FwaS9hcGx1c19taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1JlZHVjZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvY29tcG9zZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9wbHVnaW5zTG9hZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9pc1RyaXZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfcXVldWUvbWV0YV9xdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfcXVldWUvYWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hcGx1c19xdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9taW5pdnQvZmV0Y2hDb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxDYXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvbWluaXZ0U3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9saWJfbWluaXZ0L3V0aWxWVC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBsdXNfbWluaV9iYXNpYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9hcGx1c2luaXQuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiaW5pdEdsb2JhbCIsImFwcENvbmZpZyIsImFwbHVzX2NvbmZpZyIsIl9hcGx1c19jb250ZXh0IiwiYXBsdXNTdGF0aWMiLCJBUExVUyIsIkFQTFVTX1FVRVVFIiwiR09MRExPRyIsIkdPTERMT0dfUVVFVUUiLCJpc1dlYiIsIndpbmRvdyIsImUiLCJnZXRDb250ZXh0IiwiY29udGV4dCIsInYiLCJhcGx1cyIsImFwbHVzX3F1ZXVlIiwiX2FwbHVzRGVmYXVsdFZhbHVlIiwiX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUiLCJfZ29sZGxvZ19xdWV1ZSIsImdvbGRsb2dfcXVldWUiLCJjb25jYXQiLCJnb2xkbG9nIiwiZ2V0R2xvYmFsVmFsdWUiLCJrZXkiLCJnIiwicSIsInNldEdsb2JhbFZhbHVlIiwidmFsdWUiLCJnZXRHb2xkbG9nVmFsIiwic2V0R29sZGxvZ1ZhbCIsInZhbCIsImYiLCJnZXRDbGllbnRJbmZvIiwiTVdfQ0hBTkdFIiwiTUVUQV9JTkZPIiwiQVBQRU5EX01FVEFfSU5GTyIsIlNFVF9NRVRBX0lORk8iLCJIVFRQIiwiX3B1YnN1YiIsImRlZmF1bHRDb2RlIiwiQ0xLIiwiRVhQIiwiSU1QRVhQIiwiT1RIRVIiLCJBUFBfU0hPVyIsIkFQUF9ISURFX09SX1VOTE9BRCIsIlNFU1NJT05fSU5URVJWQUwiLCJTSEFSRV9DQUNIRV9JTlRFUlZBTCIsIkVLVlMiLCJFVkVOVF9NQVhfQ09VTlQiLCJNRU1PUllfTUFYX0NPVU5UIiwiRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMIiwiUEFHRV9TVEFSVCIsIlBBR0VfRU5EIiwiQVBQX1NUQVJUIiwiQVBQX0VORCIsIlVTRVJfUFJPRklMRV9LRVkiLCJJTVBSSU5UIiwiSURfVFlQRSIsIkpTQlJJREdFX09OTFkiLCJQQUdFX0NPTkZJRyIsIkFQTFVTX1NLSVBfQVBWX1JVTEVTIiwiUEFHRV9FTlRFUiIsIkNVUlJFTlRfUEFHRV9DT05GSUciLCJfQU5PTllfSUQiLCJfVVNFUl9JRCIsIkRFRkFVTFRfQ09ERSIsIkVWRU5UX01BUCIsIjIxMDEiLCIyMjAxIiwiMjIwMiIsIjE5OTk5IiwiMTAyMyIsIjEwMTAiLCJFVkVOVF9JRF9NQVAiLCJTSE9XIiwiSF9PUl9VIiwiVU5TVUJTQ1JJQkUiLCJTVUJTQ1JJQkUiLCJQVUJMSVNIIiwiQ0FDSEVfUFVCUyIsIkFQTFVTX1VOSVZFUlNBTCIsIkNPTVBMRVRFIiwiUFZfQ09ERSIsIkVYUF9DT0RFIiwiQ0xLX0NPREUiLCJPVEhFUl9DT0RFIiwiU1BNX0NOVCIsIlNQTV9VUkwiLCJTUE1fUFJFIiwiTVdfQ0hBTkdFX1BWIiwiTVdfQ0hBTkdFX0hKTEoiLCJIVFRQUyIsIkFQTFVTX0FQUEVORF9NRVRBX0lORk8iLCJBUExVU19TRVRfTUVUQV9JTkZPIiwiUFZJRCIsIkFQTFVTX0xPR19QSVBFIiwib3BlbkFQSXMiLCJTRVNTSU9OX1BBVVNFX1RJTUUiLCJDVVJSRU5UX1NFU1NJT04iLCJNQVhfRVZFTlRJRF9MRU5HVEgiLCJNQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCIsIk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UIiwiUkVRVUVTVFMiLCJTSEFSRVMiLCJBUExVU19TU1JDIiwibWV0YUluZm8iLCJhcGx1cy1yaG9zdC12IiwiYXBsdXMtcmhvc3QtZyIsImFwbHVzLW1tc3RhdC10aW1lb3V0Iiwic2RrSWQiLCJnbG9iYWxDb25maWciLCJpc0FsaSIsImlzRGVjb2RlVXJsIiwiRVRBR19TVE9SQUdFX0tFWSIsInNjcmlwdF9uYW1lIiwiYXBsdXMtZ2xvYmFsZGF0YSIsImx2ZXIiLCJwbHVnaW5zIiwibmFtZSIsInBhdGgiLCJkZXBzIiwiY29uZmlnIiwicHYiLCJhcGx1c1dhaXRpbmciLCJsb2dkYXRhVG9VdCIsImhqbGoiLCJpc09wZW5BcGkiLCJnZXRHbG9iYWxBcmdzIiwicXVlcnkiLCJzY2VuZSIsImdsb2JhbF9hcmdzIiwibWluaWFwcERlYnVnSWQiLCJkZWJ1Z0lkIiwiayIsImluZGV4T2YiLCJzZXNzaW9uU3RhcnQiLCJvcHRpb25zIiwiY2FjaGUiLCJsb2FkIiwidXRpbExvZ2dlciIsImxvZ2dlciIsIm1zZyIsIm5ld09wdGlvbnMiLCJkZWVwQ2xvbmUiLCJjbG9uZURlZXAiLCJpIiwidXRpbERhc2giLCJhc3NpZ24iLCJyZXF1ZXN0UXVldWUiLCJpc05ld1Nlc3Npb24iLCJzZXNzaW9uTWFuYWdlciIsInJlc3VtZSIsInNlc3Npb25JZCIsImdldEN1cnJlbnRTZXNzaW9uSWQiLCJldmVudE1hbmFnZXIiLCJzZXRTZXNzaW9uSWQiLCJhZGQiLCJ1bVV0aWxzIiwiRGF0YVR5cGUiLCJIQUxGX1NFU1NJT04iLCJzZW5kIiwic2Vzc2lvbkVuZCIsInBhdXNlIiwiQ0xPU0VfU0VTU0lPTiIsInNhdmUiLCJpbmplY3RBcHAiLCJhcHBCYWsiLCJBcHAiLCJhbHJlYWR5U3RhcnRlZCIsImxhbnVjaGVkIiwiY3R4IiwidXRpbEdvbGRsb2ciLCJtaW5pIiwiZm4iLCJvbkxhdW5jaCIsImluaXRJc1RCIiwicmVmZXJyZXJJbmZvIiwiQVBQX0xBVU5DSF9UWVBFIiwicHVzaCIsImFjdGlvbiIsImFyZ3VtZW50cyIsInF1ZXJ5RGF0YSIsInNwbSIsInNwbV9vcmlnbiIsInRyaW0iLCJkZWJ1Z0luZm9zIiwic3BsaXQiLCJhcGx1c193b3JrX25vIiwibGVuZ3RoIiwiYXBsdXNfdHJhY2tfZGVidWdfaWQiLCJhcGx1c19mbGFnIiwib25TaG93Iiwib3B0cyIsInN0YXJ0X3R5cGUiLCJ1dGlscyIsIm9uQXBsdXNSZWFkeSIsInBhZ2VDb2RlIiwiUGFnZU1hbmFnZXIiLCJnZXRQYWdlQ29kZSIsIm9uQXBwU2hvd1RpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInBhZ2VfbmFtZSIsInVybCIsIm9uSGlkZSIsImdldEN1cnJlbnRQYWdlUGF0aCIsImR1cmF0aW9uIiwiZW5kX3R5cGUiLCJzdGFydF90aW1lIiwib25BcHBTaG93IiwiaXNGdW5jdGlvbiIsImdldExhdW5jaE9wdGlvbnNTeW5jIiwib25BcHBIaWRlIiwicnVuIiwicmVzZXRGbiIsInQiLCJuIiwicnMiLCJhcHBseSIsInRoaXMiLCJyZXdyaXRlRm4iLCJvYmoiLCJuZXdGbiIsIm9sZEZuIiwiY2FsbGJhY2siLCJzdGF0dXMiLCJzdHIiLCJuZXdvYmoiLCJBcnJheSIsImlzQXJyYXkiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJfaXNUYiIsInJlc3VsdCIsIlVBIiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwic3d1c2VyQWdlbnQiLCJ0ZXN0IiwiZ2V0UGxhdGZvcm1UeXBlIiwiY2FuSVVzZSIsImlzVEIiLCJ1dGlsIiwiZ2V0Q3VycmVudFBhZ2UiLCJwYWdlcyIsImdldEN1cnJlbnRQYWdlcyIsInJlc2V0SXNUQiIsImRkIiwicGxhdFR5cGUiLCJzZGtUeXBlIiwibG9nRG9tYWluIiwibXkiLCJ0YiIsInR0Iiwic3dhbiIsInd4IiwiZ2V0U2RrVHlwZSIsImdldExvZ0RvbWFpbiIsIkhUVFBfUkVRVUVTVCIsIlJFUVVFU1QiLCJGTiIsInJlcXVlc3QiLCJzdWNjZXNzQ2FsbGJhY2siLCJmYWlsdXJlQ2FsbGJhY2siLCJtZXRob2ROYW1lIiwicmVxdWVzdE1ldGhvZE5hbWUiLCJyZXEiLCJkYXRhVHlwZSIsInRpbWVvdXQiLCJtZXRob2QiLCJjYW4yaHR0cHMiLCJyZXFPcHRpb25zIiwic3VjY2VzcyIsInJlcyIsImZhaWwiLCJjb25zb2xlIiwid2FybiIsImRhdGEiLCJfZXh0SW5mbyIsImdldE1ldGFJbmZvIiwibyIsImFycjJwYXJhbSIsImFyciIsImEiLCJsZW4iLCJzX3BsYWluX29iaiIsImVuY29kZVVSSUNvbXBvbmVudCIsImpvaW4iLCJta1BsYWluS2V5IiwiTWF0aCIsInJhbmRvbSIsIm1rUGxhaW5LZXlGb3JFeHBhcmFtcyIsImtleV9wcmVmaXgiLCJfa2V5IiwicGFyYW0yYXJyIiwicGFyYW1zIiwiaXRlbSIsImwiLCJzaGlmdCIsImFycjJvYmoiLCJyZXQiLCJqc29uTGlrZVN0cjJKU09OIiwianNvblN0ciIsInJlcGxhY2UiLCJhcnIxIiwiYXJyMiIsInByb3RvY2FsIiwiY2hlY2tFbXB0eU9iaiIsIk9iamVjdCIsImtleXMiLCJ1bG9nIiwiaW5pdCIsIm5ld1Nlc3Npb24iLCJfY3VycmVudFNlc3Npb24iLCJnZXQiLCJkYXRlIiwiX3Jlc3VtZVRpbWUiLCJlbmRfdGltZSIsIl9jcmVhdGVOZXdTZXNzaW9uIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiX2VuZFNlc3Npb24iLCJnZXRDdXJyZW50U2Vzc2lvbiIsImNsb25lQ3VycmVudFNlc3Npb24iLCJfZ2V0VW1QYXJhbXMiLCJhcGx1c19xdWVyeSIsInByZXZPcHRpb25zIiwibGF1bmNoT3B0aW9ucyIsInJlZmVycmVyQXBwSWQiLCJhcHBJZCIsImdwIiwidHMiLCJub3ciLCJnZXRSYW5kb21TdHIiLCJzdGF0ZV9zIiwic2V0IiwiX2luc3RhbmNlIiwianNvblV0aWwiLCJDYWNoZSIsImNiIiwiX2RhdGEiLCJyZW1vdmVTdG9yYWdlIiwiX25hbWUiLCJnZXRTdG9yYWdlIiwiX2xvYWRlZCIsInciLCJlcnJNc2ciLCJzZXRTdG9yYWdlIiwic3RyaW5nZnkiLCJyZW1vdmUiLCJnZXRBbGwiLCJjbGVhciIsImhhcyIsImlzTG9hZGVkIiwianNvbiIsInBhcnNlVG9BcnJheSIsIkxPR19QUkVGSVgiLCJVTG9nIiwic2V0RGVidWciLCJkZWJ1ZyIsIl9kZWJ1ZyIsImQiLCJpbmZvIiwiZXJyb3IiLCJsb2ciLCJ0YWJsZSIsInRpcCIsInRpcF93IiwiZXJyIiwicmVwZWF0IiwiY2hhciIsIk51bWJlciIsInBvcyIsInJvdW5kIiwic3RhcnRzV2l0aCIsInNlYXJjaFZhbCIsInN1YnN0ciIsInRhcmdldCIsInVuZGVmaW5lZCIsIlR5cGVFcnJvciIsIm91dHB1dCIsImluZGV4Iiwic291cmNlIiwibmV4dEtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2hlY2tFdmVudCIsImV2ZW50SWQiLCJwcm9wZXJ0aWVzIiwicmVzZXJ2ZVdvcmRzIiwicmVzZXJ2ZVdvcmRNYXAiLCJmb3JFYWNoIiwid29yZCIsImNvdW50IiwiZWFjaCIsImRlbGV0ZUluZm8iLCJnb2tleSIsIkVLViIsIkVOVEVSX1BBR0UiLCJMRUFWRV9QQUdFIiwiQWNjZXNzVHlwZSIsIk1PQklMRV9ORVRXT1JLXzJHIiwiTU9CSUxFX05FVFdPUktfM0ciLCJNT0JJTEVfTkVUV09SS180RyIsIk1PQklMRV9ORVRXT1JLX05PTkUiLCJfY2FjaGVFdmVudHMiLCJfbWVtb3J5RXZlbnRzIiwiZWt2cyIsIl9nZXRDYWNoZUV2ZW50c0xlbmd0aCIsIl9idWlsZEVrdnMiLCJtZW1vcnlFdmVudHMiLCJldmVudHMiLCJfc2Vzc2lvbklkIiwiZXZlbnRzTWFwIiwiYWRkRXZlbnQiLCJldmVudCIsInVuc2hpZnQiLCJfbm9TZXNzaW9uRXZlbnRzIiwiZ2V0RWt2cyIsInRvU3RyaW5nIiwiSGVhZGVyIiwiYnVpbGRCb2R5IiwiUXVldWUiLCJNQVhfUVVFVUVfQ09VTlQiLCJfZW5xdWV1ZVJlcXVlc3QiLCJjbGllbnQiLCJfYXBsdXNfY2xpZW50IiwiaGVhZGVyIiwiZ2V0TmV0SW5mbyIsIm5vQ2FjaGUiLCJfcXVldWUiLCJlbnF1ZXVlIiwiX3NlbmRRdWV1ZSIsImNvbXBsZXRlZENhbGxiYWNrIiwiZnJvbnQiLCJkZXF1ZXVlIiwiX2ZhaWxSZXF1ZXN0cyIsIl9wcm9jZXNzRmFpbFJlcXVlc3RzIiwiX3N0YXJ0U2VuZCIsIl9ydW5uaW5nIiwiUmVxdWVzdFF1ZXVlIiwiaXRlbXMiLCJhY2Nlc3MiLCJuZXR3b3JrVHlwZSIsInRvTG93ZXJDYXNlIiwiYWNjZXNzX3N1YnR5cGUiLCJnZXRIZWFkZXJJbmZvIiwiaW1wcmludCIsImRldmljZV90eXBlIiwic2RrX3ZlcnNpb24iLCJhcHBrZXkiLCJkZXZpY2VfaW5mbyIsImFwcGlkIiwiYXBwX2VudiIsImFwcEVudiIsImFwcF92ZXJzaW9uIiwic3lzdGVtSW5mbyIsInNhZmVBcmVhIiwibW9kZWwiLCJwbGF0Zm9ybSIsImJyYW5kIiwiYnJhbmRMIiwic2RrX3R5cGUiLCJwbGF0Zm9ybV9zZGtfdmVyc2lvbiIsIlNES1ZlcnNpb24iLCJwbGF0Zm9ybV92ZXJzaW9uIiwicGxhdGZvcm1WZXJzaW9uIiwic2NyZWVuV2lkdGgiLCJwaXhlbFJhdGlvIiwiaCIsInNjcmVlbkhlaWdodCIsInJlc29sdXRpb24iLCJwaXhlbF9yYXRpbyIsIm9zIiwiZm9udF9zaXplX3NldHRpbmciLCJmb250U2l6ZVNldHRpbmciLCJkZXZpY2VfbW9kZWwiLCJkZXZpY2VfYnJhbmQiLCJkZXZpY2VfbWFudWZhY3R1cmVyIiwiZGV2aWNlX21hbnVpZCIsImRldmljZV9uYW1lIiwib3NfdmVyc2lvbiIsImxhbmd1YWdlIiwibmV0SW5mbyIsIl9idWlsZEhhbGZTZXNzaW9uIiwic2Vzc2lvbiIsInN0IiwiYW5hbHl0aWNzIiwic2Vzc2lvbnMiLCJfYnVpbGRDbG9zZVNlc3Npb24iLCJfYnVpbGRFa3YiLCJnZXRVcmwiLCJyaG9zdCIsInNka1JlcXVlc3QiLCJzcmNTdWNjZXNzIiwic3JjRmFpbCIsImlzVGltZW91dCIsInJlc3AiLCJjbGVhclRpbWVvdXQiLCJodHRwUmVxdWVzdCIsInNldFRpbWVvdXQiLCJNQVhfUkVRVUVTVF9USU1FT1VUIiwic2F2ZUltcHJpbnQiLCJpbXByaW50TWFuYWdlciIsImdldEltcE9iaiIsImJ1aWxkSHR0cEhlYWRlciIsImhlYWRlclR5cGUiLCJpc015IiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsIk1zZy1UeXBlIiwibWFuZ2xlIiwiYmFzZTY0IiwiZmFpbENhbGxiYWNrIiwicF9oZWFkZXIiLCJhbGlwYXlfaWQiLCJ1bmlvbmlkIiwidXNlcklkIiwib3BlbmlkIiwidXNlcl9uaWNrIiwiYWN0aXZlX3VzZXIiLCJwdWlkIiwicHJvdmlkZXIiLCJ0cmFjZUlkIiwibWFuZ2xlRGF0YSIsInJlcXVlc3REYXRhIiwiZW5jb2RlIiwic3RhdHVzQ29kZSIsImNvZGUiLCJjb21wbGV0ZSIsIl9tYW5nbGVIZWFkZXIiLCJtYXAiLCJfbWFuZ2xlT2JqIiwiaWRfdHJhY2tpbmciLCJpZE1hcCIsIl9tYW5nbGVBbmFseXRpY3MiLCJwcm9wIiwiYW5hbHl0aWNzTWFwIiwiaGVhZGVyTWFwIiwiaWRfdHlwZSIsIl9pZCIsInRlc3RUb2tlbiIsInV1aWQiLCJhbm9ueW1vdXNpZCIsImRldmljZV9pZCIsInVzZXJpZCIsIkltcHJpbnRNYW5hZ2VyIiwiX2ltcHJpbnQiLCJkZWNvZGUiLCJnZXRJdGVtIiwiaW1wb2JqIiwiYjY0Y2hhcnMiLCJiNjR0YWIiLCJiaW4iLCJjaGFyQXQiLCJmcm9tQ2hhckNvZGUiLCJTdHJpbmciLCJjYl91dG9iIiwiY2MiLCJjaGFyQ29kZUF0IiwicmVfdXRvYiIsInV0b2IiLCJ1IiwiY2JfZW5jb2RlIiwiY2NjIiwicGFkbGVuIiwib3JkIiwiY2hhcnMiLCJidG9hIiwiYiIsIl9lbmNvZGUiLCJ1cmlzYWZlIiwibTAiLCJyZV9idG91IiwiUmVnRXhwIiwiY2JfYnRvdSIsImNjY2MiLCJjcCIsIm9mZnNldCIsImJ0b3UiLCJjYl9kZWNvZGUiLCJhdG9iIiwiX2RlY29kZSIsInByZWZpeCIsImxldmVsIiwiZGVidWdMb2ciLCJhcGx1c0RlYnVnIiwibWF4Q291bnQiLCJfbWF4Q291bnQiLCJfaXRlbXMiLCJzaXplIiwiaXNFbXB0eSIsInByaW50IiwibWFrZUNhY2hlTnVtIiwiZmxvb3IiLCJpc1N0YXJ0V2l0aCIsInMxIiwiczIiLCJpc0VuZFdpdGgiLCJsMSIsImwyIiwiYW55IiwiaXNOdW1iZXIiLCJpc05hTiIsImlzQ29udGFpbiIsImNvbnN0cnVjdG9yIiwidGFyZ2V0T2JqIiwiYXJnc09iaiIsInRvIiwibmV4dFNvdXJjZSIsImJ1aWxkUGF0aCIsInFzIiwicXNzIiwiY3VycmVudFBhdGgiLCJwYWdlT3B0aW9uTWFwIiwic2V0Q3VycmVudFBhdGgiLCJnZXRQYWdlUXVlcnkiLCJzZXRQYWdlUXVlcnkiLCJnZXRGdWxsUGF0aCIsImdldFBhZ2VOYW1lIiwibWV0YSIsInJlYWxQYXRoIiwicmVnUnVsZSIsInBhZ2VOYW1lIiwiZ2V0VlRSZWFsdGltZUNvZGUiLCJyZWdFeHAiLCJkZWNvZGVVUklDb21wb25lbnQiLCJoYW5kbGVyU2hhcmVBcHBNc2ciLCJvcHQiLCJwYWdlIiwicm91dGUiLCJpcyIsImxpbmtQYXJtYXMiLCJmb3JtYXQiLCJvYmoycGFyYW0iLCIkJF9zaGFyZV91aWQiLCJfX0VUQUdfX0NOQV9fSURfXyIsIiQkX3V0bV9tZWRpdW0iLCJhcHBlbmRQYXJhbXMiLCJvblB1bGxEb3duUmVmcmVzaCIsIm9uUmVhY2hCb3R0b20iLCJ0aGF0Iiwib25QYWdlTG9hZCIsIl9jdXJyZW50UGFnZSIsIm9uUGFnZVNob3ciLCJvblBhZ2VSZWFkeSIsIm9uUGFnZUhpZGUiLCJvblBhZ2VVbmxvYWQiLCJvbkFwbHVzQ2xrIiwib25BcGx1c1RvdWNoIiwicmV3cml0ZVNoYXJlIiwib25TaGFyZUFwcE1lc3NhZ2UiLCJvbGRPblNoYXJlQXBwTWVzc2FnZSIsInNoYXJlUmVzdWx0IiwicmV3cml0ZVNoYXJlVGltZWxpbmUiLCJvblNoYXJlVGltZWxpbmUiLCJvbGRPblNoYXJlVGltZWxpbmUiLCJpbmplY3RQYWdlIiwib2xkUGFnZSIsIlBhZ2UiLCJwYWdlT3B0aW9ucyIsImluamVjdENvbXBvbmVudCIsIm9sZENvbXBvbmVudCIsIkNvbXBvbmVudCIsIm1ldGhvZHMiLCJpbmplY3RNaWR3YXkiLCJtcEN0eCIsInNraXBFbmNvZGUiLCJpc0luUGxhbk9iaiIsIl92YWx1ZSIsInBhcmFtMm9iaiIsImZyYWdtZW50Iiwic2xpY2UiLCJjb21tVHJhbnNsYXRlIiwiX3YiLCJlbmNvZGVHb2tleVZhbHVlIiwicHVzaFF1ZXVlIiwiYXJncyIsIl9zZWxmIiwiX2dldE5ldHdvcmtUeXBlIiwiZ2V0TmV0d29ya1R5cGUiLCJfZ2V0U3lzdGVtSW5mbyIsImVtcHR5T2JqIiwic3lzSW5mbyIsIlNZU1RFTV9JTkZPIiwidmVyc2lvbiIsImdldFN5c3RlbUluZm8iLCJfZ2V0QWNjb3VudEluZm9TeW5jIiwiZ2V0QWNjb3VudEluZm9TeW5jIiwiYWNjb3VudEluZm8iLCJtaW5pUHJvZ3JhbSIsInBsdWdpbiIsImFwcFZlcnNpb24iLCJlbnZWZXJzaW9uIiwicGx1Z2luQXBwSWQiLCJwbHVnaW5BcHBWZXJzaW9uIiwiZ2V0QXBwSWRTeW5jIiwiYXBwSW5mbyIsInN0YXRlIiwidG9Mb2NhbGVVcHBlckNhc2UiLCJzeXN0ZW0iLCJob3N0IiwiZW52IiwiUHViU3ViIiwiYXBsdXNfcHVic3ViIiwiY3JlYXRlIiwiQmFzZSIsImdldEFyZ3MiLCJfYXJncyIsImoiLCJleHRlbmQiLCJjYWxsYWJsZSIsInByb3BzIiwiaW5zdGFuY2UiLCJoYW5kbGVycyIsInB1YnMiLCJzZXRIYW5kbGVycyIsInN1YnNjcmliZSIsImVUeXBlIiwidW5zdWJzY3JpYmUiLCJzIiwiaF9zdHIiLCJzX3N0ciIsInNwbGljZSIsInB1Ymxpc2giLCJjYWNoZVB1YnMiLCJTdWJCYXNlIiwiRiIsIl8kIiwiaXNfdGVybWluYWwiLCJzZW5kX3B2X2NvdW50IiwibWV0YV9pbmZvIiwicUdldCIsInNldE1ldGFJbmZvIiwiaXNJbnRlcm5hdGlvbmFsIiwiZ2V0SW5mbyIsImxhc3RfaW5mbyIsInV0aWxQdWJzdWIiLCJPQkpFQ1QiLCJTVFJJTkciLCJhcHBlbmRNZXRhSW5mbyIsImZsYWciLCJwcm9jZXNzT2JqZWN0Iiwib2xkX3ZhbHVlIiwibmV3X3ZhbHVlIiwidG9TZXRNZXRhSW5mbyIsInByb2Nlc3NBcnJheSIsInByb2Nlc3NPYmoiLCJfc2V0TWV0YUluZm8iLCJmcm9tIiwiX29sZFZhbHVlIiwicGFnZVByb3BlcnRpZXMiLCJfayIsInRtcF9wYXJzZSIsImFyZzEiLCJkZWZhdWx0TW9kZSIsIm1vZGUiLCJtZXRhTmFtZSIsIm1ldGFWYWx1ZSIsIm1zZ3MiLCJkb1B1Yk1zZyIsImRvQ2FjaGVQdWJzIiwiZ2V0UHVic3ViIiwicHVic3ViIiwiZG9TdWJNc2ciLCJjb2xsZWN0X2NsayIsImFwbHVzQ3R4IiwiY2xrX2NvbmZpZyIsImluaXRDbGsiLCJzcG1CIiwiY3NzU2VsZWN0b3IiLCJlbGVtZW50cyIsImNyZWF0ZVNlbGVjdG9yUXVlcnkiLCJzZWxlY3RBbGwiLCJmaWVsZHMiLCJkYXRhc2V0IiwicmVjdCIsInNjcm9sbE9mZnNldCIsIndhdGNoX2NsaWNrIiwiZXhlYyIsImJvdW5kaW5nQ2xpZW50UmVjdCIsImdldERhdGFTZXQiLCJfYXBsdXNfYXV0b19leHAiLCJfaGFzaE1hcCIsImhhc2hNYXAiLCJsb2drZXkiLCJlbGVfcyIsImV4cENvbmZpZyIsImhhc2giLCJnZXRIYXNoS2V5IiwiaGFzaF92YWx1ZSIsIndhdGNoVHJhY2tlciIsImNsa0luZm8iLCJpc0luQXJlYSIsImVsZUluZm8iLCJjaGFuZ2VkVG91Y2giLCJjaGFuZ2VkVG91Y2hlcyIsImRldGFpbCIsIngiLCJjbGllbnRYIiwieSIsImNsaWVudFkiLCJfdG9wIiwidG9wIiwiX2JvdHRvbSIsImJvdHRvbSIsInNjcm9sbFRvcCIsImxlZnQiLCJyaWdodCIsInNwbURhdGEiLCJfc3BtRGF0YSIsInRyYWNrZXJQYXJhbXMiLCJzcG1DIiwidHJhY2tlciIsInNwbUQiLCJwdXNoRXZlbnQiLCJnZXRVc2VySW5mbyIsInVzZXJGbk5hbWUiLCJlbGVtZW50Iiwic2VsZWN0b3IiLCJ1c2VyRm4iLCJ1c2VySW5mbyIsImdldEZpeGVkTnVtYmVyIiwiX3Jlc3VsdCIsIl9udW0iLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsInJlY29yZEV4cE1hcFF1ZXVlIiwiREVGQVVMVF9QS0dfU0laRSIsIlBPU1QiLCJFdmVudEFycmF5IiwiYnVmZmVyIiwicGtnU2l6ZSIsImdva2V5cyIsImNvbWJpbmVSZWNvcmQiLCJnbWtleSIsImRhdGFrZXkiLCJfdyIsIndpZHRoIiwiX2giLCJoZWlnaHQiLCJfeCIsIl95IiwiX3JhdGUiLCJ2aWV3YWJpbGl0eVJhdGUiLCJpbnRlcnNlY3Rpb25SYXRpbyIsIl92aWV3YWJpbGl0eSIsIl92dCIsIl90cmFja2VyUGFyYW1zIiwidHJhY2tlcnBhcmFtcyIsImV4YXJncyIsImN1c3RvbUFyZ3MiLCJyZWNvcmQiLCJ3YXRjaFJlY29yZCIsImNmZyIsImNsZWFyUmVjb3JkIiwiZWxlbWVudEF0dHIiLCJoYXNoS2V5IiwicG9zaXRpb25TZWxlY3RvciIsImNvbGxlY3RfZXhwIiwiUEFHRV9EQVRBX01BUCIsIndhdGNoTWV0YUluZm8iLCJpc0ZpcnN0Iiwid2F0Y2hUeXBlIiwiaGFuZGxlck1ldGFJbmZvIiwibWV0YUtleSIsIl9jb25maWcyIiwiZ2V0QXV0b0V4cENvbmZpZyIsIl9jb25maWciLCJ3YXRjaF9leHBvc3VyZSIsImluaXRFeHAiLCJyZXNldEF1dG9FeHAiLCJfcGF0aCIsIl9jdXJyZW50RGF0YSIsImlzU3RhcnQiLCJpc0ZpcnN0VG91Y2giLCJvYnNlcnZlcnMiLCJ1dGlsQXJyYXkiLCJjb25mIiwicmVsb2FkQ3R4Iiwid2FpdCIsImhhc2hpbmciLCJzdWJqZWN0IiwidHlwZSIsImR1cCIsIm5ld09ic2VydmVyIiwiaW5pdE9ic2VydmVyIiwiY2hlY2tJc0luSGFzaE1hcCIsInVwZGF0ZUhhc2hNYXAiLCJhZGRPYnNlcnZlIiwiZW50cnkiLCJfaW5kZXgiLCJfZW50cnkiLCJleHBvc3VyZUhhbmRsZSIsImV4aXN0IiwidGhyZXNob2xkcyIsIkFVVE9fQVRfVklFV19SQVRFIiwiaW5pdGlhbFJhdGlvIiwiaXNNWSIsImNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyIiwib2JzZXJ2ZUFsbCIsIm9ic2VydmVyIiwiY3NzIiwicmVsYXRpdmVUbyIsIm9ic2VydmUiLCJyZWxhdGl2ZVRvVmlld3BvcnQiLCJleHBvc3VyZVRpbWUiLCJleHBFbGVtZW50cyIsImNoZWNrU3RhcnQiLCJ0ZW1wcyIsIl9lbGVQb3MiLCJyZXNldCIsImRpc2Nvbm5lY3QiLCJnZXRNZXRhVmFsdWUiLCJ1dGlsTWV0YSIsImdldE1ldGFDbnQiLCJEQVRBX0FQTFVTX0FFX0tFWSIsIkRBVEFfQVBMVVNfQUNfS0VZIiwiREFUQV9BUExVU19TUE1fQU5DSE9SX0lEX0tFWSIsIkRBVEFfQVBMVVNfVlRfSVRFTV9JTkRFWF9LRVkiLCJMT09QX1RJTUUiLCJnZXREZWZhdWx0UmVxdWVzdENmZyIsImdldEF1dG9FeHBWaWV3UmF0ZSIsImRlZmF1bHRfdmFsdWUiLCJyYXRlIiwidmlzaWJsZV9yYXRlIiwiZ2V0QXV0b0V4cER1cmF0aW9uIiwidG1wX2R1cmF0aW9uIiwiZHVyYXRpb25fbiIsInBhcnNlSW50IiwiRVhQX0RVUkFUSU9OIiwiZ2V0QXV0b0NvbmZpZyIsImNvbmZpZ0tleSIsIm1ldGFPYmoiLCJhcGx1c0F1dG9FeHAiLCJjb25maWdzIiwidG1wX3RhZ19maWx0ZXIiLCJ0bXAiLCJ0YWciLCJmaWx0ZXIiLCJ3aG9sZVNlbGVjdG9yIiwiRXJyb3IiLCJ0YWdfZmlsdGVyIiwiZWxlbWVudFNlbGVjdG9yIiwiaW5kZXhvZiIsImdldEF1dG9FeHBVc2VyRm4iLCJhZUF1dG9Vc2VyRm4iLCJpc1Rocm90dGxlV2F0Y2hEb20iLCJnZXRBdXRvQ2xrQ29uZmlnIiwiZ2V0QXV0b0Nsa1VzZXJGbiIsImFjQXV0b1VzZXJGbiIsIml0ZW1NYXRjaCIsIm1hdGNoZWQiLCJzb21lIiwiZ2V0TWV0YVRhZ3MiLCJmb3JjZSIsIl9oZWFkX25vZGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiX21ldGFfbm9kZXMiLCJhdHRyIiwiY29udGVudCIsIm1ldGFfbm9kZXMiLCJ1dGlsQXR0cmlidXRlIiwidHJ5VG9HZXRBdHRyaWJ1dGUiLCJnZXRPbmVQYWdlSW5mbyIsImlzb25lcGFnZSIsInVybHBhZ2VuYW1lIiwiaXNvbmVwYWdlX2RhdGEiLCJhcnJfY29udGVudCIsImF0dHJfbmFtZSIsImdldEF0dHJpYnV0ZSIsInRyeVRvU2V0QXR0cmlidXRlIiwiYXR0cl92YWx1ZSIsInNldEF0dHJpYnV0ZSIsInRyeVRvUmVtb3ZlQXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwicmVzZXRMYXN0UGFnZVNwbSIsInNwbV9jbnQiLCJsaXN0ZW4iLCJwYWdlSW5zdGFuY2UiLCJjdXJyZW50UGFnZVBhdGgiLCJjdXJyZW50IiwibWF0Y2hVcmwiLCJzZXRQYWdlU1BNIiwic3BtQSIsInNwbWFiIiwic3BtQ250Iiwic3BtYWJzdHIiLCJjdXJyZW50UGFnZSIsInByZVBhZ2UiLCJwcmVQcmVQYWdlIiwiY3VycmVudFBhZ2VTcG0iLCJwYWdlX3JlZmVycmVyIiwic3BtX3ByZSIsInNwbVByZSIsInNwbV91cmwiLCJzcG1VcmwiLCJNYWluIiwibWFpbiIsImhhbmRsZUV2ZW50IiwibWFpbl9iYXNlX2h0dHAiLCJoYW5kbGVyTWlkZGxld2FyZSIsInVzZXJFdmVudEFyZ3MiLCJ1c2VyZGF0YSIsImxvZ2RhdGEiLCJ3aGF0X3RvX3NlbmQiLCJldmVudF9hcmdzIiwic2RrQXJncyIsInJlZmVyX3BhZ2UiLCJzaGFyZV90eXBlIiwiY2xvbmVQIiwiY3VzcCIsImV2ZW50X2NvZGUiLCJwdmFyZ3MiLCJwYWdlX2lkIiwiciIsInJlZl91cmwiLCJwcmUiLCJfcGFnZV9hdXRvX3B2IiwiaXNfYXV0byIsIl9wYWdlX2F1dG9faWQiLCJwYWdlX3N0YXJ0Iiwid2F0Y2hMT0ciLCJ1dGlsR1EiLCJzdWJzY3JpYmVMb2dzIiwicHVzaEludG9Hb2xkbG9nUXVldWUiLCJvcmlEYXRhcyIsImdldExvZ2ljU3ltYm9sIiwibmFtZXMiLCJhcGx1c18xIiwiYXBsdXNfMiIsInByb3BzVHlwZSIsImdldExvZ0NvbmZpZyIsImxvZ0NvbmZpZyIsInBhZ2VMb2FkVGltZSIsIlBBR0VfTE9BRF9USU1FIiwidXRpbEV0YWciLCJFTVBUWV9DTkEiLCJfc3luY0V0YWciLCJjaGVjayIsImNuYSIsImV0YWdTdG9yYWdlS2V5IiwiZmV0Y2hFdGFnU3RhdHVzIiwidG9TeW5jRXRhZyIsImFwbHVzX3Job3N0X3YiLCJlZ1VybCIsImV0YWciLCJldGFnS2V5VmFsdWUiLCJldGFncyIsInJlczIiLCJDTkEiLCJldGFnVGltZW91dCIsImRlZmF1bHRUaW1lIiwidGltZSIsInV0aWxEYXRhIiwidXRpbFRyaW0iLCJ1dGlsU3RvcmUiLCJ0cnlUb0RlY29kZVVSSUNvbXBvbmVudCIsImRlZmF1bHRfdmFsIiwicGFyc2VTZW1pY29sb25Db250ZW50IiwiZGljdCIsInVuZGVjb2RlIiwiYTIiLCJhX2xlbiIsIm5vZGVMaXN0VG9BcnJheSIsIm5vZGVzIiwiZ2V0THNDbmEiLCJfbHNfY25hIiwiX2FyciIsInNldExzQ25hIiwidG9kYXkiLCJyaG9zdF92IiwicmVnIiwiY3VzdG9tX2hvc3QiLCJtYXRjaCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJ0ZXN0S2V5IiwicmVtb3ZlSXRlbSIsImdldEFwbHVzV2FpdGluZyIsIndoZW5fdG9fc2VuZHB2IiwiaXNXYWl0IiwiZ2V0SG9zdFVybCIsIndoZXJlX3RvX3NlbmQiLCJsb2dJZCIsInV0aWxQYXJhbXMiLCJDTlQiLCJVUkwiLCJQUkUiLCJnZXRDb21tb25QYXJhbXMiLCJwbGF0Zm9ybVR5cGUiLCJfZGV2X2lkIiwiX2Fub255X2lkIiwiX3VzZXJfaWQiLCJfdXNlcl9uaWNrIiwiX3Nlc3Npb25faWQiLCJ1YWlkIiwibG9nSWRLZXkiLCJsb2dJZEtleTIiLCJ0aXRsZSIsImdldExvZ0lkIiwiY29tbW9uUGFyYW1zIiwiYXBwS2V5Iiwic2RrX2luZm8iLCJqc3ZlciIsImN1c3RvbVNka0lkIiwidGltZVpvbmUiLCJnZXRUaW1lWm9uZSIsInB2aWQiLCJzZXNzaW9uQXJncyIsImdsb2JhbEFyZ3MiLCJnZXRQdlBhcmFtcyIsIm1hbnNuZGxvZyIsImxvZ3R5cGUiLCJldmVudF90aW1lc3RhbXAiLCJnZXRIamxqUGFyYW1zIiwiaGpsalBhcmFtcyIsInJlY29yZFR5cGUiLCJnZXRDaGFycyIsImRlZmF1bHRWYWwiLCJ1dGlsSGFzaCIsImdldFJhbmRvbUlkIiwiaGFuZGxlUFZJZCIsImNoYXJQb3MiLCJjaGFyc1dpdGhvdXRHIiwiY2hhcnNXaXRob3V0TCIsInJuZF9zdHJzIiwiaGFuZGxlZCIsInBhZ2VVcmwiLCJsb2dOYW1lIiwicmFuZG9tOENoYXJzIiwicmFuZG9tNENoYXJzIiwicmFuZG9tNkNoYXJzIiwiY2giLCJkZWZfdiIsIl90aW1lWm9uZSIsImdldFRpbWV6b25lT2Zmc2V0IiwiX2FuZCIsInpvbmUiLCJhYnMiLCJyZW1haW5kZXIiLCJyZW1haW5kZXJab25lIiwiaXNUQkVudiIsIndpbmRtaWxsIiwiZ2V0VXNlcmRhdGEiLCJjb21ib1VzZXJkYXRhIiwicGFnZVByb3BlcnR5IiwidXBkYXRlUHJlIiwicmVmZXJyZXIiLCJ1cGRhdGVVcmwiLCJ1cGRhdGVTcG1VcmwiLCJnZXRVc2VyRGF0YSIsImV4ZGF0YSIsIl9hcGx1c19hcGkiLCJhcGx1c09iaiIsIm1zZ0FyciIsIlJlZHVjZXIiLCJpc1RyaXZlciIsIl9nZXRQYWdlU3BtIiwic3ViVHlwZSIsInNwbVR5cGUiLCJfc2VuZCIsIl9yZXF1ZXN0VlRDb25maWciLCJfc2VuZFBWIiwicmVkdWNlciIsInB1YnN1YlR5cGUiLCJtaWRkbGV3YXJlTWVzc2FnZUtleSIsIl9jb21iaW5lUmVjb3JkIiwic2VuZHRvbXkiLCJzY20iLCJhcGx1c0NvbnRlbnRJZCIsIl9hcGx1c19zZW5kdG9teSIsIl9nb2tleXMiLCJfcmVjb3JkIiwiZ2V0UGFnZVNQTSIsIl9zZXRQYWdlU1BNIiwiX3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzIiwicmVwb3J0QW5hbHl0aWNzIiwic3BtRGV0YWlsIiwiaWdub3JlRGVmYXVsdFBhZ2VNb25pdG9yIiwiX3VwZGF0ZU5leHRQYWdlUHJvcGVydGllcyIsImV2ZW50aWQiLCJjb21OYW1lIiwiYXJnMiIsImFyZzMiLCJwYXJhbSIsImNhbGxVc2VyVHJhY2siLCJfYXBwZW5kTWV0YUluZm8iLCJfc2tpcFBhZ2UiLCJfcGFnZUFwcGVhciIsImlzUGFnZURpc0FwcGVhciIsImlzUGFnZUFwcGVhciIsIl9wYWdlRGlzYXBwZWFyIiwiX3VwZGF0ZVBhZ2VVdHBhcmFtIiwidXRQYXJhbUpzb24iLCJfdXBkYXRlTmV4dFBhZ2VVdHBhcmFtIiwiX3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzIiwiZXh0RGF0YSIsIl9nZXRQYWdlU3BtVXJsIiwiX2dldFBhZ2VTcG1QcmUiLCJfc2V0UGFnZU5hbWUiLCJjdXJQYXRoIiwicGFnZU1ldGEiLCJfZ2V0RWxlbWVudFNQTSIsInNwbUNEIiwidGFyZ2V0U3BtIiwiYXV0b19jbGtfbWV0YWluZm8iLCJhdXRvX2V4cF9tZXRhaW5mbyIsImNsa19pbmZvIiwiZXhwX2luZm8iLCJDb21wb3NlIiwicGx1Z2luc0xvYWRlciIsIkNPTkZJRyIsInBsIiwibWlkZGxld2FyZSIsImFwcCIsImNvbXBvc2UiLCJ3cmFwIiwibWVzc2FnZUZuUXVldWUiLCJjYWxsZWRMaXN0Iiwic2V0Q2FsbGVkTGlzdCIsInJlc2V0Q2FsbGVkTGlzdCIsIm13IiwibWF4VGltZW91dCIsInNsZWVwSGFuZGVyMSIsIl90aW1lX291dCIsIl9td19uYW1lIiwicGx1Z2luc19uYW1lIiwicHVic3ViSW5mbyIsInF1ZSIsImdldEZvcm1hdFF1ZXVlIiwicXVldWUiLCJwcm9jZXNzR29sZGxvZ1F1ZXVlIiwiZm9ybWF0UXVldWUiLCJnZXRBcGx1c0hvbGRUeXBlIiwiZmlsdGVyVGFzayIsInRhc2siLCJob2xkVHlwZSIsIlNUQVJUIiwiQVBMVVNfSE9MRF9RVUVVRSIsInByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlIiwiQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUiLCJBUExVU19IT0xEX0FOT05ZX1FVRVVFIiwiZ2V0TWV0aG9kTmFtZSIsIlFVRVVFIiwiZGVsYXlUYXNrcyIsInByb2Nlc3NUYXNrIiwic3Vic2NyaWJlQW5kUHJvY2Vzc1F1ZXVlIiwicXVldWVOYW1lIiwiX2ZuIiwicXVldWVNYXAiLCJzdWJzY3JpYmVNd0NoYW5nZVF1ZXVlIiwic3Vic2NyaWJlTWV0YVF1ZXVlIiwic3Vic2NyaWJlUXVldWUiLCJtZXRhUXVldWUiLCJvdGhlcnNRdWV1ZSIsImFjIiwicHJvY2Vzc0FwbHVzUXVldWUiLCJzdGFydExlbmd0aCIsImF1dG9UcmFja2VyIiwiZXZlbnRIYW5kbGUiLCJldmVudE5hbWUiLCJwZHJfY29uZmlnIiwicGFnZW5hbWUiLCJyYl9jb25maWciLCJzaGFyZV9jb25maWciLCJwYWdlQ29uZmlnIiwiX2hhc1RyYWNrZWQiLCJleHRyYVBhcmFtcyIsImlzTWluaSIsInNlbmRQViIsImdldENvbmZpZyIsImZldGNoVmVyaWZ5Q29uZmlnIiwiYXBwSW5mb0lkIiwiYXBpX2hvc3QiLCJ2ZXJpZnlfaG9zdCIsInZlcmlmeVVybCIsImNmZ0RhdGEiLCJfYmVnaW5Mb2FkIiwiX21pbmljZmdfbG9hZCIsIl9hcGx1c192dF9jZmciLCJ1dGlsVlQiLCJ2dDJhdXRvRXZlbnQiLCJvbkNsaWNrIiwiaXNBdXRvIiwiTUlOSV9WVF9DT05GSUdfRk9STUFUIiwiZW5hYmxlZCIsIkZldGNoQ29uZmlnIiwiX2FwbHVzX2FsZWFkeV9sb2FkX21pbml2dCIsImZjIiwidXRpbENhdGNoIiwibWluaXZ0U3RvcmUiLCJNSU5JX1ZUX0NPTkZJR19CQUNLIiwiR09MRExPR19QVUJMSVNIIiwicGF0aG5hbWUiLCJvcmlnaW5TcG0iLCJ1cGRhdGVDZmdMcyIsImZldGNoRnJvbUNkbiIsInJlcXVlc3RWVENvbmZpZyIsInBvaW50cyIsInNldENvbmZpZ0ludG9McyIsImVuYWJsZSIsImNhdGNoRXhjZXB0aW9uIiwiZ2V0TWluaVZ0RGF0YSIsImNkbnBhdGgiLCJwcmVVcmwiLCJmcm9tQ0ROIiwidnRDb25maWciLCJmZXRjaEZyb21MUyIsInN5bmNNaW5pVnREYXRhIiwiZ2V0VnRDb25maWdQYXRoIiwiR09MRExPR19TVUJTQ1JJQkUiLCJmaWxlbmFtZSIsIm1lc3NhZ2UiLCJsc01pbml2dENvbmZpZ0tleSIsImdldE1pbmlWdFRwbENkblBhdGgiLCJhcGx1c1RyYWNrQ29uZmlnSWRJbmZvIiwidHVybm9uIiwic3BtSWQiLCJ0ZW1wbGF0ZVZhbCIsInNwbUFCIiwiZ2V0U3RvcmFnZVN5bmMiLCJzZXRTdG9yYWdlU3luYyIsImdldEN1cnJlbnRQYWdlVlRDZmciLCJ2dENmZyIsInZ0X2NmZyIsInBjIiwic2V0UGFnZU5hbWUiLCJhdXRvX2V4cF9hcnIiLCJhdXRvX2Nsa19hcnIiLCJ0cmFja2VyVHlwZSIsInNlbGVjdG9yVHlwZSIsInRlbXBsYXRlIiwic3RkSWQiLCJhcGx1c2luaXQiLCJzaXRlSWQiLCJSVU5OSU5HIiwiYXBsdXNTdGF0dXMiLCJjb25maWdfcHZfY29udGV4dCIsIlBMVUdJTlNfUFYiXSwibWFwcGluZ3MiOiI7QUFBQUEsT0FBT0MsVUFDRSxTQUFVQztJQ0duQixTQUFBQyxFQUFBQztRQUdBLElBQUFDLEVBQUFELElBQ0EsT0FBQUMsRUFBQUQsR0FBQUg7UUFHQSxJQUFBRCxJQUFBSyxFQUFBRDtZQUNBSDtZQUNBSyxJQUFBRjtZQUNBRyxTQUFBOztRQVVBLE9BTkFMLEVBQUFFLEdBQUFJLEtBQUFSLEVBQUFDLFNBQUFELEtBQUFDLFNBQUFFLElBR0FILEVBQUFPLFVBQUEsR0FHQVAsRUFBQUM7O0lBdkJBLElBQUFJO0lBcUNBLE9BVEFGLEVBQUFNLElBQUFQLEdBR0FDLEVBQUFPLElBQUFMLEdBR0FGLEVBQUFRLElBQUEsSUFHQVIsRUFBQTtJRE9NLFNBQVVILEdBQVFDLEdBQVNFO0lBRWhDSCxFQUFPQyxVQUFVRSxFQUFvQjtHQUtoQyxTQUFVSCxHQUFRQyxHQUFTRTtJRTFDakM7SUFDQUEsRUFBQSxHQUFBUyxjQUNBWixFQUFBQyxVQUFBLFNBQUFZO1FBQ0EsSUFBQUMsSUFBQVgsRUFBQTtRQUNBLE9BQUFBLEVBQUEsSUFBQVUsR0FBQUM7O0dGNERNLFNBQVVkLEdBQVFDLEdBQVNFO0lHakVqQztJQUVBLElBUUFZLEdBUkFDLElBQUFiLEVBQUEsSUFFQWMsSUFBQUQsRUFBQUMsT0FDQUMsSUFBQUYsRUFBQUUsYUFFQUMs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QUEyRSxFQUFBM0U7WUFDQTFHLFNBQUFxTCxFQUFBckw7O1lBRUE4RztZQUNBbTNCO1lBQ0FrSyxZQUFBO1lBQ0FxRDtZQUNBcEQsc0JBQUE7V0FDRyxTQUFBcitCO1lBQ0gsSUFBQTZrQixNQUFBLG9CQUFBN2tCO1lBQ0F1akIsRUFBQXVCLFNBQUFELElBQ0F0QixFQUFBd0IsWUFBQUYsSUFDQXJpQixFQUFBYyxNQUNBQSxFQUFBdEQiLCJmaWxlIjoiYXBsdXNfbWluaV9jbG91ZF91bS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID1cbi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHQvKipcblx0ICogYXBsdXNfbWluaV9jbG91ZC5qc1xuXHQgKiDkupHkuIrlsI/nqIvluo/mqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDpvpnpqbkgPGNoZW5ncGluZy5yY3BAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLmluaXRHbG9iYWwoKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwQ29uZmlnKSB7XG5cdCAgdmFyIGFwbHVzX2NvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7IFxuXHQgIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKShhcHBDb25maWcsYXBsdXNfY29uZmlnKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOaTjeS9nGFwbHVz55qE5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBBUExVUyA9IGFwbHVzU3RhdGljLkFQTFVTO1xuXHR2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c1N0YXRpYy5BUExVU19RVUVVRTtcblx0XG5cdHZhciBHT0xETE9HID0gYXBsdXNTdGF0aWMuR09MRExPRztcblx0dmFyIEdPTERMT0dfUVVFVUUgPSBhcGx1c1N0YXRpYy5HT0xETE9HX1FVRVVFO1xuXHRcblx0dmFyIF9hcGx1c19jb250ZXh0O1xuXHR2YXIgaXNXZWIgPSBmYWxzZTtcblx0dHJ5IHtcblx0ICBfYXBsdXNfY29udGV4dCA9IHdpbmRvdztcblx0ICBpc1dlYiA9IHRydWU7XG5cdH0gY2F0Y2ggKGUpIHtcblx0ICBfYXBsdXNfY29udGV4dCA9IHt9O1xuXHR9XG5cdFxuXHRleHBvcnRzLmdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIF9hcGx1c19jb250ZXh0O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pbml0R2xvYmFsID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcblx0ICBpZiAoY29udGV4dCkge1xuXHQgICAgX2FwbHVzX2NvbnRleHQgPSBjb250ZXh0O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBfYXBsdXNfY29udGV4dCA9IHtcblx0ICAgICAgdjogMSxcblx0ICAgICAgYXBsdXM6IHt9LFxuXHQgICAgICBhcGx1c19xdWV1ZTogW11cblx0ICAgIH07XG5cdCAgfVxuXHQgIHZhciBfYXBsdXNEZWZhdWx0VmFsdWU7XG5cdCAgdmFyIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlO1xuXHQgIGlmIChpc1dlYikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgX2FwbHVzRGVmYXVsdFZhbHVlID0gKF9hcGx1c19jb250ZXh0LmFwbHVzIHx8IChfYXBsdXNfY29udGV4dC5hcGx1cyA9IHt9KSk7XG5cdCAgICAgIHZhciBfZ29sZGxvZ19xdWV1ZSA9IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlIHx8IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlID0gW10pKTtcblx0ICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgfHwgKF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gW10pKTtcblx0ICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfZ29sZGxvZ19xdWV1ZS5jb25jYXQoX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUpOyAgXG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH0gZWxzZSB7XG5cdCAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1cztcblx0ICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWU7XG5cdCAgfVxuXHQgIFxuXHQgIF9hcGx1c19jb250ZXh0LmFwbHVzID0gX2FwbHVzX2NvbnRleHQuZ29sZGxvZyA9IF9hcGx1c0RlZmF1bHRWYWx1ZTtcblx0ICBfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgPSBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcblx0ICBcblx0ICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG5cdH07XG5cdFxuXHR2YXIgZ2V0R2xvYmFsVmFsdWUgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgaWYgKGtleSA9PT0gQVBMVVMgfHwga2V5ID09PSBHT0xETE9HKSB7XG5cdCAgICB2YXIgZyA9IF9hcGx1c19jb250ZXh0W0FQTFVTXSB8fCBfYXBsdXNfY29udGV4dFtHT0xETE9HXTtcblx0ICAgIGlmICghZykge1xuXHQgICAgICBnID0gX2FwbHVzX2NvbnRleHRbQVBMVVNdID0gX2FwbHVzX2NvbnRleHRbR09MRExPR10gPSB7fTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBnO1xuXHQgIH1cblx0ICB2YXIgZ29sZGxvZ19xdWV1ZSA9IEdPTERMT0dfUVVFVUU7XG5cdCAgdmFyIGFwbHVzX3F1ZXVlID0gQVBMVVNfUVVFVUU7XG5cdCAgaWYgKGtleSA9PT0gYXBsdXNfcXVldWUgfHwga2V5ID09PSBnb2xkbG9nX3F1ZXVlKSB7XG5cdCAgICB2YXIgcSA9IF9hcGx1c19jb250ZXh0W2FwbHVzX3F1ZXVlXSB8fCBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXTtcblx0ICAgIGlmICghcSkge1xuXHQgICAgICBxID0gX2FwbHVzX2NvbnRleHRbYXBsdXNfcXVldWVdID0gX2FwbHVzX2NvbnRleHRbZ29sZGxvZ19xdWV1ZV0gPSBbXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBxO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRHbG9iYWxWYWx1ZSA9IGdldEdsb2JhbFZhbHVlO1xuXHRcblx0ZXhwb3J0cy5zZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgX2FwbHVzX2NvbnRleHRba2V5XSA9IHZhbHVlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPlmFwbHVz5YaF6YOo5Y+Y6YePXG5cdCAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG5cdCAqIEByZXR1cm4gW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dXG5cdCAqL1xuXHR2YXIgZ2V0R29sZGxvZ1ZhbCA9IGZ1bmN0aW9uKGtleSkge1xuXHQgIHZhciB2O1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG5cdCAgICB2ID0gYXBsdXNba2V5XTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB2ID0gJyc7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiB2O1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRHb2xkbG9nVmFsID0gZ2V0R29sZGxvZ1ZhbDtcblx0LyoqXG5cdCAqIOiuvue9rmFwbHVz5YaF6YOo5Y+Y6YePXG5cdCAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG5cdCAqIEBwYXJhbXMgW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dIHZhbFxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXVxuXHQgKi9cblx0dmFyIHNldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuXHQgIHZhciBmID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBhcGx1cyA9IGdldEdsb2JhbFZhbHVlKEFQTFVTKTtcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgYXBsdXNba2V5XSA9IHZhbDtcblx0ICAgICAgZiA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgZiA9IGZhbHNlO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gZjtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuc2V0R29sZGxvZ1ZhbCA9IHNldEdvbGRsb2dWYWw7XG5cdFxuXHQvKipcblx0ICog6I635Y+WY2xpZW50SW5mbyjmtY/op4jlmajjgIHorr7lpIfnrYnkv6Hmga8pXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICogICB2ZXJzaW9uOiAyLFxuXHQgKiAgIHVhX2luZm86IHtcblx0ICogICAgIGI6IFwiY2hyb21lNThcIlxuXHQgKiAgICAgaXNtOiBcIm1hY1wiXG5cdCAqICAgICBteDogXCIzNjBlZVwiXG5cdCAqICAgICBvOiBcIm1hY1wiXG5cdCAqICAgICBwOiAxXG5cdCAqICAgICBzOiBcIjE5MjB4MTA4MFwiXG5cdCAqICAgICB3OiBcIndlYmtpdFwiXG5cdCAqICAgfVxuXHQgKiB9XG5cdCAqL1xuXHRleHBvcnRzLmdldENsaWVudEluZm8gPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2NsaWVudCcpIHx8IHt9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBBUExVUyA9ICdhcGx1cyc7XG5cdHZhciBHT0xETE9HID0gJ2dvbGRsb2cnO1xuXHR2YXIgQVBMVVNfUVVFVUUgPSBBUExVUyArICdfcXVldWUnO1xuXHR2YXIgR09MRExPR19RVUVVRSA9IEdPTERMT0cgKyAnX3F1ZXVlJztcblx0dmFyIE1XX0NIQU5HRSA9ICdtd19jaGFuZ2UnO1xuXHR2YXIgTUVUQV9JTkZPID0gJ01ldGFJbmZvJztcblx0dmFyIEFQUEVORF9NRVRBX0lORk8gPSAnYXBwZW5kJyArIE1FVEFfSU5GTztcblx0dmFyIFNFVF9NRVRBX0lORk8gPSAnc2V0JyArIE1FVEFfSU5GTztcblx0dmFyIEhUVFAgPSAnaHR0cCc7XG5cdHZhciBfcHVic3ViID0gJ19wdWJzdWInO1xuXHRcblx0dmFyIGRlZmF1bHRDb2RlID0gJ290aGVyJztcblx0dmFyIENMSyA9ICcyMTAxJztcblx0dmFyIEVYUCA9ICcyMjAxJztcblx0dmFyIElNUEVYUCA9ICcyMjAyJztcblx0dmFyIE9USEVSID0gJzE5OTk5Jztcblx0dmFyIEFQUF9TSE9XID0gJzEwMjMnO1xuXHR2YXIgQVBQX0hJREVfT1JfVU5MT0FEID0gJzEwMTAnOyBcblx0dmFyIFNFU1NJT05fSU5URVJWQUwgPSAzMDAwMDsgLy8gc2Vzc2lvbklk6L+H5pyf5pe26Ze0IDMw56eSXG5cdHZhciBTSEFSRV9DQUNIRV9JTlRFUlZBTCA9IDEwMDAgKiA2MCAqIDMwO1xuXHR2YXIgRUtWUyA9ICdla3ZzJztcblx0dmFyIEVWRU5UX01BWF9DT1VOVCA9IDEwMDAwOyAvLyDmnKzlnLDmnIDlpJrlrZjlgqjov5nkuYjlpJpla3bmlbDmja5cblx0dmFyIE1FTU9SWV9NQVhfQ09VTlQgPSAxOyAvLyDlhoXlrZjkuK3lrZjlgqjnmoTmnIDlpKfmlbDmja7mlbDph4/vvIzotoXov4fliJnnvJPlrZjliLDmnKzlnLBcblx0dmFyIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCA9IDMwMDA7IC8vIGVrdum7mOiupOWPkemAgemXtOmalOaXtumXtDogM+enklxuXHR2YXIgUEFHRV9TVEFSVCA9ICckJF9wYWdlX3N0YXJ0Jztcblx0dmFyIFBBR0VfRU5EID0gJyQkX3BhZ2VfZW5kJztcblx0dmFyIEFQUF9TVEFSVCA9ICckJF9hcHBfc3RhcnQnO1xuXHR2YXIgQVBQX0VORCA9ICckJF9hcHBfZW5kJztcblx0dmFyIFVTRVJfUFJPRklMRV9LRVkgPSAnYXBsdXNfdXNlcl9wcm9maWxlJztcblx0dmFyIElNUFJJTlQgPSAnaW1wcmludCc7XG5cdHZhciBJRF9UWVBFID0gJ2FwbHVzLWlkdHlwZSc7XG5cdHZhciBKU0JSSURHRV9PTkxZID0gJ2FwbHVzLWpzYnJpZGdlLW9ubHknO1xuXHR2YXIgUEFHRV9DT05GSUcgPSAnYXBsdXMtcGFnZS1jb25maWcnOyBcblx0dmFyIEFQTFVTX1NLSVBfQVBWX1JVTEVTID0gJ2FwbHVzLXNraXAtYXB2LXJ1bGVzJztcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgUEFHRV9FTlRFUjogJ1BBR0VfRU5URVInLFxuXHQgIENVUlJFTlRfUEFHRV9DT05GSUc6ICdDVVJSRU5UX1BBR0VfQ09ORklHJyxcblx0ICBfQU5PTllfSUQ6ICdfYW5vbnlfaWQnLFxuXHQgIF9VU0VSX0lEOiAnX3VzZXJfaWQnLFxuXHQgIERFRkFVTFRfQ09ERTogZGVmYXVsdENvZGUsXG5cdCAgT1RIRVI6IE9USEVSLFxuXHQgIEVWRU5UX01BUDoge1xuXHQgICAgJzIxMDEnOiAnY2xpY2snLFxuXHQgICAgJzIyMDEnOiAnZXhwb3N1cmUnLFxuXHQgICAgJzIyMDInOiAnZXhwb3N1cmUnLFxuXHQgICAgJzE5OTk5JzogZGVmYXVsdENvZGUsXG5cdCAgICAnMTAyMyc6ICdhcHBfc2hvdycsXG5cdCAgICAnMTAxMCc6ICdhcHBfaGlkZV9vcl91bmxvYWQnXG5cdCAgfSxcblx0ICBFVkVOVF9JRF9NQVA6IHtcblx0ICAgICdFWFAnOiBFWFAsXG5cdCAgICAnSU1QRVhQJzogSU1QRVhQLFxuXHQgICAgJ0NMSyc6IENMSyxcblx0ICAgICdPVEhFUic6IE9USEVSLFxuXHQgICAgJ1NIT1cnOiBBUFBfU0hPVyxcblx0ICAgICdIX09SX1UnOiBBUFBfSElERV9PUl9VTkxPQURcblx0ICB9LFxuXHQgIEFQTFVTOiBBUExVUyxcblx0ICBHT0xETE9HOiBHT0xETE9HLFxuXHQgIFVOU1VCU0NSSUJFOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcudW5zdWJzY3JpYmUnLFxuXHQgIFNVQlNDUklCRTogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnN1YnNjcmliZScsXG5cdCAgUFVCTElTSDogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnB1Ymxpc2gnLFxuXHQgIENBQ0hFX1BVQlM6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5jYWNoZVB1YnMnLFxuXHQgIEFQTFVTX1VOSVZFUlNBTDogQVBMVVMgKyAnX3VuaXZlcnNhbCcsXG5cdCAgQVBMVVNfUVVFVUU6IEFQTFVTX1FVRVVFLFxuXHQgIEdPTERMT0dfUVVFVUU6IEdPTERMT0dfUVVFVUUsXG5cdCAgQ09NUExFVEU6ICdjb21wbGV0ZScsXG5cdCAgUFZfQ09ERTogJzIwMDEnLFxuXHQgIEVYUF9DT0RFOiBFWFAsXG5cdCAgQ0xLX0NPREU6IENMSyxcblx0ICBPVEhFUl9DT0RFOiBPVEhFUixcblx0ICBDTEs6ICdDTEsnLFxuXHQgIEVYUDogJ0VYUCcsXG5cdCAgLy8gT1RIRVI6ICdPVEhFUicsXG5cdCAgU1BNX0NOVDogJ3NwbS1jbnQnLFxuXHQgIFNQTV9VUkw6ICdzcG0tdXJsJyxcblx0ICBTUE1fUFJFOiAnc3BtLXByZScsXG5cdCAgTVdfQ0hBTkdFX1BWOiBNV19DSEFOR0UgKyAnX3B2Jyxcblx0ICBNV19DSEFOR0VfSEpMSjogTVdfQ0hBTkdFICsgJ19oamxqJyxcblx0ICBIVFRQOiBIVFRQICsgJzonLFxuXHQgIEhUVFBTOiAnaHR0cHM6Jyxcblx0ICBBUFBFTkRfTUVUQV9JTkZPOiBBUFBFTkRfTUVUQV9JTkZPLFxuXHQgIFNFVF9NRVRBX0lORk86IFNFVF9NRVRBX0lORk8sXG5cdCAgQVBMVVNfQVBQRU5EX01FVEFfSU5GTzogQVBMVVMgKyAnLicgKyBBUFBFTkRfTUVUQV9JTkZPLFxuXHQgIEFQTFVTX1NFVF9NRVRBX0lORk86IEFQTFVTICsgJy4nICsgU0VUX01FVEFfSU5GTyxcblx0ICBQVklEOidwdmlkJyxcblx0ICBBUExVU19MT0dfUElQRTonYXBsdXMtbG9nLXBpcGUnLFxuXHQgIG9wZW5BUElzOiBbXG5cdCAgICAnc2VuZCcsICdlbnRlcicsICdzZW5kUFYnLCAncmVjb3JkJywgJ2NvbWJpbmVSZWNvcmQnLCAncmVjb3JkVWRhdGEnLCAncmVxdWVzdFZUQ29uZmlnJyxcblx0ICAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcblx0ICAgICd1cGRhdGVQYWdlUHJvcGVydGllcycsXG5cdCAgICAndXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcblx0ICAgICd1cGRhdGVQYWdlVXRwYXJhbScsXG5cdCAgICAndXBkYXRlTmV4dFBhZ2VVdHBhcmFtJyxcblx0ICAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLCAnc2tpcFBhZ2UnLFxuXHQgICAgJ3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzJywgJ2dldFBhZ2VTcG1VcmwnLCAnZ2V0UGFnZVNwbVByZScsXG5cdCAgICAnc2V0UGFnZU5hbWUnLCAnZ2V0RWxlbWVudFNQTSdcblx0ICBdLFxuXHQgIFNFU1NJT05fSU5URVJWQUw6IFNFU1NJT05fSU5URVJWQUwsXG5cdCAgU0VTU0lPTl9QQVVTRV9USU1FOiAnc2Vzc2lvbl9wYXVzZV90aW1lJyxcblx0ICBJTVBSSU5UOiAnaW1wcmludCcsXG5cdCAgQ1VSUkVOVF9TRVNTSU9OOiAnY3VycmVudF9zZXNzaW9uJyxcblx0ICBNQVhfRVZFTlRJRF9MRU5HVEg6IDEyOCxcblx0ICBNQVhfUFJPUEVSVFlfS0VZX0xFTkdUSDogMjU2LFxuXHQgIE1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UOiAxMDAsXG5cdCAgUkVRVUVTVFM6ICdyZXF1ZXN0cycsXG5cdCAgU0hBUkVTOiAnc2hhcmVzJyxcblx0ICBBUExVU19TU1JDOiAnX2FwbHVzX3NzcmMnLFxuXHQgIEVLVlM6IEVLVlMsXG5cdCAgRVZFTlRfTUFYX0NPVU5UOiBFVkVOVF9NQVhfQ09VTlQsXG5cdCAgTUVNT1JZX01BWF9DT1VOVDogTUVNT1JZX01BWF9DT1VOVCxcblx0ICBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUw6IEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCxcblx0ICBQQUdFX1NUQVJUOiBQQUdFX1NUQVJULFxuXHQgIFBBR0VfRU5EOiBQQUdFX0VORCxcblx0ICBBUFBfU1RBUlQ6IEFQUF9TVEFSVCxcblx0ICBBUFBfRU5EOiBBUFBfRU5ELFxuXHQgIFVTRVJfUFJPRklMRV9LRVk6IFVTRVJfUFJPRklMRV9LRVksXG5cdCAgU0hBUkVfQ0FDSEVfSU5URVJWQUw6IFNIQVJFX0NBQ0hFX0lOVEVSVkFMLFxuXHQgIElNUFJJTlQ6IElNUFJJTlQsXG5cdCAgSURfVFlQRTogSURfVFlQRSxcblx0ICBKU0JSSURHRV9PTkxZOiBKU0JSSURHRV9PTkxZLFxuXHQgIFBBR0VfQ09ORklHOiBQQUdFX0NPTkZJRyxcblx0ICBBUExVU19TS0lQX0FQVl9SVUxFUzogQVBMVVNfU0tJUF9BUFZfUlVMRVNcblx0fTtcblx0XG5cdC8vIHZhciBvcGVuQVBJcyA9IFtcblx0Ly8gICAnc2VuZCcsICdlbnRlcicsICdzZW5kUFYnLCAncmVjb3JkJyxcblx0Ly8gICAnc2V0UGFnZVNQTScsICdzZXRNZXRhSW5mbycsICdhcHBlbmRNZXRhSW5mbycsXG5cdC8vICAgVVBEQVRFICsgJ1BhZ2VQcm9wZXJ0aWVzJyxcblx0Ly8gICBVUERBVEUgKyAnTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcblx0Ly8gICBVUERBVEUgKyAnUGFnZVV0cGFyYW0nLFxuXHQvLyAgIFVQREFURSArICdOZXh0UGFnZVV0cGFyYW0nLFxuXHQvLyAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLFxuXHQvLyAgICdza2lwUGFnZSdcblx0Ly8gXTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgXCJtZXRhSW5mb1wiOiB7XG5cdCAgICBcImFwbHVzLXJob3N0LXZcIjogXCJcIixcblx0ICAgIFwiYXBsdXMtcmhvc3QtZ1wiOiBcIlwiLFxuXHQgICAgXCJhcGx1cy1tbXN0YXQtdGltZW91dFwiOiBcIjEwMDAwXCIsXG5cdCAgICBcInNka0lkXCI6IFwiYXBsdXNfbWluaV9jbG91ZF91bVwiXG5cdCAgfSxcblx0ICBcImdsb2JhbENvbmZpZ1wiOiB7XG5cdCAgICBcImlzQWxpXCI6IGZhbHNlLFxuXHQgICAgXCJpc0RlY29kZVVybFwiOiB0cnVlLFxuXHQgICAgXCJBUExVU19RVUVVRVwiOiBcImFwbHVzX3F1ZXVlXCIsXG5cdCAgICBcIkVUQUdfU1RPUkFHRV9LRVlcIjogXCJfX0VUQUdfX0NOQV9fSURfX1wiLFxuXHQgICAgXCJzY3JpcHRfbmFtZVwiOiBcImFwbHVzX21pbmkuanNcIixcblx0ICAgIFwiYXBsdXMtZ2xvYmFsZGF0YVwiOiB7fSxcblx0ICAgIFwibHZlclwiOiBcIjEuNy4xMFwiXG5cdCAgfSxcblx0ICBcInBsdWdpbnNcIjogW1xuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJpbmplY3RfYXBwX3VtXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJpbmplY3RfcGFnZV91bVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygzMSlcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcIm9wZW5fYXBpXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfY2xpZW50XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwicHVic3ViXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWV0YV9pbmplY3RcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMzgpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19hY1wiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg0MiksXG5cdCAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgXCJpbmplY3RfcGFnZV91bVwiXG5cdCAgICAgIF1cblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcblx0ICAgICAgXVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWluaV9zcG1cIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19taW5pX3JlcG9ydF91bVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2xvZ19pbmplY3RcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNjApLFxuXHQgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgIFwiYXBsdXNfbWV0YV9pbmplY3RcIlxuXHQgICAgICBdLFxuXHQgICAgICBcImNvbmZpZ1wiOiB7XG5cdCAgICAgICAgXCJwbHVnaW5zXCI6IHtcblx0ICAgICAgICAgIFwicHZcIjogW1xuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hlbl90b19zZW5kcHZcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2NiksXG5cdCAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgICAgICAgICAgXCJhcGx1c1dhaXRpbmdcIjogXCJcIlxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2Nylcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZFwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KSxcblx0ICAgICAgICAgICAgICBcImNvbmZpZ1wiOiB7XG5cdCAgICAgICAgICAgICAgICBcImxvZ2RhdGFUb1V0XCI6IHt9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWluaWFwcF9kYXRhXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNzIpXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRwdl91c2VyZGF0YVwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKSxcblx0ICAgICAgICAgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRcIlxuXHQgICAgICAgICAgICAgIF1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcImNhbl90b19zZW5kcHZcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3NClcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgXSxcblx0ICAgICAgICAgIFwiaGpsalwiOiBbXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVyZV90b19zZW5kXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNjcpXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2OCksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJtaW5pYXBwX2RhdGFcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3Milcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9faGpsal91c2VyZGF0YVwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICBdXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19hcGlcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNzYpLFxuXHQgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgIFwiYXBsdXNfbG9nX2luamVjdFwiLFxuXHQgICAgICAgIFwiYXBsdXNfbWV0YV9pbmplY3RcIlxuXHQgICAgICBdXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJtZXRhX3F1ZXVlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKSxcblx0ICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgIFwiaXNPcGVuQXBpXCI6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2MSlcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX3F1ZXVlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KSxcblx0ICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgIFwiaXNPcGVuQXBpXCI6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXV0b190cmFja2VyX3VtXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcblx0ICAgICAgXVxuXHQgICAgfVxuXHQgIF1cblx0fTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfYXBwX3VtX25ldy5qc1xuXHQgKiDmlrDniYjoh6rliqjph4fpm4blsI/nqIvluo/kv6Hmga/nmoTmj5Lku7YgLSBhcHDms6jlhaVcblx0ICpcblx0ICog6YCa6L+H6YeN5YaZd3jnmoRhcGnmnaXmqKHmi5/nlJ/lkb3lkajmnJ/vvIzku6XmraTnu5Xov4fkuInmlrnmoYbmnrblr7nnlJ/lkb3lkajmnJ/nmoTph43lhpnmnLrliLZcblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDogoblj4EgPHNpc2FuLnFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdFxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBzZXNzaW9uTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgZXZlbnRNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdHZhciByZXF1ZXN0UXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciB1bVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIEFQUF9MQVVOQ0hfVFlQRSA9IDA7XG5cdFxuXHRmdW5jdGlvbiBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBzY2VuZSkge1xuXHQgIHZhciBnbG9iYWxfYXJncyA9IHt9O1xuXHQgIGlmIChzY2VuZSkge1xuXHQgICAgZ2xvYmFsX2FyZ3Muc2NlbmUgPSBzY2VuZTtcblx0ICB9XG5cdCAgaWYgKHF1ZXJ5ICYmIHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkKSB7XG5cdCAgICBnbG9iYWxfYXJncy5kZWJ1Z0lkID0gcXVlcnkubWluaWFwcERlYnVnSWQ7XG5cdCAgfVxuXHQgIGZvciAodmFyIGsgaW4gcXVlcnkpIHtcblx0ICAgIGlmIChrID09PSAnJCRfc2hhcmVfdWlkJyB8fCBrLmluZGV4T2YoJyQkX3V0bV8nKSA9PT0gMCkge1xuXHQgICAgICBnbG9iYWxfYXJnc1trXSA9IHF1ZXJ5W2tdO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZ2xvYmFsX2FyZ3M7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNlc3Npb25TdGFydChvcHRpb25zKSB7XG5cdCAgY2FjaGUoKS5sb2FkKGZ1bmN0aW9uKCl7XG5cdCAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgIG1zZzogJ2FwbHVzLS0tLS1jYWNoZSBpbml0IHN1Y2Nlc3MnXG5cdCAgICB9KTtcblx0ICB9KTtcblx0XG5cdCAgdmFyIG5ld09wdGlvbnMgPSB7fTtcblx0ICB2YXIgZGVlcENsb25lID0gY2xvbmVEZWVwKG9wdGlvbnMpO1xuXHQgIGZvciAodmFyIGkgaW4gZGVlcENsb25lKSB7XG5cdCAgICBpZiAodHlwZW9mIGRlZXBDbG9uZVtpXSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgbmV3T3B0aW9ucyA9IHV0aWxEYXNoLmFzc2lnbihkZWVwQ2xvbmVbaV0sIG5ld09wdGlvbnMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGRlZXBDbG9uZVtpXSkge1xuXHQgICAgICAgIG5ld09wdGlvbnNbaV0gPSBkZWVwQ2xvbmVbaV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICByZXF1ZXN0UXVldWUoKS5sb2FkKCk7XG5cdCAgdmFyIGlzTmV3U2Vzc2lvbiA9IHNlc3Npb25NYW5hZ2VyKCkucmVzdW1lKG5ld09wdGlvbnMpO1xuXHQgIHZhciBzZXNzaW9uSWQgPSBzZXNzaW9uTWFuYWdlcigpLmdldEN1cnJlbnRTZXNzaW9uSWQoKTtcblx0ICBldmVudE1hbmFnZXIoKS5zZXRTZXNzaW9uSWQoc2Vzc2lvbklkKTtcblx0ICBpZiAoaXNOZXdTZXNzaW9uKSB7XG5cdCAgICByZXF1ZXN0UXVldWUoKS5hZGQodW1VdGlscy5EYXRhVHlwZS5IQUxGX1NFU1NJT04sIHt9LCBmdW5jdGlvbigpIHtcblx0ICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgIG1zZzogJy0tLS0tYmVmb3JlIHNlbmQgc2Vzc2lvbidcblx0ICAgICAgfSk7XG5cdCAgICAgIHJlcXVlc3RRdWV1ZSgpLnNlbmQoKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNlc3Npb25FbmQoKSB7XG5cdCAgc2Vzc2lvbk1hbmFnZXIoKS5wYXVzZSgpO1xuXHQgIHJlcXVlc3RRdWV1ZSgpLnNlbmQodW1VdGlscy5EYXRhVHlwZS5DTE9TRV9TRVNTSU9OLCB7fSwgZnVuY3Rpb24oKXtcblx0ICAgIHJlcXVlc3RRdWV1ZSgpLnNhdmUoKTtcblx0ICAgIGNhY2hlKCkuc2F2ZSgpO1xuXHQgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICBtc2c6IFwiLS0tLS1hZnRlciBzZW5kIHNlc3Npb25cIlxuXHQgICAgfSk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpbmplY3RBcHAoKSB7XG5cdFxuXHQgIHZhciBhcHBCYWsgPSBBcHA7XG5cdCAgdmFyIGFscmVhZHlTdGFydGVkID0gZmFsc2U7XG5cdCAgdmFyIGxhbnVjaGVkID0gZmFsc2U7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgY29udGV4dCA9IG1pbmkuZ2V0Q29udGV4dCgpOyAgIC8vIOW5s+WPsOS4iuS4i+aWh++8miB3eOOAgWRk44CBbXnjgIF0dOOAgXN3YW5cblx0ICB2YXIgZm4gPSB7XG5cdCAgICBvbkxhdW5jaDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0ICAgICAgbWluaS5pbml0SXNUQigpO1xuXHQgICAgICB2YXIgcXVlcnkgPSBvcHRpb25zID8gb3B0aW9ucy5xdWVyeSA6IHt9O1xuXHQgICAgICB2YXIgcmVmZXJyZXJJbmZvID0gb3B0aW9ucyA/IG9wdGlvbnMucmVmZXJyZXJJbmZvIDoge307XG5cdCAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy53ZWl4aW4ucXEuY29tL21pbmlwcm9ncmFtL2Rldi9hcGkvYmFzZS9hcHAvbGlmZS1jeWNsZS93eC5nZXRMYXVuY2hPcHRpb25zU3luYy5odG1sIyVFOCVCRiU5NCVFNSU5QiU5RSVFNiU5QyU4OSVFNiU5NSU4OCUyMHJlZmVycmVySW5mbyUyMCVFNyU5QSU4NCVFNSU5QyVCQSVFNiU5OSVBRlxuXHQgICAgICAvKipcblx0ICAgICAgICogQHBhcmFtcyB7T2JqZWN0fSByZWZlcnJlckluZm8ge1xuXHQgICAgICAgKiAgIGFwcElkICBzdHJpbmcgIOadpea6kOWwj+eoi+W6j+OAgeWFrOS8l+WPt+aIliBBcHAg55qEIGFwcElkXG5cdCAgICAgICAqICAgZXh0cmFEYXRhICBPYmplY3QgIOadpea6kOWwj+eoi+W6j+S8oOi/h+adpeeahOaVsOaNru+8jHNjZW5lPTEwMzfmiJYxMDM45pe25pSv5oyBXG5cdCAgICAgICAqIH1cblx0ICAgICAgICovXG5cdFxuXHQgICAgICBBUFBfTEFVTkNIX1RZUEUgKz0gMTtcblx0XG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLXNlc3Npb24tYXJncycsIHV0aWxEYXNoLmFzc2lnbihyZWZlcnJlckluZm8sIHtcblx0ICAgICAgICAgIHNjZW5lOiBvcHRpb25zLnNjZW5lIHx8ICcnXG5cdCAgICAgICAgfSldXG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAocXVlcnkpIHtcblx0ICAgICAgICB2YXIgcXVlcnlEYXRhID0ge307IC8vIGNsb25lRGVlcChxdWVyeSk7XG5cdCAgICAgICAgaWYgKHF1ZXJ5LnNwbSkge1xuXHQgICAgICAgICAgY3R4LmFwbHVzLnNwbV9vcmlnbiA9IHF1ZXJ5LnNwbTtcblx0ICAgICAgICAgIC8vIGRlbGV0ZSBxdWVyeURhdGEuc3BtO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAob3B0aW9ucy5zY2VuZSkge1xuXHQgICAgICAgICAgcXVlcnlEYXRhLnNjZW5lID0gb3B0aW9ucy5zY2VuZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkKSB7XG5cdCAgICAgICAgICB2YXIgZGVidWdJZCA9IHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkLnRyaW0oKTtcblx0ICAgICAgICAgIHZhciBkZWJ1Z0luZm9zID0gZGVidWdJZC5zcGxpdCgnXycpO1xuXHQgICAgICAgICAgcXVlcnlEYXRhID0gdXRpbERhc2guYXNzaWduKHF1ZXJ5RGF0YSwge1xuXHQgICAgICAgICAgICBhcGx1c193b3JrX25vOiBkZWJ1Z0luZm9zLmxlbmd0aCA+IDIgPyBkZWJ1Z0luZm9zWzFdIDogZGVidWdJZCxcblx0ICAgICAgICAgICAgYXBsdXNfdHJhY2tfZGVidWdfaWQ6IGRlYnVnSWQsXG5cdCAgICAgICAgICAgIGFwbHVzX2ZsYWc6ICdhcGx1c190ZXN0J1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAvLyBkZWxldGUgcXVlcnlEYXRhLm1pbmlhcHBEZWJ1Z0lkO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZXhkYXRhJywgcXVlcnlEYXRhXVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1jcHZkYXRhJywgcXVlcnlEYXRhXVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG5cdCAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWdsb2JhbC1hcmdzJywgZ2V0R2xvYmFsQXJncyhxdWVyeSwgb3B0aW9ucy5zY2VuZSldXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBvblNob3c6IGZ1bmN0aW9uIChvcHRzKSB7XG5cdFxuXHQgICAgICBBUFBfTEFVTkNIX1RZUEUgKz0gMTtcblx0ICAgICAgLy8gMjAyMS0wMS0xNEDkuZ3plKHpnIDmsYJcblx0ICAgICAgdmFyIHF1ZXJ5ID0gb3B0cyA/IG9wdHMucXVlcnkgOiB7fTtcblx0ICAgICAgdmFyIHNjZW5lID0gb3B0cyA/IG9wdHMuc2NlbmUgOiAnJztcblx0ICAgICAgdmFyIHN0YXJ0X3R5cGU7IC8v5bCP56iL5bqP5ZCv5Yqo57G75Z6LIFxuXHQgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLCAgLy8g5q2k5aSE6ZyA6KaB55Soc2V0TWV0YUluZm/lgZropobnm5blvI/mm7TmlrDvvIzlm6DkuLrlvq7kv6HlsI/nqIvluo/kvJrmnInnvJPlrZhcblx0ICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZ2xvYmFsLWFyZ3MnLCBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBzY2VuZSldXG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAoc2NlbmUpIHtcblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZXhkYXRhJywge1xuXHQgICAgICAgICAgICBzY2VuZTogc2NlbmVcblx0ICAgICAgICAgIH1dXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCB7XG5cdCAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtc2Vzc2lvbi1hcmdzJywge1xuXHQgICAgICAgICAgICBzY2VuZTogc2NlbmVcblx0ICAgICAgICAgIH1dXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKEFQUF9MQVVOQ0hfVFlQRSA9PT0gMikge1xuXHQgICAgICAgIHN0YXJ0X3R5cGUgPSAxO1xuXHQgICAgICB9IGVsc2UgaWYgKEFQUF9MQVVOQ0hfVFlQRSA9PT0gMSkge1xuXHQgICAgICAgIHN0YXJ0X3R5cGUgPSAwO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgIG1zZzogJ0FQUF9MQVVOQ0hfVFlQRSBzaG91bGQgbm90IHJlYWNoIHRoaXMsIHZhbHVlID0gJyArICBBUFBfTEFVTkNIX1RZUEVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIWFscmVhZHlTdGFydGVkKSB7XG5cdCAgICAgICAgICBhbHJlYWR5U3RhcnRlZCA9IHRydWU7XG5cdCAgICAgICAgICBzZXNzaW9uU3RhcnQob3B0cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZ2xvYmFsQ29uZmlnID0gY3R4LmFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcblx0ICAgICAgICBpZiAoIWdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgICAgdmFyIHBhZ2VDb2RlID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcblx0ICAgICAgICAgIGN0eC5vbkFwcFNob3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQUF9TVEFSVCwgJ1NIT1cnLCB7XG5cdCAgICAgICAgICAgICAgLy8gc2NlbmU6IHNjZW5lLFxuXHQgICAgICAgICAgICAgIHN0YXJ0X3R5cGU6IHN0YXJ0X3R5cGUsXG5cdCAgICAgICAgICAgICAgcGFnZV9uYW1lOiBwYWdlQ29kZSB8fCBvcHRzLnBhdGggfHwgJy0nLFxuXHQgICAgICAgICAgICAgIHVybDogb3B0cy5wYXRoIHx8ICctJ1xuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBvbkhpZGU6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdXRpbHMub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGN0eC5hcGx1cy5nbG9iYWxDb25maWcgfHwge307XG5cdCAgICAgICAgdmFyIHBhZ2VDb2RlID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcblx0ICAgICAgICBpZiAoIWdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgICAgdmFyIHVybCA9IFBhZ2VNYW5hZ2VyLmdldEN1cnJlbnRQYWdlUGF0aCgpO1xuXHQgICAgICAgICAgdmFyIGR1cmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBjdHgub25BcHBTaG93VGltZTtcblx0ICAgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcblx0ICAgICAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBQX0VORCwgJ0hfT1JfVScsIHtcblx0ICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG5cdCAgICAgICAgICAgICAgZW5kX3R5cGU6IDAsXG5cdCAgICAgICAgICAgICAgcGFnZV9uYW1lOiBwYWdlQ29kZSB8fCB1cmwgfHwgJy0nLFxuXHQgICAgICAgICAgICAgIHVybDogdXJsIHx8ICctJyxcblx0ICAgICAgICAgICAgICBzdGFydF90aW1lOiBjdHgub25BcHBTaG93VGltZVxuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfSk7ICAgICAgICAgICAgXG5cdCAgICAgICAgfVxuXHQgICAgICAgIGFscmVhZHlTdGFydGVkID0gZmFsc2U7XG5cdCAgICAgICAgc2Vzc2lvbkVuZCgpO1xuXHQgICAgICB9KTtcblx0ICAgICAgQVBQX0xBVU5DSF9UWVBFID0gMDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBBcHAgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICAgIGUuYXBsdXMgPSBjdHgsIC8vIOazqOWGjOWFqOWxgOWPmOmHj1xuXHQgICAgYXBwQmFrKGUpO1xuXHQgIH07XG5cdFxuXHQgIGNvbnRleHQub25BcHBTaG93KGZ1bmN0aW9uIChlKSB7XG5cdCAgICAvLyDpgJrov4d3eC5nZXRMYXVuY2hPcHRpb25zU3luY+aWueazle+8jOWunueOsOWvuW9uTGFudWNo55qE55uR5ZCsXG5cdCAgICBpZighbGFudWNoZWQpIHtcblx0ICAgICAgLy8g55m+5bqm5LiN5pSv5oyBZ2V0TGF1bmNoT3B0aW9uc1N5bmPvvIznlKhvblNob3fnmoRvcHRpb25z5Luj5pu/XG5cdCAgICAgIHZhciBvcHRzID0ge307XG5cdCAgICAgIGlmKGlzRnVuY3Rpb24oY29udGV4dC5nZXRMYXVuY2hPcHRpb25zU3luYykpIHtcblx0ICAgICAgICBvcHRzID0gY29udGV4dC5nZXRMYXVuY2hPcHRpb25zU3luYygpIHx8IHt9O1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG9wdHMgPSBlO1xuXHQgICAgICB9XG5cdCAgICAgIGZuLm9uTGF1bmNoKG9wdHMpO1xuXHQgICAgICBsYW51Y2hlZCA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgLy8gb25TaG93XG5cdCAgICBmbi5vblNob3coZSk7XG5cdCAgfSksXG5cdFxuXHQgIGNvbnRleHQub25BcHBIaWRlKGZ1bmN0aW9uICgpIHtcblx0ICAgIC8vIG9uSGlkZVxuXHQgICAgZm4ub25IaWRlKCk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIGNvbnNvbGUubG9nKCdteS5nZXRQYXJlbnRBcHBJZFN5bmMoKTsgPT09ICcsIG15LmdldFBhcmVudEFwcElkU3luYygpKTtcblx0ICAgICAgaWYgKFsnb2JqZWN0JywgJ2Z1bmN0aW9uJ10uaW5kZXhPZih0eXBlb2YgQXBwKSA+IC0xKSB7XG5cdCAgICAgICAgaW5qZWN0QXBwKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICByZXNldEZuOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogJycsXG5cdCAgICAgIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSA/IGFyZ3VtZW50c1syXSA6IGZ1bmN0aW9uICgpIHsgfSxcblx0ICAgICAgaSA9IGVbdF07XG5cdCAgICBlW3RdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgcnMgPSBpICYmIGkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gYXBw5pys6Lqr55qEZnVuY3Rpb25cblx0ICAgICAgaWYgKHJzKSB7XG5cdCAgICAgICAgcmV0dXJuIG4uY2FsbCh0aGlzLCBycyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gdGFybzF444CBdGFybzJ4IOW/hemhu+WKoOS4qumineWklueahOivreWPpW4uYXBwbHnmiY3og73miafooYzvvIzmr5TlpoJ0cnljYXRjaO+8jOWPmOmHj+WjsOaYjuetie+8jOatpOWkhOWKoOS6hnJldHVyblxuXHQgICAgICAgIHJldHVybiBuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcmV3cml0ZUZuOiBmdW5jdGlvbihvYmosIG5hbWUsIG5ld0ZuKSB7XG5cdCAgICB2YXIgb2xkRm4gPSBvYmpbbmFtZV07XG5cdCAgICBvYmpbbmFtZV0gPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBuZXdGbi5jYWxsKHRoaXMsIGUpO1xuXHQgICAgICBvbGRGbiAmJiBvbGRGbi5jYWxsKHRoaXMsIGUpO1xuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBvbkFwbHVzUmVhZHk6IGZ1bmN0aW9uIChhcGx1c19xdWV1ZSwgU1VCU0NSSUJFLCBjYWxsYmFjaykge1xuXHQgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogU1VCU0NSSUJFLFxuXHQgICAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcblx0ICAgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1dXG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIOWFi+mahuS4gOS4qm9iamVjdFxuXHQgKi9cblx0ZnVuY3Rpb24gY2xvbmVEZWVwIChvYmopIHtcblx0ICB2YXIgc3RyO1xuXHQgIHZhciBuZXdvYmogPSBBcnJheS5pc0FycmF5KG9iaikgPyBbXSA6IHt9OyAvL0ZpeCBvYmouY29udHJ1Y3RvciB0eXBlRXJyb3IgY29uc3RydWN0b3IgdW5kZWZpbmVkXG5cdCAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfSBlbHNlIGlmIChKU09OICYmIEpTT04ucGFyc2UpIHtcblx0ICAgIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7IC8v57O75YiX5YyW5a+56LGhXG5cdCAgICBuZXdvYmogPSBKU09OLnBhcnNlKHN0cik7IC8v6L+Y5Y6fXG5cdCAgfSBlbHNlIHtcblx0ICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG5cdCAgICAgIG5ld29ialtpXSA9IHR5cGVvZiBvYmpbaV0gPT09ICdvYmplY3QnID8gY2xvbmVEZWVwKG9ialtpXSkgOiBvYmpbaV07XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBuZXdvYmo7XG5cdH1cblx0bW9kdWxlLmV4cG9ydHMgPSBjbG9uZURlZXA7XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5bCP56iL5bqP5bel5YW3XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnOyBcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljLmpzJyk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHRleHBvcnRzLmdldEN1cnJlbnRQYWdlID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuXHQgIHJldHVybiBwYWdlc1twYWdlcy5sZW5ndGggLSAxXSB8fCB7fTtcblx0fTtcblx0XG5cdHZhciBfaXNUYjtcblx0Ly8g5Y2V6aG15rWL6K+V6ZyA6KaBXG5cdGV4cG9ydHMucmVzZXRJc1RCID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgX2lzVGIgPSB2YWx1ZTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluaXRJc1RCICgpIHtcblx0ICBpZiAodHlwZW9mIF9pc1RiID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiBfaXNUYjtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIFVBID0gbmF2aWdhdG9yID8gKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnN3dXNlckFnZW50KSA6ICcnO1xuXHQgICAgICByZXN1bHQgPSAhIS9BbGlBcHAvaS50ZXN0KFVBKTtcblx0ICAgICAgaWYgKC9BbGlBcHBcXChBUC9pLnRlc3QoVUEpIHx8IC9BbGlBcHBcXChEaW5nVGFsay9pLnRlc3QoVUEpIHx8IC9BbGlBcHBcXChBTUFQL2kudGVzdChVQSkpIHtcblx0ICAgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoL0FsaUFwcFxcKEtCL2kudGVzdChVQSkpIHtcblx0ICAgICAgICByZXN1bHQgPSAhIS9NaXN0Ly50ZXN0KFVBKTtcblx0ICAgICAgfVxuXHQgICAgICAvL0lERS3mt5jlrp0t5ZWG5a625bqU55So5LiL5pyf5pyb6L+U5ZuedHJ1ZVxuXHQgICAgICBpZigvQWxpcGF5SURFIFRhb2Jhby8udGVzdChVQSkpe1xuXHQgICAgICAgIHJlc3VsdCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGN0eCA9IGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcblx0ICAgICAgaWYgKHR5cGVvZiBjdHguY2FuSVVzZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHJlc3VsdCA9ICEhY3R4LmNhbklVc2UoJ2NhbGxVc2VyVHJhY2snKTtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIF9pc1RiID0gcmVzdWx0O1xuXHQgICAgcmV0dXJuIHJlc3VsdDsgIFxuXHQgIH1cblx0fVxuXHRleHBvcnRzLmluaXRJc1RCID0gaW5pdElzVEI7XG5cdFxuXHRmdW5jdGlvbiBpc1RCKCkge1xuXHQgIGlmICh0eXBlb2YgX2lzVGIgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuICEhX2lzVGI7ICBcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGluaXRJc1RCKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgZ2V0UGxhdGZvcm1UeXBlID0gZnVuY3Rpb24gKCkge1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBjdHg6IGRkLFxuXHQgICAgICBwbGF0VHlwZTogJ2RkJyxcblx0ICAgICAgc2RrVHlwZTogJ2RkbXAnLFxuXHQgICAgICBsb2dEb21haW46ICcvZGRtX2xvZ3MnXG5cdCAgICB9O1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgY3R4OiBteSxcblx0ICAgICAgICBwbGF0VHlwZTogbXkgJiYgbXkudGIgPyAndGFvYmFvJyA6ICdteScsXG5cdCAgICAgICAgc2RrVHlwZTogbXkgJiYgbXkudGIgPyAndGFvYmFvbXAnIDogJ215bXAnLFxuXHQgICAgICAgIGxvZ0RvbWFpbjogJy9hbGlwYXltX2xvZ3MnXG5cdCAgICAgIH07XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIGN0eDogdHQsXG5cdCAgICAgICAgICBwbGF0VHlwZTogJ3R0Jyxcblx0ICAgICAgICAgIHNka1R5cGU6ICd0dG1wJyxcblx0ICAgICAgICAgIGxvZ0RvbWFpbjogJy9ieXRlZGFuY2VtX2xvZ3MnXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBjdHg6IHN3YW4sXG5cdCAgICAgICAgICAgIHBsYXRUeXBlOiAnYmQnLFxuXHQgICAgICAgICAgICBzZGtUeXBlOiAnYmRtcCcsXG5cdCAgICAgICAgICAgIGxvZ0RvbWFpbjogJy9iYWlkdW1fbG9ncydcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICBjdHg6IHd4LFxuXHQgICAgICAgICAgICAgIHBsYXRUeXBlOiAnd3gnLFxuXHQgICAgICAgICAgICAgIHNka1R5cGU6ICd3eG1wJyxcblx0ICAgICAgICAgICAgICBsb2dEb21haW46ICcvd3htX2xvZ3MnXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgY3R4OiB7fSxcblx0ICAgICAgICAgICAgICBwbGF0VHlwZTogJ1VOS05PVycsXG5cdCAgICAgICAgICAgICAgc2RrVHlwZTogJ1VOS05PVydcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuaXNUQiA9IGlzVEI7XG5cdGV4cG9ydHMuZ2V0UGxhdGZvcm1UeXBlID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5wbGF0VHlwZTtcblx0fTtcblx0ZXhwb3J0cy5nZXRTZGtUeXBlID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5zZGtUeXBlO1xuXHR9O1xuXHRleHBvcnRzLmdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcblx0fTtcblx0ZXhwb3J0cy5nZXRMb2dEb21haW4gPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkubG9nRG9tYWluO1xuXHR9O1xuXHRcblx0XG5cdHZhciBIVFRQX1JFUVVFU1QgPSAnaHR0cFJlcXVlc3QnO1xuXHR2YXIgUkVRVUVTVCA9ICdyZXF1ZXN0Jztcblx0dmFyIEZOID0gZnVuY3Rpb24gKCkge307XG5cdFxuXHQvKipcblx0ICog5Y+R6YCBR0VU6K+35rGCXG5cdCAqIEBwYXJhbXMge1N0cmluZ30gdXJsXG5cdCAqIEBwYXJhbXMge1N0cmluZ30gb3B0cyB7XG5cdCAqICAgdGltZW91dDogNTAwMFxuXHQgKiB9XG5cdCAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjayB7XG5cdCAqICAgdGltZW91dDogNTAwMFxuXHQgKiB9XG5cdCAqL1xuXHRleHBvcnRzLnJlcXVlc3QgPSBmdW5jdGlvbiAodXJsLCBvcHRzLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuXHQgIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG5cdCAgaWYgKCFvcHRzKSB7XG5cdCAgICBvcHRzID0ge307XG5cdCAgfVxuXHQgIGlmICghaXNGdW5jdGlvbihmYWlsdXJlQ2FsbGJhY2spKSB7XG5cdCAgICBmYWlsdXJlQ2FsbGJhY2sgPSBGTjtcblx0ICB9XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaykpIHtcblx0ICAgIHN1Y2Nlc3NDYWxsYmFjayA9IEZOO1xuXHQgIH1cblx0ICB2YXIgbWV0aG9kTmFtZSA9IG9wdHMucmVxdWVzdE1ldGhvZE5hbWUgfHwgUkVRVUVTVDtcblx0ICB2YXIgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuXHRcblx0ICBpZiAoIWlzRnVuY3Rpb24ocmVxKSkge1xuXHQgICAgaWYgKG1ldGhvZE5hbWUgIT09IFJFUVVFU1QpIHtcblx0ICAgICAgbWV0aG9kTmFtZSA9IFJFUVVFU1Q7XG5cdCAgICB9IGVsc2UgaWYgKG1ldGhvZE5hbWUgIT09IEhUVFBfUkVRVUVTVCkge1xuXHQgICAgICBtZXRob2ROYW1lID0gSFRUUF9SRVFVRVNUO1xuXHQgICAgfVxuXHQgICAgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuXHQgIH1cblx0ICB2YXIgZGF0YVR5cGUgPSBvcHRzLmRhdGFUeXBlIHx8ICdqc29uJztcblx0ICB2YXIgdGltZW91dCA9IG9wdHMudGltZW91dCB8fCA1MDAwO1xuXHQgIHZhciBtZXRob2QgPSBvcHRzLm1ldGhvZCB8fCAnR0VUJztcblx0XG5cdCAgLy8g5aaC5p6cdXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0XG5cdCAgdXJsID0gdXRpbC5jYW4yaHR0cHModXJsKTtcblx0ICAvLyBpZiAodXJsLmluZGV4T2YoJy8vJykgPT09IDApIHtcblx0ICAvLyAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuXHQgIC8vICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG5cdCAgLy8gICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAvLyAgIH1cblx0ICAvLyAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuXHQgIC8vIH1cblx0ICB2YXIgbXNnO1xuXHQgIGlmIChpc0Z1bmN0aW9uKHJlcSkpIHtcblx0ICAgIHZhciByZXFPcHRpb25zID0ge1xuXHQgICAgICB1cmw6IHVybCxcblx0ICAgICAgbWV0aG9kOiBtZXRob2QsXG5cdCAgICAgIGRhdGFUeXBlOiBkYXRhVHlwZSxcblx0ICAgICAgdGltZW91dDogdGltZW91dCxcblx0ICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgIC8vIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCdyZXF1ZXN0ICcgKyB1cmwgKyAnIHN1Y2Nlc3MsIHRoZSBtc2cgaXMgJywgcmVzKTtcblx0ICAgICAgICBzdWNjZXNzQ2FsbGJhY2socmVzKTtcblx0ICAgICAgfSxcblx0ICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCdyZXF1ZXN0ICcgKyB1cmwgKyAnIGZhaWx1cmUsIHRoZSBtc2cgaXMgJywgcmVzKTtcblx0ICAgICAgICBmYWlsdXJlQ2FsbGJhY2socmVzKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIGlmICh0eXBlb2Ygb3B0cy5kYXRhID09PSAnb2JqZWN0JyAmJiBtZXRob2QgPT09ICdQT1NUJykge1xuXHQgICAgICByZXFPcHRpb25zLmRhdGEgPSBvcHRzLmRhdGE7XG5cdCAgICAgIHJlcU9wdGlvbnMudXJsID0gcmVxT3B0aW9ucy51cmwuc3BsaXQoJz8nKVswXTtcblx0ICAgIH1cblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIF9leHRJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJlcXVlc3QtZXh0aW5mbycpO1xuXHQgICAgaWYgKHR5cGVvZiBfZXh0SW5mbyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmVxT3B0aW9ucy5fZXh0SW5mbyA9IF9leHRJbmZvO1xuXHQgICAgfVxuXHQgICAgcmVxKHJlcU9wdGlvbnMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBjb25zb2xlICYmIGNvbnNvbGUud2FybignY2FuIG5vdCBmaW5kIFwiJyArIG1ldGhvZE5hbWUgKyAnXCIhJyk7XG5cdCAgICBmYWlsdXJlQ2FsbGJhY2sobXNnKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcblx0ICByZXR1cm4gdHlwZW9mIG8gPT09ICdmdW5jdGlvbic7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOagh+WHhuW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCcuL3V0aWxBcnJheScpO1xuXHQvLyB2YXIgZm9ybWF0ID0gcmVxdWlyZSgnLi9mb3JtYXQnKTtcblx0XG5cdHZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5cdGV4cG9ydHMubWtQbGFpbktleSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gc19wbGFpbl9vYmogKyBNYXRoLnJhbmRvbSgpO1xuXHR9O1xuXHRleHBvcnRzLnNfcGxhaW5fb2JqID0gc19wbGFpbl9vYmo7XG5cdFxuXHQvLyAyMDE2LTA4LTI0IOeQrOWtkOmcgOaxgu+8jGV4cGFyYW1z5Y2V54us5aSE55CG77yMd2luZHZhbmXph4zpnIDopoEgQOiwi+Wjq1xuXHRleHBvcnRzLm1rUGxhaW5LZXlGb3JFeHBhcmFtcyA9IGZ1bmN0aW9uKGtleV9wcmVmaXgpIHtcblx0ICB2YXIgX2tleSA9IGtleV9wcmVmaXggfHwgc19wbGFpbl9vYmo7XG5cdCAgcmV0dXJuIF9rZXkgKyAnZXhwYXJhbXMnO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGFycmF5IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG5cdCAqIOWFtuS4reaVsOe7hOS4ulxuXHQgKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG5cdCAqIOeahOW9ouW8j+OAglxuXHQgKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuXHQgKiBAcGFyYW0gYXJyIHtBcnJheX1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyMnBhcmFtKGFycikge1xuXHQgIHZhciBhID0gW10sXG5cdCAgICBrLFxuXHQgICAgdixcblx0ICAgIGksXG5cdCAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogKGsgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodikpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGEuam9pbignJicpO1xuXHR9O1xuXHRleHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblx0XG5cdFxuXHQvKipcblx0ICogcGFyYW0gdG8gYXJyYXlcblx0ICogMjAxNi0wOC0yNCDmlL7lvIDvvIznlKjmnaXlpITnkIZleHBhcmFtcyBA6LCL5aOrXG5cdCAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgYXJyYXkg5qC85byP77yM5aaC77yaXG5cdCAqIFtbXCJhXCIsIFwiMVwiXSwgW1wiYlwiLCBcIjJcIl0sIFtcImNcIiwgXCIzXCJdXVxuXHQgKlxuXHQgKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLnBhcmFtMmFyciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG5cdCAgICBpID0gMCwgbCA9IGEubGVuZ3RoLFxuXHQgICAgaXRlbSxcblx0ICAgIGFyciA9IFtdO1xuXHQgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpdGVtID0gYVtpXS5zcGxpdChcIj1cIik7XG5cdCAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYXJyO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICB2YXIgaztcblx0ICB2YXIgdjtcblx0ICB2YXIgaTtcblx0ICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBrID0gYXJyW2ldWzBdO1xuXHQgICAgdiA9IGFycltpXVsxXTtcblx0ICAgIHJldFtrXSA9IHY7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdC8vIOS7heaUr+aMgeS4gOe6p2pzb27nu5PmnoRcblx0ZXhwb3J0cy5qc29uTGlrZVN0cjJKU09OID0gZnVuY3Rpb24oanNvblN0cikge1xuXHQgIGlmICghanNvblN0ciB8fCB0eXBlb2YganNvblN0ciAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdCAgdmFyIHN0ciA9IGpzb25TdHIucmVwbGFjZSgvWydcInt9XSsvZywgJycpO1xuXHQgIHZhciBhcnIxID0gc3RyLnNwbGl0KCcsJyk7IFxuXHQgIHZhciBhcnIyID0gW107IFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuXHQgICAgYXJyMi5wdXNoKGFycjFbaV0uc3BsaXQoJzonKSk7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSB0aGlzLmFycjJvYmooYXJyMik7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2FuMmh0dHBzID0gZnVuY3Rpb24odXJsKSB7XG5cdCAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG5cdCAgICB2YXIgcHJvdG9jYWwgPSAnaHR0cHM6Jztcblx0ICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG5cdCAgICB9XG5cdCAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICB9XG5cdCAgcmV0dXJuIHVybDtcblx0fTtcblx0IFxuXHRleHBvcnRzLmNoZWNrRW1wdHlPYmogPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwKSkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fTtcblx0XG5cblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9yZXN1bWVUaW1lID0gbnVsbDtcblx0ICB2YXIgX2N1cnJlbnRTZXNzaW9uID0gbnVsbDsgLy8g5b2T5YmNc2Vzc2lvbuWvueixoVxuXHRcblx0ICBmdW5jdGlvbiBpbml0KCl7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICByZXN1bWU6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgICAgdmFyIG5ld1Nlc3Npb24gPSBmYWxzZTtcblx0XG5cdCAgICAgICAgaWYgKCFfY3VycmVudFNlc3Npb24pIHtcblx0ICAgICAgICAgIF9jdXJyZW50U2Vzc2lvbiA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkNVUlJFTlRfU0VTU0lPTik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdCAgICAgICAgX3Jlc3VtZVRpbWUgPSBkYXRlLmdldFRpbWUoKTtcblx0ICAgICAgICBpZiAoIV9jdXJyZW50U2Vzc2lvblxuXHQgICAgICAgICAgfHwgIV9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZVxuXHQgICAgICAgICAgfHwgX3Jlc3VtZVRpbWUgLSBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPiBhcGx1c1N0YXRpYy5TRVNTSU9OX0lOVEVSVkFMKSB7XG5cdCAgICAgICAgICBuZXdTZXNzaW9uID0gdHJ1ZTtcblx0ICAgICAgICAgIF9jcmVhdGVOZXdTZXNzaW9uKG9wdGlvbnMpO1xuXHQgICAgICAgICAgdWxvZygpLnYoJ+W8gOWni+aWsOeahHNlc3Npb24oJXMpOiAnLCBfY3VycmVudFNlc3Npb24uaWQsIF9jdXJyZW50U2Vzc2lvbik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHVsb2coKS52KCflu7bnu63kuIrkuIDmrKFzZXNzaW9uKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gbmV3U2Vzc2lvbjtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIC8vIOWcqG9uSGlkZeaWueazleaXtumXreWQiHNlc3Npb25cblx0ICAgICAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfZW5kU2Vzc2lvbigpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgLy8g6I635Y+W5b2T5YmN55qEc2Vzc2lvbklk77yM5rKh5pyJ5YiZ6L+U5Zue56m6XG5cdCAgICAgIGdldEN1cnJlbnRTZXNzaW9uSWQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gKF9jdXJyZW50U2Vzc2lvbiB8fCB7fSkuaWQ7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBnZXRDdXJyZW50U2Vzc2lvbjogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBfY3VycmVudFNlc3Npb247XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBjbG9uZUN1cnJlbnRTZXNzaW9uOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsb25lRGVlcChfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX2dldFVtUGFyYW1zKHF1ZXJ5KSB7XG5cdCAgICB2YXIgYXBsdXNfcXVlcnkgPSB7fTtcblx0ICAgIGZvciAodmFyIGkgaW4gcXVlcnkpIHtcblx0ICAgICAgYXBsdXNfcXVlcnlbaV0gPSBxdWVyeVtpXTtcblx0ICAgIH1cblx0XG5cdCAgICB1bG9nKCkudigncXVlcnk6ICcsIHF1ZXJ5KTtcblx0ICAgIHJldHVybiBhcGx1c19xdWVyeTtcblx0ICB9XG5cdFxuXHQgIC8vIOW8gOWni+S4gOS4quaWsHNlc3Npb25cblx0ICBmdW5jdGlvbiBfY3JlYXRlTmV3U2Vzc2lvbihuZXdPcHRpb25zKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgcHJldk9wdGlvbnMgPSAoX2N1cnJlbnRTZXNzaW9uIHx8IHt9KS5vcHRpb25zIHx8IHt9O1xuXHQgICAgICBcblx0ICAgICAgdmFyIGxhdW5jaE9wdGlvbnMgPSB1dGlscy5hc3NpZ24oe30sIF9nZXRVbVBhcmFtcyhuZXdPcHRpb25zLnF1ZXJ5KSk7XG5cdCAgICAgIGxhdW5jaE9wdGlvbnMucGF0aCA9IG5ld09wdGlvbnMucGF0aCB8fCBwcmV2T3B0aW9ucy5wYXRoO1xuXHQgICAgICBsYXVuY2hPcHRpb25zLnNjZW5lID0gbmV3T3B0aW9ucy5zY2VuZVxuXHQgICAgICAgID8gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKSArICdfJyArIG5ld09wdGlvbnMuc2NlbmVcblx0ICAgICAgICA6IHByZXZPcHRpb25zLnNjZW5lO1xuXHRcblx0ICAgICAgdmFyIHJlZmVycmVySW5mbyA9IG5ld09wdGlvbnMucmVmZXJyZXJJbmZvO1xuXHQgICAgICBpZiAocmVmZXJyZXJJbmZvKSB7XG5cdCAgICAgICAgbGF1bmNoT3B0aW9ucy5yZWZlcnJlckFwcElkID0gcmVmZXJyZXJJbmZvLmFwcElkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB1bG9nKCkudignc2Vzc2lvbiBvcHRpb25zOiAnLCBsYXVuY2hPcHRpb25zKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuXHQgICAgICB2YXIgdHMgPSBEYXRlLm5vdygpO1xuXHQgICAgICBfY3VycmVudFNlc3Npb24gPSB7XG5cdCAgICAgICAgaWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyB0cyxcblx0ICAgICAgICBzdGFydF90aW1lOiB0cyxcblx0ICAgICAgICBvcHRpb25zOiBsYXVuY2hPcHRpb25zLFxuXHQgICAgICAgIHN0YXRlX3M6IDFcblx0ICAgICAgfTsgXG5cdCAgICAgIGlmIChncCkge1xuXHQgICAgICAgIF9jdXJyZW50U2Vzc2lvblsnZ3AnXSA9IGdwO1xuXHQgICAgICB9IFxuXHRcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdWxvZygpLmUoJ+eUn+aIkOaWsHNlc3Npb27lpLHotKU6ICcsIGUpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8g57uT5p2f5b2T5YmNc2Vzc2lvbu+8jOeUseS6jjMw56eS5py65Yi277yM5LiA5Liqc2Vzc2lvbuS8muiiq+e7k+adn+WkmuasoVxuXHQgIGZ1bmN0aW9uIF9lbmRTZXNzaW9uKCkge1xuXHQgICAgaWYgKF9jdXJyZW50U2Vzc2lvbikge1xuXHQgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdCAgICAgIF9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZSA9IGRhdGUuZ2V0VGltZSgpO1xuXHQgICAgICBpZiAodHlwZW9mIF9jdXJyZW50U2Vzc2lvbi5kdXJhdGlvbiAhPT0gJ251bWJlcicpIHtcblx0ICAgICAgICBfY3VycmVudFNlc3Npb24uZHVyYXRpb24gPSAwO1xuXHQgICAgICB9XG5cdCAgICAgIF9jdXJyZW50U2Vzc2lvbi5kdXJhdGlvbiA9IF9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZSAtIF9yZXN1bWVUaW1lO1xuXHQgICAgICBfY3VycmVudFNlc3Npb24uc3RhdGVfcyA9IDA7XG5cdCAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLkNVUlJFTlRfU0VTU0lPTiwgX2N1cnJlbnRTZXNzaW9uKTtcblx0XG5cdCAgICAgIHVsb2coKS52KCfpgIDlh7rkvJror50oJXMpOiAlcyAnLCBfY3VycmVudFNlc3Npb24uaWQsIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCksIF9jdXJyZW50U2Vzc2lvbik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFfaW5zdGFuY2UpIHtcblx0ICAgICAgX2luc3RhbmNlID0gaW5pdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9pbnN0YW5jZTtcblx0ICB9O1xuXHRcblx0fSkoKTtcblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIganNvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9uYW1lID0gJyc7XG5cdCAgdmFyIF9kYXRhID0gbnVsbDtcblx0ICB2YXIgX2xvYWRlZCA9IGZhbHNlO1xuXHRcblx0ICBmdW5jdGlvbiBDYWNoZSgpIHtcblx0ICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgIHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uIChjYikge1xuXHQgICAgICBpZiAoIV9kYXRhKSB7XG5cdCAgICAgICAgX25hbWUgPSAnYXBsdXNfY2FjaGVfJyArIChhcGx1cy5nZXRNZXRhSW5mbygnYXBwS2V5JykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcElkJykpO1xuXHQgICAgICAgIGN0eC5nZXRTdG9yYWdlKHtcblx0ICAgICAgICAgIGtleTogX25hbWUsXG5cdCAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcblx0ICAgICAgICAgICAgICBfZGF0YSA9IGpzb25VdGlsLnBhcnNlKHJlcy5kYXRhKSB8fCB7fTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIF9sb2FkZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICBjdHgucmVtb3ZlU3RvcmFnZSh7XG5cdCAgICAgICAgICAgICAga2V5OiBfbmFtZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoZSkge1xuXHRcblx0ICAgICAgICAgICAgdWxvZygpLncoX25hbWUgKyAnOiAnICsgZS5lcnJNc2cpO1xuXHQgICAgICAgICAgICBfZGF0YSA9IHt9O1xuXHQgICAgICAgICAgICBfbG9hZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuXHQgICAgICAgICAgICAgIGtleTogX25hbWVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuXHQgICAgICAgICAga2V5OiBfbmFtZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX2RhdGEpIHtcblx0ICAgICAgICBjdHguc2V0U3RvcmFnZSh7XG5cdCAgICAgICAgICBrZXk6IF9uYW1lLFxuXHQgICAgICAgICAgZGF0YToganNvblV0aWwuc3RyaW5nZnkoX2RhdGEpXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICBpZiAoX2RhdGEpIHtcblx0ICAgICAgICBfZGF0YVtrZXldID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoX2RhdGEgfHwge30pW2tleV07XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICBpZiAoX2RhdGEgJiYgX2RhdGFba2V5XSkge1xuXHQgICAgICAgIGRlbGV0ZSBfZGF0YVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gX2RhdGE7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9kYXRhID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAhIXRoaXMuZ2V0KGtleSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBfbG9hZGVkO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIV9pbnN0YW5jZSkge1xuXHQgICAgICBfaW5zdGFuY2UgPSBuZXcgQ2FjaGUoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gX2luc3RhbmNlO1xuXHQgIH07XG5cdH0pKCk7XG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcblx0ZXhwb3J0cy5zdHJpbmdmeSA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBpZiAoZGF0YSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAvLyBlbXB0eVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gJyc7XG5cdH07XG5cdFxuXHRleHBvcnRzLnBhcnNlID0gZnVuY3Rpb24oanNvbikge1xuXHQgIGlmIChqc29uKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgLy8gZW1wdHlcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG51bGw7XG5cdH07XG5cdFxuXHRleHBvcnRzLnBhcnNlVG9BcnJheSA9IGZ1bmN0aW9uKGpzb24pIHtcblx0ICBpZiAoanNvbikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIC8vIGVtcHR5XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBbXTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdHZhciBMT0dfUFJFRklYID0gJ1tBUExVU10gLS0gJztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX2luc3RhbmNlID0gbnVsbDtcblx0ICB2YXIgX2RlYnVnID0gZmFsc2U7XG5cdFxuXHQgIGZ1bmN0aW9uIFVMb2coKSB7XG5cdCAgICB0aGlzLnNldERlYnVnID0gZnVuY3Rpb24gKGRlYnVnKSB7XG5cdCAgICAgIF9kZWJ1ZyA9IGRlYnVnO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChfZGVidWcpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBjb25zb2xlLmRlYnVnLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgLy8gZVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjb25zb2xlLmluZm8uYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gZVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIC8vIGVtcHR5XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5lID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX2RlYnVnKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBMT0dfUFJFRklYICsgYXJndW1lbnRzWzBdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIC8vIGVcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy53ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX2RlYnVnKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBMT0dfUFJFRklYICsgYXJndW1lbnRzWzBdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgLy8gZVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLnYgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChfZGVidWcpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIC8vIGVcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy50ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX2RlYnVnKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGNvbnNvbGUudGFibGUuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMudGlwID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIC8vIGVcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLnRpcF93ID0gZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKFxuXHQgICAgICAgICAgJyVjICcgKyBMT0dfUFJFRklYICsgbXNnLFxuXHQgICAgICAgICAgJ2JhY2tncm91bmQ6cmVkOyBwYWRkaW5nOiA0cHg7IHBhZGRpbmctcmlnaHQ6IDhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjb2xvcjogI2ZmZjsnXG5cdCAgICAgICAgKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIC8vIGVcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmVyciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB0aGlzLnJlcGVhdCA9IGZ1bmN0aW9uKGNoYXIpIHtcblx0ICAgICAgdmFyIHJlcyA9IGNoYXI7XG5cdCAgICAgIHdoaWxlIChyZXMubGVuZ3RoIDwgODYpIHtcblx0ICAgICAgICByZXMgPSByZXMgKyBjaGFyO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZXM7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChfaW5zdGFuY2UgPT09IG51bGwpIHtcblx0ICAgICAgX2luc3RhbmNlID0gbmV3IFVMb2coKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfaW5zdGFuY2U7XG5cdCAgfTtcblx0fSkoKTtcblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMuZ2V0UmFuZG9tU3RyID0gZnVuY3Rpb24obGVuKSB7XG5cdCAgdmFyIHN0ciA9ICcnO1xuXHQgIHZhciBhcnIgPSBbJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJywgJ2knLCAnaicsICdrJywgJ2wnLCAnbScsICduJywgJ28nLCAncCcsICdxJywgJ3InLCAncycsICd0JywgJ3UnLCAndicsICd3JywgJ3gnLCAneScsICd6JywgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgTnVtYmVyKGxlbik7IGkrKykge1xuXHQgICAgdmFyIHBvcyA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChhcnIubGVuZ3RoIC0gMSkpO1xuXHQgICAgc3RyICs9IGFycltwb3NdO1xuXHQgIH1cblx0ICByZXR1cm4gc3RyO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5zdGFydHNXaXRoID0gZnVuY3Rpb24oc3RyLCBzZWFyY2hWYWwpIHtcblx0ICBpZiAoIXN0ciB8fCAhc2VhcmNoVmFsIHx8IHNlYXJjaFZhbC5sZW5ndGggPT09IDAgfHwgc2VhcmNoVmFsLmxlbmd0aCA+IHN0ci5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgc2VhcmNoVmFsLmxlbmd0aCkgPT09IHNlYXJjaFZhbDtcblx0fTtcblx0XG5cdGV4cG9ydHMuYXNzaWduID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG5cdCAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuXHQgICAgaWYgKHNvdXJjZSkge1xuXHQgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuXHQgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBuZXh0S2V5KSkge1xuXHQgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gb3V0cHV0O1xuXHR9O1xuXHRcblx0Ly8gMS5la3bkuK3lrZjlnKjop4TliJnkuI3lkIjms5Xmg4XlhrXvvIzkuKLlvIPmlbTmnaHkuovku7Zcblx0Ly8gMi5ldmVudGlk6ZW/5bqm5LiN6IO96LaF6L+HMTI45Liq5a2X56ymXG5cdC8vIDMua2V56ZW/5bqm5LiN6IO96LaF6L+HMjU25Liq5a2X56ymXG5cdC8vIDQu5q+P5LiqZXZlbnTmkLrluKZrZXnkuKrmlbDkuI3og73otoXov4cxMDDkuKpcblx0ZXhwb3J0cy5jaGVja0V2ZW50ID0gZnVuY3Rpb24oZXZlbnRJZCwgcHJvcGVydGllcykge1xuXHQgIHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdCAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0ICBpZiAoIShldmVudElkICYmIHR5cGVvZiBldmVudElkID09PSAnc3RyaW5nJykpIHtcblx0ICAgIHVsb2coKS5lKCdwbGVhc2UgY2hlY2sgdHJhY2tFdmVudCBpZC4gaWQgc2hvdWxkIGJlIFwic3RyaW5nXCIgYW5kIG5vdCBudWxsJyk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyDkv53nlZnlhbPplK7lrZdcblx0ICB2YXIgcmVzZXJ2ZVdvcmRzID0gWydpZCcsICdkdSddO1xuXHQgIHZhciByZXNlcnZlV29yZE1hcCA9IHt9O1xuXHRcblx0ICByZXNlcnZlV29yZHMuZm9yRWFjaChmdW5jdGlvbiAod29yZCkge1xuXHQgICAgcmVzZXJ2ZVdvcmRNYXBbd29yZF0gPSAxO1xuXHQgIH0pO1xuXHRcblx0ICAvLyDmo4Dmn6VldmVudElk5piv5ZCm5LiO5L+d55WZ5YWz6ZSu5a2X5Yay56qBXG5cdCAgaWYgKHJlc2VydmVXb3JkTWFwW2V2ZW50SWRdKSB7XG5cdCAgICB1bG9nKCkuZSgnZXZlbnRJZOS4jeiDveS4juS7peS4i+S/neeVmeWtl+WGsueqgTogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgaWYgKGV2ZW50SWQubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX0VWRU5USURfTEVOR1RIKSB7XG5cdCAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gbGVuZ3RoIG9mIGV2ZW50IGlkIHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyBwcm9wZXJ0aWVz55qE5ZCI5rOV57G75Z6L5Li6IHN0cmluZyB8IG9iamVjdChub3QgaW5jbHVkZSBBcnJheSlcblx0ICBpZiAocHJvcGVydGllc1xuXHQgICAgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHByb3BlcnRpZXMpKVxuXHQgICAgJiYgdHlwZW9mIHByb3BlcnRpZXMgIT09ICdzdHJpbmcnKSB7XG5cdCAgICB1bG9nKCkuZSgncGxlYXNlIGNoZWNrIHRyYWNrRXZlbnQgcHJvcGVydGllcy4gcHJvcGVydGllcyBzaG91bGQgYmUgc3RyaW5nIG9yIG9iamVjdChub3QgaW5jbHVkZSBBcnJheSknKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgIHZhciBjb3VudCA9IDA7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuXHQgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG5cdCAgICAgICAgaWYgKGtleS5sZW5ndGggPiBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBwcm9wZXJ0eSBrZXkgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGNvdW50ID49IGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UKSB7XG5cdCAgICAgICAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gY291bnQgb2YgcHJvcGVydGllcyBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCk7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAocmVzZXJ2ZVdvcmRNYXBba2V5XSkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ+WxnuaAp+S4reeahGtleeS4jeiDveS4juS7peS4i+S/neeVmeWtl+WGsueqgTogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY291bnQgKz0gMTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdFxuXHRcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdGV4cG9ydHMuZGVsZXRlSW5mbyA9IGZ1bmN0aW9uKGdva2V5LCBhcnIpIHtcblx0ICBlYWNoKGFyciwgZnVuY3Rpb24odikge1xuXHQgICAgZGVsZXRlIGdva2V5W3ZdO1xuXHQgIH0pO1xuXHQgIHJldHVybiBnb2tleTtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXHRcblx0XG5cdGV4cG9ydHMuRGF0YVR5cGUgPSB7XG5cdCAgSEFMRl9TRVNTSU9OOiAnaGFsZl9zZXNzaW9uJyxcblx0ICBDTE9TRV9TRVNTSU9OOiAnY2xvc2Vfc2Vzc2lvbicsXG5cdCAgRUtWOiAnZWt2Jyxcblx0ICBFTlRFUl9QQUdFOiAnZW50ZXJfcGFnZScsXG5cdCAgTEVBVkVfUEFHRTogJ2xlYXZlX3BhZ2UnXG5cdH07XG5cdFxuXHRleHBvcnRzLkFjY2Vzc1R5cGUgPSB7XG5cdCAgTU9CSUxFX05FVFdPUktfMkc6ICcyZycsXG5cdCAgTU9CSUxFX05FVFdPUktfM0c6ICczZycsXG5cdCAgTU9CSUxFX05FVFdPUktfNEc6ICc0ZycsXG5cdCAgTU9CSUxFX05FVFdPUktfTk9ORTogJ25vbmUnXG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyciwgZm4pIHtcblx0ICB2YXIgaTtcblx0ICB2YXIgbCA9IGFyci5sZW5ndGg7XG5cdCAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIHJzID0gZm4oYXJyW2ldLCBpKTtcblx0ICAgIGlmIChycyA9PT0gJ2JyZWFrJykge1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIF9pbnN0YW5jZTtcblx0ICB2YXIgX3Nlc3Npb25JZDtcblx0ICB2YXIgX21lbW9yeUV2ZW50cyA9IFtdO1xuXHRcblx0ICAvLyDlnKjliJvlu7pzZXNzaW9uSWTliY3mt7vliqDnmoTkuovku7Zcblx0ICB2YXIgX25vU2Vzc2lvbkV2ZW50cyA9IFtdO1xuXHRcblx0ICBmdW5jdGlvbiBfY2FjaGVFdmVudHMoKSB7XG5cdCAgICBpZiAoX21lbW9yeUV2ZW50cy5sZW5ndGgpIHtcblx0ICAgICAgdmFyIGVrdnMgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5FS1ZTKTtcblx0ICAgICAgXG5cdCAgICAgIC8vIOacrOWcsOacgOWkmuWtmOWCqCBFVkVOVF9NQVhfQ09VTlQg5p2h5pWw5o2u77yM44CM5aSa5L2Z5pWw5o2u44CN5pqC5pe25YWI5oqb5byDXG5cdCAgICAgIGlmIChfZ2V0Q2FjaGVFdmVudHNMZW5ndGgoZWt2cykgKyBfbWVtb3J5RXZlbnRzLmxlbmd0aCA8PSBhcGx1c1N0YXRpYy5FVkVOVF9NQVhfQ09VTlQpIHtcblx0ICAgICAgICBla3ZzID0gX2J1aWxkRWt2cyhla3ZzLCBfbWVtb3J5RXZlbnRzKTtcblx0ICAgICAgICBcblx0ICAgICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5FS1ZTLCBla3ZzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX2J1aWxkRWt2cyhla3ZzLCBtZW1vcnlFdmVudHMpIHtcblx0ICAgIGVrdnMgPSBla3ZzIHx8IHt9O1xuXHQgICAgdmFyIGV2ZW50cyA9IGVrdnNbX3Nlc3Npb25JZF07XG5cdCAgICBpZiAoaXNBcnJheShldmVudHMpICYmIGV2ZW50cy5sZW5ndGgpIHtcblx0ICAgICAgZWt2c1tfc2Vzc2lvbklkXSA9IGV2ZW50cy5jb25jYXQobWVtb3J5RXZlbnRzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVrdnNbX3Nlc3Npb25JZF0gPSBbXS5jb25jYXQobWVtb3J5RXZlbnRzKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZWt2cztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIF9nZXRDYWNoZUV2ZW50c0xlbmd0aChldmVudHNNYXApIHtcblx0ICAgIHZhciBsZW4gPSAwO1xuXHQgICAgZm9yICh2YXIga2V5IGluIGV2ZW50c01hcCkge1xuXHQgICAgICBpZiAoaXNBcnJheShldmVudHNNYXBba2V5XSkpIHtcblx0ICAgICAgICBsZW4gKz0gZXZlbnRzTWFwW2tleV0ubGVuZ3RoO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbGVuO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFkZEV2ZW50OiBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICBpZiAoIWV2ZW50KSByZXR1cm47XG5cdCAgICAgICAgaWYgKF9zZXNzaW9uSWQpIHtcblx0ICAgICAgICAgIF9tZW1vcnlFdmVudHMudW5zaGlmdChldmVudCk7XG5cdCAgICAgICAgICBcblx0ICAgICAgICAgIGlmIChfbWVtb3J5RXZlbnRzLmxlbmd0aCA+IGFwbHVzU3RhdGljLk1FTU9SWV9NQVhfQ09VTlQpIHtcblx0ICAgICAgICAgICAgX2NhY2hlRXZlbnRzKF9zZXNzaW9uSWQpO1xuXHQgICAgICAgICAgICBfbWVtb3J5RXZlbnRzLmxlbmd0aCA9IDA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHVsb2coKS53KCdzZXNzaW9uIGlkIGlzIG51bGw6ICcsIF9zZXNzaW9uSWQpO1xuXHQgICAgICAgICAgXG5cdCAgICAgICAgICBfbm9TZXNzaW9uRXZlbnRzLnVuc2hpZnQoZXZlbnQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHNldFNlc3Npb25JZDogZnVuY3Rpb24gKHNlc3Npb25JZCkge1xuXHQgICAgICAgIF9zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cdFxuXHQgICAgICAgIHVsb2coKS52KCdzZXRTZXNzaW9uSWQ6ICcsIF9zZXNzaW9uSWQpO1xuXHQgICAgICAgIGlmIChpc0FycmF5KF9ub1Nlc3Npb25FdmVudHMpICYmIF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoICYmIF9zZXNzaW9uSWQpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICB0aGlzLmFkZEV2ZW50KF9ub1Nlc3Npb25FdmVudHNbaV0pO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoID0gMDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBnZXRFa3ZzOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGVrdnMgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5FS1ZTKTtcblx0ICAgICAgICBcblx0ICAgICAgICBpZiAoX21lbW9yeUV2ZW50cyAmJiBfbWVtb3J5RXZlbnRzLmxlbmd0aCkge1xuXHQgICAgICAgICAgZWt2cyA9IF9idWlsZEVrdnMoZWt2cywgX21lbW9yeUV2ZW50cyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBla3ZzO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjYWNoZSgpLnJlbW92ZShhcGx1c1N0YXRpYy5FS1ZTKTtcblx0ICAgICAgICBfbWVtb3J5RXZlbnRzLmxlbmd0aCA9IDA7XG5cdCAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghX2luc3RhbmNlKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IGluaXQoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfaW5zdGFuY2U7XG5cdCAgfTtcblx0fSkoKTtcblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobykge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KSB7XG5cdCAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIC9BcnJheS8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBIZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciBidWlsZEJvZHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHJlcXVlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0dmFyIFF1ZXVlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIE1BWF9RVUVVRV9DT1VOVCA9IDUwOyAvLyDkuLrpmLLmraLlm6DnvZHnu5zlvILluLjlr7zoh7TnvJPlrZjov4flpKfvvIzorr7nva7nvJPlrZjkuKrmlbDkuIrpmZBcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7IFxuXHQgIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuXHQgIHZhciBfcnVubmluZyA9IGZhbHNlO1xuXHQgIHZhciBfZmFpbFJlcXVlc3RzID0gW107XG5cdCAgdmFyIF9xdWV1ZSA9IG5ldyBRdWV1ZShNQVhfUVVFVUVfQ09VTlQpO1xuXHRcblx0ICBmdW5jdGlvbiBfZW5xdWV1ZVJlcXVlc3QoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgIHZhciBkYXRhID0gYnVpbGRCb2R5KGRhdGFUeXBlKTtcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgIHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIGNsaWVudCA9IGFwbHVzLl9hcGx1c19jbGllbnQgfHwge307XG5cdCAgICAgIGRhdGEuaGVhZGVyID0gdXRpbERhc2guYXNzaWduKGRhdGEuaGVhZGVyLCBIZWFkZXIuZ2V0TmV0SW5mbyhjbGllbnQpKTtcblx0ICAgICAgZGF0YS5ub0NhY2hlID0gb3B0aW9ucy5ub0NhY2hlO1xuXHQgICAgICBfcXVldWUuZW5xdWV1ZShkYXRhKTtcblx0ICAgIH1cblx0ICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIF9zZW5kUXVldWUoY29tcGxldGVkQ2FsbGJhY2spIHtcblx0ICAgIHZhciBkYXRhID0gX3F1ZXVlLmZyb250KCk7XG5cdCAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3F1ZXVlLmRlcXVldWUoKTtcblx0ICAgICAgX3NlbmRRdWV1ZShjb21wbGV0ZWRDYWxsYmFjayk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBmYWlsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyDlj5HpgIHlpLHotKXliJnlsIbor6XmnaHmlbDmja7mt7vliqDliLDpmJ/liJflsL7pg6jvvIzpmLLmraLlvbHlk43lkI7nu63mlbDmja7nmoTlj5HpgIFcblx0ICAgICAgdmFyIGl0ZW0gPSBfcXVldWUuZGVxdWV1ZSgpO1xuXHQgICAgICBpdGVtICYmICghaXRlbS5ub0NhY2hlKSAmJiBfZmFpbFJlcXVlc3RzLnB1c2goaXRlbSk7XG5cdCAgICAgIF9zZW5kUXVldWUoY29tcGxldGVkQ2FsbGJhY2spO1xuXHQgICAgfTtcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgIHJlcXVlc3QoZGF0YSwgc3VjY2VzcywgZmFpbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBfcHJvY2Vzc0ZhaWxSZXF1ZXN0cygpO1xuXHQgICAgICBjb21wbGV0ZWRDYWxsYmFjaygpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX3Byb2Nlc3NGYWlsUmVxdWVzdHMoKSB7XG5cdCAgICAvLyDlj5HpgIHlrozmiJDlkI7lsIblpLHotKXnmoTor7fmsYLph43mlrDmt7vliqDliLDpmJ/liJfkuK1cblx0ICAgIF9mYWlsUmVxdWVzdHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICBfcXVldWUuZW5xdWV1ZShpdGVtKTtcblx0ICAgIH0pO1xuXHQgICAgX2ZhaWxSZXF1ZXN0cy5sZW5ndGggPSAwO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX3N0YXJ0U2VuZChjb21wbGV0ZWRDYWxsYmFjaykge1xuXHQgICAgaWYgKF9ydW5uaW5nKSB7XG5cdCAgICAgIHVsb2coKS5pKCfpmJ/liJfmraPlnKjlj5HpgIHkuK0nKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgX3J1bm5pbmcgPSB0cnVlO1xuXHQgICAgLy8g5ZyodGFybzF444CBdGFybzJ45qGG5p625Lit77yM5b+F6aG76YCa6L+H5Y+Y6YeP5aOw5piO55qE5pa55byP5Lyg5YWl77yM5ZCm5YiZX3NlbmRRdWV1ZemYu+Whnu+8jOWbnuiwg+aXoOazlemHjee9rl9ydW5uaW5n77yM5a+86Ie05pel5b+X5Y+R6YCB5LiN5Ye677yb5Y6f5Zug5LiN5piOXG5cdCAgICAvLyDlpoLmnpzljrvmjolfcnVubmluZ+eahOivne+8jOS8muWvvOiHtOmHjeWkjeS4iuaKpXNlc3Npb27ml6Xlv5dcblx0ICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX3J1bm5pbmcgPSBmYWxzZTtcblx0ICAgICAgaXNGdW5jdGlvbihjb21wbGV0ZWRDYWxsYmFjaykgJiYgY29tcGxldGVkQ2FsbGJhY2soKTtcblx0ICAgIH07XG5cdCAgICBfc2VuZFF1ZXVlKGNiKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIFJlcXVlc3RRdWV1ZSgpIHtcblx0ICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChkYXRhVHlwZSwgb3B0aW9ucywgY29tcGxldGVkQ2FsbGJhY2spIHtcblx0ICAgICAgaWYgKGRhdGFUeXBlKSB7XG5cdCAgICAgICAgdGhpcy5hZGQoZGF0YVR5cGUsIG9wdGlvbnMsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIF9zdGFydFNlbmQoY29tcGxldGVkQ2FsbGJhY2spO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIF9zdGFydFNlbmQoY29tcGxldGVkQ2FsbGJhY2spO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuYWRkID0gZnVuY3Rpb24gKGRhdGFUeXBlLCBvcHRpb25zLCBjYikge1xuXHQgICAgICBfZW5xdWV1ZVJlcXVlc3QoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKTtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5sb2FkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgaXRlbXMgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5SRVFVRVNUUyk7XG5cdCAgICAgIGlmIChpdGVtcyAmJiBpdGVtcy5sZW5ndGgpIHtcblx0ICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICBfcXVldWUuZW5xdWV1ZShpdGVtKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICBjYWNoZSgpLnJlbW92ZShhcGx1c1N0YXRpYy5SRVFVRVNUUyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY2FjaGUoKS5zZXQoYXBsdXNTdGF0aWMuUkVRVUVTVFMsIGNsb25lRGVlcChfcXVldWUuaXRlbXMoKSkpO1xuXHQgICAgICBfcXVldWUuY2xlYXIoKTsgLy8g5LiA5a6a6KaB5YWI5L+d5a2Y5YaN5riF56m677yM5ZCm5YiZ5L+d5a2Y55qE5rC46L+c5piv56m65pWw5o2uXG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghX2luc3RhbmNlKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IG5ldyBSZXF1ZXN0UXVldWUoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfaW5zdGFuY2U7XG5cdCAgfTtcblx0fSkoKTtcblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0ZXhwb3J0cy5nZXROZXRJbmZvID0gZnVuY3Rpb24oY2xpZW50KXtcblx0ICB2YXIgcmVzdWx0ID0ge307XG5cdCAgdmFyIGFjY2VzcyA9IGNsaWVudC5uZXR3b3JrVHlwZTtcblx0ICBpZiAoYWNjZXNzID09PSAnbm9uZScpIHtcblx0ICAgIGFjY2VzcyA9ICd1bmtub3duJztcblx0ICB9XG5cdFxuXHQgIGFjY2VzcyA9IGFjY2VzcyA/IGFjY2Vzcy50b0xvd2VyQ2FzZSgpIDogJyc7XG5cdCAgc3dpdGNoIChhY2Nlc3MpIHtcblx0ICBjYXNlIHV0aWxzLkFjY2Vzc1R5cGUuTU9CSUxFX05FVFdPUktfNEc6XG5cdCAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnTFRFJztcblx0ICAgIHJlc3VsdC5hY2Nlc3MgPSAnNEcnO1xuXHQgICAgYnJlYWs7XG5cdCAgY2FzZSB1dGlscy5BY2Nlc3NUeXBlLk1PQklMRV9ORVRXT1JLXzNHOlxuXHQgICAgcmVzdWx0LmFjY2Vzc19zdWJ0eXBlID0gJ0NETUEnO1xuXHQgICAgcmVzdWx0LmFjY2VzcyA9ICczRyc7XG5cdCAgICBicmVhaztcblx0ICBjYXNlIHV0aWxzLkFjY2Vzc1R5cGUuTU9CSUxFX05FVFdPUktfMkc6XG5cdCAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnR1JQUyc7XG5cdCAgICByZXN1bHQuYWNjZXNzID0gJzJHJztcblx0ICAgIGJyZWFrO1xuXHQgIGRlZmF1bHQ6XG5cdCAgICByZXN1bHQuYWNjZXNzID0gYWNjZXNzO1xuXHQgICAgZGVsZXRlIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZTtcblx0ICAgIGJyZWFrO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEhlYWRlckluZm8gPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgaGVhZGVyID0ge307XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHRcblx0ICB2YXIgZ2xvYmFsQ29uZmlnID0gYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuXHQgIHZhciBjbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuXHRcblx0ICB2YXIgZGF0YSA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuXHQgIGlmIChkYXRhKSB7XG5cdCAgICBoZWFkZXIuaW1wcmludCA9IGRhdGE7XG5cdCAgfVxuXHRcblx0ICBoZWFkZXIuZGV2aWNlX3R5cGUgPSAnUGhvbmUnO1xuXHQgIGhlYWRlci5zZGtfdmVyc2lvbiA9IGdsb2JhbENvbmZpZy5sdmVyO1xuXHQgIGhlYWRlci5hcHBrZXkgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwS2V5JykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcElkJyk7XG5cdCAgaGVhZGVyLmRldmljZV9pbmZvID0gJyc7XG5cdCAgaGVhZGVyLmFwcGlkID0gY2xpZW50LmFwcElkO1xuXHQgIGhlYWRlci5hcHBfZW52ID0gY2xpZW50LmFwcEVudjtcblx0ICBoZWFkZXIuYXBwX3ZlcnNpb24gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwVmVyc2lvbicpIHx8ICdkZXZ0b29scyc7XG5cdFxuXHQgIHZhciBnbG9iYWxfYXJncyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1nbG9iYWwtYXJncycpO1xuXHQgIGlmIChnbG9iYWxfYXJncyAmJiBnbG9iYWxfYXJncy5kZWJ1Z0lkKSB7XG5cdCAgICBoZWFkZXIubWluaWFwcERlYnVnSWQgPSBnbG9iYWxfYXJncy5kZWJ1Z0lkO1xuXHQgIH1cblx0XG5cdCAgdmFyIHN5c3RlbUluZm8gPSBjbGllbnQgfHwge307XG5cdCAgc3lzdGVtSW5mby5zYWZlQXJlYSA9IHN5c3RlbUluZm8uc2FmZUFyZWEgfHwge307XG5cdFxuXHQgIHZhciBtb2RlbCA9IHN5c3RlbUluZm8ubW9kZWwgfHwgJyc7XG5cdCAgdmFyIHBsYXRmb3JtID0gc3lzdGVtSW5mby5wbGF0Zm9ybSB8fCAnJztcblx0ICB2YXIgYnJhbmQgPSBzeXN0ZW1JbmZvLmJyYW5kIHx8ICcnO1xuXHQgIHZhciBicmFuZEwgPSBicmFuZC50b0xvd2VyQ2FzZSgpO1xuXHRcblx0ICBoZWFkZXIuc2RrX3R5cGUgPSBtaW5pLmdldFNka1R5cGUoKTtcblx0ICBoZWFkZXIucGxhdGZvcm0gPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuXHQgIGhlYWRlci5wbGF0Zm9ybV9zZGtfdmVyc2lvbiA9IHN5c3RlbUluZm8uU0RLVmVyc2lvbjtcblx0ICBoZWFkZXIucGxhdGZvcm1fdmVyc2lvbiA9IHN5c3RlbUluZm8ucGxhdGZvcm1WZXJzaW9uO1xuXHQgICAgXG5cdCAgdmFyIHcgPSBNYXRoLnJvdW5kKHN5c3RlbUluZm8uc2NyZWVuV2lkdGggKiBzeXN0ZW1JbmZvLnBpeGVsUmF0aW8pO1xuXHQgIHZhciBoID0gTWF0aC5yb3VuZChzeXN0ZW1JbmZvLnNjcmVlbkhlaWdodCAqIHN5c3RlbUluZm8ucGl4ZWxSYXRpbyk7XG5cdCAgaGVhZGVyLnJlc29sdXRpb24gPSB3ID4gaCA/IHcgKyAnKicgKyBoIDogaCArICcqJyArIHc7XG5cdFxuXHQgIGhlYWRlci5waXhlbF9yYXRpbyA9IHN5c3RlbUluZm8ucGl4ZWxSYXRpbztcblx0ICBoZWFkZXIub3MgPSBwbGF0Zm9ybTtcblx0ICBoZWFkZXIuZm9udF9zaXplX3NldHRpbmcgPSBzeXN0ZW1JbmZvLmZvbnRTaXplU2V0dGluZztcblx0ICBoZWFkZXIuZGV2aWNlX21vZGVsID0gbW9kZWw7IC8vIOiuvuWkh+Wei+WPt1xuXHQgIGhlYWRlci5kZXZpY2VfYnJhbmQgPSBicmFuZDsgLy8g6K6+5aSH55Sf5Lqn5ZWGXG5cdCAgLy8gX2hlYWRlci5jaGFubmVsID0gYnJhbmRMOyAvLyDov5nph4zmuKDpgZPmmoLml7blhYjnlKgg55Sf5Lqn5ZWG55qE5ZCN5a2XXG5cdCAgaGVhZGVyLmRldmljZV9tYW51ZmFjdHVyZXIgPSBicmFuZEw7XG5cdCAgaGVhZGVyLmRldmljZV9tYW51aWQgPSBtb2RlbDsgLy8g6K6+5aSH5ZOB54mML+Wei+WPt1xuXHQgIGhlYWRlci5kZXZpY2VfbmFtZSA9IG1vZGVsOyAvLyDlhoXpg6jkuqflk4Hku6Plj7dcblx0ICBoZWFkZXIub3NfdmVyc2lvbiA9IHN5c3RlbUluZm8ub3NfdmVyc2lvbjsgLy8gb3PniYjmnKzlj7dcblx0ICBoZWFkZXIubGFuZ3VhZ2UgPSBzeXN0ZW1JbmZvLmxhbmd1YWdlOyAvLyDor63oqIDvvIx6aFxuXHRcblx0ICB2YXIgbmV0SW5mbyA9IHRoaXMuZ2V0TmV0SW5mbyhjbGllbnQpO1xuXHQgIGhlYWRlci5hY2Nlc3MgPSBuZXRJbmZvLmFjY2Vzcztcblx0ICBpZiAobmV0SW5mby5hY2Nlc3Nfc3VidHlwZSkge1xuXHQgICAgaGVhZGVyLmFjY2Vzc19zdWJ0eXBlID0gbmV0SW5mby5hY2Nlc3Nfc3VidHlwZTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBoZWFkZXI7XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogMjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgc2Vzc2lvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIGV2ZW50TWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkYXRhVHlwZSkge1xuXHQgIHZhciBkYXRhID0gbnVsbDtcblx0ICBzd2l0Y2ggKGRhdGFUeXBlKSB7XG5cdCAgY2FzZSB1dGlscy5EYXRhVHlwZS5IQUxGX1NFU1NJT046XG5cdCAgICBkYXRhID0gX2J1aWxkSGFsZlNlc3Npb24oKTtcblx0ICAgIGJyZWFrO1xuXHQgIGNhc2UgdXRpbHMuRGF0YVR5cGUuQ0xPU0VfU0VTU0lPTjpcblx0ICAgIGRhdGEgPSBfYnVpbGRDbG9zZVNlc3Npb24oKTtcblx0ICAgIGJyZWFrO1xuXHQgIGNhc2UgdXRpbHMuRGF0YVR5cGUuRUtWOlxuXHQgICAgZGF0YSA9IF9idWlsZEVrdigpO1xuXHQgICAgYnJlYWs7XG5cdCAgZGVmYXVsdDpcblx0ICAgIGJyZWFrO1xuXHQgIH1cblx0ICByZXR1cm4gZGF0YTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9idWlsZEhhbGZTZXNzaW9uKCkge1xuXHQgIHZhciBkYXRhID0gbnVsbDtcblx0ICB2YXIgc2Vzc2lvbiA9IHNlc3Npb25NYW5hZ2VyKCkuY2xvbmVDdXJyZW50U2Vzc2lvbigpO1xuXHQgIGlmIChzZXNzaW9uKSB7XG5cdCAgICBkYXRhID0ge1xuXHQgICAgICBoZWFkZXI6IHtcblx0ICAgICAgICBzdDogJzEnXG5cdCAgICAgIH0sXG5cdCAgICAgIGFuYWx5dGljczoge1xuXHQgICAgICAgIHNlc3Npb25zOiBbc2Vzc2lvbl1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBkYXRhO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX2J1aWxkQ2xvc2VTZXNzaW9uKCkge1xuXHQgIHZhciBkYXRhID0gbnVsbDtcblx0XG5cdCAgdmFyIGFuYWx5dGljcyA9IHt9O1xuXHRcblx0ICB2YXIgc2Vzc2lvbiA9IHNlc3Npb25NYW5hZ2VyKCkuY2xvbmVDdXJyZW50U2Vzc2lvbigpO1xuXHQgIGlmIChzZXNzaW9uKSB7XG5cdCAgICBhbmFseXRpY3Muc2Vzc2lvbnMgPSBbc2Vzc2lvbl07XG5cdCAgfVxuXHRcblx0ICB2YXIgZWt2cyA9IGV2ZW50TWFuYWdlcigpLmdldEVrdnMoKTtcblx0ICBpZiAoZWt2cykge1xuXHQgICAgYW5hbHl0aWNzLmVrdnMgPSBjbG9uZURlZXAoZWt2cyk7XG5cdCAgICBldmVudE1hbmFnZXIoKS5jbGVhcigpO1xuXHQgIH1cblx0XG5cdCAgaWYgKGFuYWx5dGljcy5zZXNzaW9ucyB8fCBhbmFseXRpY3MuZWt2cykge1xuXHQgICAgZGF0YSA9IHtcblx0ICAgICAgYW5hbHl0aWNzOiBhbmFseXRpY3Ncblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGF0YTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9idWlsZEVrdigpIHtcblx0ICB2YXIgZGF0YSA9IG51bGw7XG5cdFxuXHQgIHZhciBla3ZzID0gZXZlbnRNYW5hZ2VyKCkuZ2V0RWt2cygpO1xuXHQgIGlmIChla3ZzKSB7XG5cdCAgICBkYXRhID0ge1xuXHQgICAgICBhbmFseXRpY3M6IHtcblx0ICAgICAgICBla3ZzOiBjbG9uZURlZXAoZWt2cylcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIGV2ZW50TWFuYWdlcigpLmNsZWFyKCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGF0YTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDIyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciBtYW5nbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0dmFyIGltcHJpbnRNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgYmFzZTY0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHRmdW5jdGlvbiBnZXRVcmwoKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgIHZhciByaG9zdCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1yaG9zdC12Jyk7XG5cdCAgdmFyIGxvZ0RvbWFpbiA9IG1pbmkuZ2V0TG9nRG9tYWluKCk7XG5cdCAgaWYgKCFyaG9zdCB8fCAhbG9nRG9tYWluKSB7IFxuXHQgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICBtc2c6ICdjdXJyZW50IHJlcXVlc3QgZG9tYWluIGludmFsaWQsIHBsZWFzZSBjaGVjayB5b3VyIGFwbHVzLXJob3N0LXYgdmFsdWUgaW5zaWRlIG1ldGFpbmZvISdcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuICcnO1xuXHQgIH1cblx0ICB2YXIgdXJsID0gWycvLycsIHJob3N0LCBsb2dEb21haW5dLmpvaW4oJycpO1xuXHQgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuXHQgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuXHQgIH1cblx0ICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICByZXR1cm4gdXJsO1xuXHR9O1xuXHRcblx0dmFyIE1BWF9SRVFVRVNUX1RJTUVPVVQgPSA1MDAwO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXF1ZXN0KGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbENhbGxiYWNrLCBjb21wbGV0ZWRDYWxsYmFjaykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICB2YXIgcF9oZWFkZXIgPSBIZWFkZXIuZ2V0SGVhZGVySW5mbygpO1xuXHQgIGlmIChtaW5pLmdldFBsYXRmb3JtVHlwZSgpID09PSAnbXknIHx8IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCkgPT09ICd0YW9iYW8nKSB7XG5cdCAgICBwX2hlYWRlclsnaWRfdHlwZSddID0gJ2FsaXBheV9pZCc7XG5cdCAgICBwX2hlYWRlclsnaWRfdHJhY2tpbmcnXSA9IHtcblx0ICAgICAgYWxpcGF5X2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8ICcnLFxuXHQgICAgICB1bmlvbmlkOiBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpIHx8ICcnLFxuXHQgICAgICB1c2VySWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSB8fCAnJyxcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHBfaGVhZGVyWydpZF90eXBlJ10gPSAnb3BlbmlkJztcblx0ICAgIHBfaGVhZGVyWydpZF90cmFja2luZyddID0ge1xuXHQgICAgICBvcGVuaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCkgfHwgJycsXG5cdCAgICAgIHVuaW9uaWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfZGV2X2lkJykgfHwgJycsXG5cdCAgICAgIHVzZXJJZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpIHx8ICcnLFxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGlmIChpbXByaW50TWFuYWdlci5nZXQoKSkge1xuXHQgICAgcF9oZWFkZXJbYXBsdXNTdGF0aWMuSU1QUklOVF0gPSBpbXByaW50TWFuYWdlci5nZXQoKTtcblx0ICB9XG5cdFxuXHQgIGlmIChkYXRhLmFuYWx5dGljcykge1xuXHQgICAgdmFyIHVzZXJJZCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKTtcblx0ICAgIHZhciB1c2VyX25pY2sgPSBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpO1xuXHQgICAgZGF0YS5hbmFseXRpY3MuYWN0aXZlX3VzZXIgPSB7XG5cdCAgICAgIHB1aWQ6IHVzZXJJZCxcblx0ICAgICAgcHJvdmlkZXI6IHVzZXJfbmlja1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGRhdGEuaGVhZGVyID0gdXRpbHMuYXNzaWduKHBfaGVhZGVyLCBkYXRhLmhlYWRlciwge1xuXHQgICAgdHM6IERhdGUubm93KCksXG5cdCAgICB0cmFjZUlkOiB1dGlscy5nZXRSYW5kb21TdHIoMTApICsgRGF0ZS5ub3coKSArIHV0aWxzLmdldFJhbmRvbVN0cig5KVxuXHQgIH0pO1xuXHQgIHZhciBtYW5nbGVEYXRhID0gbWFuZ2xlKGRhdGEpO1xuXHQgIHZhciByZXF1ZXN0RGF0YSA9IGpzb25VdGlsLnN0cmluZ2Z5KG1hbmdsZURhdGEpO1xuXHQgIHZhciB1cmwgPSBnZXRVcmwoKTtcblx0ICB2YXIgY29uZmlnID0ge1xuXHQgICAgdXJsOiB1cmwsXG5cdCAgICBtZXRob2Q6ICdQT1NUJyxcblx0ICAgIGRhdGE6IGJhc2U2NC5lbmNvZGUocmVxdWVzdERhdGEpLFxuXHQgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHtcblx0ICAgICAgdmFyIHN0YXR1c0NvZGUgPSByZXNwLmNvZGUgfHwgcmVzcC5zdGF0dXMgfHwgcmVzcC5zdGF0dXNDb2RlO1xuXHQgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gMjAwIHx8IHN0YXR1c0NvZGUgPT09IDQxMykge1xuXHQgICAgICAgIHVsb2coKS5pKCfmlbDmja7lj5HpgIHmiJDlip86ICcsIGRhdGEsIHJlcXVlc3REYXRhKTtcblx0XG5cdCAgICAgICAgLy8g5Zyo5q2k5aSE5bCGaW1wcmludOWGheWuueWKoOWFpeWIsOacrOWcsOe8k+WtmOS4rVxuXHQgICAgICAgIHNhdmVJbXByaW50KChyZXNwLmRhdGEgfHwge30pLmltcHJpbnQpO1xuXHQgICAgICAgIGlzRnVuY3Rpb24oc3VjY2Vzc0NhbGxiYWNrKSAmJiBzdWNjZXNzQ2FsbGJhY2socmVzcCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdWxvZygpLncoJ+aVsOaNruWPkemAgeWksei0pTogJywgcmVxdWVzdERhdGEpO1xuXHQgICAgICAgIGlzRnVuY3Rpb24oZmFpbENhbGxiYWNrKSAmJiBmYWlsQ2FsbGJhY2soKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGZhaWw6IGZ1bmN0aW9uIChpc1RpbWVvdXQpIHtcblx0ICAgICAgdWxvZygpLncoIHRydWUgPyAn6LaF5pe2OiAnIDogJ+Wksei0pTogJywgcmVxdWVzdERhdGEpO1xuXHQgICAgICBpc0Z1bmN0aW9uKGZhaWxDYWxsYmFjaykgJiYgZmFpbENhbGxiYWNrKCk7XG5cdCAgICB9LFxuXHQgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaXNGdW5jdGlvbihjb21wbGV0ZWRDYWxsYmFjaykgJiYgY29tcGxldGVkQ2FsbGJhY2soKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBzZGtSZXF1ZXN0KHV0aWxzLmFzc2lnbihjb25maWcsIGJ1aWxkSHR0cEhlYWRlcigpKSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZGtSZXF1ZXN0KG9wdGlvbnMpIHtcblx0ICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIHNyY1N1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cdCAgdmFyIHNyY0ZhaWwgPSBvcHRpb25zLmZhaWw7XG5cdCAgdmFyIGlzVGltZW91dCA9IGZhbHNlO1xuXHQgIHZhciBzdCA9IG51bGw7XG5cdFxuXHQgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uIChyZXNwKSB7XG5cdCAgICBpZiAoIWlzVGltZW91dCkge1xuXHQgICAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuXHQgICAgICBpc0Z1bmN0aW9uKHNyY1N1Y2Nlc3MpICYmIHNyY1N1Y2Nlc3MocmVzcCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgb3B0aW9ucy5mYWlsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFpc1RpbWVvdXQpIHtcblx0ICAgICAgc3QgJiYgY2xlYXJUaW1lb3V0KHN0KTtcblx0ICAgICAgaXNGdW5jdGlvbihzcmNGYWlsKSAmJiBzcmNGYWlsKGZhbHNlKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHRyeSB7XG5cdCAgICBjdHgucmVxdWVzdChvcHRpb25zKTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGRkICYmIGRkLmh0dHBSZXF1ZXN0KG9wdGlvbnMpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB1bG9nKCkudygn6K+35rGC5Y+R6YCB5aSx6LSlOiAnLCBlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHN0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuXHQgICAgaXNUaW1lb3V0ID0gdHJ1ZTtcblx0XG5cdCAgICBpc0Z1bmN0aW9uKHNyY0ZhaWwpICYmIHNyY0ZhaWwoaXNUaW1lb3V0KTtcblx0ICB9LCBvcHRpb25zLnRpbWVvdXQgfHwgTUFYX1JFUVVFU1RfVElNRU9VVCk7XG5cdH1cblx0XG5cdC8vIOacjeWKoeerr+S4i+WPkeWPkemAgeetlueVpVxuXHRmdW5jdGlvbiBzYXZlSW1wcmludChpbXByaW50KSB7XG5cdCAgaWYgKGltcHJpbnQpIHtcblx0ICAgIGltcHJpbnRNYW5hZ2VyLnNldChpbXByaW50KTtcblx0ICAgIGltcHJpbnRNYW5hZ2VyLnNhdmUoKTtcblx0XG5cdCAgICB1bG9nKCkudignaW1wcmludDogJywgaW1wcmludE1hbmFnZXIuZ2V0SW1wT2JqKCkpO1xuXHRcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJ1aWxkSHR0cEhlYWRlcigpIHtcblx0ICB2YXIgaGVhZGVyVHlwZSA9IG1pbmkuZ2V0U2RrVHlwZSgpICsgJy9qc29uJztcblx0ICB2YXIgaXNNeSA9IGZhbHNlO1xuXHQgIHRyeSB7XG5cdCAgICBpZiAobXkpIHtcblx0ICAgICAgaXNNeSA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKXt9O1xuXHRcblx0ICBpZiAoaXNNeSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaGVhZGVyczoge1xuXHQgICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuXHQgICAgICAgICdNc2ctVHlwZSc6IGhlYWRlclR5cGVcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaGVhZGVyOiB7XG5cdCAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IGhlYWRlclR5cGUsXG5cdCAgICAgICAgJ01zZy1UeXBlJzogaGVhZGVyVHlwZVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0XG5cblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBhbmFseXRpY3NNYXAgPSB7XG5cdCAgc2Vzc2lvbnM6ICdzbicsXG5cdCAgLy8gcGFnZXM6ICdwJyxcblx0ICAvLyBzaGFyZXM6ICdzcicsXG5cdCAgZWt2czogJ2UnLFxuXHQgIGFjdGl2ZV91c2VyOiAnYWN0aXZlX3VzZXInXG5cdH07XG5cdFxuXHR2YXIgaGVhZGVyTWFwID0ge1xuXHQgIHNka190eXBlOiAnc2R0Jyxcblx0ICBhY2Nlc3M6ICdhYycsXG5cdCAgYWNjZXNzX3N1YnR5cGU6ICdhY3MnLFxuXHQgIGRldmljZV9tb2RlbDogJ2RtJyxcblx0ICBsYW5ndWFnZTogJ2xhbmcnLFxuXHQgIGRldmljZV90eXBlOiAnZHQnLFxuXHQgIGRldmljZV9tYW51ZmFjdHVyZXI6ICdkbWYnLFxuXHQgIGRldmljZV9uYW1lOiAnZG4nLFxuXHQgIHBsYXRmb3JtX3ZlcnNpb246ICdwdicsXG5cdCAgaWRfdHlwZTogJ2l0Jyxcblx0ICBmb250X3NpemVfc2V0dGluZzogJ2ZzcycsXG5cdCAgb3NfdmVyc2lvbjogJ292Jyxcblx0ICBkZXZpY2VfbWFudWlkOiAnZGlkJyxcblx0ICBwbGF0Zm9ybV9zZGtfdmVyc2lvbjogJ3BzdicsXG5cdCAgZGV2aWNlX2JyYW5kOiAnZGInLFxuXHQgIGFwcGtleTogJ2FrJyxcblx0ICBfaWQ6ICdpZCcsXG5cdCAgaWRfdHJhY2tpbmc6ICdpdHInLFxuXHQgIGltcHJpbnQ6ICdpbXAnLFxuXHQgIHNka192ZXJzaW9uOiAnc3YnLFxuXHQgIHJlc29sdXRpb246ICdybCcsXG5cdCAgdGVzdFRva2VuOiAndHRuJyxcblx0ICBtaW5pYXBwRGVidWdJZDogJ2RrJyxcblx0ICAvLyB0aGVtZTogJ3Q1Jyxcblx0ICAvLyBiZW5jaG1hcmtfbGV2ZWw6ICdibWwnLFxuXHQgIC8vIHNjcmVlbl93aWR0aDogJ3N3Jyxcblx0ICAvLyBzY3JlZW5faGVpZ2h0OiAnc2gnLFxuXHQgIC8vIHN0YXR1c19iYXJfaGVpZ2h0OidzYmgnLFxuXHQgIC8vIHNhZmVfYXJlYV90b3A6ICdzYXQnLFxuXHQgIC8vIHNhZmVfYXJlYV9sZWZ0OiAnc2FsJyxcblx0ICAvLyBzYWZlX2FyZWFfcmlnaHQ6ICdzYXInLFxuXHQgIC8vIHNhZmVfYXJlYV9ib3R0b206ICdzYWInLFxuXHQgIC8vIHNhZmVfYXJlYV9oZWlnaHQ6ICdzYWgnLFxuXHQgIC8vIHNhZmVfYXJlYV93aWR0aDogJ3NhdycsXG5cdCAgcGl4ZWxfcmF0aW86ICdwcicsXG5cdCAgLy8gc3RvcmFnZTogJ3M3Jyxcblx0ICAvLyBob3N0OiAnaHMnXG5cdH07XG5cdFxuXHR2YXIgaWRNYXAgPSB7XG5cdCAgdXVpZDogJ3VkJyxcblx0ICB1bmlvbmlkOiAndW5kJyxcblx0ICBvcGVuaWQ6ICdvZCcsXG5cdCAgYW5vbnltb3VzaWQ6ICduZCcsXG5cdCAgYWxpcGF5X2lkOiAnYWQnLFxuXHQgIGRldmljZV9pZDogJ2RkJyxcblx0ICB1c2VyaWQ6ICdwdWlkJ1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGg6IF9tYW5nbGVIZWFkZXIoZGF0YS5oZWFkZXIsIGhlYWRlck1hcCksXG5cdCAgICBhOiBfbWFuZ2xlQW5hbHl0aWNzKGRhdGEuYW5hbHl0aWNzLCBhbmFseXRpY3NNYXApXG5cdCAgfTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9tYW5nbGVIZWFkZXIoaGVhZGVyLCBtYXApIHtcblx0ICB2YXIgcmVzdWx0ID0gX21hbmdsZU9iaihoZWFkZXIsIG1hcCk7XG5cdFxuXHQgIGlmIChoZWFkZXIgJiYgaGVhZGVyLmlkX3RyYWNraW5nKSB7XG5cdCAgICByZXN1bHRbbWFwLmlkX3RyYWNraW5nIHx8ICdpZF90cmFja2luZyddID0gX21hbmdsZU9iaihoZWFkZXIuaWRfdHJhY2tpbmcsIGlkTWFwKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfbWFuZ2xlT2JqKG9iaiwgbWFwKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHRcblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICBpZiAobWFwW2tleV0pIHtcblx0ICAgICAgcmVzdWx0W21hcFtrZXldXSA9IG9ialtrZXldO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfbWFuZ2xlQW5hbHl0aWNzKGFuYWx5dGljcywgbWFwKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHRcblx0ICBpZiAoYW5hbHl0aWNzKSB7XG5cdCAgICBmb3IgKHZhciBwcm9wIGluIGFuYWx5dGljcykge1xuXHQgICAgICBpZiAoYW5hbHl0aWNzW3Byb3BdKSB7XG5cdCAgICAgICAgcmVzdWx0W21hcFtwcm9wXV0gPSBhbmFseXRpY3NbcHJvcF07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIganNvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0ZnVuY3Rpb24gSW1wcmludE1hbmFnZXIoKSB7XG5cdCAgdmFyIF9pbXByaW50ID0gJyc7XG5cdCAgdmFyIHQgPSB0aGlzO1xuXHQgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGltcHJpbnQpIHtcblx0ICAgIF9pbXByaW50ID0gaW1wcmludDtcblx0ICB9O1xuXHRcblx0ICB0aGlzLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBfaW1wcmludDtcblx0ICB9O1xuXHQgIHRoaXMuZ2V0SW1wT2JqID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGpzb25VdGlsLnBhcnNlKGJhc2U2NC5kZWNvZGUoX2ltcHJpbnQpKTtcblx0ICB9O1xuXHQgIHRoaXMuZ2V0SXRlbSA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHZhciBpbXBvYmogPSB0LmdldEltcE9iaigpO1xuXHQgICAgcmV0dXJuIGltcG9iaiA/IGltcG9ialtuYW1lXSB8fCBcIlwiIDogXCJcIjtcblx0ICB9O1xuXHRcblx0ICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBfaW1wcmludCA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChfaW1wcmludCkge1xuXHQgICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5JTVBSSU5ULCBfaW1wcmludCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHR2YXIgaW1wcmludE1hbmFnZXIgPSBuZXcgSW1wcmludE1hbmFnZXIoKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaW1wcmludE1hbmFnZXI7XG5cbi8qKiovIH0pLFxuLyogMjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHR2YXIgYjY0Y2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cdHZhciBiNjR0YWIgPSAoZnVuY3Rpb24gKGJpbikge1xuXHQgIHZhciB0ID0ge307XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBiaW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB0W2Jpbi5jaGFyQXQoaSldID0gaTtcblx0ICByZXR1cm4gdDtcblx0fSkoYjY0Y2hhcnMpO1xuXHR2YXIgZnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcblx0dmFyIGNiX3V0b2IgPSBmdW5jdGlvbiAoYykge1xuXHQgIHZhciBjYztcblx0ICBpZiAoYy5sZW5ndGggPCAyKSB7XG5cdCAgICBjYyA9IGMuY2hhckNvZGVBdCgwKTtcblx0ICAgIHJldHVybiBjYyA8IDEyOCA/IGMgOiBjYyA8IDIwNDggPyBmcm9tQ2hhckNvZGUoMTkyIHwgY2MgPj4+IDYpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpIDogZnJvbUNoYXJDb2RlKDIyNCB8IGNjID4+PiAxMiAmIDE1KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gNiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgY2MgPSA2NTUzNiArIChjLmNoYXJDb2RlQXQoMCkgLSA1NTI5NikgKiAxMDI0ICsgKGMuY2hhckNvZGVBdCgxKSAtIDU2MzIwKTtcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoMjQwIHwgY2MgPj4+IDE4ICYgNykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDEyICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiA2ICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpO1xuXHQgIH1cblx0fTtcblx0dmFyIHJlX3V0b2IgPSAvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGRl18W15cXHgwMC1cXHg3Rl0vZztcblx0dmFyIHV0b2IgPSBmdW5jdGlvbiAodSkge1xuXHQgIHJldHVybiB1LnJlcGxhY2UocmVfdXRvYiwgY2JfdXRvYik7XG5cdH07XG5cdHZhciBjYl9lbmNvZGUgPSBmdW5jdGlvbiAoY2NjKSB7XG5cdCAgdmFyIHBhZGxlbiA9IFswLCAyLCAxXVtjY2MubGVuZ3RoICUgM10sXG5cdCAgICBvcmQgPSBjY2MuY2hhckNvZGVBdCgwKSA8PCAxNiB8IChjY2MubGVuZ3RoID4gMSA/IGNjYy5jaGFyQ29kZUF0KDEpIDogMCkgPDwgOCB8IChjY2MubGVuZ3RoID4gMiA/IGNjYy5jaGFyQ29kZUF0KDIpIDogMCksXG5cdCAgICBjaGFycyA9IFtiNjRjaGFycy5jaGFyQXQob3JkID4+PiAxOCksIGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDEyICYgNjMpLCBwYWRsZW4gPj0gMiA/ICc9JyA6IGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDYgJiA2MyksIHBhZGxlbiA+PSAxID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCAmIDYzKV07XG5cdCAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xuXHR9O1xuXHR2YXIgYnRvYSA9IGZ1bmN0aW9uIChiKSB7XG5cdCAgcmV0dXJuIGIucmVwbGFjZSgvW1xcc1xcU117MSwzfS9nLCBjYl9lbmNvZGUpO1xuXHR9O1xuXHR2YXIgX2VuY29kZSA9IGZ1bmN0aW9uICh1KSB7XG5cdCAgcmV0dXJuIGJ0b2EodXRvYih1KSk7XG5cdH07XG5cdHZhciBlbmNvZGUgPSBmdW5jdGlvbiAodSwgdXJpc2FmZSkge1xuXHQgIHJldHVybiAhdXJpc2FmZSA/IF9lbmNvZGUoU3RyaW5nKHUpKSA6IF9lbmNvZGUoU3RyaW5nKHUpKS5yZXBsYWNlKC9bK1xcL10vZywgZnVuY3Rpb24gKG0wKSB7XG5cdCAgICByZXR1cm4gbTAgPT0gJysnID8gJy0nIDogJ18nO1xuXHQgIH0pLnJlcGxhY2UoL1xcPS9nLCAnJyk7XG5cdH07XG5cdC8vIHZhciBlbmNvZGVVUkkgPSBmdW5jdGlvbiAodSkge1xuXHQvLyAgIHJldHVybiBlbmNvZGUodSwgdHJ1ZSk7XG5cdC8vIH07XG5cdHZhciByZV9idG91ID0gbmV3IFJlZ0V4cChbJ1vDgC3Dn11bwoAtwr9dJywgJ1vDoC3Dr11bwoAtwr9dezJ9JywgJ1vDsC3Dt11bwoAtwr9dezN9J10uam9pbignfCcpLCAnZycpO1xuXHR2YXIgY2JfYnRvdSA9IGZ1bmN0aW9uIChjY2NjKSB7XG5cdCAgc3dpdGNoIChjY2NjLmxlbmd0aCkge1xuXHQgIGNhc2UgNDpcblx0ICAgIHZhciBjcCA9ICg3ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxOCB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMikpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgzKSwgb2Zmc2V0ID0gY3AgLSA2NTUzNjtcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKG9mZnNldCA+Pj4gMTApICsgNTUyOTYpICsgZnJvbUNoYXJDb2RlKChvZmZzZXQgJiAxMDIzKSArIDU2MzIwKTtcblx0ICBjYXNlIDM6XG5cdCAgICByZXR1cm4gZnJvbUNoYXJDb2RlKCgxNSAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSk7XG5cdCAgZGVmYXVsdDpcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDMxICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpO1xuXHQgIH1cblx0fTtcblx0dmFyIGJ0b3UgPSBmdW5jdGlvbiAoYikge1xuXHQgIHJldHVybiBiLnJlcGxhY2UocmVfYnRvdSwgY2JfYnRvdSk7XG5cdH07XG5cdHZhciBjYl9kZWNvZGUgPSBmdW5jdGlvbiAoY2NjYykge1xuXHQgIHZhciBsZW4gPSBjY2NjLmxlbmd0aCxcblx0ICAgIHBhZGxlbiA9IGxlbiAlIDQsXG5cdCAgICBuID0gKGxlbiA+IDAgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMCldIDw8IDE4IDogMCkgfCAobGVuID4gMSA/IGI2NHRhYltjY2NjLmNoYXJBdCgxKV0gPDwgMTIgOiAwKSB8IChsZW4gPiAyID8gYjY0dGFiW2NjY2MuY2hhckF0KDIpXSA8PCA2IDogMCkgfCAobGVuID4gMyA/IGI2NHRhYltjY2NjLmNoYXJBdCgzKV0gOiAwKSxcblx0ICAgIGNoYXJzID0gW2Zyb21DaGFyQ29kZShuID4+PiAxNiksIGZyb21DaGFyQ29kZShuID4+PiA4ICYgMjU1KSwgZnJvbUNoYXJDb2RlKG4gJiAyNTUpXTtcblx0ICBjaGFycy5sZW5ndGggLT0gWzAsIDAsIDIsIDFdW3BhZGxlbl07XG5cdCAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xuXHR9O1xuXHR2YXIgYXRvYiA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIGEucmVwbGFjZSgvW1xcc1xcU117MSw0fS9nLCBjYl9kZWNvZGUpO1xuXHR9O1xuXHR2YXIgX2RlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIGJ0b3UoYXRvYihhKSk7XG5cdH07XG5cdHZhciBkZWNvZGUgPSBmdW5jdGlvbiAoYSkge1xuXHQgIHJldHVybiBfZGVjb2RlKFN0cmluZyhhKS5yZXBsYWNlKC9bLV9dL2csIGZ1bmN0aW9uIChtMCkge1xuXHQgICAgcmV0dXJuIG0wID09ICctJyA/ICcrJyA6ICcvJztcblx0ICB9KS5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL10vZywgJycpKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZW5jb2RlID0gZW5jb2RlO1xuXHRleHBvcnRzLmRlY29kZSA9IGRlY29kZTtcblxuLyoqKi8gfSksXG4vKiAyNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5pel5b+X57G75bel5YW36ZuG5ZCIXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gbyA6e1xuXHQgKiAgIGxldmVsOiAnd2Fybi9pbmZvL2xvZycgZGVmYXVsdCBpcyB3YXJuXG5cdCAqICAgbXNnOiAnbXNnJ1xuXHQgKiB9XG5cdCAqL1xuXHR2YXIgcHJlZml4ID0gJ1thcGx1cyBsb2ddOiAnO1xuXHRleHBvcnRzLmxvZ2dlciA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgaWYgKCFvKSB7XG5cdCAgICBvID0ge307XG5cdCAgfVxuXHQgIHZhciBsZXZlbCA9IG8ubGV2ZWwgfHwgJ3dhcm4nO1xuXHQgIGNvbnNvbGUgJiYgY29uc29sZVtsZXZlbF0gJiYgY29uc29sZVtsZXZlbF0ocHJlZml4K28ubXNnKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVidWdMb2cgPSBmdW5jdGlvbihvKSB7XG5cdCAgdmFyIGFwbHVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICBpZiAoYXBsdXMgJiYgYXBsdXMuYXBsdXNEZWJ1Zykge1xuXHQgICAgdGhpcy5sb2dnZXIobyk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDI3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obWF4Q291bnQpIHtcblx0ICB2YXIgX21heENvdW50ID0gbWF4Q291bnQ7XG5cdCAgdmFyIF9pdGVtcyA9IFtdO1xuXHRcblx0ICB0aGlzLmVucXVldWUgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgaWYgKHR5cGVvZiBfbWF4Q291bnQgPT09ICdudW1iZXInICYmIHRoaXMuc2l6ZSgpID49IF9tYXhDb3VudCkge1xuXHQgICAgICB0aGlzLmRlcXVldWUoKTtcblx0ICAgIH1cblx0XG5cdCAgICBfaXRlbXMucHVzaChpdGVtKTtcblx0ICB9O1xuXHRcblx0ICB0aGlzLmRlcXVldWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gX2l0ZW1zLnNoaWZ0KCk7XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5mcm9udCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBfaXRlbXNbMF07XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIF9pdGVtcy5sZW5ndGggPT09IDA7XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIF9pdGVtcy5sZW5ndGggPSAwO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuc2l6ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBfaXRlbXMubGVuZ3RoO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gX2l0ZW1zO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMucHJpbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB1bG9nKCkudignLS0tcXVldWU6ICcsIF9pdGVtcy50b1N0cmluZygpKTtcblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDI4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdFxuXHQvKipcblx0ICog55Sf5oiQ5LiA5Liq55So5LqO6YG/5YWN57yT5a2Y55qE6ZqP5py65pWwXG5cdCAqIOS4uuS6huWHj+WwkSB1cmwg6ZW/5bqm77yM6L+Z5Liq6ZqP5py65pWw5o2u55qE6ZW/5bqm5a6a5Li6IDcg5L2N77yMXG5cdCAqIOS4uuS6huWHj+WwkeeisOaSnu+8jOS9v+eUqCAxNiDov5vliLbmlbDlrZdcblx0ICpcblx0ICogMjY4NDM1NDU2ID0gMiBeIDI4ID0gMHhmZmZmZmZmICsgMVxuXHQgKi9cblx0ZXhwb3J0cy5tYWtlQ2FjaGVOdW0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI2ODQzNTQ1NikudG9TdHJpbmcoMTYpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbku6XlrZfnrKbkuLIgczIg5byA5aS0XG5cdCAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuXHQgKiBAcGFyYW0gczIge1N0cmluZ31cblx0ICovXG5cdGV4cG9ydHMuaXNTdGFydFdpdGggPSBmdW5jdGlvbihzMSwgczIpIHtcblx0ICByZXR1cm4gczEuaW5kZXhPZihzMikgPT09IDA7XG5cdH07XG5cdC8qKlxuXHQgKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5rue5Lul5a2X56ym5LiyIHMyIOe7k+WwvlxuXHQgKiBAcGFyYW0gczEge1N0cmluZ31cblx0ICogQHBhcmFtIHMyIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLmlzRW5kV2l0aCA9IGZ1bmN0aW9uKHMxLCBzMikge1xuXHQgIHZhciBsMSA9IHMxLmxlbmd0aCwgbDIgPSBzMi5sZW5ndGg7XG5cdCAgcmV0dXJuIGwxID49IGwyICYmIHMxLmluZGV4T2YoczIpID09IChsMSAtIGwyKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuYW55ID0gZnVuY3Rpb24oYXJyLCBmbikge1xuXHQgIHZhciBpO1xuXHQgIHZhciBsID0gYXJyLmxlbmd0aDtcblx0ICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpZiAoZm4oYXJyW2ldKSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pc051bWJlciA9IGZ1bmN0aW9uKHYpIHtcblx0ICByZXR1cm4gdHlwZW9mIHYgPT09ICdudW1iZXInO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pc05hTiA9IGZ1bmN0aW9uKHYpIHtcblx0ICBpZihpc05hTikge1xuXHQgICAgcmV0dXJuIGlzTmFOKHYpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gdiAhPT0gdjtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+WQpuWMheWQq+Wtl+espuS4siBzMlxuXHQgKiBAcGFyYW0gczEge1N0cmluZ31cblx0ICogQHBhcmFtIHMyIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLmlzQ29udGFpbiA9IGZ1bmN0aW9uIChzMSwgczIpIHtcblx0ICByZXR1cm4gczEuaW5kZXhPZihzMikgPiAtMTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDlhYvpmobkuIDkuKpvYmplY3Rcblx0ICovXG5cdHZhciBjbG9uZURlZXAgPSBmdW5jdGlvbihvYmopIHtcblx0ICB2YXIgc3RyO1xuXHQgIHZhciBuZXdvYmogPSBvYmouY29uc3RydWN0b3IgPT09IEFycmF5ID8gW10gOiB7fTtcblx0ICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9IGVsc2UgaWYgKEpTT04gJiYgSlNPTi5wYXJzZSkge1xuXHQgICAgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTsgLy/ns7vliJfljJblr7nosaFcblx0ICAgIG5ld29iaiA9IEpTT04ucGFyc2Uoc3RyKTsgLy/ov5jljp9cblx0ICB9IGVsc2Uge1xuXHQgICAgZm9yICh2YXIgaSBpbiBvYmopIHtcblx0ICAgICAgbmV3b2JqW2ldID0gdHlwZW9mIG9ialtpXSA9PT0gJ29iamVjdCcgPyBjbG9uZURlZXAob2JqW2ldKSA6IG9ialtpXTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG5ld29iajtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2xvbmVEZWVwID0gY2xvbmVEZWVwO1xuXG5cbi8qKiovIH0pLFxuLyogMjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcblx0LyoqXG5cdCAqIOWvueixoW1lcmdlXG5cdCAqICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0YXJnZXRPYmosIGFyZ3NPYmopIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgICAgIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuXHQgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcblx0ICAgICAgICBpZiAobmV4dFNvdXJjZSAhPT0gbnVsbCkgeyAvLyBTa2lwIG92ZXIgaWYgdW5kZWZpbmVkIG9yIG51bGxcblx0ICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gbmV4dFNvdXJjZSkge1xuXHQgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG5leHRTb3VyY2UsIG5leHRLZXkpKSB7XG5cdCAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0bztcblx0ICAgIH0odGFyZ2V0T2JqLCBhcmdzT2JqKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRhcmdldE9iaiwgYXJnc09iaik7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDMwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBjdXJyZW50UGF0aCA9IFwiXCI7XG5cdHZhciBwYWdlT3B0aW9uTWFwID0ge307XG5cdFxuXHRmdW5jdGlvbiBidWlsZFBhdGgocGF0aCwgcXVlcnkpIHtcblx0ICBpZiAoIXBhdGgpIHtcblx0ICAgIHJldHVybiBcIlwiO1xuXHQgIH1cblx0ICB2YXIgcXMgPSBbXTtcblx0ICBmb3IgKHZhciBxIGluIHF1ZXJ5KSB7XG5cdCAgICBxcy5wdXNoKHEgKyAnPScgKyBxdWVyeVtxXSk7XG5cdCAgfVxuXHQgIHZhciBxc3MgPSBxcy5qb2luKCcmJyk7XG5cdCAgcmV0dXJuIHFzcyA/IHBhdGggKyAnPycgKyBxc3MgOiBwYXRoO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRDdXJyZW50UGFnZVBhdGggPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gY3VycmVudFBhdGg7XG5cdH07XG5cdFxuXHRleHBvcnRzLnNldEN1cnJlbnRQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICBjdXJyZW50UGF0aCA9IHBhdGg7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRQYWdlUXVlcnkgPSBmdW5jdGlvbihwYXRoKSB7XG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIHJldHVybiBwYWdlT3B0aW9uTWFwW3BhdGhdO1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuc2V0UGFnZVF1ZXJ5ID0gZnVuY3Rpb24ocGF0aCwgcXVlcnkpIHtcblx0ICBpZiAocGF0aCkge1xuXHQgICAgcGFnZU9wdGlvbk1hcFtwYXRoXSA9IHF1ZXJ5O1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0RnVsbFBhdGggPSBmdW5jdGlvbihwYXRoKSB7XG5cdCAgcmV0dXJuIGJ1aWxkUGF0aChjdXJyZW50UGF0aCwgcGFnZU9wdGlvbk1hcFtwYXRoXSk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFBhZ2VOYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBtZXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BhZ2VDb25maWcnKTtcblx0ICB2YXIgcmVhbFBhdGggPSBwYXRoIHx8IGN1cnJlbnRQYXRoO1xuXHQgIHRyeSB7XG5cdCAgICAvLyDlr7nkuo7liqjmgIHot6/nlLHvvIzmlK/mjIHnlKjmiLfkvKDlhaXmraPliJnov5vooYzljLnphY1cblx0ICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09ICdvYmplY3QnKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhKSB7XG5cdCAgICAgICAgaWYgKGtleSA9PT0gcmVhbFBhdGgpIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH0gZWxzZSBpZiAobWV0YVtrZXldICYmIG1ldGFba2V5XS5yZWdSdWxlKSB7XG5cdCAgICAgICAgICByZWFsUGF0aCA9IG1ldGFba2V5XS5yZWdSdWxlLnRlc3QocGF0aCkgPyBrZXkgOiByZWFsUGF0aDtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvL1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgLy9cblx0ICB9XG5cdCAgcmV0dXJuIG1ldGFbcmVhbFBhdGhdO1xuXHQgIC8vIGlmICghcGF0aCkge1xuXHQgIC8vICAgcmV0dXJuIG1ldGEgJiYgbWV0YVtjdXJyZW50UGF0aF07XG5cdCAgLy8gfSBlbHNlIHtcblx0ICAvLyAgIHJldHVybiBtZXRhICYmIG1ldGFbcGF0aF07XG5cdCAgLy8gfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRQYWdlQ29kZSA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICByZXR1cm4gKHRoaXMuZ2V0UGFnZU5hbWUocGF0aCkgfHwge30pLnBhZ2VOYW1lO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRWVFJlYWx0aW1lQ29kZSA9IGZ1bmN0aW9uKCkge1xuXHQgIGlmIChjdXJyZW50UGF0aCkge1xuXHQgICAgdmFyIHF1ZXJ5ID0gcGFnZU9wdGlvbk1hcFtjdXJyZW50UGF0aF0gfHwge307XG5cdCAgICB2YXIgcmVnRXhwID0gL15cXCR2dF8vO1xuXHQgICAgdmFyIHNjZW5lID0gZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5LnNjZW5lKTtcblx0ICAgIHJldHVybiBzY2VuZSAmJiByZWdFeHAudGVzdChzY2VuZSkgJiYgc2NlbmUucmVwbGFjZShyZWdFeHAsICcnKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvYXBsdXNfcGx1Z2luX21pbmkvbGliX2F1dG9fY29sbGVjdC9pbmplY3RfcGFnZS5qc1xuXHQgKiDoh6rliqjph4fpm4blsI/nqIvluo/kv6Hmga/nmoTmj5Lku7YgLSDpobXpnaLms6jlhaVcblx0ICpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdHZhciB1bVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIFBhZ2VNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdGZ1bmN0aW9uIGhhbmRsZXJTaGFyZUFwcE1zZyAob3B0LCBuYW1lKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgcGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICB2YXIgcm91dGUgPSBwYWdlLnJvdXRlIHx8IHBhZ2UuaXMgfHwgJyc7XG5cdCAgdmFyIG9wdGlvbnMgPSBwYWdlLm9wdGlvbnMgfHwge307XG5cdCAgdmFyIGxpbmtQYXJtYXMgPSBmb3JtYXQub2JqMnBhcmFtKG9wdGlvbnMsIHRydWUpO1xuXHQgIC8vIOaLvOaOpWN1cnJlbnRQYWdl55qEdXJs5LiOcXVlcnlcblx0ICBpZihsaW5rUGFybWFzKSB7XG5cdCAgICByb3V0ZSA9IHJvdXRlICsgJz8nICsgbGlua1Bhcm1hcztcblx0ICB9IFxuXHQgIGlmICghb3B0LnF1ZXJ5KSB7XG5cdCAgICBvcHQucXVlcnkgPSB7fTtcblx0ICB9XG5cdCAgb3B0LnF1ZXJ5LiQkX3NoYXJlX3VpZCA9IGN0eC5hcGx1cy5nZXRNZXRhSW5mbygnX2Fub255X2lkJykgfHwgY3R4LmFwbHVzLl9fRVRBR19fQ05BX19JRF9fO1xuXHQgIG9wdC5xdWVyeS4kJF91dG1fbWVkaXVtID0gMztcblx0XG5cdCAgLy8gb25TaGFyZUFwcE1lc3NhZ2XmsqHmnIlyZXR1cm4g5oiWIG9uU2hhcmVUaW1lbGluZeaXtu+8jOWFpeWPgm9wdOeahHBhdGjkuI5xdWVyeeS4uuepuu+8jOatpOaXtueUqGN1cnJlbnRQYWdl55qEcGF0aOWSjG9wdGlvbnPlhZzlupVcblx0ICBvcHQucXVlcnkgPSB1bVV0aWxzLmFzc2lnbih7fSwgb3B0aW9ucywgb3B0LnF1ZXJ5KTtcblx0ICB2YXIgcGF0aCA9IG9wdC5wYXRoIHx8IHJvdXRlO1xuXHRcblx0ICB2YXIgYXBwZW5kUGFyYW1zID0gJyQkX3NoYXJlX3VpZD0nICsgb3B0LnF1ZXJ5LiQkX3NoYXJlX3VpZCArICcmJCRfdXRtX21lZGl1bT0zJztcblx0IFxuXHQgIGlmIChwYXRoLmluZGV4T2YoJz8nKSA+IC0xKSB7XG5cdCAgICBvcHQucGF0aCA9IHBhdGggKyAnJicgKyBhcHBlbmRQYXJhbXM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9wdC5wYXRoID0gcGF0aCArICc/JyArIGFwcGVuZFBhcmFtcztcblx0ICB9XG5cdCAgb3B0LnN0YXR1cyA9ICdyZWFkeSc7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgYXJndW1lbnRzOiBbbmFtZSwgb3B0XVxuXHQgIH0pO1xuXHQgIHJldHVybiBvcHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblB1bGxEb3duUmVmcmVzaCgpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBvcHQgPSB7XG5cdCAgICBzdGF0dXM6ICdyZWFkeSdcblx0ICB9O1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgIGFyZ3VtZW50czogWydvblB1bGxEb3duUmVmcmVzaCcsIG9wdF1cblx0ICB9KTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIG9uUmVhY2hCb3R0b20oKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgdmFyIG9wdCA9IHtcblx0ICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgIGNvbnRleHQ6IHRoYXRcblx0ICB9O1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgIGFyZ3VtZW50czogWydvblJlYWNoQm90dG9tJywgb3B0XVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0Ly8g6aG16Z2i5Yqg6L29XG5cdGZ1bmN0aW9uIG9uUGFnZUxvYWQocXVlcnkpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7XG5cdCAgICBQYWdlTWFuYWdlci5zZXRDdXJyZW50UGF0aCh0aGlzLnJvdXRlKTtcblx0ICAgIGlmIChxdWVyeSkge1xuXHQgICAgICBQYWdlTWFuYWdlci5zZXRQYWdlUXVlcnkodGhpcy5yb3V0ZSwgcXVlcnkpO1xuXHQgICAgfVxuXHQgICAgdWxvZygpLnYoJ1BhZ2Ugb25Mb2FkOiAnLCB0aGlzLnJvdXRlLCBxdWVyeSk7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uKCl7XG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbJ29uTG9hZCcsIHtcblx0ICAgICAgICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgICAgICAgIGNvbnRleHQ6IHRoYXQsXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIOmhtemdouWKoOi9veWujOWQjua3t+WFpXNldERhdGHvvIzmlrnkvr/oh6rliqjmm53lhYnjgIHoh6rliqjngrnlh7vnrYnmj5Lku7bkvb/nlKhcblx0ICAgICAgdmFyIF9jdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgdXRpbHMucmVzZXRGbihfY3VycmVudFBhZ2UsICdzZXREYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnb25QYWdlRGF0YUNoYW5nZWQnLCB7XG5cdCAgICAgICAgICAgIGRhdGE6IGRhdGEsXG5cdCAgICAgICAgICAgIGNvbnRleHQ6IHRoYXRcblx0ICAgICAgICAgIH1dXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudygnb25QYWdlTG9hZDogJywgZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gb25QYWdlU2hvdygpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7XG5cdCAgICBQYWdlTWFuYWdlci5zZXRDdXJyZW50UGF0aCh0aGlzLnJvdXRlKTtcblx0ICAgIHV0aWxzLm9uQXBsdXNSZWFkeShjdHguYXBsdXNfcXVldWUsIGFwbHVzU3RhdGljLlNVQlNDUklCRSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbJ29uU2hvdycsIHtcblx0ICAgICAgICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgICAgICAgIGNvbnRleHQ6IHRoYXQsXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KCdvblBhZ2VTaG93OiAnLCBlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblBhZ2VSZWFkeSgpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgYXJndW1lbnRzOiBbJ29uUmVhZHknLCB7XG5cdCAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICAgIGNvbnRleHQ6IHRoYXRcblx0ICAgICAgfV1cblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHVsb2coKS53KCdvblBhZ2VSZWFkeTogJywgZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gb25QYWdlSGlkZSgpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7XG5cdCAgICAvLyBUT0RPOiDlj6/op4bljJbphY3nva7mg4XlhrXkuIsg5Y+C5pWw6ZyA6KaB5Y+m5aSW55qE5aSE55CGXG5cdCAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIHtcblx0ICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG5cdCAgICAgIH1dXG5cdCAgICB9KTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KCdvblBhZ2VIaWRlOiAnLCBlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblBhZ2VVbmxvYWQoKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB0cnkge1xuXHQgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICAgIGFyZ3VtZW50czogWydvblVubG9hZCcsIHtcblx0ICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG5cdCAgICAgIH1dXG5cdCAgICB9KTtcblx0ICB9IGNhdGNoKGUpe1xuXHQgICAgdWxvZygpLncoJ29uUGFnZVVubG9hZDogJywgZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gb25BcGx1c0NsayhlKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICBhcmd1bWVudHM6IFsnb25BcGx1c0NsaycsIHtcblx0ICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICBldmVudDogZSxcblx0ICAgICAgY29udGV4dDogdGhpc1xuXHQgICAgfV1cblx0ICB9KTtcblx0fTtcblx0XG5cdC8v6Kem5pG45LqL5Lu2XG5cdGZ1bmN0aW9uIG9uQXBsdXNUb3VjaChlKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgYXJndW1lbnRzOiBbJ29uQXBsdXNUb3VjaCcsIHtcblx0ICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICBjb250ZXh0OiB0aGF0LFxuXHQgICAgICBldmVudDogZSxcblx0ICAgIH1dXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiByZXdyaXRlU2hhcmUob3B0KSB7XG5cdCAgaWYgKG9wdC5vblNoYXJlQXBwTWVzc2FnZSkge1xuXHQgICAgdmFyIG9sZE9uU2hhcmVBcHBNZXNzYWdlID0gb3B0Lm9uU2hhcmVBcHBNZXNzYWdlO1xuXHQgICAgb3B0Lm9uU2hhcmVBcHBNZXNzYWdlID0gZnVuY3Rpb24ocmVzKSB7XG5cdCAgICAgIHZhciBzaGFyZVJlc3VsdCA9IG9sZE9uU2hhcmVBcHBNZXNzYWdlLmNhbGwodGhpcywgcmVzKSB8fCB7fTtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXJTaGFyZUFwcE1zZyhzaGFyZVJlc3VsdCwgJ29uU2hhcmVBcHBNZXNzYWdlJyk7XG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIOWIhuS6q+aci+WPi+WciFxuXHRmdW5jdGlvbiByZXdyaXRlU2hhcmVUaW1lbGluZShvcHQpIHtcblx0ICBpZiAob3B0Lm9uU2hhcmVUaW1lbGluZSkge1xuXHQgICAgdmFyIG9sZE9uU2hhcmVUaW1lbGluZSA9IG9wdC5vblNoYXJlVGltZWxpbmU7XG5cdCAgICBvcHQub25TaGFyZVRpbWVsaW5lID0gZnVuY3Rpb24ocmVzKSB7XG5cdCAgICAgIHZhciBzaGFyZVJlc3VsdCA9IG9sZE9uU2hhcmVUaW1lbGluZS5jYWxsKHRoaXMsIHJlcykgfHwge307XG5cdCAgICAgIHJldHVybiBoYW5kbGVyU2hhcmVBcHBNc2coc2hhcmVSZXN1bHQsICdvblNoYXJlVGltZWxpbmUnKTtcblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaW5qZWN0UGFnZSgpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIG9sZFBhZ2UgPSBQYWdlO1xuXHQgICAgUGFnZSA9IGZ1bmN0aW9uKHBhZ2VPcHRpb25zKSB7XG5cdCAgICAgIHV0aWxzLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uU2hvdycsIG9uUGFnZVNob3cpO1xuXHQgICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkhpZGUnLCBvblBhZ2VIaWRlKTtcblx0ICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25VbmxvYWQnLCBvblBhZ2VVbmxvYWQpO1xuXHQgICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkxvYWQnLCBvblBhZ2VMb2FkKTtcblx0ICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25SZWFkeScsIG9uUGFnZVJlYWR5KTtcblx0ICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25QdWxsRG93blJlZnJlc2gnLCBvblB1bGxEb3duUmVmcmVzaCk7XG5cdCAgICAgIHV0aWxzLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uUmVhY2hCb3R0b20nLCBvblJlYWNoQm90dG9tKTtcblx0ICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25BcGx1c0NsaycsIG9uQXBsdXNDbGspO1xuXHQgICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkFwbHVzVG91Y2gnLCBvbkFwbHVzVG91Y2gpO1xuXHQgICAgICByZXdyaXRlU2hhcmUocGFnZU9wdGlvbnMpO1xuXHQgICAgICByZXdyaXRlU2hhcmVUaW1lbGluZShwYWdlT3B0aW9ucyk7XG5cdCAgICAgIG9sZFBhZ2UocGFnZU9wdGlvbnMpO1xuXHQgICAgfTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KCdQYWdlIOmHjeWGmeW8guW4uCcpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluamVjdENvbXBvbmVudCgpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIG9sZENvbXBvbmVudCA9IENvbXBvbmVudDtcblx0ICAgIENvbXBvbmVudCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBvcHRpb25zLm1ldGhvZHMgPSBvcHRpb25zLm1ldGhvZHMgfHwge307XG5cdCAgICAgICAgdmFyIG1ldGhvZHMgPSBvcHRpb25zLm1ldGhvZHM7XG5cdCAgICAgICAgdXRpbHMucmV3cml0ZUZuKG1ldGhvZHMsICdvblNob3cnLCBvblBhZ2VTaG93KTtcblx0ICAgICAgICB1dGlscy5yZXdyaXRlRm4obWV0aG9kcywgJ29uSGlkZScsIG9uUGFnZUhpZGUpO1xuXHQgICAgICAgIHV0aWxzLnJld3JpdGVGbihtZXRob2RzLCAnb25VbmxvYWQnLCBvblBhZ2VIaWRlKTtcblx0ICAgICAgICB1dGlscy5yZXdyaXRlRm4obWV0aG9kcywgJ29uTG9hZCcsIG9uUGFnZUxvYWQpO1xuXHQgICAgICAgIHJld3JpdGVTaGFyZShtZXRob2RzKTtcblx0ICAgICAgICBvbGRDb21wb25lbnQob3B0aW9ucyk7XG5cdCAgICAgIH0gY2F0Y2godCkge1xuXHQgICAgICAgIG9sZENvbXBvbmVudChvcHRpb25zKTtcblx0ICAgICAgfTtcblx0ICAgIH07XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudygnQ29tcG9uZW50IOmHjeWGmeW8guW4uCcpO1xuXHQgIH1cblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGluamVjdE1pZHdheSAobXBDdHgsIG5hbWUsIGNhbGxiYWNrKSB7XG5cdCAgaWYgKFsnb2JqZWN0JywgJ2Z1bmN0aW9uJ10uaW5kZXhPZih0eXBlb2YgbXBDdHgpID4gLTEpIHtcblx0ICAgIGNhbGxiYWNrKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGNvbnNvbGUubG9nKCd0eXBlb2YgJyArIG5hbWUgKyAnIGlzIG5vdCBvYmplY3QgY2FudCB3YXRjaEV4cC4nKTtcblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaW5qZWN0TWlkd2F5KFBhZ2UsICdQYWdlJywgaW5qZWN0UGFnZSk7XG5cdCAgICAgIGluamVjdE1pZHdheShDb21wb25lbnQsICdDb21wb25lbnQnLCBpbmplY3RDb21wb25lbnQpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy91dGlsL2Zvcm1hdC5qc1xuXHQgKiDlt6Xlhbfnsbtcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyB2YXIgdHJ5VG9EZWNvZGUgPSByZXF1aXJlKCcuL3RyeVRvRGVjb2RlJyk7XG5cdFxuXHRleHBvcnRzLmFycjJvYmogPSBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIHZhciBrO1xuXHQgIHZhciB2O1xuXHQgIHZhciBpO1xuXHQgIHZhciBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgcmV0W2tdID0gdjtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBwYXJhbSB0byBvYmplY3Rcblx0ICog5bCG5LiA5Liq566A5Y2V55qE5b2i5aaCIGE9MSZiPTImYz0zIOi/meagt+eahOWPguaVsOi9rOWMluS4uueugOWNleeahCBvYmplY3Qg5qC85byP77yM5aaC77yaXG5cdCAqIHtcblx0ICogICBhOiBcIjFcIixcblx0ICogICBiOiBcIjJcIixcblx0ICogICBjOiBcIjNcIlxuXHQgKiB9XG5cdCAqIEBwYXJhbSBwYXJhbXMge1N0cmluZ31cblx0ICovXG5cdGV4cG9ydHMucGFyYW0yb2JqID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgIGlmICh0eXBlb2YgcGFyYW1zID09PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuIHBhcmFtcztcblx0ICB9XG5cdCAgaWYgKCFwYXJhbXMpIHBhcmFtcyA9ICcnO1xuXHRcblx0ICB2YXIgb2JqID0ge307XG5cdCAgdmFyIGEgPSBwYXJhbXMuc3BsaXQoJyYnKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBpdGVtID0gYVtpXTtcblx0ICAgIHZhciBpbmRleCA9IGl0ZW0uaW5kZXhPZignPScpO1xuXHQgICAgdmFyIGZyYWdtZW50ID0gaXRlbS5zcGxpdCgnPScpO1xuXHQgICAgdmFyIGxlbiA9IGl0ZW0ubGVuZ3RoO1xuXHQgICAgaWYgKGZyYWdtZW50Lmxlbmd0aCA9PT0gMikge1xuXHQgICAgICBvYmpbZnJhZ21lbnRbMF1dID0gZnJhZ21lbnRbMV0gfHwgJyc7ICBcblx0ICAgIH0gZWxzZSBpZiAoaW5kZXggPiAwKSB7XG5cdCAgICAgIHZhciBrZXkgPSBpdGVtLnNsaWNlKDAsIGluZGV4KTtcblx0ICAgICAgdmFyIHZhbHVlID0gaXRlbS5zbGljZShpbmRleCArIDEsIGxlbikgfHwgJyc7XG5cdCAgICAgIG9ialtrZXldID0gdmFsdWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvYmpbZnJhZ21lbnRbMF1dID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBvYmo7XG5cdH07XG5cdFxuXHQvLyBjb25zb2xlLmxvZygnVE9ETyBkZWxldGUgc19wbGFpbl9vYmonKTtcblx0dmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6Jztcblx0ZXhwb3J0cy5zX3BsYWluX29iaiA9IHNfcGxhaW5fb2JqO1xuXHRcblx0LyoqXG5cdCAqIGFycmF5IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG5cdCAqIOWFtuS4reaVsOe7hOS4ulxuXHQgKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG5cdCAqIOeahOW9ouW8j+OAglxuXHQgKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuXHQgKiBAcGFyYW0gYXJyIHtBcnJheX1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyMnBhcmFtKGFyciwgc2tpcEVuY29kZSkge1xuXHQgIHZhciBhID0gW10sXG5cdCAgICBrLFxuXHQgICAgdixcblx0ICAgIGksXG5cdCAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgdmFyIGlzSW5QbGFuT2JqID0gay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMDtcblx0ICAgIHZhciBfdmFsdWUgPSBpc0luUGxhbk9iaiB8fCBza2lwRW5jb2RlID8gdiA6IGVuY29kZVVSSUNvbXBvbmVudCh2KTtcblx0ICAgIGEucHVzaChpc0luUGxhbk9iaiA/IF92YWx1ZSA6IChrICsgJz0nICsgX3ZhbHVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiBhLmpvaW4oJyYnKTtcblx0fTtcblx0ZXhwb3J0cy5hcnIycGFyYW0gPSBhcnIycGFyYW07XG5cdFxuXHQvKipcblx0ICogb2JqZWN0IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleWvueixoei9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byPXG5cdCAqIOWPguingSBhcnIycGFyYW0oKSDmlrnms5Vcblx0ICogQHBhcmFtIG9iaiB7T2JqZWN0fVxuXHQgKiBAcGFyYW0gY29tbVRyYW5zbGF0ZSB7Qm9vbGVhbn0g5pmu6YCa6L2s5o2i5LiN5YGaaXNTdGFydFdpdGjmoKHpqoxcblx0ICpcblx0ICovXG5cdGV4cG9ydHMub2JqMnBhcmFtID0gZnVuY3Rpb24gKG9iaiwgY29tbVRyYW5zbGF0ZSkge1xuXHQgIHZhciBhID0gW107XG5cdCAgdmFyIGs7XG5cdCAgdmFyIHY7XG5cdCAgdmFyIF92O1xuXHQgIGZvciAoayBpbiBvYmopXG5cdCAgICBpZiAoayAmJiBvYmouaGFzT3duUHJvcGVydHkoaykpIHtcblx0ICAgICAgdiA9ICcnICsgb2JqW2tdO1xuXHQgICAgICBfdiA9IGsgKyAnPScgKyB2O1xuXHQgICAgICBpZiAoIWNvbW1UcmFuc2xhdGUpIHtcblx0ICAgICAgICBhLnB1c2goay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMCA/IHYgOiBfdik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYS5wdXNoKF92KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIHJldHVybiBhLmpvaW4oJyYnKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZW5jb2RlR29rZXlWYWx1ZSA9IGZ1bmN0aW9uIChnb2tleSkge1xuXHQgIC8vIHZhciBhcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIC8vIC8vIOWvuWdva2V55YaF55qEdmFsdWXnu5/kuIDliqDkuIDlsYLnvJbnoIFcblx0ICAvLyBpZiAodHlwZW9mIGdva2V5ID09PSAnb2JqZWN0JyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAvLyAgIGZvciAodmFyIGsgaW4gZ29rZXkpIHtcblx0ICAvLyAgICAgaWYgKHR5cGVvZiBnb2tleVtrXSA9PT0gJ3N0cmluZycpIHtcblx0ICAvLyAgICAgICB0cnkge1xuXHQgIC8vICAgICAgICAgZ29rZXlba10gPSBlbmNvZGVVUklDb21wb25lbnQoZGVjb2RlVVJJQ29tcG9uZW50KGdva2V5W2tdKSk7XG5cdCAgLy8gICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAvLyAgICAgfVxuXHQgIC8vICAgfVxuXHQgIC8vIH1cblx0ICByZXR1cm4gZ29rZXk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHQvLyB2YXIgVVBEQVRFID0gJ3VwZGF0ZSc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcHVzaFF1ZXVlOmZ1bmN0aW9uKG1ldGhvZE5hbWUsIGFyZ3Mpe1xuXHQgICAgICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXNfcXVldWUnKTtcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMuJyArIG1ldGhvZE5hbWUsXG5cdCAgICAgICAgYXJndW1lbnRzOiBhcmdzXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIGVhY2goYXBsdXNTdGF0aWMub3BlbkFQSXMsIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgYXBsdXNbdl0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcblx0ICAgICAgICAgIGVhY2goYXJndW1lbnRzLCBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IHYgPT09ICdlbnRlcicgPyAnX3NlbmRQVicgOiAnXycgKyB2O1xuXHQgICAgICAgICAgX3NlbGYucHVzaFF1ZXVlKG1ldGhvZE5hbWUsIGl0ZW1zKTtcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfbWluaS5qc1xuXHQgKlxuXHQgKiBjbGllbnRJbmZvIGZvciBtaW5pYXBwXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICog5Yid5aeL5YyW5qih5Z2XLCDkuKrmgKfljJbpg6jliIblrZDnsbvkuK3lrp7njrBcblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBfZ2V0TmV0d29ya1R5cGU6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICAgIGlmIChjdHguZ2V0TmV0d29ya1R5cGUpIHtcblx0ICAgICAgICBjdHguZ2V0TmV0d29ya1R5cGUoe1xuXHQgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICBjYWxsYmFjayhyZXMgPyByZXMubmV0d29ya1R5cGUgOiAnJyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY2FsbGJhY2soJycpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6I635Y+W57O757uf5L+h5oGvIGh0dHBzOi8vZG9jcy5hbGlwYXkuY29tL21pbmkvYXBpL3N5c3RlbS1pbmZvXG5cdCAgICAgKiDmiYvmnLrlnovlj7fjgIHlsY/luZXliIbovqjnjofjgIHns7vnu5/niYjmnKznrYnkv6Hmga9cblx0ICAgICAqL1xuXHQgICAgX2dldFN5c3RlbUluZm86IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgZW1wdHlPYmogPSB7fTtcblx0ICAgICAgdmFyIHN5c0luZm8gPSBfc2VsZi5TWVNURU1fSU5GTyB8fCB7fTtcblx0ICAgICAgaWYgKHN5c0luZm8gJiYgc3lzSW5mby52ZXJzaW9uKSB7XG5cdCAgICAgICAgY2FsbGJhY2soX3NlbGYuU1lTVEVNX0lORk8pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBtaW5pLmdldENvbnRleHQoKS5nZXRTeXN0ZW1JbmZvKHtcblx0ICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgICBpZiAocmVzICYmIHJlcy52ZXJzaW9uKSB7XG5cdCAgICAgICAgICAgICAgICBfc2VsZi5fZ2V0TmV0d29ya1R5cGUoZnVuY3Rpb24gKG4pIHtcblx0ICAgICAgICAgICAgICAgICAgcmVzLm5ldHdvcmtUeXBlID0gbjtcblx0ICAgICAgICAgICAgICAgICAgX3NlbGYuU1lTVEVNX0lORk8gPSByZXM7XG5cdCAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgX3NlbGYuX2dldE5ldHdvcmtUeXBlKGZ1bmN0aW9uIChuKSB7XG5cdCAgICAgICAgICAgICAgICAgIGVtcHR5T2JqLm5ldHdvcmtUeXBlID0gbjtcblx0ICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZW1wdHlPYmopO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBjYWxsYmFjayhlbXB0eU9iaik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIF9nZXRBY2NvdW50SW5mb1N5bmM6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGluZm8gPSB7fTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICAgICAgaWYgKGN0eC5nZXRBY2NvdW50SW5mb1N5bmMgJiYgY3R4LmNhbklVc2UoJ2dldEFjY291bnRJbmZvU3luYycpKSB7XG5cdCAgICAgICAgICAvLyDlvq7kv6Fcblx0ICAgICAgICAgIHZhciBhY2NvdW50SW5mbyA9IGN0eC5nZXRBY2NvdW50SW5mb1N5bmMoKTtcblx0ICAgICAgICAgIHZhciBtaW5pUHJvZ3JhbSA9IGFjY291bnRJbmZvLm1pbmlQcm9ncmFtIHx8IHt9O1xuXHQgICAgICAgICAgdmFyIHBsdWdpbiA9IGFjY291bnRJbmZvLnBsdWdpbiB8fCB7fTtcblx0ICAgICAgICAgIGluZm8uYXBwSWQgPSBtaW5pUHJvZ3JhbS5hcHBJZDsgIC8vIOWwj+eoi+W6jyBhcHBJZFxuXHQgICAgICAgICAgaW5mby5hcHBWZXJzaW9uID0gbWluaVByb2dyYW0udmVyc2lvbiB8fCBtaW5pUHJvZ3JhbS5lbnZWZXJzaW9uOyAgLy8g5bCP56iL5bqPIGFwcFZlcnNpb25cblx0ICAgICAgICAgIGluZm8ucGx1Z2luQXBwSWQgPSBwbHVnaW4uYXBwSWQ7IC8vIOaPkuS7tiBhcHBJZFxuXHQgICAgICAgICAgaW5mby5wbHVnaW5BcHBWZXJzaW9uID0gcGx1Z2luLnZlcnNpb247IC8vIOaPkuS7tiBhcHBWZXJzaW9uICBcblx0ICAgICAgICB9IGVsc2UgaWYgKGN0eC5nZXRBcHBJZFN5bmMgJiYgY3R4LmNhbklVc2UoJ2dldEFwcElkU3luYycpKSB7XG5cdCAgICAgICAgICB2YXIgYXBwSW5mbyA9IGN0eC5nZXRBcHBJZFN5bmMoKSB8fCB7fTtcblx0ICAgICAgICAgIGluZm8uYXBwSWQgPSBhcHBJbmZvLmFwcElkIHx8ICcnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgcmV0dXJuIGluZm87XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogd29ya25vXG5cdCAgICAgKiAgIDEuIGNvb2tpZS5nZXRDb29raWUoJ3dvcmtubycpXG5cdCAgICAgKiAgIDIuIGNvb2tpZS5nZXRDb29raWUoJ2VtcGxJZCcpXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uIChzdGF0ZSwgY2IpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgLy8gY29uc29sZS5sb2coJ1RPRE8gZ2V0U3lzdGVtSW5mbycpO1xuXHQgICAgICB0aGlzLl9nZXRTeXN0ZW1JbmZvKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAvLyDmlK/ku5jlrp3lsI/nqIvluo/mlofmoaMgIHN5c3RlbS3ns7vnu5/niYjmnKwgcGxhdGZvcm0t57O757uf5ZCNXG5cdCAgICAgICAgcmVzLnVzZXJBZ2VudCA9ICctJztcblx0ICAgICAgICByZXMub3MgPSByZXMucGxhdGZvcm0gPyByZXMucGxhdGZvcm0udG9Mb2NhbGVVcHBlckNhc2UoKSA6ICcnO1xuXHQgICAgICAgIHJlcy5vc192ZXJzaW9uID0gcmVzLnN5c3RlbSA/IHJlcy5zeXN0ZW0gOiAnJztcblx0ICAgICAgICByZXMuYWNjZXNzID0gcmVzLmJyYW5kID8gcmVzLmJyYW5kIDogJyc7XG5cdCAgICAgICAgdmFyIGhvc3QgPSAnJztcblx0ICAgICAgICBpZihyZXMuaG9zdCAmJiAodHlwZW9mIHJlcy5ob3N0LmVudiA9PT0gJ3N0cmluZycpKXtcblx0ICAgICAgICAgIGhvc3QgPSByZXMuaG9zdC5lbnY7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJlcy5ob3N0ID0gaG9zdDtcblx0XG5cdCAgICAgICAgdmFyIGFjY291bnRJbmZvID0gX3NlbGYuX2dldEFjY291bnRJbmZvU3luYygpO1xuXHQgICAgICAgIHZhciBycyA9IE9iamVjdC5hc3NpZ24oe30sIHJlcywgYWNjb3VudEluZm8pO1xuXHRcblx0ICAgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgICBhcGx1cy5fYXBsdXNfY2xpZW50ID0gcnM7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiAyMDAwO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHR2YXIgUHViU3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46ICBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICAvLyDkv53or4Hlj6rkvJrmnInkuIDkuKpwdWJzdWLov5DooYxcblx0ICAgICAgaWYgKGFwbHVzLmFwbHVzX3B1YnN1Yikge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICAvLyBhcGx1cy5hcGx1c19wdWJzdWLmmK/kuIDkuKrnm5HlkKzogIXvvIzlnKjmj5Lku7bljJblhoXpg6jkvJrnlKjliLDku5bvvIzmnInmlbDmja7lj5jljJblsIbkvJrlj5HlsITnm7jlupTnmoRkYXRhY2hhbmdl5LqL5Lu2XG5cdCAgICAgIGFwbHVzLmFwbHVzX3B1YnN1YiA9IFB1YlN1Yi5jcmVhdGUoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3Mvc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzXG5cdCAqIOa2iOaBr+iuoumYheaooeWei1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblx0XG5cdHZhciBnZXRBcmdzID0gZnVuY3Rpb24oYXJncykge1xuXHQgIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcblx0ICB2YXIgX2FyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG5cdCAgZm9yICh2YXIgaiA9IDE7IGogPCBsZW47IGorKykge1xuXHQgICAgX2FyZ3NbaiAtIDFdID0gYXJnc1tqXTtcblx0ICB9XG5cdCAgcmV0dXJuIF9hcmdzO1xuXHR9O1xuXHRcblx0dmFyIFB1YlN1YiA9IEJhc2UuZXh0ZW5kKHtcblx0ICAvKipcblx0ICAgKiDlr7lmbui/m+ihjOaWreiogO+8jOS4jeaYr+KAmGZ1bmN0aW9u4oCZ57G75Z6L5oql6ZSZ77yM5ZCm5YiZ6L+U5ZueZm5cblx0ICAgKi9cblx0ICBjYWxsYWJsZTogZnVuY3Rpb24gKGZuKSB7XG5cdCAgICBpZiAoIWlzRnVuY3Rpb24oZm4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuXHQgICAgcmV0dXJuIGZuO1xuXHQgIH0sXG5cdFxuXHQgIGNyZWF0ZTogZnVuY3Rpb24gKHByb3BzKSB7XG5cdCAgICB2YXIgaW5zdGFuY2UgPSBuZXcgdGhpcygpO1xuXHQgICAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG5cdCAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG5cdCAgICAgIGluc3RhbmNlW25hbWVdID0gcHJvcHNbbmFtZV07XG5cdCAgICB9XG5cdFxuXHQgICAgaW5zdGFuY2UuaGFuZGxlcnMgPSBbXTtcblx0ICAgIGluc3RhbmNlLnB1YnMgPSB7fTtcblx0ICAgIHJldHVybiBpbnN0YW5jZTtcblx0ICB9LFxuXHRcblx0ICBzZXRIYW5kbGVyczogZnVuY3Rpb24oaGFuZGxlcnMpIHtcblx0ICAgIHRoaXMuaGFuZGxlcnMgPSBoYW5kbGVycztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDorqLpmIXlj6Xmn4TkuLrigJxlVHlwZeKAneeahOa2iOaBr++8jOW9k+aciea2iOaBr+i/h+adpeaJp+ihjOWbnuiwg+WHveaVsO+8muKAnGjigJ1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg6K6i6ZiF55qE5raI5oGv5Y+l5p+EXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gaCDorqLpmIXnmoTmtojmga/lm57osIPlh73mlbBcblx0ICAgKiBAcmV0dXJuIGNvbnRleHRcblx0ICAgKi9cblx0ICBzdWJzY3JpYmU6IGZ1bmN0aW9uKGVUeXBlLCBoKXtcblx0ICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuXHQgICAgdGhpcy5jYWxsYWJsZShoKTtcblx0XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHB1YnMgPSBfc2VsZi5wdWJzIHx8IHt9O1xuXHRcblx0ICAgIHZhciBhcnIgPSBwdWJzW2VUeXBlXSB8fCBbXTtcblx0ICAgIGlmIChhcnIpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgX2FyZ3MgPSBhcnJbaV0oKTtcblx0ICAgICAgICBoLmFwcGx5KF9zZWxmLCBfYXJncyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciBoYW5kbGVycyA9IF9zZWxmLmhhbmRsZXJzIHx8IFtdO1xuXHQgICAgaWYoIShlVHlwZSBpbiBoYW5kbGVycykpIHtcblx0ICAgICAgaGFuZGxlcnNbZVR5cGVdID0gW107XG5cdCAgICB9XG5cdCAgICBoYW5kbGVyc1tlVHlwZV0ucHVzaChoKTtcblx0ICAgIF9zZWxmLnNldEhhbmRsZXJzKGhhbmRsZXJzKTtcblx0ICAgIHJldHVybiBfc2VsZjtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlj5bmtojorqLpmIXvvIzlsIbkvJrlj5bmtojigJxlVHlwZeKAneWPpeafhOWvueW6lOeahOKAnGjigJ3lm57osIPlh73mlbDkuIvnmoTmiYDmnInorqLpmIVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg6K6i6ZiF55qE5raI5oGv5Y+l5p+EXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gaCDorqLpmIXnmoTmtojmga/lm57osIPlh73mlbBcblx0ICAgKiBAcmV0dXJuIGNvbnRleHRcblx0ICAgKi9cblx0ICB1bnN1YnNjcmliZTogZnVuY3Rpb24oZVR5cGUsIGgpIHtcblx0ICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuXHQgICAgdGhpcy5jYWxsYWJsZShoKTtcblx0XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgcyA9IHRoaXMuaGFuZGxlcnNbZVR5cGVdO1xuXHQgICAgICBpZiAoIXMpIHJldHVybiB0aGlzO1xuXHRcblx0ICAgICAgaWYgKHR5cGVvZiBzID09PSAnb2JqZWN0JyAmJiBzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgdmFyIGhfc3RyID0gaC50b1N0cmluZygpO1xuXHQgICAgICAgICAgdmFyIHNfc3RyID0gc1tpXS50b1N0cmluZygpO1xuXHQgICAgICAgICAgaWYgKGhfc3RyID09PSBzX3N0cikge1xuXHQgICAgICAgICAgICBzLnNwbGljZShpLCAxKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5oYW5kbGVyc1tlVHlwZV0gPSBzO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGRlbGV0ZSB0aGlzLmhhbmRsZXJzW2VUeXBlXTtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOa2iOaBr+WIhuWPke+8jOWwhuS8muWIhuWPkeWIsOaJgOacieiuoumYhWVUeXBl5Y+l5p+E55qE6K6i6ZiF6ICFXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOWIhuWPkea2iOaBr+WPpeafhFxuXHQgICAqL1xuXHQgIHB1Ymxpc2g6IGZ1bmN0aW9uIChlVHlwZSkge1xuXHRcblx0ICAgIHZhciBhcmdzID0gZ2V0QXJncyhhcmd1bWVudHMpO1xuXHQgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycyB8fCBbXTtcblx0XG5cdCAgICB2YXIgc2l6ZSA9IGhhbmRsZXJzW2VUeXBlXSA/IGhhbmRsZXJzW2VUeXBlXS5sZW5ndGggOiAwO1xuXHQgICAgaWYgKHNpemUgPiAwKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGZuID0gaGFuZGxlcnNbZVR5cGVdW2ldO1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuXHQgICAgICAgICAgZm4uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfSxcblx0XG5cdCAgY2FjaGVQdWJzOiBmdW5jdGlvbiAoZVR5cGUpIHtcblx0ICAgIHZhciBwdWJzID0gdGhpcy5wdWJzIHx8IHt9O1xuXHQgICAgdmFyIGFyZ3MgPSBnZXRBcmdzKGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoIXB1YnNbZVR5cGVdKSB7XG5cdCAgICAgIHB1YnNbZVR5cGVdID0gW107XG5cdCAgICB9XG5cdCAgICBwdWJzW2VUeXBlXS5wdXNoKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmV0dXJuIGFyZ3M7XG5cdCAgICB9KTtcblx0ICB9XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBQdWJTdWI7XG5cblxuLyoqKi8gfSksXG4vKiAzNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy9zcmMvbGliX3UvY29yZS9CYXNlLmpzXG5cdCAqIOWfuuexu++8jOaPkOS+m+exu+aJgOmcgOimgeeahOWfuuehgOWxnuaAp1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdC8vIOWfuuexu1xuXHRmdW5jdGlvbiBCYXNlKCkge31cblx0XG5cdC8vIOWwhmV4dGVuZOWSjGNyZWF0Zee9ruS6jnByb3RvdHlwZeWvueixoeS4re+8jOS7peS+v+WtkOexu+e7p+aJv1xuXHRCYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbigpIHt9O1xuXHRCYXNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcblx0Ly8g5Li65LqG6IO95Zyo5Z+657G75LiK55u05o6l5LulLmV4dGVuZOeahOaWueW8j+i/m+ihjOiwg+eUqFxuXHRCYXNlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgcmV0dXJuIHRoaXMucHJvdG90eXBlLmV4dGVuZC5jYWxsKHRoaXMsIHByb3BzKTtcblx0fTtcblx0XG5cdEJhc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgLyoqXG5cdCAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG5cdCAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG5cdCAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuXHQgICAqL1xuXHQgIHZhciBpbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG5cdCAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG5cdCAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuXHQgICAgaW5zdGFuY2VbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICB9XG5cdCAgcmV0dXJuIGluc3RhbmNlO1xuXHR9O1xuXHRcblx0QmFzZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24ocHJvcHMpIHtcblx0ICAvLyDmtL7nlJ/lh7rmnaXnmoTmlrDnmoTlrZDnsbtcblx0ICB2YXIgU3ViQmFzZSA9IGZ1bmN0aW9uKCkge307XG5cdCAgdHJ5IHtcblx0ICAgIC8qKlxuXHQgICAgICog57un5om/54i257G755qE5bGe5oCn5ZKM5pa55rOV77yMXG5cdCAgICAgKiDlvZPnhLbliY3mj5DmmK/niLbnsbvnmoTlsZ7mgKfpg73mlL7lnKhwcm90b3R5cGXkuK1cblx0ICAgICAqIOiAjOmdnuS4iumdomNyZWF0ZeaWueazleeahOKAnOWunuS+i+WxnuaAp+KAneS4rVxuXHQgICAgICovXG5cdCAgICBpZiAoIWlzRnVuY3Rpb24oT2JqZWN0LmNyZWF0ZSkpIHtcblx0ICAgICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgZnVuY3Rpb24gRigpIHt9XG5cdCAgICAgICAgRi5wcm90b3R5cGUgPSBvO1xuXHQgICAgICAgIHJldHVybiBuZXcgRigpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgICAgU3ViQmFzZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHRoaXMucHJvdG90eXBlKTtcblx0XG5cdCAgICAvLyDlubbkuJTmt7vliqDoh6rlt7HnmoTmlrnms5XlkozlsZ7mgKdcblx0ICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgICAgU3ViQmFzZS5wcm90b3R5cGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICAgIH1cblx0ICAgIFN1YkJhc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViQmFzZTtcblx0XG5cdCAgICAvLyDpnIDopoHku6UuZXh0ZW5k55qE5pa55byP5ZKMLmNyZWF0ZeeahOaWueW8j+iwg+eUqO+8mlxuXHQgICAgU3ViQmFzZS5leHRlbmQgPSBTdWJCYXNlLnByb3RvdHlwZS5leHRlbmQ7XG5cdCAgICBTdWJCYXNlLmNyZWF0ZSA9IFN1YkJhc2UucHJvdG90eXBlLmNyZWF0ZTtcblx0ICB9IGNhdGNoKGVycikge1xuXHQgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhlcnIpO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gU3ViQmFzZTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEJhc2U7XG5cblxuLyoqKi8gfSksXG4vKiAzOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog6I635Y+W6aG16Z2i5LiK55qEIDxtZXRhPiDkuK3kuI4gYXBsdXMg5omT54K555u45YWz55qE5YC8XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KSh0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuXHQgKiBtZXRh6YWN572u5o+S5Lu277yM6KKrYXBp5o+S5Lu25L6d6LWWXG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgbWV0YUluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwbHVzX2NvbmZpZykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICB2YXIgXyQgPSAoYXBsdXMuXyQgPSBhcGx1cy5fJCB8fCB7fSk7IC8vIOWGhemDqOS9v+eUqOeahOWPmOmHj1xuXHQgIF8kLmlzX3Rlcm1pbmFsID0gdHJ1ZTtcblx0ICBfJC5zZW5kX3B2X2NvdW50ID0gMDtcblx0ICAvLyBfJC5zdGF0dXMgPSBTVEFUVVM7XG5cdCAgLy8gXyQuc2NyaXB0X25hbWUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLnNjcmlwdF9uYW1lO1xuXHQgIF8kLnNwbSA9IHtcblx0ICAgIGRhdGE6IHt9XG5cdCAgfTtcblx0ICBfJC5tZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCkgfHwge307XG5cdCAgYXBsdXMuZ2xvYmFsQ29uZmlnID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZztcblx0XG5cdCAgZm9yICh2YXIgayBpbiBhcGx1c19jb25maWcubWV0YUluZm8pIHtcblx0ICAgIG1ldGFJbmZvLnNldE1ldGFJbmZvKGssIGFwbHVzX2NvbmZpZy5tZXRhSW5mb1trXSk7XG5cdCAgfVxuXHQgIGFwbHVzLl8kID0gXyQ7XG5cdFxuXHQgIGFwbHVzLmlzSW50ZXJuYXRpb25hbCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdC8vIHZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdFxuXHR2YXIgaW5mbyA9IHt9O1xuXHRcblx0dmFyIE9CSkVDVCA9ICdvYmplY3QnO1xuXHR2YXIgU1RSSU5HID0gJ3N0cmluZyc7XG5cdFxuXHQvKipcblx0ICogQHJldHVybnMge3t9fVxuXHQgKi9cblx0dmFyIGxhc3RfaW5mbztcblx0ZnVuY3Rpb24gZ2V0SW5mbygpIHtcblx0ICBsYXN0X2luZm8gPSBpbmZvIHx8IHt9O1xuXHQgIHJldHVybiBpbmZvO1xuXHR9O1xuXHRleHBvcnRzLmdldEluZm8gPSBnZXRJbmZvO1xuXHRcblx0Ly8g5aaC5p6c5pyJ57yT5a2Y77yM5L2/55So57yT5a2Y55qE5YC877yM5rKh5pyJ57yT5a2Y5YiZ5LuOIERPTSDkuK3or7vlj5Zcblx0ZnVuY3Rpb24gcUdldCAoKSB7XG5cdCAgcmV0dXJuIGxhc3RfaW5mbyB8fCBnZXRJbmZvKCk7XG5cdH07XG5cdGV4cG9ydHMucUdldCA9IHFHZXQ7XG5cdFxuXHQvKipcblx0ICog5Yqo5oCB6YWN572ubWV0YVxuXHQgKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcblx0ICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2XG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRNZXRhSW5mbyAoaywgdikge1xuXHQgIGlmICghbGFzdF9pbmZvKSB7XG5cdCAgICBsYXN0X2luZm8gPSB7fTtcblx0ICB9XG5cdCAgbGFzdF9pbmZvW2tdID0gdjtcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0ZXhwb3J0cy5zZXRNZXRhSW5mbyA9IHNldE1ldGFJbmZvO1xuXHRcblx0LyoqXG5cdCAqIGdldCBtZXRhSW5mbyBieSBrZXlcblx0ICog5a656ZSZ5qCh6aqM56e75qSN5YiwYXBsdXPlj6/op4bljJbln4vngrnpqozor4Hlt6XlhbflhoUgMjAxOC0wMS0xMCBA6LCL5aOrXG5cdCAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvcHJvamVjdC9wZXJmb3JtYW5jZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ31cblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0dmFyIGdldE1ldGFJbmZvID0gZnVuY3Rpb24oaykge1xuXHQgIGlmICghbGFzdF9pbmZvKSB7XG5cdCAgICBsYXN0X2luZm8gPSB7fTtcblx0ICB9XG5cdCAgcmV0dXJuIGxhc3RfaW5mb1trXSB8fCAnJztcblx0fTtcblx0ZXhwb3J0cy5nZXRNZXRhSW5mbyA9IGdldE1ldGFJbmZvO1xuXHRcblx0LyoqXG5cdCAqIFRvIGFwcGVuZCBgbWV0YWAgdGFnIGlmIHRoZXJlJ3Mgbm9uZSBhcGx1cyBtZXRhLlxuXHQgKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcblx0ICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG5cdCAqICAtIGBPYmplY3QuYXNzaWduYCBjYWxsZWQgb24gT2JqZWN0IHZhbHVlcy5cblx0ICogIEBwYXJhbSBrXG5cdCAqICBAcGFyYW0gdlxuXHQgKi9cblx0dmFyIGFwcGVuZE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcblx0ICAvLyBjb25zb2xlLmxvZyhrLCB2KTtcblx0ICBpZiAoayAmJiB2KSB7XG5cdCAgICAvLyBhcGx1cy11dHBhcmFtIHx8IGFwbHVzLW5leHRwYWdlLXV0cGFyYW0gfHwgYXBsdXMtZXhkYXRhXG5cdCAgICB2YXIgcHJvY2Vzc09iamVjdCA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuXHQgICAgICAgIHRvU2V0TWV0YUluZm8oaywgT2JqZWN0LmFzc2lnbih7fSwgb2xkX3ZhbHVlLCBuZXdfdmFsdWUpKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIH07XG5cdCAgICAvLyBhcGx1cy1hdXRvLWV4cCB8fCBhcGx1cy1hdXRvLWNsa1xuXHQgICAgdmFyIHByb2Nlc3NBcnJheSA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuXHQgICAgICAgIHRvU2V0TWV0YUluZm8oaywgb2xkX3ZhbHVlLmNvbmNhdChuZXdfdmFsdWUpKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIHByb2Nlc3NPYmogPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuXHQgICAgICAgIHByb2Nlc3NBcnJheSh2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzc09iamVjdCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgdG9TZXRNZXRhSW5mbyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgIF9zZXRNZXRhSW5mbyhrZXksIHZhbHVlLCB7XG5cdCAgICAgICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGZsYWc7XG5cdCAgICB2YXIgX29sZFZhbHVlID0gZ2V0TWV0YUluZm8oayk7XG5cdCAgICBpZiAoayA9PT0gJ2FwbHVzLWV4aW5mbycpIHtcblx0ICAgICAgdG9TZXRNZXRhSW5mbyhrLCBPYmplY3QuYXNzaWduKHt9LCBfb2xkVmFsdWUsIGZvcm1hdC5wYXJhbTJvYmoodikpKTtcblx0ICAgICAgZmxhZyA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBpZiAoayA9PT0gJ2FwbHVzLXBhZ2UtcHJvcGVydGllcycpIHtcblx0ICAgICAgdmFyIHBhZ2VQcm9wZXJ0aWVzID0gdjtcblx0ICAgICAgaWYgKF9vbGRWYWx1ZSkge1xuXHQgICAgICAgIGZvciAodmFyIF9rIGluIF9vbGRWYWx1ZSkge1xuXHQgICAgICAgICAgaWYgKHZbX2tdKSB7XG5cdCAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IE9iamVjdC5hc3NpZ24oe30sIF9vbGRWYWx1ZVtfa10sIHZbX2tdKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IF9vbGRWYWx1ZVtfa107XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRvU2V0TWV0YUluZm8oaywgcGFnZVByb3BlcnRpZXMpO1xuXHQgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIGlmIChfb2xkVmFsdWUpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBfb2xkVmFsdWUgPT09IE9CSkVDVCkge1xuXHQgICAgICAgIHByb2Nlc3NPYmooX29sZFZhbHVlKTtcblx0ICAgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdmFyIHRtcF9wYXJzZSA9IEpTT04ucGFyc2UoX29sZFZhbHVlKTtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgdG1wX3BhcnNlID09PSBPQkpFQ1QpIHtcblx0ICAgICAgICAgICAgcHJvY2Vzc09iaih0bXBfcGFyc2UpO1xuXHQgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoIWZsYWcpIHtcblx0ICAgICAgdG9TZXRNZXRhSW5mbyhrLCB2KTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuYXBwZW5kTWV0YUluZm8gPSBhcHBlbmRNZXRhSW5mbztcblx0XG5cdHZhciBfc2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoYXJnMSwgdmFsdWUpIHtcblx0ICB2YXIgaztcblx0ICB2YXIgdjtcblx0ICB2YXIgZGVmYXVsdE1vZGUgPSAnT1ZFUldSSVRFJztcblx0ICB2YXIgbW9kZSA9IGRlZmF1bHRNb2RlO1xuXHQgIGlmICh0eXBlb2YgYXJnMSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGsgPSBhcmcxLm1ldGFOYW1lO1xuXHQgICAgdiA9IGFyZzEubWV0YVZhbHVlO1xuXHQgICAgbW9kZSA9IGFyZzEubW9kZSB8fCBkZWZhdWx0TW9kZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgayA9IGFyZzE7XG5cdCAgICB2ID0gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChtb2RlID09PSBkZWZhdWx0TW9kZSkge1xuXHQgICAgaWYgKHNldE1ldGFJbmZvKGssIHYpKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIF8kLm1ldGFfaW5mbyA9IHFHZXQoKTtcblx0ICAgICAgdmFyIHJzID0gdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cdFxuXHQgICAgICB2YXIgbXNncyA9IFsnc2V0TWV0YUluZm8nLCBrLCB2LCB7fV07XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICAgIHJldHVybiBycztcblx0ICAgIH0gXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBhcHBlbmRNZXRhSW5mbyhrLCB2KTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuX3NldE1ldGFJbmZvID0gX3NldE1ldGFJbmZvO1xuXG4vKioqLyB9KSxcbi8qIDQxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgRk4gPSAnZnVuY3Rpb24nO1xuXHRcblx0dmFyIGdldFB1YnN1YiA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBwdWJzdWIgPSBhcGx1cy5hcGx1c19wdWJzdWIgfHwge307XG5cdCAgdmFyIGZsYWcgPSB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOO1xuXHQgIHJldHVybiBmbGFnID8gcHVic3ViIDogJyc7XG5cdH07XG5cdFxuXHQvKipcblx0ICog5YiG5Y+R5raI5oGv5bel5YW35Ye95pWwXG5cdCAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuXHQgKi9cblx0ZXhwb3J0cy5kb1B1Yk1zZyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0ICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG5cdCAgaWYgKHB1YnN1YiAmJiB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOKSB7XG5cdCAgICBwdWJzdWIucHVibGlzaC5hcHBseShwdWJzdWIsIGFyZ3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBjYWNoZeW9k+WJjeeahOWIhuWPkeWHveaVsOeahOW3peWFt+WHveaVsFxuXHQgKiBAcGFyYW1zIHtBcnJheX0gYXJncyBba2V5LCBtc2dWYWx1ZTEsIG1zZ1ZhbHVlMiwgbXNnVmFsdWUzLCBtc2dWYWx1ZU4sIC4uLl1cblx0ICovXG5cdGV4cG9ydHMuZG9DYWNoZVB1YnMgPSBmdW5jdGlvbihhcmdzKSB7XG5cdCAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuXHQgIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5jYWNoZVB1YnMgPT09IEZOKSB7XG5cdCAgICBwdWJzdWIuY2FjaGVQdWJzLmFwcGx5KHB1YnN1YiwgYXJncyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOiuoumYhea2iOaBr+W3peWFt+WHveaVsFxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2IoWyBtc2dWYWx1ZTEsIG1zZ1ZhbHVlMiwgbXNnVmFsdWUzLCBtc2dWYWx1ZU4sIC4uLl0pXG5cdCAqL1xuXHRleHBvcnRzLmRvU3ViTXNnID0gZnVuY3Rpb24oa2V5LCBjYikge1xuXHQgIHZhciBwdWJzdWIgPSBnZXRQdWJzdWIoKTtcblx0ICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIuc3Vic2NyaWJlID09PSBGTikge1xuXHQgICAgcHVic3ViLnN1YnNjcmliZShrZXksIGNiKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHRcblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg0MykoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY29sbGVjdF9jbGsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTtcblx0Ly8gdmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgY2xvbmVEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBhcGx1c0N0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgY2xrX2NvbmZpZyA9IFtdO1xuXHRcblx0ICB2YXIgaW5pdENsayA9IGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGNsa19jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnKTtcblx0ICAgIHZhciBzcG1CID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcblx0ICAgIGlmIChpc0FycmF5KGNsa19jb25maWcpKSB7XG5cdCAgICAgIGNsa19jb25maWcuZm9yRWFjaChmdW5jdGlvbiAoY29uZmlnKSB7XG5cdCAgICAgICAgaWYgKCF1dGlsRGFzaC5pc1N0YXJ0V2l0aChjb25maWcuY3NzU2VsZWN0b3IsICcuJykpIHtcblx0ICAgICAgICAgIGNvbmZpZy5jc3NTZWxlY3RvciA9ICcuJyArIGNvbmZpZy5jc3NTZWxlY3Rvcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFjb25maWcuc3BtQikge1xuXHQgICAgICAgICAgY29uZmlnLnNwbUIgPSBzcG1CO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgZWxlbWVudHMgPSBvcHQuY29udGV4dC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKGNvbmZpZy5jc3NTZWxlY3Rvcik7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50cy5maWVsZHMgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG5cdCAgICAgICAgICAgIGlkOiB0cnVlLFxuXHQgICAgICAgICAgICBkYXRhc2V0OiB0cnVlLFxuXHQgICAgICAgICAgICByZWN0OiB0cnVlLFxuXHQgICAgICAgICAgICBzY3JvbGxPZmZzZXQ6IHRydWVcblx0ICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgY29sbGVjdF9jbGsud2F0Y2hfY2xpY2sob3B0LmV2ZW50IHx8IG9wdC5yZXMsIGNsb25lRGVlcChyZXMpLCBjb25maWcpO1xuXHQgICAgICAgICAgfSkuZXhlYygpOyBcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8g5LiN5pSv5oyBZmllbGRz5pa55rOV55qE5Zy65pmv77yI5pSv5LuY5a6d5LiL77yM5pS555So5Z2Q5qCH77yJXG5cdCAgICAgICAgICBlbGVtZW50cy5ib3VuZGluZ0NsaWVudFJlY3QoKS5leGVjKGZ1bmN0aW9uIChyZXQpIHtcblx0ICAgICAgICAgICAgaWYgKHJldCAmJiByZXQubGVuZ3RoID4gMCAmJiByZXRbMF0pIHtcblx0ICAgICAgICAgICAgICBjb2xsZWN0X2Nsay53YXRjaF9jbGljayhvcHQuZXZlbnQsIGNsb25lRGVlcChyZXRbMF0pLCBjb25maWcpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgXG5cdCAgYXBsdXNDdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuXHQgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG5cdCAgICAgICAgY2xrX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHQgIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25TaG93JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyBUT0RPXG5cdCAgICB9XVxuXHQgIH0pO1xuXHQgIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25IaWRlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyBUT0RPXG5cdCAgICB9XVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1c0N0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ29uQXBsdXNDbGsnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgICAgaW5pdENsayhvcHQpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblVubG9hZCcsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIC8vIFRPRE9cblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA0NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY2xvbmVEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHdhdGNoVHJhY2tlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgZ2V0SGFzaEtleSA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqXG5cdCAqIOaKiuiHquWKqOabneWFieebuOWQjGNzc1NlbGVjdG9y55qE55u45ZCM5L2N572u55qEZGF0YXNldOaLv+WIsOe7meiHquWKqOeCueWHu+S9v+eUqFxuXHQgKiDlm6DkuLrlnKjmlK/ku5jlrp3njq/looPkuIvoh6rliqjngrnlh7vkuovku7bmi7/kuI3liLBkYXRhc2V0XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXREYXRhU2V0IChjb25maWcsIGluZGV4KSB7XG5cdCAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuXHQgIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuXHQgIFxuXHQgIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuXHQgICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZV9zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciB2ID0gZWxlX3NbaV0gfHwge307XG5cdCAgICAgIHZhciBleHBDb25maWcgPSB2LmV4cENvbmZpZyB8fCB7fTtcblx0ICAgICAgLy8g5pud5YWJY3NzU2VsZWN0b3LkuI7ngrnlh7vnmoRjc3NTZWxlY3RvcuebuOWQjOaJjeiupOS4uuaYr+WQjOexu+Wei+WFg+e0oFxuXHQgICAgICBpZiAoY29uZmlnLmNzc1NlbGVjdG9yID09PSBleHBDb25maWcuY3NzU2VsZWN0b3IpIHtcblx0ICAgICAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoe1xuXHQgICAgICAgICAgaW5kZXg6IGluZGV4XG5cdCAgICAgICAgfSwgZXhwQ29uZmlnKTtcblx0ICAgICAgICBcblx0ICAgICAgICBpZiAoaGFzaCA9PT0gdi5oYXNoX3ZhbHVlKSB7XG5cdCAgICAgICAgICByZXR1cm4gY2xvbmVEZWVwKHYuZGF0YXNldCk7XG5cdCAgICAgICAgfSAgXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHR9XG5cdFxuXHRleHBvcnRzLndhdGNoX2NsaWNrID0gZnVuY3Rpb24gKGNsa0luZm8sIGVsZW1lbnRzLCBjb25maWcpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAvLyB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgZm9yICh2YXIgaiA9IDA7IGogPCBlbGVtZW50cy5sZW5ndGg7IGorKykge1xuXHQgICAgdmFyIF92YWx1ZSA9IGVsZW1lbnRzW2pdO1xuXHQgICAgaWYgKGlzSW5BcmVhKGNsa0luZm8sIF92YWx1ZSkpIHtcblx0ICAgICAgdmFyIGluZGV4ID0gaiArIDE7XG5cdCAgICAgIHZhciBkYXRhc2V0ID0gX3ZhbHVlLmRhdGFzZXQgfHwgZ2V0RGF0YVNldChjb25maWcsIGluZGV4KSB8fCB7fTtcblx0ICAgICAgdmFyIHNwbURhdGEgPSB7fTtcblx0ICAgICAgdmFyIF9zcG1EYXRhID0gdXRpbC5qc29uTGlrZVN0cjJKU09OKGRhdGFzZXQudHJhY2tlclBhcmFtcykgfHwge307XG5cdCAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICAvLyDlj5ZkYXRhLXRyYWNrZXIg5oiWIGNzc1NlbGVjdG9yXG5cdCAgICAgICAgdmFyIHNwbUMgPSBkYXRhc2V0LnRyYWNrZXIgfHwgY29uZmlnLmNzc1NlbGVjdG9yLnJlcGxhY2UoL1xcJ3xcXFwifFxcO3xcXDp8XFw9fFxcW3xcXF18XFwufFxcI3xcXC18XFwvfFxcfC9nLCAnJyk7IC8vIOWOu+aOieeJueauiuWtl+esplxuXHQgICAgICAgIHNwbURhdGEgPSBhcGx1cy5fJC5zcG0uZGF0YSB8fCB7fTtcblx0ICAgICAgICBzcG1EYXRhLmMgPSBzcG1DO1xuXHQgICAgICAgIGlmIChzcG1EYXRhLmMgJiYgc3BtRGF0YS5jICE9PSAnMCcpIHtcblx0ICAgICAgICAgIHZhciBzcG1EID0gJ2QnICsgaW5kZXg7XG5cdCAgICAgICAgICBzcG1EYXRhLmQgPSBzcG1EO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzcG1EYXRhLmIgPSBjb25maWcuc3BtQjtcblx0XG5cdCAgICAgICAgaWYgKGNvbmZpZy5zcG1DKSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmMgPSBjb25maWcuc3BtQztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3BtRGF0YS5jID0gX3NwbURhdGEuc3BtQyA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1DKSA6ICcnO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGNvbmZpZy5zcG1EKSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmQgPSBpbmRleCA/IGNvbmZpZy5zcG1EICsgJ18nICsgaW5kZXggOiBjb25maWcuc3BtRDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3BtRGF0YS5kID0gX3NwbURhdGEuc3BtRCA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1EKSA6ICcnO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgIH1cblx0ICAgICAgd2F0Y2hUcmFja2VyLnB1c2hFdmVudCgnQ0xLJywgZGF0YXNldCwgY29uZmlnLCBfdmFsdWUsIHNwbURhdGEpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNJbkFyZWEgKGNsa0luZm8sIGVsZUluZm8pIHtcblx0ICAgIHZhciBjaGFuZ2VkVG91Y2ggPSB7fTtcblx0ICAgIGlmIChjbGtJbmZvKSB7XG5cdCAgICAgIGlmIChjbGtJbmZvLmNoYW5nZWRUb3VjaGVzKSB7XG5cdCAgICAgICAgLy8g5b6u5L+hXG5cdCAgICAgICAgY2hhbmdlZFRvdWNoID0gY2xrSW5mby5jaGFuZ2VkVG91Y2hlc1swXTtcblx0ICAgICAgfSBlbHNlIGlmIChjbGtJbmZvLmRldGFpbCkge1xuXHQgICAgICAgIC8vIOaUr+S7mOWunVxuXHQgICAgICAgIGNoYW5nZWRUb3VjaCA9IGNsa0luZm8uZGV0YWlsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgeCA9IGNoYW5nZWRUb3VjaC5jbGllbnRYIHx8IDA7XG5cdCAgICB2YXIgeSA9IGNoYW5nZWRUb3VjaC5jbGllbnRZIHx8IDA7XG5cdFxuXHQgICAgdmFyIF90b3AgPSBlbGVJbmZvLnRvcDtcblx0ICAgIHZhciBfYm90dG9tID0gZWxlSW5mby5ib3R0b207XG5cdCAgICBpZiAoZWxlSW5mby5zY3JvbGxUb3ApIHtcblx0ICAgICAgX3RvcCArPSBlbGVJbmZvLnNjcm9sbFRvcDtcblx0ICAgICAgX2JvdHRvbSArPSBlbGVJbmZvLnNjcm9sbFRvcDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZWxlSW5mby5sZWZ0IDwgeCAmJiB4IDwgZWxlSW5mby5yaWdodCAmJiBfdG9wIDwgeSAmJiB5IDwgX2JvdHRvbSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHRcblx0dmFyIHJlY29yZEV4cE1hcFF1ZXVlID0ge307XG5cdHZhciBERUZBVUxUX1BLR19TSVpFID0gMztcblx0dmFyIFBPU1QgPSAnUE9TVCc7XG5cdHZhciBFWFAgPSAnRVhQJztcblx0XG5cdC8qKlxuXHQgKiDojrflj5bnlKjmiLfms6jlhaXnmoTln4vngrnkv6Hmga/vvJpodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvZG9jcy9tZXRhI2I3ZDhjY2M3XG5cdCAqIEBwYXJhbXMge0Z1bmN0aW9ufSB1c2VyRm5OYW1lXG5cdCAqIEBwYXJhbXMge09iamVjdH0gZWxlbWVudFxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IHNlbGVjdG9yXG5cdCAqXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdGZ1bmN0aW9uIGdldFVzZXJJbmZvICh1c2VyRm5OYW1lLCBlbGVtZW50LCBzZWxlY3Rvcikge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpIHx8IHt9O1xuXHQgIHZhciBnZXRNZXRhSW5mbyA9IGFwbHVzLmdldE1ldGFJbmZvO1xuXHQgIGlmICh0eXBlb2YgZ2V0TWV0YUluZm8gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHZhciB1c2VyRm4gPSBnZXRNZXRhSW5mbyh1c2VyRm5OYW1lKTtcblx0ICAgIHZhciB1c2VySW5mbyA9IHt9O1xuXHQgICAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdXNlckluZm8gPSB1c2VyRm4oZWxlbWVudCA/IGNsb25lRGVlcChlbGVtZW50KSA6IHt9LCBzZWxlY3Rvcik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZm9ybWF0LnBhcmFtMm9iaih1c2VySW5mbyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIOiBmuWQiOS4iuaKpeabneWFieaXpeW/l1xuXHR2YXIgRXZlbnRBcnJheSA9IEJhc2UuZXh0ZW5kKHtcblx0ICBwdXNoOiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG5cdCAgICB3aGlsZSAodGhpcy5idWZmZXIubGVuZ3RoID49IHRoaXMucGtnU2l6ZSkge1xuXHQgICAgICB2YXIgZ29rZXlzID0gdGhpcy5idWZmZXIuc3BsaWNlKDAsIHRoaXMucGtnU2l6ZSk7XG5cdCAgICAgIGlmIChnb2tleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGFwbHVzLmNvbWJpbmVSZWNvcmQodGhpcy5sb2drZXksIEVYUCwgZ29rZXlzLCB0aGlzLm1ldGhvZCk7XG5cdCAgICAgIH1cblx0ICAgIH0gXG5cdCAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIGdldEZpeGVkTnVtYmVyICh2YWx1ZSwgbGVuZ3RoKSB7XG5cdCAgdmFyIF9yZXN1bHQgPSAnJztcblx0ICB0cnkge1xuXHQgICAgdmFyIF9udW0gPSBuZXcgTnVtYmVyKHZhbHVlKTtcblx0ICAgIF9yZXN1bHQgPSBwYXJzZUZsb2F0KF9udW0udG9GaXhlZChsZW5ndGgpKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBfcmVzdWx0ID0gdmFsdWU7XG5cdCAgfVxuXHQgIHJldHVybiBfcmVzdWx0O1xuXHR9XG5cdFxuXHRleHBvcnRzLnB1c2hFdmVudCA9IGZ1bmN0aW9uIChnbWtleSwgZGF0YSwgY29uZmlnLCBlbGVtZW50LCBzcG1EYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHByb3BzID0gY29uZmlnLnByb3BzIHx8IFtdO1xuXHQgIHZhciBwYXJhbXMgPSB7fTtcblx0ICB2YXIgZGF0YXNldCA9IHt9O1xuXHRcblx0ICBpZiAoZGF0YSkge1xuXHQgICAgZm9yICh2YXIgZGF0YWtleSBpbiBkYXRhKSB7XG5cdCAgICAgIGRhdGFzZXRbZGF0YWtleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKS5yZXBsYWNlKC8tL2csICcnKV0gPSBkYXRhW2RhdGFrZXldO1xuXHQgICAgfSAgXG5cdCAgfSAgXG5cdCAgXG5cdCAgaWYgKHByb3BzICYmIGlzQXJyYXkocHJvcHMpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBrZXkgPSBwcm9wc1tpXS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKS5yZXBsYWNlKC8tL2csICcnKTtcblx0ICAgICAgcGFyYW1zW3Byb3BzW2ldXSA9IGRhdGFzZXRba2V5XTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgZGF0YXNldCk7XG5cdCAgfVxuXHQgIFxuXHQgIGlmIChlbGVtZW50ICYmIGdta2V5ID09PSBFWFApIHtcblx0ICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcywge1xuXHQgICAgICAnX3cnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LndpZHRoLCAyKSxcblx0ICAgICAgJ19oJzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC5oZWlnaHQsIDIpLFxuXHQgICAgICAnX3gnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LngsIDIpLFxuXHQgICAgICAnX3knOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LnksIDIpLFxuXHQgICAgICAvLyAnX2hhc2gnOiBlbGVtZW50Lmhhc2hfdmFsdWUgfHwgJycsXG5cdCAgICAgICdfcmF0ZSc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQudmlld2FiaWxpdHlSYXRlIHx8IGVsZW1lbnQuaW50ZXJzZWN0aW9uUmF0aW8sIDIpLFxuXHQgICAgICAnX3ZpZXdhYmlsaXR5JzogJ2ludGVyc2VjdGlvbidcblx0ICAgIH0pO1xuXHQgIH0gIFxuXHQgIGlmIChjb25maWcuX3Z0KSB7XG5cdCAgICBwYXJhbXMuX3Z0ID0gY29uZmlnLl92dDtcblx0ICB9XG5cdCAgdmFyIHVzZXJGbk5hbWUgPSBnbWtleSA9PT0gRVhQID8gJ2FwbHVzLWF1dG8tZXhwLXVzZXJmbicgOiAnYXBsdXMtYXV0by1jbGstdXNlcmZuJztcblx0ICB2YXIgdXNlckluZm8gPSBnZXRVc2VySW5mbyh1c2VyRm5OYW1lLCBlbGVtZW50LCBjb25maWcuY3NzU2VsZWN0b3IpO1xuXHRcblx0ICBpZiAoIXVzZXJJbmZvLnNwbSkge1xuXHQgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSAmJiBzcG1EYXRhICYmIHNwbURhdGEuYSAmJiBzcG1EYXRhLmIpIHtcblx0ICAgICAgdXNlckluZm8uc3BtID0gW3NwbURhdGEuYSwgc3BtRGF0YS5iLCBzcG1EYXRhLmMgfHwgJzAnLCBzcG1EYXRhLmQgfHwgJzAnXS5qb2luKCcuJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB1c2VySW5mby5zcG0gPSBzcG1EYXRhICYmIHNwbURhdGEuYiA/IHNwbURhdGEgOiB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgZ29rZXkgPSB7fTtcblx0XG5cdCAgdmFyIHRyYWNrZXJQYXJhbXMgPSBkYXRhLnRyYWNrZXJQYXJhbXMgfHwgZGF0YVsndHJhY2tlci1wYXJhbXMnXTtcblx0ICBpZiAodHJhY2tlclBhcmFtcykge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIF90cmFja2VyUGFyYW1zID0gSlNPTi5wYXJzZSh0cmFja2VyUGFyYW1zKTtcblx0ICAgICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbihwYXJhbXMsIF90cmFja2VyUGFyYW1zKTtcblx0ICAgICAgZGVsZXRlIHBhcmFtcy50cmFja2VyUGFyYW1zO1xuXHQgICAgICBkZWxldGUgcGFyYW1zLnRyYWNrZXJwYXJhbXM7XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH1cblx0ICBcblx0ICBpZiAoZ21rZXkgPT09ICdFWFAnICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSAmJiByZWNvcmRFeHBNYXBRdWV1ZVtjb25maWcubG9na2V5XSkge1xuXHQgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCB7XG5cdCAgICAgIGV4YXJnczogcGFyYW1zXG5cdCAgICB9LCB1c2VySW5mbyk7XG5cdCAgICByZWNvcmRFeHBNYXBRdWV1ZVtjb25maWcubG9na2V5XS5wdXNoKGdva2V5KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMsIHVzZXJJbmZvLCBjb25maWcuY3VzdG9tQXJncyk7XG5cdCAgICBhcGx1cy5yZWNvcmQoY29uZmlnLmxvZ2tleSwgZ21rZXksIGdva2V5LCBQT1NUKTsgIFxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtBcnJheU9iamVjdH0gY29uZmlnIDogW3tcblx0ICogICAgJ3Bvc2l0aW9uU2VsZWN0b3InOiAnLnNjcm9sbC12aWV3Jyxcblx0ICogICAgJ2Nzc1NlbGVjdG9yJzonLmJhbGwnLFxuXHQgKiAgICAnbG9na2V5JzonL3Rlc3QuYmFsbC4xJyxcblx0ICogICAgJ3Byb3BzJzogWydkYXRhLXRyYWNrZXInXSxcblx0ICogIH0sIHtcblx0ICogICAgJ2Nzc1NlbGVjdG9yJzonLm15YnV0dG9uJyxcblx0ICogICAgJ2xvZ2tleSc6Jy90ZXN0Lm15YnV0dG9uLjEnLFxuXHQgKiAgICAncHJvcHMnOiBbJ2RhdGEtdHJhY2tlciddLFxuXHQgKiAgfV1cblx0ICovXG5cdGV4cG9ydHMud2F0Y2hSZWNvcmQgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgXG5cdCAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSAmJiBjb25maWcpIHtcblx0ICAgIGNvbmZpZy5mb3JFYWNoKGZ1bmN0aW9uIChjZmcpIHtcblx0ICAgICAgaWYgKCFyZWNvcmRFeHBNYXBRdWV1ZS5oYXNPd25Qcm9wZXJ0eShjZmcubG9na2V5KSkge1xuXHQgICAgICAgIHJlY29yZEV4cE1hcFF1ZXVlW2NmZy5sb2drZXldID0gRXZlbnRBcnJheS5jcmVhdGUoe1xuXHQgICAgICAgICAgbGVuZ3RoOiAwLFxuXHQgICAgICAgICAgYnVmZmVyOiBbXSxcblx0ICAgICAgICAgIGxvZ2tleTogY2ZnLmxvZ2tleSxcblx0ICAgICAgICAgIHBrZ1NpemU6IHR5cGVvZiBjZmcucGtnU2l6ZSA9PT0gJ251bWJlcicgJiYgY2ZnLnBrZ1NpemUgfHwgREVGQVVMVF9QS0dfU0laRSxcblx0ICAgICAgICAgIG1ldGhvZDogY2ZnLm1ldGhvZCB8fCBQT1NUXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gXG5cdCAgICB9KTtcblx0ICB9XG5cdCAgXG5cdH07XG5cdFxuXHRleHBvcnRzLmNsZWFyUmVjb3JkID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgIGZvciAodmFyIGxvZ2tleSBpbiByZWNvcmRFeHBNYXBRdWV1ZSkge1xuXHQgICAgICB2YXIgZ29rZXlzID0gcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXI7XG5cdCAgICAgIGlmIChnb2tleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGFwbHVzLmNvbWJpbmVSZWNvcmQobG9na2V5LCBFWFAsIGdva2V5cywgUE9TVCk7XG5cdCAgICAgICAgcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgPSBbXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cblxuLyoqKi8gfSksXG4vKiA0NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDmoLnmja7lhYPntKDlsZ7mgKflkozln4vngrnphY3nva7nsr7noa7ojrflj5bkuIDkuKrlhYPntKDnmoRoYXNoS2V5XG5cdCAqIEBwYXJhbXMge09iamVjdH0gZWxlbWVudEF0dHIge1xuXHQgKiAgIGlkXG5cdCAqIH1cblx0ICogQHBhcmFtcyB7T2JqZWN0fSBjb25maWcge1xuXHQgKiAgIGxvZ2tleSwgY3NzU2VsZWN0b3IsIHBvc2l0aW9uU2VsZWN0b3Jcblx0ICogfVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IGhhc2hLZXlcblx0ICovXG5cdFxuXHQvLyBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbGVtZW50QXR0ciwgY29uZmlnKSB7XG5cdC8vICAgdmFyIGhhc2hLZXkgPSBbXG5cdC8vICAgICBjb25maWcubG9na2V5LFxuXHQvLyAgICAgY29uZmlnLmNzc1NlbGVjdG9yLFxuXHQvLyAgICAgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IsXG5cdC8vICAgICBlbGVtZW50QXR0ci5pbmRleFxuXHQvLyAgIF0uam9pbignXycpO1xuXHQvLyAgIHJldHVybiBoYXNoS2V5O1xuXHQvLyB9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZWxlbWVudEF0dHIsIGNvbmZpZykge1xuXHQgIHZhciBoYXNoS2V5ID0gW1xuXHQgICAgY29uZmlnLmxvZ2tleSxcblx0ICAgIGNvbmZpZy5jc3NTZWxlY3Rvcixcblx0ICAgIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yLFxuXHQgICAgLy8gZWxlbWVudEF0dHIuaW5kZXhcblx0ICBdO1xuXHQgIFxuXHQgIGlmIChlbGVtZW50QXR0ci5pZCkge1xuXHQgICAgaGFzaEtleS5wdXNoKGVsZW1lbnRBdHRyLmlkKTtcblx0ICB9XG5cdCAgaWYgKGVsZW1lbnRBdHRyLmRhdGFzZXQpIHtcblx0ICAgIGhhc2hLZXkucHVzaChKU09OLnN0cmluZ2lmeShlbGVtZW50QXR0ci5kYXRhc2V0KSk7XG5cdCAgfVxuXHQgIGhhc2hLZXkgPSBoYXNoS2V5LmpvaW4oJ18nKTtcblx0ICByZXR1cm4gaGFzaEtleTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA0NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHRcblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgY29sbGVjdF9leHAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHQvLyDnlKjkuo7nm5HlkKxcblx0dmFyIFBBR0VfREFUQV9NQVAgPSB7fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIGlzU3RhcnQgPSAwO1xuXHQgIHZhciBpc0ZpcnN0VG91Y2ggPSAwO1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIGlmIChhcGx1cy5fYXBsdXNfYXV0b19leHApIHtcblx0ICAgIHJldHVybjtcblx0ICB9IGVsc2Uge1xuXHQgICAgYXBsdXMuX2FwbHVzX2F1dG9fZXhwID0ge1xuXHQgICAgICBoYXNoTWFwOiB7fVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHZhciBfY29uZmlnID0gW107XG5cdFxuXHQgIGZ1bmN0aW9uIHdhdGNoTWV0YUluZm8oY29udGV4dCwgaXNGaXJzdCwgd2F0Y2hUeXBlKSB7XG5cdCAgICB2YXIgaGFuZGxlck1ldGFJbmZvID0gZnVuY3Rpb24gKG1ldGFLZXksIG1ldGFWYWx1ZSkgeyAgXG5cdCAgICAgIGlmIChtZXRhS2V5ID09PSAnYXBsdXMtYXV0by1leHAnKSB7XG5cdCAgICAgICAgdmFyIF9jb25maWcyID0gY29uZmlnLmdldEF1dG9FeHBDb25maWcobWV0YVZhbHVlKTtcblx0ICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoX2NvbmZpZzIpID09PSBKU09OLnN0cmluZ2lmeShfY29uZmlnKSkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBfY29uZmlnID0gX2NvbmZpZzI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChtZXRhVmFsdWUgJiYgX2NvbmZpZyAmJiBfY29uZmlnLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgIGNvbGxlY3RfZXhwLndhdGNoX2V4cG9zdXJlKGNvbnRleHQsIF9jb25maWcsIGlzRmlyc3QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgYWN0aW9uOiB3YXRjaFR5cGUsIC8vIGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgICAgYXJndW1lbnRzOiBbJ3NldE1ldGFJbmZvJywgaGFuZGxlck1ldGFJbmZvXVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbml0RXhwIChjb250ZXh0LCBpc0ZpcnN0KSB7XG5cdCAgICBfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tZXhwJyk7XG5cdCAgICAvLyBUYXJv5qGG5p625Z+65LqO6L+Q6KGM5pe277yM6Ieq5Yqo5pud5YWJ5Lya5Ye6546w6I635Y+W5LiN5Yiw5pud5YWJ5YWD57Sg55qE5oOF5Ya1XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICBjb2xsZWN0X2V4cC53YXRjaF9leHBvc3VyZShjb250ZXh0LCBfY29uZmlnLCBpc0ZpcnN0KTtcblx0ICAgIH0sIDApO1xuXHQgIH1cblx0XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25TaG93JywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgIHdhdGNoTWV0YUluZm8ob3B0LmNvbnRleHQsIDEsIGFwbHVzU3RhdGljLlNVQlNDUklCRSk7XG5cdCAgICAgICAgaWYgKGlzU3RhcnQgPT09IDApIHtcblx0ICAgICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDEpO1xuXHQgICAgICAgICAgaXNTdGFydCA9IDE7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdmFyIF9jdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgICAgIHZhciBfcGF0aCA9IF9jdXJyZW50UGFnZS5yb3V0ZSB8fCBfY3VycmVudFBhZ2UuaXM7XG5cdCAgICAgICAgICBQQUdFX0RBVEFfTUFQW19wYXRoXSA9IF9wYXRoOyAvLyBKU09OLnN0cmluZ2lmeShfY3VycmVudFBhZ2UuZGF0YSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0XG5cdCAgZnVuY3Rpb24gcmVzZXRBdXRvRXhwIChvcHQpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBfY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgIHZhciBfcGF0aCA9IF9jdXJyZW50UGFnZS5yb3V0ZSB8fCBfY3VycmVudFBhZ2UuaXM7XG5cdCAgICAgIHZhciBfZGF0YSA9IFBBR0VfREFUQV9NQVBbX3BhdGhdO1xuXHQgICAgICBcblx0ICAgICAgdmFyIF9jdXJyZW50RGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdC5kYXRhKTtcblx0ICAgICAgaWYgKF9kYXRhICE9PSBfY3VycmVudERhdGEpIHtcblx0ICAgICAgICBQQUdFX0RBVEFfTUFQW19wYXRoXSA9IF9jdXJyZW50RGF0YTtcblx0ICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAwKTtcblx0ICAgICAgfSAgXG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH1cblx0XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25BcGx1c1RvdWNoJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgIGlmIChpc0ZpcnN0VG91Y2ggPT09IDApIHtcblx0ICAgICAgICAgIGlzRmlyc3RUb3VjaCA9IDE7XG5cdCAgICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAxKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmVzZXRBdXRvRXhwKG9wdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ29uUGFnZURhdGFDaGFuZ2VkJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgcmVzZXRBdXRvRXhwKG9wdCk7XG5cdCAgICAgIH0sIDIwMCk7XG5cdCAgICB9XVxuXHQgIH0pO1xuXHRcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydvbkhpZGUnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgICAgUEFHRV9EQVRBX01BUCA9IHt9O1xuXHQgICAgICAgIGlzU3RhcnQgPSAwO1xuXHQgICAgICAgIGlzRmlyc3RUb3VjaCA9IDA7XG5cdCAgICAgICAgd2F0Y2hNZXRhSW5mbyhvcHQuY29udGV4dCwgMSwgYXBsdXNTdGF0aWMuVU5TVUJTQ1JJQkUpO1xuXHQgICAgICAgIGNvbGxlY3RfZXhwLmNsZWFyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdFxuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ29uVW5sb2FkJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgIFBBR0VfREFUQV9NQVAgPSB7fTtcblx0ICAgICAgICBjb2xsZWN0X2V4cC5jbGVhcigpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIF9jb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdHZhciB3YXRjaFRyYWNrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIGdldEhhc2hLZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTtcblx0dmFyIG9ic2VydmVycyA9IFtdO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBjdHg7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0Ly8gcmVsb2FkQ3R4IOeUqOS6juWNleWFg+a1i+ivle+8jOWNlea1i+S4remcgOimgeWIh+aNouaUr+S7mOWuneOAgeW+ruS/oeeOr+Wig++8jOWunumZheeUn+S6p+eOr+Wig+eUqOS4jeWIsFxuXHRleHBvcnRzLndhdGNoX2V4cG9zdXJlID0gZnVuY3Rpb24gKGNvbnRleHQsIGNvbmYsIGlzRmlyc3QsIHJlbG9hZEN0eCkge1xuXHQgIGlmICghY3R4IHx8IHJlbG9hZEN0eCkge1xuXHQgICAgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgfVxuXHQgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcblx0ICB2YXIgX2hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuaGFzaE1hcCB8fCB7fTtcblx0ICB2YXIgZHVwO1xuXHQgIFxuXHQgIHdhdGNoVHJhY2tlci53YXRjaFJlY29yZChjb25mKTtcblx0ICBcblx0ICBmdW5jdGlvbiB3YWl0IChjb3VudCkge1xuXHQgICAgaWYgKGNvdW50IDwgY29uZi5sZW5ndGgpIHtcblx0ICAgICAgdmFyIGNvbmZpZyA9IGNvbmZbY291bnRdO1xuXHQgICAgICBkdXAgPSAwO1xuXHQgICAgICBvYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuXHQgICAgICAgIGlmIChlbGVtZW50LnN1YmplY3RbMF0gPT09IGNvbmZpZy5jc3NTZWxlY3RvciAmJlxuXHQgICAgICAgICAgZWxlbWVudC5zdWJqZWN0WzFdID09PSBjb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgICAgZHVwID0gMTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICB2YXIgc3ViamVjdCA9IFtjb25maWcuY3NzU2VsZWN0b3IsIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yXTtcblx0ICAgICAgZnVuY3Rpb24gaGFzaGluZyAoY2FsbGJhY2spIHtcblx0ICAgICAgICB2YXIgY3NzU2VsZWN0b3IgPSBzdWJqZWN0WzBdO1xuXHQgICAgICAgIGlmIChjc3NTZWxlY3RvciAmJiAhdXRpbERhc2guaXNTdGFydFdpdGgoc3ViamVjdFswXSwgJy4nKSkge1xuXHQgICAgICAgICAgY3NzU2VsZWN0b3IgPSAnLicgKyBjc3NTZWxlY3Rvcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHZhciBlbGVtZW50cyA9IGN0eC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKGNzc1NlbGVjdG9yKTsgICAgICAgICAgXG5cdCAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRzLmZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBlbGVtZW50cy5maWVsZHMoe1xuXHQgICAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG5cdCAgICAgICAgICAgICAgaWQ6IHRydWUsXG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJldCkge1xuXHQgICAgICAgICAgICAgIGlmIChyZXQgJiYgdXRpbEFycmF5LmlzQXJyYXkocmV0KSkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgICAgcmV0W2ldLmluZGV4ID0gJycgKyAoaSArIDEpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soe1xuXHQgICAgICAgICAgICAgICAgICBlbGVtZW50czogcmV0LFxuXHQgICAgICAgICAgICAgICAgICB0eXBlOiAnQ09NTU9OJ1xuXHQgICAgICAgICAgICAgICAgfSk7ICBcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pLmV4ZWMoKTsgIFxuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY29uc29sZS53YXJuKCfor6XlubPlj7DkuI3mlK/mjIHoh6rliqjmm53lhYknKTtcblx0ICAgICAgICAgICAgLy8gLy8g5pSv5LuY5a6d5bmz5Y+w5LiN5pSv5oyBZmllbGRz77yM57uf5LiA5L2/55SoQ1NTU2VsZWN0b3LpgInkuK3nmoTlhYPntKDntKLlvJXlgZrllK/kuIDmoIflv5dcblx0ICAgICAgICAgICAgLy8gZWxlbWVudHMuYm91bmRpbmdDbGllbnRSZWN0KCkuZXhlYyhmdW5jdGlvbiAocmV0KSB7XG5cdCAgICAgICAgICAgIC8vICAgaWYgKHJldCAmJiByZXQubGVuZ3RoID4gMCAmJiByZXRbMF0pIHtcblx0ICAgICAgICAgICAgLy8gICAgIHZhciBfZWxlbWVudHMgPSBbXTtcblx0ICAgICAgICAgICAgLy8gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0WzBdLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIC8vICAgICAgIHZhciByID0gcmV0WzBdW2ldO1xuXHQgICAgICAgICAgICAvLyAgICAgICBpZiAocikge1xuXHQgICAgICAgICAgICAvLyAgICAgICAgIF9lbGVtZW50cy5wdXNoKHtcblx0ICAgICAgICAgICAgLy8gICAgICAgICAgIGluZGV4OiAnJyArIChpICsgMSlcblx0ICAgICAgICAgICAgLy8gICAgICAgICB9KTsgIFxuXHQgICAgICAgICAgICAvLyAgICAgICB9XG5cdCAgICAgICAgICAgIC8vICAgICB9XG5cdCAgICAgICAgICAgIC8vICAgICBjYWxsYmFjayh7XG5cdCAgICAgICAgICAgIC8vICAgICAgIGVsZW1lbnRzOiBfZWxlbWVudHMsXG5cdCAgICAgICAgICAgIC8vICAgICAgIHR5cGU6ICdBTElQQVknXG5cdCAgICAgICAgICAgIC8vICAgICB9KTsgIFxuXHQgICAgICAgICAgICAvLyAgIH1cblx0ICAgICAgICAgICAgLy8gfSk7ICBcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgIGNvbnNvbGUud2Fybign6K+l5bmz5Y+w5LiN5pSv5oyB6Ieq5Yqo5pud5YWJLCBlcnIgPSAnLCBlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBoYXNoaW5nKGZ1bmN0aW9uIChvcHRzKSB7XG5cdCAgICAgICAgLy8gdmFyIHR5cGUgPSBvcHRzLnR5cGU7XG5cdCAgICAgICAgdmFyIGVsZW1lbnRzID0gb3B0cy5lbGVtZW50cyB8fCBbXTsgICAgICAgIFxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIHZhciBlID0gZWxlbWVudHNbaV07XG5cdCAgICAgICAgICBpZiAoZHVwID09PSAwIHx8IGlzRmlyc3QgPT09IDApIHtcblx0ICAgICAgICAgICAgdmFyIG5ld09ic2VydmVyID0gaW5pdE9ic2VydmVyKGNvbnRleHQpO1xuXHQgICAgICAgICAgICBuZXdPYnNlcnZlci5zdWJqZWN0ID0gc3ViamVjdDtcblx0ICAgICAgICAgICAgb2JzZXJ2ZXJzLnB1c2gobmV3T2JzZXJ2ZXIpO1xuXHQgICAgICAgICAgICBpZiAoZS5pbmRleCAmJiAhY2hlY2tJc0luSGFzaE1hcChlLCBjb25maWcpKSB7XG5cdCAgICAgICAgICAgICAgdXBkYXRlSGFzaE1hcChlLCBjb25maWcpO1xuXHQgICAgICAgICAgICAgIGFkZE9ic2VydmUobmV3T2JzZXJ2ZXIsIGNvbmZpZywgZS5pbmRleCwgZnVuY3Rpb24gKGVudHJ5LCBfY29uZmlnLCBfaW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChfaW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgICAgdmFyIF9lbnRyeSA9IGNsb25lRGVlcChlbnRyeSk7XG5cdCAgICAgICAgICAgICAgICAgIF9lbnRyeS5pbmRleCA9ICcnICsgX2luZGV4O1xuXHQgICAgICAgICAgICAgICAgICB2YXIgZGF0YXNldCA9IGNsb25lRGVlcChfZW50cnkuZGF0YXNldCk7XG5cdCAgICAgICAgICAgICAgICAgIHVwZGF0ZUhhc2hNYXAoe1xuXHQgICAgICAgICAgICAgICAgICAgIGlkOiBfZW50cnkuaWQsXG5cdCAgICAgICAgICAgICAgICAgICAgaW5kZXg6IF9lbnRyeS5pbmRleCxcblx0ICAgICAgICAgICAgICAgICAgICBkYXRhc2V0OiBkYXRhc2V0LFxuXHQgICAgICAgICAgICAgICAgICB9LCBfY29uZmlnKTtcblx0ICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2RhdGFzZXQgPT09ICcsIGRhdGFzZXQsICdfZW50cnkuaW5kZXggPT09ICcsIF9lbnRyeS5pbmRleCk7XG5cdCAgICAgICAgICAgICAgICAgIGV4cG9zdXJlSGFuZGxlKF9lbnRyeSwgZGF0YXNldCwgY29uZmlnKTsgIFxuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5jb3VudCgnZW1wdHkgaW5kZXgnKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB3YWl0KCsrY291bnQpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgd2FpdCgwKTtcblx0XG5cdCAgZnVuY3Rpb24gY2hlY2tJc0luSGFzaE1hcCAoZWxlbWVudCwgY29uZmlnKSB7XG5cdCAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZWxlbWVudCwgY29uZmlnKTtcblx0ICAgIHZhciBpbmRleCA9IGVsZW1lbnQuaW5kZXg7XG5cdCAgICBpZiAoX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0pIHtcblx0ICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0uZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG5cdCAgICAgICAgaWYgKGVsZW1lbnQuaGFzaF92YWx1ZSA9PT0gaGFzaCAmJiBlbGVtZW50LmluZGV4ID09PSBpbmRleCkge1xuXHQgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtcyB7T2JqZWN0fSBlIHtcblx0ICAgKiAgIGlkLCBkYXRhc2V0LCBwb3NpdGlvblxuXHQgICAqIH1cblx0ICAgKi9cblx0ICBmdW5jdGlvbiB1cGRhdGVIYXNoTWFwKGUsIGNvbmZpZykge1xuXHQgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGUsIGNvbmZpZyk7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgaW5kZXggPSBlLmluZGV4O1xuXHQgICAgICBpZiAoX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0pIHtcblx0ICAgICAgICB2YXIgZXhpc3QgPSAwO1xuXHQgICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuXHQgICAgICAgICAgaWYgKGVsZW1lbnQuaGFzaF92YWx1ZSA9PT0gaGFzaCkge1xuXHQgICAgICAgICAgICBleGlzdCA9IDE7XG5cdCAgICAgICAgICAgIGlmIChlLmlkKSBlbGVtZW50LmlkID0gZS5pZDtcblx0ICAgICAgICAgICAgaWYgKGUuZGF0YXNldCkgZWxlbWVudC5kYXRhc2V0ID0gZS5kYXRhc2V0O1xuXHQgICAgICAgICAgICBpZiAoZS5zdGF0dXMpIGVsZW1lbnQuc3RhdHVzID0gZS5zdGF0dXM7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgaWYgKCFleGlzdCkge1xuXHQgICAgICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0ucHVzaCh7XG5cdCAgICAgICAgICAgIGlkOiBlLmlkLFxuXHQgICAgICAgICAgICBoYXNoX3ZhbHVlOiBoYXNoLFxuXHQgICAgICAgICAgICBzdGF0dXM6IDAsXG5cdCAgICAgICAgICAgIGV4cENvbmZpZzogY29uZmlnLFxuXHQgICAgICAgICAgICBkYXRhc2V0OiBlLmRhdGFzZXQsXG5cdCAgICAgICAgICAgIGluZGV4OiBpbmRleFxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldID0gW3tcblx0ICAgICAgICAgIGlkOiBlLmlkLFxuXHQgICAgICAgICAgaGFzaF92YWx1ZTogaGFzaCxcblx0ICAgICAgICAgIHN0YXR1czogMCxcblx0ICAgICAgICAgIGV4cENvbmZpZzogY29uZmlnLFxuXHQgICAgICAgICAgZGF0YXNldDogZS5kYXRhc2V0LFxuXHQgICAgICAgICAgaW5kZXg6IGluZGV4XG5cdCAgICAgICAgfV07XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgY29uc29sZS5sb2coJ2Vycm9yID09PSAnLCBlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGluaXRPYnNlcnZlcihjb250ZXh0KSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9e1xuXHQgICAgICB0aHJlc2hvbGRzOiBbX2NvbmZpZy5BVVRPX0FUX1ZJRVdfUkFURV0sXG5cdCAgICAgIGluaXRpYWxSYXRpbzogMFxuXHQgICAgfTtcblx0ICAgIHZhciBpc01ZID0gZmFsc2U7XG5cdCAgICB0cnkge1xuXHQgICAgICBpZiAobXkpIHtcblx0ICAgICAgICBpc01ZID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIGlmIChpc01ZKSB7XG5cdCAgICAgIC8vIOiaguiageeahOabneWFieebkeWQrOWSjOW+ruS/oeS4jeS4gOiHtO+8jGh0dHBzOi8vZGV2ZWxvcGVycy53ZWl4aW4ucXEuY29tL21pbmlwcm9ncmFtL2Rldi9hcGkvd3htbC93eC5jcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlci5odG1sXG5cdCAgICAgIC8vIGh0dHBzOi8vb3BlbmRvY3MuYWxpcGF5LmNvbS9taW5pL2FwaS9pbnRlcnNlY3Rpb25vYnNlcnZlclxuXHQgICAgICBvcHRpb25zLnNlbGVjdEFsbCA9IHRydWU7XG5cdCAgICAgIHJldHVybiBjdHguY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIob3B0aW9ucyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvcHRpb25zLm9ic2VydmVBbGwgPSB0cnVlO1xuXHQgICAgICByZXR1cm4gY3R4LmNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyKGNvbnRleHQsIG9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYWRkT2JzZXJ2ZShvYnNlcnZlciwgY29uZmlnLCBpbmRleCwgY2FsbGJhY2spIHtcblx0ICAgIHZhciBjc3MgPSBjb25maWcuY3NzU2VsZWN0b3I7XG5cdCAgICBpZiAoY3NzICYmICF1dGlsRGFzaC5pc1N0YXJ0V2l0aChjc3MsICcuJykpIHtcblx0ICAgICAgY3NzID0gJy4nICsgY3NzO1xuXHQgICAgfVxuXHQgICAgaWYgKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgIG9ic2VydmVyLnJlbGF0aXZlVG8oY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpLm9ic2VydmUoY3NzLCBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGNhbGxiYWNrKHJlcywgY29uZmlnLCBpbmRleCk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yTWVzc2FnZTogJywgZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9ic2VydmVyLnJlbGF0aXZlVG9WaWV3cG9ydCgpLm9ic2VydmUoY3NzLCBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGNhbGxiYWNrKHJlcywgY29uZmlnLCBpbmRleCk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yTWVzc2FnZTogJywgZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGV4cG9zdXJlSGFuZGxlIChlbnRyeSwgZGF0YXNldCwgY29uZmlnKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciBleHBvc3VyZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0ICAgIHZhciBleHBFbGVtZW50cyA9IGNoZWNrU3RhcnQoZXhwb3N1cmVUaW1lLCBlbnRyeSwgY29uZmlnKTtcblx0ICAgIFxuXHQgICAgaWYgKGV4cEVsZW1lbnRzICYmIGV4cEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIGVsZW1lbnQgPSBleHBFbGVtZW50c1swXTtcblx0ICAgICAgLy8g5Y+WZGF0YS10cmFja2VyIOaIliBjc3NTZWxlY3RvclxuXHQgICAgICB2YXIgc3BtQyA9IGRhdGFzZXQudHJhY2tlciB8fCBjb25maWcuY3NzU2VsZWN0b3IucmVwbGFjZSgvXFwnfFxcXCJ8XFw7fFxcOnxcXD18XFxbfFxcXXxcXC58XFwjfFxcLXxcXC98XFx8L2csICcnKTsgLy8g5Y675o6J54m55q6K5a2X56ymXG5cdCAgICAgIC8vIOabneWFieinpuWPkeeahHNwbeS4jeaxoeafk+WFqOWxgGFwbHVzLl8kLnNwbS5kYXRh77yM5pWF6L+Z6YeM5YGa5rex5ou36LSdXG5cdFxuXHQgICAgICB2YXIgc3BtRGF0YSA9IHt9O1xuXHQgICAgICB2YXIgX3NwbURhdGEgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZGF0YXNldC50cmFja2VyUGFyYW1zIHx8IHt9KSB8fCB7fTtcblx0ICAgICAgdmFyIF9pbmRleCA9IGVsZW1lbnQuaW5kZXg7XG5cdCAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICBzcG1EYXRhID0gY2xvbmVEZWVwKGFwbHVzLl8kLnNwbS5kYXRhIHx8IHt9KTtcblx0ICAgICAgICBzcG1EYXRhLmMgPSBzcG1DO1xuXHQgICAgICAgIGlmIChzcG1EYXRhLmMgJiYgc3BtRGF0YS5jICE9PSAnMCcpIHtcblx0ICAgICAgICAgIHZhciBzcG1EID0gJ2QnICsgX2luZGV4O1xuXHQgICAgICAgICAgc3BtRGF0YS5kID0gc3BtRDtcblx0ICAgICAgICB9ICBcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSkge1xuXHQgICAgICAgICAgc3BtRGF0YS5iID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgXG5cdCAgICAgICAgaWYgKGNvbmZpZy5zcG1DKSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmMgPSBjb25maWcuc3BtQztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3BtRGF0YS5jID0gX3NwbURhdGEuc3BtQyA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1DKSA6ICcnO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGNvbmZpZy5zcG1EKSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmQgPSBfaW5kZXggPyBjb25maWcuc3BtRCArICdfJyArIF9pbmRleCA6IGNvbmZpZy5zcG1EO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmQgPSBfc3BtRGF0YS5zcG1EID8gZW5jb2RlVVJJQ29tcG9uZW50KF9zcG1EYXRhLnNwbUQpIDogJyc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICB3YXRjaFRyYWNrZXIucHVzaEV2ZW50KCdFWFAnLCBkYXRhc2V0LCBjb25maWcsIE9iamVjdC5hc3NpZ24oe30sIGVudHJ5LCB7XG5cdCAgICAgICAgeDogZWxlbWVudC54LFxuXHQgICAgICAgIHk6IGVsZW1lbnQueSxcblx0ICAgICAgICB3aWR0aDogZWxlbWVudC53aWR0aCxcblx0ICAgICAgICBoZWlnaHQ6IGVsZW1lbnQuaGVpZ2h0LFxuXHQgICAgICAgIGhhc2hfdmFsdWU6IGVsZW1lbnQuaGFzaF92YWx1ZVxuXHQgICAgICB9KSwgc3BtRGF0YSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjaGVja1N0YXJ0IChleHBvc3VyZVRpbWUsIGVudHJ5LCBjb25maWcpIHtcblx0ICAgIC8vIHZhciBzaXplID0gMDtcblx0ICAgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcblx0ICAgIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuXHQgICAgdmFyIHRlbXBzID0gW107XG5cdCAgICBmb3IgKHZhciBsb2drZXkgaW4gX2hhc2hNYXApIHtcblx0ICAgICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVfcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIC8vIHZhciBzdHJpbmcgPSBjb25maWcubG9na2V5ICsgJ18nICsgY29uZmlnLmNzc1NlbGVjdG9yICsgJ18nXG5cdCAgICAgICAgLy8gICAgICAgICAgICAgICsgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IgKyAnXycgKyBvcHRzLmlkICsgSlNPTi5zdHJpbmdpZnkob3B0cy5kYXRhc2V0KTtcblx0ICAgICAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZW50cnksIGNvbmZpZyk7XG5cdCAgICAgICAgdmFyIHYgPSBlbGVfc1tpXSB8fCB7fTtcblx0ICAgICAgICBpZiAodi5zdGF0dXMgPT09IDAgJiYgdi5leHBDb25maWcgJiYgaGFzaCA9PT0gdi5oYXNoX3ZhbHVlKSB7XG5cdCAgICAgICAgICB2YXIgX2VsZVBvcyA9IGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdCB8fCB7fTtcblx0ICAgICAgICAgIGlmIChfZWxlUG9zLndpZHRoICYmIF9lbGVQb3MuaGVpZ2h0KSB7XG5cdCAgICAgICAgICAgIHYuZGF0YXNldCA9IGVudHJ5LmRhdGFzZXQ7XG5cdCAgICAgICAgICAgIHYueCA9IF9lbGVQb3MubGVmdDtcblx0ICAgICAgICAgICAgdi55ID0gX2VsZVBvcy50b3A7XG5cdCAgICAgICAgICAgIHYud2lkdGggPSBfZWxlUG9zLndpZHRoO1xuXHQgICAgICAgICAgICB2LmhlaWdodCA9IF9lbGVQb3MuaGVpZ2h0O1xuXHQgICAgICAgICAgICB2LnNpemUgPSBfZWxlUG9zLndpZHRoICogX2VsZVBvcy5oZWlnaHQ7XG5cdCAgICAgICAgICAgIGlmIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+PSBfY29uZmlnLkFVVE9fQVRfVklFV19SQVRFKSB7XG5cdCAgICAgICAgICAgICAgdi5leHBvc3VyZVRpbWUgPSBleHBvc3VyZVRpbWU7XG5cdCAgICAgICAgICAgICAgdi5zdGF0dXMgPSAxOyAvLyDmm53lhYnnirbmgIFcblx0ICAgICAgICAgICAgICB0ZW1wcy5wdXNoKHYpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGVtcHM7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5yZXNldCA9IGZ1bmN0aW9uICgpIHt9O1xuXHRcblx0ZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB3YXRjaFRyYWNrZXIuY2xlYXJSZWNvcmQoKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgb2JzZXJ2ZXJzW2ldLmRpc2Nvbm5lY3QoKTtcblx0ICB9XG5cdCAgb2JzZXJ2ZXJzID0gW107XG5cdCAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuXHQgIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuXHQgIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuXHQgICAgZGVsZXRlIF9oYXNoTWFwW2xvZ2tleV07XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHR2YXIgdXRpbE1ldGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyKTtcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdGV4cG9ydHMuREFUQV9BUExVU19BRV9LRVkgPSAnZGF0YS1hcGx1cy1hZSc7XG5cdGV4cG9ydHMuREFUQV9BUExVU19BQ19LRVkgPSAnZGF0YS1hcGx1cy1jbGsnO1xuXHRleHBvcnRzLkRBVEFfQVBMVVNfU1BNX0FOQ0hPUl9JRF9LRVkgPSAnZGF0YS1zcG0tYW5jaG9yLWlkJztcblx0ZXhwb3J0cy5EQVRBX0FQTFVTX1ZUX0lURU1fSU5ERVhfS0VZID0gJ2RhdGEtYXBsdXMtdnQtcG9zJztcblx0XG5cdC8vIOS4jeaUr+aMgW9ic2VydmVy55qE5oOF5Ya15LiL77yM6L2u6K+i6Ze06ZqU77yIbXMpXG5cdGV4cG9ydHMuTE9PUF9USU1FID0gMTAwMDtcblx0XG5cdGV4cG9ydHMuZ2V0RGVmYXVsdFJlcXVlc3RDZmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIG1ldGhvZDogJ1BPU1QnLFxuXHQgICAgcGtnU2l6ZTogMTBcblx0ICB9O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0TWV0YVZhbHVlIChrZXkpIHtcblx0ICBpZiAoYXBsdXMgJiYgYXBsdXMuZ2V0TWV0YUluZm8pIHtcblx0ICAgIHJldHVybiBhcGx1cy5nZXRNZXRhSW5mbyhrZXkpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gdXRpbE1ldGEuZ2V0TWV0YUNudChrZXkpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8g6Ieq5Yqo5pud5YWJ5omT54K5IC0g5Yik5a6a5Y+v6KeG55qE5q+U5L6L546HXG5cdHZhciBnZXRBdXRvRXhwVmlld1JhdGUgPSBmdW5jdGlvbihkZWZhdWx0X3ZhbHVlKSB7XG5cdCAgdmFyIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgdmlzaWJsZV9yYXRlID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC12aXNpYmxlJyk7XG5cdCAgICBpZiAodmlzaWJsZV9yYXRlKSB7XG5cdCAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KHZpc2libGVfcmF0ZSk7XG5cdCAgICB9XG5cdCAgICBpZiAocmF0ZSA8PSAwKSB7XG5cdCAgICAgIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiByYXRlO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5BVVRPX0FUX1ZJRVdfUkFURSA9IGdldEF1dG9FeHBWaWV3UmF0ZSgwLjMpO1xuXHRcblx0Ly8gdmFyIEVYUF9ERUJPVU5DRV9EVVJBVElPTiA9IDEwMDsgLy8gZGVib3VjZSBkdXJhdGlvbiAxMDBtc1xuXHRcblx0LyoqXG5cdCAqIOacieaViOabneWFieaXtumVv+W6lee6vyAtIOavq+enkuaVsChtcylcblx0ICogQHBhcmFtcyB7TnVtYmVyfSBkZWZhdWx0X3ZhbHVlIGlzIDMwMG1zXG5cdCAqIEByZXR1cm4ge051bWJlcn0gZHVyYXRpb25cblx0ICovXG5cdHZhciBnZXRBdXRvRXhwRHVyYXRpb24gPSBmdW5jdGlvbihkZWZhdWx0X3ZhbHVlKSB7XG5cdCAgdmFyIGR1cmF0aW9uID0gZGVmYXVsdF92YWx1ZTtcblx0ICB0cnkge1xuXHQgICAgdmFyIHRtcF9kdXJhdGlvbiA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtZHVyYXRpb24nKTtcblx0ICAgIHZhciBkdXJhdGlvbl9uID0gcGFyc2VJbnQodG1wX2R1cmF0aW9uKTtcblx0ICAgIGlmICgoZHVyYXRpb25fbiArICcnKSAhPT0gJ05hTicpIHtcblx0ICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbl9uO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSkge1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gZHVyYXRpb247XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLkVYUF9EVVJBVElPTiA9IGdldEF1dG9FeHBEdXJhdGlvbigzMDApOyAvL+m7mOiupDMwMG1zXG5cdFxuXHQvLyBkZWJvdWNlIGR1cmF0aW9uIDEwMG1zXG5cdC8vIGV4cG9ydHMuZ2V0RGVib3VuY2VEdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gICByZXR1cm4gRVhQX0RFQk9VTkNFX0RVUkFUSU9OO1xuXHQvLyB9O1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPluiHquWKqOabneWFiemFjee9rumhue+8jOW5tuWwhmZpbHRlcuOAgXRhZ+WSjGNzc1NlbGVjdG9y5ZCI5bm25Li6ZWxlbWVudFNlbGVjdG9yXG5cdCAqIFRPRE8gSlNPTi5wYXJzZSDku4XmlK/mjIFJRTjlj4rku6XkuIrmtY/op4jlmaggPT4ganMgYXBpXG5cdCAqIEBwYXJhbXMga2V5IHtTdHJpbmd9ICdhcGx1cy1hdXRvLWV4cCcvJ2FwbHVzLWF1dG8tY2xrJ1xuXHQgKiBAcmV0dXJuIHtBcnJheX0gW3tcblx0ICogICAgbG9na2V5OiAvYS5iLmMxLFxuXHQgKiAgICBlbGVtZW50U2VsZWN0b3I6ICdkaXZbc2NtPTEyMzRdJyxcblx0ICogICAgdGFnOiBkaXYsXG5cdCAqICAgIGZpbHRlcjogc2NtPTEyMzRcblx0ICogICAgcG9zaXRpb25TZWxlY3RvcjogdHJ1ZS8ucGFyZW50Q2xhc3NuYW1lIC8vIOebuOWvueWumuS9jeS4muWKoeWfi+eCuVxuXHQgKiB9LCB7XG5cdCAqICAgIGxvZ2tleTogL2EuYi5jMixcblx0ICogICAgZWxlbWVudFNlbGVjdG9yOiAncFtzY209MjM0NV0ub25lJyxcblx0ICogICAgdGFnOiBwLFxuXHQgKiAgICBmaWx0ZXI6IHNjbT0yMzQ1LFxuXHQgKiAgICBjc3NTZWxlY3RvcjogLm9uZVxuXHQgKiB9LCB7XG5cdCAqICAgIGxvZ2tleTogL2EuYi5jMyxcblx0ICogICAgZWxlbWVudFNlbGVjdG9yOiAncFtkYXRhLXNwbS1jbGlja10nLFxuXHQgKiAgICB0YWc6IHAsXG5cdCAqICAgIGZpbHRlcjogZGF0YS1zcG0tY2xpY2tcblx0ICogfV1cblx0ICovXG5cdHZhciBnZXRBdXRvQ29uZmlnID0gZnVuY3Rpb24oY29uZmlnS2V5LCBtZXRhT2JqKSB7XG5cdCAgdmFyIGNvbmZpZ3MgPSBbXTtcblx0ICAvLyB2YXIgdG1wX2xvZ2tleXMgPSBbXTtcblx0ICB2YXIgdG1wX3RhZ19maWx0ZXIgPSBbXTtcblx0ICB2YXIgYXBsdXNBdXRvRXhwO1xuXHQgIHRyeSB7XG5cdCAgICBhcGx1c0F1dG9FeHAgPSBtZXRhT2JqIHx8IGdldE1ldGFWYWx1ZShjb25maWdLZXkpO1xuXHQgICAgdmFyIHRlbXBzID0gW107XG5cdCAgICBpZiAoYXBsdXNBdXRvRXhwICYmIHR5cGVvZiBhcGx1c0F1dG9FeHAgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdGVtcHMgPSBKU09OLnBhcnNlKGFwbHVzQXV0b0V4cCk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0ZW1wcyA9IEpTT04ucGFyc2UoYXBsdXNBdXRvRXhwLnJlcGxhY2UoLycvZywgJ1wiJykpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcGx1c0F1dG9FeHAgPT09ICdvYmplY3QnICYmIGFwbHVzQXV0b0V4cC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcblx0ICAgICAgdGVtcHMgPSBhcGx1c0F1dG9FeHA7XG5cdCAgICB9XG5cdCAgICBpZiAodGVtcHMgJiYgdGVtcHMuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgdG1wID0gdGVtcHNbaV0gfHwge307XG5cdCAgICAgICAgdmFyIGxvZ2tleSA9IHRtcC5sb2drZXkgfHwgJyc7XG5cdCAgICAgICAgdmFyIHRhZyA9IHRtcC50YWcgPyB0bXAudGFnIDogJyc7XG5cdCAgICAgICAgdmFyIGZpbHRlciA9IHRtcC5maWx0ZXI7XG5cdCAgICAgICAgdmFyIGNzc1NlbGVjdG9yID0gdG1wLmNzc1NlbGVjdG9yO1xuXHQgICAgICAgIHZhciB3aG9sZVNlbGVjdG9yID0gY3NzU2VsZWN0b3IgfHwgKHRhZyAmJiBmaWx0ZXIpO1xuXHQgICAgICAgIGlmICghbG9na2V5IHx8ICF3aG9sZVNlbGVjdG9yKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCAnICsgSlNPTi5zdHJpbmdpZnkodG1wKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIDIwMTctMTEtMjMg5omL5reY5o6l5YWl5ZKMbGF6YWRh5Lia5Yqh6ZyA5rGC77yM5YWB6K64bG9na2V56YeN5aSNXG5cdCAgICAgICAgLy8gaWYgKHV0aWxBcnJheS5pbmRleG9mKHRtcF9sb2drZXlzLCBsb2drZXkpID4gLTEpIHtcblx0ICAgICAgICAvLyAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsIGxvZ2tleSAnICsgbG9na2V5ICsgJyByZXBlYXRlZCcpO1xuXHQgICAgICAgIC8vIH1cblx0ICAgICAgICBmaWx0ZXIgPSB0eXBlb2YgZmlsdGVyID09PSAnc3RyaW5nJyA/IGZpbHRlci5zcGxpdChcIj1cIikgOiBbXTtcblx0ICAgICAgICB2YXIgdGFnX2ZpbHRlciA9IHRhZztcblx0ICAgICAgICBpZiAoZmlsdGVyLmxlbmd0aCA+PSAyKSB7XG5cdCAgICAgICAgICB0YWdfZmlsdGVyICs9ICdbJyArIGZpbHRlci5zaGlmdCgpICsgJz1cIicgKyBkZWNvZGVVUklDb21wb25lbnQoZmlsdGVyLmpvaW4oJycpKSArICdcIl0nO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLmxlbmd0aCA9PSAxICYmIGZpbHRlclswXSkge1xuXHQgICAgICAgICAgdGFnX2ZpbHRlciArPSAnWycgKyBkZWNvZGVVUklDb21wb25lbnQoZmlsdGVyWzBdKSArICddJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGNzc1NlbGVjdG9yKSB7XG5cdCAgICAgICAgICB0YWdfZmlsdGVyICs9IGNzc1NlbGVjdG9yO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdG1wLmVsZW1lbnRTZWxlY3RvciA9IHRhZ19maWx0ZXI7XG5cdCAgICAgICAgaWYgKHV0aWxBcnJheS5pbmRleG9mKHRtcF90YWdfZmlsdGVyLCB0YWdfZmlsdGVyKSA+IC0xKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCB0YWdfZmlsdGVyX2Nzc1NlbGVjdG9yICcgKyB0YWdfZmlsdGVyICsgJyByZXBlYXRlZCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyB0bXBfbG9na2V5cy5wdXNoKGxvZ2tleSk7XG5cdCAgICAgICAgdG1wX3RhZ19maWx0ZXIucHVzaCh0YWdfZmlsdGVyKTtcblx0ICAgICAgICBjb25maWdzLnB1c2godG1wKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgLy8gVE9ETyDnm5Hmjqfov5nlnZflhoXlrrlcblx0ICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgbXNnOiBlcnJcblx0ICAgIH0pO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gY29uZmlncztcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog6I635Y+W5pud5YWJ6Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG5cdCAqL1xuXHRleHBvcnRzLmdldEF1dG9FeHBDb25maWcgPSBmdW5jdGlvbihtZXRhT2JqKSB7XG5cdCAgcmV0dXJuIGdldEF1dG9Db25maWcoJ2FwbHVzLWF1dG8tZXhwJywgbWV0YU9iaikgfHwgW107XG5cdH07XG5cdC8qKlxuXHQgKiDojrflj5bmm53lhYnoh6rliqjph4fpm4bnmoTphY3nva7poblcblx0ICovXG5cdGV4cG9ydHMuZ2V0QXV0b0V4cFVzZXJGbiA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhZUF1dG9Vc2VyRm4gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLXVzZXJmbicpO1xuXHQgIGlmIChhZUF1dG9Vc2VyRm4pIHtcblx0ICAgIHZhciBmbiA9IHdpbmRvd1thZUF1dG9Vc2VyRm5dIHx8IGFlQXV0b1VzZXJGbjtcblx0ICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblx0XG5cdC8vIDxtZXRhIG5hbWU9XCJhcGx1cy1hdXRvLWV4cC13YXRjaGRvbVwiIGNvbnRlbnQ9XCJ0aHJvdHRsZVwiIC8+XG5cdGV4cG9ydHMuaXNUaHJvdHRsZVdhdGNoRG9tID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBycyA9IGZhbHNlO1xuXHQgIHRyeSB7XG5cdCAgICBycyA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtd2F0Y2hkb20nKSA9PT0gJ3Rocm90dGxlJztcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgfVxuXHQgIHJldHVybiBycztcblx0fTtcblx0LyoqXG5cdCAqIOiOt+WPlueCueWHu+iHquWKqOmHh+mbhueahOmFjee9rumhuVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRBdXRvQ2xrQ29uZmlnID0gZnVuY3Rpb24obWV0YU9iaikge1xuXHQgIHJldHVybiBnZXRBdXRvQ29uZmlnKCdhcGx1cy1hdXRvLWNsaycsIG1ldGFPYmopIHx8IFtdO1xuXHR9O1xuXHQvKipcblx0ICog6I635Y+W54K55Ye76Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG5cdCAqL1xuXHRleHBvcnRzLmdldEF1dG9DbGtVc2VyRm4gPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYWNBdXRvVXNlckZuID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWNsay11c2VyZm4nKTtcblx0ICBpZiggYWNBdXRvVXNlckZuICl7XG5cdCAgICB2YXIgZm4gPSB3aW5kb3dbYWNBdXRvVXNlckZuXSB8fCBhY0F1dG9Vc2VyRm47XG5cdCAgICBpZiggdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICl7XG5cdCAgICAgIHJldHVybiBmbjtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG51bGw7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5pWw57uE5bel5YW3XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIElFOOS4jeaUr+aMgeaVsOe7hOWOn+eUn+eahGluZGV4T2bvvIzmlYXoh6rooYzlrp7njrDkuIDkuKppbmRleG9mXG5cdCAqIEBwYXJhbSBbQXJyYXldIGFyclxuXHQgKiBAcGFyYW0gW09iamVjdF0gaXRlbVxuXHQgKiBAcmV0dXJuIFtOdW1iZXJdIGluZGV4XG5cdCAqL1xuXHRleHBvcnRzLmluZGV4b2YgPSBmdW5jdGlvbihhcnIsIGl0ZW0pIHtcblx0ICB2YXIgaW5kZXggPSAtMTtcblx0ICB0cnkge1xuXHQgICAgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuXHQgICAgICBpZiAoYXJyW2pdID09PSBpdGVtKSB7XG5cdCAgICAgICAgaW5kZXggPSBqO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiBpbmRleDtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLml0ZW1NYXRjaCA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuXHQgIHZhciBtYXRjaGVkID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIGlmICghdGhpcy5pc0FycmF5KGFycikpIHtcblx0ICAgICAgcmV0dXJuIG1hdGNoZWQ7XG5cdCAgICB9XG5cdCAgICBtYXRjaGVkID0gYXJyLnNvbWUoZnVuY3Rpb24ocykge1xuXHQgICAgICByZXR1cm4gKHMgJiYgcy5sZW5ndGggPiAwKSAmJiBpdGVtLmluZGV4T2YocykgIT09IC0xO1xuXHQgICAgfSk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuXHQgICAgICBpZiAoaXRlbS5pbmRleE9mKGFycltqXSkgIT09IC0xKSB7XG5cdCAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG1hdGNoZWQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzQXJyYXkgPSBmdW5jdGlvbiAobykge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KSB7XG5cdCAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIC9BcnJheS8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDUyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDmk43kvZxtZXRh55qE5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9oZWFkX25vZGU7XG5cdHZhciBfbWV0YV9ub2Rlcztcblx0XG5cdHZhciB1dGlsQXR0cmlidXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdC8qKlxuXHQgKiDlj5blvpfpobXpnaLkuIogaGVhZCDkuK3nmoTmiYDmnIkgbWV0YSDlhYPntKBcblx0ICogQHBhcmFtIFtmb3JjZV0ge2Jvb2xlYW59IOaYr+WQpuW8uuWItuiOt+WPluaWsOWGheWuuVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWV0YVRhZ3MoZm9yY2UpIHtcblx0ICBfaGVhZF9ub2RlID0gX2hlYWRfbm9kZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuXHRcblx0ICBpZiAoX21ldGFfbm9kZXMgJiYgIWZvcmNlKSB7XG5cdCAgICByZXR1cm4gX21ldGFfbm9kZXM7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gX2hlYWRfbm9kZSA/IChfbWV0YV9ub2RlcyA9IF9oZWFkX25vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21ldGEnKSkgOiBbXTtcblx0fTtcblx0ZXhwb3J0cy5nZXRNZXRhVGFncyA9IGdldE1ldGFUYWdzO1xuXHRcblx0LyoqXG5cdCAqIOWPluW+lyBoZWFkIC8gbWV0YSDkuK3mjIflrpogbWV0YSDnmoQgKGF0dHIgfHwgY29udGVudCkg5YC8XG5cdCAqIDxtZXRhIG5hbWU9XCJhcGx1cy10ZXJtaW5hbFwiIGNvbnRlbnQ9XCIxXCI+XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRNZXRhQ250KG5hbWUsIGF0dHIpIHtcblx0ICB2YXIgaTtcblx0ICB2YXIgbWV0YTtcblx0ICB2YXIgbWV0YV9ub2RlcyA9IGdldE1ldGFUYWdzKCk7XG5cdCAgdmFyIGwgPSBtZXRhX25vZGVzLmxlbmd0aDtcblx0ICB2YXIgY29udGVudDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgbWV0YSA9IG1ldGFfbm9kZXNbaV07XG5cdCAgICBpZiAodXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCAnbmFtZScpID09PSBuYW1lKSB7XG5cdCAgICAgIGNvbnRlbnQgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsIGF0dHIgfHwgJ2NvbnRlbnQnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBjb250ZW50IHx8ICcnO1xuXHR9O1xuXHRleHBvcnRzLmdldE1ldGFDbnQgPSBnZXRNZXRhQ250O1xuXHRcblx0XG5cdC8qKlxuXHQgKiDnoa7lrpogaGVhZCAvIG1ldGEg5Lit55qEIGlzb25lcGFnZSDnmoTmlbDmja5cblx0ICog5b2i5aaC77yaXG5cdCAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMFwiIC8+IOihqOekuuS4jeaYr29uZXBhZ2Vcblx0ICogPG1ldGEgbmFtZT1cImlzb25lcGFnZVwiIGNvbnRlbnQ9XCIxfGh0dHA6Ly9oNS5tLnRhb2Jhby5jb20vd2UvaW5kZXguaHRtI2RldGFpbFwiIC8+IOihqOekuuaYr29uZXBhZ2Vcblx0ICovXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdGZ1bmN0aW9uIGdldE9uZVBhZ2VJbmZvKG1ldGFJbmZvKSB7XG5cdCAgdmFyIG9iaiA9IHtcblx0ICAgIGlzb25lcGFnZTogJy0xJyxcblx0ICAgIHVybHBhZ2VuYW1lOiAnJ1xuXHQgIH07XG5cdCAgdmFyIG1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKTtcblx0ICBpZiAobWV0YV9pbmZvICYmIG1ldGFfaW5mby5oYXNPd25Qcm9wZXJ0eSgnaXNvbmVwYWdlX2RhdGEnKSkge1xuXHQgICAgb2JqLmlzb25lcGFnZSA9IG1ldGFfaW5mby5pc29uZXBhZ2VfZGF0YS5pc29uZXBhZ2U7XG5cdCAgICBvYmoudXJscGFnZW5hbWUgPSBtZXRhX2luZm8uaXNvbmVwYWdlX2RhdGEudXJscGFnZW5hbWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjb250ZW50ID0gZ2V0TWV0YUNudCgnaXNvbmVwYWdlJykgfHwgJy0xJztcblx0ICAgIHZhciBhcnJfY29udGVudCA9IGNvbnRlbnQuc3BsaXQoXCJ8XCIpO1xuXHQgICAgb2JqLmlzb25lcGFnZSA9IGFycl9jb250ZW50WzBdO1xuXHQgICAgb2JqLnVybHBhZ2VuYW1lID0gYXJyX2NvbnRlbnRbMV0gPyBhcnJfY29udGVudFsxXSA6IFwiXCI7XG5cdCAgfVxuXHQgIHJldHVybiBvYmo7XG5cdH07XG5cdGV4cG9ydHMuZ2V0T25lUGFnZUluZm8gPSBnZXRPbmVQYWdlSW5mbztcblxuXG4vKioqLyB9KSxcbi8qIDUzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS91dGlscy91dGlsQXR0cmlidXRlLmpzXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy50cnlUb0dldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuXHQgIHJldHVybiBlbGVtZW50ICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlID8gKGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJfbmFtZSkgfHwgJycpIDogJyc7XG5cdH07XG5cdFxuXHR2YXIgdHJ5VG9TZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cl9uYW1lLCBhdHRyX3ZhbHVlKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJfbmFtZSwgYXR0cl92YWx1ZSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLnRyeVRvU2V0QXR0cmlidXRlID0gdHJ5VG9TZXRBdHRyaWJ1dGU7XG5cdFxuXHRleHBvcnRzLnRyeVRvUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyX25hbWUpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB0cnlUb1NldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyX25hbWUsICcnKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiDlsI/nqIvluo/kuIvpnaLnmoRzcG3kvZPns7tcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOm+mempuSA8Y2hlbmdwaW5nLnJjcEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgaXNBcnJheSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0dmFyIGFwbHVzU3RhdGljICA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICByZXNldExhc3RQYWdlU3BtOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLCB7fSk7IFxuXHQgICAgICB2YXIgc3BtID0gYXBsdXMuXyQuc3BtIHx8IHt9O1xuXHQgICAgICBzcG0uc3BtX2NudCA9ICcnO1xuXHQgICAgfSxcblx0ICAgIGxpc3RlbjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVU19RVUVVRSxbXSk7ICBcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOmFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgICAgICBhcmd1bWVudHM6WydvblNob3cnLGZ1bmN0aW9uKG9wdCl7XG5cdCAgICAgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyx7fSk7IFxuXHQgICAgICAgICAgICB2YXIgcGFnZXMgPSBhcGx1cy5nZXRNZXRhSW5mbygncGFnZXMnKTtcblx0ICAgICAgICAgICAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlUGF0aCA9IHBhZ2VJbnN0YW5jZS5yb3V0ZSB8fCBwYWdlSW5zdGFuY2UuaXM7XG5cdCAgICAgICAgICAgIGlmIChpc0FycmF5KHBhZ2VzKSkge1xuXHQgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gcGFnZXNbaV07XG5cdCAgICAgICAgICAgICAgICBpZihjdXJyZW50Lm1hdGNoVXJsID09PSBjdXJyZW50UGFnZVBhdGgpe1xuXHQgICAgICAgICAgICAgICAgICBhcGx1cy5zZXRQYWdlU1BNKGN1cnJlbnQuc3BtQSwgY3VycmVudC5zcG1CKTtcblx0ICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICAgICAgYXJndW1lbnRzOlsnY2xlYXJQYWdlU1BNJyxmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBfc2VsZi5yZXNldExhc3RQYWdlU3BtKCk7XG5cdCAgICAgICAgfV0sXG5cdCAgICAgIH0pO1xuXHQgICAgICBcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEBwYXJhbXMgZGF0YSB7T2JqZWN0fSB7XG5cdCAgICAgICAqICAgc3BtQ250OiAnYS5iLjAuMCdcblx0ICAgICAgICogICBzcG1Vcmw6ICdhLmIuMC4wJ1xuXHQgICAgICAgKiAgIHNwbVByZTogJ2EuYi4wLjAnXG5cdCAgICAgICAqIH1cblx0ICAgICAgICovXG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICAgICAgYXJndW1lbnRzOlsnc2V0UGFnZVNQTScsZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLCB7fSk7IFxuXHQgICAgICAgICAgICB2YXIgc3BtID0gYXBsdXMuXyQuc3BtIHx8IHt9O1xuXHQgICAgICAgICAgICBcblx0ICAgICAgICAgICAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCkgfHwgW107XG5cdCAgICAgICAgICAgIHZhciBzcG1hYiA9IGRhdGEuc3BtQ250ID8gZGF0YS5zcG1DbnQuc3BsaXQoJy4nKSA6IFtzcG0uZGF0YS5hIHx8ICcwJywgc3BtLmRhdGEuYiB8fCAnMCddO1xuXHQgICAgICAgICAgICBpZiAoc3BtYWIubGVuZ3RoID09PSAyKSB7XG5cdCAgICAgICAgICAgICAgc3BtYWIgPSBzcG1hYi5jb25jYXQoWycwJywgJzAnXSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHNwbWFic3RyID0gc3BtYWIuam9pbignLicpO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV07XG5cdCAgICAgICAgICAgIHZhciBwcmVQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMl0gfHwge307XG5cdCAgICAgICAgICAgIHZhciBwcmVQcmVQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gM10gfHwge307XG5cdFxuXHQgICAgICAgICAgICBpZiAocGFnZXMubGVuZ3RoID4gMCAmJiBjdXJyZW50UGFnZSkge1xuXHQgICAgICAgICAgICAgIHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdLnNwbSA9IHNwbWFic3RyO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICB2YXIgY3VycmVudFBhZ2VTcG0gPSBzcG0uZGF0YSAmJiBzcG0uZGF0YS5hID8gW3NwbS5kYXRhLmEsIHNwbS5kYXRhLmIsIHNwbS5kYXRhLmMgfHwgJzAnLCBzcG0uZGF0YS5kIHx8ICcwJ10uam9pbignLicpIDogJyc7XG5cdCAgICAgICAgICAgIHNwbS5kYXRhLmEgPSBzcG1hYlswXSA/ICcnICsgc3BtYWJbMF0gOiAnMCc7XG5cdCAgICAgICAgICAgIHNwbS5kYXRhLmIgPSBzcG1hYlsxXSA/ICcnICsgc3BtYWJbMV0gOiAnMCc7XG5cdCAgICAgICAgICAgIHNwbS5kYXRhLmMgPSAnMCc7XG5cdCAgICAgICAgICAgIHNwbS5kYXRhLmQgPSAnMCc7XG5cdCAgICAgICAgICAgIHNwbS5wYWdlX3JlZmVycmVyID0gcGFnZXMubGVuZ3RoID4gMSAmJiBjdXJyZW50UGFnZSA/IChjdXJyZW50UGFnZS5yb3V0ZSB8fCBjdXJyZW50UGFnZS5pcykgOiAnJztcblx0ICAgICAgICAgICAgc3BtLnNwbV9jbnQgPSBzcG1hYnN0cjtcblx0XG5cdCAgICAgICAgICAgIC8vIOS7peeUqOaIt+WcqFVSTOS4iuaLvOaOpeeahHNwbeS4uuWHhu+8jGFwbHVzLnNwbV9vcmlnbuadpea6kOS6jmF1dG9faW5pdC9pbmplY3RfYXBwLmpzXG5cdCAgICAgICAgICAgIHZhciBzcG1fb3JpZ24gPSBhcGx1cy5zcG1fb3JpZ24gfHwgc3BtLnNwbV9vcmlnbjtcblx0ICAgICAgICAgICAgc3BtLnNwbV9wcmUgPSBkYXRhLnNwbVByZSB8fCBzcG0uc3BtX3VybCB8fCBwcmVQcmVQYWdlLnNwbSB8fCAnJztcblx0ICAgICAgICAgICAgc3BtLnNwbV91cmwgPSBkYXRhLnNwbVVybCB8fCBjdXJyZW50UGFnZVNwbSB8fCBwcmVQYWdlLnNwbSB8fCBzcG1fb3JpZ24gfHwgICcnO1xuXHQgICAgICAgICAgICBhcGx1cy5fJC5zcG0gPSBzcG07XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZXRQYWdlU1BNIGVycm9yLCB0aGUgZXJyb3JJbmZvIGlzICcsIGUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgXG5cdCAgICAgICAgfV0sXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5saXN0ZW4oKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBhcGx1c19taW5pX3JlcG9ydF91bS5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIE1haW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTtcblx0ICAgICAgdmFyIG1haW4gPSBNYWluLmNyZWF0ZSgpO1xuXHQgICAgICBtYWluLnJ1bih0aGlzLm9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBtYWluX21pbmlfdW1faHR0cC5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHQvLyB2YXIgbG9nX2Nsb3VkID0gcmVxdWlyZSgnLi9sb2dfY2xvdWQnKTtcblx0dmFyIG1haW5fYmFzZV9odHRwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7XG5cdHZhciBldmVudE1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIHJlcXVlc3RRdWV1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGlkLCBvcHRpb25zKSB7XG5cdCAgdWxvZygpLnYoJ2V2ZW50OiAnLCBpZCwgb3B0aW9ucyk7XG5cdCAgXG5cdCAgaWYgKHV0aWxzLmNoZWNrRXZlbnQoaWQsIG9wdGlvbnMpKSB7XG5cdCAgICB2YXIgZXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KShpZCwgb3B0aW9ucyk7XG5cdCAgICBldmVudE1hbmFnZXIoKS5hZGRFdmVudChldmVudCk7XG5cdFxuXHQgICAgcmVxdWVzdFF1ZXVlKCkuc2VuZCh1dGlscy5EYXRhVHlwZS5FS1YsIHsgbm9DYWNoZTogZmFsc2UgfSwgZnVuY3Rpb24oKXtcblx0ICAgICAgdWxvZygpLmkoJ2V2ZW50IHNlbmQgc3VjY2VzczogJywgaWQsIGV2ZW50KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFpbl9iYXNlX2h0dHAuZXh0ZW5kKHtcblx0XG5cdCAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHVsb2coKS5zZXREZWJ1ZyghIWFwbHVzLmdldE1ldGFJbmZvKCdERUJVRycpKTtcblx0ICAgIHZhciB1c2VyRXZlbnRBcmdzLCBnb2tleTtcblx0ICAgIHZhciBsb2drZXkgPSBkYXRhICYmIGRhdGEudXNlcmRhdGEgJiYgZGF0YS51c2VyZGF0YS5sb2drZXk7XG5cdCAgICB2YXIgZ21rZXkgPSBkYXRhICYmIGRhdGEudXNlcmRhdGEgJiYgZGF0YS51c2VyZGF0YS5nbWtleTtcblx0ICAgIHZhciBsb2dkYXRhID0gZGF0YSAmJiBkYXRhLndoYXRfdG9fc2VuZCAmJiBkYXRhLndoYXRfdG9fc2VuZC5sb2dkYXRhICYmIGRhdGEud2hhdF90b19zZW5kLmxvZ2RhdGEgfHwge307XG5cdCAgICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcblx0ICAgIHZhciBwYWdlX25hbWU7XG5cdCAgICBpZiAoZ21rZXkgPT09ICdDTEsnIHx8IGdta2V5ID09PSAnRVhQJyB8fCBnbWtleSA9PT0gJ09USEVSJyB8fCBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9TVEFSVCB8fCBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9FTkQpIHtcblx0ICAgICAgdXNlckV2ZW50QXJncyA9IGNsb25lRGVlcChkYXRhICYmIGRhdGEudXNlcmRhdGEgJiYgZGF0YS51c2VyZGF0YS5nb2tleSB8fCB7fSk7XG5cdCAgICAgIGdva2V5ID0gbG9nZGF0YS5nb2tleSB8fCB7fTtcblx0ICAgICAgdmFyIGV2ZW50X2FyZ3M7XG5cdCAgICAgIHZhciBzZGtBcmdzID0ge307XG5cdCAgICAgIGlmIChsb2drZXkgPT09ICckJF9zaGFyZScpIHtcblx0ICAgICAgICBzZGtBcmdzLnJlZmVyX3BhZ2UgPSBsb2dkYXRhLnVybDtcblx0ICAgICAgICBzZGtBcmdzLnNoYXJlX3R5cGUgPSB1c2VyRXZlbnRBcmdzLnNoYXJlX3R5cGU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChnb2tleS5zY2VuZSkge1xuXHQgICAgICAgIHNka0FyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG5cdCAgICAgIH1cblx0ICAgICAgcGFnZV9uYW1lID0gdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddIHx8IHVzZXJFdmVudEFyZ3MucGFnZV9uYW1lIHx8ICh1c2VyRXZlbnRBcmdzLnNwbSAmJiB1c2VyRXZlbnRBcmdzLnNwbS5iKSB8fCBhcGx1cy5nZXRQYWdlTmFtZSgpIHx8IGxvZ2RhdGEudXJsIHx8ICcnO1xuXHQgICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcblx0ICAgICAgXG5cdCAgICAgIHNka0FyZ3MudXJsID0gbG9nZGF0YS51cmwgfHwgJy0nO1xuXHQgICAgICBpZiAodXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddKSB7XG5cdCAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MucGFnZV9uYW1lO1xuXHQgICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzWydkYXRhLXBhZ2VuYW1lJ107XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChncCkge1xuXHQgICAgICAgIHNka0FyZ3MuZ3AgPSBncDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHVzZXJFdmVudEFyZ3Muc3BtKSB7XG5cdCAgICAgICAgc2RrQXJnc1snc3BtLWNudCddID0gW2VuY29kZVVSSUNvbXBvbmVudChwYWdlX25hbWUpLCB1c2VyRXZlbnRBcmdzLnNwbS5jLCB1c2VyRXZlbnRBcmdzLnNwbS5kXS5maWx0ZXIoZnVuY3Rpb24odil7XG5cdCAgICAgICAgICByZXR1cm4gISF2O1xuXHQgICAgICAgIH0pLmpvaW4oJy4nKTtcblx0ICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJncy5zcG07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjbG9uZVAgPSBjbG9uZURlZXAodXNlckV2ZW50QXJncyk7XG5cdCAgICAgIGZvciAodmFyIGsgaW4gY2xvbmVQKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBrID09PSAnc3RyaW5nJyAmJiB1dGlscy5zdGFydHNXaXRoKGssICdfJykpIHtcblx0ICAgICAgICAgIHNka0FyZ3Nba10gPSBjbG9uZVBba107XG5cdCAgICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJnc1trXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX1NUQVJUIHx8IGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX0VORCkge1xuXHQgICAgICAgIGV2ZW50X2FyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oc2RrQXJncywgdXNlckV2ZW50QXJncyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZXZlbnRfYXJncyA9IHV0aWxEYXNoLmFzc2lnbihzZGtBcmdzLCB7IGN1c3A6IHVzZXJFdmVudEFyZ3MgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgaGFuZGxlRXZlbnQobG9na2V5LCBldmVudF9hcmdzKTtcblx0ICAgIH0gZWxzZSBpZiAobG9nZGF0YS5ldmVudF9jb2RlID09PSAnMjAwMScpIHsgXG5cdCAgICAgIHZhciBwdmFyZ3MgPSB7fTtcblx0ICAgICAgdmFyIHBhZ2VfaWQgPSBhcGx1c1N0YXRpYy5QQUdFX1NUQVJUO1xuXHQgICAgICBnb2tleSA9IGNsb25lRGVlcChsb2dkYXRhLmdva2V5IHx8IHt9KTtcblx0ICAgICAgXG5cdCAgICAgIHBhZ2VfbmFtZSA9IGdva2V5LnBhZ2VfbmFtZSB8fCBhcGx1cy5nZXRQYWdlTmFtZSgpIHx8IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKGxvZ2RhdGEudXJsKSB8fCBsb2dkYXRhLnVybCB8fCAnJztcblx0ICAgICAgcHZhcmdzLnIgPSBsb2dkYXRhLmFyZzEgfHwgbG9nZGF0YS5sb2drZXkgfHwgJy0nO1xuXHQgICAgICBwdmFyZ3MucGFnZV9uYW1lID0gcGFnZV9uYW1lO1xuXHQgICAgICBwdmFyZ3MudXJsID0gbG9nZGF0YS51cmwgfHwgJy0nO1xuXHQgICAgICBwdmFyZ3MucmVmX3VybCA9IGxvZ2RhdGEucHJlO1xuXHRcblx0ICAgICAgaWYgKGdva2V5Ll9wYWdlX2F1dG9fcHYpIHtcblx0ICAgICAgICBwdmFyZ3MuaXNfYXV0byA9IDE7XG5cdCAgICAgICAgZGVsZXRlIGdva2V5Ll9wYWdlX2F1dG9fcHY7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHZhcmdzLmlzX2F1dG8gPSAwO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZ29rZXkuZHVyYXRpb24pIHtcblx0ICAgICAgICBwdmFyZ3MuZHVyYXRpb24gPSBnb2tleS5kdXJhdGlvbjtcblx0ICAgICAgICBkZWxldGUgZ29rZXkuZHVyYXRpb247XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChncCkge1xuXHQgICAgICAgIHB2YXJncy5ncCA9IGdwO1xuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBpZiAoZ29rZXkuc2NlbmUpIHtcblx0ICAgICAgICBwdmFyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG5cdCAgICAgIH1cblx0ICAgICAgZ29rZXkgPSB1dGlscy5kZWxldGVJbmZvKGdva2V5LCBbJ19hbm9ueV9pZCcsICdfZGV2X2lkJywgJ19zZXNzaW9uX2lkJywgJ191c2VyX2lkJywgJ191c2VyX25pY2snLCAndWFpZCcsICdwdmlkJywgJ3NjZW5lJ10pO1xuXHQgICAgICBwdmFyZ3NbJ3NwbS1jbnQnXSA9IGVuY29kZVVSSUNvbXBvbmVudChwYWdlX25hbWUpO1xuXHQgICAgICBpZiAoZ29rZXkuX3BhZ2VfYXV0b19pZCkge1xuXHQgICAgICAgIHBhZ2VfaWQgPSBnb2tleS5fcGFnZV9hdXRvX2lkO1xuXHQgICAgICAgIGRlbGV0ZSBnb2tleS5fcGFnZV9hdXRvX2lkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZ29rZXkucGFnZV9zdGFydCkge1xuXHQgICAgICAgIHB2YXJncy5wYWdlX3N0YXJ0ID0gZ29rZXkucGFnZV9zdGFydDtcblx0ICAgICAgICBkZWxldGUgZ29rZXkucGFnZV9zdGFydDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGdva2V5LnBhZ2VfbmFtZSkge1xuXHQgICAgICAgIC8vIGRlbGV0ZSBnb2tleS5wYWdlX25hbWU7XG5cdCAgICAgIH1cblx0ICAgICAgaGFuZGxlRXZlbnQocGFnZV9pZCwgdXRpbERhc2guYXNzaWduKHB2YXJncywgeyBjdXNwOiBnb2tleX0gKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBjb25zb2xlLmxvZygyMjIyLCBkYXRhKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgdGhpcy53YXRjaExPRygpO1xuXHQgIH1cblx0ICBcblx0fSk7XG5cbi8qKiovIH0pLFxuLyogNTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICog5oum5oiq5bm25oyJaHR0cOWNj+iuruWPkemAgeaXpeW/l1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblx0Ly8gdmFyIGxvZ19jbG91ZCA9IHJlcXVpcmUoJy4vbG9nX2Nsb3VkJyk7XG5cdHZhciB1dGlsR1EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0Ly8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh7XG5cdFxuXHQgIHN1YnNjcmliZUxvZ3M6IGZ1bmN0aW9uIChhY3Rpb24sIGNhbGxiYWNrKSB7XG5cdCAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBbYWN0aW9uLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcblx0ICAgICAgaWYgKG9yaURhdGFzLnN0YXR1cyA9PT0gYXBsdXNTdGF0aWMuQ09NUExFVEUpIHtcblx0ICAgICAgICBjYWxsYmFjayhvcmlEYXRhcyk7XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0ICB9LFxuXHRcblx0ICBnZXRMb2dpY1N5bWJvbDogZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuZm9ybWF0ID09PSAnQUxJJyA/ICcmJyA6ICd8fCc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5Zyo5a2Q57G75Lit5a6e546wXG5cdCAgICogQHBhcmFtcyB7T2JqZWN0fSBkYXRhXG5cdCAgICovXG5cdCAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uICgpIHt9LFxuXHQgIFxuXHRcblx0ICB3YXRjaExPRzogZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIFxuXHQgICAgLy8g6K6i6ZiFcHbkuovku7Zcblx0ICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWLCBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICBfc2VsZi5oYW5kbGVyTWlkZGxld2FyZShkYXRhLCAncHYnKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIOiuoumYhWhqbGovYXBsdXPkuovku7Zcblx0ICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEosIGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsIGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy53YXRjaExPRygpO1xuXHQgIH1cblx0fSk7XG5cblxuLyoqKi8gfSksXG4vKiA1OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEdRLmpzXG5cdCAqIOaTjeS9nGFwbHVzX3F1ZXVl55qE5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdGV4cG9ydHMucHVzaEludG9Hb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoYWN0aW9uLCBhcmdzKSB7XG5cdCAgdmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzX3F1ZXVlJyk7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIG5hbWVzID0gYWN0aW9uLnNwbGl0KCcuJyk7XG5cdCAgdmFyIGFwbHVzXzEgPSBhcGx1c1tuYW1lc1sxXV07XG5cdCAgdmFyIGFwbHVzXzIgPSBhcGx1c18xID8gYXBsdXNfMVtuYW1lc1syXV0gOiBudWxsO1xuXHRcblx0ICBpZiAoYXBsdXMgJiYgbmFtZXMubGVuZ3RoID09PSAyICYmIGFwbHVzXzEpIHtcblx0ICAgIGFwbHVzXzEuYXBwbHkoYXBsdXMsIGFyZ3MpO1xuXHQgIH0gZWxzZSBpZiAobmFtZXMubGVuZ3RoID09PSAzICYmIGFwbHVzXzIpIHtcblx0ICAgIGFwbHVzXzIuYXBwbHkoYXBsdXNfMSwgYXJncyk7ICBcblx0ICB9IGVsc2Uge1xuXHQgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogYWN0aW9uLFxuXHQgICAgICBhcmd1bWVudHM6IGFyZ3Ncblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDU5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogZXZlbnQuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaWQsIHByb3BlcnRpZXMpIHtcblx0ICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHZhciBldmVudCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgZXZlbnQuaWQgPSBpZDtcblx0ICBpZiAoIXByb3BlcnRpZXMgfHwgIXByb3BlcnRpZXMudHMpIHtcblx0ICAgIGV2ZW50LnRzID0gRGF0ZS5ub3coKTtcblx0ICB9XG5cdCAgdmFyIHByb3BzVHlwZSA9IHR5cGVvZiBwcm9wZXJ0aWVzO1xuXHQgIGlmIChwcm9wc1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuXHQgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG5cdCAgICAgICAgZXZlbnRba2V5XSA9IHByb3BlcnRpZXNba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcblx0ICBpZiAoZ3ApIHtcblx0ICAgIGV2ZW50WydncCddID0gZ3A7IFxuXHQgIH1cblx0ICByZXR1cm4gZXZlbnQ7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOazqOWFpWxvZ0NvbmZpZyzkvpvlkI7nu63mj5Lku7bkvb/nlKhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldExvZ0NvbmZpZzogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbG9nQ29uZmlnID0ge307XG5cdCAgICAgIHZhciBwbHVnaW5zID0gdGhpcy5vcHRpb25zLmNvbmZpZy5wbHVnaW5zO1xuXHRcblx0ICAgICAgZm9yICh2YXIgayBpbiBwbHVnaW5zKSB7XG5cdCAgICAgICAgbG9nQ29uZmlnW2tdID0ge1xuXHQgICAgICAgICAgcGx1Z2luczogcGx1Z2luc1trXSxcblx0ICAgICAgICAgIGNvbnRleHQ6IHt9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBlYWNoKHBsdWdpbnNba10sIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICBsb2dDb25maWdba10uY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWcgfHwge307XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGxvZ0NvbmZpZztcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyA9IHRoaXMuZ2V0TG9nQ29uZmlnKCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5QQUdFX0xPQURfVElNRTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvZXRhZy5qc1xuXHQgKlxuXHQgKiDkvZznlKjvvJrlkIzmraVhcGx1c19pbml05bel5L2c5rWB55qE5L+h5oGvXG5cdCAqIGRlcHM6IOaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxFdGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7XG5cdFxuXHR2YXIgRU1QVFlfQ05BID0gJ0VNUFRZX0NOQSc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBfc3luY0V0YWc6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIHZhciBjaGVjayA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgdmFyIGNuYSA9IG8gJiYgby5kYXRhID8gby5kYXRhLmNuYSA6ICcnO1xuXHQgICAgICAgIGlmICghY25hKSB7XG5cdCAgICAgICAgICBpZiAoYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID09PSAnWScpIHtcblx0ICAgICAgICAgICAgLy8g5Li65LqG6Kej5Yaz5bm25Y+R6Zeu6aKY77yM5LuOYXBsdXNfcXVldWXmlLnmiJDnm7TmjqXnlKhhcGx1cy5hcGx1c19wdWJzdWIgQOiwi+WjqyAyMDAyMS0wMS0xOVxuXHQgICAgICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdldGFnJywgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgY2FsbGJhY2sodmFsdWUpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRvU3luY0V0YWcoKTsgIFxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKGV0YWdTdG9yYWdlS2V5LCBjbmEpO1xuXHQgICAgICAgICAgY2FsbGJhY2soY25hKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIFxuXHQgICAgICB2YXIgYXBsdXNfcmhvc3RfdiA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1yaG9zdC12Jyk7XG5cdCAgICAgIHZhciB1cmw7XG5cdFxuXHQgICAgICBpZiAoYXBsdXNfcmhvc3Rfdikge1xuXHQgICAgICAgIHVybCA9IHV0aWxFdGFnLmdldFVybCh7XG5cdCAgICAgICAgICBlZ1VybDogKGFwbHVzX3Job3N0X3YuaW5kZXhPZignLy8nKSA9PT0gLTEgPyAnLy8nICsgYXBsdXNfcmhvc3RfdiA6IGFwbHVzX3Job3N0X3YpICsgJy9lZy5qcydcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBpZiAoX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcpIHtcblx0ICAgICAgICAgIF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnLmVnVXJsID0gdXJsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICAgIHZhciBldGFnU3RvcmFnZUtleSA9IGFwbHVzLmdsb2JhbENvbmZpZy5FVEFHX1NUT1JBR0VfS0VZO1xuXHQgICAgICB2YXIgdG9TeW5jRXRhZyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodXJsKSB7XG5cdCAgICAgICAgICBhcGx1cy5mZXRjaEV0YWdTdGF0dXMgPSAnWSc7XG5cdCAgICAgICAgICBtaW5pLnJlcXVlc3QodXJsLCB7XG5cdCAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCcsXG5cdCAgICAgICAgICAgIHJlcXVlc3RNZXRob2ROYW1lOiAncmVxdWVzdCdcblx0ICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID0gJ04nO1xuXHQgICAgICAgICAgICB2YXIgZXRhZyA9ICcnO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEgfHwgJyc7XG5cdCAgICAgICAgICAgICAgdmFyIGFyciA9IGRhdGEuc3BsaXQoJzsnKTtcblx0ICAgICAgICAgICAgICBpZiAoYXJyLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBldGFnS2V5VmFsdWUgPSBhcnJbMV07XG5cdCAgICAgICAgICAgICAgICB2YXIgZXRhZ3MgPSBldGFnS2V5VmFsdWUuc3BsaXQoJz0nKTtcblx0ICAgICAgICAgICAgICAgIGV0YWcgPSBldGFnc1sxXSB8fCAnJztcblx0ICAgICAgICAgICAgICAgIGV0YWcgPSBldGFnLnJlcGxhY2UoL1xcXCIvZywgJycpO1xuXHQgICAgICAgICAgICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbChldGFnU3RvcmFnZUtleSwgZXRhZyk7XG5cdCAgICAgICAgICAgICAgICBjdHguc2V0U3RvcmFnZSh7XG5cdCAgICAgICAgICAgICAgICAgIGtleTogZXRhZ1N0b3JhZ2VLZXksXG5cdCAgICAgICAgICAgICAgICAgIGRhdGE6IHtcblx0ICAgICAgICAgICAgICAgICAgICBjbmE6IGV0YWdcblx0ICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAvLyDkuLrkuobop6PlhrPlubblj5Hpl67popjvvIzku45hcGx1c19xdWV1ZeaUueaIkOebtOaOpeeUqGFwbHVzLmFwbHVzX3B1YnN1YlxuXHQgICAgICAgICAgICAgICAgLy8g5bm2Y2FjaGXkvY/kuIrkuIDmrKHnmoTnu5PmnpwgQOiwi+WjqyAyMDAyMS0wMS0xOVxuXHQgICAgICAgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnB1Ymxpc2goJ2V0YWcnLCBldGFnKTtcblx0ICAgICAgICAgICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5jYWNoZVB1YnMoJ2V0YWcnLCBldGFnKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoIWV0YWcpIHtcblx0ICAgICAgICAgICAgICBldGFnID0gRU1QVFlfQ05BO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGNhbGxiYWNrKGV0YWcpO1xuXHQgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlczIpIHtcblx0ICAgICAgICAgICAgY29uc29sZS5sb2cocmVzMik7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIHZhciBDTkEgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKGV0YWdTdG9yYWdlS2V5KTtcblx0ICAgICAgaWYgKENOQSkge1xuXHQgICAgICAgIGNhbGxiYWNrKENOQSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY3R4LmdldFN0b3JhZ2Uoe1xuXHQgICAgICAgICAga2V5OiBldGFnU3RvcmFnZUtleSxcblx0ICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgY2hlY2socmVzKTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIGNoZWNrKHJlcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBwduWPkemAgeWIsOWTqumHjOWOu1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYzvvIzov5Tlm57igJxwYXVzZeKAneaaguWBnOS4remXtOS7tuaJp+ihjO+8jOi/lOWbnuS4gOS4quaVtOaVsOKAnG7igJ3lkYror4nkuK3pl7Tku7bigJxu4oCd5q+r56eS5ZCO57un57ut5omn6KGM5Lit6Ze05Lu2XG5cdCAgICAgKiDigJzmmoLlgZzigJ3mnIDlpJoxMHPvvIzoi6XotoXml7bkuK3pl7Tku7bkvJrlvLrliLbnu6fnu63miafooYxcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoc3RhdGUsIGNiKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIC8vIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBldGFnVGltZW91dCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1ldGFnLXRpbWVvdXQnKTtcblx0ICAgICAgdmFyIGRlZmF1bHRUaW1lID0gMjAwO1xuXHQgICAgICB2YXIgdGltZSA9IGRlZmF1bHRUaW1lO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHRpbWUgPSBwYXJzZUludChldGFnVGltZW91dCk7XG5cdCAgICAgICAgaWYgKGlzTmFOKHRpbWUpKSB7XG5cdCAgICAgICAgICB0aW1lID0gZGVmYXVsdFRpbWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX3N5bmNFdGFnKGZ1bmN0aW9uIChjbmEpIHtcblx0ICAgICAgICBpZiAoX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcpIHtcblx0ICAgICAgICAgIF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnLmNuYSA9IGNuYTsgIFxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGltZSA+PSAyMDApIHtcblx0ICAgICAgICAgIGNiKGNuYSk7ICBcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyDlkYror4ljb21wb3Nl5pqC5YGc5omn6KGM5Lit6Ze05Lu277yM55u05YiwY2Llm57liLDlkI7lho3nu6fnu61cblx0ICAgICAgaWYgKHRpbWUgPCAyMDApIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRpbWU7XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Myk7XG5cdFxuXHQvLyDku4XpmZDlvLnlhoXvvJvlsI/nsbPnpoHnlKhlZy5qc+W6lOWvueetlueVpe+8muS9v+eUqOWKqOaAgeWQjue8gOWQjVxuXHQvLyDlkI7nvIDlkI3nlJ/miJDmlrnms5U6IOW9k+WJjeaXtumXtOaIs+i9rDE26L+b5Yi277yM5Y+W5ZCOOOS9je+8jFxuXHQvLyBmdW5jdGlvbiBldGFnVXJsU3VmZml4KGV0YWdVcmwpIHtcblx0Ly8gICB2YXIgZHluYW1pY1VybCA9IGV0YWdVcmw7XG5cdC8vICAgdHJ5IHtcblx0Ly8gICAgIGlmKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQvLyAgICAgICB0cnkge1xuXHQvLyAgICAgICAgIHZhciB0aW1lU3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0Ly8gICAgICAgICB2YXIgZHluYW1pY1N1ZmZpeCA9IHRpbWVTdGFtcC50b1N0cmluZygxNikuc2xpY2UoLTgpO1xuXHQvLyAgICAgICAgIHdoaWxlKGR5bmFtaWNTdWZmaXgubGVuZ3RoIDwgOCkge1xuXHQvLyAgICAgICAgICAgZHluYW1pY1N1ZmZpeCA9IGR5bmFtaWNTdWZmaXggKyAnZic7XG5cdC8vICAgICAgICAgfVxuXHQvLyAgICAgICAgIGR5bmFtaWNVcmwgPSBldGFnVXJsLnJlcGxhY2UoL2VnLmpzLywgZHluYW1pY1N1ZmZpeCArICcuanMnKTtcblx0Ly8gICAgICAgfSBjYXRjaChlKSB7XG5cdC8vICAgICAgIH1cblx0Ly8gICAgICAgcmV0dXJuIGR5bmFtaWNVcmw7XG5cdC8vICAgICB9XG5cdC8vICAgfSBjYXRjaChlKSB7XG5cdFxuXHQvLyAgIH1cblx0Ly8gICByZXR1cm4gZHluYW1pY1VybDtcblx0Ly8gfVxuXHRcblx0ZXhwb3J0cy5nZXRVcmwgPSBmdW5jdGlvbiAoZXRhZykge1xuXHQgIHZhciB1cmwgPSB1dGlsRGF0YS5nZXRVcmwoZXRhZyAmJiBldGFnLmVnVXJsKTtcblx0ICAvLyB1cmwgPSBldGFnVXJsU3VmZml4KHVybCk7XG5cdCAgLy8g5aaC5p6cZWdVcmzmsqHmnInluKbljY/orq7vvIzov5nph4zooaXlhYXlrozmlbRcblx0ICBpZiAodXJsLmluZGV4T2YoJ2h0dHAnKSAhPT0gMCkge1xuXHQgICAgdmFyIHByb3RvY2FsID0gJ2h0dHBzOic7XG5cdCAgICBpZiAoLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcblx0ICAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuXHQgICAgfVxuXHQgICAgdXJsID0gcHJvdG9jYWwgKyB1cmw7XG5cdCAgfVxuXHQgIHJldHVybiB1cmw7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxUcmltID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7XG5cdHZhciB1dGlsU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIHRyeVRvRGVjb2RlVVJJQ29tcG9uZW50OiBmdW5jdGlvbiAodmFsLCBkZWZhdWx0X3ZhbCkge1xuXHQgICAgdmFyIHYgPSBkZWZhdWx0X3ZhbCB8fCAnJztcblx0ICAgIGlmICh2YWwpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbCk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHY7XG5cdCAgfSxcblx0ICBcblx0ICAvKipcblx0ICAgKiDlsIblvaLlpoIgXCJwYWdlSWQ9MTIzOyBzaXRlSWQ9NDU2XCIg55qE5YaF5a656Kej5p6Q5Li6IE9iamVjdFxuXHQgICAqIEBwYXJhbSBzIHtTdHJpbmd9XG5cdCAgICogQHBhcmFtIFtkaWN0XSB7T2JqZWN0fVxuXHQgICAqIEByZXR1cm4ge09iamVjdH1cblx0ICAgKi9cblx0ICBwYXJzZVNlbWljb2xvbkNvbnRlbnQ6IGZ1bmN0aW9uIChzLCBkaWN0LCB1bmRlY29kZSkge1xuXHQgICAgZGljdCA9IGRpY3QgfHwge307XG5cdCAgICB2YXIgYSA9IHMuc3BsaXQoJzsnKTtcblx0ICAgIHZhciBqO1xuXHQgICAgdmFyIGFfbGVuID0gYS5sZW5ndGg7XG5cdCAgICB2YXIgYTI7XG5cdFxuXHQgICAgZm9yIChqID0gMDsgaiA8IGFfbGVuOyBqKyspIHtcblx0ICAgICAgYTIgPSBhW2pdLnNwbGl0KCc9Jyk7XG5cdCAgICAgIHZhciBfdmFsdWUgPSB1dGlsVHJpbS50cmltKGEyLnNsaWNlKDEpLmpvaW4oJz0nKSk7XG5cdCAgICAgIGRpY3RbdXRpbFRyaW0udHJpbShhMlswXSkgfHwgJyddID0gdW5kZWNvZGUgPyBfdmFsdWUgOiB0aGlzLnRyeVRvRGVjb2RlVVJJQ29tcG9uZW50KF92YWx1ZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGRpY3Q7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5bCG5LiA5LiqIG5vZGUgbGlzdCDovazkuLrmlbDnu4Rcblx0ICAgKiBAcGFyYW0gbm9kZXMge05vZGVMaXN0fVxuXHQgICAqIOWPguinge+8mmh0dHA6Ly93d3cucGxhbmFiYy5uZXQvMjAxMC8wMS8wNi9hcmd1bWVudHNfdG9fYXJyYXkvXG5cdCAgICovXG5cdCAgbm9kZUxpc3RUb0FycmF5OiBmdW5jdGlvbiAobm9kZXMpIHtcblx0ICAgIHZhciBhcnI7XG5cdCAgICB2YXIgbGVuZ3RoO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIC8vIHdvcmtzIGluIGV2ZXJ5IGJyb3dzZXIgZXhjZXB0IElFXG5cdCAgICAgIGFyciA9IFtdLnNsaWNlLmNhbGwobm9kZXMpO1xuXHQgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgIC8vIHNsb3dlciwgYnV0IHdvcmtzIGluIElFXG5cdCAgICAgIGFyciA9IFtdO1xuXHQgICAgICBsZW5ndGggPSBub2Rlcy5sZW5ndGg7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYXJyLnB1c2gobm9kZXNbaV0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGdldExzQ25hOiBmdW5jdGlvbiAoRVRBR19TVE9SQUdFX0tFWSwgZGF0ZSkge1xuXHQgICAgaWYgKHV0aWxTdG9yZS5zZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuXHQgICAgICB2YXIgX2xzX2NuYSA9ICcnO1xuXHQgICAgICB2YXIgX3ZhbHVlID0gdXRpbFN0b3JlLmdldChFVEFHX1NUT1JBR0VfS0VZKTtcblx0ICAgICAgaWYgKF92YWx1ZSkge1xuXHQgICAgICAgIHZhciBfYXJyID0gX3ZhbHVlLnNwbGl0KCdfJykgfHwgW107XG5cdCAgICAgICAgaWYgKGRhdGUpIHtcblx0ICAgICAgICAgIF9sc19jbmEgPSBfYXJyLmxlbmd0aCA+IDEgJiYgZGF0ZSA9PT0gX2FyclswXSA/IF9hcnJbMV0gOiAnJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgX2xzX2NuYSA9IF9hcnIubGVuZ3RoID4gMSA/IF9hcnJbMV0gOiAnJztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChfbHNfY25hKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvLyB1dGlsU3RvcmUuc2V0KHRoaXMuRVRBR19TVE9SQUdFX0tFWSwgIHRoaXMudG9kYXkgKyAnXycgKyBlbmNvZGVVUklDb21wb25lbnQoY25hKSk7XG5cdCAgc2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCB0b2RheSwgY25hKSB7XG5cdCAgICBpZiAoY25hICYmIHV0aWxTdG9yZS5zZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuXHQgICAgICB1dGlsU3RvcmUuc2V0KEVUQUdfU1RPUkFHRV9LRVksICB0b2RheSArICdfJyArIGVuY29kZVVSSUNvbXBvbmVudChjbmEpKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBnZXRVcmw6IGZ1bmN0aW9uICh1cmwpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIGVnVXJsID0gdXJsIHx8ICcvL2xvZy5tbXN0YXQuY29tL2VnLmpzJztcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciByaG9zdF92ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJob3N0LXYnKTtcblx0ICAgICAgdmFyIHJlZyA9IC9bW2EtenxcXC18XFxffDAtOVxcLl0rW2EtenxcXC18XFxffDAtOV0oOlxcZCopPy87XG5cdCAgICAgIHZhciBjdXN0b21faG9zdCA9IHJob3N0X3YubWF0Y2gocmVnKTtcblx0ICAgICAgaWYgKGN1c3RvbV9ob3N0ICYmIGN1c3RvbV9ob3N0WzBdKSB7XG5cdCAgICAgICAgLy8gZWdVcmwgPSBlZ1VybC5yZXBsYWNlKHJlZywgY3VzdG9tX2hvc3RbMF0pO1xuXHQgICAgICAgIGVnVXJsID0gJy8vJyArIGN1c3RvbV9ob3N0WzBdICsgJy9lZy5qcyc7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIH1cblx0ICAgIHJldHVybiBlZ1VybDtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5a+55a2X56ym5Liy6L+b6KGMdHJpbeWkhOeQhlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiDljrvmjonlrZfnrKbkuLIgcyDliY3lkI7nmoTnqbrmoLxcblx0ICogQHBhcmFtIHMge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIHRyaW0ocykge1xuXHQgIHJldHVybiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSA/IHMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpIDogJyc7XG5cdH07XG5cdGV4cG9ydHMudHJpbSA9IHRyaW07XG5cblxuLyoqKi8gfSksXG4vKiA2NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBzZXQ6IGZ1bmN0aW9uIChrLCB2KSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrLCB2KTtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8vIOe7j+i/h3Rlc3TkuYvlkI5nZXTlupTor6XkuI3kvJrmnInpl67pophcblx0ICBnZXQ6IGZ1bmN0aW9uIChrKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oayk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0ICB9LFxuXHQgIHRlc3Q6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciB0ZXN0S2V5ID0gJ2dyZXlfdGVzdF9rZXknO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGVzdEtleSwgMSk7XG5cdCAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRlc3RLZXkpO1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiAoaykge1xuXHQgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oayk7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hlbl90b19zZW5kLmpzXG5cdCAqXG5cdCAqICAg5L2c55So77yaIOS9leaXtuaJp+ihjHNlbmRwduaPkuS7tlxuXHQgKiAgIGZuOiBnZXRNZXRhSW5mbyDnu6fmib/oh7NCYXNlXG5cdCAqICAgZm46IHJ1biAo5o+S5Lu25qCH5YeG55qE5omn6KGM5YWl5Y+jKVxuXHQgKiAgIGFwbHVzLXdhaXRpbmc9XCIxXCI6IOetieW+hTbnp5LlkI7lsJ3or5Xlj5HpgIFQVuaXpeW/lztcblx0ICogICBhcGx1cy13YWl0aW5nPVwiTUFOXCI6IOS4jeiHquWKqOWPkemAgVBW5pel5b+XO1xuXHQgKiAgIGFwbHVzLXdhaXRpbmc9XCJuXCI6IOWFtuS4rW7kuLrlpKfkuo4x55qE5q2j5pW05pWwLCBhcGx1c+WcqOetieW+hW7mr6vnp5LkuYvlkI7lsJ3or5Xlj5HpgIFQVuaXpeW/lztcblx0ICpcblx0ICogICBkZXBz77yaIOaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDojrflj5ZtZXRhX2luZm9cblx0ICAgICAqIFRPRE8g6Iul5LuK5ZCO5pyJ5Yqo5oCB5L+u5pS5bWV0YV9pbmZv55qE6ZyA5rGC77yMXG5cdCAgICAgKiDmraTlpITpnIDopoHliqjmgIHku44gbWV0YUluZm/mqKHlnZfkuK3ljrvosIPnlKhnZXRJbmZv5pa55rOV5p2l6I635Y+W55u45YWz5L+h5oGv77yM6L+Z5qC35YGa55qE5Z2P5aSE5piv5raI6ICX5oCn6IO9XG5cdCAgICAgKi9cblx0ICAgIGdldE1ldGFJbmZvOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuXHQgICAgICByZXR1cm4gbWV0YV9pbmZvO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXRBcGx1c1dhaXRpbmc6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgbWV0YV9pbmZvID0gdGhpcy5nZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgICAgICByZXR1cm4gbWV0YV9pbmZvWydhcGx1cy13YWl0aW5nJ107XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+j77yM6YWN572u5LqGYXBsdXNXYWl0aW5nIOW5tuS4lCDmmK9hcGx1c+iHquWKqOaJk+eCueaJjei1sOi/meautemAu+i+kVxuXHQgICAgICogPG1ldGEgbmFtZT1cImFwbHVzLXdhaXRpbmdcIiBjb250ZW50PVwieHh4XCIgLz5cblx0ICAgICAqICAgeHh4OiAnTUFOJyAtIOS4jeWPkemAgXB255qE5qCH6K+GXG5cdCAgICAgKiAgIHh4eDogJzEnIC0g5bCd6K+V562J5b6FNuenkuWQjuWPkXB2XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIo57uI5q2i5Lit6Ze05Lu25omn6KGMKSB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKHN0YXRlLCBjYikge1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIGFwbHVzV2FpdGluZyA9IHRoaXMuZ2V0QXBsdXNXYWl0aW5nKCk7XG5cdCAgICAgIGlmIChhcGx1c1dhaXRpbmcgJiYgY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgICBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpICsgJyc7XG5cdCAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYgPSB7XG5cdCAgICAgICAgICBhcGx1c1dhaXRpbmc6IGFwbHVzV2FpdGluZ1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgc3dpdGNoKGFwbHVzV2FpdGluZykge1xuXHQgICAgICAgIGNhc2UgYXBsdXNTdGF0aWMuX1VTRVJfSUQ6XG5cdCAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fQU5PTllfSUQ6XG5cdCAgICAgICAgY2FzZSAnTUFOJzpcblx0ICAgICAgICAgIHJldHVybiAnZG9uZSc7XG5cdCAgICAgICAgY2FzZSAnMSc6XG5cdCAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuXHQgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICBjYigpO1xuXHQgICAgICAgICAgfSwgNjAwMCk7XG5cdCAgICAgICAgICByZXR1cm4gNjAwMDtcblx0ICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgdmFyIG4gPSBhcGx1c1dhaXRpbmcgKiAxO1xuXHQgICAgICAgICAgaWYgKChuICsgJycpICE9PSAnTmFOJykge1xuXHQgICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgICAgY2IoKTtcblx0ICAgICAgICAgICAgfSwgbik7XG5cdCAgICAgICAgICAgIHJldHVybiBuO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IHdoZXJlX3RvX3NlbmRfbWluaV91bS5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIOiOt+WPliBtZXRhX2luZm8gXG5cdCAgICAqL1xuXHQgICAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICByZXR1cm4gKF8kLm1ldGFfaW5mbyB8fCB7fSlba2V5XTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SG9zdFVybDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciByaG9zdCA9IHRoaXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJob3N0LXYnKTtcblx0ICAgICAgdmFyIGxvZ0RvbWFpbiA9IG1pbmkuZ2V0TG9nRG9tYWluKCk7XG5cdCAgICAgIGlmICghcmhvc3QgfHwgIWxvZ0RvbWFpbikgeyBcblx0ICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICBtc2c6ICdjdXJyZW50IHJlcXVlc3QgZG9tYWluIGludmFsaWQsIHBsZWFzZSBjaGVjayB5b3VyIGFwbHVzLXJob3N0LXYgdmFsdWUgaW5zaWRlIG1ldGFpbmZvISdcblx0ICAgICAgICB9KTtcblx0ICAgICAgICByZXR1cm4gJyc7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHVybCA9IFsnLy8nLCByaG9zdCwgbG9nRG9tYWluXTtcblx0ICAgICAgcmV0dXJuIHVybC5qb2luKCcnKTtcblx0ICAgIH0sXG5cdFxuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQubWV0aG9kID0gJ1BPU1QnO1xuXHQgICAgICB2YXIgdXJsID0gdGhpcy5nZXRIb3N0VXJsKCk7XG5cdCAgICAgIGlmICghdXJsKSB7XG5cdCAgICAgICAgcmV0dXJuICdkb25lJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG5cdCAgICAgICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG5cdCAgICAgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG5cdCAgICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHsgXG5cdCAgICAgICAgICBtc2c6ICfkuIrmiqXln5/lkI3ml6DmlYg6ICcgKyB1cmwgXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuICdkb25lJztcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLnVybCA9IHVybDtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hhdF90b19zZW5kLmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeWfuuehgOWPguaVsOaUtumbhu+8mlxuXHQgKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7ICBcblx0dmFyIGxvZ0lkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7XG5cdHZhciB1dGlsUGFyYW1zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7XG5cdFxuXHR2YXIgQ05UID0gYXBsdXNTdGF0aWMuU1BNX0NOVDtcblx0dmFyIFVSTCA9IGFwbHVzU3RhdGljLlNQTV9VUkw7XG5cdHZhciBQUkUgPSBhcGx1c1N0YXRpYy5TUE1fUFJFO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldENvbW1vblBhcmFtczogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICB2YXIgc3BtID0gXyQuc3BtIHx8IHt9O1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIHBsYXRmb3JtVHlwZSA9IGFwbHVzLmdldE1ldGFJbmZvKCdwbGF0Zm9ybVR5cGUnKSB8fCBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuXHRcblx0ICAgICAgdmFyIHVzZXJJbmZvID0ge1xuXHQgICAgICAgIF9kZXZfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfZGV2X2lkJyksXG5cdCAgICAgICAgX2Fub255X2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpLFxuXHQgICAgICAgIF91c2VyX2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCksXG5cdCAgICAgICAgX3VzZXJfbmljazogYXBsdXMuZ2V0TWV0YUluZm8oJ191c2VyX25pY2snKSxcblx0ICAgICAgICBfc2Vzc2lvbl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19zZXNzaW9uX2lkJyksXG5cdCAgICAgICAgdWFpZDogKGFwbHVzLmdldE1ldGFJbmZvKCd1YWlkJykgKyAnJykgPT09ICcxJyA/IDEgOiAwLFxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIGNsaWVudCA9IGFwbHVzLl9hcGx1c19jbGllbnQgfHwge307XG5cdCAgICAgIHZhciBnbG9iYWxDb25maWcgPSBhcGx1cy5nbG9iYWxDb25maWcgfHwge307XG5cdFxuXHQgICAgICB2YXIgdXJsID0gJy0nO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBwYWdlSW5zdGFuY2UgPSBnZXRDdXJyZW50UGFnZXMoKVswXTtcblx0ICAgICAgICB1cmwgPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICBcblx0ICAgICAgdmFyIGxvZ0lkS2V5ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyB1cmw7XG5cdCAgICAgIHZhciBsb2dJZEtleTIgPSBjbGllbnQubW9kZWwgKyBjbGllbnQubmV0d29ya1R5cGUgKyBjb25maWcudGl0bGUgKyBldGFnLmNuYTtcblx0ICAgICAgdmFyIGNhY2hlID0gKGdsb2JhbENvbmZpZy5pc0RlY29kZVVybCA/ICdEQ18nIDogJycpICsgbG9nSWQuZ2V0TG9nSWQobG9nSWRLZXksIGxvZ0lkS2V5Mik7XG5cdFxuXHQgICAgICB2YXIgYXBwSWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwS2V5JykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcElkJyk7XG5cdCAgICAgIGlmICghYXBwSWQpIHtcblx0ICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICBtc2c6ICdwbGVhc2Ugc2V0IGFwcElkIGluIGFwbHVzIG1ldGFJbmZvIGJlZm9yZSBzZW5kUFYhJ1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjb21tb25QYXJhbXMgPSAgT2JqZWN0LmFzc2lnbih7fSwge1xuXHQgICAgICAgIGFwcEtleTogYXBwSWQsXG5cdCAgICAgICAgY2FjaGU6IGNhY2hlLFxuXHQgICAgICAgIGNuYTogZXRhZy5jbmEsXG5cdCAgICAgICAgZXRhZzogZXRhZyxcblx0ICAgICAgICBwcmU6IF8kLnBhZ2VfcmVmZXJyZXIgfHwgJy0nLCAvLyBUT0RPXG5cdCAgICAgICAgc2RrX2luZm86IHtcblx0ICAgICAgICAgIGpzdmVyOiBnbG9iYWxDb25maWcuc2NyaXB0X25hbWUsXG5cdCAgICAgICAgICBsdmVyOiBnbG9iYWxDb25maWcubHZlcixcblx0ICAgICAgICAgIGN1c3RvbVNka0lkOiBhcGx1cy5nZXRNZXRhSW5mbygnY3VzdG9tU2RrSWQnKSB8fCAnJyxcblx0ICAgICAgICAgIHBsYXRmb3JtVHlwZTogcGxhdGZvcm1UeXBlLnRvTG93ZXJDYXNlKCksXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0aXRsZTogY29uZmlnLnRpdGxlIHx8ICcnLFxuXHQgICAgICAgIHVybDogdXJsIHx8ICctJyxcblx0ICAgICAgICBjbGllbnQ6IGNsaWVudCxcblx0ICAgICAgICB0aW1lWm9uZTogdXRpbFBhcmFtcy5nZXRUaW1lWm9uZSgpLFxuXHQgICAgICAgIGdta2V5OiB1c2VyZGF0YS5nbWtleSB8fCAnJyxcblx0ICAgICAgICBtZXRob2Q6IHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQubWV0aG9kXG5cdCAgICAgIH0sIHVzZXJJbmZvKTtcblx0ICAgICAgXG5cdCAgICAgIHZhciBnb2tleSA9IHVzZXJJbmZvO1xuXHRcblx0ICAgICAgaWYgKHNwbS5zcG1fdXJsKSB7XG5cdCAgICAgICAgZ29rZXlbVVJMXSA9IHNwbS5zcG1fdXJsIHx8ICcnOyAgXG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHNwbS5zcG1fcHJlKSB7XG5cdCAgICAgICAgZ29rZXlbUFJFXSA9IHNwbS5zcG1fcHJlIHx8ICcnOyAgXG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIGlmIChzcG0uc3BtX2NudCkge1xuXHQgICAgICAgIGdva2V5W0NOVF0gPSBzcG0uc3BtX2NudCB8fCAnJztcblx0ICAgICAgfVxuXHQgICAgICBnb2tleVthcGx1c1N0YXRpYy5QVklEXSA9IGFwbHVzLnB2aWQgfHwgJyc7XG5cdCAgICAgIGNvbW1vblBhcmFtcy5zZXNzaW9uQXJncyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1zZXNzaW9uLWFyZ3MnKTtcblx0ICAgICAgY29tbW9uUGFyYW1zLmdsb2JhbEFyZ3MgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnKTsgIC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG5cdCAgICAgIC8vIOmcgOimgeWIoOmZpOeahOS7o+eggS0tLS1lbmRcblx0ICAgICAgY29tbW9uUGFyYW1zLmdva2V5ID0gZ29rZXk7XG5cdCAgICAgIHJldHVybiBjb21tb25QYXJhbXM7XG5cdCAgICB9LFxuXHRcblx0XG5cdCAgICBnZXRQdlBhcmFtczogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBjb21tb25QYXJhbXMgPSB0aGlzLmdldENvbW1vblBhcmFtcygpO1xuXHQgICAgICBpZiAoIXRoaXMub3B0aW9ucy5jb25maWcuaXNfYXV0bykge1xuXHQgICAgICAgIGNvbW1vblBhcmFtcy5zZGtfaW5mby5tYW5zbmRsb2cgPSAxO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb21tb25QYXJhbXMsIHtcblx0ICAgICAgICBldmVudF9jb2RlOiBhcGx1c1N0YXRpYy5QVl9DT0RFLFxuXHQgICAgICAgIGxvZ3R5cGU6ICcxJyxcblx0ICAgICAgICBsb2drZXk6ICcvdnguZ2lmJyxcblx0ICAgICAgICBldmVudF90aW1lc3RhbXA6IGFwbHVzLl8kLnNlbmRfcHZfY291bnQgPiAwID8gbmV3IERhdGUoKSA6IGFwbHVzLmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUsXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXRIamxqUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcblx0XG5cdCAgICAgIHZhciBoamxqUGFyYW1zID0ge1xuXHQgICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLkVWRU5UX0lEX01BUFt1c2VyZGF0YS5nbWtleV0gfHwgdXNlcmRhdGEuZ21rZXksIC8vIGFwbHVzU3RhdGljLk9USEVSX0NPREUsXG5cdCAgICAgICAgbG9ndHlwZTogJzInLFxuXHQgICAgICAgIGxvZ2tleTogdXNlcmRhdGEubG9na2V5LFxuXHQgICAgICAgIGV2ZW50X3RpbWVzdGFtcDogbmV3IERhdGUoKSxcblx0ICAgICAgICAvLyBtYW5zbmRsb2c6ICcxJyxcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmdldENvbW1vblBhcmFtcygpLCBoamxqUGFyYW1zKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiAxLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWPguaVsDogYmFzaWNMaXN0XG5cdCAgICAgKiAyLiBiZWFjb27mianlsZXlj4LmlbA6IGV4cGFyYW1zXG5cdCAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG5cdCAgICAgKiDkuK3pgJTlpITnkIZfJOWFqOWxgOWPmOmHjzogcHJvY2Vzc0xvZGFzaERvbGxhclxuXHQgICAgICogNC4gbG9jYWxTdG9yYWdl5Lit5a2Y5YKo55qE5LiK5LiA6aG1c3Bt5L+h5oGvOiBzcG1hYnRlc3Rcblx0ICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHBhcmFtcyA9IHt9O1xuXHQgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbmZpZy5yZWNvcmRUeXBlID09PSBcIlBWXCIpIHtcblx0ICAgICAgICBwYXJhbXMgPSB0aGlzLmdldFB2UGFyYW1zKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRIamxqUGFyYW1zKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBwYXJhbXM7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIHB2aWRcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEhhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTtcblx0XG5cdHZhciBnZXRSYW5kb21JZCA9IGZ1bmN0aW9uIChzaXplKSB7XG5cdCAgLyoqXG5cdCAgICog55Sf5oiQ5pys6aG155qEIHB2IGlkXG5cdCAgICogcHYgaWQg5Y+q6ZyA6KaB5b2T5YmN55So5oi35Lya6K+d5ZSv5LiA5Y2z5Y+v77yM6L+Z5YS/5L2/55So5LiA5LiqIDYg5L2N55qEIDE2IOi/m+WItuaVsOWtl1xuXHQgICAqL1xuXHQgIHZhciBybmRfc3RycyA9ICcnO1xuXHQgIHZhciBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XG5cdCAgdmFyIGhhbmRsZWQgPSBmYWxzZTtcblx0ICB2YXIgY2hhcjtcblx0XG5cdCAgLyoqXG5cdCAgICog6Kej5Yaz6YOo5YiGIHNwbSDooqsgR0ZXIOWimeS6hueahOaDheWGte+8jOWmgiAyMi5nbFxuXHQgICAqIOaOkumZpCBwdmlkIOS7pSBnbCDlvIDlpLTnmoTmg4XlhrVcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBoYW5kbGVQVklkIChjaGFyUG9zKSB7XG5cdCAgICB2YXIgY2hhcnNXaXRob3V0RyA9ICcwMTIzNDU2Nzg5YWJjZGVmaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkhJSktMTU5PUFFSU1RVVldYWVonO1xuXHQgICAgdmFyIGNoYXJzV2l0aG91dEwgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS01OT1BRUlNUVVZXWFlaJztcblx0XG5cdCAgICBpZiAoY2hhclBvcyA9PSAxKSB7XG5cdCAgICAgIHJldHVybiBjaGFyc1dpdGhvdXRHLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MCksIDEpO1xuXHQgICAgfSBlbHNlIGlmIChjaGFyUG9zID09IDIpIHtcblx0ICAgICAgcmV0dXJuIGNoYXJzV2l0aG91dEwuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYwKSwgMSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gJzAnO1xuXHQgIH07XG5cdFxuXHQgIHdoaWxlIChybmRfc3Rycy5sZW5ndGggPCBzaXplKSB7XG5cdCAgICBjaGFyID0gY2hhcnMuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYyKSwgMSk7XG5cdCAgICAvLyDlpITnkIbooqvlopnnmoTmg4XlhrXvvIznm67liY3lj6rpkojlr7lnbOW8gOWktOeahFxuXHQgICAgaWYgKCFoYW5kbGVkICYmIHJuZF9zdHJzLmxlbmd0aCA8PSAyICYmIChjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2cnIHx8IGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnbCcpKSB7XG5cdCAgICAgIGlmIChybmRfc3Rycy5sZW5ndGggPT09IDAgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJykge1xuXHQgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG5cdCAgICAgICAgICBjaGFyID0gaGFuZGxlUFZJZCgxKTtcblx0ICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChybmRfc3Rycy5sZW5ndGggPT0gMSAmJiBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2wnICYmIHJuZF9zdHJzLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpID09ICdnJykge1xuXHQgICAgICAgIGNoYXIgPSBoYW5kbGVQVklkKDIpO1xuXHQgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBybmRfc3RycyArPSBjaGFyO1xuXHQgIH1cblx0ICByZXR1cm4gcm5kX3N0cnM7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZXRDaGFycyAoYXJncywgc2l6ZSwgZGVmYXVsdFZhbCkge1xuXHQgIGlmIChhcmdzKSB7XG5cdCAgICByZXR1cm4gdXRpbEhhc2guaGFzaChlbmNvZGVVUklDb21wb25lbnQoYXJncykpLnN1YnN0cigwLCBzaXplKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGRlZmF1bHRWYWw7XG5cdCAgfVxuXHR9XG5cdFxuXHRleHBvcnRzLmdldExvZ0lkID0gZnVuY3Rpb24gKHBhZ2VVcmwsIGxvZ05hbWUpIHtcblx0ICB2YXIgcmFuZG9tOENoYXJzID0gZ2V0UmFuZG9tSWQoOCk7XG5cdCAgdmFyIHJhbmRvbTRDaGFycyA9IHJhbmRvbThDaGFycy5zdWJzdHIoMCwgNCk7XG5cdCAgdmFyIHJhbmRvbTZDaGFycyA9IHJhbmRvbThDaGFycy5zdWJzdHIoMCwgNik7XG5cdCAgcmV0dXJuIFtcblx0ICAgIGdldENoYXJzKHBhZ2VVcmwsIDQsIHJhbmRvbTRDaGFycyksXG5cdCAgICBnZXRDaGFycyhsb2dOYW1lLCA0LCByYW5kb200Q2hhcnMpLFxuXHQgICAgcmFuZG9tNkNoYXJzXG5cdCAgXS5qb2luKCcnKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDcwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIOagueaNruWvhumSpXPlr7nlrZfnrKbkuLJzdHLov5vooYzovazkuYlcblx0ZXhwb3J0cy5oYXNoID0gZnVuY3Rpb24oc3RyLCBzKSB7XG5cdCAgdmFyIGRlZl92ID0gMTMxNTQyMzkxMTtcblx0ICB2YXIgaGFzaCA9IHMgfHwgZGVmX3YsIGksIGNoO1xuXHQgIGZvciAoaSA9IHN0ci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgY2ggPSBzdHIuY2hhckNvZGVBdChpKTtcblx0ICAgIGhhc2ggXj0gKChoYXNoIDw8IDUpICsgY2ggKyAoaGFzaCA+PiAyKSk7XG5cdCAgfVxuXHQgIHZhciBycyA9IChoYXNoICYgMHg3RkZGRkZGRikudG9TdHJpbmcoMTYpO1xuXHQgIHJldHVybiBycztcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDcxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIOi/lOWbnkdNVOagvOW8j+eahOaXtuWMuu+8jOWmgu+8mkdNVCswNTo0NSwgR01ULTA3OjAwLCBHTVQrMDg6MDBcblx0ICovXG5cdGV4cG9ydHMuZ2V0VGltZVpvbmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIF90aW1lWm9uZSA9IC1uZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KCkgLyA2MDtcblx0ICB2YXIgX2FuZCA9ICcrJztcblx0ICBpZiAoX3RpbWVab25lIDwgMCkge1xuXHQgICAgX2FuZCA9ICctJztcblx0ICB9XG5cdCAgdmFyIHpvbmUgPSBNYXRoLmFicyhwYXJzZUludChfdGltZVpvbmUpKTtcblx0ICB2YXIgcmVtYWluZGVyID0gTWF0aC5hYnMocGFyc2VJbnQoX3RpbWVab25lKSAtIF90aW1lWm9uZSk7XG5cdCAgdmFyIHJlbWFpbmRlclpvbmUgPSAnMDAnO1xuXHQgIGlmIChyZW1haW5kZXIgPiAwKSB7XG5cdCAgICByZW1haW5kZXJab25lID0gNjAgKiByZW1haW5kZXI7XG5cdCAgfVxuXHQgIHJldHVybiAnR01UJyArIF9hbmQgKyAoem9uZSA+IDkgPyB6b25lIDogKCcwJyArIHpvbmUpKSArICc6JyArIHJlbWFpbmRlclpvbmU7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeWfuuehgOWPguaVsOaUtumbhu+8mlxuXHQgKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiAxLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWPguaVsDogYmFzaWNMaXN0XG5cdCAgICAgKiAyLiBiZWFjb27mianlsZXlj4LmlbA6IGV4cGFyYW1zXG5cdCAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG5cdCAgICAgKiDkuK3pgJTlpITnkIZfJOWFqOWxgOWPmOmHjzogcHJvY2Vzc0xvZGFzaERvbGxhclxuXHQgICAgICogNC4gbG9jYWxTdG9yYWdl5Lit5a2Y5YKo55qE5LiK5LiA6aG1c3Bt5L+h5oGvOiBzcG1hYnRlc3Rcblx0ICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGlzVEJFbnYgPSBtaW5pLmlzVEIoKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgbG9nZGF0YSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcblx0ICAgICAgdmFyIGN1cnJlbnRQYWdlICA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdIHx8IHt9O1xuXHQgICAgICBpZiAoY3VycmVudFBhZ2UgJiYgIWxvZ2RhdGEudGl0bGUpIHtcblx0ICAgICAgICBsb2dkYXRhLnRpdGxlID0gY3VycmVudFBhZ2Uucm91dGUgfHwgJyc7ICBcblx0ICAgICAgfVxuXHQgICAgICBsb2dkYXRhLnVybCA9ICghaXNUQkVudiAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgPyAnaHR0cHM6Ly8nIDogJycpICsgKGN1cnJlbnRQYWdlLnJvdXRlICB8fCBjdXJyZW50UGFnZS5pcyB8fCAnLScpO1xuXHRcblx0ICAgICAgdmFyIHByZSA9ICctJztcblx0ICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICB2YXIgcHJlUGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDJdIHx8IHt9O1xuXHQgICAgICAgIHByZSA9ICghaXNUQkVudiAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgPyAnaHR0cHM6Ly8nIDogJycpICsgKHByZVBhZ2Uucm91dGUgfHwgcHJlUGFnZS5pcyB8fCAnLScpO1xuXHQgICAgICB9XG5cdCAgICAgIGxvZ2RhdGEucHJlID0gcHJlO1xuXHQgICAgICBpZiAobG9nZGF0YS5zZGtfaW5mbykge1xuXHQgICAgICAgIGxvZ2RhdGEuc2RrX2luZm8ud2luZG1pbGwgPSAnMSc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gbG9nZGF0YTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L3doYXRfdG9fc2VuZHB2X3VzZXJkYXRhLmpzXG5cdCAqXG5cdCAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuXHQgKiAgICAgICAgICAg5bm25bCG5pS26ZuG5Yiw55qE6Ieq5a6a5LmJ5Y+C5pWw5Lul5pWw57uE5qC85byP6L+95Yqg5YiwcHZkYXRh5ZCO6Z2i77yacHZkYXRhLmNvbmNhdCh1c2VyZGF0YSlcblx0ICogIGRlcHM6IHdoYXRfdG9fc2VuZHB2XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGZvcm1hdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG5cdCAgICAgKlxuXHQgICAgICogZ29rZXk6XG5cdCAgICAgKiAgIOi/meWdl+S4uuWvueWOhuWPsnVzZXJkYXRh5Lyg6YCS55qE5YW85a655YGa5rOV77yMVE9ET++8muaOqOWKqOW6lOeUqOaWueWPmOabtFxuXHQgICAgICogICDlupTnlKjmlrnkvKDpgJLnmoRnb2tleeagvOW8j+W6lOeUqOaWueiHquihjOWGs+Wumu+8jFxuXHQgICAgICogICAgIOWmgiBnb2tleT1cImE9MSZiPTJcIiDmiJYge1wiYVwiOlt7XCJrZXlcIjoyMDE2MTIyNjE1NTAsXCJ2YWx1ZVwiOjAuMX0se1wia2V5XCI6MjAxNjEyMjYxNjAwLFwidmFsdWVcIjowLjV9LHtcImtleVwiOjIwMTYxMjI2MTYxMCxcInZhbHVlXCI6MX1dfVxuXHQgICAgICogICDov5nlnZfpgLvovpHmmK/pgKDmiJBleHRlbmRhcmdz5YaF6YOo5Ye6546w5aSa5Liq5pac5p2g55qE5YWD5Ye277yB77yB77yBXG5cdCAgICAgKiBwYWdlX2lkOlxuXHQgICAgICogICDmnIlwYWdlX2lk5bCx5Zyoc3BtYuS4rea3u+WKoOWtkOWPguaVsFxuXHQgICAgICogICDml6BwYWdlX2lk5bCx5riF6Zmkc3BtYuS4reeahOWtkOWPguaVsFxuXHQgICAgICogc3BtX2NudFxuXHQgICAgICogICDmm7TmlLnlroxzcG1i5L2N6L+Y6ZyA6KaB5pu05pawc3BtX2NudCBA6LCL5aOrIGluIDIwMTgtMDMtMjAgIOS7peWFjXRvVVTnmoRzcG0tY2505Lii5aSx5YiG5qG25Y+3XG5cdCAgICAgKiDkuKrmgKfljJblj4LmlbDvvJpcblx0ICAgICAqICAgMS4gKGFwbHVz5qSN5YWlKTogPG1ldGEgbmFtZT1cImFwbHVzLWNwdmRhdGFcIiBjb250ZW50PVwiSlNPTnN0cmluZ1wiPlxuXHQgICAgICogICAyLiDmlrnms5XkvKDlhaU6IGFwbHVzLnNlbmRQVih7Q09ORklHfSwge1VTRVJEQVRFfSk7XG5cdCAgICAgKiDlj43kvZzlvIrnmoTmlofmoaPlrr3pq5g6IF9wdyxfcGhcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG5cdCAgICAgKi9cblx0ICAgIGdldFVzZXJkYXRhOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgZCA9IHt9O1xuXHRcblx0ICAgICAgaWYgKGNvbmZpZyAmJiAhY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgICBpZiAoY29uZmlnLmdva2V5KSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgZCA9IGZvcm1hdC5wYXJhbTJvYmooY29uZmlnLmdva2V5KTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICAgZCA9IGNvbmZpZy5nb2tleTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjb21ib1VzZXJkYXRhID0gZnVuY3Rpb24oX2RhdGEpIHtcblx0ICAgICAgICBpZihpc0FycmF5KF9kYXRhKSl7XG5cdCAgICAgICAgICBfZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuXHQgICAgICAgICAgICBkID0gT2JqZWN0LmFzc2lnbih7fSwgZCwgaXRlbSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oe30sIGQsIF9kYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnKSk7XG5cdFxuXHQgICAgICB2YXIgY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgIHZhciBwYWdlTmFtZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICdwYWdlJztcblx0ICAgICAgdmFyIHBhZ2VQcm9wZXJ0aWVzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXBhZ2UtcHJvcGVydGllcycpIHx8IHt9O1xuXHQgICAgICB2YXIgcGFnZVByb3BlcnR5ID0gcGFnZVByb3BlcnRpZXNbcGFnZU5hbWVdO1xuXHQgICAgICBpZiAodHlwZW9mIHBhZ2VQcm9wZXJ0eSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBjb21ib1VzZXJkYXRhKHBhZ2VQcm9wZXJ0eSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGEgfHwge307XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEodXNlcmRhdGEpO1xuXHRcblx0ICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5pu05pawcHJl77yI5Zyo6L+Z6YeM5YGa55qE5Y6f5Zug5piv77yMcHJl5Y+C5pWw5bGe5LqOYmFzaWPlj4LmlbDvvIzkvYbmmK91c2VyZGF0YeS4reWmguS8oOmAkuS6hnJlZmVycmVy77yM5Y+v5Lul6KaG55uWcHJl77yJXG5cdCAgICAgKi9cblx0ICAgIHVwZGF0ZVByZTogZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLnJlZmVycmVyKSB7XG5cdCAgICAgICAgXyQucGFnZV9yZWZlcnJlciA9IGNvbmZpZy5yZWZlcnJlcjtcblx0ICAgICAgICBkYXRhLnByZSA9IGNvbmZpZy5yZWZlcnJlcjtcblx0ICAgICAgfVxuXHQgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcblx0ICAgICAgcmV0dXJuIGRhdGE7XG5cdCAgICB9LFxuXHQgICAgLyoqXG5cdCAgICAgKiDmm7TmlrDpobXpnaLnmoRVcmxcblx0ICAgICAqL1xuXHQgICAgdXBkYXRlVXJsOmZ1bmN0aW9uKGRhdGEpe1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgaWYoY29uZmlnJiZjb25maWcucGFnZVVybCl7XG5cdCAgICAgICAgZGF0YS51cmwgPSBjb25maWcucGFnZVVybDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZGF0YTtcblx0ICAgIH0sXG5cdCAgICAvKipcblx0ICAgICAqIOabtOaWsOadpea6kHNwbVxuXHQgICAgICovXG5cdCAgICB1cGRhdGVTcG1Vcmw6ZnVuY3Rpb24oZGF0YSl7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgc3BtVXJsID0gY29uZmlnW2FwbHVzU3RhdGljLlNQTV9VUkxdfHxjb25maWcuc3BtVXJsO1xuXHQgICAgICBpZihzcG1Vcmwpe1xuXHQgICAgICAgIGRhdGEuZ29rZXlbYXBsdXNTdGF0aWMuU1BNX1VSTF0gPSBzcG1Vcmw7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGRhdGE7XG5cdCAgICB9LFxuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBkID0gdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGE7XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZ2V0VXNlcmRhdGEoKSwgZC51c2VyZGF0YSB8fCB7fSk7XG5cdCAgICAgIGQuZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBkLmdva2V5LCB1c2VyZGF0YSk7XG5cdCAgICAgIGQgPSB0aGlzLnVwZGF0ZVByZShkKTtcblx0ICAgICAgZCA9IHRoaXMudXBkYXRlVXJsKGQpO1xuXHQgICAgICBkID0gdGhpcy51cGRhdGVTcG1VcmwoZCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gZDtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQudXNlcmRhdGEgPSBkLmdva2V5O1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDc0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL2Nhbl90b19zZW5kcHYuanNcblx0ICpcblx0ICog5L2c55So77ya5Yik5patcHbog73lkKblj5HpgIHvvIzkuI3lj6/ku6Xlj5HpgIHliJnkvJrkuK3mlq3lkI7nu63miYDmnInkuK3pl7Tku7bmiafooYxcblx0ICogZGVwczog5pegXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICog5piv5ZCm6KaB5omn6KGMc2VuZHB255qE5YWl5Y+jXG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICB2YXIgY291bnQgPSBfJC5zZW5kX3B2X2NvdW50IHx8IDA7XG5cdCAgICAgIF8kLnNlbmRfcHZfY291bnQgPSArK2NvdW50O1xuXHQgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfSxcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNzUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX2hqbGpfdXNlcmRhdGEuanNcblx0ICpcblx0ICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG5cdCAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBsb2dkYXRh5ZCO6Z2i77yabG9nZGF0YS5jb25jYXQodXNlcmRhdGEpXG5cdCAqICBkZXBzOiB3aGF0X3RvX2hqbGpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdC8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDph4fpm4bkuKrmgKfljJblj4LmlbBcblx0ICAgICAqXG5cdCAgICAgKiByZWNvcmQobG9na2V5LCBnbWtleSwgZ29rZXkpIEFQSeS4reeahGdva2V5XG5cdCAgICAgKiBtZXRhOmFwbHVzLWV4aW5mb+S/oeaBrywgbWV0YTphcGx1cy1leGRhdGHkv6Hmga9cblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG5cdCAgICAgKi9cblx0ICAgIGdldFVzZXJEYXRhOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSBjLnVzZXJkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgZ29rZXkgPSBjLndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5O1xuXHQgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBmb3JtYXQucGFyYW0yb2JqKHVzZXJkYXRhLmdva2V5KSk7XG5cdCAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGZvcm1hdC5wYXJhbTJvYmooYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4aW5mbycpfHx7fSkpO1xuXHQgICAgICB2YXIgZXhkYXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScpO1xuXHQgICAgICBpZiAoaXNBcnJheShleGRhdGEpKSB7XG5cdCAgICAgICAgZXhkYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG5cdCAgICAgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBpdGVtKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBleGRhdGEgfHwge30pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBnb2tleTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnidkb25lJ+e7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiAnZG9uZScgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGxvZ2RhdGEgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YTtcblx0ICAgICAgdmFyIGdva2V5ID0gdGhpcy5nZXRVc2VyRGF0YSgpO1xuXHQgICAgICAvLyDlupTnlKjpgIDlh7rkuovku7bmr5TovoPnibnmrorvvIxkdXJhdGlvbuWNs2FyZzEgQOaWh+mdklxuXHQgICAgICBpZiAobG9nZGF0YS5nbWtleSA9PT0gJzEwMTAnKSB7XG5cdCAgICAgICAgbG9nZGF0YS5hcmcxID0gZ29rZXkuZHVyYXRpb24gfHwgbG9nZGF0YS5sb2drZXk7XG5cdCAgICAgIH1cblx0ICAgICAgbG9nZGF0YS5nb2tleSA9IGdva2V5O1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IGxvZ2RhdGE7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNzYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcblx0ICogQVBJ5o+S5Lu2XG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNzcpKHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDc3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluLmpzXG5cdCAqIEFQSeaPkuS7tlxuXHQgKlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IGxvZ0NvbmZpZyB7XG5cdCAqICAgIHB2OiB7XG5cdCAqICAgICAgcGx1Z2luczogcmVxdWlyZSgnLi9saWJfbG9nL3BsdWdpbnNfcHYnKSxcblx0ICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ191Jylcblx0ICogICAgfSxcblx0ICogICAgaGpsajoge1xuXHQgKiAgICAgIHBsdWdpbnM6IHJlcXVpcmUoJy4vbGliX2xvZy9wbHVnaW5zX2hqbGonKSxcblx0ICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ19oamxqX3UnKVxuXHQgKiAgICB9XG5cdCAqICB9XG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsb2dDb25maWcpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgaWYgKGFwbHVzLl9hcGx1c19hcGkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9IGVsc2Uge1xuXHQgICAgYXBsdXMuX2FwbHVzX2FwaSA9IHtcblx0ICAgICAgc3RhdHVzOiBhcGx1c1N0YXRpYy5DT01QTEVURVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHZhciBhcGx1c09iaiA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpLnJ1bi5jcmVhdGUoe1xuXHQgICAgbG9nQ29uZmlnOiBsb2dDb25maWdcblx0ICB9KTtcblx0ICBmb3IgKHZhciBrIGluIGFwbHVzT2JqKSB7XG5cdCAgICBhcGx1c1trXSA9IGFwbHVzT2JqW2tdO1xuXHQgIH1cblx0ICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUywgYXBsdXMpO1xuXHQgIHZhciBtc2dBcnIgPSBbYXBsdXNTdGF0aWMuQVBMVVMgKyAnUmVhZHknLCBhcGx1c1N0YXRpYy5DT01QTEVURV07XG5cdCAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dBcnIpO1xuXHQgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNnQXJyKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDc4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgY2xvbmVEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIFJlZHVjZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0dmFyIG1ldGFJbmZvID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdHZhciBpc1RyaXZlciA9IF9fd2VicGFja19yZXF1aXJlX18oODIpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0dmFyIF9nZXRQYWdlU3BtID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgaWYgKG15ICYmIG15LmNhbGwgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBteS5jYWxsKCdoYW5kbGVMb2dnaW5nQWN0aW9uJywge1xuXHQgICAgICAndHlwZSc6ICdiZWhhdmlvcicsXG5cdCAgICAgICdzdWJUeXBlJzogb3B0cy5zdWJUeXBlXG5cdCAgICB9LCBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgIHZhciBycyA9IHt9O1xuXHQgICAgICByc1tvcHRzLnNwbVR5cGVdID0gcmVzW29wdHMuc3BtVHlwZV07XG5cdCAgICAgIGNhbGxiYWNrKHJzKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBydW4gPSBCYXNlLmV4dGVuZCh7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdFVCDor7fmsYLkuIDkuKrlm77niYflnLDlnYDvvIzlkJHmnI3liqHlmajlj5HpgIHmiZPngrlcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB1cmwge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2RhdGFTdHJdIHtTdHJpbmcgfHwgT2JqZWN0fVxuXHQgICAqIEBwYXJhbSBbbWV0aG9kXSB7U3RyaW5nfSAgLy8gUE9TVCBPUiBHRVRcblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdCAgX3NlbmQ6IGZ1bmN0aW9uICh1cmwsIGRhdGEsIG1ldGhvZCwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcblx0ICAgIHVybCA9IHV0aWwuY2FuMmh0dHBzKHVybCk7XG5cdCAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG5cdCAgICAgIG1pbmkucmVxdWVzdCh1cmwsIHtcblx0ICAgICAgICBtZXRob2Q6IG1ldGhvZCxcblx0ICAgICAgICBkYXRhOiBkYXRhLFxuXHQgICAgICAgIGRhdGFUeXBlOiAnYmFzZTY0J1xuXHQgICAgICB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtaW5pLnJlcXVlc3QodXJsICsgJz8nICsgZGF0YSwge1xuXHQgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICAgIGRhdGFUeXBlOiAnYmFzZTY0J1xuXHQgICAgICB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIHJldHVybiB1cmw7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR0VUIOivt+axguS4gOS4quWPr+inhuWMlumFjee9ruS/oeaBr++8jOWQkeacjeWKoeWZqOWPkVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHVybCB7U3RyaW5nfVxuXHQgICAqL1xuXHQgIF9yZXF1ZXN0VlRDb25maWc6IGZ1bmN0aW9uKHVybCwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcblx0ICAgIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuXHQgICAgICAvLyB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcblx0ICAgICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG5cdCAgICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAgICAgfVxuXHQgICAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICAgIH1cblx0ICAgIG1pbmkucmVxdWVzdCh1cmwsIHsgbWV0aG9kOiAnR0VUJyB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIFtPYmplY3RdIGNvbmZpZzoge1xuXHQgICAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuXHQgICAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2Vcblx0ICAgKiAgIHBhZ2VfaWQ6IDEyMywgICAgICAgICAvLyDlsIbkvJrkvZPnjrDlnKhzcG1i5L2N5LiKXG5cdCAgICogICBnb2tleTogJycsICAgICAgICAgICAgLy8g55So5oi36Ieq5a6a5LmJ5Y+C5pWw77yI5ZCR5LiL5YW85a6577yMVE9ET+WQjue7reS4i+aOie+8iVxuXHQgICAqIH1cblx0ICAgKiBAcGFyYW0gW09iamVjdF0gdXNlcmRhdGE6IHtcblx0ICAgKiAgIHJlZmVycmVyOiAnaHR0cDovL3d3dy50YW9iYW8uY29tJyAgIC8vIOWwhuS8muabv+aNonB26K+35rGC55qEcHJl5Y+C5pWwXG5cdCAgICogICB4eHgxOiAndnZ2MScsXG5cdCAgICogICB4eHgyOiAndnZ2MicsXG5cdCAgICogICB4eHhOOiAndnZ2TicsXG5cdCAgICogfSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG5cdCAgICovXG5cdCAgX3NlbmRQVjogZnVuY3Rpb24gKGNvbmZpZywgdXNlcmRhdGEpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcblx0XG5cdCAgICBpZiAoY29uZmlnLnBhZ2VOYW1lKSB7XG5cdCAgICAgIGFwbHVzLl9zZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVUyArICctcGFnZW5hbWUnLCBjb25maWcucGFnZU5hbWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcblx0ICAgIGNvbmZpZy5yZWNvcmRUeXBlID0gJ1BWJzsgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG5cdCAgICBpZiAoIWNvbmZpZy5tZXRob2QpIHtcblx0ICAgICAgY29uZmlnLm1ldGhvZCA9ICdHRVQnO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwdiA9IGFwbHVzLmxvZ0NvbmZpZy5wdjtcblx0ICAgIHJlZHVjZXIucnVuKHtcblx0ICAgICAgcGx1Z2luczogcHYucGx1Z2lucyxcblx0ICAgICAgY29udGV4dDogY2xvbmVEZWVwKHB2LmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgfSwge1xuXHQgICAgICBjb25maWc6IGNvbmZpZyxcblx0ICAgICAgdXNlcmRhdGE6IHVzZXJkYXRhIHx8IHt9LFxuXHQgICAgICBwdWJzdWJUeXBlOiAncHYnLFxuXHQgICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcHYsXG5cdCAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2J1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDogZrlkIjkuIrmiqXku6Tnrq3ml6Xlv5dcblx0ICAgKlxuXHQgICAqIEBwYXJhbXMge1N0cmluZ30gbG9na2V577yI5b+F5aGr77yJXG5cdCAgICogQHBhcmFtcyB7U3RyaW5nfSBnbWtlee+8iOW/heWhq++8iSDmnprkuL7lgLzvvJogQ0xLIOWSjCBFWFBcblx0ICAgKiBAcGFyYW1zIHtBcnJheU9iamVjdH0gZ29rZXlz77yI5b+F5aGr77yJ5YaF572u55qE5a+56LGh5Y+C5pWw5qC85byP5aaC77yaXG5cdCAgICogIFt7XG5cdCAgICogICAgXCJleGFyZ3NcIjogeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5oql55qE6Ieq5a6a5LmJ5Y+C5pWw77yM5YaF5a655Z2H5Li65Y+v6YCJ77yM5aaC5peg6Ieq5a6a5LmJ5Y+C5pWw5YiZ5Lyg56m65a+56LGhXG5cdCAgICogICAgICBcIl93XCI6IDM3NSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X5a695bqmXG5cdCAgICogICAgICBcIl9oXCI6IDE4OCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X6auY5bqmXG5cdCAgICogICAgICBcIl94XCI6IDAsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X5qiq5Z2Q5qCHXG5cdCAgICogICAgICBcIl95XCI6IDg3LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X57q15Z2Q5qCHXG5cdCAgICogICAgICBcIl9yYXRlXCI6IFwiMS4wMFwiLCAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnpnaLnp6/mr5Tkvotcblx0ICAgKiAgICAgIFwiX3ZpZXdhYmlsaXR5XCI6IFwiaW50ZXJzZWN0aW9uXCIsICAgICAgIC8vIOabneWFieaWueW8jyBpbnRlcnNlY3Rpb24g5oiWIGZpbGx3aW5kb3dcblx0ICAgKiAgICAgIC8vIOmZpOS6huS4iui/sOS/neeVmeWPguaVsOWklueahOWFtuS7luWPguaVsGtleS12YWx1ZeiHquihjOWumuS5ie+8mlxuXHQgICAqICAgICAgXCJ5b3VyS2V5MVwiOiBcInlvdXJWYWx1ZTFcIiwgICAgICAgIFxuXHQgICAqICAgICAgXCJ5b3VyS2V5MlwiOiBcIiVFNCVCOCVBRCVFNSU5QiVCRFwiICAgICAgLy8g5aaC5Li65Lit5paH77yM5YiZ6ZyA6Ieq6KGM57yW56CBXG5cdCAgICogICAgICAuLi4uLi5cblx0ICAgKiAgICB9LFxuXHQgICAqICAgIFwic2NtXCI6IFwiYS5iLmMuZFwiLCAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nt5Li65Y+v6YCJ5Y+C5pWw77yM5aaC5peg5YiZ5Lyg56m65YC8XG5cdCAgICogICAgXCJzcG1cIjogXCJzcG1hLnNwbWIuc3BtYy5zcG1kXCIsICAgICAgICAgICAvLyBzcG3kuLrlv4XpgInlj4LmlbDvvIzkvb/nlKjmoIflh4bnmoTlm5vmrrXlvI9cblx0ICAgKiAgICBcImFwbHVzQ29udGVudElkXCI6IFwiXCIgICAgICAgICAgICAgICAgICAgIC8vIOS/neeVmeWtl+aute+8jOaaguaXtuS4jemcgOimgeS8oFxuXHQgICAqICB9XVxuXHQgICAqIEBwYXJhbXMge1N0cmluZ30gbWV0aG9k77yI5Y+v6YCJ77yJICAgICAgICAgICAgICAvLyDmnprkuL7lgLzvvJogR0VU5ZKMUE9TVO+8jOm7mOiupOS9v+eUqFBPU1TmlrnlvI/kuIrmiqVcblx0ICAgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2IgICAgICAgICAgICAgICAgICAgICAgLy8g5L+d55WZ5bGe5oCn77yM5pqC5pe25LiN6ZyA6KaB5LygXG5cdCAgICovXG5cdCAgX2NvbWJpbmVSZWNvcmQ6IGZ1bmN0aW9uKGxvZ2tleSwgZ21rZXksIGdva2V5cywgbWV0aG9kKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICB2YXIgRVhQID0gJ0VYUCc7XG5cdCAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpICYmIChnbWtleSA9PT0gRVhQIHx8IGdta2V5ID09PSAnQ0xLJykpIHtcblx0ICAgICAgaWYgKGlzQXJyYXkoZ29rZXlzKSkge1xuXHQgICAgICAgIGlmICghbWV0aG9kKSB7XG5cdCAgICAgICAgICBtZXRob2QgPSAnUE9TVCc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB1c2VyZGF0YSA9IFtdO1xuXHQgICAgICAgIHZhciBzZW5kdG9teSA9ICd0cnVlJztcblx0ICAgICAgICBnb2tleXMuZm9yRWFjaChmdW5jdGlvbih2KXtcblx0ICAgICAgICAgIHVzZXJkYXRhLnB1c2goe1xuXHQgICAgICAgICAgICBleGFyZ3M6IHR5cGVvZiB2LmV4YXJncyA9PT0gJ29iamVjdCcgPyB2LmV4YXJncyA6IHt9LFxuXHQgICAgICAgICAgICBzY206IHYuc2NtLFxuXHQgICAgICAgICAgICBzcG06IHYuc3BtLFxuXHQgICAgICAgICAgICBhcGx1c0NvbnRlbnRJZDogdi5hcGx1c0NvbnRlbnRJZCxcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgaWYgKHYuX2FwbHVzX3NlbmR0b215ID09PSAnZmFsc2UnICYmIHNlbmR0b215ID09PSAndHJ1ZScpIHtcblx0ICAgICAgICAgICAgc2VuZHRvbXkgPSAnZmFsc2UnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHZhciBfZ29rZXlzID0gW107XG5cdCAgICAgICAgX2dva2V5cy5wdXNoKChnbWtleSA9PT0gRVhQID8gJ2V4cGRhdGE9JyA6ICdjbGtkYXRhPScpICsgSlNPTi5zdHJpbmdpZnkodXNlcmRhdGEpKTtcblx0ICAgICAgICBfZ29rZXlzLnB1c2goZ21rZXkgPT09IEVYUCA/ICdfaXNfYXV0b19leHA9MScgOiAnX2lzX2F1dG9fY2xrPTEnKTtcblx0ICAgICAgICBfZ29rZXlzLnB1c2goJ19ldmVudFR5cGU9Y3VzdG9tJyk7XG5cdCAgICAgICAgX2dva2V5cy5wdXNoKCdfbWV0aG9kPScgKyBtZXRob2QpO1xuXHQgICAgICAgIF9nb2tleXMucHVzaCgnX3BrZ1NpemU9JyArIGdva2V5cy5sZW5ndGgpO1xuXHQgICAgICAgIGlmIChzZW5kdG9teSA9PT0gJ2ZhbHNlJykge1xuXHQgICAgICAgICAgX2dva2V5cy5wdXNoKCdfYXBsdXNfc2VuZHRvbXk9ZmFsc2UnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYXBsdXMucmVjb3JkKGxvZ2tleSwgZ21rZXksIF9nb2tleXMuam9pbignJicpLCBtZXRob2QpOyAgXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY29uc29sZS53YXJuKCd0eXBlIG9mIGdva2V5cyBtdXN0IGJlIEFycmF5T2JqZWN0IScpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjb25zb2xlLndhcm4oJ29ubHkgc3VwcG9ydCBFWFAgb3IgQ0xLIGxvZyB0byBjb21iaWxlIHJlY29yZCEnKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlj5HpgIHpu4Tph5Hku6Tnrq3miZPngrlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbG9na2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGdta2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGdva2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCDor7fmsYLmlrnms5XkuLogUE9TVCBvciBHRVRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gY2Jcblx0ICAgKi9cblx0ICBfcmVjb3JkOiBmdW5jdGlvbiAobG9na2V5LCBnbWtleSwgZ29rZXksIG1ldGhvZCwgY2IpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIGxvZ2tleSA9IGxvZ2tleSArICcnO1xuXHQgICAgaWYgKGxvZ2tleSAmJiBsb2drZXkuaW5kZXhPZignLycpICE9PSAwICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICBsb2drZXkgPSAnLycgKyBsb2drZXk7XG5cdCAgICB9XG5cdCAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG5cdCAgICB2YXIgaGpsaiA9IGFwbHVzLmxvZ0NvbmZpZy5oamxqO1xuXHQgICAgcmVkdWNlci5ydW4oe1xuXHQgICAgICBwbHVnaW5zOiBoamxqLnBsdWdpbnMsXG5cdCAgICAgIGNvbnRleHQ6IGNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgfSwge1xuXHQgICAgICBjb25maWc6IHtcblx0ICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcblx0ICAgICAgICBtZXRob2Q6IG1ldGhvZCB8fCAnR0VUJ1xuXHQgICAgICB9LFxuXHQgICAgICB1c2VyZGF0YToge1xuXHQgICAgICAgIGxvZ2tleTogbG9na2V5LFxuXHQgICAgICAgIGdta2V5OiBnbWtleSxcblx0ICAgICAgICBnb2tleTogZ29rZXlcblx0ICAgICAgfSxcblx0ICAgICAgcHVic3ViVHlwZTogJ2hqbGonLFxuXHQgICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcmVjb3JkLFxuXHQgICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuXHQgICAgfSwgZnVuY3Rpb24oKXtcblx0ICAgICAgaWYgKGlzRnVuY3Rpb24oY2IpKSB7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9LFxuXHQgIFxuXHQgIGdldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuXHQgICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcblx0ICAgIHZhciBkYXRhID0gc3BtLmRhdGEgfHwge307XG5cdCAgICByZXR1cm4gW2RhdGEuYSwgZGF0YS5iXTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDmm7TmlrDpobXpnaLnmoQgYeOAgWIg5L2NXG5cdCAgICog6ZyA5rGC5Y+C6KeB77yaaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vYWxpbG9nL2tiL2lzc3Vlcy8xMzdcblx0ICAgKiBAcGFyYW0gYSB7U3RyaW5nfVxuXHQgICAqIEBwYXJhbSBbYl0ge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2NiXSB7RnVuY3Rpb259XG5cdCAgICovXG5cdCAgX3NldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvYmogPSB7fTtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgdmFyIGNiO1xuXHQgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBvYmogPSBhcmdzWzBdO1xuXHQgICAgICBjYiA9IGFyZ3NbMV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvYmouc3BtQ250ID0gW2FyZ3NbMF0sIGFyZ3NbMV0sICcwJywgJzAnXS5qb2luKCcuJyk7XG5cdCAgICAgIGNiID0gYXJnc1syXTtcblx0ICAgIH1cblx0ICAgIHZhciBtc2dzO1xuXHQgICAgaWYgKCFvYmouc3BtQ250ICYmICFvYmouc3BtVXJsICYmIG1ldGFJbmZvLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykpIHtcblx0ICAgICAgbXNncyA9IFsnY2xlYXJQYWdlU1BNJ107XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvKipcblx0ICAgICAgICogQHBhcmFtcyBvYmoge09iamVjdH0ge1xuXHQgICAgICAgKiAgIHNwbUNudDogJ2EuYi4wLjAnXG5cdCAgICAgICAqICAgc3BtVXJsOiAnYS5iLjAuMCdcblx0ICAgICAgICogICBzcG1QcmU6ICdhLmIuMC4wJ1xuXHQgICAgICAgKiB9XG5cdCAgICAgICAqL1xuXHQgICAgICBtc2dzID0gWydzZXRQYWdlU1BNJywgb2JqXTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICAgIH1cblx0ICAgIHZhciBjYWxsYmFjayA9IHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyA/IGNiIDogZnVuY3Rpb24gKCkge307XG5cdCAgICBjYWxsYmFjayhtc2dzKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDliqjmgIHphY3nva5tZXRhXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gdlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIHtcblx0ICAgKiAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcblx0ICAgKiB9XG5cdCAgICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICAgKi9cblx0ICBfc2V0TWV0YUluZm86IGZ1bmN0aW9uKGFyZzEsIHZhbHVlKSB7XG5cdCAgICByZXR1cm4gbWV0YUluZm8uX3NldE1ldGFJbmZvKGFyZzEsIHZhbHVlKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCMzMzJkZTYyY1xuXHQgICAqIOS4jeaUr+aMgXVwZGF0ZVBhZ2VQcm9wZXJ0aWVz77yM5pS555So5pu/5Luj5pa55qGIc2V0TWV0YUluZm9cblx0ICAgKiBAcGFyYW1zIHtTdHJpbmd9IOmAj+S8oGpzb27lrZfnrKbkuLLvvIzlv4XpobvmmK/lrZfnrKbkuLJcblx0ICAgKi9cblx0ICBfdXBkYXRlUGFnZVByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhcmFtcyl7XG5cdCAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgLy8g5paw5a655ZmoVHJpdmVy6YeH55SodXBkYXRlUGFnZVByb3BlcnRpZXNcblx0ICAgICAgaWYgKGlzVHJpdmVyKCkpIHtcblx0ICAgICAgICBteS5yZXBvcnRBbmFseXRpY3MoJ3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzJywgcGFyYW1zKTtcblx0ICAgICAgfSBlbHNlIGlmKG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCk9PT0nbXknKXtcblx0ICAgICAgICBteS5jYWxsKCdyZXBvcnREYXRhJyx7XG5cdCAgICAgICAgICBzcG1EZXRhaWw6cGFyYW1zLFxuXHQgICAgICAgICAgaWdub3JlRGVmYXVsdFBhZ2VNb25pdG9yOnRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICAvLyDlkJHkuIvlhbzlrrnvvIzkuI3nrqHmgI7kuYjmoLfpg73lvoBtZXRhSW5mb+iuvue9ruS4gOS7vVxuXHQgICAgICB2YXIgY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgIHZhciBwYWdlTmFtZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICdwYWdlJztcblx0ICAgICAgdmFyIGRhdGEgPSB7fTtcblx0ICAgICAgZGF0YVtwYWdlTmFtZV0gPSBwYXJhbXM7XG5cdCAgICAgIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1wYWdlLXByb3BlcnRpZXMnLCBkYXRhKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIGh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9wcm9qZWN0L2FwbHVzX2Nsb3VkIzYwMzRjMWRhXG5cdCAgICovXG5cdCAgX3VwZGF0ZU5leHRQYWdlUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgICAgaWYgKCFwYXJhbXMpIHtcblx0ICAgICAgcGFyYW1zID0ge307XG5cdCAgICB9XG5cdCAgICBpZiAobXkpIHtcblx0ICAgICAgdmFyIGRhdGEgPSB7XG5cdCAgICAgICAgdHlwZTogJ3VwZGF0ZU5leHRQcm9wJyxcblx0ICAgICAgICBldmVudElkOiAtMSxcblx0ICAgICAgICBldmVudGlkOiAtMSxcblx0ICAgICAgICBuYW1lOiAnJyxcblx0ICAgICAgICBwYWdlTmFtZTogJycsXG5cdCAgICAgICAgY29tTmFtZTogJycsXG5cdCAgICAgICAgYXJnMTogJycsXG5cdCAgICAgICAgYXJnMjogJycsXG5cdCAgICAgICAgYXJnMzogJycsXG5cdCAgICAgICAgcGFyYW06IHBhcmFtcyxcblx0ICAgICAgICBwYXJhbXM6IHBhcmFtc1xuXHQgICAgICB9O1xuXHQgICAgICBpZiAobXkuY2FsbFVzZXJUcmFjaykge1xuXHQgICAgICAgIG15LmNhbGxVc2VyVHJhY2soJ2NvbW1pdHV0JywgZGF0YSk7XG5cdCAgICAgIH0gZWxzZSBpZiAobXkucmVwb3J0QW5hbHl0aWNzKSB7XG5cdCAgICAgICAgbXkucmVwb3J0QW5hbHl0aWNzKCdlbnRlcicsIGRhdGEpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG5cdCAgICogT3RoZXJ3aXNlLCBtZXJnZSBjb250ZW50IGF0dHJpYnV0ZXM6XG5cdCAgICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG5cdCAgICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuXHQgICAqICBAcGFyYW0ga1xuXHQgICAqICBAcGFyYW0gdlxuXHQgICAqL1xuXHQgIF9hcHBlbmRNZXRhSW5mbzogbWV0YUluZm8uYXBwZW5kTWV0YUluZm8sXG5cdFxuXHQgIC8qKlxuXHQgICAqIGdldCBtZXRhSW5mbyBieSBrZXlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ31cblx0ICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICovXG5cdCAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uIChrKSB7XG5cdCAgICByZXR1cm4gbWV0YUluZm8uZ2V0TWV0YUluZm8oayk7XG5cdCAgfSxcblx0XG5cdCAgLy8g5rex5bqm5YWL6ZqG77yM5LuO5qC45b+D5bqT5pq06Zyy5Ye65Y675L6bYXBsdXNKU+aPkuS7tuS9v+eUqFxuXHQgIGNsb25lRGVlcDogY2xvbmVEZWVwLFxuXHQgIC8qKlxuXHQgICAqIOWmguaenOWuueWZqOWunueOsOS6hmFwcGVhcuOAgWRpc2FwcGVhcu+8jOS9huS4muWKoeWPiOaDs+aJi+WKqOaOp+WItuaJk+eCueeUn+WRveWRqOacn+aXtuS9v+eUqFxuXHQgICAqXG5cdCAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuXHQgICAqL1xuXHQgIF9za2lwUGFnZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKCkge1xuXHQgICAgLy8gVXNlclRyYWNrLnNraXBQYWdlKCk7XG5cdCAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuXHQgICAgICBteS5jYWxsVXNlclRyYWNrKCdza2lwUGFnZScpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgLyoqXG5cdCAgICog5aaC5p6c5a655Zmo5pyq5o+Q5L6bYXBwZWFy44CBZGlzYXBwZWFy5pe26ZyA6KaB5Lia5Yqh5omL5Yqo6LCD55SoXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG5cdCAgICovXG5cdCAgX3BhZ2VBcHBlYXI6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCl7XG5cdCAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjayAmJiB0aGlzLmlzUGFnZURpc0FwcGVhcikge1xuXHQgICAgICB0aGlzLmlzUGFnZURpc0FwcGVhciA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmlzUGFnZUFwcGVhciA9IHRydWU7XG5cdCAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3BhZ2VBcHBlYXInKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIOWmguaenOWuueWZqOacquaPkOS+m2FwcGVhcuOAgWRpc2FwcGVhcuaXtumcgOimgeS4muWKoeaJi+WKqOiwg+eUqFxuXHQgICAqXG5cdCAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuXHQgICAqL1xuXHQgIF9wYWdlRGlzYXBwZWFyOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbigpe1xuXHQgICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2sgJiYgdGhpcy5pc1BhZ2VBcHBlYXIpIHtcblx0ICAgICAgdGhpcy5pc1BhZ2VEaXNBcHBlYXIgPSB0cnVlO1xuXHQgICAgICB0aGlzLmlzUGFnZUFwcGVhciA9IGZhbHNlO1xuXHQgICAgICBteS5jYWxsVXNlclRyYWNrKCdwYWdlRGlzYXBwZWFyJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBfdXBkYXRlUGFnZVV0cGFyYW06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICAgIGlmICghcGFyYW1zKSB7XG5cdCAgICAgIHBhcmFtcyA9IHt9O1xuXHQgICAgfVxuXHQgICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2spIHtcblx0ICAgICAgbXkuY2FsbFVzZXJUcmFjaygndXBkYXRlUGFnZVV0cGFyYW0nLCB7XG5cdCAgICAgICAgJ3V0UGFyYW1Kc29uJzogSlNPTi5zdHJpbmdpZnkocGFyYW1zKVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBfdXBkYXRlTmV4dFBhZ2VVdHBhcmFtOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYXJhbXMpe1xuXHQgICAgaWYgKCFwYXJhbXMpIHtcblx0ICAgICAgcGFyYW1zID0ge307XG5cdCAgICB9XG5cdCAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuXHQgICAgICBteS5jYWxsVXNlclRyYWNrKCd1cGRhdGVOZXh0UGFnZVV0cGFyYW0nLCB7XG5cdCAgICAgICAgJ3V0UGFyYW1Kc29uJzogSlNPTi5zdHJpbmdpZnkocGFyYW1zKVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDku4XmiYvmt5jvvIhWOS4xMC4w77yJ5bCP56iL5bqP5pSv5oyBXG5cdCAgICogQHBhcmFtcyB7T2JqZWN0fSBwcm9wZXJ0aWVzXG5cdCAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuXHQgICAqL1xuXHQgIF91cGRhdGVTZXNzaW9uUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcblx0ICAgIC8vIGlmIChteSAmJiBteS5yZXBvcnRBbmFseXRpY3MgJiYgdHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICAvLyAgIG15LnJlcG9ydEFuYWx5dGljcygndXBkYXRlU2Vzc2lvblByb3BlcnRpZXMnLCBwcm9wZXJ0aWVzKTtcblx0ICAgIC8vIH1cblx0ICAgIGlmIChteSAmJiBteS5jYWxsICYmIHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBteS5jYWxsKCdoYW5kbGVMb2dnaW5nQWN0aW9uJywge1xuXHQgICAgICAgIHR5cGU6ICdiZWhhdmlvcicsXG5cdCAgICAgICAgc3ViVHlwZTogJ3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzJyxcblx0ICAgICAgICBleHREYXRhOiBwcm9wZXJ0aWVzLFxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIOS7heaJi+a3mO+8iFY5LjkuMO+8ieWwj+eoi+W6j+aUr+aMgVxuXHQgICAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjazoge3NwbVVybDogJyd9XG5cdCAgICovXG5cdCAgX2dldFBhZ2VTcG1Vcmw6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgX2dldFBhZ2VTcG0oe1xuXHQgICAgICBzdWJUeXBlOiAnZ2V0UGFnZVNwbVVybCcsXG5cdCAgICAgIHNwbVR5cGU6ICdzcG1VcmwnXG5cdCAgICB9LCBjYWxsYmFjayk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5LuF5omL5reY77yIVjkuOS4w77yJ5bCP56iL5bqP5pSv5oyBXG5cdCAgICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrIDoge3NwbVByZTogJyd9XG5cdCAgICovXG5cdCAgX2dldFBhZ2VTcG1QcmU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgX2dldFBhZ2VTcG0oe1xuXHQgICAgICBzdWJUeXBlOiAnZ2V0UGFnZVNwbVByZScsXG5cdCAgICAgIHNwbVR5cGU6ICdzcG1QcmUnXG5cdCAgICB9LCBjYWxsYmFjayk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog6K6+572uUGFnZU5hbWUgXG5cdCAgKi9cblx0ICBfc2V0UGFnZU5hbWU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhZ2VOYW1lLCBwYXRoKSB7XG5cdCAgICBpZiAoIXBhZ2VOYW1lKSB7XG5cdCAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICBtc2c6ICdzZXRQYWdlTmFtZSBmYWlsZWQ6ICcgKyAnIHBhZ2VOYW1lPScgKyBwYWdlTmFtZSBcblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBjdXJQYXRoID0gcGF0aCB8fCBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcblx0ICAgIFxuXHQgICAgdmFyIHBhZ2VNZXRhID0gY2xvbmVEZWVwKG1ldGFJbmZvLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykgfHwge30pO1xuXHQgICAgcGFnZU1ldGFbY3VyUGF0aF0gPSBwYWdlTmFtZTtcblx0ICAgIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKCdwYWdlQ29uZmlnJywgcGFnZU1ldGEpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOiOt+WPllBhZ2VOYW1lXG5cdCAgKi9cblx0ICBnZXRQYWdlTmFtZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGF0aCkge1xuXHQgICAgcmV0dXJuIFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKHBhdGgpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOiOt+WPluWFg+e0oOeahHNwbVxuXHQgICAqICovIFxuXHQgIF9nZXRFbGVtZW50U1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbih0YXJnZXQsIGNhbGxiYWNrKSB7XG5cdCAgICBpZiAoIXRhcmdldCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIHZhciBzcG1CID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCAnJzsgXG5cdFxuXHQgICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHZhciB0cmFja2VyUGFyYW1zID0gdGFyZ2V0LmRhdGFzZXQgJiYgdGFyZ2V0LmRhdGFzZXQudHJhY2tlclBhcmFtcyB8fCAnJztcblx0ICAgICAgdmFyIHNwbUNEID0gdXRpbC5qc29uTGlrZVN0cjJKU09OKHRyYWNrZXJQYXJhbXMpO1xuXHQgICAgICByZXR1cm4gW3NwbUIsIHNwbUNELnNwbUMsIHNwbUNELnNwbURdLmpvaW4oJy4nKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgICAgdmFyIGF1dG9fY2xrX21ldGFpbmZvID0gbWV0YUluZm8uZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJykgfHwgW107XG5cdCAgICAgIHZhciBhdXRvX2V4cF9tZXRhaW5mbyA9IG1ldGFJbmZvLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpIHx8IFtdO1xuXHQgICAgICB2YXIgdGFyZ2V0U3BtO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBpO1xuXHQgICAgICAgIC8v6Ieq5Yqo54K55Ye75LyY5YWI57qn5pu06auYXG5cdCAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXV0b19jbGtfbWV0YWluZm8ubGVuZ3RoOyBpKyspe1xuXHQgICAgICAgICAgdmFyIGNsa19pbmZvID0gYXV0b19jbGtfbWV0YWluZm9baV07XG5cdCAgICAgICAgICBpZiAoY2xrX2luZm8uY3NzU2VsZWN0b3IgPT09IHRhcmdldCkge1xuXHQgICAgICAgICAgICB0YXJnZXRTcG0gPSBbc3BtQiwgY2xrX2luZm8uc3BtQywgY2xrX2luZm8uc3BtRF0uam9pbignLicpO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIFxuXHQgICAgICAgIGZvcihpID0gMDsgaSA8IGF1dG9fZXhwX21ldGFpbmZvLmxlbmd0aDsgaSsrKXtcblx0ICAgICAgICAgIHZhciBleHBfaW5mbyA9IGF1dG9fZXhwX21ldGFpbmZvW2ldO1xuXHQgICAgICAgICAgaWYgKGV4cF9pbmZvLmNzc1NlbGVjdG9yID09PSB0YXJnZXQpIHtcblx0ICAgICAgICAgICAgdGFyZ2V0U3BtID0gW3NwbUIsIGV4cF9pbmZvLnNwbUMsIGV4cF9pbmZvLnNwbURdLmpvaW4oJy4nKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTsgXG5cdFxuXHQgICAgICAgIHZhciBlbGVtZW50cyA9IGN0eC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKHRhcmdldCk7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50cy5maWVsZHMgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG5cdCAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG5cdCAgICAgICAgICAgIGlkOiB0cnVlLFxuXHQgICAgICAgICAgfSwgZnVuY3Rpb24ocmV0KSB7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcblx0ICAgICAgICAgICAgaWYgKHJldCAmJiByZXQubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHJldC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGFyZ2V0U3BtICsgJ18nICsgaSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdCk7ICBcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pLmV4ZWMoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG5cdCAgICAgICAgY29uc29sZS53YXJuKCfor6XlubPlj7DkuI3mlK/mjIFkb23lhYPntKDmn6Xor6IsIGVyciA9ICcsIGVycm9yKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cdFxuXHRleHBvcnRzLnJ1biA9IHJ1bjtcblxuXG4vKioqLyB9KSxcbi8qIDc5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIENvbXBvc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTtcblx0dmFyIHBsdWdpbnNMb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcblx0XG5cdC8qKlxuXHQgKiBzZW5wdlxuXHQgKiBAcGFyYW0gW09iamVjdF0gY29uZmlnOiB7XG5cdCAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuXHQgKiAgIGlzX2F1dG86IHRydWUvZmFsc2XvvIwgLy8g5qCH6K+G5piv5ZCm6Ieq5Yqo5omT54K577yM6buY6K6k5Li6dHJ1Ze+8jOWNlemhteW6lOeUqOmcgOimgeS8oGZhbHNlXG5cdCAqICAgcGFnZV9pZDogMTIzLCAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuXHQgKiAgIGdva2V5OiAnJywgICAgICAgICAgIC8vIOebruWJjeW3sue7j+WkseaViFxuXHQgKiAgIHJlZmVycmVyOiAnaHR0cDovL3d3dy50YW9iYW8uY29tJyAgIC8vIOWwhuS8muabv+aNonB26K+35rGC55qEcHJl5Y+C5pWwXG5cdCAqIH0gLy8g5ZCMIGFwbHVzLmxhdW5jaOesrOS6jOS4quWFpeWPguKAnG1hbnVhbOKAnVxuXHQgKlxuXHQgKiBAcGFyYW0gW09iamVjdF0gdXNlcmRhdGEgICAvLyDlkITnp43oh6rlrprkuYlwduWPguaVsFxuXHQgKlxuXHQgKiBAcGFyYW0gW09iamVjdF0gb2JqIC0ge2ZuX2FmdGVyX3B2OiBmbl9hZnRlcl9wdiwgeHh4OiB4eHh9XG5cdCAqXG5cdCAqIHN0ZXAxOiBsb2FkZXIgcGx1Z2lucyAgbWlkZGxld2FyZVxuXHQgKiBzdGVwMjogbG9hZGVyIGRvU2VuZFB2IG1pZGRsZXdhcmVcblx0ICogc3RlcDM6IHJ1biBtaWRkbGV3YXJlc1xuXHQgKi9cblx0XG5cdHZhciBSZWR1Y2VyID0gZnVuY3Rpb24oKSB7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyBPYmplY3QgQ09ORklHIHtcblx0ICogICBjb250ZXh0OiB4eHgsXG5cdCAqICAgcGx1Z2luczogeHh4IFxuXHQgKiB9XG5cdCAqIEBwYXJhbXMgT2JqZWN0IG9wdHMge1xuXHQgKiAgIGNvbmZpZzogY29uZmlnLFxuXHQgKiAgIHVzZXJkYXRhOiB1c2VyZGF0YSxcblx0ICogICBwdWJzdWJUeXBlOiAncHYnIHx8ICdoamxqJyB8fCAncHJlcHYnXG5cdCAqICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfcHYnIHx8ICdtd19jaGFuZ2VfaGpsaicgfHwgJ213X2NoYW5nZV9wcmVwdidcblx0ICogICBtZXNzYWdlRm5RdWV1ZTogW2ZuMSwgZm4yIC4uLl1cblx0ICogfVxuXHQgKi9cblx0UmVkdWNlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKENPTkZJRywgb3B0cywgY2FsbGJhY2spIHtcblx0ICAvLyAx44CBaW5pdCBwbHVnaW5zXG5cdCAgdmFyIHBsID0gbmV3IHBsdWdpbnNMb2FkZXIoKTtcblx0ICBwbC5pbml0KHtcblx0ICAgIG1pZGRsZXdhcmU6IFtdLFxuXHQgICAgY29uZmlnOiBvcHRzLmNvbmZpZyxcblx0ICAgIHBsdWdpbnM6IENPTkZJRy5wbHVnaW5zXG5cdCAgfSk7XG5cdCAgdmFyIG1pZGRsZXdhcmUgPSBwbC5ydW4oKTtcblx0XG5cdCAgLy8g5Yid5aeL5YyW5LiK5LiL5paH546v5aKD77yMY29udGV4dOWGheeahGRhdGHlsIbkvJrlnKjlkITkuKrmj5Lku7bkuK3ov5vooYzotYvlgLzmiJbogIXkv67mlLnvvIjph43opoHvvIlcblx0ICB2YXIgY29udGV4dCA9IGlzRnVuY3Rpb24oQ09ORklHLmNvbnRleHQpID8gbmV3IENPTkZJRy5jb250ZXh0KCkgOiBDT05GSUcuY29udGV4dDtcblx0ICBjb250ZXh0LnVzZXJkYXRhID0gb3B0cy51c2VyZGF0YTtcblx0ICBjb250ZXh0LmxvZ2dlciA9IHV0aWxMb2dnZXIubG9nZ2VyO1xuXHRcblx0ICB2YXIgYXBwID0ge1xuXHQgICAgY29udGV4dDogY29udGV4dCxcblx0ICAgIHB1YnN1YjogdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnYXBsdXNfcHVic3ViJyksXG5cdCAgICBwdWJzdWJUeXBlOiBvcHRzICYmIG9wdHMucHVic3ViVHlwZVxuXHQgIH07XG5cdFxuXHQgIHZhciBjb21wb3NlID0gbmV3IENvbXBvc2UoKTtcblx0ICBjb21wb3NlLmNyZWF0ZShhcHApO1xuXHQgIC8vIOaJp+ihjOS4remXtOS7tlxuXHQgIGNvbXBvc2Uud3JhcChtaWRkbGV3YXJlLCBmdW5jdGlvbigpIHtcblx0ICAgIGFwcC5jb250ZXh0LnN0YXR1cyA9IGFwbHVzU3RhdGljLkNPTVBMRVRFO1xuXHQgICAgaWYgKG9wdHMpIHtcblx0ICAgICAgaWYgKG9wdHMubWlkZGxld2FyZU1lc3NhZ2VLZXkpIHtcblx0ICAgICAgICB1dGlsUHVic3ViLmRvUHViTXNnKFtvcHRzLm1pZGRsZXdhcmVNZXNzYWdlS2V5LCBhcHAuY29udGV4dF0pOyAgXG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG9wdHMubWVzc2FnZUZuUXVldWUpIHtcblx0ICAgICAgICBlYWNoKG9wdHMubWVzc2FnZUZuUXVldWUsIGZ1bmN0aW9uIChmbikge1xuXHQgICAgICAgICAgZm4odXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpLCBDT05GSUcpO1xuXHQgICAgICAgIH0pOyAgXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuXHQgICAgICBjYWxsYmFjayhhcHAuY29udGV4dCk7XG5cdCAgICB9XG5cdCAgfSkoKTtcblx0XG5cdH07XG5cdG1vZHVsZS5leHBvcnRzID0gUmVkdWNlcjtcblxuXG4vKioqLyB9KSxcbi8qIDgwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9jb21wb3NlLmpzXG5cdCAqIOWHveaVsOmYn+WIl+WMheijheWZqCBFeHBvc2UgY29tcG9zaXRvclxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0ZnVuY3Rpb24gY29tcG9zZSAoKSB7fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgLyoqXG5cdCAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG5cdCAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG5cdCAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuXHQgICAqL1xuXHQgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgIGlmICh0eXBlb2YgdGhpc1tuYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgdGhpc1tuYW1lXSA9IHByb3BzW25hbWVdO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLmNhbGxlZExpc3QgPSBbXTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLnNldENhbGxlZExpc3QgPSBmdW5jdGlvbihpKSB7XG5cdCAgaWYgKHV0aWxBcnJheS5pbmRleG9mKHRoaXMuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG5cdCAgICB0aGlzLmNhbGxlZExpc3QucHVzaChpKTtcblx0ICB9XG5cdH07XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS5yZXNldENhbGxlZExpc3QgPSBmdW5jdGlvbigpIHtcblx0ICB0aGlzLmNhbGxlZExpc3QgPSBbXTtcblx0fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbihtdywgY2FsbGJhY2spIHtcblx0ICB2YXIgY29udGV4dCA9IHRoaXM7XG5cdCAgdmFyIGN0eCA9IHRoaXMuY29udGV4dCB8fCB7fTtcblx0ICB2YXIgY29tcG9zZSA9IGN0eC5jb21wb3NlIHx8IHt9O1xuXHQgIHZhciBtYXhUaW1lb3V0ID0gY29tcG9zZS5tYXhUaW1lb3V0IHx8IDEwICogMTAwMDtcblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgdmFyIHNpemUgPSBtdy5sZW5ndGg7IC8vIOS4remXtOS7tumYn+WIl+mVv+W6plxuXHQgICAgdmFyIGkgPSAwOyAvLyDkuK3pl7Tku7bntKLlvJVcblx0ICAgIHZhciBqID0gMDsgLy8g5LiA5Liq5qCH6K+G77yMMC3liJ3lp4vnirbmgIHvvIwxLeS4remXtOS7tuWbnuiwg+aJp+ihjOS6hlxuXHQgICAgdmFyIHNsZWVwSGFuZGVyMTtcblx0ICAgIHZhciBydW4gPSBmdW5jdGlvbihpbmRleCwgc3RhdHVzKSB7XG5cdCAgICAgIC8vIGNvbnRleHQucHVic3ViSW5mbyhjb250ZXh0LCBtd1tpXSk7XG5cdCAgICAgIC8vIOS4remXtOS7tumYn+WIl+aJp+ihjOWujOavleWQjui/lOWbnlxuXHQgICAgICBpZiAoaSA9PT0gc2l6ZSkge1xuXHQgICAgICAgIHN0YXRlID0gJ2RvbmUnO1xuXHQgICAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7IC8vIOmHjee9rmNhbGxlZExpc3Tlj5jph49cblx0ICAgICAgICAvLyBzdGF0dXPlpoLmnpznrYnkuo5kb25l77yM6K+05piO5piv5Lit6YCU6YCA5Ye655qE5Lit6Ze05Lu277yM5LiN6ZyA6KaB5omn6KGM5Zue6LCDXG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spICYmIHN0YXR1cyAhPT0gc3RhdGUpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgc3RhdGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjbGVhclRpbWVvdXQoc2xlZXBIYW5kZXIxKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgLy8gdmFyIGNiX3N0YXRlID0gbnVsbDtcblx0ICAgICAgLy8g5L+d6K+B5q+P5Liq5Lit6Ze05Lu25Y+q5Lya5omn6KGM5LiA5qyhXG5cdCAgICAgIGlmICh1dGlsQXJyYXkuaW5kZXhvZihjb250ZXh0LmNhbGxlZExpc3QsIGkpID09PSAtMSkge1xuXHQgICAgICAgIGNvbnRleHQuc2V0Q2FsbGVkTGlzdCAmJiBjb250ZXh0LnNldENhbGxlZExpc3QoaSk7XG5cdCAgICAgICAgaWYgKG13ICYmIG13W2ldICYmIGlzRnVuY3Rpb24obXdbaV1bMF0pKSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICogQHBhcmFtcyB7QXJyYXl9IG1pZGRsZXdhcmVcblx0ICAgICAgICAgICAgICogQHBhcmFtcyB7QXJyYXl9IG1zZ1xuXHQgICAgICAgICAgICAgKi9cblx0ICAgICAgICAgICAgc3RhdGUgPSBtd1tpXVswXS5jYWxsKGNvbnRleHQsIHN0YXRlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgICAgICAgIGogPSAxOyAgLy8gMS3kuK3pl7Tku7blm57osIPmiafooYzkuoZcblx0ICAgICAgICAgICAgICBydW4oaSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICAgICAgbXNnOiBlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIC8vIOeKtuaAgeS4unBhdXNl562J5b6FMjAwbXPova7or6LvvIznirbmgIHkuLpudW1iZXLnsbvlnovnmoTmlbDlgLznrYnlvoVzdGF0ZW1z6L2u6K+iXG5cdCAgICAgIHZhciBpc051bWJlciA9IHR5cGVvZiBzdGF0ZSA9PT0gJ251bWJlcic7XG5cdCAgICAgIGlmIChzdGF0ZSA9PT0gJ3BhdXNlJyB8fCBpc051bWJlcikge1xuXHQgICAgICAgIGogPSAwO1xuXHQgICAgICAgIC8vIOacgOWkp+etieW+heaXtumVv1xuXHQgICAgICAgIHZhciBfdGltZV9vdXQgPSBpc051bWJlciA/IHN0YXRlIDogbWF4VGltZW91dDtcblx0ICAgICAgICB2YXIgX213X25hbWUgPSBtd1tpXSA/IG13W2ldWzFdIDogJyc7XG5cdCAgICAgICAgc2xlZXBIYW5kZXIxID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIGlmIChqID09PSAwKSB7XG5cdCAgICAgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgICAgICBtc2c6ICdqdW1wIHRoZSBtaWRkbGV3YXJlIGFib3V0ICcgKyBfbXdfbmFtZSArICcsIGJlY2F1c2Ugd2FpdGluZyB0aW1lb3V0IG1heFRpbWVvdXQgPSAnICsgX3RpbWVfb3V0XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICBzdGF0ZSA9IG51bGw7XG5cdCAgICAgICAgICAgIGkrKztcblx0ICAgICAgICAgICAgcnVuKGkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIF90aW1lX291dCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkb25lJykge1xuXHQgICAgICAgIC8vIOeKtuaAgeS4umRvbmXooajnpLrnu5PmnZ/vvIzkuI3nrqHlkI7pnaLov5jmnInmsqHmnInkuK3pl7Tku7bpg73nu5PmnZ9cblx0ICAgICAgICBpID0gc2l6ZTtcblx0ICAgICAgICBydW4oaSwgc3RhdGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIOm7mOiupOeKtuaAge+8jOWPqueuoeaJp+ihjOS4remXtOS7tumYn+WIl1xuXHQgICAgICAgIGkrKztcblx0ICAgICAgICBydW4oaSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBpZiAoY29udGV4dC5jYWxsZWRMaXN0ICYmIGNvbnRleHQuY2FsbGVkTGlzdC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcnVuKGkpO1xuXHQgIH07XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNvbXBvc2U7XG5cbi8qKiovIH0pLFxuLyogODEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvcGx1Z2luc0xvYWRlci5qc1xuXHQgKiDmj5Lku7bliqDovb3lmahcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMgb3B0cyB7XG5cdCAgICAgKiAgIG1pZGRsZXdhcmU6IFtdLFxuXHQgICAgICogICBwbHVnaW5zOiBbXSxcblx0ICAgICAqICAgY29uZmlnOiB7fVxuXHQgICAgICogfVxuXHQgICAgICovXG5cdCAgICBpbml0OiBmdW5jdGlvbihvcHRzKSB7XG5cdCAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG5cdCAgICAgIGlmIChvcHRzICYmIHR5cGVvZiBvcHRzLm1pZGRsZXdhcmUgPT09ICdvYmplY3QnICYmIG9wdHMubWlkZGxld2FyZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gb3B0cy5taWRkbGV3YXJlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMubWlkZGxld2FyZSA9IFtdO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMucGx1Z2luc19uYW1lID0gW107XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5YiG5Y+R6K6i6ZiF5Y+Y5YyWXG5cdCAgICAgKiBAcGFyYW0gbyB7XG5cdCAgICAgKiAgIHB1YnN1Yjogey4uLn0sXG5cdCAgICAgKiAgIGNvbnRleHQ6IHsuLi59XG5cdCAgICAgKiB9LFxuXHQgICAgICogQHBhcmFtIG13IOW9k+WJjeaJp+ihjOeahOS4remXtOS7tlxuXHQgICAgICovXG5cdCAgICBwdWJzdWJJbmZvOiBmdW5jdGlvbihjdHgsIG13KSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIHB1YnN1YiA9IGN0eC5wdWJzdWI7XG5cdCAgICAgICAgaWYgKHB1YnN1Yikge1xuXHQgICAgICAgICAgcHVic3ViLnB1Ymxpc2goJ3BsdWdpbnNfY2hhbmdlXycgKyBjdHgucHVic3ViVHlwZSwgbXcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgIG1zZzogZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24gKGluZGV4KSB7XG5cdCAgICAgIGlmKCFpbmRleCkgaW5kZXggPSAwO1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgbWlkZGxld2FyZSA9IHRoaXMubWlkZGxld2FyZTtcblx0ICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdHMgfHwge307XG5cdCAgICAgIHZhciBwbHVnaW5zID0gb3B0cy5wbHVnaW5zO1xuXHQgICAgICBpZiAocGx1Z2lucyAmJiB0eXBlb2YgcGx1Z2lucyA9PT0gJ29iamVjdCcgJiYgcGx1Z2lucy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgdmFyIHBsdWdpbiA9IHBsdWdpbnNbaW5kZXhdO1xuXHQgICAgICAgIHRoaXMucGx1Z2luc19uYW1lLnB1c2gocGx1Z2luLm5hbWUpO1xuXHQgICAgICAgIG1pZGRsZXdhcmUucHVzaChbZnVuY3Rpb24oc3RhdGUsIGNiKXtcblx0ICAgICAgICAgIF9zZWxmLnB1YnN1YkluZm8odGhpcywgcGx1Z2luKTtcblx0ICAgICAgICAgIC8vIOiOt+WPluaPkuS7tuaooeWdl+i3r+W+hOW5tuWIneWni+WMllxuXHQgICAgICAgICAgdmFyIG0gPSBuZXcgcGx1Z2luLnBhdGgoKTtcblx0XG5cdCAgICAgICAgICAvLyDkuLroioLnnIHku6PnoIHph4/vvIzpu5jorqTnmoTliJ3lp4vljJbmlrnms5XlnKjliqDovb3lmajlhoXlgZrlhZzlupXlpITnkIbvvIzljbPmj5Lku7blhoXml6Dnibnmrormg4XlhrXml6DpnIDlrp7njrBpbml05pa55rOVXG5cdCAgICAgICAgICBpZiAoIW0uaW5pdCkge1xuXHQgICAgICAgICAgICBtLmluaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyDlsIbkuIrkuIvmlofms6jlhaXliLDmj5Lku7blhoVcblx0ICAgICAgICAgIG0uaW5pdCh7XG5cdCAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dCxcblx0ICAgICAgICAgICAgY29uZmlnOiBhc3NpZ24ocGx1Z2luLmNvbmZpZyB8fCB7fSwgb3B0cy5jb25maWcpXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIHJldHVybiBtLnJ1bihzdGF0ZSwgZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICAgICAgICAvLyDov5nph4zkvb/nlKgx5q+r56eS5bu26L+f5omn6KGM77yM6Ziy5q2i5Lit6Ze05Lu25Li75L2T5YaF55qEY2FsbGJhY2vlhYjmiafooYzvvIzlr7zoh7TmoYbmnrbmi7/kuI3liLDkuK3pl7Tku7ZyZXR1cm7nmoTnrYnlvoXml7bplb/vvIzku47ogIzlr7zoh7Tnm5HmjqflvILluLhcblx0ICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgY2IocGx1Z2luLCBtc2cpO1xuXHQgICAgICAgICAgICB9LCAxKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0sIHBsdWdpbi5uYW1lXSk7XG5cdFxuXHQgICAgICAgIGluZGV4Kys7XG5cdCAgICAgICAgaWYocGx1Z2luc1tpbmRleF0pe1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMucnVuKGluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1pZGRsZXdhcmU7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA4MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdGZ1bmN0aW9uIGlzVHJpdmVyKCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgVUEgPSBuYXZpZ2F0b3IgPyAobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3Iuc3d1c2VyQWdlbnQpIDogJyc7XG5cdCAgICByZXR1cm4gL1RyaXZlci9nLnRlc3QoVUEpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzVHJpdmVyO1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDgzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9pbml0L2luaXRMb2FkX2Jhc2UuanNcblx0ICog5Yid5aeL5YyW5Z+656GA5qih5Z2X77yM5LiN6IO955u05o6l5L2/55So77yM6ZyA6KaB6YCa6L+HaW5pdExvYWRfcGMuanPmiJZpbml0TG9hZF93YXAuanPnrYnlhbfkvZPnmoTlnLrmma/mqKHlnZfosIPnlKhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIEBhdXRob3Igaml6aGEud3lqIEBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuXHQgICAgICB2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFO1xuXHRcblx0ICAgICAgdmFyIGNvbnRleHQgPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgICAgIHZhciBxdWUgPSBjb250ZXh0W0FQTFVTX1FVRVVFXSB8fCBbXTtcblx0ICAgICAgdmFyIHJzID0gYWN0aW9uLmdldEZvcm1hdFF1ZXVlKHF1ZSwgJ21ldGFRdWV1ZScpO1xuXHQgICAgICBjb250ZXh0W0FQTFVTX1FVRVVFXSA9IHJzLnF1ZXVlO1xuXHQgICAgICBhY3Rpb24ucHJvY2Vzc0dvbGRsb2dRdWV1ZShycy5mb3JtYXRRdWV1ZSwgdGhpcy5vcHRpb25zLmNvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDg0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge0FycmF5fSBRVUVVRVxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcblx0ICogfVxuXHQgKi9cblx0dmFyIHByb2Nlc3NHb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoUVVFVUUsIG9wdHMpIHtcblx0ICBmdW5jdGlvbiBmKCkge1xuXHQgICAgaWYgKCFRVUVVRSB8fCAhdXRpbEFycmF5LmlzQXJyYXkoUVVFVUUpIHx8ICFRVUVVRS5sZW5ndGgpIHJldHVybjtcblx0ICAgIC8vIOaOkuW6j1xuXHQgICAgdmFyIHF1ZSA9IGdldEZvcm1hdFF1ZXVlKFFVRVVFKS5xdWV1ZTtcblx0ICAgIHZhciB0YXNrID0ge307XG5cdCAgICB2YXIgZGVsYXlUYXNrcyA9IFtdO1xuXHQgICAgd2hpbGUgKHRhc2sgPSBxdWUuc2hpZnQoKSkgeyAvLyDkvp3mrKHmiafooYwgd2luZG93LmFwbHVzX3F1ZXVlIOS4reeahOS7u+WKoVxuXHQgICAgICBwcm9jZXNzVGFzayh0YXNrLCBvcHRzLCBmdW5jdGlvbiAodCkge1xuXHQgICAgICAgIGRlbGF5VGFza3MucHVzaCh0KTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICBpZiAoZGVsYXlUYXNrcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHdoaWxlICh0YXNrID0gZGVsYXlUYXNrcy5zaGlmdCgpKSB7XG5cdCAgICAgICAgICBwcm9jZXNzVGFzayh0YXNrLCBvcHRzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIDEwMCk7XG5cdCAgICB9XG5cdCAgfTtcblx0ICB0cnkge1xuXHQgICAgZigpO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICBtc2c6IGVcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5wcm9jZXNzR29sZGxvZ1F1ZXVlID0gcHJvY2Vzc0dvbGRsb2dRdWV1ZTtcblx0XG5cdGZ1bmN0aW9uIGdldE1ldGFJbmZvKCkge1xuXHQgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuXHQgIHJldHVybiBtZXRhX2luZm87XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEFwbHVzSG9sZFR5cGUgKCkge1xuXHQgIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgIHZhciB1YWlkID0gbWV0YV9pbmZvLnVhaWQgKyAnJztcblx0ICBpZiAodWFpZCA9PT0gJzEnICYmICFtZXRhX2luZm8uX2Fub255X2lkKSB7XG5cdCAgICByZXR1cm4gJ0JMT0NLJztcblx0ICB9XG5cdCAgcmV0dXJuIG1ldGFfaW5mb1snX2hvbGQnXSB8fCBtZXRhX2luZm9bJ2FwbHVzLXdhaXRpbmcnXTtcblx0fVxuXHRcblx0dmFyIEFQTFVTX0hPTERfVVNFUklEX1FVRVVFID0gW107XG5cdHZhciBBUExVU19IT0xEX0FOT05ZX1FVRVVFID0gW107XG5cdHZhciBBUExVU19IT0xEX1FVRVVFID0gW107XG5cdFxuXHRmdW5jdGlvbiBmaWx0ZXJUYXNrICh0YXNrKSB7XG5cdCAgdmFyIGhvbGRUeXBlID0gZ2V0QXBsdXNIb2xkVHlwZSgpO1xuXHQgIC8vIGNvbnNvbGUubG9nKCdob2xkVHlwZSA9PT0gJywgaG9sZFR5cGUpO1xuXHQgIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgIHZhciBmbGFnID0gdHJ1ZTtcblx0XG5cdCAgLy8gMDogXCJfaG9sZFwiXG5cdCAgLy8gMTogXCJTVEFSVFwiXG5cdCAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3VtZW50cyB8fCBbXTtcblx0ICB2YXIgbWV0YUtleSA9IGFyZ3NbMF07XG5cdCAgdmFyIG1ldGFWYWx1ZSA9IGFyZ3NbMV07XG5cdCAgdmFyIFNUQVJUID0gJ1NUQVJUJztcblx0ICBpZiAobWV0YUtleSA9PT0gJ19ob2xkJyAmJiBtZXRhVmFsdWUgPT09IFNUQVJUKSB7XG5cdCAgICByZXR1cm4gU1RBUlQ7XG5cdCAgfVxuXHQgIGlmIChtZXRhS2V5ID09PSAnX2Fub255X2lkJyAmJiBtZXRhVmFsdWUpIHtcblx0ICAgIHJldHVybiBTVEFSVDtcblx0ICB9XG5cdCAgaWYgKHRhc2sgJiYgL3NlbmRQVnxyZWNvcmR8c2V0UGFnZVNQTXxzZXRNZXRhSW5mb3xhcHBlbmRNZXRhSW5mbyQvLnRlc3QodGFzay5hY3Rpb24pKSB7XG5cdCAgICBzd2l0Y2ggKGhvbGRUeXBlKSB7XG5cdCAgICBjYXNlICdCTE9DSyc6XG5cdCAgICAgIGlmICghbWV0YV9pbmZvW2hvbGRUeXBlXSkge1xuXHQgICAgICAgIEFQTFVTX0hPTERfUVVFVUUucHVzaCh0YXNrKTtcblx0ICAgICAgICBmbGFnID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWs7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZsYWc7XG5cdH1cblx0XG5cdFxuXHQvLyB2YXIgcHJvY2Vzc2VkID0gZmFsc2U7XG5cdGZ1bmN0aW9uIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlIChvcHRzKSB7XG5cdCAgLy8gaWYgKCFwcm9jZXNzZWQpIHtcblx0ICAvLyAgIHByb2Nlc3NlZCA9IHRydWU7XG5cdCAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1VTRVJJRF9RVUVVRSwgb3B0cyk7XG5cdCAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcblx0ICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfUVVFVUUsIG9wdHMpOyAgXG5cdCAgLy8gfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBxdWV1ZU5hbWU6IGFwbHVzX3F1ZXVlIHx8IGdvbGRsb2dfcXVldWVcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcblx0ICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG5cdCAqIH1cblx0ICovXG5cdGV4cG9ydHMuc3Vic2NyaWJlQW5kUHJvY2Vzc1F1ZXVlID0gZnVuY3Rpb24gKHF1ZXVlTmFtZSwgb3B0cykge1xuXHQgIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuXHQgIHF1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuU0VUX01FVEFfSU5GTywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuX1VTRVJfSUQgJiYgdmFsdWUpIHtcblx0ICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcblx0ICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9BTk9OWV9JRCAmJiB2YWx1ZSkge1xuXHQgICAgICAgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSwgb3B0cyk7XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnX2hvbGQnICYmIHZhbHVlID09PSAnU1RBUlQnKSB7XG5cdCAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZXRNZXRob2ROYW1lIChrZXksIGlzT3BlbkFwaSkge1xuXHQgIGlmIChpc09wZW5BcGkgJiYgYXBsdXNTdGF0aWMub3BlbkFQSXMuaW5kZXhPZihrZXkpID4gLTEpIHtcblx0ICAgIGtleSA9ICdfJyArIGtleTtcblx0ICB9XG5cdCAgcmV0dXJuIGtleTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gdGFza1xuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcblx0ICogfVxuXHQgKi9cblx0dmFyIHByb2Nlc3NUYXNrID0gZnVuY3Rpb24odGFzaywgb3B0cywgY2FsbGJhY2spIHtcblx0ICB2YXIgaXNPcGVuQXBpID0gISFvcHRzLmlzT3BlbkFwaTtcblx0ICB2YXIgYWN0aW9uID0gdGFzayA/IHRhc2suYWN0aW9uIDogJyc7XG5cdCAgdmFyIGFyZ3MgPSB0YXNrID8gdGFzay5hcmd1bWVudHMgOiAnJztcblx0XG5cdCAgdmFyIHJlc3VsdCA9IGZpbHRlclRhc2sodGFzayk7XG5cdCAgaWYgKCFyZXN1bHQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGNvbnRleHQgPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHsgLy8g56Gu5L+d5p+Q5Liq5Lu75Yqh5omn6KGM5aSx6LSl5LiN5Lya5b2x5ZON5YW25a6D5Lu75YqhXG5cdCAgICBpZiAoYWN0aW9uICYmIGFyZ3MgJiYgdXRpbEFycmF5LmlzQXJyYXkoYXJncykpIHtcblx0ICAgICAgdmFyIGEgPSBhY3Rpb24uc3BsaXQoJy4nKTtcblx0ICAgICAgdmFyIG9iaiA9IGNvbnRleHQ7XG5cdCAgICAgIHZhciBfZm4gPSBjb250ZXh0O1xuXHQgICAgICB2YXIgbWV0aG9kTmFtZTtcblx0ICAgICAgaWYgKGEubGVuZ3RoID09PSAzKSB7XG5cdCAgICAgICAgb2JqID0gY29udGV4dFthWzBdXVthWzFdXSB8fCB7fTtcblx0ICAgICAgICBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShhWzJdLCBpc09wZW5BcGkpO1xuXHQgICAgICAgIF9mbiA9IG9ialttZXRob2ROYW1lXSA/IG9ialttZXRob2ROYW1lXSA6ICcnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdoaWxlIChhLmxlbmd0aCkge1xuXHQgICAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYS5zaGlmdCgpLCBpc09wZW5BcGkpO1xuXHQgICAgICAgICAgX2ZuID0gb2JqID0gb2JqW21ldGhvZE5hbWVdO1xuXHQgICAgICAgICAgaWYgKCFvYmopIHsgLy8g6Z2e5rOVIGFjdGlvblxuXHQgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcblx0ICAgICAgICAgICAgICBjYWxsYmFjayh0YXNrKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChpc0Z1bmN0aW9uKF9mbikpIHtcblx0ICAgICAgICBfZm4uYXBwbHkob2JqLCBhcmdzKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocmVzdWx0ID09PSAnU1RBUlQnKSB7XG5cdCAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgbXNnOiBlXG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMucHJvY2Vzc1Rhc2sgPSBwcm9jZXNzVGFzaztcblx0XG5cdHZhciBnZXRGb3JtYXRRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZSwgdHlwZSkge1xuXHQgIHZhciBxdWV1ZU1hcCA9IHtcblx0ICAgIHN1YnNjcmliZU13Q2hhbmdlUXVldWU6IFtdLFxuXHQgICAgc3Vic2NyaWJlTWV0YVF1ZXVlOiBbXSxcblx0ICAgIHN1YnNjcmliZVF1ZXVlOiBbXSxcblx0ICAgIG1ldGFRdWV1ZTogW10sXG5cdCAgICBvdGhlcnNRdWV1ZTogW11cblx0ICB9O1xuXHRcblx0ICB2YXIgcSA9IFtdO1xuXHQgIHZhciB0YXNrID0ge307XG5cdCAgd2hpbGUgKHRhc2sgPSBxdWV1ZS5zaGlmdCgpKSB7IC8vIOS+neasoeaJp+ihjCB3aW5kb3cuYXBsdXNfcXVldWUg5Lit55qE5Lu75YqhXG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgYWMgPSB0YXNrLmFjdGlvbjtcblx0ICAgICAgdmFyIGtleSA9IHRhc2suYXJndW1lbnRzWzBdO1xuXHQgICAgICBpZiAoL3N1YnNjcmliZS8udGVzdChhYykpIHtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnc2V0TWV0YUluZm8nKSB7XG5cdCAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNZXRhUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWIHx8IGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEopIHtcblx0ICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoL01ldGFJbmZvLy50ZXN0KGFjKSkge1xuXHQgICAgICAgIHF1ZXVlTWFwLm1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgIG1zZzogZVxuXHQgICAgICB9KTtcblx0ICAgICAgcXVldWVNYXAub3RoZXJzUXVldWUucHVzaCh0YXNrKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIGZvcm1hdFF1ZXVlO1xuXHQgIGlmICh0eXBlICYmIHF1ZXVlTWFwW3R5cGVdKSB7XG5cdCAgICBmb3JtYXRRdWV1ZSA9IHF1ZXVlTWFwW3R5cGVdO1xuXHQgICAgcXVldWVNYXBbdHlwZV0gPSBbXTtcblx0ICB9XG5cdCAgcSA9IHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUuY29uY2F0KHF1ZXVlTWFwLm1ldGFRdWV1ZSk7XG5cdCAgcSA9IHEuY29uY2F0KHF1ZXVlTWFwLnN1YnNjcmliZVF1ZXVlKTtcblx0ICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlTWV0YVF1ZXVlLCBxdWV1ZU1hcC5vdGhlcnNRdWV1ZSk7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHF1ZXVlOiBxLFxuXHQgICAgZm9ybWF0UXVldWU6IGZvcm1hdFF1ZXVlXG5cdCAgfTtcblx0fTtcblx0ZXhwb3J0cy5nZXRGb3JtYXRRdWV1ZSA9IGdldEZvcm1hdFF1ZXVlO1xuXG5cbi8qKiovIH0pLFxuLyogODUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuXHQgKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KTtcblx0XG5cdHZhciBRdWV1ZSA9IEJhc2UuZXh0ZW5kKHtcblx0ICBwdXNoOiBmdW5jdGlvbih0YXNrKSB7XG5cdCAgICB0aGlzLmxlbmd0aCsrO1xuXHQgICAgYWN0aW9uLnByb2Nlc3NUYXNrKHRhc2ssIHRoaXMub3B0cyk7ICBcblx0ICB9LFxuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBwcm9jZXNzQXBsdXNRdWV1ZTogZnVuY3Rpb24gKHF1ZXVlTmFtZSkge1xuXHQgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuXHQgICAgICBhY3Rpb24ucHJvY2Vzc0dvbGRsb2dRdWV1ZShxdWUsIG9wdHMpO1xuXHQgICAgICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUsIFF1ZXVlLmNyZWF0ZSh7XG5cdCAgICAgICAgb3B0czogb3B0cywgXG5cdCAgICAgICAgc3RhcnRMZW5ndGg6IHF1ZS5sZW5ndGgsXG5cdCAgICAgICAgbGVuZ3RoOiAwXG5cdCAgICAgIH0pKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW1zIHtTdHJpbmd9IHR5cGVcblx0ICAgICAqL1xuXHQgICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuXHQgICAgICB2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFO1xuXHRcblx0ICAgICAgdGhpcy5wcm9jZXNzQXBsdXNRdWV1ZShBUExVU19RVUVVRSk7XG5cdFxuXHQgICAgICBpZiAoQVBMVVNfUVVFVUUgPT09ICdhcGx1c19xdWV1ZScpIHtcblx0ICAgICAgICB0aGlzLnByb2Nlc3NBcGx1c1F1ZXVlKCdnb2xkbG9nX3F1ZXVlJyk7XG5cdCAgICAgIH1cblx0ICAgICAgYWN0aW9uLnN1YnNjcmliZUFuZFByb2Nlc3NRdWV1ZShBUExVU19RVUVVRSwgdGhpcy5vcHRpb25zLmNvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDg2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIOWPi+ebn+S6keadoeS7tuS4i+eahOiHquWKqOS6i+S7tuaPkuS7tiAgICAgXG5cdCAqIFxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKiBcblx0ICogQXV0aG9yOiBcblx0ICogICAg6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0dmFyIEZldGNoQ29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nyk7XG5cdHZhciB1dGlsR1EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTtcblx0Ly8gdmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xuXHR2YXIgTUlOSV9WVF9DT05GSUdfRk9STUFUID0gJ01pbmlWdENvbmZpZ0Zvcm1hdCc7XG5cdC8vIHZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcblx0dmFyIHV0aWxWVCA9IF9fd2VicGFja19yZXF1aXJlX18oOTApO1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0XG5cdGZ1bmN0aW9uIGF1dG9UcmFja2VyICgpIHtcblx0ICB2YXIgcmJfY29uZmlnLCBwZHJfY29uZmlnLCBzaGFyZV9jb25maWc7XG5cdCAgLy8gdmFyIHByZWZpeCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTX1FVRVVFKTtcblx0ICB2YXIgX2hhc1RyYWNrZWQgPSBmYWxzZTtcblx0ICB2YXIgX2N1cnJlbnRQYWdlID0gbnVsbDtcblx0ICB2YXIgY291bnQgPSB7XG5cdCAgICAnb25QdWxsRG93blJlZnJlc2gnOiAwLFxuXHQgICAgJ29uU2hhcmVUaW1lbGluZSc6IDAsXG5cdCAgICAnb25SZWFjaEJvdHRvbSc6IDAsXG5cdCAgICAnb25TaGFyZUFwcE1lc3NhZ2UnOiAwLFxuXHQgICAgJ29uQ2xpY2snOiAwXG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gZXZlbnRIYW5kbGUgKCkge1xuXHQgICAgdmFyIGV2ZW50TmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdID8gYXJndW1lbnRzWzBdIDogJyc7XG5cdCAgICB2YXIgcGFnZUluc3RhbmNlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuXHQgICAgdmFyIGN1cnJlbnRQYWdlID0gcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcblx0ICAgIC8vIHZhciBwO1xuXHQgICAgXG5cdCAgICBzd2l0Y2ggKGV2ZW50TmFtZSkge1xuXHQgICAgY2FzZSAnb25QdWxsRG93blJlZnJlc2gnOlxuXHQgICAgICBjb3VudC5vblB1bGxEb3duUmVmcmVzaCArPSAxO1xuXHQgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuXHQgICAgICAgIGFyZ3VtZW50czogW3Bkcl9jb25maWcubG9na2V5IHx8ICckJF9wdWxsX2Rvd25fcmVmcmVzaCcsICdDTEsnLCB7XG5cdCAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuXHQgICAgICAgICAgcGFnZW5hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgY3VycmVudFBhZ2UsXG5cdCAgICAgICAgICBjb3VudDogY291bnQub25QdWxsRG93blJlZnJlc2hcblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdvblJlYWNoQm90dG9tJzpcblx0ICAgICAgY291bnQub25SZWFjaEJvdHRvbSArPSAxO1xuXHQgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuXHQgICAgICAgIGFyZ3VtZW50czogW3JiX2NvbmZpZy5sb2drZXkgfHwgJyQkX3JlYWNoX2JvdHRvbScsICdDTEsnLCB7XG5cdCAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuXHQgICAgICAgICAgcGFnZW5hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgY3VycmVudFBhZ2UsXG5cdCAgICAgICAgICBjb3VudDogY291bnQub25SZWFjaEJvdHRvbVxuXHQgICAgICAgIH1dXG5cdCAgICAgIH0pO1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ29uU2hhcmVBcHBNZXNzYWdlJzpcblx0ICAgICAgY291bnQub25TaGFyZUFwcE1lc3NhZ2UgKz0gMTtcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcblx0ICAgICAgICBhcmd1bWVudHM6IFtzaGFyZV9jb25maWcubG9na2V5IHx8ICckJF9zaGFyZScsICdDTEsnLCB7XG5cdCAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuXHQgICAgICAgICAgcGFnZW5hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgY3VycmVudFBhZ2UsXG5cdCAgICAgICAgICBjb3VudDogY291bnQub25TaGFyZUFwcE1lc3NhZ2UsXG5cdCAgICAgICAgICBzaGFyZV90eXBlOiAxXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnb25TaGFyZVRpbWVsaW5lJzogXG5cdCAgICAgIGNvdW50Lm9uU2hhcmVUaW1lbGluZSArPSAxO1xuXHQgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuXHQgICAgICAgIGFyZ3VtZW50czogW3NoYXJlX2NvbmZpZy5sb2drZXkgfHwgJyQkX3NoYXJlJywgJ0NMSycsIHtcblx0ICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG5cdCAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcblx0ICAgICAgICAgIGNvdW50OiBjb3VudC5vblNoYXJlVGltZWxpbmUsXG5cdCAgICAgICAgICBzaGFyZV90eXBlOiAwXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnb25QYWdlU2hvdyc6XG5cdCAgICAgIGlmKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSl7XG5cdCAgICAgICAgdmFyIHBhZ2VDb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpO1xuXHQgICAgICAgIHZhciBjdXJyZW50UGFnZVBhdGggPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuXHQgICAgICAgIGlmKHBhZ2VDb25maWcmJnBhZ2VDb25maWdbY3VycmVudFBhZ2VQYXRoXSl7XG5cdCAgICAgICAgICBpZihpc0FycmF5KHBhZ2VDb25maWdbY3VycmVudFBhZ2VQYXRoXS5zcG0pKXtcblx0ICAgICAgICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICAgICAgYWN0aW9uOidhcGx1cy5zZXRQYWdlU1BNJyxcblx0ICAgICAgICAgICAgICBhcmd1bWVudHM6cGFnZUNvbmZpZ1tjdXJyZW50UGFnZVBhdGhdLnNwbSAvL+iuvue9rumhtemdonNwbeeahGHjgIFi5L2NXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfWVsc2V7XG5cdCAgICAgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgICAgICBsZXZlbDonZXJyb3InLFxuXHQgICAgICAgICAgICAgIG1zZzpjdXJyZW50UGFnZVBhdGgrJ+WcqG1ldGFJbmZvLnBhZ2VDb25maWfkuK3phY3nva7nmoRzcG3moLzlvI/kuI3lr7nvvIzmraPnoa7moLzlvI/kuLrvvJpbXCJzcG1hXCIsXCJzcG1iXCJdJ1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9ZWxzZXtcblx0ICAgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgICAgbGV2ZWw6J2Vycm9yJyxcblx0ICAgICAgICAgICAgbXNnOifmnKrljLnphY3or6XpobXpnaIoJytjdXJyZW50UGFnZVBhdGgrJynnmoRzcG3vvIzor7fmo4Dmn6VtZXRhSW5mby5wYWdlQ29uZmlnJ1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAocGFnZUluc3RhbmNlLnJvdXRlICYmICFfaGFzVHJhY2tlZCkge1xuXHQgICAgICAgIF9jdXJyZW50UGFnZSA9IHtcblx0ICAgICAgICAgIHRzOiBEYXRlLm5vdygpLFxuXHQgICAgICAgICAgcGF0aDogcGFnZUluc3RhbmNlLnJvdXRlLFxuXHQgICAgICAgICAgcGFnZV9uYW1lOiBwYWdlSW5zdGFuY2Uucm91dGUsXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBfaGFzVHJhY2tlZCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdvblBhZ2VIaWRlJzogIFxuXHQgICAgICBpZiAoX2hhc1RyYWNrZWQpIHtcblx0ICAgICAgICB2YXIgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gX2N1cnJlbnRQYWdlLnRzO1xuXHQgICAgICAgIFxuXHQgICAgICAgIGlmIChhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpIHx8IFBhZ2VNYW5hZ2VyLmdldFZUUmVhbHRpbWVDb2RlKCkpIHtcblx0ICAgICAgICAgIHZhciBleHRyYVBhcmFtcyA9IChQYWdlTWFuYWdlci5nZXRQYWdlTmFtZSgpIHx8IHt9KS5leHRyYVBhcmFtczsgICAgICAgICAgXG5cdCAgICAgICAgICB2YXIgcHZhcmdzID0gT2JqZWN0LmFzc2lnbih7fSwgZXh0cmFQYXJhbXMsIHtcblx0ICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuXHQgICAgICAgICAgICBwYXRoOiBfY3VycmVudFBhZ2UucGF0aCxcblx0ICAgICAgICAgICAgcGFnZV9uYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpLFxuXHQgICAgICAgICAgICBwYWdlX3N0YXJ0OiBfY3VycmVudFBhZ2UudHMsXG5cdCAgICAgICAgICAgIGlzTWluaTogdHJ1ZSxcblx0ICAgICAgICAgICAgX3BhZ2VfYXV0b19pZDogYXBsdXNTdGF0aWMuUEFHRV9FTkQsXG5cdCAgICAgICAgICAgIF9wYWdlX2F1dG9fcHY6IHRydWVcblx0ICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgIGFwbHVzLnNlbmRQVih7IGlzX2F1dG86IHRydWUgfSwgcHZhcmdzKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgYXBsdXMuc2VuZFBWKHtcblx0ICAgICAgICAgICAgaXNfYXV0bzogdHJ1ZSxcblx0ICAgICAgICAgIH0sIHtcblx0ICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuXHQgICAgICAgICAgICBwYXRoOiBfY3VycmVudFBhZ2UucGF0aCxcblx0ICAgICAgICAgICAgcGFnZV9uYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IF9jdXJyZW50UGFnZS5wYWdlX25hbWUsXG5cdCAgICAgICAgICAgIHBhZ2Vfc3RhcnQ6IF9jdXJyZW50UGFnZS50cyxcblx0ICAgICAgICAgICAgaXNNaW5pOiB0cnVlLFxuXHQgICAgICAgICAgICBfcGFnZV9hdXRvX2lkOiBhcGx1c1N0YXRpYy5QQUdFX0VORCxcblx0ICAgICAgICAgICAgX3BhZ2VfYXV0b19wdjogdHJ1ZVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBfY3VycmVudFBhZ2UgPSBudWxsO1xuXHQgICAgICAgIF9oYXNUcmFja2VkID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWs7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBnZXRDb25maWcgKCkge1xuXHQgICAgcmJfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3JiX2NvbmZpZycpO1xuXHQgICAgcGRyX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdwZHJfY29uZmlnJyk7XG5cdCAgICBzaGFyZV9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnc2hhcmVfY29uZmlnJyk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmZXRjaFZlcmlmeUNvbmZpZyhjb2RlLCBhcHBJbmZvSWQpIHtcblx0ICAgIGlmICghY29kZSB8fCAhYXBwSW5mb0lkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB0cnkgeyBcblx0ICAgICAgdmFyIGFwaV9ob3N0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWFwaS1ob3N0Jyk7XG5cdCAgICAgIHZhciByZWcgPSAvW1thLXp8XFwtfFxcX3wwLTlcXC5dK1thLXp8XFwtfFxcX3wwLTldKDpcXGQqKT8vO1xuXHQgICAgICB2YXIgdmVyaWZ5X2hvc3QgPSBhcGlfaG9zdC5tYXRjaChyZWcpO1xuXHQgICAgICBcblx0ICAgICAgaWYgKHZlcmlmeV9ob3N0ICYmIHZlcmlmeV9ob3N0WzBdKSB7XG5cdCAgICAgICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG5cdCAgICAgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh2ZXJpZnlfaG9zdFswXSkpIHtcblx0ICAgICAgICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHZlcmlmeVVybCA9IHByb3RvY2FsICsgJy8vJyArIGFwaV9ob3N0KyAnL3Z0L2xvYWRUcmFuc2ZlckNvbmZpZz9jb2RlPScgKyBjb2RlICsgJyZhcHBJbmZvSWQ9JyArIGFwcEluZm9JZDtcblx0ICAgICAgICBtaW5pLnJlcXVlc3QodmVyaWZ5VXJsLCB7fSwgZnVuY3Rpb24ocmVzcCl7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgY2ZnRGF0YSA9IChyZXNwLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEuY29uZmlnKSB8fCAnJztcblx0ICAgICAgICAgICAgdmFyIGRlYnVnSWQgPSAocmVzcC5kYXRhICYmIHJlc3AuZGF0YS5kYXRhICYmIHJlc3AuZGF0YS5kYXRhLmRlYnVnSWQpIHx8ICcnO1xuXHQgICAgICAgICAgICBpZihkZWJ1Z0lkKXtcblx0ICAgICAgICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnLHtcblx0ICAgICAgICAgICAgICAgIGRlYnVnSWQ6ZGVidWdJZFxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBfYmVnaW5Mb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgIGFwbHVzLl9taW5pY2ZnX2xvYWQgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIF9iZWdpbkxvYWQ7XG5cdCAgICAgICAgICAgIGlmIChjZmdEYXRhKSB7XG5cdCAgICAgICAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IEpTT04ucGFyc2UoY2ZnRGF0YSkgfHwge307XG5cdCAgICAgICAgICAgICAgdXRpbFZULnZ0MmF1dG9FdmVudCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgICAgICBsZXZlbDonZXJyb3InLFxuXHQgICAgICAgICAgICAgIG1zZzon5ouJ5Y+W5a6e5pe25Y+v6KeG5YyW5Z+L54K56aqM6K+B5aSx6LSlLCDplJnor6/kv6Hmga/vvJonICsgZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZXJyb3IpIHtcblx0ICAgICAgXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG5cdCAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScpIHtcblx0ICAgICAgICBnZXRDb25maWcoKTtcblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25Mb2FkJywgZnVuY3Rpb24ob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBjb2RlID0gUGFnZU1hbmFnZXIuZ2V0VlRSZWFsdGltZUNvZGUoKTtcblx0ICAgICAgICBpZiAoY29kZSkge1xuXHQgICAgICAgICAgdmFyIGFwcEluZm9JZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJbmZvSWQnKTtcblx0ICAgICAgICAgIGZldGNoVmVyaWZ5Q29uZmlnKGNvZGUsIGFwcEluZm9JZCk7XG5cdCAgICAgICAgfSBlbHNlIHsgICAgICAgICAgXG5cdCAgICAgICAgICAhIWFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJykgJiYgdXRpbFZULnZ0MmF1dG9FdmVudCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgICAgbGV2ZWw6ICdlcnJvcicsXG5cdCAgICAgICAgICBtc2c6ICfmi4nlj5blrp7ml7blj6/op4bljJbln4vngrnpqozor4Hkv6Hmga/lpLHotKXvvIwg6ZSZ6K+v5Y6f5Zug77yaJyArIGVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblNob3cnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICB2YXIgaXNBdXRvID0gY3R4LmFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy13YWl0aW5nJykgIT09ICdNQU4nO1xuXHQgICAgICBpc0F1dG8gJiYgZXZlbnRIYW5kbGUoJ29uUGFnZVNob3cnKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25IaWRlJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgdmFyIGlzQXV0byA9IGN0eC5hcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtd2FpdGluZycpICE9PSAnTUFOJztcblx0ICAgICAgaXNBdXRvICYmIGV2ZW50SGFuZGxlKCdvblBhZ2VIaWRlJyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uUHVsbERvd25SZWZyZXNoJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgZXZlbnRIYW5kbGUoJ29uUHVsbERvd25SZWZyZXNoJyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uUmVhY2hCb3R0b20nLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICBldmVudEhhbmRsZSgnb25SZWFjaEJvdHRvbScpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblNoYXJlQXBwTWVzc2FnZScsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIGV2ZW50SGFuZGxlKCdvblNoYXJlQXBwTWVzc2FnZScpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblNoYXJlVGltZWxpbmUnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICBldmVudEhhbmRsZSgnb25TaGFyZVRpbWVsaW5lJyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGlmICghIWFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJykpIHtcblx0ICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIFtNSU5JX1ZUX0NPTkZJR19GT1JNQVQsIGZ1bmN0aW9uKG9wdGlvbnMpe1xuXHQgICAgICB2YXIgcGFnZUNvbmZpZyA9IG9wdGlvbnMucGFnZUNvbmZpZztcblx0ICAgICAgaWYgKHBhZ2VDb25maWcgJiYgcGFnZUNvbmZpZy5lbmFibGVkKSB7XG5cdCAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHBhZ2VDb25maWc7XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICBhdXRvVHJhY2tlcigpO1xuXHQgICAgICBpZiAoIWFwbHVzLl9hcGx1c19hbGVhZHlfbG9hZF9taW5pdnQpe1xuXHQgICAgICAgIGFwbHVzLl9hcGx1c19hbGVhZHlfbG9hZF9taW5pdnQgPSAxO1xuXHQgICAgICAgIHZhciBmYyA9IEZldGNoQ29uZmlnLmNyZWF0ZSgpO1xuXHQgICAgICAgIGZjLnJ1bigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDg3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIOWPr+inhuWMluWfi+eCuemFjee9ruS/oeaBr+ivt+axgiBcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIEFhcm9ufOmSsOaYrSA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblx0dmFyIHV0aWxHUSA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpO1xuXHR2YXIgdXRpbENhdGNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCk7XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgbWluaXZ0U3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KTtcblx0Ly8gdmFyIHV0aWxVcmwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFVybCcpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0dmFyIE1JTklfVlRfQ09ORklHX0JBQ0sgPSAnTWluaVZ0Q29uZmlnQmFjayc7XG5cdHZhciBNSU5JX1ZUX0NPTkZJR19GT1JNQVQgPSAnTWluaVZ0Q29uZmlnRm9ybWF0Jztcblx0XG5cdHZhciBHT0xETE9HX1BVQkxJU0ggPSBhcGx1c1N0YXRpYy5QVUJMSVNIO1xuXHQvLyBwcm9kOiBodHRwczovL2FsaWR0LmFsaWNkbi5jb20vYWxpbG9nL3Z0ZGFpbHkvJHtjb21wb25lbnRJRH0uanNvblxuXHQvLyBodHRwczovL2QuYWxpY2RuLmNvbS9hbGlsb2cvdnQvYTF6MWQxXzEyMjc5OTE0Lmpzb25cblx0Ly8gdmFyIEhPU1QgPSAnLy9nLmFsaWNkbi5jb20vYWxpbG9nJztcblx0Ly8gdmFyIEhPU1QgPSAnLy9kLmFsaWNkbi5jb20vYWxpbG9nJztcblx0XG5cdC8vIGZ1bmN0aW9uIGlzRGFpbHkgKCkge1xuXHQvLyAgIHZhciBycyA9IGZhbHNlO1xuXHQvLyAgIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnKSB7XG5cdC8vICAgICByZXR1cm4gdHJ1ZTtcblx0Ly8gICB9XG5cdC8vICAgcmV0dXJuIHJzO1xuXHQvLyB9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEJhc2UuZXh0ZW5kKHV0aWxEYXNoLmFzc2lnbihtaW5pdnRTdG9yZSwge1xuXHRcblx0ICBwYXRobmFtZTogJycsXG5cdFxuXHQgIHBhZ2VDb25maWc6IHt9LFxuXHRcblx0ICBvcmlnaW5TcG06IHtcblx0ICAgIHNwbUE6ICcnLFxuXHQgICAgc3BtQjogJydcblx0ICB9LFxuXHRcblx0ICB1cGRhdGVDZmdMczogZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICBfc2VsZi5mZXRjaEZyb21DZG4oKTtcblx0ICAgIH0sMTAwMCk7XG5cdCAgfSxcblx0XG5cdCAgZmV0Y2hGcm9tQ2RuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgcGF0aCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJyk7XG5cdCAgICBpZiAoIXBhdGgpIHJldHVybjtcblx0ICAgIHZhciBfYmVnaW5Mb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG5cdCAgICBhcGx1cy5yZXF1ZXN0VlRDb25maWcocGF0aCwgZnVuY3Rpb24ocmVzcCkge1xuXHQgICAgICB2YXIgY2ZnRGF0YSA9IHJlc3AuZGF0YTtcblx0ICAgICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gX2JlZ2luTG9hZDtcblx0ICAgICAgaWYgKGNmZ0RhdGEpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHR5cGVvZiBjZmdEYXRhID09PSAnb2JqZWN0JyA/IGNmZ0RhdGEgOiBKU09OLnBhcnNlKGNmZ0RhdGEpO1xuXHQgICAgICAgICAgaWYgKGFwbHVzLl9hcGx1c192dF9jZmcucG9pbnRzKSB7XG5cdCAgICAgICAgICAgIGVhY2goYXBsdXMuX2FwbHVzX3Z0X2NmZy5wb2ludHMsIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICAgICAgdi5zZWxlY3RvciA9IGRlY29kZVVSSUNvbXBvbmVudCh2LnNlbGVjdG9yKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBfc2VsZi5zZXRDb25maWdJbnRvTHMoYXBsdXMuX2FwbHVzX3Z0X2NmZyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHtcblx0ICAgICAgICAgICAgZW5hYmxlZDogZmFsc2Vcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzphcGx1cy5fYXBsdXNfdnRfY2ZnLCBlbmFibGU6IDB9XSk7XG5cdCAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcblx0ICAgICAgaWYgKGFwbHVzLl9hcGx1c192dF9jZmcgJiYgYXBsdXMuX2FwbHVzX3Z0X2NmZy5lbmFibGVkKSB7XG5cdCAgICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0JBQ0ssIHtwYWdlQ29uZmlnOmFwbHVzLl9hcGx1c192dF9jZmcsIGVuYWJsZTogMH1dKTsgIFxuXHQgICAgICB9XG5cdCAgICAgIHV0aWxDYXRjaC5jYXRjaEV4Y2VwdGlvbignZ2V0VHJhY2tlckNmZycsIGVycm9yLCB7XG5cdCAgICAgICAgbXNnOiBwYXRoXG5cdCAgICAgIH0pO1xuXHQgICAgfSwge1xuXHQgICAgICB0aW1lb3V0OiA1MDAwXG5cdCAgICB9KTtcblx0ICB9LFxuXHRcblx0ICBnZXRNaW5pVnREYXRhOiBmdW5jdGlvbihjZG5wYXRoLCBwcmVVcmwsIGZyb21DRE4pe1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICBhcGx1cy5fbWluaWNmZ19sb2FkID0gMDtcblx0ICAgIGlmIChjZG5wYXRoKSB7XG5cdCAgICAgIHZhciB2dENvbmZpZyA9IHRoaXMuZmV0Y2hGcm9tTFMoY2RucGF0aCk7XG5cdCAgICAgIGlmKHR5cGVvZiB2dENvbmZpZyA9PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHRyeXtcblx0ICAgICAgICAgIHZ0Q29uZmlnID0gSlNPTi5wYXJzZSh2dENvbmZpZyk7XG5cdCAgICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgICB2dENvbmZpZyA9IHt9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHZ0Q29uZmlnICYmIHZ0Q29uZmlnLmVuYWJsZWQpIHtcblx0ICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0gdnRDb25maWc7XG5cdCAgICAgIH1cblx0ICAgICAgaWYoICFmcm9tQ0ROKSB7XG5cdCAgICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0JBQ0ssIHtwYWdlQ29uZmlnOnZ0Q29uZmlnLCBlbmFibGU6IDB9XSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5mZXRjaEZyb21DZG4oY2RucGF0aCwgcHJlVXJsKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8vIGh0dHBzOi8vZC5hbGljZG4uY29tL2FsaWxvZy92dF9kYWlseS9hMXoxZDFfMTIyNzk5MTQuanNvblxuXHQgIHN5bmNNaW5pVnREYXRhOiBmdW5jdGlvbigpe1xuXHQgICAgLy9zdWJzY3JpYmUgIHdzLnJlYWR5XG5cdCAgICB2YXIgY2RucGF0aCA9IHRoaXMuZ2V0VnRDb25maWdQYXRoKCk7XG5cdCAgICB0aGlzLmdldE1pbmlWdERhdGEoY2RucGF0aCwgJycsIHRydWUpO1xuXHQgIH0sXG5cdFxuXHQgIGluaXQ6IGZ1bmN0aW9uKCl7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgXG5cdCAgICB2YXIgR09MRExPR19TVUJTQ1JJQkUgPSBhcGx1c1N0YXRpYy5TVUJTQ1JJQkU7XG5cdCAgICAvL3RoaXMgZXZlbnQgZnJvbSBMUyBvciBmcm9tIFdTIHRvIGdldCBjb25maWdcblx0ICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1NVQlNDUklCRSwgW01JTklfVlRfQ09ORklHX0JBQ0ssIGZ1bmN0aW9uIChvcmlEYXRhcykge1xuXHQgICAgICBpZighb3JpRGF0YXMuZW5hYmxlKSB7XG5cdCAgICAgICAgX3NlbGYucGFnZUNvbmZpZyA9IG9yaURhdGFzLnBhZ2VDb25maWc7XG5cdCAgICAgIH1cblx0ICAgICAgLy90aGlzIGV2ZW50IHRvIHVzZTtcblx0ICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0ZPUk1BVCwge1xuXHQgICAgICAgIHBhZ2VDb25maWc6IF9zZWxmLnBhZ2VDb25maWcsXG5cdCAgICAgICAgb3JpZ2luU3BtOiBfc2VsZi5vcmlnaW5TcG1cblx0ICAgICAgfV0pO1xuXHQgICAgICAhb3JpRGF0YXMuZW5hYmxlICYmIF9zZWxmLnNldENvbmZpZ0ludG9Mcyhfc2VsZi5wYWdlQ29uZmlnKTtcblx0ICAgIH1dKTtcblx0ICAgIF9zZWxmLnN5bmNNaW5pVnREYXRhKCk7XG5cdCAgfSxcblx0XG5cdCAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmluaXQoKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH1cblx0fSkpO1xuXG5cbi8qKiovIH0pLFxuLyogODggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHQvKipcblx0ICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanNcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdRID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdFxuXHRleHBvcnRzLmNhdGNoRXhjZXB0aW9uID0gZnVuY3Rpb24gKGZpbGVuYW1lLCBlcnJvcikge1xuXHQgIHZhciBtZXNzYWdlID0gZmlsZW5hbWU7XG5cdCAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IubWVzc2FnZSkge1xuXHQgICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnXycgKyBlcnJvci5tZXNzYWdlO1xuXHQgIH1cblx0ICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoJ2FwbHVzLl9hcGx1c19jcGx1Z2luX20uZG9fdHJhY2tlcl9qc2Vycm9yJywgW3tcblx0ICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG5cdCAgICBlcnJvcjogSlNPTi5zdHJpbmdpZnkoZXJyb3IpLFxuXHQgICAgZmlsZW5hbWU6IGZpbGVuYW1lXG5cdCAgfV0pO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDg5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQqIGRlc2NyaXB0aW9uXG5cdCpcblx0KiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCpcblx0KiBBdXRob3JzOlxuXHQqICAgQWFyb24gfCDpkrDmmK0gPGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbT5cblx0Ki9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIGxzTWluaXZ0Q29uZmlnS2V5OiAnQVBMVVNfTUlOSV9DT05GSUcnLFxuXHRcblx0ICAvKipcblx0ICAgKiDlhazlhbHmqKHmnb/lnLrmma/vvIzlpoLmnpx0dXJub249PT0nMScg5ouJ5Y+WdmFsdWXlhoXnmoTlhoXlrrlcblx0ICAgKiBtZXRhSW5mbzoge1xuXHQgICAqICAnYXBsdXMtdHJhY2stY29uZmlnLWlkJzoge1xuXHQgICAqICAgICd2YWx1ZSc6ICdwYUN3WmxHMld2N2xsaGhtJyxcblx0ICAgKiAgICAndHVybm9uJzogJzAnIG9yICcxJyAgIFxuXHQgICAqICB9XG5cdCAgICogfVxuXHQgICAqL1xuXHQgIGdldE1pbmlWdFRwbENkblBhdGg6IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgYXBsdXNUcmFja0NvbmZpZ0lkSW5mbyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy10cmFjay1jb25maWctaWQnKTtcblx0ICAgIHZhciB0dXJub24gPSBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvICYmIGFwbHVzVHJhY2tDb25maWdJZEluZm8udHVybm9uO1xuXHQgICAgdmFyIHZhbHVlID0gYXBsdXNUcmFja0NvbmZpZ0lkSW5mbyAmJiBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvLnZhbHVlO1xuXHQgICAgaWYgKHR1cm5vbiA9PT0gJzEnICYmIHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiAnJztcblx0ICB9LFxuXHRcblx0ICBnZXRWdENvbmZpZ1BhdGg6IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgdGVtcGxhdGVWYWwgPSB0aGlzLmdldE1pbmlWdFRwbENkblBhdGgoKTtcblx0ICAgIHZhciBzcG1BQiA9IFtdO1xuXHQgICAgdmFyIHNwbUlkO1xuXHQgICAgdmFyIGFwcGtleSA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBrZXknKSB8fCBhcGx1cy5nZXRNZXRhSW5mbygnYXBwSWQnKSB8fCBhcGx1cy5nZXRNZXRhSW5mbygnYXBwS2V5Jyk7XG5cdCAgICBpZiAoYXBwa2V5KSB7XG5cdCAgICAgIHNwbUlkID0gYXBwa2V5O1xuXHQgICAgfVxuXHQgICAgXG5cdCAgICBpZiAoc3BtSWQpIHtcblx0ICAgICAgc3BtQUIgPSBzcG1JZC5zcGxpdCgnLicpO1xuXHQgICAgfSBcblx0ICAgIC8vIHJlbW92ZSBlbHNlIGxvZ2ljIGluc2lkZSB3ZWJ2dFN0b3JlLCBiZWNhdXNlIG1pbmlfY2xvdWQgZG9udCBzdXBwb3J0IHNwbVxuXHQgICAgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMikge1xuXHQgICAgICB0aGlzLm9yaWdpblNwbSA9IHtcblx0ICAgICAgICBzcG1BOiBzcG1BQlswXSxcblx0ICAgICAgICBzcG1COiBzcG1BQlsxXVxuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIGlmIChzcG1BQi5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgdGhpcy5vcmlnaW5TcG0uc3BtQSA9IHNwbUFCWzBdO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0ZW1wbGF0ZVZhbCkge1xuXHQgICAgICByZXR1cm4gdGVtcGxhdGVWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAoc3BtQUIubGVuZ3RoID09PSAyKSB7XG5cdCAgICAgIHJldHVybiBzcG1BQi5qb2luKCdfJyk7XG5cdCAgICB9IGVsc2UgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICByZXR1cm4gc3BtQUJbMF07XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZmV0Y2hGcm9tTFM6IGZ1bmN0aW9uIChjZG5wYXRoKSB7XG5cdCAgICBpZiAoIXRoaXMuY2RucGF0aCkge1xuXHQgICAgICB0aGlzLmNkbnBhdGggPSBjZG5wYXRoIHx8IHRoaXMuZ2V0TWluaVZ0VHBsQ2RuUGF0aCgpO1xuXHQgICAgfVxuXHQgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChjdHguZ2V0U3RvcmFnZVN5bmModGhpcy5sc01pbml2dENvbmZpZ0tleSArICctJyArIGNkbnBhdGgpKSB8fCB7fTtcblx0ICB9LFxuXHRcblx0ICBzZXRDb25maWdJbnRvTHM6IGZ1bmN0aW9uKGNvbmZpZykge1xuXHQgICAgaWYgKCF0aGlzLmNkbnBhdGgpIHtcblx0ICAgICAgdGhpcy5jZG5wYXRoID0gdGhpcy5nZXRWdENvbmZpZ1BhdGgoKTtcblx0ICAgIH1cblx0ICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgIGN0eC5zZXRTdG9yYWdlU3luYyh0aGlzLmxzTWluaXZ0Q29uZmlnS2V5ICsgJy0nICsgdGhpcy5jZG5wYXRoLCBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSkpO1xuXHQgICAgLy8gdXRpbFN0b3JlLnNldCh0aGlzLmxzTWluaXZ0Q29uZmlnS2V5ICsgJy0nICsgdGhpcy5jZG5wYXRoLCBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSkpO1xuXHQgIH1cblx0XG5cdH07XG5cbi8qKiovIH0pLFxuLyogOTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsVlQuanNcblx0ICog5Y+v6KeG5YyW6YWN572uIOino+aekOmFjee9ruS/oeaBr+S4uuiHquWKqOeCueWHu+OAgeiHquWKqOabneWFieOAgeiHquWKqHB25YWs5YWx5Ye95pWwXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0dmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0ZXhwb3J0cy5nZXRDdXJyZW50UGFnZVZUQ2ZnID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHZ0Q2ZnID0gYXBsdXMuX2FwbHVzX3Z0X2NmZztcblx0ICBpZiAoIXZ0Q2ZnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBwYXRoID0gUGFnZU1hbmFnZXIuZ2V0Q3VycmVudFBhZ2VQYXRoKCk7XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgdnRDZmcucGFnZXMubGVuZ3RoOyBpKysgKXtcblx0ICAgIHZhciBwYWdlQ29uZmlnID0gdnRDZmcucGFnZXNbaV07XG5cdCAgICBpZiAocGFnZUNvbmZpZy5tYXRjaFVybCA9PT0gcGF0aCkge1xuXHQgICAgICByZXR1cm4gcGFnZUNvbmZpZztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybjtcblx0fTtcblx0XG5cdFxuXHRleHBvcnRzLnZ0MmF1dG9FdmVudCA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciB2dF9jZmcgPSBhcGx1cy5fYXBsdXNfdnRfY2ZnO1xuXHQgIGlmICghdnRfY2ZnKSByZXR1cm47XG5cdCAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICB2YXIgY3VycmVudFBhZ2UgPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuXHQgIGVhY2godnRfY2ZnLnBhZ2VzLCBmdW5jdGlvbihwYykge1xuXHQgICAgYXBsdXMuc2V0UGFnZU5hbWUoeyBwYWdlTmFtZTogcGMuc3BtQiwgZXh0cmFQYXJhbXM6IHBjLmV4dHJhUGFyYW1zIH0sIHBjLm1hdGNoVXJsKTtcblx0ICAgIGlmIChwYy5tYXRjaFVybCA9PT0gY3VycmVudFBhZ2UpIHtcblx0ICAgICAgdmFyIGF1dG9fZXhwX2FyciA9IFtdLCBhdXRvX2Nsa19hcnIgPSBbXTtcblx0ICAgICAgZWFjaCh2dF9jZmcucG9pbnRzLCBmdW5jdGlvbihwKXtcblx0ICAgICAgICBpZiAocGMuc3BtQiA9PT0gcC5zcG1CKSB7XG5cdCAgICAgICAgICBpZiAocC50cmFja2VyVHlwZSA9PT0gXCJleHBvc3VyZVwiKSB7IFxuXHQgICAgICAgICAgICBhdXRvX2V4cF9hcnIucHVzaCh7XG5cdCAgICAgICAgICAgICAgJ2Nzc1NlbGVjdG9yJzogcC5zZWxlY3Rvcixcblx0ICAgICAgICAgICAgICAnbG9na2V5JzogcC5sb2drZXksXG5cdCAgICAgICAgICAgICAgJ3Byb3BzJzogcC5zZWxlY3RvclR5cGUsXG5cdCAgICAgICAgICAgICAgJ3NwbUMnOiBwLnNwbUMsXG5cdCAgICAgICAgICAgICAgJ3NwbUQnOiBwLnNwbUQsXG5cdCAgICAgICAgICAgICAgJ2N1c3RvbUFyZ3MnOiBwLmN1c3RvbUFyZ3MsXG5cdCAgICAgICAgICAgICAgJ192dCc6IHBjLnRlbXBsYXRlIHx8IHBjLnN0ZElkID8gMiA6IDFcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBhdXRvX2Nsa19hcnIucHVzaCh7XG5cdCAgICAgICAgICAgICAgJ2Nzc1NlbGVjdG9yJzogcC5zZWxlY3Rvcixcblx0ICAgICAgICAgICAgICAnbG9na2V5JzogcC5sb2drZXksXG5cdCAgICAgICAgICAgICAgJ3Byb3BzJzogcC5zZWxlY3RvclR5cGUsIFxuXHQgICAgICAgICAgICAgICdzcG1DJzogcC5zcG1DLFxuXHQgICAgICAgICAgICAgICdzcG1EJzogcC5zcG1ELFxuXHQgICAgICAgICAgICAgICdjdXN0b21BcmdzJzogcC5jdXN0b21BcmdzLFxuXHQgICAgICAgICAgICAgICdfdnQnOiBwYy50ZW1wbGF0ZSB8fCBwYy5zdGRJZCA/IDIgOiAxXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBpZiAoYXV0b19leHBfYXJyLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnLCBhdXRvX2V4cF9hcnIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoYXV0b19jbGtfYXJyLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnLCBhdXRvX2Nsa19hcnIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogOTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHQvKipcblx0ICogYXBsdXNfbWluaV9iYXNpY1xuXHQgKiDlsI/nqIvluo/mqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDpvpnpqbkgPGNoZW5ncGluZy5yY3BAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwQ29uZmlnLGFwbHVzX2NvbmZpZykge1xuXHQgIHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdCAgLy8gcmVxdWlyZSgnQHV0aWxzL2RlYnVnJykuaXNEZWJ1Z0FwbHVzKHRydWUpO1xuXHRcblx0ICB2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHQgIHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdCAgdmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0ICB2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdCAgdmFyIGFwbHVzaW5pdCA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpO1xuXHQgIG1pbmkuaW5pdElzVEIoKTtcblx0XG5cdCAgaWYgKHR5cGVvZiBhcHBDb25maWcgPT09ICdvYmplY3QnKSB7XG5cdCAgICBpZiAoYXBwQ29uZmlnLnNpdGVJZCkge1xuXHQgICAgICBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLnNpdGVJZCA9IGFwcENvbmZpZy5zaXRlSWQ7XG5cdCAgICB9XG5cdCAgICBhcGx1c19jb25maWcubWV0YUluZm8gPSBPYmplY3QuYXNzaWduKHt9LCBhcGx1c19jb25maWcubWV0YUluZm8sIGFwcENvbmZpZy5tZXRhSW5mbyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgUlVOTklORyA9ICdydW5uaW5nJztcblx0ICB2YXIgQ09NUExFVEUgPSAnY29tcGxldGUnO1xuXHQgIHZhciBhcGx1c1N0YXR1cyA9IFsnYXBsdXNSZWFkeScsIFJVTk5JTkddO1xuXHRcblx0ICB1dGlsUHVic3ViLmRvUHViTXNnKGFwbHVzU3RhdHVzKTtcblx0XG5cdCAgYXBsdXNpbml0LnJ1bih7XG5cdCAgICBwbHVnaW5zOiBhcGx1c19jb25maWcucGx1Z2lucyxcblx0ICAgIGNvbnRleHQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGNvbmZpZ19wdl9jb250ZXh0ID0ge1xuXHQgICAgICAgIFBBR0VfTE9BRF9USU1FOiBuZXcgRGF0ZSgpXG5cdCAgICAgIH07XG5cdCAgICAgIHZhciBQTFVHSU5TX1BWID0gW107XG5cdCAgICAgIGVhY2goYXBsdXNfY29uZmlnLnBsdWdpbnMsIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgY29uZmlnX3B2X2NvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnO1xuXHQgICAgICAgIGlmICh2Lm5hbWUgPT09ICdhcGx1c19sb2dfaW5qZWN0JyAmJiB2LmNvbmZpZyAmJiB2LmNvbmZpZy5wbHVnaW5zKSB7XG5cdCAgICAgICAgICBQTFVHSU5TX1BWID0gdi5jb25maWcucGx1Z2lucy5wdjtcblx0ICAgICAgICAgIGVhY2goUExVR0lOU19QViwgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgICAgY29uZmlnX3B2X2NvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZ19wdl9jb250ZXh0LCB7XG5cdCAgICAgICAgYXBsdXNfY29uZmlnOiBhcGx1c19jb25maWdcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwgZnVuY3Rpb24gKCkge1xuXHQgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICBtc2c6ICdBUExVUyBJTklUIFNVQ0NFU1MnXG5cdCAgICB9KTtcblx0ICAgIC8vIGFwbHVz5YeG5aSH5aW95LqG77yM5YiG5Y+R5LiA5LiqcmVhZHnkuovku7Zcblx0ICAgIGFwbHVzU3RhdHVzWzFdID0gQ09NUExFVEU7XG5cdCAgICB1dGlsUHVic3ViLmRvUHViTXNnKGFwbHVzU3RhdHVzKTtcblx0ICB9KTtcblx0XG5cdCAgLy8gcmV0dXJuIHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUUpO1xuXHQgIHJldHVybiB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogOTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGFwbHVzIEFQSVxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWR1Y2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0XG5cdC8qKlxuXHQgKiDlsIblkI7nu63nmoRpbml05Yqo5L2c6YO95YGa5oiQ5o+S5Lu277yM55uu5YmN5Y+q5pyJd2hlcmVfdG9fc2VuZHB25LiA6aG5XG5cdCAqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG5cdCAqICAgcGx1Z2luc1xuXHQgKiAgIGNvbnRleHRcblx0ICogfVxuXHQgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0ICpcblx0ICovXG5cdGV4cG9ydHMucnVuID0gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuXHQgIHJlZHVjZXIucnVuKHtcblx0ICAgIHBsdWdpbnM6IG9wdHMucGx1Z2lucyxcblx0ICAgIGNvbnRleHQ6IG9wdHMuY29udGV4dFxuXHQgIH0sIHtcblx0ICAgIGNvbmZpZzoge30sXG5cdCAgICB1c2VyZGF0YToge30sXG5cdCAgICBwdWJzdWJUeXBlOiAnYXBsdXNpbml0Jyxcblx0ICAgIG1lc3NhZ2VGblF1ZXVlOiBbXSxcblx0ICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2FwbHVzaW5pdCdcblx0ICB9LCBmdW5jdGlvbiAoY3R4KSB7XG5cdCAgICB2YXIgbXNncyA9IFsnYXBsdXNJbml0Q29udGV4dCcsIGN0eF07XG5cdCAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuXHQgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuXHQgICAgICBjYWxsYmFjayhjdHgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9O1xuXG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBsdXNfbWluaV9jbG91ZF91bS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDVhNGIzZmI3YWMzMTdkMWRmNzcwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbi8qKlxuICogYXBsdXNfbWluaV9jbG91ZC5qc1xuICog5LqR5LiK5bCP56iL5bqP5qih5Z2X5YyW55qEYXBsdXNKc+WFpeWPo1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDpvpnpqbkgPGNoZW5ncGluZy5yY3BAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5yZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5pbml0R2xvYmFsKCk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcHBDb25maWcpIHtcbiAgdmFyIGFwbHVzX2NvbmZpZyA9IHJlcXVpcmUoJy4vYXBsdXNfbWluaV9jbG91ZF91bV9jb25maWcnKTsgXG4gIHJldHVybiByZXF1aXJlKCcuL2FwbHVzX21pbmlfYmFzaWMnKShhcHBDb25maWcsYXBsdXNfY29uZmlnKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c19taW5pX2Nsb3VkX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDmk43kvZxhcGx1c+eahOW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG52YXIgQVBMVVMgPSBhcGx1c1N0YXRpYy5BUExVUztcbnZhciBBUExVU19RVUVVRSA9IGFwbHVzU3RhdGljLkFQTFVTX1FVRVVFO1xuXG52YXIgR09MRExPRyA9IGFwbHVzU3RhdGljLkdPTERMT0c7XG52YXIgR09MRExPR19RVUVVRSA9IGFwbHVzU3RhdGljLkdPTERMT0dfUVVFVUU7XG5cbnZhciBfYXBsdXNfY29udGV4dDtcbnZhciBpc1dlYiA9IGZhbHNlO1xudHJ5IHtcbiAgX2FwbHVzX2NvbnRleHQgPSB3aW5kb3c7XG4gIGlzV2ViID0gdHJ1ZTtcbn0gY2F0Y2ggKGUpIHtcbiAgX2FwbHVzX2NvbnRleHQgPSB7fTtcbn1cblxuZXhwb3J0cy5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG59O1xuXG5leHBvcnRzLmluaXRHbG9iYWwgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICBpZiAoY29udGV4dCkge1xuICAgIF9hcGx1c19jb250ZXh0ID0gY29udGV4dDtcbiAgfSBlbHNlIHtcbiAgICBfYXBsdXNfY29udGV4dCA9IHtcbiAgICAgIHY6IDEsXG4gICAgICBhcGx1czoge30sXG4gICAgICBhcGx1c19xdWV1ZTogW11cbiAgICB9O1xuICB9XG4gIHZhciBfYXBsdXNEZWZhdWx0VmFsdWU7XG4gIHZhciBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcbiAgaWYgKGlzV2ViKSB7XG4gICAgdHJ5IHtcbiAgICAgIF9hcGx1c0RlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1cyB8fCAoX2FwbHVzX2NvbnRleHQuYXBsdXMgPSB7fSkpO1xuICAgICAgdmFyIF9nb2xkbG9nX3F1ZXVlID0gKF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgfHwgKF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgPSBbXSkpO1xuICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgfHwgKF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gW10pKTtcbiAgICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gX2dvbGRsb2dfcXVldWUuY29uY2F0KF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlKTsgIFxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH0gZWxzZSB7XG4gICAgX2FwbHVzRGVmYXVsdFZhbHVlID0gX2FwbHVzX2NvbnRleHQuYXBsdXM7XG4gICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZTtcbiAgfVxuICBcbiAgX2FwbHVzX2NvbnRleHQuYXBsdXMgPSBfYXBsdXNfY29udGV4dC5nb2xkbG9nID0gX2FwbHVzRGVmYXVsdFZhbHVlO1xuICBfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgPSBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcbiAgXG4gIHJldHVybiBfYXBsdXNfY29udGV4dDtcbn07XG5cbnZhciBnZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgaWYgKGtleSA9PT0gQVBMVVMgfHwga2V5ID09PSBHT0xETE9HKSB7XG4gICAgdmFyIGcgPSBfYXBsdXNfY29udGV4dFtBUExVU10gfHwgX2FwbHVzX2NvbnRleHRbR09MRExPR107XG4gICAgaWYgKCFnKSB7XG4gICAgICBnID0gX2FwbHVzX2NvbnRleHRbQVBMVVNdID0gX2FwbHVzX2NvbnRleHRbR09MRExPR10gPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIGc7XG4gIH1cbiAgdmFyIGdvbGRsb2dfcXVldWUgPSBHT0xETE9HX1FVRVVFO1xuICB2YXIgYXBsdXNfcXVldWUgPSBBUExVU19RVUVVRTtcbiAgaWYgKGtleSA9PT0gYXBsdXNfcXVldWUgfHwga2V5ID09PSBnb2xkbG9nX3F1ZXVlKSB7XG4gICAgdmFyIHEgPSBfYXBsdXNfY29udGV4dFthcGx1c19xdWV1ZV0gfHwgX2FwbHVzX2NvbnRleHRbZ29sZGxvZ19xdWV1ZV07XG4gICAgaWYgKCFxKSB7XG4gICAgICBxID0gX2FwbHVzX2NvbnRleHRbYXBsdXNfcXVldWVdID0gX2FwbHVzX2NvbnRleHRbZ29sZGxvZ19xdWV1ZV0gPSBbXTtcbiAgICB9XG4gICAgcmV0dXJuIHE7XG4gIH1cbn07XG5leHBvcnRzLmdldEdsb2JhbFZhbHVlID0gZ2V0R2xvYmFsVmFsdWU7XG5cbmV4cG9ydHMuc2V0R2xvYmFsVmFsdWUgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICBfYXBsdXNfY29udGV4dFtrZXldID0gdmFsdWU7XG59O1xuXG4vKipcbiAqIOiOt+WPlmFwbHVz5YaF6YOo5Y+Y6YePXG4gKiBAcGFyYW1zIFtTdHJpbmddIGtleVxuICogQHJldHVybiBbT2JqZWN0fFN0cmluZ3xOdW1iZXJ8Qm9vbGVhbl1cbiAqL1xudmFyIGdldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXkpIHtcbiAgdmFyIHY7XG4gIHRyeSB7XG4gICAgdmFyIGFwbHVzID0gZ2V0R2xvYmFsVmFsdWUoQVBMVVMpO1xuICAgIHYgPSBhcGx1c1trZXldO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdiA9ICcnO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiB2O1xuICB9XG59O1xuZXhwb3J0cy5nZXRHb2xkbG9nVmFsID0gZ2V0R29sZGxvZ1ZhbDtcbi8qKlxuICog6K6+572uYXBsdXPlhoXpg6jlj5jph49cbiAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG4gKiBAcGFyYW1zIFtPYmplY3R8U3RyaW5nfE51bWJlcnxCb29sZWFuXSB2YWxcbiAqIEByZXR1cm4gW0Jvb2xlYW5dXG4gKi9cbnZhciBzZXRHb2xkbG9nVmFsID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgdmFyIGYgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG4gICAgaWYgKGtleSkge1xuICAgICAgYXBsdXNba2V5XSA9IHZhbDtcbiAgICAgIGYgPSB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGYgPSBmYWxzZTtcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gZjtcbiAgfVxufTtcbmV4cG9ydHMuc2V0R29sZGxvZ1ZhbCA9IHNldEdvbGRsb2dWYWw7XG5cbi8qKlxuICog6I635Y+WY2xpZW50SW5mbyjmtY/op4jlmajjgIHorr7lpIfnrYnkv6Hmga8pXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiAgIHZlcnNpb246IDIsXG4gKiAgIHVhX2luZm86IHtcbiAqICAgICBiOiBcImNocm9tZTU4XCJcbiAqICAgICBpc206IFwibWFjXCJcbiAqICAgICBteDogXCIzNjBlZVwiXG4gKiAgICAgbzogXCJtYWNcIlxuICogICAgIHA6IDFcbiAqICAgICBzOiBcIjE5MjB4MTA4MFwiXG4gKiAgICAgdzogXCJ3ZWJraXRcIlxuICogICB9XG4gKiB9XG4gKi9cbmV4cG9ydHMuZ2V0Q2xpZW50SW5mbyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2NsaWVudCcpIHx8IHt9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxHb2xkbG9nLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBBUExVUyA9ICdhcGx1cyc7XG52YXIgR09MRExPRyA9ICdnb2xkbG9nJztcbnZhciBBUExVU19RVUVVRSA9IEFQTFVTICsgJ19xdWV1ZSc7XG52YXIgR09MRExPR19RVUVVRSA9IEdPTERMT0cgKyAnX3F1ZXVlJztcbnZhciBNV19DSEFOR0UgPSAnbXdfY2hhbmdlJztcbnZhciBNRVRBX0lORk8gPSAnTWV0YUluZm8nO1xudmFyIEFQUEVORF9NRVRBX0lORk8gPSAnYXBwZW5kJyArIE1FVEFfSU5GTztcbnZhciBTRVRfTUVUQV9JTkZPID0gJ3NldCcgKyBNRVRBX0lORk87XG52YXIgSFRUUCA9ICdodHRwJztcbnZhciBfcHVic3ViID0gJ19wdWJzdWInO1xuXG52YXIgZGVmYXVsdENvZGUgPSAnb3RoZXInO1xudmFyIENMSyA9ICcyMTAxJztcbnZhciBFWFAgPSAnMjIwMSc7XG52YXIgSU1QRVhQID0gJzIyMDInO1xudmFyIE9USEVSID0gJzE5OTk5JztcbnZhciBBUFBfU0hPVyA9ICcxMDIzJztcbnZhciBBUFBfSElERV9PUl9VTkxPQUQgPSAnMTAxMCc7IFxudmFyIFNFU1NJT05fSU5URVJWQUwgPSAzMDAwMDsgLy8gc2Vzc2lvbklk6L+H5pyf5pe26Ze0IDMw56eSXG52YXIgU0hBUkVfQ0FDSEVfSU5URVJWQUwgPSAxMDAwICogNjAgKiAzMDtcbnZhciBFS1ZTID0gJ2VrdnMnO1xudmFyIEVWRU5UX01BWF9DT1VOVCA9IDEwMDAwOyAvLyDmnKzlnLDmnIDlpJrlrZjlgqjov5nkuYjlpJpla3bmlbDmja5cbnZhciBNRU1PUllfTUFYX0NPVU5UID0gMTsgLy8g5YaF5a2Y5Lit5a2Y5YKo55qE5pyA5aSn5pWw5o2u5pWw6YeP77yM6LaF6L+H5YiZ57yT5a2Y5Yiw5pys5ZywXG52YXIgRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMID0gMzAwMDsgLy8gZWt26buY6K6k5Y+R6YCB6Ze06ZqU5pe26Ze0OiAz56eSXG52YXIgUEFHRV9TVEFSVCA9ICckJF9wYWdlX3N0YXJ0JztcbnZhciBQQUdFX0VORCA9ICckJF9wYWdlX2VuZCc7XG52YXIgQVBQX1NUQVJUID0gJyQkX2FwcF9zdGFydCc7XG52YXIgQVBQX0VORCA9ICckJF9hcHBfZW5kJztcbnZhciBVU0VSX1BST0ZJTEVfS0VZID0gJ2FwbHVzX3VzZXJfcHJvZmlsZSc7XG52YXIgSU1QUklOVCA9ICdpbXByaW50JztcbnZhciBJRF9UWVBFID0gJ2FwbHVzLWlkdHlwZSc7XG52YXIgSlNCUklER0VfT05MWSA9ICdhcGx1cy1qc2JyaWRnZS1vbmx5JztcbnZhciBQQUdFX0NPTkZJRyA9ICdhcGx1cy1wYWdlLWNvbmZpZyc7IFxudmFyIEFQTFVTX1NLSVBfQVBWX1JVTEVTID0gJ2FwbHVzLXNraXAtYXB2LXJ1bGVzJztcbm1vZHVsZS5leHBvcnRzID0ge1xuICBQQUdFX0VOVEVSOiAnUEFHRV9FTlRFUicsXG4gIENVUlJFTlRfUEFHRV9DT05GSUc6ICdDVVJSRU5UX1BBR0VfQ09ORklHJyxcbiAgX0FOT05ZX0lEOiAnX2Fub255X2lkJyxcbiAgX1VTRVJfSUQ6ICdfdXNlcl9pZCcsXG4gIERFRkFVTFRfQ09ERTogZGVmYXVsdENvZGUsXG4gIE9USEVSOiBPVEhFUixcbiAgRVZFTlRfTUFQOiB7XG4gICAgJzIxMDEnOiAnY2xpY2snLFxuICAgICcyMjAxJzogJ2V4cG9zdXJlJyxcbiAgICAnMjIwMic6ICdleHBvc3VyZScsXG4gICAgJzE5OTk5JzogZGVmYXVsdENvZGUsXG4gICAgJzEwMjMnOiAnYXBwX3Nob3cnLFxuICAgICcxMDEwJzogJ2FwcF9oaWRlX29yX3VubG9hZCdcbiAgfSxcbiAgRVZFTlRfSURfTUFQOiB7XG4gICAgJ0VYUCc6IEVYUCxcbiAgICAnSU1QRVhQJzogSU1QRVhQLFxuICAgICdDTEsnOiBDTEssXG4gICAgJ09USEVSJzogT1RIRVIsXG4gICAgJ1NIT1cnOiBBUFBfU0hPVyxcbiAgICAnSF9PUl9VJzogQVBQX0hJREVfT1JfVU5MT0FEXG4gIH0sXG4gIEFQTFVTOiBBUExVUyxcbiAgR09MRExPRzogR09MRExPRyxcbiAgVU5TVUJTQ1JJQkU6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy51bnN1YnNjcmliZScsXG4gIFNVQlNDUklCRTogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnN1YnNjcmliZScsXG4gIFBVQkxJU0g6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5wdWJsaXNoJyxcbiAgQ0FDSEVfUFVCUzogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLmNhY2hlUHVicycsXG4gIEFQTFVTX1VOSVZFUlNBTDogQVBMVVMgKyAnX3VuaXZlcnNhbCcsXG4gIEFQTFVTX1FVRVVFOiBBUExVU19RVUVVRSxcbiAgR09MRExPR19RVUVVRTogR09MRExPR19RVUVVRSxcbiAgQ09NUExFVEU6ICdjb21wbGV0ZScsXG4gIFBWX0NPREU6ICcyMDAxJyxcbiAgRVhQX0NPREU6IEVYUCxcbiAgQ0xLX0NPREU6IENMSyxcbiAgT1RIRVJfQ09ERTogT1RIRVIsXG4gIENMSzogJ0NMSycsXG4gIEVYUDogJ0VYUCcsXG4gIC8vIE9USEVSOiAnT1RIRVInLFxuICBTUE1fQ05UOiAnc3BtLWNudCcsXG4gIFNQTV9VUkw6ICdzcG0tdXJsJyxcbiAgU1BNX1BSRTogJ3NwbS1wcmUnLFxuICBNV19DSEFOR0VfUFY6IE1XX0NIQU5HRSArICdfcHYnLFxuICBNV19DSEFOR0VfSEpMSjogTVdfQ0hBTkdFICsgJ19oamxqJyxcbiAgSFRUUDogSFRUUCArICc6JyxcbiAgSFRUUFM6ICdodHRwczonLFxuICBBUFBFTkRfTUVUQV9JTkZPOiBBUFBFTkRfTUVUQV9JTkZPLFxuICBTRVRfTUVUQV9JTkZPOiBTRVRfTUVUQV9JTkZPLFxuICBBUExVU19BUFBFTkRfTUVUQV9JTkZPOiBBUExVUyArICcuJyArIEFQUEVORF9NRVRBX0lORk8sXG4gIEFQTFVTX1NFVF9NRVRBX0lORk86IEFQTFVTICsgJy4nICsgU0VUX01FVEFfSU5GTyxcbiAgUFZJRDoncHZpZCcsXG4gIEFQTFVTX0xPR19QSVBFOidhcGx1cy1sb2ctcGlwZScsXG4gIG9wZW5BUElzOiBbXG4gICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsICdjb21iaW5lUmVjb3JkJywgJ3JlY29yZFVkYXRhJywgJ3JlcXVlc3RWVENvbmZpZycsXG4gICAgJ3NldFBhZ2VTUE0nLCAnc2V0TWV0YUluZm8nLCAnYXBwZW5kTWV0YUluZm8nLFxuICAgICd1cGRhdGVQYWdlUHJvcGVydGllcycsXG4gICAgJ3VwZGF0ZU5leHRQYWdlUHJvcGVydGllcycsXG4gICAgJ3VwZGF0ZVBhZ2VVdHBhcmFtJyxcbiAgICAndXBkYXRlTmV4dFBhZ2VVdHBhcmFtJyxcbiAgICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJywgJ3NraXBQYWdlJyxcbiAgICAndXBkYXRlU2Vzc2lvblByb3BlcnRpZXMnLCAnZ2V0UGFnZVNwbVVybCcsICdnZXRQYWdlU3BtUHJlJyxcbiAgICAnc2V0UGFnZU5hbWUnLCAnZ2V0RWxlbWVudFNQTSdcbiAgXSxcbiAgU0VTU0lPTl9JTlRFUlZBTDogU0VTU0lPTl9JTlRFUlZBTCxcbiAgU0VTU0lPTl9QQVVTRV9USU1FOiAnc2Vzc2lvbl9wYXVzZV90aW1lJyxcbiAgSU1QUklOVDogJ2ltcHJpbnQnLFxuICBDVVJSRU5UX1NFU1NJT046ICdjdXJyZW50X3Nlc3Npb24nLFxuICBNQVhfRVZFTlRJRF9MRU5HVEg6IDEyOCxcbiAgTUFYX1BST1BFUlRZX0tFWV9MRU5HVEg6IDI1NixcbiAgTUFYX1BST1BFUlRZX0tFWVNfQ09VTlQ6IDEwMCxcbiAgUkVRVUVTVFM6ICdyZXF1ZXN0cycsXG4gIFNIQVJFUzogJ3NoYXJlcycsXG4gIEFQTFVTX1NTUkM6ICdfYXBsdXNfc3NyYycsXG4gIEVLVlM6IEVLVlMsXG4gIEVWRU5UX01BWF9DT1VOVDogRVZFTlRfTUFYX0NPVU5ULFxuICBNRU1PUllfTUFYX0NPVU5UOiBNRU1PUllfTUFYX0NPVU5ULFxuICBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUw6IEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCxcbiAgUEFHRV9TVEFSVDogUEFHRV9TVEFSVCxcbiAgUEFHRV9FTkQ6IFBBR0VfRU5ELFxuICBBUFBfU1RBUlQ6IEFQUF9TVEFSVCxcbiAgQVBQX0VORDogQVBQX0VORCxcbiAgVVNFUl9QUk9GSUxFX0tFWTogVVNFUl9QUk9GSUxFX0tFWSxcbiAgU0hBUkVfQ0FDSEVfSU5URVJWQUw6IFNIQVJFX0NBQ0hFX0lOVEVSVkFMLFxuICBJTVBSSU5UOiBJTVBSSU5ULFxuICBJRF9UWVBFOiBJRF9UWVBFLFxuICBKU0JSSURHRV9PTkxZOiBKU0JSSURHRV9PTkxZLFxuICBQQUdFX0NPTkZJRzogUEFHRV9DT05GSUcsXG4gIEFQTFVTX1NLSVBfQVBWX1JVTEVTOiBBUExVU19TS0lQX0FQVl9SVUxFU1xufTtcblxuLy8gdmFyIG9wZW5BUElzID0gW1xuLy8gICAnc2VuZCcsICdlbnRlcicsICdzZW5kUFYnLCAncmVjb3JkJyxcbi8vICAgJ3NldFBhZ2VTUE0nLCAnc2V0TWV0YUluZm8nLCAnYXBwZW5kTWV0YUluZm8nLFxuLy8gICBVUERBVEUgKyAnUGFnZVByb3BlcnRpZXMnLFxuLy8gICBVUERBVEUgKyAnTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcbi8vICAgVVBEQVRFICsgJ1BhZ2VVdHBhcmFtJyxcbi8vICAgVVBEQVRFICsgJ05leHRQYWdlVXRwYXJhbScsXG4vLyAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLFxuLy8gICAnc2tpcFBhZ2UnXG4vLyBdO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2FwbHVzU3RhdGljLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBcIm1ldGFJbmZvXCI6IHtcbiAgICBcImFwbHVzLXJob3N0LXZcIjogXCJcIixcbiAgICBcImFwbHVzLXJob3N0LWdcIjogXCJcIixcbiAgICBcImFwbHVzLW1tc3RhdC10aW1lb3V0XCI6IFwiMTAwMDBcIixcbiAgICBcInNka0lkXCI6IFwiYXBsdXNfbWluaV9jbG91ZF91bVwiXG4gIH0sXG4gIFwiZ2xvYmFsQ29uZmlnXCI6IHtcbiAgICBcImlzQWxpXCI6IGZhbHNlLFxuICAgIFwiaXNEZWNvZGVVcmxcIjogdHJ1ZSxcbiAgICBcIkFQTFVTX1FVRVVFXCI6IFwiYXBsdXNfcXVldWVcIixcbiAgICBcIkVUQUdfU1RPUkFHRV9LRVlcIjogXCJfX0VUQUdfX0NOQV9fSURfX1wiLFxuICAgIFwic2NyaXB0X25hbWVcIjogXCJhcGx1c19taW5pLmpzXCIsXG4gICAgXCJhcGx1cy1nbG9iYWxkYXRhXCI6IHt9LFxuICAgIFwibHZlclwiOiBcIjEuNy4xMFwiXG4gIH0sXG4gIFwicGx1Z2luc1wiOiBbXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiaW5qZWN0X2FwcF91bVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL2luamVjdF9hcHBfdW1fbmV3LmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImluamVjdF9wYWdlX3VtXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX21pbmkvaW5qZWN0X3BhZ2VfdW0uanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwib3Blbl9hcGlcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfbWluaS9vcGVuX2FwaS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19jbGllbnRcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfY2xpZW50X21pbmkuanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwicHVic3ViXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9tZXNzYWdlci9wdWJzdWJfbWluaS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19tZXRhX2luamVjdFwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19tZXRhX2luamVjdF9taW5pLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FjXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX2Nsay5qcycpLFxuICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgXCJpbmplY3RfcGFnZV91bVwiXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19hZVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl9leHAuanMnKSxcbiAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgIFwiaW5qZWN0X3BhZ2VfdW1cIlxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWluaV9zcG1cIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfbWluaS9taW5pX3NwbS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19taW5pX3JlcG9ydF91bVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19taW5pX3JlcG9ydF91bS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19sb2dfaW5qZWN0XCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2FwbHVzX2xvZ19pbmplY3QuanMnKSxcbiAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgIFwiYXBsdXNfbWV0YV9pbmplY3RcIlxuICAgICAgXSxcbiAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgXCJwbHVnaW5zXCI6IHtcbiAgICAgICAgICBcInB2XCI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ19taW5pLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZW5fdG9fc2VuZHB2XCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doZW5fdG9fc2VuZHB2LmpzJyksXG4gICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgICAgICAgICBcImFwbHVzV2FpdGluZ1wiOiBcIlwiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfbWluaV91bS5qcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF9taW5pX2Nsb3VkLmpzJyksXG4gICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgICAgICAgICBcImxvZ2RhdGFUb1V0XCI6IHt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIm1pbmlhcHBfZGF0YVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZHB2X3VzZXJkYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3VzZXJkYXRhX21pbmkuanMnKSxcbiAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcImNhbl90b19zZW5kcHZcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvY2FuX3RvX3NlbmRwdl9taW5pLmpzJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFwiaGpsalwiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcImV0YWdcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfbWluaS5qcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVyZV90b19zZW5kXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX21pbmlfdW0uanMnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGF0X3RvX3NlbmRfbWluaV9jbG91ZC5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIm1pbmlhcHBfZGF0YVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9faGpsal91c2VyZGF0YVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91c2VyZGF0YV9taW5pLmpzJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FwaVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19hcGlfbWluaS5qcycpLFxuICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgXCJhcGx1c19sb2dfaW5qZWN0XCIsXG4gICAgICAgIFwiYXBsdXNfbWV0YV9pbmplY3RcIlxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwibWV0YV9xdWV1ZVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfcXVldWUvbWV0YV9xdWV1ZS5qcycpLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcImlzT3BlbkFwaVwiOiB0cnVlXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ19taW5pLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX3F1ZXVlXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9xdWV1ZS9hcGx1c19xdWV1ZS5qcycpLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcImlzT3BlbkFwaVwiOiB0cnVlXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhdXRvX3RyYWNrZXJfdW1cIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfdW0uanMnKSxcbiAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgIFwiaW5qZWN0X3BhZ2VfdW1cIlxuICAgICAgXVxuICAgIH1cbiAgXVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c19taW5pX2Nsb3VkX3VtX2NvbmZpZy5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfYXBwX3VtX25ldy5qc1xuICog5paw54mI6Ieq5Yqo6YeH6ZuG5bCP56iL5bqP5L+h5oGv55qE5o+S5Lu2IC0gYXBw5rOo5YWlXG4gKlxuICog6YCa6L+H6YeN5YaZd3jnmoRhcGnmnaXmqKHmi5/nlJ/lkb3lkajmnJ/vvIzku6XmraTnu5Xov4fkuInmlrnmoYbmnrblr7nnlJ/lkb3lkajmnJ/nmoTph43lhpnmnLrliLZcbiAqXG4gKiBBdXRob3JzOlxuICogICDogoblj4EgPHNpc2FuLnFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL3V0aWxzJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBjbG9uZURlZXAgPSByZXF1aXJlKCdAdXRpbHMvY2xvbmVEZWVwJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgc2Vzc2lvbk1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3VtX3Nlc3Npb25fbWFuYWdlcicpO1xudmFyIGV2ZW50TWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vZXZlbnRNYW5hZ2VyJyk7XG52YXIgcmVxdWVzdFF1ZXVlID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9yZXF1ZXN0UXVldWUnKTtcbnZhciBjYWNoZSA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vY2FjaGUnKTtcbnZhciB1bVV0aWxzID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS91dGlscycpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG5cbnZhciBBUFBfTEFVTkNIX1RZUEUgPSAwO1xuXG5mdW5jdGlvbiBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBzY2VuZSkge1xuICB2YXIgZ2xvYmFsX2FyZ3MgPSB7fTtcbiAgaWYgKHNjZW5lKSB7XG4gICAgZ2xvYmFsX2FyZ3Muc2NlbmUgPSBzY2VuZTtcbiAgfVxuICBpZiAocXVlcnkgJiYgcXVlcnkubWluaWFwcERlYnVnSWQpIHtcbiAgICBnbG9iYWxfYXJncy5kZWJ1Z0lkID0gcXVlcnkubWluaWFwcERlYnVnSWQ7XG4gIH1cbiAgZm9yICh2YXIgayBpbiBxdWVyeSkge1xuICAgIGlmIChrID09PSAnJCRfc2hhcmVfdWlkJyB8fCBrLmluZGV4T2YoJyQkX3V0bV8nKSA9PT0gMCkge1xuICAgICAgZ2xvYmFsX2FyZ3Nba10gPSBxdWVyeVtrXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGdsb2JhbF9hcmdzO1xufVxuXG5mdW5jdGlvbiBzZXNzaW9uU3RhcnQob3B0aW9ucykge1xuICBjYWNoZSgpLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICBtc2c6ICdhcGx1cy0tLS0tY2FjaGUgaW5pdCBzdWNjZXNzJ1xuICAgIH0pO1xuICB9KTtcblxuICB2YXIgbmV3T3B0aW9ucyA9IHt9O1xuICB2YXIgZGVlcENsb25lID0gY2xvbmVEZWVwKG9wdGlvbnMpO1xuICBmb3IgKHZhciBpIGluIGRlZXBDbG9uZSkge1xuICAgIGlmICh0eXBlb2YgZGVlcENsb25lW2ldID09PSAnb2JqZWN0Jykge1xuICAgICAgbmV3T3B0aW9ucyA9IHV0aWxEYXNoLmFzc2lnbihkZWVwQ2xvbmVbaV0sIG5ld09wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZGVlcENsb25lW2ldKSB7XG4gICAgICAgIG5ld09wdGlvbnNbaV0gPSBkZWVwQ2xvbmVbaV07XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJlcXVlc3RRdWV1ZSgpLmxvYWQoKTtcbiAgdmFyIGlzTmV3U2Vzc2lvbiA9IHNlc3Npb25NYW5hZ2VyKCkucmVzdW1lKG5ld09wdGlvbnMpO1xuICB2YXIgc2Vzc2lvbklkID0gc2Vzc2lvbk1hbmFnZXIoKS5nZXRDdXJyZW50U2Vzc2lvbklkKCk7XG4gIGV2ZW50TWFuYWdlcigpLnNldFNlc3Npb25JZChzZXNzaW9uSWQpO1xuICBpZiAoaXNOZXdTZXNzaW9uKSB7XG4gICAgcmVxdWVzdFF1ZXVlKCkuYWRkKHVtVXRpbHMuRGF0YVR5cGUuSEFMRl9TRVNTSU9OLCB7fSwgZnVuY3Rpb24oKSB7XG4gICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgIG1zZzogJy0tLS0tYmVmb3JlIHNlbmQgc2Vzc2lvbidcbiAgICAgIH0pO1xuICAgICAgcmVxdWVzdFF1ZXVlKCkuc2VuZCgpO1xuICAgIH0pO1xuICB9XG59O1xuXG5mdW5jdGlvbiBzZXNzaW9uRW5kKCkge1xuICBzZXNzaW9uTWFuYWdlcigpLnBhdXNlKCk7XG4gIHJlcXVlc3RRdWV1ZSgpLnNlbmQodW1VdGlscy5EYXRhVHlwZS5DTE9TRV9TRVNTSU9OLCB7fSwgZnVuY3Rpb24oKXtcbiAgICByZXF1ZXN0UXVldWUoKS5zYXZlKCk7XG4gICAgY2FjaGUoKS5zYXZlKCk7XG4gICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgbXNnOiBcIi0tLS0tYWZ0ZXIgc2VuZCBzZXNzaW9uXCJcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBpbmplY3RBcHAoKSB7XG5cbiAgdmFyIGFwcEJhayA9IEFwcDtcbiAgdmFyIGFscmVhZHlTdGFydGVkID0gZmFsc2U7XG4gIHZhciBsYW51Y2hlZCA9IGZhbHNlO1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgY29udGV4dCA9IG1pbmkuZ2V0Q29udGV4dCgpOyAgIC8vIOW5s+WPsOS4iuS4i+aWh++8miB3eOOAgWRk44CBbXnjgIF0dOOAgXN3YW5cbiAgdmFyIGZuID0ge1xuICAgIG9uTGF1bmNoOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgbWluaS5pbml0SXNUQigpO1xuICAgICAgdmFyIHF1ZXJ5ID0gb3B0aW9ucyA/IG9wdGlvbnMucXVlcnkgOiB7fTtcbiAgICAgIHZhciByZWZlcnJlckluZm8gPSBvcHRpb25zID8gb3B0aW9ucy5yZWZlcnJlckluZm8gOiB7fTtcbiAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy53ZWl4aW4ucXEuY29tL21pbmlwcm9ncmFtL2Rldi9hcGkvYmFzZS9hcHAvbGlmZS1jeWNsZS93eC5nZXRMYXVuY2hPcHRpb25zU3luYy5odG1sIyVFOCVCRiU5NCVFNSU5QiU5RSVFNiU5QyU4OSVFNiU5NSU4OCUyMHJlZmVycmVySW5mbyUyMCVFNyU5QSU4NCVFNSU5QyVCQSVFNiU5OSVBRlxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW1zIHtPYmplY3R9IHJlZmVycmVySW5mbyB7XG4gICAgICAgKiAgIGFwcElkICBzdHJpbmcgIOadpea6kOWwj+eoi+W6j+OAgeWFrOS8l+WPt+aIliBBcHAg55qEIGFwcElkXG4gICAgICAgKiAgIGV4dHJhRGF0YSAgT2JqZWN0ICDmnaXmupDlsI/nqIvluo/kvKDov4fmnaXnmoTmlbDmja7vvIxzY2VuZT0xMDM35oiWMTAzOOaXtuaUr+aMgVxuICAgICAgICogfVxuICAgICAgICovXG5cbiAgICAgIEFQUF9MQVVOQ0hfVFlQRSArPSAxO1xuXG4gICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLXNlc3Npb24tYXJncycsIHV0aWxEYXNoLmFzc2lnbihyZWZlcnJlckluZm8sIHtcbiAgICAgICAgICBzY2VuZTogb3B0aW9ucy5zY2VuZSB8fCAnJ1xuICAgICAgICB9KV1cbiAgICAgIH0pO1xuICAgICAgaWYgKHF1ZXJ5KSB7XG4gICAgICAgIHZhciBxdWVyeURhdGEgPSB7fTsgLy8gY2xvbmVEZWVwKHF1ZXJ5KTtcbiAgICAgICAgaWYgKHF1ZXJ5LnNwbSkge1xuICAgICAgICAgIGN0eC5hcGx1cy5zcG1fb3JpZ24gPSBxdWVyeS5zcG07XG4gICAgICAgICAgLy8gZGVsZXRlIHF1ZXJ5RGF0YS5zcG07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc2NlbmUpIHtcbiAgICAgICAgICBxdWVyeURhdGEuc2NlbmUgPSBvcHRpb25zLnNjZW5lO1xuICAgICAgICB9XG4gICAgICAgIGlmIChxdWVyeS5taW5pYXBwRGVidWdJZCkge1xuICAgICAgICAgIHZhciBkZWJ1Z0lkID0gcXVlcnkubWluaWFwcERlYnVnSWQudHJpbSgpO1xuICAgICAgICAgIHZhciBkZWJ1Z0luZm9zID0gZGVidWdJZC5zcGxpdCgnXycpO1xuICAgICAgICAgIHF1ZXJ5RGF0YSA9IHV0aWxEYXNoLmFzc2lnbihxdWVyeURhdGEsIHtcbiAgICAgICAgICAgIGFwbHVzX3dvcmtfbm86IGRlYnVnSW5mb3MubGVuZ3RoID4gMiA/IGRlYnVnSW5mb3NbMV0gOiBkZWJ1Z0lkLFxuICAgICAgICAgICAgYXBsdXNfdHJhY2tfZGVidWdfaWQ6IGRlYnVnSWQsXG4gICAgICAgICAgICBhcGx1c19mbGFnOiAnYXBsdXNfdGVzdCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAvLyBkZWxldGUgcXVlcnlEYXRhLm1pbmlhcHBEZWJ1Z0lkO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWV4ZGF0YScsIHF1ZXJ5RGF0YV1cbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCBxdWVyeURhdGFdXG4gICAgICAgIH0pO1xuICAgICAgICAvLyAyMDIxLTAxLTE0QOS5nemUoemcgOaxglxuICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1nbG9iYWwtYXJncycsIGdldEdsb2JhbEFyZ3MocXVlcnksIG9wdGlvbnMuc2NlbmUpXVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIG9uU2hvdzogZnVuY3Rpb24gKG9wdHMpIHtcblxuICAgICAgQVBQX0xBVU5DSF9UWVBFICs9IDE7XG4gICAgICAvLyAyMDIxLTAxLTE0QOS5nemUoemcgOaxglxuICAgICAgdmFyIHF1ZXJ5ID0gb3B0cyA/IG9wdHMucXVlcnkgOiB7fTtcbiAgICAgIHZhciBzY2VuZSA9IG9wdHMgPyBvcHRzLnNjZW5lIDogJyc7XG4gICAgICB2YXIgc3RhcnRfdHlwZTsgLy/lsI/nqIvluo/lkK/liqjnsbvlnosgXG4gICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJywgIC8vIOatpOWkhOmcgOimgeeUqHNldE1ldGFJbmZv5YGa6KaG55uW5byP5pu05paw77yM5Zug5Li65b6u5L+h5bCP56iL5bqP5Lya5pyJ57yT5a2YXG4gICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1nbG9iYWwtYXJncycsIGdldEdsb2JhbEFyZ3MocXVlcnksIHNjZW5lKV1cbiAgICAgIH0pO1xuICAgICAgaWYgKHNjZW5lKSB7XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWV4ZGF0YScsIHtcbiAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1jcHZkYXRhJywge1xuICAgICAgICAgICAgc2NlbmU6IHNjZW5lXG4gICAgICAgICAgfV1cbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLXNlc3Npb24tYXJncycsIHtcbiAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKEFQUF9MQVVOQ0hfVFlQRSA9PT0gMikge1xuICAgICAgICBzdGFydF90eXBlID0gMTtcbiAgICAgIH0gZWxzZSBpZiAoQVBQX0xBVU5DSF9UWVBFID09PSAxKSB7XG4gICAgICAgIHN0YXJ0X3R5cGUgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgIG1zZzogJ0FQUF9MQVVOQ0hfVFlQRSBzaG91bGQgbm90IHJlYWNoIHRoaXMsIHZhbHVlID0gJyArICBBUFBfTEFVTkNIX1RZUEVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFhbHJlYWR5U3RhcnRlZCkge1xuICAgICAgICAgIGFscmVhZHlTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICBzZXNzaW9uU3RhcnQob3B0cyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZ2xvYmFsQ29uZmlnID0gY3R4LmFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcbiAgICAgICAgaWYgKCFnbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgICB2YXIgcGFnZUNvZGUgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuICAgICAgICAgIGN0eC5vbkFwcFNob3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQUF9TVEFSVCwgJ1NIT1cnLCB7XG4gICAgICAgICAgICAgIC8vIHNjZW5lOiBzY2VuZSxcbiAgICAgICAgICAgICAgc3RhcnRfdHlwZTogc3RhcnRfdHlwZSxcbiAgICAgICAgICAgICAgcGFnZV9uYW1lOiBwYWdlQ29kZSB8fCBvcHRzLnBhdGggfHwgJy0nLFxuICAgICAgICAgICAgICB1cmw6IG9wdHMucGF0aCB8fCAnLSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25IaWRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGN0eC5hcGx1cy5nbG9iYWxDb25maWcgfHwge307XG4gICAgICAgIHZhciBwYWdlQ29kZSA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG4gICAgICAgIGlmICghZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4gICAgICAgICAgdmFyIHVybCA9IFBhZ2VNYW5hZ2VyLmdldEN1cnJlbnRQYWdlUGF0aCgpO1xuICAgICAgICAgIHZhciBkdXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gY3R4Lm9uQXBwU2hvd1RpbWU7XG4gICAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQUF9FTkQsICdIX09SX1UnLCB7XG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgZW5kX3R5cGU6IDAsXG4gICAgICAgICAgICAgIHBhZ2VfbmFtZTogcGFnZUNvZGUgfHwgdXJsIHx8ICctJyxcbiAgICAgICAgICAgICAgdXJsOiB1cmwgfHwgJy0nLFxuICAgICAgICAgICAgICBzdGFydF90aW1lOiBjdHgub25BcHBTaG93VGltZVxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KTsgICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBhbHJlYWR5U3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICBzZXNzaW9uRW5kKCk7XG4gICAgICB9KTtcbiAgICAgIEFQUF9MQVVOQ0hfVFlQRSA9IDA7XG4gICAgfVxuICB9O1xuXG4gIEFwcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgICBlLmFwbHVzID0gY3R4LCAvLyDms6jlhozlhajlsYDlj5jph49cbiAgICBhcHBCYWsoZSk7XG4gIH07XG5cbiAgY29udGV4dC5vbkFwcFNob3coZnVuY3Rpb24gKGUpIHtcbiAgICAvLyDpgJrov4d3eC5nZXRMYXVuY2hPcHRpb25zU3luY+aWueazle+8jOWunueOsOWvuW9uTGFudWNo55qE55uR5ZCsXG4gICAgaWYoIWxhbnVjaGVkKSB7XG4gICAgICAvLyDnmb7luqbkuI3mlK/mjIFnZXRMYXVuY2hPcHRpb25zU3luY++8jOeUqG9uU2hvd+eahG9wdGlvbnPku6Pmm79cbiAgICAgIHZhciBvcHRzID0ge307XG4gICAgICBpZihpc0Z1bmN0aW9uKGNvbnRleHQuZ2V0TGF1bmNoT3B0aW9uc1N5bmMpKSB7XG4gICAgICAgIG9wdHMgPSBjb250ZXh0LmdldExhdW5jaE9wdGlvbnNTeW5jKCkgfHwge307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRzID0gZTtcbiAgICAgIH1cbiAgICAgIGZuLm9uTGF1bmNoKG9wdHMpO1xuICAgICAgbGFudWNoZWQgPSB0cnVlO1xuICAgIH07XG4gICAgLy8gb25TaG93XG4gICAgZm4ub25TaG93KGUpO1xuICB9KSxcblxuICBjb250ZXh0Lm9uQXBwSGlkZShmdW5jdGlvbiAoKSB7XG4gICAgLy8gb25IaWRlXG4gICAgZm4ub25IaWRlKCk7XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnbXkuZ2V0UGFyZW50QXBwSWRTeW5jKCk7ID09PSAnLCBteS5nZXRQYXJlbnRBcHBJZFN5bmMoKSk7XG4gICAgICBpZiAoWydvYmplY3QnLCAnZnVuY3Rpb24nXS5pbmRleE9mKHR5cGVvZiBBcHApID4gLTEpIHtcbiAgICAgICAgaW5qZWN0QXBwKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvaW5qZWN0X2FwcF91bV9uZXcuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJlc2V0Rm46IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgIHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSA/IGFyZ3VtZW50c1sxXSA6ICcnLFxuICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdID8gYXJndW1lbnRzWzJdIDogZnVuY3Rpb24gKCkgeyB9LFxuICAgICAgaSA9IGVbdF07XG4gICAgZVt0XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBycyA9IGkgJiYgaS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBhcHDmnKzouqvnmoRmdW5jdGlvblxuICAgICAgaWYgKHJzKSB7XG4gICAgICAgIHJldHVybiBuLmNhbGwodGhpcywgcnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdGFybzF444CBdGFybzJ4IOW/hemhu+WKoOS4qumineWklueahOivreWPpW4uYXBwbHnmiY3og73miafooYzvvIzmr5TlpoJ0cnljYXRjaO+8jOWPmOmHj+WjsOaYjuetie+8jOatpOWkhOWKoOS6hnJldHVyblxuICAgICAgICByZXR1cm4gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgcmV3cml0ZUZuOiBmdW5jdGlvbihvYmosIG5hbWUsIG5ld0ZuKSB7XG4gICAgdmFyIG9sZEZuID0gb2JqW25hbWVdO1xuICAgIG9ialtuYW1lXSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBuZXdGbi5jYWxsKHRoaXMsIGUpO1xuICAgICAgb2xkRm4gJiYgb2xkRm4uY2FsbCh0aGlzLCBlKTtcbiAgICB9O1xuICB9LFxuXG4gIG9uQXBsdXNSZWFkeTogZnVuY3Rpb24gKGFwbHVzX3F1ZXVlLCBTVUJTQ1JJQkUsIGNhbGxiYWNrKSB7XG4gICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICBhY3Rpb246IFNVQlNDUklCRSxcbiAgICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1dXG4gICAgfSk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvdXRpbHMvdXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDlhYvpmobkuIDkuKpvYmplY3RcbiAqL1xuZnVuY3Rpb24gY2xvbmVEZWVwIChvYmopIHtcbiAgdmFyIHN0cjtcbiAgdmFyIG5ld29iaiA9IEFycmF5LmlzQXJyYXkob2JqKSA/IFtdIDoge307IC8vRml4IG9iai5jb250cnVjdG9yIHR5cGVFcnJvciBjb25zdHJ1Y3RvciB1bmRlZmluZWRcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2UgaWYgKEpTT04gJiYgSlNPTi5wYXJzZSkge1xuICAgIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7IC8v57O75YiX5YyW5a+56LGhXG4gICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3b2JqO1xufVxubW9kdWxlLmV4cG9ydHMgPSBjbG9uZURlZXA7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvY2xvbmVEZWVwLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDlsI/nqIvluo/lt6XlhbdcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnOyBcblxudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMuanMnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcblxuZXhwb3J0cy5nZXRDdXJyZW50UGFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG4gIHJldHVybiBwYWdlc1twYWdlcy5sZW5ndGggLSAxXSB8fCB7fTtcbn07XG5cbnZhciBfaXNUYjtcbi8vIOWNlemhtea1i+ivlemcgOimgVxuZXhwb3J0cy5yZXNldElzVEIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgX2lzVGIgPSB2YWx1ZTtcbn07XG5cbmZ1bmN0aW9uIGluaXRJc1RCICgpIHtcbiAgaWYgKHR5cGVvZiBfaXNUYiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIF9pc1RiO1xuICB9IGVsc2Uge1xuICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgdmFyIFVBID0gbmF2aWdhdG9yID8gKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnN3dXNlckFnZW50KSA6ICcnO1xuICAgICAgcmVzdWx0ID0gISEvQWxpQXBwL2kudGVzdChVQSk7XG4gICAgICBpZiAoL0FsaUFwcFxcKEFQL2kudGVzdChVQSkgfHwgL0FsaUFwcFxcKERpbmdUYWxrL2kudGVzdChVQSkgfHwgL0FsaUFwcFxcKEFNQVAvaS50ZXN0KFVBKSkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICgvQWxpQXBwXFwoS0IvaS50ZXN0KFVBKSkge1xuICAgICAgICByZXN1bHQgPSAhIS9NaXN0Ly50ZXN0KFVBKTtcbiAgICAgIH1cbiAgICAgIC8vSURFLea3mOWunS3llYblrrblupTnlKjkuIvmnJ/mnJvov5Tlm550cnVlXG4gICAgICBpZigvQWxpcGF5SURFIFRhb2Jhby8udGVzdChVQSkpe1xuICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcbiAgICAgIGlmICh0eXBlb2YgY3R4LmNhbklVc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmVzdWx0ID0gISFjdHguY2FuSVVzZSgnY2FsbFVzZXJUcmFjaycpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgX2lzVGIgPSByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdDsgIFxuICB9XG59XG5leHBvcnRzLmluaXRJc1RCID0gaW5pdElzVEI7XG5cbmZ1bmN0aW9uIGlzVEIoKSB7XG4gIGlmICh0eXBlb2YgX2lzVGIgPT09ICdib29sZWFuJykge1xuICAgIHJldHVybiAhIV9pc1RiOyAgXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGluaXRJc1RCKCk7XG4gIH1cbn1cblxudmFyIGdldFBsYXRmb3JtVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4ge1xuICAgICAgY3R4OiBkZCxcbiAgICAgIHBsYXRUeXBlOiAnZGQnLFxuICAgICAgc2RrVHlwZTogJ2RkbXAnLFxuICAgICAgbG9nRG9tYWluOiAnL2RkbV9sb2dzJ1xuICAgIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY3R4OiBteSxcbiAgICAgICAgcGxhdFR5cGU6IG15ICYmIG15LnRiID8gJ3Rhb2JhbycgOiAnbXknLFxuICAgICAgICBzZGtUeXBlOiBteSAmJiBteS50YiA/ICd0YW9iYW9tcCcgOiAnbXltcCcsXG4gICAgICAgIGxvZ0RvbWFpbjogJy9hbGlwYXltX2xvZ3MnXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY3R4OiB0dCxcbiAgICAgICAgICBwbGF0VHlwZTogJ3R0JyxcbiAgICAgICAgICBzZGtUeXBlOiAndHRtcCcsXG4gICAgICAgICAgbG9nRG9tYWluOiAnL2J5dGVkYW5jZW1fbG9ncydcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3R4OiBzd2FuLFxuICAgICAgICAgICAgcGxhdFR5cGU6ICdiZCcsXG4gICAgICAgICAgICBzZGtUeXBlOiAnYmRtcCcsXG4gICAgICAgICAgICBsb2dEb21haW46ICcvYmFpZHVtX2xvZ3MnXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBjdHg6IHd4LFxuICAgICAgICAgICAgICBwbGF0VHlwZTogJ3d4JyxcbiAgICAgICAgICAgICAgc2RrVHlwZTogJ3d4bXAnLFxuICAgICAgICAgICAgICBsb2dEb21haW46ICcvd3htX2xvZ3MnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGN0eDoge30sXG4gICAgICAgICAgICAgIHBsYXRUeXBlOiAnVU5LTk9XJyxcbiAgICAgICAgICAgICAgc2RrVHlwZTogJ1VOS05PVydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy5pc1RCID0gaXNUQjtcbmV4cG9ydHMuZ2V0UGxhdGZvcm1UeXBlID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkucGxhdFR5cGU7XG59O1xuZXhwb3J0cy5nZXRTZGtUeXBlID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkuc2RrVHlwZTtcbn07XG5leHBvcnRzLmdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG59O1xuZXhwb3J0cy5nZXRMb2dEb21haW4gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLmxvZ0RvbWFpbjtcbn07XG5cblxudmFyIEhUVFBfUkVRVUVTVCA9ICdodHRwUmVxdWVzdCc7XG52YXIgUkVRVUVTVCA9ICdyZXF1ZXN0JztcbnZhciBGTiA9IGZ1bmN0aW9uICgpIHt9O1xuXG4vKipcbiAqIOWPkemAgUdFVOivt+axglxuICogQHBhcmFtcyB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbXMge1N0cmluZ30gb3B0cyB7XG4gKiAgIHRpbWVvdXQ6IDUwMDBcbiAqIH1cbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjayB7XG4gKiAgIHRpbWVvdXQ6IDUwMDBcbiAqIH1cbiAqL1xuZXhwb3J0cy5yZXF1ZXN0ID0gZnVuY3Rpb24gKHVybCwgb3B0cywgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgdmFyIGN0eCA9IGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcbiAgaWYgKCFvcHRzKSB7XG4gICAgb3B0cyA9IHt9O1xuICB9XG4gIGlmICghaXNGdW5jdGlvbihmYWlsdXJlQ2FsbGJhY2spKSB7XG4gICAgZmFpbHVyZUNhbGxiYWNrID0gRk47XG4gIH1cbiAgaWYgKCFpc0Z1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaykpIHtcbiAgICBzdWNjZXNzQ2FsbGJhY2sgPSBGTjtcbiAgfVxuICB2YXIgbWV0aG9kTmFtZSA9IG9wdHMucmVxdWVzdE1ldGhvZE5hbWUgfHwgUkVRVUVTVDtcbiAgdmFyIHJlcSA9IGN0eFttZXRob2ROYW1lXTtcblxuICBpZiAoIWlzRnVuY3Rpb24ocmVxKSkge1xuICAgIGlmIChtZXRob2ROYW1lICE9PSBSRVFVRVNUKSB7XG4gICAgICBtZXRob2ROYW1lID0gUkVRVUVTVDtcbiAgICB9IGVsc2UgaWYgKG1ldGhvZE5hbWUgIT09IEhUVFBfUkVRVUVTVCkge1xuICAgICAgbWV0aG9kTmFtZSA9IEhUVFBfUkVRVUVTVDtcbiAgICB9XG4gICAgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuICB9XG4gIHZhciBkYXRhVHlwZSA9IG9wdHMuZGF0YVR5cGUgfHwgJ2pzb24nO1xuICB2YXIgdGltZW91dCA9IG9wdHMudGltZW91dCB8fCA1MDAwO1xuICB2YXIgbWV0aG9kID0gb3B0cy5tZXRob2QgfHwgJ0dFVCc7XG5cbiAgLy8g5aaC5p6cdXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0XG4gIHVybCA9IHV0aWwuY2FuMmh0dHBzKHVybCk7XG4gIC8vIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuICAvLyAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuICAvLyAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAvLyAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuICAvLyAgIH1cbiAgLy8gICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgLy8gfVxuICB2YXIgbXNnO1xuICBpZiAoaXNGdW5jdGlvbihyZXEpKSB7XG4gICAgdmFyIHJlcU9wdGlvbnMgPSB7XG4gICAgICB1cmw6IHVybCxcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgZGF0YVR5cGU6IGRhdGFUeXBlLFxuICAgICAgdGltZW91dDogdGltZW91dCxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgLy8gY29uc29sZSAmJiBjb25zb2xlLndhcm4oJ3JlcXVlc3QgJyArIHVybCArICcgc3VjY2VzcywgdGhlIG1zZyBpcyAnLCByZXMpO1xuICAgICAgICBzdWNjZXNzQ2FsbGJhY2socmVzKTtcbiAgICAgIH0sXG4gICAgICBmYWlsOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCdyZXF1ZXN0ICcgKyB1cmwgKyAnIGZhaWx1cmUsIHRoZSBtc2cgaXMgJywgcmVzKTtcbiAgICAgICAgZmFpbHVyZUNhbGxiYWNrKHJlcyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAodHlwZW9mIG9wdHMuZGF0YSA9PT0gJ29iamVjdCcgJiYgbWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgIHJlcU9wdGlvbnMuZGF0YSA9IG9wdHMuZGF0YTtcbiAgICAgIHJlcU9wdGlvbnMudXJsID0gcmVxT3B0aW9ucy51cmwuc3BsaXQoJz8nKVswXTtcbiAgICB9XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIF9leHRJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJlcXVlc3QtZXh0aW5mbycpO1xuICAgIGlmICh0eXBlb2YgX2V4dEluZm8gPT09ICdvYmplY3QnKSB7XG4gICAgICByZXFPcHRpb25zLl9leHRJbmZvID0gX2V4dEluZm87XG4gICAgfVxuICAgIHJlcShyZXFPcHRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlICYmIGNvbnNvbGUud2FybignY2FuIG5vdCBmaW5kIFwiJyArIG1ldGhvZE5hbWUgKyAnXCIhJyk7XG4gICAgZmFpbHVyZUNhbGxiYWNrKG1zZyk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdmdW5jdGlvbic7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2lzRnVuY3Rpb24uanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOagh+WHhuW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCcuL3V0aWxBcnJheScpO1xuLy8gdmFyIGZvcm1hdCA9IHJlcXVpcmUoJy4vZm9ybWF0Jyk7XG5cbnZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5leHBvcnRzLm1rUGxhaW5LZXkgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBzX3BsYWluX29iaiArIE1hdGgucmFuZG9tKCk7XG59O1xuZXhwb3J0cy5zX3BsYWluX29iaiA9IHNfcGxhaW5fb2JqO1xuXG4vLyAyMDE2LTA4LTI0IOeQrOWtkOmcgOaxgu+8jGV4cGFyYW1z5Y2V54us5aSE55CG77yMd2luZHZhbmXph4zpnIDopoEgQOiwi+Wjq1xuZXhwb3J0cy5ta1BsYWluS2V5Rm9yRXhwYXJhbXMgPSBmdW5jdGlvbihrZXlfcHJlZml4KSB7XG4gIHZhciBfa2V5ID0ga2V5X3ByZWZpeCB8fCBzX3BsYWluX29iajtcbiAgcmV0dXJuIF9rZXkgKyAnZXhwYXJhbXMnO1xufTtcblxuLyoqXG4gKiBhcnJheSB0byBwYXJhbVxuICog5bCG5LiA5Liq566A5Y2V55qE5pWw57uE6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI/vvIxcbiAqIOWFtuS4reaVsOe7hOS4ulxuICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuICog55qE5b2i5byP44CCXG4gKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuICogQHBhcmFtIGFyciB7QXJyYXl9XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGFycjJwYXJhbShhcnIpIHtcbiAgdmFyIGEgPSBbXSxcbiAgICBrLFxuICAgIHYsXG4gICAgaSxcbiAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICBhLnB1c2goay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMCA/IHYgOiAoayArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2KSkpO1xuICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5leHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblxuXG4vKipcbiAqIHBhcmFtIHRvIGFycmF5XG4gKiAyMDE2LTA4LTI0IOaUvuW8gO+8jOeUqOadpeWkhOeQhmV4cGFyYW1zIEDosIvlo6tcbiAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgYXJyYXkg5qC85byP77yM5aaC77yaXG4gKiBbW1wiYVwiLCBcIjFcIl0sIFtcImJcIiwgXCIyXCJdLCBbXCJjXCIsIFwiM1wiXV1cbiAqXG4gKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMucGFyYW0yYXJyID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG4gICAgaSA9IDAsIGwgPSBhLmxlbmd0aCxcbiAgICBpdGVtLFxuICAgIGFyciA9IFtdO1xuICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBhW2ldLnNwbGl0KFwiPVwiKTtcbiAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG4gIH1cblxuICByZXR1cm4gYXJyO1xufTtcblxuZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuICB2YXIgcmV0ID0ge307XG4gIHZhciBrO1xuICB2YXIgdjtcbiAgdmFyIGk7XG4gIHZhciBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICByZXRba10gPSB2O1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuLy8g5LuF5pSv5oyB5LiA57qnanNvbue7k+aehFxuZXhwb3J0cy5qc29uTGlrZVN0cjJKU09OID0gZnVuY3Rpb24oanNvblN0cikge1xuICBpZiAoIWpzb25TdHIgfHwgdHlwZW9mIGpzb25TdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIHZhciBzdHIgPSBqc29uU3RyLnJlcGxhY2UoL1snXCJ7fV0rL2csICcnKTtcbiAgdmFyIGFycjEgPSBzdHIuc3BsaXQoJywnKTsgXG4gIHZhciBhcnIyID0gW107IFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFycjEubGVuZ3RoOyBpKyspIHtcbiAgICBhcnIyLnB1c2goYXJyMVtpXS5zcGxpdCgnOicpKTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gdGhpcy5hcnIyb2JqKGFycjIpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0cy5jYW4yaHR0cHMgPSBmdW5jdGlvbih1cmwpIHtcbiAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG4gICAgdmFyIHByb3RvY2FsID0gJ2h0dHBzOic7XG4gICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG4gICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgfVxuICAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuICB9XG4gIHJldHVybiB1cmw7XG59O1xuIFxuZXhwb3J0cy5jaGVja0VtcHR5T2JqID0gZnVuY3Rpb24oZGF0YSkge1xuICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGNhY2hlID0gcmVxdWlyZSgnLi9jYWNoZScpO1xudmFyIHVsb2cgPSByZXF1aXJlKCcuL3Vsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuICB2YXIgX2luc3RhbmNlID0gbnVsbDtcbiAgdmFyIF9yZXN1bWVUaW1lID0gbnVsbDtcbiAgdmFyIF9jdXJyZW50U2Vzc2lvbiA9IG51bGw7IC8vIOW9k+WJjXNlc3Npb27lr7nosaFcblxuICBmdW5jdGlvbiBpbml0KCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3VtZTogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIG5ld1Nlc3Npb24gPSBmYWxzZTtcblxuICAgICAgICBpZiAoIV9jdXJyZW50U2Vzc2lvbikge1xuICAgICAgICAgIF9jdXJyZW50U2Vzc2lvbiA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkNVUlJFTlRfU0VTU0lPTik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIF9yZXN1bWVUaW1lID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgIGlmICghX2N1cnJlbnRTZXNzaW9uXG4gICAgICAgICAgfHwgIV9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZVxuICAgICAgICAgIHx8IF9yZXN1bWVUaW1lIC0gX2N1cnJlbnRTZXNzaW9uLmVuZF90aW1lID4gYXBsdXNTdGF0aWMuU0VTU0lPTl9JTlRFUlZBTCkge1xuICAgICAgICAgIG5ld1Nlc3Npb24gPSB0cnVlO1xuICAgICAgICAgIF9jcmVhdGVOZXdTZXNzaW9uKG9wdGlvbnMpO1xuICAgICAgICAgIHVsb2coKS52KCflvIDlp4vmlrDnmoRzZXNzaW9uKCVzKTogJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBfY3VycmVudFNlc3Npb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVsb2coKS52KCflu7bnu63kuIrkuIDmrKFzZXNzaW9uKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdTZXNzaW9uO1xuICAgICAgfSxcblxuICAgICAgLy8g5Zyob25IaWRl5pa55rOV5pe26Zet5ZCIc2Vzc2lvblxuICAgICAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX2VuZFNlc3Npb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIOiOt+WPluW9k+WJjeeahHNlc3Npb25JZO+8jOayoeacieWImei/lOWbnuepulxuICAgICAgZ2V0Q3VycmVudFNlc3Npb25JZDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKF9jdXJyZW50U2Vzc2lvbiB8fCB7fSkuaWQ7XG4gICAgICB9LFxuXG4gICAgICBnZXRDdXJyZW50U2Vzc2lvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRTZXNzaW9uO1xuICAgICAgfSxcblxuICAgICAgY2xvbmVDdXJyZW50U2Vzc2lvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2xvbmVEZWVwKF9jdXJyZW50U2Vzc2lvbik7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRVbVBhcmFtcyhxdWVyeSkge1xuICAgIHZhciBhcGx1c19xdWVyeSA9IHt9O1xuICAgIGZvciAodmFyIGkgaW4gcXVlcnkpIHtcbiAgICAgIGFwbHVzX3F1ZXJ5W2ldID0gcXVlcnlbaV07XG4gICAgfVxuXG4gICAgdWxvZygpLnYoJ3F1ZXJ5OiAnLCBxdWVyeSk7XG4gICAgcmV0dXJuIGFwbHVzX3F1ZXJ5O1xuICB9XG5cbiAgLy8g5byA5aeL5LiA5Liq5pawc2Vzc2lvblxuICBmdW5jdGlvbiBfY3JlYXRlTmV3U2Vzc2lvbihuZXdPcHRpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBwcmV2T3B0aW9ucyA9IChfY3VycmVudFNlc3Npb24gfHwge30pLm9wdGlvbnMgfHwge307XG4gICAgICBcbiAgICAgIHZhciBsYXVuY2hPcHRpb25zID0gdXRpbHMuYXNzaWduKHt9LCBfZ2V0VW1QYXJhbXMobmV3T3B0aW9ucy5xdWVyeSkpO1xuICAgICAgbGF1bmNoT3B0aW9ucy5wYXRoID0gbmV3T3B0aW9ucy5wYXRoIHx8IHByZXZPcHRpb25zLnBhdGg7XG4gICAgICBsYXVuY2hPcHRpb25zLnNjZW5lID0gbmV3T3B0aW9ucy5zY2VuZVxuICAgICAgICA/IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCkgKyAnXycgKyBuZXdPcHRpb25zLnNjZW5lXG4gICAgICAgIDogcHJldk9wdGlvbnMuc2NlbmU7XG5cbiAgICAgIHZhciByZWZlcnJlckluZm8gPSBuZXdPcHRpb25zLnJlZmVycmVySW5mbztcbiAgICAgIGlmIChyZWZlcnJlckluZm8pIHtcbiAgICAgICAgbGF1bmNoT3B0aW9ucy5yZWZlcnJlckFwcElkID0gcmVmZXJyZXJJbmZvLmFwcElkO1xuICAgICAgfVxuXG4gICAgICB1bG9nKCkudignc2Vzc2lvbiBvcHRpb25zOiAnLCBsYXVuY2hPcHRpb25zKTtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG4gICAgICB2YXIgdHMgPSBEYXRlLm5vdygpO1xuICAgICAgX2N1cnJlbnRTZXNzaW9uID0ge1xuICAgICAgICBpZDogdXRpbHMuZ2V0UmFuZG9tU3RyKDEwKSArIHRzLFxuICAgICAgICBzdGFydF90aW1lOiB0cyxcbiAgICAgICAgb3B0aW9uczogbGF1bmNoT3B0aW9ucyxcbiAgICAgICAgc3RhdGVfczogMVxuICAgICAgfTsgXG4gICAgICBpZiAoZ3ApIHtcbiAgICAgICAgX2N1cnJlbnRTZXNzaW9uWydncCddID0gZ3A7XG4gICAgICB9IFxuXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdWxvZygpLmUoJ+eUn+aIkOaWsHNlc3Npb27lpLHotKU6ICcsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOe7k+adn+W9k+WJjXNlc3Npb27vvIznlLHkuo4zMOenkuacuuWItu+8jOS4gOS4qnNlc3Npb27kvJrooqvnu5PmnZ/lpJrmrKFcbiAgZnVuY3Rpb24gX2VuZFNlc3Npb24oKSB7XG4gICAgaWYgKF9jdXJyZW50U2Vzc2lvbikge1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgX2N1cnJlbnRTZXNzaW9uLmVuZF90aW1lID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICBpZiAodHlwZW9mIF9jdXJyZW50U2Vzc2lvbi5kdXJhdGlvbiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgX2N1cnJlbnRTZXNzaW9uLmR1cmF0aW9uID0gMDtcbiAgICAgIH1cbiAgICAgIF9jdXJyZW50U2Vzc2lvbi5kdXJhdGlvbiA9IF9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZSAtIF9yZXN1bWVUaW1lO1xuICAgICAgX2N1cnJlbnRTZXNzaW9uLnN0YXRlX3MgPSAwO1xuICAgICAgY2FjaGUoKS5zZXQoYXBsdXNTdGF0aWMuQ1VSUkVOVF9TRVNTSU9OLCBfY3VycmVudFNlc3Npb24pO1xuXG4gICAgICB1bG9nKCkudign6YCA5Ye65Lya6K+dKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFfaW5zdGFuY2UpIHtcbiAgICAgIF9pbnN0YW5jZSA9IGluaXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfTtcblxufSkoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS91bV9zZXNzaW9uX21hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciBqc29uVXRpbCA9IHJlcXVpcmUoJy4vanNvblV0aWwnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnLi91bG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX25hbWUgPSAnJztcbiAgdmFyIF9kYXRhID0gbnVsbDtcbiAgdmFyIF9sb2FkZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBDYWNoZSgpIHtcbiAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdGhpcy5sb2FkID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICBpZiAoIV9kYXRhKSB7XG4gICAgICAgIF9uYW1lID0gJ2FwbHVzX2NhY2hlXycgKyAoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcEtleScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJZCcpKTtcbiAgICAgICAgY3R4LmdldFN0b3JhZ2Uoe1xuICAgICAgICAgIGtleTogX25hbWUsXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkge1xuICAgICAgICAgICAgICBfZGF0YSA9IGpzb25VdGlsLnBhcnNlKHJlcy5kYXRhKSB8fCB7fTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIF9kYXRhID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGN0eC5yZW1vdmVTdG9yYWdlKHtcbiAgICAgICAgICAgICAga2V5OiBfbmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmFpbDogZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgdWxvZygpLncoX25hbWUgKyAnOiAnICsgZS5lcnJNc2cpO1xuICAgICAgICAgICAgX2RhdGEgPSB7fTtcbiAgICAgICAgICAgIF9sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuICAgICAgICAgICAgICBrZXk6IF9uYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5yZW1vdmVTdG9yYWdlKHtcbiAgICAgICAgICBrZXk6IF9uYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX2RhdGEpIHtcbiAgICAgICAgY3R4LnNldFN0b3JhZ2Uoe1xuICAgICAgICAgIGtleTogX25hbWUsXG4gICAgICAgICAgZGF0YToganNvblV0aWwuc3RyaW5nZnkoX2RhdGEpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoX2RhdGEpIHtcbiAgICAgICAgX2RhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiAoX2RhdGEgfHwge30pW2tleV07XG4gICAgfTtcblxuICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKF9kYXRhICYmIF9kYXRhW2tleV0pIHtcbiAgICAgICAgZGVsZXRlIF9kYXRhW2tleV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9kYXRhO1xuICAgIH07XG5cbiAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgX2RhdGEgPSBudWxsO1xuICAgIH07XG5cbiAgICB0aGlzLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuZ2V0KGtleSk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX2xvYWRlZDtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIV9pbnN0YW5jZSkge1xuICAgICAgX2luc3RhbmNlID0gbmV3IENhY2hlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfTtcbn0pKCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vY2FjaGUuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuZXhwb3J0cy5zdHJpbmdmeSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgaWYgKGRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn07XG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbihqc29uKSB7XG4gIGlmIChqc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0cy5wYXJzZVRvQXJyYXkgPSBmdW5jdGlvbihqc29uKSB7XG4gIGlmIChqc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiBbXTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vanNvblV0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG52YXIgTE9HX1BSRUZJWCA9ICdbQVBMVVNdIC0tICc7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG4gIHZhciBfZGVidWcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBVTG9nKCkge1xuICAgIHRoaXMuc2V0RGVidWcgPSBmdW5jdGlvbiAoZGVidWcpIHtcbiAgICAgIF9kZWJ1ZyA9IGRlYnVnO1xuICAgIH07XG5cbiAgICB0aGlzLmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBMT0dfUFJFRklYICsgYXJndW1lbnRzWzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmRlYnVnLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUuaW5mby5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIGVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZW1wdHlcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnNvbGUudGFibGUuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnRpcF93ID0gZnVuY3Rpb24gKG1zZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgJyVjICcgKyBMT0dfUFJFRklYICsgbXNnLFxuICAgICAgICAgICdiYWNrZ3JvdW5kOnJlZDsgcGFkZGluZzogNHB4OyBwYWRkaW5nLXJpZ2h0OiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY29sb3I6ICNmZmY7J1xuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBlXG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZXJyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5yZXBlYXQgPSBmdW5jdGlvbihjaGFyKSB7XG4gICAgICB2YXIgcmVzID0gY2hhcjtcbiAgICAgIHdoaWxlIChyZXMubGVuZ3RoIDwgODYpIHtcbiAgICAgICAgcmVzID0gcmVzICsgY2hhcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKF9pbnN0YW5jZSA9PT0gbnVsbCkge1xuICAgICAgX2luc3RhbmNlID0gbmV3IFVMb2coKTtcbiAgICB9XG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfTtcbn0pKCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vdWxvZy5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZXhwb3J0cy5nZXRSYW5kb21TdHIgPSBmdW5jdGlvbihsZW4pIHtcbiAgdmFyIHN0ciA9ICcnO1xuICB2YXIgYXJyID0gWycwJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCcsICdpJywgJ2onLCAnaycsICdsJywgJ20nLCAnbicsICdvJywgJ3AnLCAncScsICdyJywgJ3MnLCAndCcsICd1JywgJ3YnLCAndycsICd4JywgJ3knLCAneicsICdBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBOdW1iZXIobGVuKTsgaSsrKSB7XG4gICAgdmFyIHBvcyA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChhcnIubGVuZ3RoIC0gMSkpO1xuICAgIHN0ciArPSBhcnJbcG9zXTtcbiAgfVxuICByZXR1cm4gc3RyO1xufTtcblxuZXhwb3J0cy5zdGFydHNXaXRoID0gZnVuY3Rpb24oc3RyLCBzZWFyY2hWYWwpIHtcbiAgaWYgKCFzdHIgfHwgIXNlYXJjaFZhbCB8fCBzZWFyY2hWYWwubGVuZ3RoID09PSAwIHx8IHNlYXJjaFZhbC5sZW5ndGggPiBzdHIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBzdHIuc3Vic3RyKDAsIHNlYXJjaFZhbC5sZW5ndGgpID09PSBzZWFyY2hWYWw7XG59O1xuXG5leHBvcnRzLmFzc2lnbiA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gIH1cblxuICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIG5leHRLZXkpKSB7XG4gICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59O1xuXG4vLyAxLmVrduS4reWtmOWcqOinhOWImeS4jeWQiOazleaDheWGte+8jOS4ouW8g+aVtOadoeS6i+S7tlxuLy8gMi5ldmVudGlk6ZW/5bqm5LiN6IO96LaF6L+HMTI45Liq5a2X56ymXG4vLyAzLmtleemVv+W6puS4jeiDvei2hei/hzI1NuS4quWtl+esplxuLy8gNC7mr4/kuKpldmVudOaQuuW4pmtleeS4quaVsOS4jeiDvei2hei/hzEwMOS4qlxuZXhwb3J0cy5jaGVja0V2ZW50ID0gZnVuY3Rpb24oZXZlbnRJZCwgcHJvcGVydGllcykge1xuICB2YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbiAgdmFyIHVsb2cgPSByZXF1aXJlKCcuLi9saWJfdW0vdWxvZycpO1xuICBpZiAoIShldmVudElkICYmIHR5cGVvZiBldmVudElkID09PSAnc3RyaW5nJykpIHtcbiAgICB1bG9nKCkuZSgncGxlYXNlIGNoZWNrIHRyYWNrRXZlbnQgaWQuIGlkIHNob3VsZCBiZSBcInN0cmluZ1wiIGFuZCBub3QgbnVsbCcpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIOS/neeVmeWFs+mUruWtl1xuICB2YXIgcmVzZXJ2ZVdvcmRzID0gWydpZCcsICdkdSddO1xuICB2YXIgcmVzZXJ2ZVdvcmRNYXAgPSB7fTtcblxuICByZXNlcnZlV29yZHMuZm9yRWFjaChmdW5jdGlvbiAod29yZCkge1xuICAgIHJlc2VydmVXb3JkTWFwW3dvcmRdID0gMTtcbiAgfSk7XG5cbiAgLy8g5qOA5p+lZXZlbnRJZOaYr+WQpuS4juS/neeVmeWFs+mUruWtl+WGsueqgVxuICBpZiAocmVzZXJ2ZVdvcmRNYXBbZXZlbnRJZF0pIHtcbiAgICB1bG9nKCkuZSgnZXZlbnRJZOS4jeiDveS4juS7peS4i+S/neeVmeWtl+WGsueqgTogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChldmVudElkLmxlbmd0aCA+IGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCkge1xuICAgIHVsb2coKS5lKCdUaGUgbWF4aW11bSBsZW5ndGggb2YgZXZlbnQgaWQgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX0VWRU5USURfTEVOR1RIKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBwcm9wZXJ0aWVz55qE5ZCI5rOV57G75Z6L5Li6IHN0cmluZyB8IG9iamVjdChub3QgaW5jbHVkZSBBcnJheSlcbiAgaWYgKHByb3BlcnRpZXNcbiAgICAmJiAodHlwZW9mIHByb3BlcnRpZXMgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkocHJvcGVydGllcykpXG4gICAgJiYgdHlwZW9mIHByb3BlcnRpZXMgIT09ICdzdHJpbmcnKSB7XG4gICAgdWxvZygpLmUoJ3BsZWFzZSBjaGVjayB0cmFja0V2ZW50IHByb3BlcnRpZXMuIHByb3BlcnRpZXMgc2hvdWxkIGJlIHN0cmluZyBvciBvYmplY3Qobm90IGluY2x1ZGUgQXJyYXkpJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBjb3VudCA9IDA7XG4gICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkpIHtcbiAgICAgICAgaWYgKGtleS5sZW5ndGggPiBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCkge1xuICAgICAgICAgIHVsb2coKS5lKCdUaGUgbWF4aW11bSBsZW5ndGggb2YgcHJvcGVydHkga2V5IHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY291bnQgPj0gYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWVNfQ09VTlQpIHtcbiAgICAgICAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gY291bnQgb2YgcHJvcGVydGllcyBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc2VydmVXb3JkTWFwW2tleV0pIHtcbiAgICAgICAgICB1bG9nKCkuZSgn5bGe5oCn5Lit55qEa2V55LiN6IO95LiO5Lul5LiL5L+d55WZ5a2X5Yay56qBOiAnICsgcmVzZXJ2ZVdvcmRzLmpvaW4oJywnKSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY291bnQgKz0gMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xuXG5leHBvcnRzLmRlbGV0ZUluZm8gPSBmdW5jdGlvbihnb2tleSwgYXJyKSB7XG4gIGVhY2goYXJyLCBmdW5jdGlvbih2KSB7XG4gICAgZGVsZXRlIGdva2V5W3ZdO1xuICB9KTtcbiAgcmV0dXJuIGdva2V5O1xufTtcblxuZXhwb3J0cy5jaGVja0VtcHR5T2JqID0gZnVuY3Rpb24oZGF0YSkge1xuICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuXG5leHBvcnRzLkRhdGFUeXBlID0ge1xuICBIQUxGX1NFU1NJT046ICdoYWxmX3Nlc3Npb24nLFxuICBDTE9TRV9TRVNTSU9OOiAnY2xvc2Vfc2Vzc2lvbicsXG4gIEVLVjogJ2VrdicsXG4gIEVOVEVSX1BBR0U6ICdlbnRlcl9wYWdlJyxcbiAgTEVBVkVfUEFHRTogJ2xlYXZlX3BhZ2UnXG59O1xuXG5leHBvcnRzLkFjY2Vzc1R5cGUgPSB7XG4gIE1PQklMRV9ORVRXT1JLXzJHOiAnMmcnLFxuICBNT0JJTEVfTkVUV09SS18zRzogJzNnJyxcbiAgTU9CSUxFX05FVFdPUktfNEc6ICc0ZycsXG4gIE1PQklMRV9ORVRXT1JLX05PTkU6ICdub25lJ1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyciwgZm4pIHtcbiAgdmFyIGk7XG4gIHZhciBsID0gYXJyLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBycyA9IGZuKGFycltpXSwgaSk7XG4gICAgaWYgKHJzID09PSAnYnJlYWsnKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZWFjaC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGNhY2hlID0gcmVxdWlyZSgnLi9jYWNoZScpO1xudmFyIHVsb2cgPSByZXF1aXJlKCcuL3Vsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuICB2YXIgX2luc3RhbmNlO1xuICB2YXIgX3Nlc3Npb25JZDtcbiAgdmFyIF9tZW1vcnlFdmVudHMgPSBbXTtcblxuICAvLyDlnKjliJvlu7pzZXNzaW9uSWTliY3mt7vliqDnmoTkuovku7ZcbiAgdmFyIF9ub1Nlc3Npb25FdmVudHMgPSBbXTtcblxuICBmdW5jdGlvbiBfY2FjaGVFdmVudHMoKSB7XG4gICAgaWYgKF9tZW1vcnlFdmVudHMubGVuZ3RoKSB7XG4gICAgICB2YXIgZWt2cyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkVLVlMpO1xuICAgICAgXG4gICAgICAvLyDmnKzlnLDmnIDlpJrlrZjlgqggRVZFTlRfTUFYX0NPVU5UIOadoeaVsOaNru+8jOOAjOWkmuS9meaVsOaNruOAjeaaguaXtuWFiOaKm+W8g1xuICAgICAgaWYgKF9nZXRDYWNoZUV2ZW50c0xlbmd0aChla3ZzKSArIF9tZW1vcnlFdmVudHMubGVuZ3RoIDw9IGFwbHVzU3RhdGljLkVWRU5UX01BWF9DT1VOVCkge1xuICAgICAgICBla3ZzID0gX2J1aWxkRWt2cyhla3ZzLCBfbWVtb3J5RXZlbnRzKTtcbiAgICAgICAgXG4gICAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLkVLVlMsIGVrdnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9idWlsZEVrdnMoZWt2cywgbWVtb3J5RXZlbnRzKSB7XG4gICAgZWt2cyA9IGVrdnMgfHwge307XG4gICAgdmFyIGV2ZW50cyA9IGVrdnNbX3Nlc3Npb25JZF07XG4gICAgaWYgKGlzQXJyYXkoZXZlbnRzKSAmJiBldmVudHMubGVuZ3RoKSB7XG4gICAgICBla3ZzW19zZXNzaW9uSWRdID0gZXZlbnRzLmNvbmNhdChtZW1vcnlFdmVudHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBla3ZzW19zZXNzaW9uSWRdID0gW10uY29uY2F0KG1lbW9yeUV2ZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVrdnM7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0Q2FjaGVFdmVudHNMZW5ndGgoZXZlbnRzTWFwKSB7XG4gICAgdmFyIGxlbiA9IDA7XG4gICAgZm9yICh2YXIga2V5IGluIGV2ZW50c01hcCkge1xuICAgICAgaWYgKGlzQXJyYXkoZXZlbnRzTWFwW2tleV0pKSB7XG4gICAgICAgIGxlbiArPSBldmVudHNNYXBba2V5XS5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZW47XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHJldHVybiB7XG4gICAgICBhZGRFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICghZXZlbnQpIHJldHVybjtcbiAgICAgICAgaWYgKF9zZXNzaW9uSWQpIHtcbiAgICAgICAgICBfbWVtb3J5RXZlbnRzLnVuc2hpZnQoZXZlbnQpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChfbWVtb3J5RXZlbnRzLmxlbmd0aCA+IGFwbHVzU3RhdGljLk1FTU9SWV9NQVhfQ09VTlQpIHtcbiAgICAgICAgICAgIF9jYWNoZUV2ZW50cyhfc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWxvZygpLncoJ3Nlc3Npb24gaWQgaXMgbnVsbDogJywgX3Nlc3Npb25JZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy51bnNoaWZ0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgc2V0U2Vzc2lvbklkOiBmdW5jdGlvbiAoc2Vzc2lvbklkKSB7XG4gICAgICAgIF9zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cbiAgICAgICAgdWxvZygpLnYoJ3NldFNlc3Npb25JZDogJywgX3Nlc3Npb25JZCk7XG4gICAgICAgIGlmIChpc0FycmF5KF9ub1Nlc3Npb25FdmVudHMpICYmIF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoICYmIF9zZXNzaW9uSWQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnQoX25vU2Vzc2lvbkV2ZW50c1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBnZXRFa3ZzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBla3ZzID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuRUtWUyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoX21lbW9yeUV2ZW50cyAmJiBfbWVtb3J5RXZlbnRzLmxlbmd0aCkge1xuICAgICAgICAgIGVrdnMgPSBfYnVpbGRFa3ZzKGVrdnMsIF9tZW1vcnlFdmVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBla3ZzO1xuICAgICAgfSxcblxuICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FjaGUoKS5yZW1vdmUoYXBsdXNTdGF0aWMuRUtWUyk7XG4gICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBfaW5zdGFuY2UgPSBpbml0KCk7XG4gICAgfVxuICAgIHJldHVybiBfaW5zdGFuY2U7XG4gIH07XG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL2V2ZW50TWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvaXNBcnJheS5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIEhlYWRlciA9IHJlcXVpcmUoJy4vdW1faGVhZGVyJyk7XG52YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnLi91bG9nJyk7XG52YXIgYnVpbGRCb2R5ID0gcmVxdWlyZSgnLi9ib2R5QnVpbGRlcicpO1xudmFyIHJlcXVlc3QgPSByZXF1aXJlKCcuL3JlcXVlc3QnKTtcbnZhciBRdWV1ZSA9IHJlcXVpcmUoJy4vcXVldWUnKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcblxudmFyIE1BWF9RVUVVRV9DT1VOVCA9IDUwOyAvLyDkuLrpmLLmraLlm6DnvZHnu5zlvILluLjlr7zoh7TnvJPlrZjov4flpKfvvIzorr7nva7nvJPlrZjkuKrmlbDkuIrpmZBcblxubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXsgXG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX3J1bm5pbmcgPSBmYWxzZTtcbiAgdmFyIF9mYWlsUmVxdWVzdHMgPSBbXTtcbiAgdmFyIF9xdWV1ZSA9IG5ldyBRdWV1ZShNQVhfUVVFVUVfQ09VTlQpO1xuXG4gIGZ1bmN0aW9uIF9lbnF1ZXVlUmVxdWVzdChkYXRhVHlwZSwgb3B0aW9ucywgY2IpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZGF0YSA9IGJ1aWxkQm9keShkYXRhVHlwZSk7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIGNsaWVudCA9IGFwbHVzLl9hcGx1c19jbGllbnQgfHwge307XG4gICAgICBkYXRhLmhlYWRlciA9IHV0aWxEYXNoLmFzc2lnbihkYXRhLmhlYWRlciwgSGVhZGVyLmdldE5ldEluZm8oY2xpZW50KSk7XG4gICAgICBkYXRhLm5vQ2FjaGUgPSBvcHRpb25zLm5vQ2FjaGU7XG4gICAgICBfcXVldWUuZW5xdWV1ZShkYXRhKTtcbiAgICB9XG4gICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcbiAgfVxuICBmdW5jdGlvbiBfc2VuZFF1ZXVlKGNvbXBsZXRlZENhbGxiYWNrKSB7XG4gICAgdmFyIGRhdGEgPSBfcXVldWUuZnJvbnQoKTtcbiAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9xdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICBfc2VuZFF1ZXVlKGNvbXBsZXRlZENhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgdmFyIGZhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyDlj5HpgIHlpLHotKXliJnlsIbor6XmnaHmlbDmja7mt7vliqDliLDpmJ/liJflsL7pg6jvvIzpmLLmraLlvbHlk43lkI7nu63mlbDmja7nmoTlj5HpgIFcbiAgICAgIHZhciBpdGVtID0gX3F1ZXVlLmRlcXVldWUoKTtcbiAgICAgIGl0ZW0gJiYgKCFpdGVtLm5vQ2FjaGUpICYmIF9mYWlsUmVxdWVzdHMucHVzaChpdGVtKTtcbiAgICAgIF9zZW5kUXVldWUoY29tcGxldGVkQ2FsbGJhY2spO1xuICAgIH07XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHJlcXVlc3QoZGF0YSwgc3VjY2VzcywgZmFpbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9wcm9jZXNzRmFpbFJlcXVlc3RzKCk7XG4gICAgICBjb21wbGV0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9wcm9jZXNzRmFpbFJlcXVlc3RzKCkge1xuICAgIC8vIOWPkemAgeWujOaIkOWQjuWwhuWksei0peeahOivt+axgumHjeaWsOa3u+WKoOWIsOmYn+WIl+S4rVxuICAgIF9mYWlsUmVxdWVzdHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgX3F1ZXVlLmVucXVldWUoaXRlbSk7XG4gICAgfSk7XG4gICAgX2ZhaWxSZXF1ZXN0cy5sZW5ndGggPSAwO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0U2VuZChjb21wbGV0ZWRDYWxsYmFjaykge1xuICAgIGlmIChfcnVubmluZykge1xuICAgICAgdWxvZygpLmkoJ+mYn+WIl+ato+WcqOWPkemAgeS4rScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfcnVubmluZyA9IHRydWU7XG4gICAgLy8g5ZyodGFybzF444CBdGFybzJ45qGG5p625Lit77yM5b+F6aG76YCa6L+H5Y+Y6YeP5aOw5piO55qE5pa55byP5Lyg5YWl77yM5ZCm5YiZX3NlbmRRdWV1ZemYu+Whnu+8jOWbnuiwg+aXoOazlemHjee9rl9ydW5uaW5n77yM5a+86Ie05pel5b+X5Y+R6YCB5LiN5Ye677yb5Y6f5Zug5LiN5piOXG4gICAgLy8g5aaC5p6c5Y675o6JX3J1bm5pbmfnmoTor53vvIzkvJrlr7zoh7Tph43lpI3kuIrmiqVzZXNzaW9u5pel5b+XXG4gICAgdmFyIGNiID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3J1bm5pbmcgPSBmYWxzZTtcbiAgICAgIGlzRnVuY3Rpb24oY29tcGxldGVkQ2FsbGJhY2spICYmIGNvbXBsZXRlZENhbGxiYWNrKCk7XG4gICAgfTtcbiAgICBfc2VuZFF1ZXVlKGNiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3RRdWV1ZSgpIHtcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAoZGF0YVR5cGUsIG9wdGlvbnMsIGNvbXBsZXRlZENhbGxiYWNrKSB7XG4gICAgICBpZiAoZGF0YVR5cGUpIHtcbiAgICAgICAgdGhpcy5hZGQoZGF0YVR5cGUsIG9wdGlvbnMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfc3RhcnRTZW5kKGNvbXBsZXRlZENhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfc3RhcnRTZW5kKGNvbXBsZXRlZENhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hZGQgPSBmdW5jdGlvbiAoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKSB7XG4gICAgICBfZW5xdWV1ZVJlcXVlc3QoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKTtcbiAgICB9O1xuXG4gICAgdGhpcy5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGl0ZW1zID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuUkVRVUVTVFMpO1xuICAgICAgaWYgKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCkge1xuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgX3F1ZXVlLmVucXVldWUoaXRlbSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY2FjaGUoKS5yZW1vdmUoYXBsdXNTdGF0aWMuUkVRVUVTVFMpO1xuICAgIH07XG5cbiAgICB0aGlzLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5SRVFVRVNUUywgY2xvbmVEZWVwKF9xdWV1ZS5pdGVtcygpKSk7XG4gICAgICBfcXVldWUuY2xlYXIoKTsgLy8g5LiA5a6a6KaB5YWI5L+d5a2Y5YaN5riF56m677yM5ZCm5YiZ5L+d5a2Y55qE5rC46L+c5piv56m65pWw5o2uXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFfaW5zdGFuY2UpIHtcbiAgICAgIF9pbnN0YW5jZSA9IG5ldyBSZXF1ZXN0UXVldWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfTtcbn0pKCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vcmVxdWVzdFF1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSAxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBjYWNoZSA9IHJlcXVpcmUoJy4vY2FjaGUnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG5leHBvcnRzLmdldE5ldEluZm8gPSBmdW5jdGlvbihjbGllbnQpe1xuICB2YXIgcmVzdWx0ID0ge307XG4gIHZhciBhY2Nlc3MgPSBjbGllbnQubmV0d29ya1R5cGU7XG4gIGlmIChhY2Nlc3MgPT09ICdub25lJykge1xuICAgIGFjY2VzcyA9ICd1bmtub3duJztcbiAgfVxuXG4gIGFjY2VzcyA9IGFjY2VzcyA/IGFjY2Vzcy50b0xvd2VyQ2FzZSgpIDogJyc7XG4gIHN3aXRjaCAoYWNjZXNzKSB7XG4gIGNhc2UgdXRpbHMuQWNjZXNzVHlwZS5NT0JJTEVfTkVUV09SS180RzpcbiAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnTFRFJztcbiAgICByZXN1bHQuYWNjZXNzID0gJzRHJztcbiAgICBicmVhaztcbiAgY2FzZSB1dGlscy5BY2Nlc3NUeXBlLk1PQklMRV9ORVRXT1JLXzNHOlxuICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdDRE1BJztcbiAgICByZXN1bHQuYWNjZXNzID0gJzNHJztcbiAgICBicmVhaztcbiAgY2FzZSB1dGlscy5BY2Nlc3NUeXBlLk1PQklMRV9ORVRXT1JLXzJHOlxuICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdHUlBTJztcbiAgICByZXN1bHQuYWNjZXNzID0gJzJHJztcbiAgICBicmVhaztcbiAgZGVmYXVsdDpcbiAgICByZXN1bHQuYWNjZXNzID0gYWNjZXNzO1xuICAgIGRlbGV0ZSByZXN1bHQuYWNjZXNzX3N1YnR5cGU7XG4gICAgYnJlYWs7XG4gIH07XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydHMuZ2V0SGVhZGVySW5mbyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaGVhZGVyID0ge307XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblxuICB2YXIgZ2xvYmFsQ29uZmlnID0gYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuICB2YXIgY2xpZW50ID0gYXBsdXMuX2FwbHVzX2NsaWVudCB8fCB7fTtcblxuICB2YXIgZGF0YSA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuICBpZiAoZGF0YSkge1xuICAgIGhlYWRlci5pbXByaW50ID0gZGF0YTtcbiAgfVxuXG4gIGhlYWRlci5kZXZpY2VfdHlwZSA9ICdQaG9uZSc7XG4gIGhlYWRlci5zZGtfdmVyc2lvbiA9IGdsb2JhbENvbmZpZy5sdmVyO1xuICBoZWFkZXIuYXBwa2V5ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcEtleScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJZCcpO1xuICBoZWFkZXIuZGV2aWNlX2luZm8gPSAnJztcbiAgaGVhZGVyLmFwcGlkID0gY2xpZW50LmFwcElkO1xuICBoZWFkZXIuYXBwX2VudiA9IGNsaWVudC5hcHBFbnY7XG4gIGhlYWRlci5hcHBfdmVyc2lvbiA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBWZXJzaW9uJykgfHwgJ2RldnRvb2xzJztcblxuICB2YXIgZ2xvYmFsX2FyZ3MgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnKTtcbiAgaWYgKGdsb2JhbF9hcmdzICYmIGdsb2JhbF9hcmdzLmRlYnVnSWQpIHtcbiAgICBoZWFkZXIubWluaWFwcERlYnVnSWQgPSBnbG9iYWxfYXJncy5kZWJ1Z0lkO1xuICB9XG5cbiAgdmFyIHN5c3RlbUluZm8gPSBjbGllbnQgfHwge307XG4gIHN5c3RlbUluZm8uc2FmZUFyZWEgPSBzeXN0ZW1JbmZvLnNhZmVBcmVhIHx8IHt9O1xuXG4gIHZhciBtb2RlbCA9IHN5c3RlbUluZm8ubW9kZWwgfHwgJyc7XG4gIHZhciBwbGF0Zm9ybSA9IHN5c3RlbUluZm8ucGxhdGZvcm0gfHwgJyc7XG4gIHZhciBicmFuZCA9IHN5c3RlbUluZm8uYnJhbmQgfHwgJyc7XG4gIHZhciBicmFuZEwgPSBicmFuZC50b0xvd2VyQ2FzZSgpO1xuXG4gIGhlYWRlci5zZGtfdHlwZSA9IG1pbmkuZ2V0U2RrVHlwZSgpO1xuICBoZWFkZXIucGxhdGZvcm0gPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuICBoZWFkZXIucGxhdGZvcm1fc2RrX3ZlcnNpb24gPSBzeXN0ZW1JbmZvLlNES1ZlcnNpb247XG4gIGhlYWRlci5wbGF0Zm9ybV92ZXJzaW9uID0gc3lzdGVtSW5mby5wbGF0Zm9ybVZlcnNpb247XG4gICAgXG4gIHZhciB3ID0gTWF0aC5yb3VuZChzeXN0ZW1JbmZvLnNjcmVlbldpZHRoICogc3lzdGVtSW5mby5waXhlbFJhdGlvKTtcbiAgdmFyIGggPSBNYXRoLnJvdW5kKHN5c3RlbUluZm8uc2NyZWVuSGVpZ2h0ICogc3lzdGVtSW5mby5waXhlbFJhdGlvKTtcbiAgaGVhZGVyLnJlc29sdXRpb24gPSB3ID4gaCA/IHcgKyAnKicgKyBoIDogaCArICcqJyArIHc7XG5cbiAgaGVhZGVyLnBpeGVsX3JhdGlvID0gc3lzdGVtSW5mby5waXhlbFJhdGlvO1xuICBoZWFkZXIub3MgPSBwbGF0Zm9ybTtcbiAgaGVhZGVyLmZvbnRfc2l6ZV9zZXR0aW5nID0gc3lzdGVtSW5mby5mb250U2l6ZVNldHRpbmc7XG4gIGhlYWRlci5kZXZpY2VfbW9kZWwgPSBtb2RlbDsgLy8g6K6+5aSH5Z6L5Y+3XG4gIGhlYWRlci5kZXZpY2VfYnJhbmQgPSBicmFuZDsgLy8g6K6+5aSH55Sf5Lqn5ZWGXG4gIC8vIF9oZWFkZXIuY2hhbm5lbCA9IGJyYW5kTDsgLy8g6L+Z6YeM5rig6YGT5pqC5pe25YWI55SoIOeUn+S6p+WVhueahOWQjeWtl1xuICBoZWFkZXIuZGV2aWNlX21hbnVmYWN0dXJlciA9IGJyYW5kTDtcbiAgaGVhZGVyLmRldmljZV9tYW51aWQgPSBtb2RlbDsgLy8g6K6+5aSH5ZOB54mML+Wei+WPt1xuICBoZWFkZXIuZGV2aWNlX25hbWUgPSBtb2RlbDsgLy8g5YaF6YOo5Lqn5ZOB5Luj5Y+3XG4gIGhlYWRlci5vc192ZXJzaW9uID0gc3lzdGVtSW5mby5vc192ZXJzaW9uOyAvLyBvc+eJiOacrOWPt1xuICBoZWFkZXIubGFuZ3VhZ2UgPSBzeXN0ZW1JbmZvLmxhbmd1YWdlOyAvLyDor63oqIDvvIx6aFxuXG4gIHZhciBuZXRJbmZvID0gdGhpcy5nZXROZXRJbmZvKGNsaWVudCk7XG4gIGhlYWRlci5hY2Nlc3MgPSBuZXRJbmZvLmFjY2VzcztcbiAgaWYgKG5ldEluZm8uYWNjZXNzX3N1YnR5cGUpIHtcbiAgICBoZWFkZXIuYWNjZXNzX3N1YnR5cGUgPSBuZXRJbmZvLmFjY2Vzc19zdWJ0eXBlO1xuICB9XG5cbiAgcmV0dXJuIGhlYWRlcjtcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3VtX2hlYWRlci5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHNlc3Npb25NYW5hZ2VyID0gcmVxdWlyZSgnLi91bV9zZXNzaW9uX21hbmFnZXInKTtcbnZhciBldmVudE1hbmFnZXIgPSByZXF1aXJlKCcuL2V2ZW50TWFuYWdlcicpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGF0YVR5cGUpIHtcbiAgdmFyIGRhdGEgPSBudWxsO1xuICBzd2l0Y2ggKGRhdGFUeXBlKSB7XG4gIGNhc2UgdXRpbHMuRGF0YVR5cGUuSEFMRl9TRVNTSU9OOlxuICAgIGRhdGEgPSBfYnVpbGRIYWxmU2Vzc2lvbigpO1xuICAgIGJyZWFrO1xuICBjYXNlIHV0aWxzLkRhdGFUeXBlLkNMT1NFX1NFU1NJT046XG4gICAgZGF0YSA9IF9idWlsZENsb3NlU2Vzc2lvbigpO1xuICAgIGJyZWFrO1xuICBjYXNlIHV0aWxzLkRhdGFUeXBlLkVLVjpcbiAgICBkYXRhID0gX2J1aWxkRWt2KCk7XG4gICAgYnJlYWs7XG4gIGRlZmF1bHQ6XG4gICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRIYWxmU2Vzc2lvbigpIHtcbiAgdmFyIGRhdGEgPSBudWxsO1xuICB2YXIgc2Vzc2lvbiA9IHNlc3Npb25NYW5hZ2VyKCkuY2xvbmVDdXJyZW50U2Vzc2lvbigpO1xuICBpZiAoc2Vzc2lvbikge1xuICAgIGRhdGEgPSB7XG4gICAgICBoZWFkZXI6IHtcbiAgICAgICAgc3Q6ICcxJ1xuICAgICAgfSxcbiAgICAgIGFuYWx5dGljczoge1xuICAgICAgICBzZXNzaW9uczogW3Nlc3Npb25dXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufTtcblxuZnVuY3Rpb24gX2J1aWxkQ2xvc2VTZXNzaW9uKCkge1xuICB2YXIgZGF0YSA9IG51bGw7XG5cbiAgdmFyIGFuYWx5dGljcyA9IHt9O1xuXG4gIHZhciBzZXNzaW9uID0gc2Vzc2lvbk1hbmFnZXIoKS5jbG9uZUN1cnJlbnRTZXNzaW9uKCk7XG4gIGlmIChzZXNzaW9uKSB7XG4gICAgYW5hbHl0aWNzLnNlc3Npb25zID0gW3Nlc3Npb25dO1xuICB9XG5cbiAgdmFyIGVrdnMgPSBldmVudE1hbmFnZXIoKS5nZXRFa3ZzKCk7XG4gIGlmIChla3ZzKSB7XG4gICAgYW5hbHl0aWNzLmVrdnMgPSBjbG9uZURlZXAoZWt2cyk7XG4gICAgZXZlbnRNYW5hZ2VyKCkuY2xlYXIoKTtcbiAgfVxuXG4gIGlmIChhbmFseXRpY3Muc2Vzc2lvbnMgfHwgYW5hbHl0aWNzLmVrdnMpIHtcbiAgICBkYXRhID0ge1xuICAgICAgYW5hbHl0aWNzOiBhbmFseXRpY3NcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRFa3YoKSB7XG4gIHZhciBkYXRhID0gbnVsbDtcblxuICB2YXIgZWt2cyA9IGV2ZW50TWFuYWdlcigpLmdldEVrdnMoKTtcbiAgaWYgKGVrdnMpIHtcbiAgICBkYXRhID0ge1xuICAgICAgYW5hbHl0aWNzOiB7XG4gICAgICAgIGVrdnM6IGNsb25lRGVlcChla3ZzKVxuICAgICAgfVxuICAgIH07XG4gICAgZXZlbnRNYW5hZ2VyKCkuY2xlYXIoKTtcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL2JvZHlCdWlsZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgSGVhZGVyID0gcmVxdWlyZSgnLi91bV9oZWFkZXInKTtcbnZhciBtYW5nbGUgPSByZXF1aXJlKCcuL21hbmdsZV9taW5pJyk7XG52YXIgaW1wcmludE1hbmFnZXIgPSByZXF1aXJlKCcuL2ltcHJpbnRNYW5hZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJy4vdWxvZycpO1xudmFyIGpzb25VdGlsID0gcmVxdWlyZSgnLi9qc29uVXRpbCcpO1xudmFyIGJhc2U2NCA9IHJlcXVpcmUoJy4vYmFzZTY0Jyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXG5mdW5jdGlvbiBnZXRVcmwoKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgdmFyIHJob3N0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJob3N0LXYnKTtcbiAgdmFyIGxvZ0RvbWFpbiA9IG1pbmkuZ2V0TG9nRG9tYWluKCk7XG4gIGlmICghcmhvc3QgfHwgIWxvZ0RvbWFpbikgeyBcbiAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICBtc2c6ICdjdXJyZW50IHJlcXVlc3QgZG9tYWluIGludmFsaWQsIHBsZWFzZSBjaGVjayB5b3VyIGFwbHVzLXJob3N0LXYgdmFsdWUgaW5zaWRlIG1ldGFpbmZvISdcbiAgICB9KTtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgdmFyIHVybCA9IFsnLy8nLCByaG9zdCwgbG9nRG9tYWluXS5qb2luKCcnKTtcbiAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG4gIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAgIHByb3RvY2FsID0gJ2h0dHA6JztcbiAgfVxuICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgcmV0dXJuIHVybDtcbn07XG5cbnZhciBNQVhfUkVRVUVTVF9USU1FT1VUID0gNTAwMDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXF1ZXN0KGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbENhbGxiYWNrLCBjb21wbGV0ZWRDYWxsYmFjaykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIHZhciBwX2hlYWRlciA9IEhlYWRlci5nZXRIZWFkZXJJbmZvKCk7XG4gIGlmIChtaW5pLmdldFBsYXRmb3JtVHlwZSgpID09PSAnbXknIHx8IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCkgPT09ICd0YW9iYW8nKSB7XG4gICAgcF9oZWFkZXJbJ2lkX3R5cGUnXSA9ICdhbGlwYXlfaWQnO1xuICAgIHBfaGVhZGVyWydpZF90cmFja2luZyddID0ge1xuICAgICAgYWxpcGF5X2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8ICcnLFxuICAgICAgdW5pb25pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSB8fCAnJyxcbiAgICAgIHVzZXJJZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpIHx8ICcnLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcF9oZWFkZXJbJ2lkX3R5cGUnXSA9ICdvcGVuaWQnO1xuICAgIHBfaGVhZGVyWydpZF90cmFja2luZyddID0ge1xuICAgICAgb3BlbmlkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8ICcnLFxuICAgICAgdW5pb25pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSB8fCAnJyxcbiAgICAgIHVzZXJJZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpIHx8ICcnLFxuICAgIH07XG4gIH1cblxuICBpZiAoaW1wcmludE1hbmFnZXIuZ2V0KCkpIHtcbiAgICBwX2hlYWRlclthcGx1c1N0YXRpYy5JTVBSSU5UXSA9IGltcHJpbnRNYW5hZ2VyLmdldCgpO1xuICB9XG5cbiAgaWYgKGRhdGEuYW5hbHl0aWNzKSB7XG4gICAgdmFyIHVzZXJJZCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKTtcbiAgICB2YXIgdXNlcl9uaWNrID0gYXBsdXMuZ2V0TWV0YUluZm8oJ191c2VyX25pY2snKTtcbiAgICBkYXRhLmFuYWx5dGljcy5hY3RpdmVfdXNlciA9IHtcbiAgICAgIHB1aWQ6IHVzZXJJZCxcbiAgICAgIHByb3ZpZGVyOiB1c2VyX25pY2tcbiAgICB9O1xuICB9XG5cbiAgZGF0YS5oZWFkZXIgPSB1dGlscy5hc3NpZ24ocF9oZWFkZXIsIGRhdGEuaGVhZGVyLCB7XG4gICAgdHM6IERhdGUubm93KCksXG4gICAgdHJhY2VJZDogdXRpbHMuZ2V0UmFuZG9tU3RyKDEwKSArIERhdGUubm93KCkgKyB1dGlscy5nZXRSYW5kb21TdHIoOSlcbiAgfSk7XG4gIHZhciBtYW5nbGVEYXRhID0gbWFuZ2xlKGRhdGEpO1xuICB2YXIgcmVxdWVzdERhdGEgPSBqc29uVXRpbC5zdHJpbmdmeShtYW5nbGVEYXRhKTtcbiAgdmFyIHVybCA9IGdldFVybCgpO1xuICB2YXIgY29uZmlnID0ge1xuICAgIHVybDogdXJsLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGRhdGE6IGJhc2U2NC5lbmNvZGUocmVxdWVzdERhdGEpLFxuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICB2YXIgc3RhdHVzQ29kZSA9IHJlc3AuY29kZSB8fCByZXNwLnN0YXR1cyB8fCByZXNwLnN0YXR1c0NvZGU7XG4gICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gMjAwIHx8IHN0YXR1c0NvZGUgPT09IDQxMykge1xuICAgICAgICB1bG9nKCkuaSgn5pWw5o2u5Y+R6YCB5oiQ5YqfOiAnLCBkYXRhLCByZXF1ZXN0RGF0YSk7XG5cbiAgICAgICAgLy8g5Zyo5q2k5aSE5bCGaW1wcmludOWGheWuueWKoOWFpeWIsOacrOWcsOe8k+WtmOS4rVxuICAgICAgICBzYXZlSW1wcmludCgocmVzcC5kYXRhIHx8IHt9KS5pbXByaW50KTtcbiAgICAgICAgaXNGdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2spICYmIHN1Y2Nlc3NDYWxsYmFjayhyZXNwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVsb2coKS53KCfmlbDmja7lj5HpgIHlpLHotKU6ICcsIHJlcXVlc3REYXRhKTtcbiAgICAgICAgaXNGdW5jdGlvbihmYWlsQ2FsbGJhY2spICYmIGZhaWxDYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZmFpbDogZnVuY3Rpb24gKGlzVGltZW91dCkge1xuICAgICAgdWxvZygpLncoJ+aVsOaNruWPkemAgScgKyBpc1RpbWVvdXQgPyAn6LaF5pe2OiAnIDogJ+Wksei0pTogJywgcmVxdWVzdERhdGEpO1xuICAgICAgaXNGdW5jdGlvbihmYWlsQ2FsbGJhY2spICYmIGZhaWxDYWxsYmFjaygpO1xuICAgIH0sXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzRnVuY3Rpb24oY29tcGxldGVkQ2FsbGJhY2spICYmIGNvbXBsZXRlZENhbGxiYWNrKCk7XG4gICAgfVxuICB9O1xuXG4gIHNka1JlcXVlc3QodXRpbHMuYXNzaWduKGNvbmZpZywgYnVpbGRIdHRwSGVhZGVyKCkpKTtcbn07XG5cbmZ1bmN0aW9uIHNka1JlcXVlc3Qob3B0aW9ucykge1xuICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gIHZhciBzcmNTdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICB2YXIgc3JjRmFpbCA9IG9wdGlvbnMuZmFpbDtcbiAgdmFyIGlzVGltZW91dCA9IGZhbHNlO1xuICB2YXIgc3QgPSBudWxsO1xuXG4gIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgaWYgKCFpc1RpbWVvdXQpIHtcbiAgICAgIHN0ICYmIGNsZWFyVGltZW91dChzdCk7XG4gICAgICBpc0Z1bmN0aW9uKHNyY1N1Y2Nlc3MpICYmIHNyY1N1Y2Nlc3MocmVzcCk7XG4gICAgfVxuICB9O1xuXG4gIG9wdGlvbnMuZmFpbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWlzVGltZW91dCkge1xuICAgICAgc3QgJiYgY2xlYXJUaW1lb3V0KHN0KTtcbiAgICAgIGlzRnVuY3Rpb24oc3JjRmFpbCkgJiYgc3JjRmFpbChmYWxzZSk7XG4gICAgfVxuICB9O1xuICB0cnkge1xuICAgIGN0eC5yZXF1ZXN0KG9wdGlvbnMpO1xuICB9IGNhdGNoKGUpIHtcbiAgICB0cnkge1xuICAgICAgZGQgJiYgZGQuaHR0cFJlcXVlc3Qob3B0aW9ucyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdWxvZygpLncoJ+ivt+axguWPkemAgeWksei0pTogJywgZSk7XG4gICAgfVxuICB9XG5cbiAgc3QgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuICAgIGlzVGltZW91dCA9IHRydWU7XG5cbiAgICBpc0Z1bmN0aW9uKHNyY0ZhaWwpICYmIHNyY0ZhaWwoaXNUaW1lb3V0KTtcbiAgfSwgb3B0aW9ucy50aW1lb3V0IHx8IE1BWF9SRVFVRVNUX1RJTUVPVVQpO1xufVxuXG4vLyDmnI3liqHnq6/kuIvlj5Hlj5HpgIHnrZbnlaVcbmZ1bmN0aW9uIHNhdmVJbXByaW50KGltcHJpbnQpIHtcbiAgaWYgKGltcHJpbnQpIHtcbiAgICBpbXByaW50TWFuYWdlci5zZXQoaW1wcmludCk7XG4gICAgaW1wcmludE1hbmFnZXIuc2F2ZSgpO1xuXG4gICAgdWxvZygpLnYoJ2ltcHJpbnQ6ICcsIGltcHJpbnRNYW5hZ2VyLmdldEltcE9iaigpKTtcblxuICB9XG59XG5cbmZ1bmN0aW9uIGJ1aWxkSHR0cEhlYWRlcigpIHtcbiAgdmFyIGhlYWRlclR5cGUgPSBtaW5pLmdldFNka1R5cGUoKSArICcvanNvbic7XG4gIHZhciBpc015ID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgaWYgKG15KSB7XG4gICAgICBpc015ID0gdHJ1ZTtcbiAgICB9XG4gIH0gY2F0Y2goZSl7fTtcblxuICBpZiAoaXNNeSkge1xuICAgIHJldHVybiB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuICAgICAgICAnTXNnLVR5cGUnOiBoZWFkZXJUeXBlXG4gICAgICB9XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVhZGVyOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuICAgICAgICAnTXNnLVR5cGUnOiBoZWFkZXJUeXBlXG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3JlcXVlc3QuanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBhbmFseXRpY3NNYXAgPSB7XG4gIHNlc3Npb25zOiAnc24nLFxuICAvLyBwYWdlczogJ3AnLFxuICAvLyBzaGFyZXM6ICdzcicsXG4gIGVrdnM6ICdlJyxcbiAgYWN0aXZlX3VzZXI6ICdhY3RpdmVfdXNlcidcbn07XG5cbnZhciBoZWFkZXJNYXAgPSB7XG4gIHNka190eXBlOiAnc2R0JyxcbiAgYWNjZXNzOiAnYWMnLFxuICBhY2Nlc3Nfc3VidHlwZTogJ2FjcycsXG4gIGRldmljZV9tb2RlbDogJ2RtJyxcbiAgbGFuZ3VhZ2U6ICdsYW5nJyxcbiAgZGV2aWNlX3R5cGU6ICdkdCcsXG4gIGRldmljZV9tYW51ZmFjdHVyZXI6ICdkbWYnLFxuICBkZXZpY2VfbmFtZTogJ2RuJyxcbiAgcGxhdGZvcm1fdmVyc2lvbjogJ3B2JyxcbiAgaWRfdHlwZTogJ2l0JyxcbiAgZm9udF9zaXplX3NldHRpbmc6ICdmc3MnLFxuICBvc192ZXJzaW9uOiAnb3YnLFxuICBkZXZpY2VfbWFudWlkOiAnZGlkJyxcbiAgcGxhdGZvcm1fc2RrX3ZlcnNpb246ICdwc3YnLFxuICBkZXZpY2VfYnJhbmQ6ICdkYicsXG4gIGFwcGtleTogJ2FrJyxcbiAgX2lkOiAnaWQnLFxuICBpZF90cmFja2luZzogJ2l0cicsXG4gIGltcHJpbnQ6ICdpbXAnLFxuICBzZGtfdmVyc2lvbjogJ3N2JyxcbiAgcmVzb2x1dGlvbjogJ3JsJyxcbiAgdGVzdFRva2VuOiAndHRuJyxcbiAgbWluaWFwcERlYnVnSWQ6ICdkaycsXG4gIC8vIHRoZW1lOiAndDUnLFxuICAvLyBiZW5jaG1hcmtfbGV2ZWw6ICdibWwnLFxuICAvLyBzY3JlZW5fd2lkdGg6ICdzdycsXG4gIC8vIHNjcmVlbl9oZWlnaHQ6ICdzaCcsXG4gIC8vIHN0YXR1c19iYXJfaGVpZ2h0OidzYmgnLFxuICAvLyBzYWZlX2FyZWFfdG9wOiAnc2F0JyxcbiAgLy8gc2FmZV9hcmVhX2xlZnQ6ICdzYWwnLFxuICAvLyBzYWZlX2FyZWFfcmlnaHQ6ICdzYXInLFxuICAvLyBzYWZlX2FyZWFfYm90dG9tOiAnc2FiJyxcbiAgLy8gc2FmZV9hcmVhX2hlaWdodDogJ3NhaCcsXG4gIC8vIHNhZmVfYXJlYV93aWR0aDogJ3NhdycsXG4gIHBpeGVsX3JhdGlvOiAncHInLFxuICAvLyBzdG9yYWdlOiAnczcnLFxuICAvLyBob3N0OiAnaHMnXG59O1xuXG52YXIgaWRNYXAgPSB7XG4gIHV1aWQ6ICd1ZCcsXG4gIHVuaW9uaWQ6ICd1bmQnLFxuICBvcGVuaWQ6ICdvZCcsXG4gIGFub255bW91c2lkOiAnbmQnLFxuICBhbGlwYXlfaWQ6ICdhZCcsXG4gIGRldmljZV9pZDogJ2RkJyxcbiAgdXNlcmlkOiAncHVpZCdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGF0YSkge1xuICByZXR1cm4ge1xuICAgIGg6IF9tYW5nbGVIZWFkZXIoZGF0YS5oZWFkZXIsIGhlYWRlck1hcCksXG4gICAgYTogX21hbmdsZUFuYWx5dGljcyhkYXRhLmFuYWx5dGljcywgYW5hbHl0aWNzTWFwKVxuICB9O1xufTtcblxuZnVuY3Rpb24gX21hbmdsZUhlYWRlcihoZWFkZXIsIG1hcCkge1xuICB2YXIgcmVzdWx0ID0gX21hbmdsZU9iaihoZWFkZXIsIG1hcCk7XG5cbiAgaWYgKGhlYWRlciAmJiBoZWFkZXIuaWRfdHJhY2tpbmcpIHtcbiAgICByZXN1bHRbbWFwLmlkX3RyYWNraW5nIHx8ICdpZF90cmFja2luZyddID0gX21hbmdsZU9iaihoZWFkZXIuaWRfdHJhY2tpbmcsIGlkTWFwKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiBfbWFuZ2xlT2JqKG9iaiwgbWFwKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKG1hcFtrZXldKSB7XG4gICAgICByZXN1bHRbbWFwW2tleV1dID0gb2JqW2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmZ1bmN0aW9uIF9tYW5nbGVBbmFseXRpY3MoYW5hbHl0aWNzLCBtYXApIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gIGlmIChhbmFseXRpY3MpIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIGFuYWx5dGljcykge1xuICAgICAgaWYgKGFuYWx5dGljc1twcm9wXSkge1xuICAgICAgICByZXN1bHRbbWFwW3Byb3BdXSA9IGFuYWx5dGljc1twcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL21hbmdsZV9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIganNvblV0aWwgPSByZXF1aXJlKCcuL2pzb25VdGlsJyk7XG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi9iYXNlNjQnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG5mdW5jdGlvbiBJbXByaW50TWFuYWdlcigpIHtcbiAgdmFyIF9pbXByaW50ID0gJyc7XG4gIHZhciB0ID0gdGhpcztcbiAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoaW1wcmludCkge1xuICAgIF9pbXByaW50ID0gaW1wcmludDtcbiAgfTtcblxuICB0aGlzLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2ltcHJpbnQ7XG4gIH07XG4gIHRoaXMuZ2V0SW1wT2JqID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBqc29uVXRpbC5wYXJzZShiYXNlNjQuZGVjb2RlKF9pbXByaW50KSk7XG4gIH07XG4gIHRoaXMuZ2V0SXRlbSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaW1wb2JqID0gdC5nZXRJbXBPYmooKTtcbiAgICByZXR1cm4gaW1wb2JqID8gaW1wb2JqW25hbWVdIHx8IFwiXCIgOiBcIlwiO1xuICB9O1xuXG4gIHRoaXMubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBfaW1wcmludCA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuICB9O1xuXG4gIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoX2ltcHJpbnQpIHtcbiAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLklNUFJJTlQsIF9pbXByaW50KTtcbiAgICB9XG4gIH07XG59XG52YXIgaW1wcmludE1hbmFnZXIgPSBuZXcgSW1wcmludE1hbmFnZXIoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbXByaW50TWFuYWdlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9pbXByaW50TWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbnZhciBiNjRjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcbnZhciBiNjR0YWIgPSAoZnVuY3Rpb24gKGJpbikge1xuICB2YXIgdCA9IHt9O1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGJpbi5sZW5ndGg7IGkgPCBsOyBpKyspIHRbYmluLmNoYXJBdChpKV0gPSBpO1xuICByZXR1cm4gdDtcbn0pKGI2NGNoYXJzKTtcbnZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xudmFyIGNiX3V0b2IgPSBmdW5jdGlvbiAoYykge1xuICB2YXIgY2M7XG4gIGlmIChjLmxlbmd0aCA8IDIpIHtcbiAgICBjYyA9IGMuY2hhckNvZGVBdCgwKTtcbiAgICByZXR1cm4gY2MgPCAxMjggPyBjIDogY2MgPCAyMDQ4ID8gZnJvbUNoYXJDb2RlKDE5MiB8IGNjID4+PiA2KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKSA6IGZyb21DaGFyQ29kZSgyMjQgfCBjYyA+Pj4gMTIgJiAxNSkgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDYgJiA2MykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgJiA2Myk7XG4gIH0gZWxzZSB7XG4gICAgY2MgPSA2NTUzNiArIChjLmNoYXJDb2RlQXQoMCkgLSA1NTI5NikgKiAxMDI0ICsgKGMuY2hhckNvZGVBdCgxKSAtIDU2MzIwKTtcbiAgICByZXR1cm4gZnJvbUNoYXJDb2RlKDI0MCB8IGNjID4+PiAxOCAmIDcpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiAxMiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gNiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKTtcbiAgfVxufTtcbnZhciByZV91dG9iID0gL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRkZdfFteXFx4MDAtXFx4N0ZdL2c7XG52YXIgdXRvYiA9IGZ1bmN0aW9uICh1KSB7XG4gIHJldHVybiB1LnJlcGxhY2UocmVfdXRvYiwgY2JfdXRvYik7XG59O1xudmFyIGNiX2VuY29kZSA9IGZ1bmN0aW9uIChjY2MpIHtcbiAgdmFyIHBhZGxlbiA9IFswLCAyLCAxXVtjY2MubGVuZ3RoICUgM10sXG4gICAgb3JkID0gY2NjLmNoYXJDb2RlQXQoMCkgPDwgMTYgfCAoY2NjLmxlbmd0aCA+IDEgPyBjY2MuY2hhckNvZGVBdCgxKSA6IDApIDw8IDggfCAoY2NjLmxlbmd0aCA+IDIgPyBjY2MuY2hhckNvZGVBdCgyKSA6IDApLFxuICAgIGNoYXJzID0gW2I2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDE4KSwgYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gMTIgJiA2MyksIHBhZGxlbiA+PSAyID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gNiAmIDYzKSwgcGFkbGVuID49IDEgPyAnPScgOiBiNjRjaGFycy5jaGFyQXQob3JkICYgNjMpXTtcbiAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xufTtcbnZhciBidG9hID0gZnVuY3Rpb24gKGIpIHtcbiAgcmV0dXJuIGIucmVwbGFjZSgvW1xcc1xcU117MSwzfS9nLCBjYl9lbmNvZGUpO1xufTtcbnZhciBfZW5jb2RlID0gZnVuY3Rpb24gKHUpIHtcbiAgcmV0dXJuIGJ0b2EodXRvYih1KSk7XG59O1xudmFyIGVuY29kZSA9IGZ1bmN0aW9uICh1LCB1cmlzYWZlKSB7XG4gIHJldHVybiAhdXJpc2FmZSA/IF9lbmNvZGUoU3RyaW5nKHUpKSA6IF9lbmNvZGUoU3RyaW5nKHUpKS5yZXBsYWNlKC9bK1xcL10vZywgZnVuY3Rpb24gKG0wKSB7XG4gICAgcmV0dXJuIG0wID09ICcrJyA/ICctJyA6ICdfJztcbiAgfSkucmVwbGFjZSgvXFw9L2csICcnKTtcbn07XG4vLyB2YXIgZW5jb2RlVVJJID0gZnVuY3Rpb24gKHUpIHtcbi8vICAgcmV0dXJuIGVuY29kZSh1LCB0cnVlKTtcbi8vIH07XG52YXIgcmVfYnRvdSA9IG5ldyBSZWdFeHAoWydbw4Atw59dW8KALcK/XScsICdbw6Atw69dW8KALcK/XXsyfScsICdbw7Atw7ddW8KALcK/XXszfSddLmpvaW4oJ3wnKSwgJ2cnKTtcbnZhciBjYl9idG91ID0gZnVuY3Rpb24gKGNjY2MpIHtcbiAgc3dpdGNoIChjY2NjLmxlbmd0aCkge1xuICBjYXNlIDQ6XG4gICAgdmFyIGNwID0gKDcgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDE4IHwgKDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDMpLCBvZmZzZXQgPSBjcCAtIDY1NTM2O1xuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKG9mZnNldCA+Pj4gMTApICsgNTUyOTYpICsgZnJvbUNoYXJDb2RlKChvZmZzZXQgJiAxMDIzKSArIDU2MzIwKTtcbiAgY2FzZSAzOlxuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDE1ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDIpKTtcbiAgZGVmYXVsdDpcbiAgICByZXR1cm4gZnJvbUNoYXJDb2RlKCgzMSAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKTtcbiAgfVxufTtcbnZhciBidG91ID0gZnVuY3Rpb24gKGIpIHtcbiAgcmV0dXJuIGIucmVwbGFjZShyZV9idG91LCBjYl9idG91KTtcbn07XG52YXIgY2JfZGVjb2RlID0gZnVuY3Rpb24gKGNjY2MpIHtcbiAgdmFyIGxlbiA9IGNjY2MubGVuZ3RoLFxuICAgIHBhZGxlbiA9IGxlbiAlIDQsXG4gICAgbiA9IChsZW4gPiAwID8gYjY0dGFiW2NjY2MuY2hhckF0KDApXSA8PCAxOCA6IDApIHwgKGxlbiA+IDEgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMSldIDw8IDEyIDogMCkgfCAobGVuID4gMiA/IGI2NHRhYltjY2NjLmNoYXJBdCgyKV0gPDwgNiA6IDApIHwgKGxlbiA+IDMgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMyldIDogMCksXG4gICAgY2hhcnMgPSBbZnJvbUNoYXJDb2RlKG4gPj4+IDE2KSwgZnJvbUNoYXJDb2RlKG4gPj4+IDggJiAyNTUpLCBmcm9tQ2hhckNvZGUobiAmIDI1NSldO1xuICBjaGFycy5sZW5ndGggLT0gWzAsIDAsIDIsIDFdW3BhZGxlbl07XG4gIHJldHVybiBjaGFycy5qb2luKCcnKTtcbn07XG52YXIgYXRvYiA9IGZ1bmN0aW9uIChhKSB7XG4gIHJldHVybiBhLnJlcGxhY2UoL1tcXHNcXFNdezEsNH0vZywgY2JfZGVjb2RlKTtcbn07XG52YXIgX2RlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG4gIHJldHVybiBidG91KGF0b2IoYSkpO1xufTtcbnZhciBkZWNvZGUgPSBmdW5jdGlvbiAoYSkge1xuICByZXR1cm4gX2RlY29kZShTdHJpbmcoYSkucmVwbGFjZSgvWy1fXS9nLCBmdW5jdGlvbiAobTApIHtcbiAgICByZXR1cm4gbTAgPT0gJy0nID8gJysnIDogJy8nO1xuICB9KS5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL10vZywgJycpKTtcbn07XG5cbmV4cG9ydHMuZW5jb2RlID0gZW5jb2RlO1xuZXhwb3J0cy5kZWNvZGUgPSBkZWNvZGU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vYmFzZTY0LmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pel5b+X57G75bel5YW36ZuG5ZCIXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAcGFyYW1zIHtPYmplY3R9IG8gOntcbiAqICAgbGV2ZWw6ICd3YXJuL2luZm8vbG9nJyBkZWZhdWx0IGlzIHdhcm5cbiAqICAgbXNnOiAnbXNnJ1xuICogfVxuICovXG52YXIgcHJlZml4ID0gJ1thcGx1cyBsb2ddOiAnO1xuZXhwb3J0cy5sb2dnZXIgPSBmdW5jdGlvbiAobykge1xuICBpZiAoIW8pIHtcbiAgICBvID0ge307XG4gIH1cbiAgdmFyIGxldmVsID0gby5sZXZlbCB8fCAnd2Fybic7XG4gIGNvbnNvbGUgJiYgY29uc29sZVtsZXZlbF0gJiYgY29uc29sZVtsZXZlbF0ocHJlZml4K28ubXNnKTtcbn07XG5cbmV4cG9ydHMuZGVidWdMb2cgPSBmdW5jdGlvbihvKSB7XG4gIHZhciBhcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoYXBsdXMgJiYgYXBsdXMuYXBsdXNEZWJ1Zykge1xuICAgIHRoaXMubG9nZ2VyKG8pO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxMb2dnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciB1bG9nID0gcmVxdWlyZSgnLi91bG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obWF4Q291bnQpIHtcbiAgdmFyIF9tYXhDb3VudCA9IG1heENvdW50O1xuICB2YXIgX2l0ZW1zID0gW107XG5cbiAgdGhpcy5lbnF1ZXVlID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAodHlwZW9mIF9tYXhDb3VudCA9PT0gJ251bWJlcicgJiYgdGhpcy5zaXplKCkgPj0gX21heENvdW50KSB7XG4gICAgICB0aGlzLmRlcXVldWUoKTtcbiAgICB9XG5cbiAgICBfaXRlbXMucHVzaChpdGVtKTtcbiAgfTtcblxuICB0aGlzLmRlcXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9pdGVtcy5zaGlmdCgpO1xuICB9O1xuXG4gIHRoaXMuZnJvbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9pdGVtc1swXTtcbiAgfTtcblxuICB0aGlzLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9pdGVtcy5sZW5ndGggPT09IDA7XG4gIH07XG5cbiAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICBfaXRlbXMubGVuZ3RoID0gMDtcbiAgfTtcblxuICB0aGlzLnNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9pdGVtcy5sZW5ndGg7XG4gIH07XG5cbiAgdGhpcy5pdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2l0ZW1zO1xuICB9O1xuXG4gIHRoaXMucHJpbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdWxvZygpLnYoJy0tLXF1ZXVlOiAnLCBfaXRlbXMudG9TdHJpbmcoKSk7XG4gIH07XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3F1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmFzc2lnbiA9IHJlcXVpcmUoJy4vYXNzaWduJyk7XG5cbi8qKlxuICog55Sf5oiQ5LiA5Liq55So5LqO6YG/5YWN57yT5a2Y55qE6ZqP5py65pWwXG4gKiDkuLrkuoblh4/lsJEgdXJsIOmVv+W6pu+8jOi/meS4qumaj+acuuaVsOaNrueahOmVv+W6puWumuS4uiA3IOS9je+8jFxuICog5Li65LqG5YeP5bCR56Kw5pKe77yM5L2/55SoIDE2IOi/m+WItuaVsOWtl1xuICpcbiAqIDI2ODQzNTQ1NiA9IDIgXiAyOCA9IDB4ZmZmZmZmZiArIDFcbiAqL1xuZXhwb3J0cy5tYWtlQ2FjaGVOdW0gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNjg0MzU0NTYpLnRvU3RyaW5nKDE2KTtcbn07XG5cbi8qKlxuICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+WQpuS7peWtl+espuS4siBzMiDlvIDlpLRcbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNTdGFydFdpdGggPSBmdW5jdGlvbihzMSwgczIpIHtcbiAgcmV0dXJuIHMxLmluZGV4T2YoczIpID09PSAwO1xufTtcbi8qKlxuICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+a7nuS7peWtl+espuS4siBzMiDnu5PlsL5cbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNFbmRXaXRoID0gZnVuY3Rpb24oczEsIHMyKSB7XG4gIHZhciBsMSA9IHMxLmxlbmd0aCwgbDIgPSBzMi5sZW5ndGg7XG4gIHJldHVybiBsMSA+PSBsMiAmJiBzMS5pbmRleE9mKHMyKSA9PSAobDEgLSBsMik7XG59O1xuXG5leHBvcnRzLmFueSA9IGZ1bmN0aW9uKGFyciwgZm4pIHtcbiAgdmFyIGk7XG4gIHZhciBsID0gYXJyLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIGlmIChmbihhcnJbaV0pKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0cy5pc051bWJlciA9IGZ1bmN0aW9uKHYpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJztcbn07XG5cbmV4cG9ydHMuaXNOYU4gPSBmdW5jdGlvbih2KSB7XG4gIGlmKGlzTmFOKSB7XG4gICAgcmV0dXJuIGlzTmFOKHYpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2ICE9PSB2O1xuICB9XG59O1xuXG4vKipcbiAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbljIXlkKvlrZfnrKbkuLIgczJcbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNDb250YWluID0gZnVuY3Rpb24gKHMxLCBzMikge1xuICByZXR1cm4gczEuaW5kZXhPZihzMikgPiAtMTtcbn07XG5cbi8qKlxuICog5YWL6ZqG5LiA5Liqb2JqZWN0XG4gKi9cbnZhciBjbG9uZURlZXAgPSBmdW5jdGlvbihvYmopIHtcbiAgdmFyIHN0cjtcbiAgdmFyIG5ld29iaiA9IG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyBbXSA6IHt9O1xuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG4gICAgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTsgLy/ns7vliJfljJblr7nosaFcbiAgICBuZXdvYmogPSBKU09OLnBhcnNlKHN0cik7IC8v6L+Y5Y6fXG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgIG5ld29ialtpXSA9IHR5cGVvZiBvYmpbaV0gPT09ICdvYmplY3QnID8gY2xvbmVEZWVwKG9ialtpXSkgOiBvYmpbaV07XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdvYmo7XG59O1xuXG5leHBvcnRzLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxEYXNoLmpzXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbi8qKlxuICog5a+56LGhbWVyZ2VcbiAqICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRhcmdldE9iaiwgYXJnc09iaikge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdmFyIG5leHRTb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICBpZiAobmV4dFNvdXJjZSAhPT0gbnVsbCkgeyAvLyBTa2lwIG92ZXIgaWYgdW5kZWZpbmVkIG9yIG51bGxcbiAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIG5leHRTb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobmV4dFNvdXJjZSwgbmV4dEtleSkpIHtcbiAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRvO1xuICAgIH0odGFyZ2V0T2JqLCBhcmdzT2JqKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGFyZ2V0T2JqLCBhcmdzT2JqKTtcbiAgfVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9hc3NpZ24uanNcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG52YXIgY3VycmVudFBhdGggPSBcIlwiO1xudmFyIHBhZ2VPcHRpb25NYXAgPSB7fTtcblxuZnVuY3Rpb24gYnVpbGRQYXRoKHBhdGgsIHF1ZXJ5KSB7XG4gIGlmICghcGF0aCkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIHZhciBxcyA9IFtdO1xuICBmb3IgKHZhciBxIGluIHF1ZXJ5KSB7XG4gICAgcXMucHVzaChxICsgJz0nICsgcXVlcnlbcV0pO1xuICB9XG4gIHZhciBxc3MgPSBxcy5qb2luKCcmJyk7XG4gIHJldHVybiBxc3MgPyBwYXRoICsgJz8nICsgcXNzIDogcGF0aDtcbn07XG5cbmV4cG9ydHMuZ2V0Q3VycmVudFBhZ2VQYXRoID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBjdXJyZW50UGF0aDtcbn07XG5cbmV4cG9ydHMuc2V0Q3VycmVudFBhdGggPSBmdW5jdGlvbihwYXRoKSB7XG4gIGlmIChwYXRoKSB7XG4gICAgY3VycmVudFBhdGggPSBwYXRoO1xuICB9XG59O1xuXG5leHBvcnRzLmdldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgaWYgKHBhdGgpIHtcbiAgICByZXR1cm4gcGFnZU9wdGlvbk1hcFtwYXRoXTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZXRQYWdlUXVlcnkgPSBmdW5jdGlvbihwYXRoLCBxdWVyeSkge1xuICBpZiAocGF0aCkge1xuICAgIHBhZ2VPcHRpb25NYXBbcGF0aF0gPSBxdWVyeTtcbiAgfVxufTtcblxuZXhwb3J0cy5nZXRGdWxsUGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIGJ1aWxkUGF0aChjdXJyZW50UGF0aCwgcGFnZU9wdGlvbk1hcFtwYXRoXSk7XG59O1xuXG5leHBvcnRzLmdldFBhZ2VOYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG1ldGEgPSBhcGx1cy5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpO1xuICB2YXIgcmVhbFBhdGggPSBwYXRoIHx8IGN1cnJlbnRQYXRoO1xuICB0cnkge1xuICAgIC8vIOWvueS6juWKqOaAgei3r+eUse+8jOaUr+aMgeeUqOaIt+S8oOWFpeato+WImei/m+ihjOWMuemFjVxuICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YSkge1xuICAgICAgICBpZiAoa2V5ID09PSByZWFsUGF0aCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKG1ldGFba2V5XSAmJiBtZXRhW2tleV0ucmVnUnVsZSkge1xuICAgICAgICAgIHJlYWxQYXRoID0gbWV0YVtrZXldLnJlZ1J1bGUudGVzdChwYXRoKSA/IGtleSA6IHJlYWxQYXRoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIC8vXG4gIH1cbiAgcmV0dXJuIG1ldGFbcmVhbFBhdGhdO1xuICAvLyBpZiAoIXBhdGgpIHtcbiAgLy8gICByZXR1cm4gbWV0YSAmJiBtZXRhW2N1cnJlbnRQYXRoXTtcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICByZXR1cm4gbWV0YSAmJiBtZXRhW3BhdGhdO1xuICAvLyB9XG59O1xuXG5leHBvcnRzLmdldFBhZ2VDb2RlID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gKHRoaXMuZ2V0UGFnZU5hbWUocGF0aCkgfHwge30pLnBhZ2VOYW1lO1xufTtcblxuZXhwb3J0cy5nZXRWVFJlYWx0aW1lQ29kZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoY3VycmVudFBhdGgpIHtcbiAgICB2YXIgcXVlcnkgPSBwYWdlT3B0aW9uTWFwW2N1cnJlbnRQYXRoXSB8fCB7fTtcbiAgICB2YXIgcmVnRXhwID0gL15cXCR2dF8vO1xuICAgIHZhciBzY2VuZSA9IGRlY29kZVVSSUNvbXBvbmVudChxdWVyeS5zY2VuZSk7XG4gICAgcmV0dXJuIHNjZW5lICYmIHJlZ0V4cC50ZXN0KHNjZW5lKSAmJiBzY2VuZS5yZXBsYWNlKHJlZ0V4cCwgJycpO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2FwbHVzX3BsdWdpbl9taW5pL2xpYl9hdXRvX2NvbGxlY3QvaW5qZWN0X3BhZ2UuanNcbiAqIOiHquWKqOmHh+mbhuWwj+eoi+W6j+S/oeaBr+eahOaPkuS7tiAtIOmhtemdouazqOWFpVxuICpcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL3V0aWxzJyk7XG52YXIgdW1VdGlscyA9IHJlcXVpcmUoJy4uL3BsdWdpbnMvbGliX3VtL3V0aWxzJyk7XG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIHVsb2cgPSByZXF1aXJlKCcuLi9wbHVnaW5zL2xpYl91bS91bG9nJyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG5cbmZ1bmN0aW9uIGhhbmRsZXJTaGFyZUFwcE1zZyAob3B0LCBuYW1lKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciBwYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICB2YXIgcm91dGUgPSBwYWdlLnJvdXRlIHx8IHBhZ2UuaXMgfHwgJyc7XG4gIHZhciBvcHRpb25zID0gcGFnZS5vcHRpb25zIHx8IHt9O1xuICB2YXIgbGlua1Bhcm1hcyA9IGZvcm1hdC5vYmoycGFyYW0ob3B0aW9ucywgdHJ1ZSk7XG4gIC8vIOaLvOaOpWN1cnJlbnRQYWdl55qEdXJs5LiOcXVlcnlcbiAgaWYobGlua1Bhcm1hcykge1xuICAgIHJvdXRlID0gcm91dGUgKyAnPycgKyBsaW5rUGFybWFzO1xuICB9IFxuICBpZiAoIW9wdC5xdWVyeSkge1xuICAgIG9wdC5xdWVyeSA9IHt9O1xuICB9XG4gIG9wdC5xdWVyeS4kJF9zaGFyZV91aWQgPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ19hbm9ueV9pZCcpIHx8IGN0eC5hcGx1cy5fX0VUQUdfX0NOQV9fSURfXztcbiAgb3B0LnF1ZXJ5LiQkX3V0bV9tZWRpdW0gPSAzO1xuXG4gIC8vIG9uU2hhcmVBcHBNZXNzYWdl5rKh5pyJcmV0dXJuIOaIliBvblNoYXJlVGltZWxpbmXml7bvvIzlhaXlj4JvcHTnmoRwYXRo5LiOcXVlcnnkuLrnqbrvvIzmraTml7bnlKhjdXJyZW50UGFnZeeahHBhdGjlkoxvcHRpb25z5YWc5bqVXG4gIG9wdC5xdWVyeSA9IHVtVXRpbHMuYXNzaWduKHt9LCBvcHRpb25zLCBvcHQucXVlcnkpO1xuICB2YXIgcGF0aCA9IG9wdC5wYXRoIHx8IHJvdXRlO1xuXG4gIHZhciBhcHBlbmRQYXJhbXMgPSAnJCRfc2hhcmVfdWlkPScgKyBvcHQucXVlcnkuJCRfc2hhcmVfdWlkICsgJyYkJF91dG1fbWVkaXVtPTMnO1xuIFxuICBpZiAocGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuICAgIG9wdC5wYXRoID0gcGF0aCArICcmJyArIGFwcGVuZFBhcmFtcztcbiAgfSBlbHNlIHtcbiAgICBvcHQucGF0aCA9IHBhdGggKyAnPycgKyBhcHBlbmRQYXJhbXM7XG4gIH1cbiAgb3B0LnN0YXR1cyA9ICdyZWFkeSc7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgYXJndW1lbnRzOiBbbmFtZSwgb3B0XVxuICB9KTtcbiAgcmV0dXJuIG9wdDtcbn07XG5cbmZ1bmN0aW9uIG9uUHVsbERvd25SZWZyZXNoKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgb3B0ID0ge1xuICAgIHN0YXR1czogJ3JlYWR5J1xuICB9O1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgIGFyZ3VtZW50czogWydvblB1bGxEb3duUmVmcmVzaCcsIG9wdF1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBvblJlYWNoQm90dG9tKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBvcHQgPSB7XG4gICAgc3RhdHVzOiAncmVhZHknLFxuICAgIGNvbnRleHQ6IHRoYXRcbiAgfTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICBhcmd1bWVudHM6IFsnb25SZWFjaEJvdHRvbScsIG9wdF1cbiAgfSk7XG59O1xuXG4vLyDpobXpnaLliqDovb1cbmZ1bmN0aW9uIG9uUGFnZUxvYWQocXVlcnkpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdHJ5IHtcbiAgICBQYWdlTWFuYWdlci5zZXRDdXJyZW50UGF0aCh0aGlzLnJvdXRlKTtcbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIFBhZ2VNYW5hZ2VyLnNldFBhZ2VRdWVyeSh0aGlzLnJvdXRlLCBxdWVyeSk7XG4gICAgfVxuICAgIHVsb2coKS52KCdQYWdlIG9uTG9hZDogJywgdGhpcy5yb3V0ZSwgcXVlcnkpO1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uKCl7XG4gICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICAgICAgYXJndW1lbnRzOiBbJ29uTG9hZCcsIHtcbiAgICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG4gICAgICAgICAgY29udGV4dDogdGhhdCxcbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgICAgLy8g6aG16Z2i5Yqg6L295a6M5ZCO5re35YWlc2V0RGF0Ye+8jOaWueS+v+iHquWKqOabneWFieOAgeiHquWKqOeCueWHu+etieaPkuS7tuS9v+eUqFxuICAgICAgdmFyIF9jdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgIHV0aWxzLnJlc2V0Rm4oX2N1cnJlbnRQYWdlLCAnc2V0RGF0YScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ29uUGFnZURhdGFDaGFuZ2VkJywge1xuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoYXRcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudygnb25QYWdlTG9hZDogJywgZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG9uUGFnZVNob3coKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgUGFnZU1hbmFnZXIuc2V0Q3VycmVudFBhdGgodGhpcy5yb3V0ZSk7XG4gICAgdXRpbHMub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICAgICAgYXJndW1lbnRzOiBbJ29uU2hvdycsIHtcbiAgICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG4gICAgICAgICAgY29udGV4dDogdGhhdCxcbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudygnb25QYWdlU2hvdzogJywgZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG9uUGFnZVJlYWR5KCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB0cnkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgICBhcmd1bWVudHM6IFsnb25SZWFkeScsIHtcbiAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuICAgICAgICBjb250ZXh0OiB0aGF0XG4gICAgICB9XVxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdWxvZygpLncoJ29uUGFnZVJlYWR5OiAnLCBlKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gb25QYWdlSGlkZSgpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdHJ5IHtcbiAgICAvLyBUT0RPOiDlj6/op4bljJbphY3nva7mg4XlhrXkuIsg5Y+C5pWw6ZyA6KaB5Y+m5aSW55qE5aSE55CGXG4gICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIHtcbiAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuICAgICAgfV1cbiAgICB9KTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ29uUGFnZUhpZGU6ICcsIGUpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBvblBhZ2VVbmxvYWQoKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgYXJndW1lbnRzOiBbJ29uVW5sb2FkJywge1xuICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG4gICAgICB9XVxuICAgIH0pO1xuICB9IGNhdGNoKGUpe1xuICAgIHVsb2coKS53KCdvblBhZ2VVbmxvYWQ6ICcsIGUpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBvbkFwbHVzQ2xrKGUpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICBhcmd1bWVudHM6IFsnb25BcGx1c0NsaycsIHtcbiAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgIGV2ZW50OiBlLFxuICAgICAgY29udGV4dDogdGhpc1xuICAgIH1dXG4gIH0pO1xufTtcblxuLy/op6bmkbjkuovku7ZcbmZ1bmN0aW9uIG9uQXBsdXNUb3VjaChlKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciB0aGF0ID0gdGhpcztcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICBhcmd1bWVudHM6IFsnb25BcGx1c1RvdWNoJywge1xuICAgICAgc3RhdHVzOiAncmVhZHknLFxuICAgICAgY29udGV4dDogdGhhdCxcbiAgICAgIGV2ZW50OiBlLFxuICAgIH1dXG4gIH0pO1xufTtcblxuZnVuY3Rpb24gcmV3cml0ZVNoYXJlKG9wdCkge1xuICBpZiAob3B0Lm9uU2hhcmVBcHBNZXNzYWdlKSB7XG4gICAgdmFyIG9sZE9uU2hhcmVBcHBNZXNzYWdlID0gb3B0Lm9uU2hhcmVBcHBNZXNzYWdlO1xuICAgIG9wdC5vblNoYXJlQXBwTWVzc2FnZSA9IGZ1bmN0aW9uKHJlcykge1xuICAgICAgdmFyIHNoYXJlUmVzdWx0ID0gb2xkT25TaGFyZUFwcE1lc3NhZ2UuY2FsbCh0aGlzLCByZXMpIHx8IHt9O1xuICAgICAgcmV0dXJuIGhhbmRsZXJTaGFyZUFwcE1zZyhzaGFyZVJlc3VsdCwgJ29uU2hhcmVBcHBNZXNzYWdlJyk7XG4gICAgfTtcbiAgfVxufTtcblxuLy8g5YiG5Lqr5pyL5Y+L5ZyIXG5mdW5jdGlvbiByZXdyaXRlU2hhcmVUaW1lbGluZShvcHQpIHtcbiAgaWYgKG9wdC5vblNoYXJlVGltZWxpbmUpIHtcbiAgICB2YXIgb2xkT25TaGFyZVRpbWVsaW5lID0gb3B0Lm9uU2hhcmVUaW1lbGluZTtcbiAgICBvcHQub25TaGFyZVRpbWVsaW5lID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgc2hhcmVSZXN1bHQgPSBvbGRPblNoYXJlVGltZWxpbmUuY2FsbCh0aGlzLCByZXMpIHx8IHt9O1xuICAgICAgcmV0dXJuIGhhbmRsZXJTaGFyZUFwcE1zZyhzaGFyZVJlc3VsdCwgJ29uU2hhcmVUaW1lbGluZScpO1xuICAgIH07XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGluamVjdFBhZ2UoKSB7XG4gIHRyeSB7XG4gICAgdmFyIG9sZFBhZ2UgPSBQYWdlO1xuICAgIFBhZ2UgPSBmdW5jdGlvbihwYWdlT3B0aW9ucykge1xuICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25TaG93Jywgb25QYWdlU2hvdyk7XG4gICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkhpZGUnLCBvblBhZ2VIaWRlKTtcbiAgICAgIHV0aWxzLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uVW5sb2FkJywgb25QYWdlVW5sb2FkKTtcbiAgICAgIHV0aWxzLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uTG9hZCcsIG9uUGFnZUxvYWQpO1xuICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25SZWFkeScsIG9uUGFnZVJlYWR5KTtcbiAgICAgIHV0aWxzLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uUHVsbERvd25SZWZyZXNoJywgb25QdWxsRG93blJlZnJlc2gpO1xuICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25SZWFjaEJvdHRvbScsIG9uUmVhY2hCb3R0b20pO1xuICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25BcGx1c0NsaycsIG9uQXBsdXNDbGspO1xuICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25BcGx1c1RvdWNoJywgb25BcGx1c1RvdWNoKTtcbiAgICAgIHJld3JpdGVTaGFyZShwYWdlT3B0aW9ucyk7XG4gICAgICByZXdyaXRlU2hhcmVUaW1lbGluZShwYWdlT3B0aW9ucyk7XG4gICAgICBvbGRQYWdlKHBhZ2VPcHRpb25zKTtcbiAgICB9O1xuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudygnUGFnZSDph43lhpnlvILluLgnKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gaW5qZWN0Q29tcG9uZW50KCkge1xuICB0cnkge1xuICAgIHZhciBvbGRDb21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgQ29tcG9uZW50ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgb3B0aW9ucy5tZXRob2RzID0gb3B0aW9ucy5tZXRob2RzIHx8IHt9O1xuICAgICAgICB2YXIgbWV0aG9kcyA9IG9wdGlvbnMubWV0aG9kcztcbiAgICAgICAgdXRpbHMucmV3cml0ZUZuKG1ldGhvZHMsICdvblNob3cnLCBvblBhZ2VTaG93KTtcbiAgICAgICAgdXRpbHMucmV3cml0ZUZuKG1ldGhvZHMsICdvbkhpZGUnLCBvblBhZ2VIaWRlKTtcbiAgICAgICAgdXRpbHMucmV3cml0ZUZuKG1ldGhvZHMsICdvblVubG9hZCcsIG9uUGFnZUhpZGUpO1xuICAgICAgICB1dGlscy5yZXdyaXRlRm4obWV0aG9kcywgJ29uTG9hZCcsIG9uUGFnZUxvYWQpO1xuICAgICAgICByZXdyaXRlU2hhcmUobWV0aG9kcyk7XG4gICAgICAgIG9sZENvbXBvbmVudChvcHRpb25zKTtcbiAgICAgIH0gY2F0Y2godCkge1xuICAgICAgICBvbGRDb21wb25lbnQob3B0aW9ucyk7XG4gICAgICB9O1xuICAgIH07XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KCdDb21wb25lbnQg6YeN5YaZ5byC5bi4Jyk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBpbmplY3RNaWR3YXkgKG1wQ3R4LCBuYW1lLCBjYWxsYmFjaykge1xuICBpZiAoWydvYmplY3QnLCAnZnVuY3Rpb24nXS5pbmRleE9mKHR5cGVvZiBtcEN0eCkgPiAtMSkge1xuICAgIGNhbGxiYWNrKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coJ3R5cGVvZiAnICsgbmFtZSArICcgaXMgbm90IG9iamVjdCBjYW50IHdhdGNoRXhwLicpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgaW5qZWN0TWlkd2F5KFBhZ2UsICdQYWdlJywgaW5qZWN0UGFnZSk7XG4gICAgICBpbmplY3RNaWR3YXkoQ29tcG9uZW50LCAnQ29tcG9uZW50JywgaW5qZWN0Q29tcG9uZW50KTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2luamVjdF9wYWdlX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSAzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3V0aWwvZm9ybWF0LmpzXG4gKiDlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyB2YXIgdHJ5VG9EZWNvZGUgPSByZXF1aXJlKCcuL3RyeVRvRGVjb2RlJyk7XG5cbmV4cG9ydHMuYXJyMm9iaiA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIHJldCA9IHt9O1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBpO1xuICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBrID0gYXJyW2ldWzBdO1xuICAgIHYgPSBhcnJbaV1bMV07XG4gICAgcmV0W2tdID0gdjtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBwYXJhbSB0byBvYmplY3RcbiAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgb2JqZWN0IOagvOW8j++8jOWmgu+8mlxuICoge1xuICogICBhOiBcIjFcIixcbiAqICAgYjogXCIyXCIsXG4gKiAgIGM6IFwiM1wiXG4gKiB9XG4gKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMucGFyYW0yb2JqID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG4gIGlmICghcGFyYW1zKSBwYXJhbXMgPSAnJztcblxuICB2YXIgb2JqID0ge307XG4gIHZhciBhID0gcGFyYW1zLnNwbGl0KCcmJyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gYVtpXTtcbiAgICB2YXIgaW5kZXggPSBpdGVtLmluZGV4T2YoJz0nKTtcbiAgICB2YXIgZnJhZ21lbnQgPSBpdGVtLnNwbGl0KCc9Jyk7XG4gICAgdmFyIGxlbiA9IGl0ZW0ubGVuZ3RoO1xuICAgIGlmIChmcmFnbWVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgIG9ialtmcmFnbWVudFswXV0gPSBmcmFnbWVudFsxXSB8fCAnJzsgIFxuICAgIH0gZWxzZSBpZiAoaW5kZXggPiAwKSB7XG4gICAgICB2YXIga2V5ID0gaXRlbS5zbGljZSgwLCBpbmRleCk7XG4gICAgICB2YXIgdmFsdWUgPSBpdGVtLnNsaWNlKGluZGV4ICsgMSwgbGVuKSB8fCAnJztcbiAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtmcmFnbWVudFswXV0gPSAnJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5cbi8vIGNvbnNvbGUubG9nKCdUT0RPIGRlbGV0ZSBzX3BsYWluX29iaicpO1xudmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6JztcbmV4cG9ydHMuc19wbGFpbl9vYmogPSBzX3BsYWluX29iajtcblxuLyoqXG4gKiBhcnJheSB0byBwYXJhbVxuICog5bCG5LiA5Liq566A5Y2V55qE5pWw57uE6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI/vvIxcbiAqIOWFtuS4reaVsOe7hOS4ulxuICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuICog55qE5b2i5byP44CCXG4gKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuICogQHBhcmFtIGFyciB7QXJyYXl9XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGFycjJwYXJhbShhcnIsIHNraXBFbmNvZGUpIHtcbiAgdmFyIGEgPSBbXSxcbiAgICBrLFxuICAgIHYsXG4gICAgaSxcbiAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICB2YXIgaXNJblBsYW5PYmogPSBrLmluZGV4T2Yoc19wbGFpbl9vYmopID09PSAwO1xuICAgIHZhciBfdmFsdWUgPSBpc0luUGxhbk9iaiB8fCBza2lwRW5jb2RlID8gdiA6IGVuY29kZVVSSUNvbXBvbmVudCh2KTtcbiAgICBhLnB1c2goaXNJblBsYW5PYmogPyBfdmFsdWUgOiAoayArICc9JyArIF92YWx1ZSkpO1xuICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5leHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblxuLyoqXG4gKiBvYmplY3QgdG8gcGFyYW1cbiAqIOWwhuS4gOS4queugOWNleWvueixoei9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byPXG4gKiDlj4Lop4EgYXJyMnBhcmFtKCkg5pa55rOVXG4gKiBAcGFyYW0gb2JqIHtPYmplY3R9XG4gKiBAcGFyYW0gY29tbVRyYW5zbGF0ZSB7Qm9vbGVhbn0g5pmu6YCa6L2s5o2i5LiN5YGaaXNTdGFydFdpdGjmoKHpqoxcbiAqXG4gKi9cbmV4cG9ydHMub2JqMnBhcmFtID0gZnVuY3Rpb24gKG9iaiwgY29tbVRyYW5zbGF0ZSkge1xuICB2YXIgYSA9IFtdO1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBfdjtcbiAgZm9yIChrIGluIG9iailcbiAgICBpZiAoayAmJiBvYmouaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgIHYgPSAnJyArIG9ialtrXTtcbiAgICAgIF92ID0gayArICc9JyArIHY7XG4gICAgICBpZiAoIWNvbW1UcmFuc2xhdGUpIHtcbiAgICAgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogX3YpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYS5wdXNoKF92KTtcbiAgICAgIH1cbiAgICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5cbmV4cG9ydHMuZW5jb2RlR29rZXlWYWx1ZSA9IGZ1bmN0aW9uIChnb2tleSkge1xuICAvLyB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgLy8gLy8g5a+5Z29rZXnlhoXnmoR2YWx1Zee7n+S4gOWKoOS4gOWxgue8lueggVxuICAvLyBpZiAodHlwZW9mIGdva2V5ID09PSAnb2JqZWN0JyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgLy8gICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG4gIC8vICAgICBpZiAodHlwZW9mIGdva2V5W2tdID09PSAnc3RyaW5nJykge1xuICAvLyAgICAgICB0cnkge1xuICAvLyAgICAgICAgIGdva2V5W2tdID0gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChnb2tleVtrXSkpO1xuICAvLyAgICAgICB9IGNhdGNoIChlKSB7fVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gfVxuICByZXR1cm4gZ29rZXk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZm9ybWF0LmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xuLy8gdmFyIFVQREFURSA9ICd1cGRhdGUnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBwdXNoUXVldWU6ZnVuY3Rpb24obWV0aG9kTmFtZSwgYXJncyl7XG4gICAgICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXNfcXVldWUnKTtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy4nICsgbWV0aG9kTmFtZSxcbiAgICAgICAgYXJndW1lbnRzOiBhcmdzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICAgIGVhY2goYXBsdXNTdGF0aWMub3BlbkFQSXMsIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGFwbHVzW3ZdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgIGVhY2goYXJndW1lbnRzLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IHYgPT09ICdlbnRlcicgPyAnX3NlbmRQVicgOiAnXycgKyB2O1xuICAgICAgICAgIF9zZWxmLnB1c2hRdWV1ZShtZXRob2ROYW1lLCBpdGVtcyk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL29wZW5fYXBpLmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvYXBsdXNfY2xpZW50X21pbmkuanNcbiAqXG4gKiBjbGllbnRJbmZvIGZvciBtaW5pYXBwXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIG1pbmkgPSByZXF1aXJlKCcuLi9saWJfdS91dGlscy9taW5pJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuLi9saWJfdS91dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiDliJ3lp4vljJbmqKHlnZcsIOS4quaAp+WMlumDqOWIhuWtkOexu+S4reWunueOsFxuICAgICAqL1xuICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgLy8gfSxcblxuICAgIF9nZXROZXR3b3JrVHlwZTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgICBpZiAoY3R4LmdldE5ldHdvcmtUeXBlKSB7XG4gICAgICAgIGN0eC5nZXROZXR3b3JrVHlwZSh7XG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgY2FsbGJhY2socmVzID8gcmVzLm5ldHdvcmtUeXBlIDogJycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjaygnJyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOiOt+WPluezu+e7n+S/oeaBryBodHRwczovL2RvY3MuYWxpcGF5LmNvbS9taW5pL2FwaS9zeXN0ZW0taW5mb1xuICAgICAqIOaJi+acuuWei+WPt+OAgeWxj+W5leWIhui+qOeOh+OAgeezu+e7n+eJiOacrOetieS/oeaBr1xuICAgICAqL1xuICAgIF9nZXRTeXN0ZW1JbmZvOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZW1wdHlPYmogPSB7fTtcbiAgICAgIHZhciBzeXNJbmZvID0gX3NlbGYuU1lTVEVNX0lORk8gfHwge307XG4gICAgICBpZiAoc3lzSW5mbyAmJiBzeXNJbmZvLnZlcnNpb24pIHtcbiAgICAgICAgY2FsbGJhY2soX3NlbGYuU1lTVEVNX0lORk8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtaW5pLmdldENvbnRleHQoKS5nZXRTeXN0ZW1JbmZvKHtcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBfc2VsZi5fZ2V0TmV0d29ya1R5cGUoZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgIHJlcy5uZXR3b3JrVHlwZSA9IG47XG4gICAgICAgICAgICAgICAgICBfc2VsZi5TWVNURU1fSU5GTyA9IHJlcztcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3NlbGYuX2dldE5ldHdvcmtUeXBlKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICBlbXB0eU9iai5uZXR3b3JrVHlwZSA9IG47XG4gICAgICAgICAgICAgICAgICBjYWxsYmFjayhlbXB0eU9iaik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNhbGxiYWNrKGVtcHR5T2JqKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBfZ2V0QWNjb3VudEluZm9TeW5jOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaW5mbyA9IHt9O1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgICAgICBpZiAoY3R4LmdldEFjY291bnRJbmZvU3luYyAmJiBjdHguY2FuSVVzZSgnZ2V0QWNjb3VudEluZm9TeW5jJykpIHtcbiAgICAgICAgICAvLyDlvq7kv6FcbiAgICAgICAgICB2YXIgYWNjb3VudEluZm8gPSBjdHguZ2V0QWNjb3VudEluZm9TeW5jKCk7XG4gICAgICAgICAgdmFyIG1pbmlQcm9ncmFtID0gYWNjb3VudEluZm8ubWluaVByb2dyYW0gfHwge307XG4gICAgICAgICAgdmFyIHBsdWdpbiA9IGFjY291bnRJbmZvLnBsdWdpbiB8fCB7fTtcbiAgICAgICAgICBpbmZvLmFwcElkID0gbWluaVByb2dyYW0uYXBwSWQ7ICAvLyDlsI/nqIvluo8gYXBwSWRcbiAgICAgICAgICBpbmZvLmFwcFZlcnNpb24gPSBtaW5pUHJvZ3JhbS52ZXJzaW9uIHx8IG1pbmlQcm9ncmFtLmVudlZlcnNpb247ICAvLyDlsI/nqIvluo8gYXBwVmVyc2lvblxuICAgICAgICAgIGluZm8ucGx1Z2luQXBwSWQgPSBwbHVnaW4uYXBwSWQ7IC8vIOaPkuS7tiBhcHBJZFxuICAgICAgICAgIGluZm8ucGx1Z2luQXBwVmVyc2lvbiA9IHBsdWdpbi52ZXJzaW9uOyAvLyDmj5Lku7YgYXBwVmVyc2lvbiAgXG4gICAgICAgIH0gZWxzZSBpZiAoY3R4LmdldEFwcElkU3luYyAmJiBjdHguY2FuSVVzZSgnZ2V0QXBwSWRTeW5jJykpIHtcbiAgICAgICAgICB2YXIgYXBwSW5mbyA9IGN0eC5nZXRBcHBJZFN5bmMoKSB8fCB7fTtcbiAgICAgICAgICBpbmZvLmFwcElkID0gYXBwSW5mby5hcHBJZCB8fCAnJztcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB3b3Jrbm9cbiAgICAgKiAgIDEuIGNvb2tpZS5nZXRDb29raWUoJ3dvcmtubycpXG4gICAgICogICAyLiBjb29raWUuZ2V0Q29va2llKCdlbXBsSWQnKVxuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoc3RhdGUsIGNiKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgLy8gY29uc29sZS5sb2coJ1RPRE8gZ2V0U3lzdGVtSW5mbycpO1xuICAgICAgdGhpcy5fZ2V0U3lzdGVtSW5mbyhmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIC8vIOaUr+S7mOWuneWwj+eoi+W6j+aWh+ahoyAgc3lzdGVtLeezu+e7n+eJiOacrCBwbGF0Zm9ybS3ns7vnu5/lkI1cbiAgICAgICAgcmVzLnVzZXJBZ2VudCA9ICctJztcbiAgICAgICAgcmVzLm9zID0gcmVzLnBsYXRmb3JtID8gcmVzLnBsYXRmb3JtLnRvTG9jYWxlVXBwZXJDYXNlKCkgOiAnJztcbiAgICAgICAgcmVzLm9zX3ZlcnNpb24gPSByZXMuc3lzdGVtID8gcmVzLnN5c3RlbSA6ICcnO1xuICAgICAgICByZXMuYWNjZXNzID0gcmVzLmJyYW5kID8gcmVzLmJyYW5kIDogJyc7XG4gICAgICAgIHZhciBob3N0ID0gJyc7XG4gICAgICAgIGlmKHJlcy5ob3N0ICYmICh0eXBlb2YgcmVzLmhvc3QuZW52ID09PSAnc3RyaW5nJykpe1xuICAgICAgICAgIGhvc3QgPSByZXMuaG9zdC5lbnY7XG4gICAgICAgIH1cbiAgICAgICAgcmVzLmhvc3QgPSBob3N0O1xuXG4gICAgICAgIHZhciBhY2NvdW50SW5mbyA9IF9zZWxmLl9nZXRBY2NvdW50SW5mb1N5bmMoKTtcbiAgICAgICAgdmFyIHJzID0gT2JqZWN0LmFzc2lnbih7fSwgcmVzLCBhY2NvdW50SW5mbyk7XG5cbiAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICAgIGFwbHVzLl9hcGx1c19jbGllbnQgPSBycztcbiAgICAgICAgY2IoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIDIwMDA7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfY2xpZW50X21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxudmFyIFB1YlN1YiA9IHJlcXVpcmUoJ0Bjb3JlL1B1YlN1YicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46ICBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIC8vIOS/neivgeWPquS8muacieS4gOS4qnB1YnN1Yui/kOihjFxuICAgICAgaWYgKGFwbHVzLmFwbHVzX3B1YnN1Yikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBhcGx1cy5hcGx1c19wdWJzdWLmmK/kuIDkuKrnm5HlkKzogIXvvIzlnKjmj5Lku7bljJblhoXpg6jkvJrnlKjliLDku5bvvIzmnInmlbDmja7lj5jljJblsIbkvJrlj5HlsITnm7jlupTnmoRkYXRhY2hhbmdl5LqL5Lu2XG4gICAgICBhcGx1cy5hcGx1c19wdWJzdWIgPSBQdWJTdWIuY3JlYXRlKCk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX21lc3NhZ2VyL3B1YnN1Yl9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL1B1YlN1Yi5qc1xuICog5raI5oGv6K6i6ZiF5qih5Z6LXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIEJhc2UgPSByZXF1aXJlKCdAY29yZS9CYXNlJyk7XG5cbnZhciBnZXRBcmdzID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBfYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcbiAgZm9yICh2YXIgaiA9IDE7IGogPCBsZW47IGorKykge1xuICAgIF9hcmdzW2ogLSAxXSA9IGFyZ3Nbal07XG4gIH1cbiAgcmV0dXJuIF9hcmdzO1xufTtcblxudmFyIFB1YlN1YiA9IEJhc2UuZXh0ZW5kKHtcbiAgLyoqXG4gICAqIOWvuWZu6L+b6KGM5pat6KiA77yM5LiN5piv4oCYZnVuY3Rpb27igJnnsbvlnovmiqXplJnvvIzlkKbliJnov5Tlm55mblxuICAgKi9cbiAgY2FsbGFibGU6IGZ1bmN0aW9uIChmbikge1xuICAgIGlmICghaXNGdW5jdGlvbihmbikpIHRocm93IG5ldyBUeXBlRXJyb3IoZm4gKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gICAgcmV0dXJuIGZuO1xuICB9LFxuXG4gIGNyZWF0ZTogZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgdmFyIGluc3RhbmNlID0gbmV3IHRoaXMoKTtcbiAgICAvLyDnu5Hlrpror6Xlrp7kvovnmoTlsZ7mgKdcbiAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG4gICAgICBpbnN0YW5jZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuICAgIH1cblxuICAgIGluc3RhbmNlLmhhbmRsZXJzID0gW107XG4gICAgaW5zdGFuY2UucHVicyA9IHt9O1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSxcblxuICBzZXRIYW5kbGVyczogZnVuY3Rpb24oaGFuZGxlcnMpIHtcbiAgICB0aGlzLmhhbmRsZXJzID0gaGFuZGxlcnM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiuoumYheWPpeafhOS4uuKAnGVUeXBl4oCd55qE5raI5oGv77yM5b2T5pyJ5raI5oGv6L+H5p2l5omn6KGM5Zue6LCD5Ye95pWw77ya4oCcaOKAnVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg6K6i6ZiF55qE5raI5oGv5Y+l5p+EXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGgg6K6i6ZiF55qE5raI5oGv5Zue6LCD5Ye95pWwXG4gICAqIEByZXR1cm4gY29udGV4dFxuICAgKi9cbiAgc3Vic2NyaWJlOiBmdW5jdGlvbihlVHlwZSwgaCl7XG4gICAgLy8g5a+55Zue6LCD5Ye95pWw6L+b6KGM5pat6KiAXG4gICAgdGhpcy5jYWxsYWJsZShoKTtcblxuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdmFyIHB1YnMgPSBfc2VsZi5wdWJzIHx8IHt9O1xuXG4gICAgdmFyIGFyciA9IHB1YnNbZVR5cGVdIHx8IFtdO1xuICAgIGlmIChhcnIpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBfYXJncyA9IGFycltpXSgpO1xuICAgICAgICBoLmFwcGx5KF9zZWxmLCBfYXJncyk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBoYW5kbGVycyA9IF9zZWxmLmhhbmRsZXJzIHx8IFtdO1xuICAgIGlmKCEoZVR5cGUgaW4gaGFuZGxlcnMpKSB7XG4gICAgICBoYW5kbGVyc1tlVHlwZV0gPSBbXTtcbiAgICB9XG4gICAgaGFuZGxlcnNbZVR5cGVdLnB1c2goaCk7XG4gICAgX3NlbGYuc2V0SGFuZGxlcnMoaGFuZGxlcnMpO1xuICAgIHJldHVybiBfc2VsZjtcbiAgfSxcblxuICAvKipcbiAgICog5Y+W5raI6K6i6ZiF77yM5bCG5Lya5Y+W5raI4oCcZVR5cGXigJ3lj6Xmn4Tlr7nlupTnmoTigJxo4oCd5Zue6LCD5Ye95pWw5LiL55qE5omA5pyJ6K6i6ZiFXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4RcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaCDorqLpmIXnmoTmtojmga/lm57osIPlh73mlbBcbiAgICogQHJldHVybiBjb250ZXh0XG4gICAqL1xuICB1bnN1YnNjcmliZTogZnVuY3Rpb24oZVR5cGUsIGgpIHtcbiAgICAvLyDlr7nlm57osIPlh73mlbDov5vooYzmlq3oqIBcbiAgICB0aGlzLmNhbGxhYmxlKGgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciBzID0gdGhpcy5oYW5kbGVyc1tlVHlwZV07XG4gICAgICBpZiAoIXMpIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAodHlwZW9mIHMgPT09ICdvYmplY3QnICYmIHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBoX3N0ciA9IGgudG9TdHJpbmcoKTtcbiAgICAgICAgICB2YXIgc19zdHIgPSBzW2ldLnRvU3RyaW5nKCk7XG4gICAgICAgICAgaWYgKGhfc3RyID09PSBzX3N0cikge1xuICAgICAgICAgICAgcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlcnNbZVR5cGVdID0gcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmhhbmRsZXJzW2VUeXBlXTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIC8qKlxuICAgKiDmtojmga/liIblj5HvvIzlsIbkvJrliIblj5HliLDmiYDmnInorqLpmIVlVHlwZeWPpeafhOeahOiuoumYheiAhVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg5YiG5Y+R5raI5oGv5Y+l5p+EXG4gICAqL1xuICBwdWJsaXNoOiBmdW5jdGlvbiAoZVR5cGUpIHtcblxuICAgIHZhciBhcmdzID0gZ2V0QXJncyhhcmd1bWVudHMpO1xuICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMgfHwgW107XG5cbiAgICB2YXIgc2l6ZSA9IGhhbmRsZXJzW2VUeXBlXSA/IGhhbmRsZXJzW2VUeXBlXS5sZW5ndGggOiAwO1xuICAgIGlmIChzaXplID4gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgdmFyIGZuID0gaGFuZGxlcnNbZVR5cGVdW2ldO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcbiAgICAgICAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG4gIGNhY2hlUHViczogZnVuY3Rpb24gKGVUeXBlKSB7XG4gICAgdmFyIHB1YnMgPSB0aGlzLnB1YnMgfHwge307XG4gICAgdmFyIGFyZ3MgPSBnZXRBcmdzKGFyZ3VtZW50cyk7XG4gICAgaWYgKCFwdWJzW2VUeXBlXSkge1xuICAgICAgcHVic1tlVHlwZV0gPSBbXTtcbiAgICB9XG4gICAgcHVic1tlVHlwZV0ucHVzaChmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYXJncztcbiAgICB9KTtcbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHViU3ViO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9QdWJTdWIuanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L2NvcmUvQmFzZS5qc1xuICog5Z+657G777yM5o+Q5L6b57G75omA6ZyA6KaB55qE5Z+656GA5bGe5oCnXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xuXG4vLyDln7rnsbtcbmZ1bmN0aW9uIEJhc2UoKSB7fVxuXG4vLyDlsIZleHRlbmTlkoxjcmVhdGXnva7kuo5wcm90b3R5cGXlr7nosaHkuK3vvIzku6Xkvr/lrZDnsbvnu6fmib9cbkJhc2UucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uKCkge307XG5CYXNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbigpIHt9O1xuXG4vLyDkuLrkuobog73lnKjln7rnsbvkuIrnm7TmjqXku6UuZXh0ZW5k55qE5pa55byP6L+b6KGM6LCD55SoXG5CYXNlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIHJldHVybiB0aGlzLnByb3RvdHlwZS5leHRlbmQuY2FsbCh0aGlzLCBwcm9wcyk7XG59O1xuXG5CYXNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihwcm9wcykge1xuICAvKipcbiAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG4gICAqIGNyZWF0Zei/lOWbnueahOWunuS+i+WunumZheS4iuWwseaYr25ld+aehOmAoOWHuueahOWunuS+i++8m1xuICAgKiB0aGlz5Y2z5oyH5ZCR6LCD55So5b2T5YmNY3JlYXRl55qE5p6E6YCg5Ye95pWw77ybXG4gICAqL1xuICB2YXIgaW5zdGFuY2UgPSBuZXcgdGhpcygpO1xuICAvLyDnu5Hlrpror6Xlrp7kvovnmoTlsZ7mgKdcbiAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuICAgIGluc3RhbmNlW25hbWVdID0gcHJvcHNbbmFtZV07XG4gIH1cbiAgcmV0dXJuIGluc3RhbmNlO1xufTtcblxuQmFzZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgLy8g5rS+55Sf5Ye65p2l55qE5paw55qE5a2Q57G7XG4gIHZhciBTdWJCYXNlID0gZnVuY3Rpb24oKSB7fTtcbiAgdHJ5IHtcbiAgICAvKipcbiAgICAgKiDnu6fmib/niLbnsbvnmoTlsZ7mgKflkozmlrnms5XvvIxcbiAgICAgKiDlvZPnhLbliY3mj5DmmK/niLbnsbvnmoTlsZ7mgKfpg73mlL7lnKhwcm90b3R5cGXkuK1cbiAgICAgKiDogIzpnZ7kuIrpnaJjcmVhdGXmlrnms5XnmoTigJzlrp7kvovlsZ7mgKfigJ3kuK1cbiAgICAgKi9cbiAgICBpZiAoIWlzRnVuY3Rpb24oT2JqZWN0LmNyZWF0ZSkpIHtcbiAgICAgIE9iamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAobykge1xuICAgICAgICBmdW5jdGlvbiBGKCkge31cbiAgICAgICAgRi5wcm90b3R5cGUgPSBvO1xuICAgICAgICByZXR1cm4gbmV3IEYoKTtcbiAgICAgIH07XG4gICAgfVxuICAgIFN1YkJhc2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSh0aGlzLnByb3RvdHlwZSk7XG5cbiAgICAvLyDlubbkuJTmt7vliqDoh6rlt7HnmoTmlrnms5XlkozlsZ7mgKdcbiAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG4gICAgICBTdWJCYXNlLnByb3RvdHlwZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuICAgIH1cbiAgICBTdWJCYXNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YkJhc2U7XG5cbiAgICAvLyDpnIDopoHku6UuZXh0ZW5k55qE5pa55byP5ZKMLmNyZWF0ZeeahOaWueW8j+iwg+eUqO+8mlxuICAgIFN1YkJhc2UuZXh0ZW5kID0gU3ViQmFzZS5wcm90b3R5cGUuZXh0ZW5kO1xuICAgIFN1YkJhc2UuY3JlYXRlID0gU3ViQmFzZS5wcm90b3R5cGUuY3JlYXRlO1xuICB9IGNhdGNoKGVycikge1xuICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coZXJyKTtcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gU3ViQmFzZTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9CYXNlLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog6I635Y+W6aG16Z2i5LiK55qEIDxtZXRhPiDkuK3kuI4gYXBsdXMg5omT54K555u45YWz55qE5YC8XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9tZXRhL21haW5fbWluaScpKHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfbWV0YV9pbmplY3RfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuICogbWV0YemFjee9ruaPkuS7tu+8jOiiq2FwaeaPkuS7tuS+nei1llxuICpcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgbWV0YUluZm8gPSByZXF1aXJlKCcuL21ldGFJbmZvTWluaScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcGx1c19jb25maWcpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICB2YXIgXyQgPSAoYXBsdXMuXyQgPSBhcGx1cy5fJCB8fCB7fSk7IC8vIOWGhemDqOS9v+eUqOeahOWPmOmHj1xuICBfJC5pc190ZXJtaW5hbCA9IHRydWU7XG4gIF8kLnNlbmRfcHZfY291bnQgPSAwO1xuICAvLyBfJC5zdGF0dXMgPSBTVEFUVVM7XG4gIC8vIF8kLnNjcmlwdF9uYW1lID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5zY3JpcHRfbmFtZTtcbiAgXyQuc3BtID0ge1xuICAgIGRhdGE6IHt9XG4gIH07XG4gIF8kLm1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKSB8fCB7fTtcbiAgYXBsdXMuZ2xvYmFsQ29uZmlnID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZztcblxuICBmb3IgKHZhciBrIGluIGFwbHVzX2NvbmZpZy5tZXRhSW5mbykge1xuICAgIG1ldGFJbmZvLnNldE1ldGFJbmZvKGssIGFwbHVzX2NvbmZpZy5tZXRhSW5mb1trXSk7XG4gIH1cbiAgYXBsdXMuXyQgPSBfJDtcblxuICBhcGx1cy5pc0ludGVybmF0aW9uYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX21ldGEvbWFpbl9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog6I635Y+W6aG16Z2i5LiK55qEIDxtZXRhPiDkuK3kuI4gYXBsdXMg5omT54K555u45YWz55qE5YC8XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gdmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblxudmFyIGluZm8gPSB7fTtcblxudmFyIE9CSkVDVCA9ICdvYmplY3QnO1xudmFyIFNUUklORyA9ICdzdHJpbmcnO1xuXG4vKipcbiAqIEByZXR1cm5zIHt7fX1cbiAqL1xudmFyIGxhc3RfaW5mbztcbmZ1bmN0aW9uIGdldEluZm8oKSB7XG4gIGxhc3RfaW5mbyA9IGluZm8gfHwge307XG4gIHJldHVybiBpbmZvO1xufTtcbmV4cG9ydHMuZ2V0SW5mbyA9IGdldEluZm87XG5cbi8vIOWmguaenOaciee8k+WtmO+8jOS9v+eUqOe8k+WtmOeahOWAvO+8jOayoeaciee8k+WtmOWImeS7jiBET00g5Lit6K+75Y+WXG5mdW5jdGlvbiBxR2V0ICgpIHtcbiAgcmV0dXJuIGxhc3RfaW5mbyB8fCBnZXRJbmZvKCk7XG59O1xuZXhwb3J0cy5xR2V0ID0gcUdldDtcblxuLyoqXG4gKiDliqjmgIHphY3nva5tZXRhXG4gKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcbiAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvcHJvamVjdC9wZXJmb3JtYW5jZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrXG4gKiBAcGFyYW0ge09iamVjdH0gdlxuICovXG5mdW5jdGlvbiBzZXRNZXRhSW5mbyAoaywgdikge1xuICBpZiAoIWxhc3RfaW5mbykge1xuICAgIGxhc3RfaW5mbyA9IHt9O1xuICB9XG4gIGxhc3RfaW5mb1trXSA9IHY7XG4gIHJldHVybiB0cnVlO1xufTtcbmV4cG9ydHMuc2V0TWV0YUluZm8gPSBzZXRNZXRhSW5mbztcblxuLyoqXG4gKiBnZXQgbWV0YUluZm8gYnkga2V5XG4gKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcbiAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvcHJvamVjdC9wZXJmb3JtYW5jZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG52YXIgZ2V0TWV0YUluZm8gPSBmdW5jdGlvbihrKSB7XG4gIGlmICghbGFzdF9pbmZvKSB7XG4gICAgbGFzdF9pbmZvID0ge307XG4gIH1cbiAgcmV0dXJuIGxhc3RfaW5mb1trXSB8fCAnJztcbn07XG5leHBvcnRzLmdldE1ldGFJbmZvID0gZ2V0TWV0YUluZm87XG5cbi8qKlxuICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG4gKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcbiAqICAtIGBBcnJheS5wcm90b3R5cGUuY29uY2F0YCBjYWxsZWQgb24gQXJyYXkgdmFsdWVzLlxuICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuICogIEBwYXJhbSBrXG4gKiAgQHBhcmFtIHZcbiAqL1xudmFyIGFwcGVuZE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcbiAgLy8gY29uc29sZS5sb2coaywgdik7XG4gIGlmIChrICYmIHYpIHtcbiAgICAvLyBhcGx1cy11dHBhcmFtIHx8IGFwbHVzLW5leHRwYWdlLXV0cGFyYW0gfHwgYXBsdXMtZXhkYXRhXG4gICAgdmFyIHByb2Nlc3NPYmplY3QgPSBmdW5jdGlvbiAob2xkX3ZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuICAgICAgICB0b1NldE1ldGFJbmZvKGssIE9iamVjdC5hc3NpZ24oe30sIG9sZF92YWx1ZSwgbmV3X3ZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH07XG4gICAgLy8gYXBsdXMtYXV0by1leHAgfHwgYXBsdXMtYXV0by1jbGtcbiAgICB2YXIgcHJvY2Vzc0FycmF5ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIG5ld192YWx1ZSA9IHR5cGVvZiB2ID09PSBTVFJJTkcgPyBKU09OLnBhcnNlKHYpIDogdjtcbiAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBvbGRfdmFsdWUuY29uY2F0KG5ld192YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9O1xuXG4gICAgdmFyIHByb2Nlc3NPYmogPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgcHJvY2Vzc0FycmF5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3NPYmplY3QodmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHRvU2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgX3NldE1ldGFJbmZvKGtleSwgdmFsdWUsIHtcbiAgICAgICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBmbGFnO1xuICAgIHZhciBfb2xkVmFsdWUgPSBnZXRNZXRhSW5mbyhrKTtcbiAgICBpZiAoayA9PT0gJ2FwbHVzLWV4aW5mbycpIHtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgT2JqZWN0LmFzc2lnbih7fSwgX29sZFZhbHVlLCBmb3JtYXQucGFyYW0yb2JqKHYpKSk7XG4gICAgICBmbGFnID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGsgPT09ICdhcGx1cy1wYWdlLXByb3BlcnRpZXMnKSB7XG4gICAgICB2YXIgcGFnZVByb3BlcnRpZXMgPSB2O1xuICAgICAgaWYgKF9vbGRWYWx1ZSkge1xuICAgICAgICBmb3IgKHZhciBfayBpbiBfb2xkVmFsdWUpIHtcbiAgICAgICAgICBpZiAodltfa10pIHtcbiAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IE9iamVjdC5hc3NpZ24oe30sIF9vbGRWYWx1ZVtfa10sIHZbX2tdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFnZVByb3BlcnRpZXNbX2tdID0gX29sZFZhbHVlW19rXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRvU2V0TWV0YUluZm8oaywgcGFnZVByb3BlcnRpZXMpO1xuICAgICAgZmxhZyA9IHRydWU7XG4gICAgfVxuICAgIGlmIChfb2xkVmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgX29sZFZhbHVlID09PSBPQkpFQ1QpIHtcbiAgICAgICAgcHJvY2Vzc09iaihfb2xkVmFsdWUpO1xuICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHRtcF9wYXJzZSA9IEpTT04ucGFyc2UoX29sZFZhbHVlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRtcF9wYXJzZSA9PT0gT0JKRUNUKSB7XG4gICAgICAgICAgICBwcm9jZXNzT2JqKHRtcF9wYXJzZSk7XG4gICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZsYWcpIHtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgdik7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy5hcHBlbmRNZXRhSW5mbyA9IGFwcGVuZE1ldGFJbmZvO1xuXG52YXIgX3NldE1ldGFJbmZvID0gZnVuY3Rpb24gKGFyZzEsIHZhbHVlKSB7XG4gIHZhciBrO1xuICB2YXIgdjtcbiAgdmFyIGRlZmF1bHRNb2RlID0gJ09WRVJXUklURSc7XG4gIHZhciBtb2RlID0gZGVmYXVsdE1vZGU7XG4gIGlmICh0eXBlb2YgYXJnMSA9PT0gJ29iamVjdCcpIHtcbiAgICBrID0gYXJnMS5tZXRhTmFtZTtcbiAgICB2ID0gYXJnMS5tZXRhVmFsdWU7XG4gICAgbW9kZSA9IGFyZzEubW9kZSB8fCBkZWZhdWx0TW9kZTtcbiAgfSBlbHNlIHtcbiAgICBrID0gYXJnMTtcbiAgICB2ID0gdmFsdWU7XG4gIH1cbiAgaWYgKG1vZGUgPT09IGRlZmF1bHRNb2RlKSB7XG4gICAgaWYgKHNldE1ldGFJbmZvKGssIHYpKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgXyQubWV0YV9pbmZvID0gcUdldCgpO1xuICAgICAgdmFyIHJzID0gdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cbiAgICAgIHZhciBtc2dzID0gWydzZXRNZXRhSW5mbycsIGssIHYsIHt9XTtcbiAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgICAgcmV0dXJuIHJzO1xuICAgIH0gXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFwcGVuZE1ldGFJbmZvKGssIHYpO1xuICB9XG59O1xuZXhwb3J0cy5fc2V0TWV0YUluZm8gPSBfc2V0TWV0YUluZm87XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tZXRhSW5mb01pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4vdXRpbEdvbGRsb2cnKTtcblxudmFyIEZOID0gJ2Z1bmN0aW9uJztcblxudmFyIGdldFB1YnN1YiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHB1YnN1YiA9IGFwbHVzLmFwbHVzX3B1YnN1YiB8fCB7fTtcbiAgdmFyIGZsYWcgPSB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOO1xuICByZXR1cm4gZmxhZyA/IHB1YnN1YiA6ICcnO1xufTtcblxuLyoqXG4gKiDliIblj5Hmtojmga/lt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvUHViTXNnID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5wdWJsaXNoID09PSBGTikge1xuICAgIHB1YnN1Yi5wdWJsaXNoLmFwcGx5KHB1YnN1YiwgYXJncyk7XG4gIH1cbn07XG5cbi8qKlxuICogY2FjaGXlvZPliY3nmoTliIblj5Hlh73mlbDnmoTlt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvQ2FjaGVQdWJzID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5jYWNoZVB1YnMgPT09IEZOKSB7XG4gICAgcHVic3ViLmNhY2hlUHVicy5hcHBseShwdWJzdWIsIGFyZ3MpO1xuICB9XG59O1xuXG4vKipcbiAqIOiuoumYhea2iOaBr+W3peWFt+WHveaVsFxuICogQHBhcmFtcyB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYihbIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXSlcbiAqL1xuZXhwb3J0cy5kb1N1Yk1zZyA9IGZ1bmN0aW9uKGtleSwgY2IpIHtcbiAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIuc3Vic2NyaWJlID09PSBGTikge1xuICAgIHB1YnN1Yi5zdWJzY3JpYmUoa2V5LCBjYik7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUHVic3ViLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcblxuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgcmVxdWlyZSgnLi9saWJfYXV0b19jbGsvbWFpbicpKCk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfY2xrLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBjb2xsZWN0X2NsayA9IHJlcXVpcmUoJy4vY29sbGVjdF9jbGsnKTtcbi8vIHZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy9pc0FycmF5Jyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAvLyB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gIHZhciBhcGx1c0N0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBjbGtfY29uZmlnID0gW107XG5cbiAgdmFyIGluaXRDbGsgPSBmdW5jdGlvbiAob3B0KSB7XG4gICAgY2xrX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpO1xuICAgIHZhciBzcG1CID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcbiAgICBpZiAoaXNBcnJheShjbGtfY29uZmlnKSkge1xuICAgICAgY2xrX2NvbmZpZy5mb3JFYWNoKGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgaWYgKCF1dGlsRGFzaC5pc1N0YXJ0V2l0aChjb25maWcuY3NzU2VsZWN0b3IsICcuJykpIHtcbiAgICAgICAgICBjb25maWcuY3NzU2VsZWN0b3IgPSAnLicgKyBjb25maWcuY3NzU2VsZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb25maWcuc3BtQikge1xuICAgICAgICAgIGNvbmZpZy5zcG1CID0gc3BtQjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxlbWVudHMgPSBvcHQuY29udGV4dC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKGNvbmZpZy5jc3NTZWxlY3Rvcik7XG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudHMuZmllbGRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZWxlbWVudHMuZmllbGRzKHtcbiAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgZGF0YXNldDogdHJ1ZSxcbiAgICAgICAgICAgIHJlY3Q6IHRydWUsXG4gICAgICAgICAgICBzY3JvbGxPZmZzZXQ6IHRydWVcbiAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBjb2xsZWN0X2Nsay53YXRjaF9jbGljayhvcHQuZXZlbnQgfHwgb3B0LnJlcywgY2xvbmVEZWVwKHJlcyksIGNvbmZpZyk7XG4gICAgICAgICAgfSkuZXhlYygpOyBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDkuI3mlK/mjIFmaWVsZHPmlrnms5XnmoTlnLrmma/vvIjmlK/ku5jlrp3kuIvvvIzmlLnnlKjlnZDmoIfvvIlcbiAgICAgICAgICBlbGVtZW50cy5ib3VuZGluZ0NsaWVudFJlY3QoKS5leGVjKGZ1bmN0aW9uIChyZXQpIHtcbiAgICAgICAgICAgIGlmIChyZXQgJiYgcmV0Lmxlbmd0aCA+IDAgJiYgcmV0WzBdKSB7XG4gICAgICAgICAgICAgIGNvbGxlY3RfY2xrLndhdGNoX2NsaWNrKG9wdC5ldmVudCwgY2xvbmVEZWVwKHJldFswXSksIGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgXG4gIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICBjbGtfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJyk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG4gIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvblNob3cnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBUT0RPXG4gICAgfV1cbiAgfSk7XG4gIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvbkhpZGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBUT0RPXG4gICAgfV1cbiAgfSk7XG5cbiAgYXBsdXNDdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uQXBsdXNDbGsnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICBpbml0Q2xrKG9wdCk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG5cbiAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25VbmxvYWQnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIC8vIFRPRE9cbiAgICB9XG4gIH0pO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbGliX2F1dG9fY2xrL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgd2F0Y2hUcmFja2VyID0gcmVxdWlyZSgnLi4vdXRpbHMvd2F0Y2hUcmFja2VyJyk7XG52YXIgZ2V0SGFzaEtleSA9IHJlcXVpcmUoJy4uL3V0aWxzL2dldEhhc2hLZXknKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcblxuLyoqXG4gKiDmioroh6rliqjmm53lhYnnm7jlkIxjc3NTZWxlY3RvcueahOebuOWQjOS9jee9rueahGRhdGFzZXTmi7/liLDnu5noh6rliqjngrnlh7vkvb/nlKhcbiAqIOWboOS4uuWcqOaUr+S7mOWuneeOr+Wig+S4i+iHquWKqOeCueWHu+S6i+S7tuaLv+S4jeWIsGRhdGFzZXRcbiAqL1xuZnVuY3Rpb24gZ2V0RGF0YVNldCAoY29uZmlnLCBpbmRleCkge1xuICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuICBcbiAgZm9yICh2YXIgbG9na2V5IGluIF9oYXNoTWFwKSB7XG4gICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2ID0gZWxlX3NbaV0gfHwge307XG4gICAgICB2YXIgZXhwQ29uZmlnID0gdi5leHBDb25maWcgfHwge307XG4gICAgICAvLyDmm53lhYljc3NTZWxlY3RvcuS4jueCueWHu+eahGNzc1NlbGVjdG9y55u45ZCM5omN6K6k5Li65piv5ZCM57G75Z6L5YWD57SgXG4gICAgICBpZiAoY29uZmlnLmNzc1NlbGVjdG9yID09PSBleHBDb25maWcuY3NzU2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KHtcbiAgICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgICAgfSwgZXhwQ29uZmlnKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChoYXNoID09PSB2Lmhhc2hfdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gY2xvbmVEZWVwKHYuZGF0YXNldCk7XG4gICAgICAgIH0gIFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG5cbmV4cG9ydHMud2F0Y2hfY2xpY2sgPSBmdW5jdGlvbiAoY2xrSW5mbywgZWxlbWVudHMsIGNvbmZpZykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgLy8gdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgdmFyIF92YWx1ZSA9IGVsZW1lbnRzW2pdO1xuICAgIGlmIChpc0luQXJlYShjbGtJbmZvLCBfdmFsdWUpKSB7XG4gICAgICB2YXIgaW5kZXggPSBqICsgMTtcbiAgICAgIHZhciBkYXRhc2V0ID0gX3ZhbHVlLmRhdGFzZXQgfHwgZ2V0RGF0YVNldChjb25maWcsIGluZGV4KSB8fCB7fTtcbiAgICAgIHZhciBzcG1EYXRhID0ge307XG4gICAgICB2YXIgX3NwbURhdGEgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZGF0YXNldC50cmFja2VyUGFyYW1zKSB8fCB7fTtcbiAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgLy8g5Y+WZGF0YS10cmFja2VyIOaIliBjc3NTZWxlY3RvclxuICAgICAgICB2YXIgc3BtQyA9IGRhdGFzZXQudHJhY2tlciB8fCBjb25maWcuY3NzU2VsZWN0b3IucmVwbGFjZSgvXFwnfFxcXCJ8XFw7fFxcOnxcXD18XFxbfFxcXXxcXC58XFwjfFxcLXxcXC98XFx8L2csICcnKTsgLy8g5Y675o6J54m55q6K5a2X56ymXG4gICAgICAgIHNwbURhdGEgPSBhcGx1cy5fJC5zcG0uZGF0YSB8fCB7fTtcbiAgICAgICAgc3BtRGF0YS5jID0gc3BtQztcbiAgICAgICAgaWYgKHNwbURhdGEuYyAmJiBzcG1EYXRhLmMgIT09ICcwJykge1xuICAgICAgICAgIHZhciBzcG1EID0gJ2QnICsgaW5kZXg7XG4gICAgICAgICAgc3BtRGF0YS5kID0gc3BtRDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3BtRGF0YS5iID0gY29uZmlnLnNwbUI7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5zcG1DKSB7XG4gICAgICAgICAgc3BtRGF0YS5jID0gY29uZmlnLnNwbUM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BtRGF0YS5jID0gX3NwbURhdGEuc3BtQyA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1DKSA6ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZy5zcG1EKSB7XG4gICAgICAgICAgc3BtRGF0YS5kID0gaW5kZXggPyBjb25maWcuc3BtRCArICdfJyArIGluZGV4IDogY29uZmlnLnNwbUQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BtRGF0YS5kID0gX3NwbURhdGEuc3BtRCA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1EKSA6ICcnO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICAgIHdhdGNoVHJhY2tlci5wdXNoRXZlbnQoJ0NMSycsIGRhdGFzZXQsIGNvbmZpZywgX3ZhbHVlLCBzcG1EYXRhKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0luQXJlYSAoY2xrSW5mbywgZWxlSW5mbykge1xuICAgIHZhciBjaGFuZ2VkVG91Y2ggPSB7fTtcbiAgICBpZiAoY2xrSW5mbykge1xuICAgICAgaWYgKGNsa0luZm8uY2hhbmdlZFRvdWNoZXMpIHtcbiAgICAgICAgLy8g5b6u5L+hXG4gICAgICAgIGNoYW5nZWRUb3VjaCA9IGNsa0luZm8uY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgICB9IGVsc2UgaWYgKGNsa0luZm8uZGV0YWlsKSB7XG4gICAgICAgIC8vIOaUr+S7mOWunVxuICAgICAgICBjaGFuZ2VkVG91Y2ggPSBjbGtJbmZvLmRldGFpbDtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHggPSBjaGFuZ2VkVG91Y2guY2xpZW50WCB8fCAwO1xuICAgIHZhciB5ID0gY2hhbmdlZFRvdWNoLmNsaWVudFkgfHwgMDtcblxuICAgIHZhciBfdG9wID0gZWxlSW5mby50b3A7XG4gICAgdmFyIF9ib3R0b20gPSBlbGVJbmZvLmJvdHRvbTtcbiAgICBpZiAoZWxlSW5mby5zY3JvbGxUb3ApIHtcbiAgICAgIF90b3AgKz0gZWxlSW5mby5zY3JvbGxUb3A7XG4gICAgICBfYm90dG9tICs9IGVsZUluZm8uc2Nyb2xsVG9wO1xuICAgIH1cblxuICAgIGlmIChlbGVJbmZvLmxlZnQgPCB4ICYmIHggPCBlbGVJbmZvLnJpZ2h0ICYmIF90b3AgPCB5ICYmIHkgPCBfYm90dG9tKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19jbGsvY29sbGVjdF9jbGsuanNcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xuXG52YXIgcmVjb3JkRXhwTWFwUXVldWUgPSB7fTtcbnZhciBERUZBVUxUX1BLR19TSVpFID0gMztcbnZhciBQT1NUID0gJ1BPU1QnO1xudmFyIEVYUCA9ICdFWFAnO1xuXG4vKipcbiAqIOiOt+WPlueUqOaIt+azqOWFpeeahOWfi+eCueS/oeaBr++8mmh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9kb2NzL21ldGEjYjdkOGNjYzdcbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSB1c2VyRm5OYW1lXG4gKiBAcGFyYW1zIHtPYmplY3R9IGVsZW1lbnRcbiAqIEBwYXJhbXMge09iamVjdH0gc2VsZWN0b3JcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldFVzZXJJbmZvICh1c2VyRm5OYW1lLCBlbGVtZW50LCBzZWxlY3Rvcikge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKSB8fCB7fTtcbiAgdmFyIGdldE1ldGFJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm87XG4gIGlmICh0eXBlb2YgZ2V0TWV0YUluZm8gPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgdXNlckZuID0gZ2V0TWV0YUluZm8odXNlckZuTmFtZSk7XG4gICAgdmFyIHVzZXJJbmZvID0ge307XG4gICAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHVzZXJJbmZvID0gdXNlckZuKGVsZW1lbnQgPyBjbG9uZURlZXAoZWxlbWVudCkgOiB7fSwgc2VsZWN0b3IpO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0LnBhcmFtMm9iaih1c2VySW5mbyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG59XG5cbi8vIOiBmuWQiOS4iuaKpeabneWFieaXpeW/l1xudmFyIEV2ZW50QXJyYXkgPSBCYXNlLmV4dGVuZCh7XG4gIHB1c2g6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgIHdoaWxlICh0aGlzLmJ1ZmZlci5sZW5ndGggPj0gdGhpcy5wa2dTaXplKSB7XG4gICAgICB2YXIgZ29rZXlzID0gdGhpcy5idWZmZXIuc3BsaWNlKDAsIHRoaXMucGtnU2l6ZSk7XG4gICAgICBpZiAoZ29rZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXBsdXMuY29tYmluZVJlY29yZCh0aGlzLmxvZ2tleSwgRVhQLCBnb2tleXMsIHRoaXMubWV0aG9kKTtcbiAgICAgIH1cbiAgICB9IFxuICB9XG59KTtcblxuZnVuY3Rpb24gZ2V0Rml4ZWROdW1iZXIgKHZhbHVlLCBsZW5ndGgpIHtcbiAgdmFyIF9yZXN1bHQgPSAnJztcbiAgdHJ5IHtcbiAgICB2YXIgX251bSA9IG5ldyBOdW1iZXIodmFsdWUpO1xuICAgIF9yZXN1bHQgPSBwYXJzZUZsb2F0KF9udW0udG9GaXhlZChsZW5ndGgpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZXN1bHQgPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gX3Jlc3VsdDtcbn1cblxuZXhwb3J0cy5wdXNoRXZlbnQgPSBmdW5jdGlvbiAoZ21rZXksIGRhdGEsIGNvbmZpZywgZWxlbWVudCwgc3BtRGF0YSkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHByb3BzID0gY29uZmlnLnByb3BzIHx8IFtdO1xuICB2YXIgcGFyYW1zID0ge307XG4gIHZhciBkYXRhc2V0ID0ge307XG5cbiAgaWYgKGRhdGEpIHtcbiAgICBmb3IgKHZhciBkYXRha2V5IGluIGRhdGEpIHtcbiAgICAgIGRhdGFzZXRbZGF0YWtleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKS5yZXBsYWNlKC8tL2csICcnKV0gPSBkYXRhW2RhdGFrZXldO1xuICAgIH0gIFxuICB9ICBcbiAgXG4gIGlmIChwcm9wcyAmJiBpc0FycmF5KHByb3BzKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBwcm9wc1tpXS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKS5yZXBsYWNlKC8tL2csICcnKTtcbiAgICAgIHBhcmFtc1twcm9wc1tpXV0gPSBkYXRhc2V0W2tleV07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIGRhdGFzZXQpO1xuICB9XG4gIFxuICBpZiAoZWxlbWVudCAmJiBnbWtleSA9PT0gRVhQKSB7XG4gICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zLCB7XG4gICAgICAnX3cnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LndpZHRoLCAyKSxcbiAgICAgICdfaCc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQuaGVpZ2h0LCAyKSxcbiAgICAgICdfeCc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQueCwgMiksXG4gICAgICAnX3knOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LnksIDIpLFxuICAgICAgLy8gJ19oYXNoJzogZWxlbWVudC5oYXNoX3ZhbHVlIHx8ICcnLFxuICAgICAgJ19yYXRlJzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC52aWV3YWJpbGl0eVJhdGUgfHwgZWxlbWVudC5pbnRlcnNlY3Rpb25SYXRpbywgMiksXG4gICAgICAnX3ZpZXdhYmlsaXR5JzogJ2ludGVyc2VjdGlvbidcbiAgICB9KTtcbiAgfSAgXG4gIGlmIChjb25maWcuX3Z0KSB7XG4gICAgcGFyYW1zLl92dCA9IGNvbmZpZy5fdnQ7XG4gIH1cbiAgdmFyIHVzZXJGbk5hbWUgPSBnbWtleSA9PT0gRVhQID8gJ2FwbHVzLWF1dG8tZXhwLXVzZXJmbicgOiAnYXBsdXMtYXV0by1jbGstdXNlcmZuJztcbiAgdmFyIHVzZXJJbmZvID0gZ2V0VXNlckluZm8odXNlckZuTmFtZSwgZWxlbWVudCwgY29uZmlnLmNzc1NlbGVjdG9yKTtcblxuICBpZiAoIXVzZXJJbmZvLnNwbSkge1xuICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgc3BtRGF0YSAmJiBzcG1EYXRhLmEgJiYgc3BtRGF0YS5iKSB7XG4gICAgICB1c2VySW5mby5zcG0gPSBbc3BtRGF0YS5hLCBzcG1EYXRhLmIsIHNwbURhdGEuYyB8fCAnMCcsIHNwbURhdGEuZCB8fCAnMCddLmpvaW4oJy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlckluZm8uc3BtID0gc3BtRGF0YSAmJiBzcG1EYXRhLmIgPyBzcG1EYXRhIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHZhciBnb2tleSA9IHt9O1xuXG4gIHZhciB0cmFja2VyUGFyYW1zID0gZGF0YS50cmFja2VyUGFyYW1zIHx8IGRhdGFbJ3RyYWNrZXItcGFyYW1zJ107XG4gIGlmICh0cmFja2VyUGFyYW1zKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBfdHJhY2tlclBhcmFtcyA9IEpTT04ucGFyc2UodHJhY2tlclBhcmFtcyk7XG4gICAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHBhcmFtcywgX3RyYWNrZXJQYXJhbXMpO1xuICAgICAgZGVsZXRlIHBhcmFtcy50cmFja2VyUGFyYW1zO1xuICAgICAgZGVsZXRlIHBhcmFtcy50cmFja2VycGFyYW1zO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgXG4gIGlmIChnbWtleSA9PT0gJ0VYUCcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpICYmIHJlY29yZEV4cE1hcFF1ZXVlW2NvbmZpZy5sb2drZXldKSB7XG4gICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICBleGFyZ3M6IHBhcmFtc1xuICAgIH0sIHVzZXJJbmZvKTtcbiAgICByZWNvcmRFeHBNYXBRdWV1ZVtjb25maWcubG9na2V5XS5wdXNoKGdva2V5KTtcbiAgfSBlbHNlIHtcbiAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcywgdXNlckluZm8sIGNvbmZpZy5jdXN0b21BcmdzKTtcbiAgICBhcGx1cy5yZWNvcmQoY29uZmlnLmxvZ2tleSwgZ21rZXksIGdva2V5LCBQT1NUKTsgIFxuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbXMge0FycmF5T2JqZWN0fSBjb25maWcgOiBbe1xuICogICAgJ3Bvc2l0aW9uU2VsZWN0b3InOiAnLnNjcm9sbC12aWV3JyxcbiAqICAgICdjc3NTZWxlY3Rvcic6Jy5iYWxsJyxcbiAqICAgICdsb2drZXknOicvdGVzdC5iYWxsLjEnLFxuICogICAgJ3Byb3BzJzogWydkYXRhLXRyYWNrZXInXSxcbiAqICB9LCB7XG4gKiAgICAnY3NzU2VsZWN0b3InOicubXlidXR0b24nLFxuICogICAgJ2xvZ2tleSc6Jy90ZXN0Lm15YnV0dG9uLjEnLFxuICogICAgJ3Byb3BzJzogWydkYXRhLXRyYWNrZXInXSxcbiAqICB9XVxuICovXG5leHBvcnRzLndhdGNoUmVjb3JkID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgXG4gIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgY29uZmlnKSB7XG4gICAgY29uZmlnLmZvckVhY2goZnVuY3Rpb24gKGNmZykge1xuICAgICAgaWYgKCFyZWNvcmRFeHBNYXBRdWV1ZS5oYXNPd25Qcm9wZXJ0eShjZmcubG9na2V5KSkge1xuICAgICAgICByZWNvcmRFeHBNYXBRdWV1ZVtjZmcubG9na2V5XSA9IEV2ZW50QXJyYXkuY3JlYXRlKHtcbiAgICAgICAgICBsZW5ndGg6IDAsXG4gICAgICAgICAgYnVmZmVyOiBbXSxcbiAgICAgICAgICBsb2drZXk6IGNmZy5sb2drZXksXG4gICAgICAgICAgcGtnU2l6ZTogdHlwZW9mIGNmZy5wa2dTaXplID09PSAnbnVtYmVyJyAmJiBjZmcucGtnU2l6ZSB8fCBERUZBVUxUX1BLR19TSVpFLFxuICAgICAgICAgIG1ldGhvZDogY2ZnLm1ldGhvZCB8fCBQT1NUXG4gICAgICAgIH0pO1xuICAgICAgfSBcbiAgICB9KTtcbiAgfVxuICBcbn07XG5cbmV4cG9ydHMuY2xlYXJSZWNvcmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4gICAgZm9yICh2YXIgbG9na2V5IGluIHJlY29yZEV4cE1hcFF1ZXVlKSB7XG4gICAgICB2YXIgZ29rZXlzID0gcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXI7XG4gICAgICBpZiAoZ29rZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXBsdXMuY29tYmluZVJlY29yZChsb2drZXksIEVYUCwgZ29rZXlzLCBQT1NUKTtcbiAgICAgICAgcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgPSBbXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS91dGlscy93YXRjaFRyYWNrZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog5qC55o2u5YWD57Sg5bGe5oCn5ZKM5Z+L54K56YWN572u57K+56Gu6I635Y+W5LiA5Liq5YWD57Sg55qEaGFzaEtleVxuICogQHBhcmFtcyB7T2JqZWN0fSBlbGVtZW50QXR0ciB7XG4gKiAgIGlkXG4gKiB9XG4gKiBAcGFyYW1zIHtPYmplY3R9IGNvbmZpZyB7XG4gKiAgIGxvZ2tleSwgY3NzU2VsZWN0b3IsIHBvc2l0aW9uU2VsZWN0b3JcbiAqIH1cbiAqIEByZXR1cm4ge1N0cmluZ30gaGFzaEtleVxuICovXG5cbi8vIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGVsZW1lbnRBdHRyLCBjb25maWcpIHtcbi8vICAgdmFyIGhhc2hLZXkgPSBbXG4vLyAgICAgY29uZmlnLmxvZ2tleSxcbi8vICAgICBjb25maWcuY3NzU2VsZWN0b3IsXG4vLyAgICAgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IsXG4vLyAgICAgZWxlbWVudEF0dHIuaW5kZXhcbi8vICAgXS5qb2luKCdfJyk7XG4vLyAgIHJldHVybiBoYXNoS2V5O1xuLy8gfTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZWxlbWVudEF0dHIsIGNvbmZpZykge1xuICB2YXIgaGFzaEtleSA9IFtcbiAgICBjb25maWcubG9na2V5LFxuICAgIGNvbmZpZy5jc3NTZWxlY3RvcixcbiAgICBjb25maWcucG9zaXRpb25TZWxlY3RvcixcbiAgICAvLyBlbGVtZW50QXR0ci5pbmRleFxuICBdO1xuICBcbiAgaWYgKGVsZW1lbnRBdHRyLmlkKSB7XG4gICAgaGFzaEtleS5wdXNoKGVsZW1lbnRBdHRyLmlkKTtcbiAgfVxuICBpZiAoZWxlbWVudEF0dHIuZGF0YXNldCkge1xuICAgIGhhc2hLZXkucHVzaChKU09OLnN0cmluZ2lmeShlbGVtZW50QXR0ci5kYXRhc2V0KSk7XG4gIH1cbiAgaGFzaEtleSA9IGhhc2hLZXkuam9pbignXycpO1xuICByZXR1cm4gaGFzaEtleTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL2dldEhhc2hLZXkuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9hdXRvX2V4cC9tYWluJykoKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl9leHAuanNcbi8vIG1vZHVsZSBpZCA9IDQ3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgY29sbGVjdF9leHAgPSByZXF1aXJlKCcuL2NvbGxlY3RfZXhwJyk7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnQHBfd2ViL2xpYl9jb21tb24vY29uZmlnJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcblxuLy8g55So5LqO55uR5ZCsXG52YXIgUEFHRV9EQVRBX01BUCA9IHt9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIGlzU3RhcnQgPSAwO1xuICB2YXIgaXNGaXJzdFRvdWNoID0gMDtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIGlmIChhcGx1cy5fYXBsdXNfYXV0b19leHApIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgYXBsdXMuX2FwbHVzX2F1dG9fZXhwID0ge1xuICAgICAgaGFzaE1hcDoge31cbiAgICB9O1xuICB9XG5cbiAgdmFyIF9jb25maWcgPSBbXTtcblxuICBmdW5jdGlvbiB3YXRjaE1ldGFJbmZvKGNvbnRleHQsIGlzRmlyc3QsIHdhdGNoVHlwZSkge1xuICAgIHZhciBoYW5kbGVyTWV0YUluZm8gPSBmdW5jdGlvbiAobWV0YUtleSwgbWV0YVZhbHVlKSB7ICBcbiAgICAgIGlmIChtZXRhS2V5ID09PSAnYXBsdXMtYXV0by1leHAnKSB7XG4gICAgICAgIHZhciBfY29uZmlnMiA9IGNvbmZpZy5nZXRBdXRvRXhwQ29uZmlnKG1ldGFWYWx1ZSk7XG4gICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShfY29uZmlnMikgPT09IEpTT04uc3RyaW5naWZ5KF9jb25maWcpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9jb25maWcgPSBfY29uZmlnMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0YVZhbHVlICYmIF9jb25maWcgJiYgX2NvbmZpZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29sbGVjdF9leHAud2F0Y2hfZXhwb3N1cmUoY29udGV4dCwgX2NvbmZpZywgaXNGaXJzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgIGFjdGlvbjogd2F0Y2hUeXBlLCAvLyBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICBhcmd1bWVudHM6IFsnc2V0TWV0YUluZm8nLCBoYW5kbGVyTWV0YUluZm9dXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0RXhwIChjb250ZXh0LCBpc0ZpcnN0KSB7XG4gICAgX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpO1xuICAgIC8vIFRhcm/moYbmnrbln7rkuo7ov5DooYzml7bvvIzoh6rliqjmm53lhYnkvJrlh7rnjrDojrflj5bkuI3liLDmm53lhYnlhYPntKDnmoTmg4XlhrVcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgY29sbGVjdF9leHAud2F0Y2hfZXhwb3N1cmUoY29udGV4dCwgX2NvbmZpZywgaXNGaXJzdCk7XG4gICAgfSwgMCk7XG4gIH1cblxuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uU2hvdycsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICAgIHdhdGNoTWV0YUluZm8ob3B0LmNvbnRleHQsIDEsIGFwbHVzU3RhdGljLlNVQlNDUklCRSk7XG4gICAgICAgIGlmIChpc1N0YXJ0ID09PSAwKSB7XG4gICAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMSk7XG4gICAgICAgICAgaXNTdGFydCA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgX2N1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgICAgIHZhciBfcGF0aCA9IF9jdXJyZW50UGFnZS5yb3V0ZSB8fCBfY3VycmVudFBhZ2UuaXM7XG4gICAgICAgICAgUEFHRV9EQVRBX01BUFtfcGF0aF0gPSBfcGF0aDsgLy8gSlNPTi5zdHJpbmdpZnkoX2N1cnJlbnRQYWdlLmRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHJlc2V0QXV0b0V4cCAob3B0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBfY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICB2YXIgX3BhdGggPSBfY3VycmVudFBhZ2Uucm91dGUgfHwgX2N1cnJlbnRQYWdlLmlzO1xuICAgICAgdmFyIF9kYXRhID0gUEFHRV9EQVRBX01BUFtfcGF0aF07XG4gICAgICBcbiAgICAgIHZhciBfY3VycmVudERhdGEgPSBKU09OLnN0cmluZ2lmeShvcHQuZGF0YSk7XG4gICAgICBpZiAoX2RhdGEgIT09IF9jdXJyZW50RGF0YSkge1xuICAgICAgICBQQUdFX0RBVEFfTUFQW19wYXRoXSA9IF9jdXJyZW50RGF0YTtcbiAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMCk7XG4gICAgICB9ICBcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG5cbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvbkFwbHVzVG91Y2gnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICBpZiAoaXNGaXJzdFRvdWNoID09PSAwKSB7XG4gICAgICAgICAgaXNGaXJzdFRvdWNoID0gMTtcbiAgICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNldEF1dG9FeHAob3B0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uUGFnZURhdGFDaGFuZ2VkJywgZnVuY3Rpb24gKG9wdCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICByZXNldEF1dG9FeHAob3B0KTtcbiAgICAgIH0sIDIwMCk7XG4gICAgfV1cbiAgfSk7XG5cbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvbkhpZGUnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICBQQUdFX0RBVEFfTUFQID0ge307XG4gICAgICAgIGlzU3RhcnQgPSAwO1xuICAgICAgICBpc0ZpcnN0VG91Y2ggPSAwO1xuICAgICAgICB3YXRjaE1ldGFJbmZvKG9wdC5jb250ZXh0LCAxLCBhcGx1c1N0YXRpYy5VTlNVQlNDUklCRSk7XG4gICAgICAgIGNvbGxlY3RfZXhwLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG5cbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvblVubG9hZCcsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICAgIFBBR0VfREFUQV9NQVAgPSB7fTtcbiAgICAgICAgY29sbGVjdF9leHAuY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9XVxuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbGliX2F1dG9fZXhwL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBfY29uZmlnID0gcmVxdWlyZSgnQHBfd2ViL2xpYl9jb21tb24vY29uZmlnJyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHdhdGNoVHJhY2tlciA9IHJlcXVpcmUoJy4uL3V0aWxzL3dhdGNoVHJhY2tlcicpO1xudmFyIGdldEhhc2hLZXkgPSByZXF1aXJlKCcuLi91dGlscy9nZXRIYXNoS2V5Jyk7XG52YXIgb2JzZXJ2ZXJzID0gW107XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgY3R4O1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xuXG4vLyByZWxvYWRDdHgg55So5LqO5Y2V5YWD5rWL6K+V77yM5Y2V5rWL5Lit6ZyA6KaB5YiH5o2i5pSv5LuY5a6d44CB5b6u5L+h546v5aKD77yM5a6e6ZmF55Sf5Lqn546v5aKD55So5LiN5YiwXG5leHBvcnRzLndhdGNoX2V4cG9zdXJlID0gZnVuY3Rpb24gKGNvbnRleHQsIGNvbmYsIGlzRmlyc3QsIHJlbG9hZEN0eCkge1xuICBpZiAoIWN0eCB8fCByZWxvYWRDdHgpIHtcbiAgICBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgfVxuICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuICB2YXIgZHVwO1xuICBcbiAgd2F0Y2hUcmFja2VyLndhdGNoUmVjb3JkKGNvbmYpO1xuICBcbiAgZnVuY3Rpb24gd2FpdCAoY291bnQpIHtcbiAgICBpZiAoY291bnQgPCBjb25mLmxlbmd0aCkge1xuICAgICAgdmFyIGNvbmZpZyA9IGNvbmZbY291bnRdO1xuICAgICAgZHVwID0gMDtcbiAgICAgIG9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50LnN1YmplY3RbMF0gPT09IGNvbmZpZy5jc3NTZWxlY3RvciAmJlxuICAgICAgICAgIGVsZW1lbnQuc3ViamVjdFsxXSA9PT0gY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgICBkdXAgPSAxO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHZhciBzdWJqZWN0ID0gW2NvbmZpZy5jc3NTZWxlY3RvciwgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3JdO1xuICAgICAgZnVuY3Rpb24gaGFzaGluZyAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGNzc1NlbGVjdG9yID0gc3ViamVjdFswXTtcbiAgICAgICAgaWYgKGNzc1NlbGVjdG9yICYmICF1dGlsRGFzaC5pc1N0YXJ0V2l0aChzdWJqZWN0WzBdLCAnLicpKSB7XG4gICAgICAgICAgY3NzU2VsZWN0b3IgPSAnLicgKyBjc3NTZWxlY3RvcjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBlbGVtZW50cyA9IGN0eC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKGNzc1NlbGVjdG9yKTsgICAgICAgICAgXG4gICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50cy5maWVsZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG4gICAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmV0KSB7XG4gICAgICAgICAgICAgIGlmIChyZXQgJiYgdXRpbEFycmF5LmlzQXJyYXkocmV0KSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICByZXRbaV0uaW5kZXggPSAnJyArIChpICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiByZXQsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnQ09NTU9OJ1xuICAgICAgICAgICAgICAgIH0pOyAgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLmV4ZWMoKTsgIFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ+ivpeW5s+WPsOS4jeaUr+aMgeiHquWKqOabneWFiScpO1xuICAgICAgICAgICAgLy8gLy8g5pSv5LuY5a6d5bmz5Y+w5LiN5pSv5oyBZmllbGRz77yM57uf5LiA5L2/55SoQ1NTU2VsZWN0b3LpgInkuK3nmoTlhYPntKDntKLlvJXlgZrllK/kuIDmoIflv5dcbiAgICAgICAgICAgIC8vIGVsZW1lbnRzLmJvdW5kaW5nQ2xpZW50UmVjdCgpLmV4ZWMoZnVuY3Rpb24gKHJldCkge1xuICAgICAgICAgICAgLy8gICBpZiAocmV0ICYmIHJldC5sZW5ndGggPiAwICYmIHJldFswXSkge1xuICAgICAgICAgICAgLy8gICAgIHZhciBfZWxlbWVudHMgPSBbXTtcbiAgICAgICAgICAgIC8vICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJldFswXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gICAgICAgdmFyIHIgPSByZXRbMF1baV07XG4gICAgICAgICAgICAvLyAgICAgICBpZiAocikge1xuICAgICAgICAgICAgLy8gICAgICAgICBfZWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgaW5kZXg6ICcnICsgKGkgKyAxKVxuICAgICAgICAgICAgLy8gICAgICAgICB9KTsgIFxuICAgICAgICAgICAgLy8gICAgICAgfVxuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICBjYWxsYmFjayh7XG4gICAgICAgICAgICAvLyAgICAgICBlbGVtZW50czogX2VsZW1lbnRzLFxuICAgICAgICAgICAgLy8gICAgICAgdHlwZTogJ0FMSVBBWSdcbiAgICAgICAgICAgIC8vICAgICB9KTsgIFxuICAgICAgICAgICAgLy8gICB9XG4gICAgICAgICAgICAvLyB9KTsgIFxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCfor6XlubPlj7DkuI3mlK/mjIHoh6rliqjmm53lhYksIGVyciA9ICcsIGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGhhc2hpbmcoZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgLy8gdmFyIHR5cGUgPSBvcHRzLnR5cGU7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IG9wdHMuZWxlbWVudHMgfHwgW107ICAgICAgICBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBlID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgaWYgKGR1cCA9PT0gMCB8fCBpc0ZpcnN0ID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgbmV3T2JzZXJ2ZXIgPSBpbml0T2JzZXJ2ZXIoY29udGV4dCk7XG4gICAgICAgICAgICBuZXdPYnNlcnZlci5zdWJqZWN0ID0gc3ViamVjdDtcbiAgICAgICAgICAgIG9ic2VydmVycy5wdXNoKG5ld09ic2VydmVyKTtcbiAgICAgICAgICAgIGlmIChlLmluZGV4ICYmICFjaGVja0lzSW5IYXNoTWFwKGUsIGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgdXBkYXRlSGFzaE1hcChlLCBjb25maWcpO1xuICAgICAgICAgICAgICBhZGRPYnNlcnZlKG5ld09ic2VydmVyLCBjb25maWcsIGUuaW5kZXgsIGZ1bmN0aW9uIChlbnRyeSwgX2NvbmZpZywgX2luZGV4KSB7XG4gICAgICAgICAgICAgICAgaWYgKF9pbmRleCkge1xuICAgICAgICAgICAgICAgICAgdmFyIF9lbnRyeSA9IGNsb25lRGVlcChlbnRyeSk7XG4gICAgICAgICAgICAgICAgICBfZW50cnkuaW5kZXggPSAnJyArIF9pbmRleDtcbiAgICAgICAgICAgICAgICAgIHZhciBkYXRhc2V0ID0gY2xvbmVEZWVwKF9lbnRyeS5kYXRhc2V0KTtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZUhhc2hNYXAoe1xuICAgICAgICAgICAgICAgICAgICBpZDogX2VudHJ5LmlkLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogX2VudHJ5LmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0OiBkYXRhc2V0LFxuICAgICAgICAgICAgICAgICAgfSwgX2NvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZGF0YXNldCA9PT0gJywgZGF0YXNldCwgJ19lbnRyeS5pbmRleCA9PT0gJywgX2VudHJ5LmluZGV4KTtcbiAgICAgICAgICAgICAgICAgIGV4cG9zdXJlSGFuZGxlKF9lbnRyeSwgZGF0YXNldCwgY29uZmlnKTsgIFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmNvdW50KCdlbXB0eSBpbmRleCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdhaXQoKytjb3VudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgd2FpdCgwKTtcblxuICBmdW5jdGlvbiBjaGVja0lzSW5IYXNoTWFwIChlbGVtZW50LCBjb25maWcpIHtcbiAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZWxlbWVudCwgY29uZmlnKTtcbiAgICB2YXIgaW5kZXggPSBlbGVtZW50LmluZGV4O1xuICAgIGlmIChfaGFzaE1hcFtjb25maWcubG9na2V5XSkge1xuICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0uZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50Lmhhc2hfdmFsdWUgPT09IGhhc2ggJiYgZWxlbWVudC5pbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtcyB7T2JqZWN0fSBlIHtcbiAgICogICBpZCwgZGF0YXNldCwgcG9zaXRpb25cbiAgICogfVxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlSGFzaE1hcChlLCBjb25maWcpIHtcbiAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZSwgY29uZmlnKTtcbiAgICB0cnkge1xuICAgICAgdmFyIGluZGV4ID0gZS5pbmRleDtcbiAgICAgIGlmIChfaGFzaE1hcFtjb25maWcubG9na2V5XSkge1xuICAgICAgICB2YXIgZXhpc3QgPSAwO1xuICAgICAgICBfaGFzaE1hcFtjb25maWcubG9na2V5XS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICBpZiAoZWxlbWVudC5oYXNoX3ZhbHVlID09PSBoYXNoKSB7XG4gICAgICAgICAgICBleGlzdCA9IDE7XG4gICAgICAgICAgICBpZiAoZS5pZCkgZWxlbWVudC5pZCA9IGUuaWQ7XG4gICAgICAgICAgICBpZiAoZS5kYXRhc2V0KSBlbGVtZW50LmRhdGFzZXQgPSBlLmRhdGFzZXQ7XG4gICAgICAgICAgICBpZiAoZS5zdGF0dXMpIGVsZW1lbnQuc3RhdHVzID0gZS5zdGF0dXM7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFleGlzdCkge1xuICAgICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGUuaWQsXG4gICAgICAgICAgICBoYXNoX3ZhbHVlOiBoYXNoLFxuICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgZXhwQ29uZmlnOiBjb25maWcsXG4gICAgICAgICAgICBkYXRhc2V0OiBlLmRhdGFzZXQsXG4gICAgICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0gPSBbe1xuICAgICAgICAgIGlkOiBlLmlkLFxuICAgICAgICAgIGhhc2hfdmFsdWU6IGhhc2gsXG4gICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgIGV4cENvbmZpZzogY29uZmlnLFxuICAgICAgICAgIGRhdGFzZXQ6IGUuZGF0YXNldCxcbiAgICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgICAgfV07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yID09PSAnLCBlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbml0T2JzZXJ2ZXIoY29udGV4dCkge1xuICAgIHZhciBvcHRpb25zID17XG4gICAgICB0aHJlc2hvbGRzOiBbX2NvbmZpZy5BVVRPX0FUX1ZJRVdfUkFURV0sXG4gICAgICBpbml0aWFsUmF0aW86IDBcbiAgICB9O1xuICAgIHZhciBpc01ZID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChteSkge1xuICAgICAgICBpc01ZID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIGlmIChpc01ZKSB7XG4gICAgICAvLyDomoLomoHnmoTmm53lhYnnm5HlkKzlkozlvq7kv6HkuI3kuIDoh7TvvIxodHRwczovL2RldmVsb3BlcnMud2VpeGluLnFxLmNvbS9taW5pcHJvZ3JhbS9kZXYvYXBpL3d4bWwvd3guY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIuaHRtbFxuICAgICAgLy8gaHR0cHM6Ly9vcGVuZG9jcy5hbGlwYXkuY29tL21pbmkvYXBpL2ludGVyc2VjdGlvbm9ic2VydmVyXG4gICAgICBvcHRpb25zLnNlbGVjdEFsbCA9IHRydWU7XG4gICAgICByZXR1cm4gY3R4LmNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyKG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLm9ic2VydmVBbGwgPSB0cnVlO1xuICAgICAgcmV0dXJuIGN0eC5jcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlcihjb250ZXh0LCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhZGRPYnNlcnZlKG9ic2VydmVyLCBjb25maWcsIGluZGV4LCBjYWxsYmFjaykge1xuICAgIHZhciBjc3MgPSBjb25maWcuY3NzU2VsZWN0b3I7XG4gICAgaWYgKGNzcyAmJiAhdXRpbERhc2guaXNTdGFydFdpdGgoY3NzLCAnLicpKSB7XG4gICAgICBjc3MgPSAnLicgKyBjc3M7XG4gICAgfVxuICAgIGlmIChjb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuICAgICAgb2JzZXJ2ZXIucmVsYXRpdmVUbyhjb25maWcucG9zaXRpb25TZWxlY3Rvcikub2JzZXJ2ZShjc3MsIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjYWxsYmFjayhyZXMsIGNvbmZpZywgaW5kZXgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yTWVzc2FnZTogJywgZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYnNlcnZlci5yZWxhdGl2ZVRvVmlld3BvcnQoKS5vYnNlcnZlKGNzcywgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcywgY29uZmlnLCBpbmRleCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3JNZXNzYWdlOiAnLCBlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZXhwb3N1cmVIYW5kbGUgKGVudHJ5LCBkYXRhc2V0LCBjb25maWcpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgZXhwb3N1cmVUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdmFyIGV4cEVsZW1lbnRzID0gY2hlY2tTdGFydChleHBvc3VyZVRpbWUsIGVudHJ5LCBjb25maWcpO1xuICAgIFxuICAgIGlmIChleHBFbGVtZW50cyAmJiBleHBFbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgZWxlbWVudCA9IGV4cEVsZW1lbnRzWzBdO1xuICAgICAgLy8g5Y+WZGF0YS10cmFja2VyIOaIliBjc3NTZWxlY3RvclxuICAgICAgdmFyIHNwbUMgPSBkYXRhc2V0LnRyYWNrZXIgfHwgY29uZmlnLmNzc1NlbGVjdG9yLnJlcGxhY2UoL1xcJ3xcXFwifFxcO3xcXDp8XFw9fFxcW3xcXF18XFwufFxcI3xcXC18XFwvfFxcfC9nLCAnJyk7IC8vIOWOu+aOieeJueauiuWtl+esplxuICAgICAgLy8g5pud5YWJ6Kem5Y+R55qEc3Bt5LiN5rGh5p+T5YWo5bGAYXBsdXMuXyQuc3BtLmRhdGHvvIzmlYXov5nph4zlgZrmt7Hmi7fotJ1cblxuICAgICAgdmFyIHNwbURhdGEgPSB7fTtcbiAgICAgIHZhciBfc3BtRGF0YSA9IHV0aWwuanNvbkxpa2VTdHIySlNPTihkYXRhc2V0LnRyYWNrZXJQYXJhbXMgfHwge30pIHx8IHt9O1xuICAgICAgdmFyIF9pbmRleCA9IGVsZW1lbnQuaW5kZXg7XG4gICAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4gICAgICAgIHNwbURhdGEgPSBjbG9uZURlZXAoYXBsdXMuXyQuc3BtLmRhdGEgfHwge30pO1xuICAgICAgICBzcG1EYXRhLmMgPSBzcG1DO1xuICAgICAgICBpZiAoc3BtRGF0YS5jICYmIHNwbURhdGEuYyAhPT0gJzAnKSB7XG4gICAgICAgICAgdmFyIHNwbUQgPSAnZCcgKyBfaW5kZXg7XG4gICAgICAgICAgc3BtRGF0YS5kID0gc3BtRDtcbiAgICAgICAgfSAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSkge1xuICAgICAgICAgIHNwbURhdGEuYiA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjb25maWcuc3BtQykge1xuICAgICAgICAgIHNwbURhdGEuYyA9IGNvbmZpZy5zcG1DO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNwbURhdGEuYyA9IF9zcG1EYXRhLnNwbUMgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtQykgOiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcuc3BtRCkge1xuICAgICAgICAgIHNwbURhdGEuZCA9IF9pbmRleCA/IGNvbmZpZy5zcG1EICsgJ18nICsgX2luZGV4IDogY29uZmlnLnNwbUQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BtRGF0YS5kID0gX3NwbURhdGEuc3BtRCA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1EKSA6ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHdhdGNoVHJhY2tlci5wdXNoRXZlbnQoJ0VYUCcsIGRhdGFzZXQsIGNvbmZpZywgT2JqZWN0LmFzc2lnbih7fSwgZW50cnksIHtcbiAgICAgICAgeDogZWxlbWVudC54LFxuICAgICAgICB5OiBlbGVtZW50LnksXG4gICAgICAgIHdpZHRoOiBlbGVtZW50LndpZHRoLFxuICAgICAgICBoZWlnaHQ6IGVsZW1lbnQuaGVpZ2h0LFxuICAgICAgICBoYXNoX3ZhbHVlOiBlbGVtZW50Lmhhc2hfdmFsdWVcbiAgICAgIH0pLCBzcG1EYXRhKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja1N0YXJ0IChleHBvc3VyZVRpbWUsIGVudHJ5LCBjb25maWcpIHtcbiAgICAvLyB2YXIgc2l6ZSA9IDA7XG4gICAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuICAgIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuICAgIHZhciB0ZW1wcyA9IFtdO1xuICAgIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuICAgICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gdmFyIHN0cmluZyA9IGNvbmZpZy5sb2drZXkgKyAnXycgKyBjb25maWcuY3NzU2VsZWN0b3IgKyAnXydcbiAgICAgICAgLy8gICAgICAgICAgICAgICsgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IgKyAnXycgKyBvcHRzLmlkICsgSlNPTi5zdHJpbmdpZnkob3B0cy5kYXRhc2V0KTtcbiAgICAgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGVudHJ5LCBjb25maWcpO1xuICAgICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuICAgICAgICBpZiAodi5zdGF0dXMgPT09IDAgJiYgdi5leHBDb25maWcgJiYgaGFzaCA9PT0gdi5oYXNoX3ZhbHVlKSB7XG4gICAgICAgICAgdmFyIF9lbGVQb3MgPSBlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QgfHwge307XG4gICAgICAgICAgaWYgKF9lbGVQb3Mud2lkdGggJiYgX2VsZVBvcy5oZWlnaHQpIHtcbiAgICAgICAgICAgIHYuZGF0YXNldCA9IGVudHJ5LmRhdGFzZXQ7XG4gICAgICAgICAgICB2LnggPSBfZWxlUG9zLmxlZnQ7XG4gICAgICAgICAgICB2LnkgPSBfZWxlUG9zLnRvcDtcbiAgICAgICAgICAgIHYud2lkdGggPSBfZWxlUG9zLndpZHRoO1xuICAgICAgICAgICAgdi5oZWlnaHQgPSBfZWxlUG9zLmhlaWdodDtcbiAgICAgICAgICAgIHYuc2l6ZSA9IF9lbGVQb3Mud2lkdGggKiBfZWxlUG9zLmhlaWdodDtcbiAgICAgICAgICAgIGlmIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+PSBfY29uZmlnLkFVVE9fQVRfVklFV19SQVRFKSB7XG4gICAgICAgICAgICAgIHYuZXhwb3N1cmVUaW1lID0gZXhwb3N1cmVUaW1lO1xuICAgICAgICAgICAgICB2LnN0YXR1cyA9IDE7IC8vIOabneWFieeKtuaAgVxuICAgICAgICAgICAgICB0ZW1wcy5wdXNoKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGVtcHM7XG4gIH1cbn07XG5cbmV4cG9ydHMucmVzZXQgPSBmdW5jdGlvbiAoKSB7fTtcblxuZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHdhdGNoVHJhY2tlci5jbGVhclJlY29yZCgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xuICAgIG9ic2VydmVyc1tpXS5kaXNjb25uZWN0KCk7XG4gIH1cbiAgb2JzZXJ2ZXJzID0gW107XG4gIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcbiAgdmFyIF9oYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLmhhc2hNYXAgfHwge307XG4gIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuICAgIGRlbGV0ZSBfaGFzaE1hcFtsb2drZXldO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2V4cC9jb2xsZWN0X2V4cC5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciB1dGlsTWV0YSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTWV0YScpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXG5leHBvcnRzLkRBVEFfQVBMVVNfQUVfS0VZID0gJ2RhdGEtYXBsdXMtYWUnO1xuZXhwb3J0cy5EQVRBX0FQTFVTX0FDX0tFWSA9ICdkYXRhLWFwbHVzLWNsayc7XG5leHBvcnRzLkRBVEFfQVBMVVNfU1BNX0FOQ0hPUl9JRF9LRVkgPSAnZGF0YS1zcG0tYW5jaG9yLWlkJztcbmV4cG9ydHMuREFUQV9BUExVU19WVF9JVEVNX0lOREVYX0tFWSA9ICdkYXRhLWFwbHVzLXZ0LXBvcyc7XG5cbi8vIOS4jeaUr+aMgW9ic2VydmVy55qE5oOF5Ya15LiL77yM6L2u6K+i6Ze06ZqU77yIbXMpXG5leHBvcnRzLkxPT1BfVElNRSA9IDEwMDA7XG5cbmV4cG9ydHMuZ2V0RGVmYXVsdFJlcXVlc3RDZmcgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgcGtnU2l6ZTogMTBcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIGdldE1ldGFWYWx1ZSAoa2V5KSB7XG4gIGlmIChhcGx1cyAmJiBhcGx1cy5nZXRNZXRhSW5mbykge1xuICAgIHJldHVybiBhcGx1cy5nZXRNZXRhSW5mbyhrZXkpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB1dGlsTWV0YS5nZXRNZXRhQ250KGtleSk7XG4gIH1cbn1cblxuLy8g6Ieq5Yqo5pud5YWJ5omT54K5IC0g5Yik5a6a5Y+v6KeG55qE5q+U5L6L546HXG52YXIgZ2V0QXV0b0V4cFZpZXdSYXRlID0gZnVuY3Rpb24oZGVmYXVsdF92YWx1ZSkge1xuICB2YXIgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG4gIHRyeSB7XG4gICAgdmFyIHZpc2libGVfcmF0ZSA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtdmlzaWJsZScpO1xuICAgIGlmICh2aXNpYmxlX3JhdGUpIHtcbiAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KHZpc2libGVfcmF0ZSk7XG4gICAgfVxuICAgIGlmIChyYXRlIDw9IDApIHtcbiAgICAgIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIHJhdGU7XG4gIH1cbn07XG5leHBvcnRzLkFVVE9fQVRfVklFV19SQVRFID0gZ2V0QXV0b0V4cFZpZXdSYXRlKDAuMyk7XG5cbi8vIHZhciBFWFBfREVCT1VOQ0VfRFVSQVRJT04gPSAxMDA7IC8vIGRlYm91Y2UgZHVyYXRpb24gMTAwbXNcblxuLyoqXG4gKiDmnInmlYjmm53lhYnml7bplb/lupXnur8gLSDmr6vnp5LmlbAobXMpXG4gKiBAcGFyYW1zIHtOdW1iZXJ9IGRlZmF1bHRfdmFsdWUgaXMgMzAwbXNcbiAqIEByZXR1cm4ge051bWJlcn0gZHVyYXRpb25cbiAqL1xudmFyIGdldEF1dG9FeHBEdXJhdGlvbiA9IGZ1bmN0aW9uKGRlZmF1bHRfdmFsdWUpIHtcbiAgdmFyIGR1cmF0aW9uID0gZGVmYXVsdF92YWx1ZTtcbiAgdHJ5IHtcbiAgICB2YXIgdG1wX2R1cmF0aW9uID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC1kdXJhdGlvbicpO1xuICAgIHZhciBkdXJhdGlvbl9uID0gcGFyc2VJbnQodG1wX2R1cmF0aW9uKTtcbiAgICBpZiAoKGR1cmF0aW9uX24gKyAnJykgIT09ICdOYU4nKSB7XG4gICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uX247XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gZHVyYXRpb247XG4gIH1cbn07XG5leHBvcnRzLkVYUF9EVVJBVElPTiA9IGdldEF1dG9FeHBEdXJhdGlvbigzMDApOyAvL+m7mOiupDMwMG1zXG5cbi8vIGRlYm91Y2UgZHVyYXRpb24gMTAwbXNcbi8vIGV4cG9ydHMuZ2V0RGVib3VuY2VEdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbi8vICAgcmV0dXJuIEVYUF9ERUJPVU5DRV9EVVJBVElPTjtcbi8vIH07XG5cbi8qKlxuICog6I635Y+W6Ieq5Yqo5pud5YWJ6YWN572u6aG577yM5bm25bCGZmlsdGVy44CBdGFn5ZKMY3NzU2VsZWN0b3LlkIjlubbkuLplbGVtZW50U2VsZWN0b3JcbiAqIFRPRE8gSlNPTi5wYXJzZSDku4XmlK/mjIFJRTjlj4rku6XkuIrmtY/op4jlmaggPT4ganMgYXBpXG4gKiBAcGFyYW1zIGtleSB7U3RyaW5nfSAnYXBsdXMtYXV0by1leHAnLydhcGx1cy1hdXRvLWNsaydcbiAqIEByZXR1cm4ge0FycmF5fSBbe1xuICogICAgbG9na2V5OiAvYS5iLmMxLFxuICogICAgZWxlbWVudFNlbGVjdG9yOiAnZGl2W3NjbT0xMjM0XScsXG4gKiAgICB0YWc6IGRpdixcbiAqICAgIGZpbHRlcjogc2NtPTEyMzRcbiAqICAgIHBvc2l0aW9uU2VsZWN0b3I6IHRydWUvLnBhcmVudENsYXNzbmFtZSAvLyDnm7jlr7nlrprkvY3kuJrliqHln4vngrlcbiAqIH0sIHtcbiAqICAgIGxvZ2tleTogL2EuYi5jMixcbiAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ3Bbc2NtPTIzNDVdLm9uZScsXG4gKiAgICB0YWc6IHAsXG4gKiAgICBmaWx0ZXI6IHNjbT0yMzQ1LFxuICogICAgY3NzU2VsZWN0b3I6IC5vbmVcbiAqIH0sIHtcbiAqICAgIGxvZ2tleTogL2EuYi5jMyxcbiAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ3BbZGF0YS1zcG0tY2xpY2tdJyxcbiAqICAgIHRhZzogcCxcbiAqICAgIGZpbHRlcjogZGF0YS1zcG0tY2xpY2tcbiAqIH1dXG4gKi9cbnZhciBnZXRBdXRvQ29uZmlnID0gZnVuY3Rpb24oY29uZmlnS2V5LCBtZXRhT2JqKSB7XG4gIHZhciBjb25maWdzID0gW107XG4gIC8vIHZhciB0bXBfbG9na2V5cyA9IFtdO1xuICB2YXIgdG1wX3RhZ19maWx0ZXIgPSBbXTtcbiAgdmFyIGFwbHVzQXV0b0V4cDtcbiAgdHJ5IHtcbiAgICBhcGx1c0F1dG9FeHAgPSBtZXRhT2JqIHx8IGdldE1ldGFWYWx1ZShjb25maWdLZXkpO1xuICAgIHZhciB0ZW1wcyA9IFtdO1xuICAgIGlmIChhcGx1c0F1dG9FeHAgJiYgdHlwZW9mIGFwbHVzQXV0b0V4cCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRlbXBzID0gSlNPTi5wYXJzZShhcGx1c0F1dG9FeHApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0ZW1wcyA9IEpTT04ucGFyc2UoYXBsdXNBdXRvRXhwLnJlcGxhY2UoLycvZywgJ1wiJykpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGFwbHVzQXV0b0V4cCA9PT0gJ29iamVjdCcgJiYgYXBsdXNBdXRvRXhwLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgdGVtcHMgPSBhcGx1c0F1dG9FeHA7XG4gICAgfVxuICAgIGlmICh0ZW1wcyAmJiB0ZW1wcy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRtcCA9IHRlbXBzW2ldIHx8IHt9O1xuICAgICAgICB2YXIgbG9na2V5ID0gdG1wLmxvZ2tleSB8fCAnJztcbiAgICAgICAgdmFyIHRhZyA9IHRtcC50YWcgPyB0bXAudGFnIDogJyc7XG4gICAgICAgIHZhciBmaWx0ZXIgPSB0bXAuZmlsdGVyO1xuICAgICAgICB2YXIgY3NzU2VsZWN0b3IgPSB0bXAuY3NzU2VsZWN0b3I7XG4gICAgICAgIHZhciB3aG9sZVNlbGVjdG9yID0gY3NzU2VsZWN0b3IgfHwgKHRhZyAmJiBmaWx0ZXIpO1xuICAgICAgICBpZiAoIWxvZ2tleSB8fCAhd2hvbGVTZWxlY3Rvcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsICcgKyBKU09OLnN0cmluZ2lmeSh0bXApKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAyMDE3LTExLTIzIOaJi+a3mOaOpeWFpeWSjGxhemFkYeS4muWKoemcgOaxgu+8jOWFgeiuuGxvZ2tleemHjeWkjVxuICAgICAgICAvLyBpZiAodXRpbEFycmF5LmluZGV4b2YodG1wX2xvZ2tleXMsIGxvZ2tleSkgPiAtMSkge1xuICAgICAgICAvLyAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsIGxvZ2tleSAnICsgbG9na2V5ICsgJyByZXBlYXRlZCcpO1xuICAgICAgICAvLyB9XG4gICAgICAgIGZpbHRlciA9IHR5cGVvZiBmaWx0ZXIgPT09ICdzdHJpbmcnID8gZmlsdGVyLnNwbGl0KFwiPVwiKSA6IFtdO1xuICAgICAgICB2YXIgdGFnX2ZpbHRlciA9IHRhZztcbiAgICAgICAgaWYgKGZpbHRlci5sZW5ndGggPj0gMikge1xuICAgICAgICAgIHRhZ19maWx0ZXIgKz0gJ1snICsgZmlsdGVyLnNoaWZ0KCkgKyAnPVwiJyArIGRlY29kZVVSSUNvbXBvbmVudChmaWx0ZXIuam9pbignJykpICsgJ1wiXSc7XG4gICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLmxlbmd0aCA9PSAxICYmIGZpbHRlclswXSkge1xuICAgICAgICAgIHRhZ19maWx0ZXIgKz0gJ1snICsgZGVjb2RlVVJJQ29tcG9uZW50KGZpbHRlclswXSkgKyAnXSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNzc1NlbGVjdG9yKSB7XG4gICAgICAgICAgdGFnX2ZpbHRlciArPSBjc3NTZWxlY3RvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRtcC5lbGVtZW50U2VsZWN0b3IgPSB0YWdfZmlsdGVyO1xuICAgICAgICBpZiAodXRpbEFycmF5LmluZGV4b2YodG1wX3RhZ19maWx0ZXIsIHRhZ19maWx0ZXIpID4gLTEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCB0YWdfZmlsdGVyX2Nzc1NlbGVjdG9yICcgKyB0YWdfZmlsdGVyICsgJyByZXBlYXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRtcF9sb2drZXlzLnB1c2gobG9na2V5KTtcbiAgICAgICAgdG1wX3RhZ19maWx0ZXIucHVzaCh0YWdfZmlsdGVyKTtcbiAgICAgICAgY29uZmlncy5wdXNoKHRtcCk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICAvLyBUT0RPIOebkeaOp+i/meWdl+WGheWuuVxuICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIG1zZzogZXJyXG4gICAgfSk7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIGNvbmZpZ3M7XG4gIH1cbn07XG5cbi8qKlxuICog6I635Y+W5pud5YWJ6Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG4gKi9cbmV4cG9ydHMuZ2V0QXV0b0V4cENvbmZpZyA9IGZ1bmN0aW9uKG1ldGFPYmopIHtcbiAgcmV0dXJuIGdldEF1dG9Db25maWcoJ2FwbHVzLWF1dG8tZXhwJywgbWV0YU9iaikgfHwgW107XG59O1xuLyoqXG4gKiDojrflj5bmm53lhYnoh6rliqjph4fpm4bnmoTphY3nva7poblcbiAqL1xuZXhwb3J0cy5nZXRBdXRvRXhwVXNlckZuID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhZUF1dG9Vc2VyRm4gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLXVzZXJmbicpO1xuICBpZiAoYWVBdXRvVXNlckZuKSB7XG4gICAgdmFyIGZuID0gd2luZG93W2FlQXV0b1VzZXJGbl0gfHwgYWVBdXRvVXNlckZuO1xuICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBmbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vLyA8bWV0YSBuYW1lPVwiYXBsdXMtYXV0by1leHAtd2F0Y2hkb21cIiBjb250ZW50PVwidGhyb3R0bGVcIiAvPlxuZXhwb3J0cy5pc1Rocm90dGxlV2F0Y2hEb20gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBycyA9IGZhbHNlO1xuICB0cnkge1xuICAgIHJzID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC13YXRjaGRvbScpID09PSAndGhyb3R0bGUnO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgcmV0dXJuIHJzO1xufTtcbi8qKlxuICog6I635Y+W54K55Ye76Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG4gKi9cbmV4cG9ydHMuZ2V0QXV0b0Nsa0NvbmZpZyA9IGZ1bmN0aW9uKG1ldGFPYmopIHtcbiAgcmV0dXJuIGdldEF1dG9Db25maWcoJ2FwbHVzLWF1dG8tY2xrJywgbWV0YU9iaikgfHwgW107XG59O1xuLyoqXG4gKiDojrflj5bngrnlh7voh6rliqjph4fpm4bnmoTphY3nva7poblcbiAqL1xuZXhwb3J0cy5nZXRBdXRvQ2xrVXNlckZuID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhY0F1dG9Vc2VyRm4gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tY2xrLXVzZXJmbicpO1xuICBpZiggYWNBdXRvVXNlckZuICl7XG4gICAgdmFyIGZuID0gd2luZG93W2FjQXV0b1VzZXJGbl0gfHwgYWNBdXRvVXNlckZuO1xuICAgIGlmKCB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgKXtcbiAgICAgIHJldHVybiBmbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc193ZWIvbGliX2NvbW1vbi9jb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDmlbDnu4Tlt6XlhbdcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIElFOOS4jeaUr+aMgeaVsOe7hOWOn+eUn+eahGluZGV4T2bvvIzmlYXoh6rooYzlrp7njrDkuIDkuKppbmRleG9mXG4gKiBAcGFyYW0gW0FycmF5XSBhcnJcbiAqIEBwYXJhbSBbT2JqZWN0XSBpdGVtXG4gKiBAcmV0dXJuIFtOdW1iZXJdIGluZGV4XG4gKi9cbmV4cG9ydHMuaW5kZXhvZiA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuICB2YXIgaW5kZXggPSAtMTtcbiAgdHJ5IHtcbiAgICBpbmRleCA9IGFyci5pbmRleE9mKGl0ZW0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChhcnJbal0gPT09IGl0ZW0pIHtcbiAgICAgICAgaW5kZXggPSBqO1xuICAgICAgfVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cbn07XG5cbmV4cG9ydHMuaXRlbU1hdGNoID0gZnVuY3Rpb24oYXJyLCBpdGVtKSB7XG4gIHZhciBtYXRjaGVkID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgaWYgKCF0aGlzLmlzQXJyYXkoYXJyKSkge1xuICAgICAgcmV0dXJuIG1hdGNoZWQ7XG4gICAgfVxuICAgIG1hdGNoZWQgPSBhcnIuc29tZShmdW5jdGlvbihzKSB7XG4gICAgICByZXR1cm4gKHMgJiYgcy5sZW5ndGggPiAwKSAmJiBpdGVtLmluZGV4T2YocykgIT09IC0xO1xuICAgIH0pO1xuICB9IGNhdGNoKGUpIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKGl0ZW0uaW5kZXhPZihhcnJbal0pICE9PSAtMSkge1xuICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXRjaGVkO1xufTtcblxuZXhwb3J0cy5pc0FycmF5ID0gZnVuY3Rpb24gKG8pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsQXJyYXkuanNcbi8vIG1vZHVsZSBpZCA9IDUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDmk43kvZxtZXRh55qE5bel5YW357G7XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIF9oZWFkX25vZGU7XG52YXIgX21ldGFfbm9kZXM7XG5cbnZhciB1dGlsQXR0cmlidXRlID0gcmVxdWlyZSgnLi91dGlsQXR0cmlidXRlJyk7XG4vKipcbiAqIOWPluW+l+mhtemdouS4iiBoZWFkIOS4reeahOaJgOaciSBtZXRhIOWFg+e0oFxuICogQHBhcmFtIFtmb3JjZV0ge2Jvb2xlYW59IOaYr+WQpuW8uuWItuiOt+WPluaWsOWGheWuuVxuICovXG5mdW5jdGlvbiBnZXRNZXRhVGFncyhmb3JjZSkge1xuICBfaGVhZF9ub2RlID0gX2hlYWRfbm9kZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuXG4gIGlmIChfbWV0YV9ub2RlcyAmJiAhZm9yY2UpIHtcbiAgICByZXR1cm4gX21ldGFfbm9kZXM7XG4gIH1cblxuICByZXR1cm4gX2hlYWRfbm9kZSA/IChfbWV0YV9ub2RlcyA9IF9oZWFkX25vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21ldGEnKSkgOiBbXTtcbn07XG5leHBvcnRzLmdldE1ldGFUYWdzID0gZ2V0TWV0YVRhZ3M7XG5cbi8qKlxuICog5Y+W5b6XIGhlYWQgLyBtZXRhIOS4reaMh+WumiBtZXRhIOeahCAoYXR0ciB8fCBjb250ZW50KSDlgLxcbiAqIDxtZXRhIG5hbWU9XCJhcGx1cy10ZXJtaW5hbFwiIGNvbnRlbnQ9XCIxXCI+XG4gKi9cbmZ1bmN0aW9uIGdldE1ldGFDbnQobmFtZSwgYXR0cikge1xuICB2YXIgaTtcbiAgdmFyIG1ldGE7XG4gIHZhciBtZXRhX25vZGVzID0gZ2V0TWV0YVRhZ3MoKTtcbiAgdmFyIGwgPSBtZXRhX25vZGVzLmxlbmd0aDtcbiAgdmFyIGNvbnRlbnQ7XG5cbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIG1ldGEgPSBtZXRhX25vZGVzW2ldO1xuICAgIGlmICh1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsICduYW1lJykgPT09IG5hbWUpIHtcbiAgICAgIGNvbnRlbnQgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsIGF0dHIgfHwgJ2NvbnRlbnQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29udGVudCB8fCAnJztcbn07XG5leHBvcnRzLmdldE1ldGFDbnQgPSBnZXRNZXRhQ250O1xuXG5cbi8qKlxuICog56Gu5a6aIGhlYWQgLyBtZXRhIOS4reeahCBpc29uZXBhZ2Ug55qE5pWw5o2uXG4gKiDlvaLlpoLvvJpcbiAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMFwiIC8+IOihqOekuuS4jeaYr29uZXBhZ2VcbiAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMXxodHRwOi8vaDUubS50YW9iYW8uY29tL3dlL2luZGV4Lmh0bSNkZXRhaWxcIiAvPiDooajnpLrmmK9vbmVwYWdlXG4gKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBnZXRPbmVQYWdlSW5mbyhtZXRhSW5mbykge1xuICB2YXIgb2JqID0ge1xuICAgIGlzb25lcGFnZTogJy0xJyxcbiAgICB1cmxwYWdlbmFtZTogJydcbiAgfTtcbiAgdmFyIG1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKTtcbiAgaWYgKG1ldGFfaW5mbyAmJiBtZXRhX2luZm8uaGFzT3duUHJvcGVydHkoJ2lzb25lcGFnZV9kYXRhJykpIHtcbiAgICBvYmouaXNvbmVwYWdlID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLmlzb25lcGFnZTtcbiAgICBvYmoudXJscGFnZW5hbWUgPSBtZXRhX2luZm8uaXNvbmVwYWdlX2RhdGEudXJscGFnZW5hbWU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNvbnRlbnQgPSBnZXRNZXRhQ250KCdpc29uZXBhZ2UnKSB8fCAnLTEnO1xuICAgIHZhciBhcnJfY29udGVudCA9IGNvbnRlbnQuc3BsaXQoXCJ8XCIpO1xuICAgIG9iai5pc29uZXBhZ2UgPSBhcnJfY29udGVudFswXTtcbiAgICBvYmoudXJscGFnZW5hbWUgPSBhcnJfY29udGVudFsxXSA/IGFycl9jb250ZW50WzFdIDogXCJcIjtcbiAgfVxuICByZXR1cm4gb2JqO1xufTtcbmV4cG9ydHMuZ2V0T25lUGFnZUluZm8gPSBnZXRPbmVQYWdlSW5mbztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxNZXRhLmpzXG4vLyBtb2R1bGUgaWQgPSA1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3NyYy9saWJfdS91dGlscy91dGlsQXR0cmlidXRlLmpzXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy50cnlUb0dldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSA/IChlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyX25hbWUpIHx8ICcnKSA6ICcnO1xufTtcblxudmFyIHRyeVRvU2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSwgYXR0cl92YWx1ZSkge1xuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSkge1xuICAgIHRyeSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyX25hbWUsIGF0dHJfdmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICB9XG4gIH1cbn07XG5leHBvcnRzLnRyeVRvU2V0QXR0cmlidXRlID0gdHJ5VG9TZXRBdHRyaWJ1dGU7XG5cbmV4cG9ydHMudHJ5VG9SZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cl9uYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJfbmFtZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdHJ5VG9TZXRBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cl9uYW1lLCAnJyk7XG4gICAgfVxuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDlsI/nqIvluo/kuIvpnaLnmoRzcG3kvZPns7tcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgaXNBcnJheSAgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIGFwbHVzU3RhdGljICA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICByZXNldExhc3RQYWdlU3BtOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUywge30pOyBcbiAgICAgIHZhciBzcG0gPSBhcGx1cy5fJC5zcG0gfHwge307XG4gICAgICBzcG0uc3BtX2NudCA9ICcnO1xuICAgIH0sXG4gICAgbGlzdGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVNfUVVFVUUsW10pOyAgXG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOmFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICAgICAgYXJndW1lbnRzOlsnb25TaG93JyxmdW5jdGlvbihvcHQpe1xuICAgICAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICAgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyx7fSk7IFxuICAgICAgICAgICAgdmFyIHBhZ2VzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BhZ2VzJyk7XG4gICAgICAgICAgICB2YXIgcGFnZUluc3RhbmNlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlUGF0aCA9IHBhZ2VJbnN0YW5jZS5yb3V0ZSB8fCBwYWdlSW5zdGFuY2UuaXM7XG4gICAgICAgICAgICBpZiAoaXNBcnJheShwYWdlcykpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gcGFnZXNbaV07XG4gICAgICAgICAgICAgICAgaWYoY3VycmVudC5tYXRjaFVybCA9PT0gY3VycmVudFBhZ2VQYXRoKXtcbiAgICAgICAgICAgICAgICAgIGFwbHVzLnNldFBhZ2VTUE0oY3VycmVudC5zcG1BLCBjdXJyZW50LnNwbUIpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOmFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICAgICAgYXJndW1lbnRzOlsnY2xlYXJQYWdlU1BNJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3NlbGYucmVzZXRMYXN0UGFnZVNwbSgpO1xuICAgICAgICB9XSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbXMgZGF0YSB7T2JqZWN0fSB7XG4gICAgICAgKiAgIHNwbUNudDogJ2EuYi4wLjAnXG4gICAgICAgKiAgIHNwbVVybDogJ2EuYi4wLjAnXG4gICAgICAgKiAgIHNwbVByZTogJ2EuYi4wLjAnXG4gICAgICAgKiB9XG4gICAgICAgKi9cbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246YXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgICAgICBhcmd1bWVudHM6WydzZXRQYWdlU1BNJyxmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUywge30pOyBcbiAgICAgICAgICAgIHZhciBzcG0gPSBhcGx1cy5fJC5zcG0gfHwge307XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpIHx8IFtdO1xuICAgICAgICAgICAgdmFyIHNwbWFiID0gZGF0YS5zcG1DbnQgPyBkYXRhLnNwbUNudC5zcGxpdCgnLicpIDogW3NwbS5kYXRhLmEgfHwgJzAnLCBzcG0uZGF0YS5iIHx8ICcwJ107XG4gICAgICAgICAgICBpZiAoc3BtYWIubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgIHNwbWFiID0gc3BtYWIuY29uY2F0KFsnMCcsICcwJ10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNwbWFic3RyID0gc3BtYWIuam9pbignLicpO1xuXG4gICAgICAgICAgICB2YXIgY3VycmVudFBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHZhciBwcmVQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMl0gfHwge307XG4gICAgICAgICAgICB2YXIgcHJlUHJlUGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDNdIHx8IHt9O1xuXG4gICAgICAgICAgICBpZiAocGFnZXMubGVuZ3RoID4gMCAmJiBjdXJyZW50UGFnZSkge1xuICAgICAgICAgICAgICBwYWdlc1twYWdlcy5sZW5ndGggLSAxXS5zcG0gPSBzcG1hYnN0cjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlU3BtID0gc3BtLmRhdGEgJiYgc3BtLmRhdGEuYSA/IFtzcG0uZGF0YS5hLCBzcG0uZGF0YS5iLCBzcG0uZGF0YS5jIHx8ICcwJywgc3BtLmRhdGEuZCB8fCAnMCddLmpvaW4oJy4nKSA6ICcnO1xuICAgICAgICAgICAgc3BtLmRhdGEuYSA9IHNwbWFiWzBdID8gJycgKyBzcG1hYlswXSA6ICcwJztcbiAgICAgICAgICAgIHNwbS5kYXRhLmIgPSBzcG1hYlsxXSA/ICcnICsgc3BtYWJbMV0gOiAnMCc7XG4gICAgICAgICAgICBzcG0uZGF0YS5jID0gJzAnO1xuICAgICAgICAgICAgc3BtLmRhdGEuZCA9ICcwJztcbiAgICAgICAgICAgIHNwbS5wYWdlX3JlZmVycmVyID0gcGFnZXMubGVuZ3RoID4gMSAmJiBjdXJyZW50UGFnZSA/IChjdXJyZW50UGFnZS5yb3V0ZSB8fCBjdXJyZW50UGFnZS5pcykgOiAnJztcbiAgICAgICAgICAgIHNwbS5zcG1fY250ID0gc3BtYWJzdHI7XG5cbiAgICAgICAgICAgIC8vIOS7peeUqOaIt+WcqFVSTOS4iuaLvOaOpeeahHNwbeS4uuWHhu+8jGFwbHVzLnNwbV9vcmlnbuadpea6kOS6jmF1dG9faW5pdC9pbmplY3RfYXBwLmpzXG4gICAgICAgICAgICB2YXIgc3BtX29yaWduID0gYXBsdXMuc3BtX29yaWduIHx8IHNwbS5zcG1fb3JpZ247XG4gICAgICAgICAgICBzcG0uc3BtX3ByZSA9IGRhdGEuc3BtUHJlIHx8IHNwbS5zcG1fdXJsIHx8IHByZVByZVBhZ2Uuc3BtIHx8ICcnO1xuICAgICAgICAgICAgc3BtLnNwbV91cmwgPSBkYXRhLnNwbVVybCB8fCBjdXJyZW50UGFnZVNwbSB8fCBwcmVQYWdlLnNwbSB8fCBzcG1fb3JpZ24gfHwgICcnO1xuICAgICAgICAgICAgYXBsdXMuXyQuc3BtID0gc3BtO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZXRQYWdlU1BNIGVycm9yLCB0aGUgZXJyb3JJbmZvIGlzICcsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgfV0sXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmxpc3RlbigpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbWluaV9zcG0uanNcbi8vIG1vZHVsZSBpZCA9IDU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiBhcGx1c19taW5pX3JlcG9ydF91bS5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgTWFpbiA9IHJlcXVpcmUoJy4vbGliX2Nvbm5lY3Rpb24vbWFpbl9taW5pX3VtX2h0dHAuanMnKTtcbiAgICAgIHZhciBtYWluID0gTWFpbi5jcmVhdGUoKTtcbiAgICAgIG1haW4ucnVuKHRoaXMub3B0aW9ucyk7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX21pbmlfcmVwb3J0X3VtLmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogbWFpbl9taW5pX3VtX2h0dHAuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuLy8gdmFyIGxvZ19jbG91ZCA9IHJlcXVpcmUoJy4vbG9nX2Nsb3VkJyk7XG52YXIgbWFpbl9iYXNlX2h0dHAgPSByZXF1aXJlKCcuL21haW5fYmFzZV9odHRwJyk7XG52YXIgZXZlbnRNYW5hZ2VyID0gcmVxdWlyZSgnLi4vbGliX3VtL2V2ZW50TWFuYWdlcicpO1xudmFyIHJlcXVlc3RRdWV1ZSA9IHJlcXVpcmUoJy4uL2xpYl91bS9yZXF1ZXN0UXVldWUnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL2xpYl91bS91dGlscycpO1xudmFyIHVsb2cgPSByZXF1aXJlKCcuLi9saWJfdW0vdWxvZycpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xuXG5mdW5jdGlvbiBoYW5kbGVFdmVudChpZCwgb3B0aW9ucykge1xuICB1bG9nKCkudignZXZlbnQ6ICcsIGlkLCBvcHRpb25zKTtcbiAgXG4gIGlmICh1dGlscy5jaGVja0V2ZW50KGlkLCBvcHRpb25zKSkge1xuICAgIHZhciBldmVudCA9IHJlcXVpcmUoJy4uL2xpYl91bS9ldmVudC5qcycpKGlkLCBvcHRpb25zKTtcbiAgICBldmVudE1hbmFnZXIoKS5hZGRFdmVudChldmVudCk7XG5cbiAgICByZXF1ZXN0UXVldWUoKS5zZW5kKHV0aWxzLkRhdGFUeXBlLkVLViwgeyBub0NhY2hlOiBmYWxzZSB9LCBmdW5jdGlvbigpe1xuICAgICAgdWxvZygpLmkoJ2V2ZW50IHNlbmQgc3VjY2VzczogJywgaWQsIGV2ZW50KTtcbiAgICB9KTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBtYWluX2Jhc2VfaHR0cC5leHRlbmQoe1xuXG4gIGhhbmRsZXJNaWRkbGV3YXJlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHVsb2coKS5zZXREZWJ1ZyghIWFwbHVzLmdldE1ldGFJbmZvKCdERUJVRycpKTtcbiAgICB2YXIgdXNlckV2ZW50QXJncywgZ29rZXk7XG4gICAgdmFyIGxvZ2tleSA9IGRhdGEgJiYgZGF0YS51c2VyZGF0YSAmJiBkYXRhLnVzZXJkYXRhLmxvZ2tleTtcbiAgICB2YXIgZ21rZXkgPSBkYXRhICYmIGRhdGEudXNlcmRhdGEgJiYgZGF0YS51c2VyZGF0YS5nbWtleTtcbiAgICB2YXIgbG9nZGF0YSA9IGRhdGEgJiYgZGF0YS53aGF0X3RvX3NlbmQgJiYgZGF0YS53aGF0X3RvX3NlbmQubG9nZGF0YSAmJiBkYXRhLndoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuICAgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuICAgIHZhciBwYWdlX25hbWU7XG4gICAgaWYgKGdta2V5ID09PSAnQ0xLJyB8fCBnbWtleSA9PT0gJ0VYUCcgfHwgZ21rZXkgPT09ICdPVEhFUicgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfU1RBUlQgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG4gICAgICB1c2VyRXZlbnRBcmdzID0gY2xvbmVEZWVwKGRhdGEgJiYgZGF0YS51c2VyZGF0YSAmJiBkYXRhLnVzZXJkYXRhLmdva2V5IHx8IHt9KTtcbiAgICAgIGdva2V5ID0gbG9nZGF0YS5nb2tleSB8fCB7fTtcbiAgICAgIHZhciBldmVudF9hcmdzO1xuICAgICAgdmFyIHNka0FyZ3MgPSB7fTtcbiAgICAgIGlmIChsb2drZXkgPT09ICckJF9zaGFyZScpIHtcbiAgICAgICAgc2RrQXJncy5yZWZlcl9wYWdlID0gbG9nZGF0YS51cmw7XG4gICAgICAgIHNka0FyZ3Muc2hhcmVfdHlwZSA9IHVzZXJFdmVudEFyZ3Muc2hhcmVfdHlwZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdva2V5LnNjZW5lKSB7XG4gICAgICAgIHNka0FyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG4gICAgICB9XG4gICAgICBwYWdlX25hbWUgPSB1c2VyRXZlbnRBcmdzWydkYXRhLXBhZ2VuYW1lJ10gfHwgdXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgKHVzZXJFdmVudEFyZ3Muc3BtICYmIHVzZXJFdmVudEFyZ3Muc3BtLmIpIHx8IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgbG9nZGF0YS51cmwgfHwgJyc7XG4gICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcbiAgICAgIFxuICAgICAgc2RrQXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG4gICAgICBpZiAodXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddKSB7XG4gICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzLnBhZ2VfbmFtZTtcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3NbJ2RhdGEtcGFnZW5hbWUnXTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdwKSB7XG4gICAgICAgIHNka0FyZ3MuZ3AgPSBncDtcbiAgICAgIH1cblxuICAgICAgaWYgKHVzZXJFdmVudEFyZ3Muc3BtKSB7XG4gICAgICAgIHNka0FyZ3NbJ3NwbS1jbnQnXSA9IFtlbmNvZGVVUklDb21wb25lbnQocGFnZV9uYW1lKSwgdXNlckV2ZW50QXJncy5zcG0uYywgdXNlckV2ZW50QXJncy5zcG0uZF0uZmlsdGVyKGZ1bmN0aW9uKHYpe1xuICAgICAgICAgIHJldHVybiAhIXY7XG4gICAgICAgIH0pLmpvaW4oJy4nKTtcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3Muc3BtO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xvbmVQID0gY2xvbmVEZWVwKHVzZXJFdmVudEFyZ3MpO1xuICAgICAgZm9yICh2YXIgayBpbiBjbG9uZVApIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrID09PSAnc3RyaW5nJyAmJiB1dGlscy5zdGFydHNXaXRoKGssICdfJykpIHtcbiAgICAgICAgICBzZGtBcmdzW2tdID0gY2xvbmVQW2tdO1xuICAgICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzW2tdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfU1RBUlQgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG4gICAgICAgIGV2ZW50X2FyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oc2RrQXJncywgdXNlckV2ZW50QXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudF9hcmdzID0gdXRpbERhc2guYXNzaWduKHNka0FyZ3MsIHsgY3VzcDogdXNlckV2ZW50QXJncyB9KTtcbiAgICAgIH1cbiAgICAgIGhhbmRsZUV2ZW50KGxvZ2tleSwgZXZlbnRfYXJncyk7XG4gICAgfSBlbHNlIGlmIChsb2dkYXRhLmV2ZW50X2NvZGUgPT09ICcyMDAxJykgeyBcbiAgICAgIHZhciBwdmFyZ3MgPSB7fTtcbiAgICAgIHZhciBwYWdlX2lkID0gYXBsdXNTdGF0aWMuUEFHRV9TVEFSVDtcbiAgICAgIGdva2V5ID0gY2xvbmVEZWVwKGxvZ2RhdGEuZ29rZXkgfHwge30pO1xuICAgICAgXG4gICAgICBwYWdlX25hbWUgPSBnb2tleS5wYWdlX25hbWUgfHwgYXBsdXMuZ2V0UGFnZU5hbWUoKSB8fCBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZShsb2dkYXRhLnVybCkgfHwgbG9nZGF0YS51cmwgfHwgJyc7XG4gICAgICBwdmFyZ3MuciA9IGxvZ2RhdGEuYXJnMSB8fCBsb2dkYXRhLmxvZ2tleSB8fCAnLSc7XG4gICAgICBwdmFyZ3MucGFnZV9uYW1lID0gcGFnZV9uYW1lO1xuICAgICAgcHZhcmdzLnVybCA9IGxvZ2RhdGEudXJsIHx8ICctJztcbiAgICAgIHB2YXJncy5yZWZfdXJsID0gbG9nZGF0YS5wcmU7XG5cbiAgICAgIGlmIChnb2tleS5fcGFnZV9hdXRvX3B2KSB7XG4gICAgICAgIHB2YXJncy5pc19hdXRvID0gMTtcbiAgICAgICAgZGVsZXRlIGdva2V5Ll9wYWdlX2F1dG9fcHY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdmFyZ3MuaXNfYXV0byA9IDA7XG4gICAgICB9XG5cbiAgICAgIGlmIChnb2tleS5kdXJhdGlvbikge1xuICAgICAgICBwdmFyZ3MuZHVyYXRpb24gPSBnb2tleS5kdXJhdGlvbjtcbiAgICAgICAgZGVsZXRlIGdva2V5LmR1cmF0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ3ApIHtcbiAgICAgICAgcHZhcmdzLmdwID0gZ3A7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChnb2tleS5zY2VuZSkge1xuICAgICAgICBwdmFyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG4gICAgICB9XG4gICAgICBnb2tleSA9IHV0aWxzLmRlbGV0ZUluZm8oZ29rZXksIFsnX2Fub255X2lkJywgJ19kZXZfaWQnLCAnX3Nlc3Npb25faWQnLCAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaycsICd1YWlkJywgJ3B2aWQnLCAnc2NlbmUnXSk7XG4gICAgICBwdmFyZ3NbJ3NwbS1jbnQnXSA9IGVuY29kZVVSSUNvbXBvbmVudChwYWdlX25hbWUpO1xuICAgICAgaWYgKGdva2V5Ll9wYWdlX2F1dG9faWQpIHtcbiAgICAgICAgcGFnZV9pZCA9IGdva2V5Ll9wYWdlX2F1dG9faWQ7XG4gICAgICAgIGRlbGV0ZSBnb2tleS5fcGFnZV9hdXRvX2lkO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ29rZXkucGFnZV9zdGFydCkge1xuICAgICAgICBwdmFyZ3MucGFnZV9zdGFydCA9IGdva2V5LnBhZ2Vfc3RhcnQ7XG4gICAgICAgIGRlbGV0ZSBnb2tleS5wYWdlX3N0YXJ0O1xuICAgICAgfVxuXG4gICAgICBpZiAoZ29rZXkucGFnZV9uYW1lKSB7XG4gICAgICAgIC8vIGRlbGV0ZSBnb2tleS5wYWdlX25hbWU7XG4gICAgICB9XG4gICAgICBoYW5kbGVFdmVudChwYWdlX2lkLCB1dGlsRGFzaC5hc3NpZ24ocHZhcmdzLCB7IGN1c3A6IGdva2V5fSApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coMjIyMiwgZGF0YSk7XG4gICAgfVxuICB9LFxuXG4gIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy53YXRjaExPRygpO1xuICB9XG4gIFxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfY29ubmVjdGlvbi9tYWluX21pbmlfdW1faHR0cC5qc1xuLy8gbW9kdWxlIGlkID0gNTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDmi6bmiKrlubbmjIlodHRw5Y2P6K6u5Y+R6YCB5pel5b+XXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbi8vIHZhciBsb2dfY2xvdWQgPSByZXF1aXJlKCcuL2xvZ19jbG91ZCcpO1xudmFyIHV0aWxHUSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR1EnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh7XG5cbiAgc3Vic2NyaWJlTG9nczogZnVuY3Rpb24gKGFjdGlvbiwgY2FsbGJhY2spIHtcbiAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBbYWN0aW9uLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcbiAgICAgIGlmIChvcmlEYXRhcy5zdGF0dXMgPT09IGFwbHVzU3RhdGljLkNPTVBMRVRFKSB7XG4gICAgICAgIGNhbGxiYWNrKG9yaURhdGFzKTtcbiAgICAgIH1cbiAgICB9XSk7XG4gIH0sXG5cbiAgZ2V0TG9naWNTeW1ib2w6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXQgPT09ICdBTEknID8gJyYnIDogJ3x8JztcbiAgfSxcblxuICAvKipcbiAgICog5Zyo5a2Q57G75Lit5a6e546wXG4gICAqIEBwYXJhbXMge09iamVjdH0gZGF0YVxuICAgKi9cbiAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uICgpIHt9LFxuICBcblxuICB3YXRjaExPRzogZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgXG4gICAgLy8g6K6i6ZiFcHbkuovku7ZcbiAgICBfc2VsZi5zdWJzY3JpYmVMb2dzKGFwbHVzU3RhdGljLk1XX0NIQU5HRV9QViwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsICdwdicpO1xuICAgIH0pO1xuXG4gICAgLy8g6K6i6ZiFaGpsai9hcGx1c+S6i+S7tlxuICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEosIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBfc2VsZi5oYW5kbGVyTWlkZGxld2FyZShkYXRhLCBhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy53YXRjaExPRygpO1xuICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbWFpbl9iYXNlX2h0dHAuanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qc1xuICog5pON5L2cYXBsdXNfcXVldWXnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuL3V0aWxHb2xkbG9nJyk7XG5cbmV4cG9ydHMucHVzaEludG9Hb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoYWN0aW9uLCBhcmdzKSB7XG4gIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG5hbWVzID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gIHZhciBhcGx1c18xID0gYXBsdXNbbmFtZXNbMV1dO1xuICB2YXIgYXBsdXNfMiA9IGFwbHVzXzEgPyBhcGx1c18xW25hbWVzWzJdXSA6IG51bGw7XG5cbiAgaWYgKGFwbHVzICYmIG5hbWVzLmxlbmd0aCA9PT0gMiAmJiBhcGx1c18xKSB7XG4gICAgYXBsdXNfMS5hcHBseShhcGx1cywgYXJncyk7XG4gIH0gZWxzZSBpZiAobmFtZXMubGVuZ3RoID09PSAzICYmIGFwbHVzXzIpIHtcbiAgICBhcGx1c18yLmFwcGx5KGFwbHVzXzEsIGFyZ3MpOyAgXG4gIH0gZWxzZSB7XG4gICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGFyZ3VtZW50czogYXJnc1xuICAgIH0pO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdRLmpzXG4vLyBtb2R1bGUgaWQgPSA1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogZXZlbnQuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGlkLCBwcm9wZXJ0aWVzKSB7XG4gIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdmFyIGV2ZW50ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZXZlbnQuaWQgPSBpZDtcbiAgaWYgKCFwcm9wZXJ0aWVzIHx8ICFwcm9wZXJ0aWVzLnRzKSB7XG4gICAgZXZlbnQudHMgPSBEYXRlLm5vdygpO1xuICB9XG4gIHZhciBwcm9wc1R5cGUgPSB0eXBlb2YgcHJvcGVydGllcztcbiAgaWYgKHByb3BzVHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSkge1xuICAgICAgICBldmVudFtrZXldID0gcHJvcGVydGllc1trZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG4gIGlmIChncCkge1xuICAgIGV2ZW50WydncCddID0gZ3A7IFxuICB9XG4gIHJldHVybiBldmVudDtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vZXZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDms6jlhaVsb2dDb25maWcs5L6b5ZCO57ut5o+S5Lu25L2/55SoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGVhY2ggPSByZXF1aXJlKCcuLi9saWJfdS91dGlscy9lYWNoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIGdldExvZ0NvbmZpZzogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGxvZ0NvbmZpZyA9IHt9O1xuICAgICAgdmFyIHBsdWdpbnMgPSB0aGlzLm9wdGlvbnMuY29uZmlnLnBsdWdpbnM7XG5cbiAgICAgIGZvciAodmFyIGsgaW4gcGx1Z2lucykge1xuICAgICAgICBsb2dDb25maWdba10gPSB7XG4gICAgICAgICAgcGx1Z2luczogcGx1Z2luc1trXSxcbiAgICAgICAgICBjb250ZXh0OiB7fVxuICAgICAgICB9O1xuICAgICAgICBlYWNoKHBsdWdpbnNba10sIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgbG9nQ29uZmlnW2tdLmNvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnIHx8IHt9O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsb2dDb25maWc7XG4gICAgfSxcblxuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnID0gdGhpcy5nZXRMb2dDb25maWcoKTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5QQUdFX0xPQURfVElNRTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9hcGx1c19sb2dfaW5qZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSA2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL2V0YWcuanNcbiAqXG4gKiDkvZznlKjvvJrlkIzmraVhcGx1c19pbml05bel5L2c5rWB55qE5L+h5oGvXG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxFdGFnID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdGFnJyk7XG5cbnZhciBFTVBUWV9DTkEgPSAnRU1QVFlfQ05BJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICBfc3luY0V0YWc6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHZhciBjaGVjayA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciBjbmEgPSBvICYmIG8uZGF0YSA/IG8uZGF0YS5jbmEgOiAnJztcbiAgICAgICAgaWYgKCFjbmEpIHtcbiAgICAgICAgICBpZiAoYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID09PSAnWScpIHtcbiAgICAgICAgICAgIC8vIOS4uuS6huino+WGs+W5tuWPkemXrumimO+8jOS7jmFwbHVzX3F1ZXVl5pS55oiQ55u05o6l55SoYXBsdXMuYXBsdXNfcHVic3ViIEDosIvlo6sgMjAwMjEtMDEtMTlcbiAgICAgICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ2V0YWcnLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2sodmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvU3luY0V0YWcoKTsgIFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKGV0YWdTdG9yYWdlS2V5LCBjbmEpO1xuICAgICAgICAgIGNhbGxiYWNrKGNuYSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIHZhciBhcGx1c19yaG9zdF92ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJob3N0LXYnKTtcbiAgICAgIHZhciB1cmw7XG5cbiAgICAgIGlmIChhcGx1c19yaG9zdF92KSB7XG4gICAgICAgIHVybCA9IHV0aWxFdGFnLmdldFVybCh7XG4gICAgICAgICAgZWdVcmw6IChhcGx1c19yaG9zdF92LmluZGV4T2YoJy8vJykgPT09IC0xID8gJy8vJyArIGFwbHVzX3Job3N0X3YgOiBhcGx1c19yaG9zdF92KSArICcvZWcuanMnXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcpIHtcbiAgICAgICAgICBfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZy5lZ1VybCA9IHVybDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgICAgdmFyIGV0YWdTdG9yYWdlS2V5ID0gYXBsdXMuZ2xvYmFsQ29uZmlnLkVUQUdfU1RPUkFHRV9LRVk7XG4gICAgICB2YXIgdG9TeW5jRXRhZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHVybCkge1xuICAgICAgICAgIGFwbHVzLmZldGNoRXRhZ1N0YXR1cyA9ICdZJztcbiAgICAgICAgICBtaW5pLnJlcXVlc3QodXJsLCB7XG4gICAgICAgICAgICBkYXRhVHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgcmVxdWVzdE1ldGhvZE5hbWU6ICdyZXF1ZXN0J1xuICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGFwbHVzLmZldGNoRXRhZ1N0YXR1cyA9ICdOJztcbiAgICAgICAgICAgIHZhciBldGFnID0gJyc7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhIHx8ICcnO1xuICAgICAgICAgICAgICB2YXIgYXJyID0gZGF0YS5zcGxpdCgnOycpO1xuICAgICAgICAgICAgICBpZiAoYXJyLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXRhZ0tleVZhbHVlID0gYXJyWzFdO1xuICAgICAgICAgICAgICAgIHZhciBldGFncyA9IGV0YWdLZXlWYWx1ZS5zcGxpdCgnPScpO1xuICAgICAgICAgICAgICAgIGV0YWcgPSBldGFnc1sxXSB8fCAnJztcbiAgICAgICAgICAgICAgICBldGFnID0gZXRhZy5yZXBsYWNlKC9cXFwiL2csICcnKTtcbiAgICAgICAgICAgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKGV0YWdTdG9yYWdlS2V5LCBldGFnKTtcbiAgICAgICAgICAgICAgICBjdHguc2V0U3RvcmFnZSh7XG4gICAgICAgICAgICAgICAgICBrZXk6IGV0YWdTdG9yYWdlS2V5LFxuICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjbmE6IGV0YWdcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyDkuLrkuobop6PlhrPlubblj5Hpl67popjvvIzku45hcGx1c19xdWV1ZeaUueaIkOebtOaOpeeUqGFwbHVzLmFwbHVzX3B1YnN1YlxuICAgICAgICAgICAgICAgIC8vIOW5tmNhY2hl5L2P5LiK5LiA5qyh55qE57uT5p6cIEDosIvlo6sgMjAwMjEtMDEtMTlcbiAgICAgICAgICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIucHVibGlzaCgnZXRhZycsIGV0YWcpO1xuICAgICAgICAgICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5jYWNoZVB1YnMoJ2V0YWcnLCBldGFnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZXRhZykge1xuICAgICAgICAgICAgICBldGFnID0gRU1QVFlfQ05BO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soZXRhZyk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24gKHJlczIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlczIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdmFyIENOQSA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoZXRhZ1N0b3JhZ2VLZXkpO1xuICAgICAgaWYgKENOQSkge1xuICAgICAgICBjYWxsYmFjayhDTkEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LmdldFN0b3JhZ2Uoe1xuICAgICAgICAgIGtleTogZXRhZ1N0b3JhZ2VLZXksXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgY2hlY2socmVzKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGNoZWNrKHJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcHblj5HpgIHliLDlk6rph4zljrtcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjO+8jOi/lOWbnuKAnHBhdXNl4oCd5pqC5YGc5Lit6Ze05Lu25omn6KGM77yM6L+U5Zue5LiA5Liq5pW05pWw4oCcbuKAneWRiuivieS4remXtOS7tuKAnG7igJ3mr6vnp5LlkI7nu6fnu63miafooYzkuK3pl7Tku7ZcbiAgICAgKiDigJzmmoLlgZzigJ3mnIDlpJoxMHPvvIzoi6XotoXml7bkuK3pl7Tku7bkvJrlvLrliLbnu6fnu63miafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uIChzdGF0ZSwgY2IpIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICAvLyB2YXIgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIHZhciBldGFnVGltZW91dCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1ldGFnLXRpbWVvdXQnKTtcbiAgICAgIHZhciBkZWZhdWx0VGltZSA9IDIwMDtcbiAgICAgIHZhciB0aW1lID0gZGVmYXVsdFRpbWU7XG4gICAgICB0cnkge1xuICAgICAgICB0aW1lID0gcGFyc2VJbnQoZXRhZ1RpbWVvdXQpO1xuICAgICAgICBpZiAoaXNOYU4odGltZSkpIHtcbiAgICAgICAgICB0aW1lID0gZGVmYXVsdFRpbWU7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc3luY0V0YWcoZnVuY3Rpb24gKGNuYSkge1xuICAgICAgICBpZiAoX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcpIHtcbiAgICAgICAgICBfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZy5jbmEgPSBjbmE7ICBcbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZSA+PSAyMDApIHtcbiAgICAgICAgICBjYihjbmEpOyAgXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgLy8g5ZGK6K+JY29tcG9zZeaaguWBnOaJp+ihjOS4remXtOS7tu+8jOebtOWIsGNi5Zue5Yiw5ZCO5YaN57un57utXG4gICAgICBpZiAodGltZSA8IDIwMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXR1cm4gdGltZTtcbiAgICB9LFxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9ldGFnX21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbERhdGEgPSByZXF1aXJlKCcuL3V0aWxEYXRhJyk7XG5cbi8vIOS7hemZkOW8ueWGhe+8m+Wwj+exs+emgeeUqGVnLmpz5bqU5a+5562W55Wl77ya5L2/55So5Yqo5oCB5ZCO57yA5ZCNXG4vLyDlkI7nvIDlkI3nlJ/miJDmlrnms5U6IOW9k+WJjeaXtumXtOaIs+i9rDE26L+b5Yi277yM5Y+W5ZCOOOS9je+8jFxuLy8gZnVuY3Rpb24gZXRhZ1VybFN1ZmZpeChldGFnVXJsKSB7XG4vLyAgIHZhciBkeW5hbWljVXJsID0gZXRhZ1VybDtcbi8vICAgdHJ5IHtcbi8vICAgICBpZihhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbi8vICAgICAgIHRyeSB7XG4vLyAgICAgICAgIHZhciB0aW1lU3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbi8vICAgICAgICAgdmFyIGR5bmFtaWNTdWZmaXggPSB0aW1lU3RhbXAudG9TdHJpbmcoMTYpLnNsaWNlKC04KTtcbi8vICAgICAgICAgd2hpbGUoZHluYW1pY1N1ZmZpeC5sZW5ndGggPCA4KSB7XG4vLyAgICAgICAgICAgZHluYW1pY1N1ZmZpeCA9IGR5bmFtaWNTdWZmaXggKyAnZic7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgZHluYW1pY1VybCA9IGV0YWdVcmwucmVwbGFjZSgvZWcuanMvLCBkeW5hbWljU3VmZml4ICsgJy5qcycpO1xuLy8gICAgICAgfSBjYXRjaChlKSB7XG4vLyAgICAgICB9XG4vLyAgICAgICByZXR1cm4gZHluYW1pY1VybDtcbi8vICAgICB9XG4vLyAgIH0gY2F0Y2goZSkge1xuXG4vLyAgIH1cbi8vICAgcmV0dXJuIGR5bmFtaWNVcmw7XG4vLyB9XG5cbmV4cG9ydHMuZ2V0VXJsID0gZnVuY3Rpb24gKGV0YWcpIHtcbiAgdmFyIHVybCA9IHV0aWxEYXRhLmdldFVybChldGFnICYmIGV0YWcuZWdVcmwpO1xuICAvLyB1cmwgPSBldGFnVXJsU3VmZml4KHVybCk7XG4gIC8vIOWmguaenGVnVXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0XG4gIGlmICh1cmwuaW5kZXhPZignaHR0cCcpICE9PSAwKSB7XG4gICAgdmFyIHByb3RvY2FsID0gJ2h0dHBzOic7XG4gICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG4gICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgfVxuICAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuICB9XG4gIHJldHVybiB1cmw7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxFdGFnLmpzXG4vLyBtb2R1bGUgaWQgPSA2MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbFRyaW0gPSByZXF1aXJlKCcuL3V0aWxUcmltJyk7XG52YXIgdXRpbFN0b3JlID0gcmVxdWlyZSgnLi91dGlsU3RvcmUnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdHJ5VG9EZWNvZGVVUklDb21wb25lbnQ6IGZ1bmN0aW9uICh2YWwsIGRlZmF1bHRfdmFsKSB7XG4gICAgdmFyIHYgPSBkZWZhdWx0X3ZhbCB8fCAnJztcbiAgICBpZiAodmFsKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2O1xuICB9LFxuICBcbiAgLyoqXG4gICAqIOWwhuW9ouWmgiBcInBhZ2VJZD0xMjM7IHNpdGVJZD00NTZcIiDnmoTlhoXlrrnop6PmnpDkuLogT2JqZWN0XG4gICAqIEBwYXJhbSBzIHtTdHJpbmd9XG4gICAqIEBwYXJhbSBbZGljdF0ge09iamVjdH1cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgcGFyc2VTZW1pY29sb25Db250ZW50OiBmdW5jdGlvbiAocywgZGljdCwgdW5kZWNvZGUpIHtcbiAgICBkaWN0ID0gZGljdCB8fCB7fTtcbiAgICB2YXIgYSA9IHMuc3BsaXQoJzsnKTtcbiAgICB2YXIgajtcbiAgICB2YXIgYV9sZW4gPSBhLmxlbmd0aDtcbiAgICB2YXIgYTI7XG5cbiAgICBmb3IgKGogPSAwOyBqIDwgYV9sZW47IGorKykge1xuICAgICAgYTIgPSBhW2pdLnNwbGl0KCc9Jyk7XG4gICAgICB2YXIgX3ZhbHVlID0gdXRpbFRyaW0udHJpbShhMi5zbGljZSgxKS5qb2luKCc9JykpO1xuICAgICAgZGljdFt1dGlsVHJpbS50cmltKGEyWzBdKSB8fCAnJ10gPSB1bmRlY29kZSA/IF92YWx1ZSA6IHRoaXMudHJ5VG9EZWNvZGVVUklDb21wb25lbnQoX3ZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGljdDtcbiAgfSxcblxuICAvKipcbiAgICog5bCG5LiA5LiqIG5vZGUgbGlzdCDovazkuLrmlbDnu4RcbiAgICogQHBhcmFtIG5vZGVzIHtOb2RlTGlzdH1cbiAgICog5Y+C6KeB77yaaHR0cDovL3d3dy5wbGFuYWJjLm5ldC8yMDEwLzAxLzA2L2FyZ3VtZW50c190b19hcnJheS9cbiAgICovXG4gIG5vZGVMaXN0VG9BcnJheTogZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgdmFyIGFycjtcbiAgICB2YXIgbGVuZ3RoO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIHdvcmtzIGluIGV2ZXJ5IGJyb3dzZXIgZXhjZXB0IElFXG4gICAgICBhcnIgPSBbXS5zbGljZS5jYWxsKG5vZGVzKTtcbiAgICAgIHJldHVybiBhcnI7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBzbG93ZXIsIGJ1dCB3b3JrcyBpbiBJRVxuICAgICAgYXJyID0gW107XG4gICAgICBsZW5ndGggPSBub2Rlcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyLnB1c2gobm9kZXNbaV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXJyO1xuICAgIH1cbiAgfSxcblxuICBnZXRMc0NuYTogZnVuY3Rpb24gKEVUQUdfU1RPUkFHRV9LRVksIGRhdGUpIHtcbiAgICBpZiAodXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG4gICAgICB2YXIgX2xzX2NuYSA9ICcnO1xuICAgICAgdmFyIF92YWx1ZSA9IHV0aWxTdG9yZS5nZXQoRVRBR19TVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoX3ZhbHVlKSB7XG4gICAgICAgIHZhciBfYXJyID0gX3ZhbHVlLnNwbGl0KCdfJykgfHwgW107XG4gICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgX2xzX2NuYSA9IF9hcnIubGVuZ3RoID4gMSAmJiBkYXRlID09PSBfYXJyWzBdID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9sc19jbmEgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoX2xzX2NuYSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0sXG5cbiAgLy8gdXRpbFN0b3JlLnNldCh0aGlzLkVUQUdfU1RPUkFHRV9LRVksICB0aGlzLnRvZGF5ICsgJ18nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNuYSkpO1xuICBzZXRMc0NuYTogZnVuY3Rpb24gKEVUQUdfU1RPUkFHRV9LRVksIHRvZGF5LCBjbmEpIHtcbiAgICBpZiAoY25hICYmIHV0aWxTdG9yZS5zZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuICAgICAgdXRpbFN0b3JlLnNldChFVEFHX1NUT1JBR0VfS0VZLCAgdG9kYXkgKyAnXycgKyBlbmNvZGVVUklDb21wb25lbnQoY25hKSk7XG4gICAgfVxuICB9LFxuXG4gIGdldFVybDogZnVuY3Rpb24gKHVybCkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHZhciBlZ1VybCA9IHVybCB8fCAnLy9sb2cubW1zdGF0LmNvbS9lZy5qcyc7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByaG9zdF92ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJob3N0LXYnKTtcbiAgICAgIHZhciByZWcgPSAvW1thLXp8XFwtfFxcX3wwLTlcXC5dK1thLXp8XFwtfFxcX3wwLTldKDpcXGQqKT8vO1xuICAgICAgdmFyIGN1c3RvbV9ob3N0ID0gcmhvc3Rfdi5tYXRjaChyZWcpO1xuICAgICAgaWYgKGN1c3RvbV9ob3N0ICYmIGN1c3RvbV9ob3N0WzBdKSB7XG4gICAgICAgIC8vIGVnVXJsID0gZWdVcmwucmVwbGFjZShyZWcsIGN1c3RvbV9ob3N0WzBdKTtcbiAgICAgICAgZWdVcmwgPSAnLy8nICsgY3VzdG9tX2hvc3RbMF0gKyAnL2VnLmpzJztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgfVxuICAgIHJldHVybiBlZ1VybDtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxEYXRhLmpzXG4vLyBtb2R1bGUgaWQgPSA2M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5a+55a2X56ym5Liy6L+b6KGMdHJpbeWkhOeQhlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICog5Y675o6J5a2X56ym5LiyIHMg5YmN5ZCO55qE56m65qC8XG4gKiBAcGFyYW0gcyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiB0cmltKHMpIHtcbiAgcmV0dXJuICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpID8gcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykgOiAnJztcbn07XG5leHBvcnRzLnRyaW0gPSB0cmltO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbFRyaW0uanNcbi8vIG1vZHVsZSBpZCA9IDY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGssIHYpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcbiAgLy8g57uP6L+HdGVzdOS5i+WQjmdldOW6lOivpeS4jeS8muaciemXrumimFxuICBnZXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuICB0ZXN0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRlc3RLZXkgPSAnZ3JleV90ZXN0X2tleSc7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRlc3RLZXksIDEpO1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdEtleSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uIChrKSB7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oayk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsU3RvcmUuanNcbi8vIG1vZHVsZSBpZCA9IDY1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hlbl90b19zZW5kLmpzXG4gKlxuICogICDkvZznlKjvvJog5L2V5pe25omn6KGMc2VuZHB25o+S5Lu2XG4gKiAgIGZuOiBnZXRNZXRhSW5mbyDnu6fmib/oh7NCYXNlXG4gKiAgIGZuOiBydW4gKOaPkuS7tuagh+WHhueahOaJp+ihjOWFpeWPoylcbiAqICAgYXBsdXMtd2FpdGluZz1cIjFcIjog562J5b6FNuenkuWQjuWwneivleWPkemAgVBW5pel5b+XO1xuICogICBhcGx1cy13YWl0aW5nPVwiTUFOXCI6IOS4jeiHquWKqOWPkemAgVBW5pel5b+XO1xuICogICBhcGx1cy13YWl0aW5nPVwiblwiOiDlhbbkuK1u5Li65aSn5LqOMeeahOato+aVtOaVsCwgYXBsdXPlnKjnrYnlvoVu5q+r56eS5LmL5ZCO5bCd6K+V5Y+R6YCBUFbml6Xlv5c7XG4gKlxuICogICBkZXBz77yaIOaXoFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZtZXRhX2luZm9cbiAgICAgKiBUT0RPIOiLpeS7iuWQjuacieWKqOaAgeS/ruaUuW1ldGFfaW5mb+eahOmcgOaxgu+8jFxuICAgICAqIOatpOWkhOmcgOimgeWKqOaAgeS7jiBtZXRhSW5mb+aooeWdl+S4reWOu+iwg+eUqGdldEluZm/mlrnms5XmnaXojrflj5bnm7jlhbPkv6Hmga/vvIzov5nmoLflgZrnmoTlnY/lpITmmK/mtojogJfmgKfog71cbiAgICAgKi9cbiAgICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuICAgICAgcmV0dXJuIG1ldGFfaW5mbztcbiAgICB9LFxuXG4gICAgZ2V0QXBsdXNXYWl0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtZXRhX2luZm8gPSB0aGlzLmdldE1ldGFJbmZvKCkgfHwge307XG4gICAgICByZXR1cm4gbWV0YV9pbmZvWydhcGx1cy13YWl0aW5nJ107XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo++8jOmFjee9ruS6hmFwbHVzV2FpdGluZyDlubbkuJQg5pivYXBsdXPoh6rliqjmiZPngrnmiY3otbDov5nmrrXpgLvovpFcbiAgICAgKiA8bWV0YSBuYW1lPVwiYXBsdXMtd2FpdGluZ1wiIGNvbnRlbnQ9XCJ4eHhcIiAvPlxuICAgICAqICAgeHh4OiAnTUFOJyAtIOS4jeWPkemAgXB255qE5qCH6K+GXG4gICAgICogICB4eHg6ICcxJyAtIOWwneivleetieW+hTbnp5LlkI7lj5FwdlxuICAgICAqXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIo57uI5q2i5Lit6Ze05Lu25omn6KGMKSB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oc3RhdGUsIGNiKSB7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpO1xuICAgICAgaWYgKGFwbHVzV2FpdGluZyAmJiBjb25maWcuaXNfYXV0bykge1xuICAgICAgICBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpICsgJyc7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2ID0ge1xuICAgICAgICAgIGFwbHVzV2FpdGluZzogYXBsdXNXYWl0aW5nXG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaChhcGx1c1dhaXRpbmcpIHtcbiAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fVVNFUl9JRDpcbiAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fQU5PTllfSUQ6XG4gICAgICAgIGNhc2UgJ01BTic6XG4gICAgICAgICAgcmV0dXJuICdkb25lJztcbiAgICAgICAgY2FzZSAnMSc6XG4gICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYuaXNXYWl0ID0gdHJ1ZTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICAgIH0sIDYwMDApO1xuICAgICAgICAgIHJldHVybiA2MDAwO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHZhciBuID0gYXBsdXNXYWl0aW5nICogMTtcbiAgICAgICAgICBpZiAoKG4gKyAnJykgIT09ICdOYU4nKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfSwgbik7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9LFxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doZW5fdG9fc2VuZHB2LmpzXG4vLyBtb2R1bGUgaWQgPSA2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogd2hlcmVfdG9fc2VuZF9taW5pX3VtLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICog6I635Y+WIG1ldGFfaW5mbyBcbiAgICAqL1xuICAgIGdldE1ldGFJbmZvOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICByZXR1cm4gKF8kLm1ldGFfaW5mbyB8fCB7fSlba2V5XTtcbiAgICB9LFxuXG4gICAgZ2V0SG9zdFVybDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmhvc3QgPSB0aGlzLmdldE1ldGFJbmZvKCdhcGx1cy1yaG9zdC12Jyk7XG4gICAgICB2YXIgbG9nRG9tYWluID0gbWluaS5nZXRMb2dEb21haW4oKTtcbiAgICAgIGlmICghcmhvc3QgfHwgIWxvZ0RvbWFpbikgeyBcbiAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgIG1zZzogJ2N1cnJlbnQgcmVxdWVzdCBkb21haW4gaW52YWxpZCwgcGxlYXNlIGNoZWNrIHlvdXIgYXBsdXMtcmhvc3QtdiB2YWx1ZSBpbnNpZGUgbWV0YWluZm8hJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgdmFyIHVybCA9IFsnLy8nLCByaG9zdCwgbG9nRG9tYWluXTtcbiAgICAgIHJldHVybiB1cmwuam9pbignJyk7XG4gICAgfSxcblxuXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQubWV0aG9kID0gJ1BPU1QnO1xuICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0SG9zdFVybCgpO1xuICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgcmV0dXJuICdkb25lJztcbiAgICAgIH1cblxuICAgICAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG4gICAgICAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuICAgICAgICBpZiAoLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcbiAgICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgICAgIH1cbiAgICAgICAgdXJsID0gcHJvdG9jYWwgKyB1cmw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7IFxuICAgICAgICAgIG1zZzogJ+S4iuaKpeWfn+WQjeaXoOaViDogJyArIHVybCBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAnZG9uZSc7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLnVybCA9IHVybDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX21pbmlfdW0uanNcbi8vIG1vZHVsZSBpZCA9IDY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hhdF90b19zZW5kLmpzXG4gKlxuICog5L2c55So77ya5pel5b+X5Y+R6YCB5Z+656GA5Y+C5pWw5pS26ZuG77yaXG4gKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuICogZGVwczog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTsgIFxudmFyIGxvZ0lkID0gcmVxdWlyZSgnQHV0aWxzL2xvZ0lkJyk7XG52YXIgdXRpbFBhcmFtcyA9IHJlcXVpcmUoJy4vdXRpbFBhcmFtcycpO1xuXG52YXIgQ05UID0gYXBsdXNTdGF0aWMuU1BNX0NOVDtcbnZhciBVUkwgPSBhcGx1c1N0YXRpYy5TUE1fVVJMO1xudmFyIFBSRSA9IGFwbHVzU3RhdGljLlNQTV9QUkU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIGdldENvbW1vblBhcmFtczogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICB2YXIgc3BtID0gXyQuc3BtIHx8IHt9O1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgcGxhdGZvcm1UeXBlID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BsYXRmb3JtVHlwZScpIHx8IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCk7XG5cbiAgICAgIHZhciB1c2VySW5mbyA9IHtcbiAgICAgICAgX2Rldl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSxcbiAgICAgICAgX2Fub255X2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpLFxuICAgICAgICBfdXNlcl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpLFxuICAgICAgICBfdXNlcl9uaWNrOiBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpLFxuICAgICAgICBfc2Vzc2lvbl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19zZXNzaW9uX2lkJyksXG4gICAgICAgIHVhaWQ6IChhcGx1cy5nZXRNZXRhSW5mbygndWFpZCcpICsgJycpID09PSAnMScgPyAxIDogMCxcbiAgICAgIH07XG5cbiAgICAgIHZhciBjbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcblxuICAgICAgdmFyIHVybCA9ICctJztcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwYWdlSW5zdGFuY2UgPSBnZXRDdXJyZW50UGFnZXMoKVswXTtcbiAgICAgICAgdXJsID0gcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICBcbiAgICAgIHZhciBsb2dJZEtleSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgdXJsO1xuICAgICAgdmFyIGxvZ0lkS2V5MiA9IGNsaWVudC5tb2RlbCArIGNsaWVudC5uZXR3b3JrVHlwZSArIGNvbmZpZy50aXRsZSArIGV0YWcuY25hO1xuICAgICAgdmFyIGNhY2hlID0gKGdsb2JhbENvbmZpZy5pc0RlY29kZVVybCA/ICdEQ18nIDogJycpICsgbG9nSWQuZ2V0TG9nSWQobG9nSWRLZXksIGxvZ0lkS2V5Mik7XG5cbiAgICAgIHZhciBhcHBJZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBLZXknKSB8fCBhcGx1cy5nZXRNZXRhSW5mbygnYXBwSWQnKTtcbiAgICAgIGlmICghYXBwSWQpIHtcbiAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgIG1zZzogJ3BsZWFzZSBzZXQgYXBwSWQgaW4gYXBsdXMgbWV0YUluZm8gYmVmb3JlIHNlbmRQViEnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdmFyIGNvbW1vblBhcmFtcyA9ICBPYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAgIGFwcEtleTogYXBwSWQsXG4gICAgICAgIGNhY2hlOiBjYWNoZSxcbiAgICAgICAgY25hOiBldGFnLmNuYSxcbiAgICAgICAgZXRhZzogZXRhZyxcbiAgICAgICAgcHJlOiBfJC5wYWdlX3JlZmVycmVyIHx8ICctJywgLy8gVE9ET1xuICAgICAgICBzZGtfaW5mbzoge1xuICAgICAgICAgIGpzdmVyOiBnbG9iYWxDb25maWcuc2NyaXB0X25hbWUsXG4gICAgICAgICAgbHZlcjogZ2xvYmFsQ29uZmlnLmx2ZXIsXG4gICAgICAgICAgY3VzdG9tU2RrSWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdjdXN0b21TZGtJZCcpIHx8ICcnLFxuICAgICAgICAgIHBsYXRmb3JtVHlwZTogcGxhdGZvcm1UeXBlLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIH0sXG4gICAgICAgIHRpdGxlOiBjb25maWcudGl0bGUgfHwgJycsXG4gICAgICAgIHVybDogdXJsIHx8ICctJyxcbiAgICAgICAgY2xpZW50OiBjbGllbnQsXG4gICAgICAgIHRpbWVab25lOiB1dGlsUGFyYW1zLmdldFRpbWVab25lKCksXG4gICAgICAgIGdta2V5OiB1c2VyZGF0YS5nbWtleSB8fCAnJyxcbiAgICAgICAgbWV0aG9kOiB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZFxuICAgICAgfSwgdXNlckluZm8pO1xuICAgICAgXG4gICAgICB2YXIgZ29rZXkgPSB1c2VySW5mbztcblxuICAgICAgaWYgKHNwbS5zcG1fdXJsKSB7XG4gICAgICAgIGdva2V5W1VSTF0gPSBzcG0uc3BtX3VybCB8fCAnJzsgIFxuICAgICAgfVxuICAgICAgaWYgKHNwbS5zcG1fcHJlKSB7XG4gICAgICAgIGdva2V5W1BSRV0gPSBzcG0uc3BtX3ByZSB8fCAnJzsgIFxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc3BtLnNwbV9jbnQpIHtcbiAgICAgICAgZ29rZXlbQ05UXSA9IHNwbS5zcG1fY250IHx8ICcnO1xuICAgICAgfVxuICAgICAgZ29rZXlbYXBsdXNTdGF0aWMuUFZJRF0gPSBhcGx1cy5wdmlkIHx8ICcnO1xuICAgICAgY29tbW9uUGFyYW1zLnNlc3Npb25BcmdzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXNlc3Npb24tYXJncycpO1xuICAgICAgY29tbW9uUGFyYW1zLmdsb2JhbEFyZ3MgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnKTsgIC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG4gICAgICAvLyDpnIDopoHliKDpmaTnmoTku6PnoIEtLS0tZW5kXG4gICAgICBjb21tb25QYXJhbXMuZ29rZXkgPSBnb2tleTtcbiAgICAgIHJldHVybiBjb21tb25QYXJhbXM7XG4gICAgfSxcblxuXG4gICAgZ2V0UHZQYXJhbXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICAgIHZhciBjb21tb25QYXJhbXMgPSB0aGlzLmdldENvbW1vblBhcmFtcygpO1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuY29uZmlnLmlzX2F1dG8pIHtcbiAgICAgICAgY29tbW9uUGFyYW1zLnNka19pbmZvLm1hbnNuZGxvZyA9IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uUGFyYW1zLCB7XG4gICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLlBWX0NPREUsXG4gICAgICAgIGxvZ3R5cGU6ICcxJyxcbiAgICAgICAgbG9na2V5OiAnL3Z4LmdpZicsXG4gICAgICAgIGV2ZW50X3RpbWVzdGFtcDogYXBsdXMuXyQuc2VuZF9wdl9jb3VudCA+IDAgPyBuZXcgRGF0ZSgpIDogYXBsdXMubG9nQ29uZmlnLnBhZ2VMb2FkVGltZSxcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRIamxqUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcblxuICAgICAgdmFyIGhqbGpQYXJhbXMgPSB7XG4gICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLkVWRU5UX0lEX01BUFt1c2VyZGF0YS5nbWtleV0gfHwgdXNlcmRhdGEuZ21rZXksIC8vIGFwbHVzU3RhdGljLk9USEVSX0NPREUsXG4gICAgICAgIGxvZ3R5cGU6ICcyJyxcbiAgICAgICAgbG9na2V5OiB1c2VyZGF0YS5sb2drZXksXG4gICAgICAgIGV2ZW50X3RpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgLy8gbWFuc25kbG9nOiAnMScsXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXRDb21tb25QYXJhbXMoKSwgaGpsalBhcmFtcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuICAgICAqIDIuIGJlYWNvbuaJqeWxleWPguaVsDogZXhwYXJhbXNcbiAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG4gICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcbiAgICAgKiA0LiBsb2NhbFN0b3JhZ2XkuK3lrZjlgqjnmoTkuIrkuIDpobVzcG3kv6Hmga86IHNwbWFidGVzdFxuICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge307XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNvbmZpZy5yZWNvcmRUeXBlID09PSBcIlBWXCIpIHtcbiAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRQdlBhcmFtcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRIamxqUGFyYW1zKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IHBhcmFtcztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF9taW5pX2Nsb3VkLmpzXG4vLyBtb2R1bGUgaWQgPSA2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogcHZpZFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsSGFzaCA9IHJlcXVpcmUoJy4vdXRpbEhhc2gnKTtcblxudmFyIGdldFJhbmRvbUlkID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgLyoqXG4gICAqIOeUn+aIkOacrOmhteeahCBwdiBpZFxuICAgKiBwdiBpZCDlj6rpnIDopoHlvZPliY3nlKjmiLfkvJror53llK/kuIDljbPlj6/vvIzov5nlhL/kvb/nlKjkuIDkuKogNiDkvY3nmoQgMTYg6L+b5Yi25pWw5a2XXG4gICAqL1xuICB2YXIgcm5kX3N0cnMgPSAnJztcbiAgdmFyIGNoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcbiAgdmFyIGhhbmRsZWQgPSBmYWxzZTtcbiAgdmFyIGNoYXI7XG5cbiAgLyoqXG4gICAqIOino+WGs+mDqOWIhiBzcG0g6KKrIEdGVyDlopnkuobnmoTmg4XlhrXvvIzlpoIgMjIuZ2xcbiAgICog5o6S6ZmkIHB2aWQg5LulIGdsIOW8gOWktOeahOaDheWGtVxuICAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlUFZJZCAoY2hhclBvcykge1xuICAgIHZhciBjaGFyc1dpdGhvdXRHID0gJzAxMjM0NTY3ODlhYmNkZWZoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGSElKS0xNTk9QUVJTVFVWV1hZWic7XG4gICAgdmFyIGNoYXJzV2l0aG91dEwgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS01OT1BRUlNUVVZXWFlaJztcblxuICAgIGlmIChjaGFyUG9zID09IDEpIHtcbiAgICAgIHJldHVybiBjaGFyc1dpdGhvdXRHLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MCksIDEpO1xuICAgIH0gZWxzZSBpZiAoY2hhclBvcyA9PSAyKSB7XG4gICAgICByZXR1cm4gY2hhcnNXaXRob3V0TC5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuICcwJztcbiAgfTtcblxuICB3aGlsZSAocm5kX3N0cnMubGVuZ3RoIDwgc2l6ZSkge1xuICAgIGNoYXIgPSBjaGFycy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjIpLCAxKTtcbiAgICAvLyDlpITnkIbooqvlopnnmoTmg4XlhrXvvIznm67liY3lj6rpkojlr7lnbOW8gOWktOeahFxuICAgIGlmICghaGFuZGxlZCAmJiBybmRfc3Rycy5sZW5ndGggPD0gMiAmJiAoY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJyB8fCBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2wnKSkge1xuICAgICAgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PT0gMCAmJiBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG4gICAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMSk7XG4gICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocm5kX3N0cnMubGVuZ3RoID09IDEgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJyAmJiBybmRfc3Rycy5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSA9PSAnZycpIHtcbiAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMik7XG4gICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBybmRfc3RycyArPSBjaGFyO1xuICB9XG4gIHJldHVybiBybmRfc3Rycztcbn07XG5cbmZ1bmN0aW9uIGdldENoYXJzIChhcmdzLCBzaXplLCBkZWZhdWx0VmFsKSB7XG4gIGlmIChhcmdzKSB7XG4gICAgcmV0dXJuIHV0aWxIYXNoLmhhc2goZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3MpKS5zdWJzdHIoMCwgc2l6ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWw7XG4gIH1cbn1cblxuZXhwb3J0cy5nZXRMb2dJZCA9IGZ1bmN0aW9uIChwYWdlVXJsLCBsb2dOYW1lKSB7XG4gIHZhciByYW5kb204Q2hhcnMgPSBnZXRSYW5kb21JZCg4KTtcbiAgdmFyIHJhbmRvbTRDaGFycyA9IHJhbmRvbThDaGFycy5zdWJzdHIoMCwgNCk7XG4gIHZhciByYW5kb202Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDYpO1xuICByZXR1cm4gW1xuICAgIGdldENoYXJzKHBhZ2VVcmwsIDQsIHJhbmRvbTRDaGFycyksXG4gICAgZ2V0Q2hhcnMobG9nTmFtZSwgNCwgcmFuZG9tNENoYXJzKSxcbiAgICByYW5kb202Q2hhcnNcbiAgXS5qb2luKCcnKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9sb2dJZC5qc1xuLy8gbW9kdWxlIGlkID0gNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8g5qC55o2u5a+G6ZKlc+WvueWtl+espuS4snN0cui/m+ihjOi9rOS5iVxuZXhwb3J0cy5oYXNoID0gZnVuY3Rpb24oc3RyLCBzKSB7XG4gIHZhciBkZWZfdiA9IDEzMTU0MjM5MTE7XG4gIHZhciBoYXNoID0gcyB8fCBkZWZfdiwgaSwgY2g7XG4gIGZvciAoaSA9IHN0ci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNoID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaGFzaCBePSAoKGhhc2ggPDwgNSkgKyBjaCArIChoYXNoID4+IDIpKTtcbiAgfVxuICB2YXIgcnMgPSAoaGFzaCAmIDB4N0ZGRkZGRkYpLnRvU3RyaW5nKDE2KTtcbiAgcmV0dXJuIHJzO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxIYXNoLmpzXG4vLyBtb2R1bGUgaWQgPSA3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOi/lOWbnkdNVOagvOW8j+eahOaXtuWMuu+8jOWmgu+8mkdNVCswNTo0NSwgR01ULTA3OjAwLCBHTVQrMDg6MDBcbiAqL1xuZXhwb3J0cy5nZXRUaW1lWm9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aW1lWm9uZSA9IC1uZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KCkgLyA2MDtcbiAgdmFyIF9hbmQgPSAnKyc7XG4gIGlmIChfdGltZVpvbmUgPCAwKSB7XG4gICAgX2FuZCA9ICctJztcbiAgfVxuICB2YXIgem9uZSA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkpO1xuICB2YXIgcmVtYWluZGVyID0gTWF0aC5hYnMocGFyc2VJbnQoX3RpbWVab25lKSAtIF90aW1lWm9uZSk7XG4gIHZhciByZW1haW5kZXJab25lID0gJzAwJztcbiAgaWYgKHJlbWFpbmRlciA+IDApIHtcbiAgICByZW1haW5kZXJab25lID0gNjAgKiByZW1haW5kZXI7XG4gIH1cbiAgcmV0dXJuICdHTVQnICsgX2FuZCArICh6b25lID4gOSA/IHpvbmUgOiAoJzAnICsgem9uZSkpICsgJzonICsgcmVtYWluZGVyWm9uZTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vdXRpbFBhcmFtcy5qc1xuLy8gbW9kdWxlIGlkID0gNzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzXG4gKlxuICog5L2c55So77ya5pel5b+X5Y+R6YCB5Z+656GA5Y+C5pWw5pS26ZuG77yaXG4gKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuICogZGVwczog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiAxLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWPguaVsDogYmFzaWNMaXN0XG4gICAgICogMi4gYmVhY29u5omp5bGV5Y+C5pWwOiBleHBhcmFtc1xuICAgICAqIDMuIGFwbHVz6buY6K6k6ZyA6KaB6YeH6ZuG55qE5a6i5oi356uv5Y+C5pWwOiBleHRyYUxpc3RcbiAgICAgKiDkuK3pgJTlpITnkIZfJOWFqOWxgOWPmOmHjzogcHJvY2Vzc0xvZGFzaERvbGxhclxuICAgICAqIDQuIGxvY2FsU3RvcmFnZeS4reWtmOWCqOeahOS4iuS4gOmhtXNwbeS/oeaBrzogc3BtYWJ0ZXN0XG4gICAgICog5Lul5LiKNOmDqOWIhuaLvOijheaIkHB2ZGF0YVxuICAgICAqXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8fCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpc1RCRW52ID0gbWluaS5pc1RCKCk7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgbG9nZGF0YSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuICAgICAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG4gICAgICB2YXIgY3VycmVudFBhZ2UgID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0gfHwge307XG4gICAgICBpZiAoY3VycmVudFBhZ2UgJiYgIWxvZ2RhdGEudGl0bGUpIHtcbiAgICAgICAgbG9nZGF0YS50aXRsZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8ICcnOyAgXG4gICAgICB9XG4gICAgICBsb2dkYXRhLnVybCA9ICghaXNUQkVudiAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgPyAnaHR0cHM6Ly8nIDogJycpICsgKGN1cnJlbnRQYWdlLnJvdXRlICB8fCBjdXJyZW50UGFnZS5pcyB8fCAnLScpO1xuXG4gICAgICB2YXIgcHJlID0gJy0nO1xuICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdmFyIHByZVBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAyXSB8fCB7fTtcbiAgICAgICAgcHJlID0gKCFpc1RCRW52ICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA/ICdodHRwczovLycgOiAnJykgKyAocHJlUGFnZS5yb3V0ZSB8fCBwcmVQYWdlLmlzIHx8ICctJyk7XG4gICAgICB9XG4gICAgICBsb2dkYXRhLnByZSA9IHByZTtcbiAgICAgIGlmIChsb2dkYXRhLnNka19pbmZvKSB7XG4gICAgICAgIGxvZ2RhdGEuc2RrX2luZm8ud2luZG1pbGwgPSAnMSc7XG4gICAgICB9XG5cbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gbG9nZGF0YTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL21pbmlhcHBfZGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L3doYXRfdG9fc2VuZHB2X3VzZXJkYXRhLmpzXG4gKlxuICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG4gKiAgICAgICAgICAg5bm25bCG5pS26ZuG5Yiw55qE6Ieq5a6a5LmJ5Y+C5pWw5Lul5pWw57uE5qC85byP6L+95Yqg5YiwcHZkYXRh5ZCO6Z2i77yacHZkYXRhLmNvbmNhdCh1c2VyZGF0YSlcbiAqICBkZXBzOiB3aGF0X3RvX3NlbmRwdlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy9pc0FycmF5Jyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDph4fpm4bkuKrmgKfljJblj4LmlbBcbiAgICAgKlxuICAgICAqIGdva2V5OlxuICAgICAqICAg6L+Z5Z2X5Li65a+55Y6G5Y+ydXNlcmRhdGHkvKDpgJLnmoTlhbzlrrnlgZrms5XvvIxUT0RP77ya5o6o5Yqo5bqU55So5pa55Y+Y5pu0XG4gICAgICogICDlupTnlKjmlrnkvKDpgJLnmoRnb2tleeagvOW8j+W6lOeUqOaWueiHquihjOWGs+Wumu+8jFxuICAgICAqICAgICDlpoIgZ29rZXk9XCJhPTEmYj0yXCIg5oiWIHtcImFcIjpbe1wia2V5XCI6MjAxNjEyMjYxNTUwLFwidmFsdWVcIjowLjF9LHtcImtleVwiOjIwMTYxMjI2MTYwMCxcInZhbHVlXCI6MC41fSx7XCJrZXlcIjoyMDE2MTIyNjE2MTAsXCJ2YWx1ZVwiOjF9XX1cbiAgICAgKiAgIOi/meWdl+mAu+i+keaYr+mAoOaIkGV4dGVuZGFyZ3PlhoXpg6jlh7rnjrDlpJrkuKrmlpzmnaDnmoTlhYPlh7bvvIHvvIHvvIFcbiAgICAgKiBwYWdlX2lkOlxuICAgICAqICAg5pyJcGFnZV9pZOWwseWcqHNwbWLkuK3mt7vliqDlrZDlj4LmlbBcbiAgICAgKiAgIOaXoHBhZ2VfaWTlsLHmuIXpmaRzcG1i5Lit55qE5a2Q5Y+C5pWwXG4gICAgICogc3BtX2NudFxuICAgICAqICAg5pu05pS55a6Mc3BtYuS9jei/mOmcgOimgeabtOaWsHNwbV9jbnQgQOiwi+WjqyBpbiAyMDE4LTAzLTIwICDku6XlhY10b1VU55qEc3BtLWNudOS4ouWkseWIhuahtuWPt1xuICAgICAqIOS4quaAp+WMluWPguaVsO+8mlxuICAgICAqICAgMS4gKGFwbHVz5qSN5YWlKTogPG1ldGEgbmFtZT1cImFwbHVzLWNwdmRhdGFcIiBjb250ZW50PVwiSlNPTnN0cmluZ1wiPlxuICAgICAqICAgMi4g5pa55rOV5Lyg5YWlOiBhcGx1cy5zZW5kUFYoe0NPTkZJR30sIHtVU0VSREFURX0pO1xuICAgICAqIOWPjeS9nOW8iueahOaWh+aho+WuvemrmDogX3B3LF9waFxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fSB7Li4ufVxuICAgICAqL1xuICAgIGdldFVzZXJkYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgZCA9IHt9O1xuXG4gICAgICBpZiAoY29uZmlnICYmICFjb25maWcuaXNfYXV0bykge1xuICAgICAgICBpZiAoY29uZmlnLmdva2V5KSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcuZ29rZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBkID0gZm9ybWF0LnBhcmFtMm9iaihjb25maWcuZ29rZXkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGQgPSBjb25maWcuZ29rZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBjb21ib1VzZXJkYXRhID0gZnVuY3Rpb24oX2RhdGEpIHtcbiAgICAgICAgaWYoaXNBcnJheShfZGF0YSkpe1xuICAgICAgICAgIF9kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICBkID0gT2JqZWN0LmFzc2lnbih7fSwgZCwgaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oe30sIGQsIF9kYXRhKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnKSk7XG5cbiAgICAgIHZhciBjdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgIHZhciBwYWdlTmFtZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICdwYWdlJztcbiAgICAgIHZhciBwYWdlUHJvcGVydGllcyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1wYWdlLXByb3BlcnRpZXMnKSB8fCB7fTtcbiAgICAgIHZhciBwYWdlUHJvcGVydHkgPSBwYWdlUHJvcGVydGllc1twYWdlTmFtZV07XG4gICAgICBpZiAodHlwZW9mIHBhZ2VQcm9wZXJ0eSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY29tYm9Vc2VyZGF0YShwYWdlUHJvcGVydHkpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIGNvbWJvVXNlcmRhdGEodXNlcmRhdGEpO1xuXG4gICAgICByZXR1cm4gZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5pu05pawcHJl77yI5Zyo6L+Z6YeM5YGa55qE5Y6f5Zug5piv77yMcHJl5Y+C5pWw5bGe5LqOYmFzaWPlj4LmlbDvvIzkvYbmmK91c2VyZGF0YeS4reWmguS8oOmAkuS6hnJlZmVycmVy77yM5Y+v5Lul6KaG55uWcHJl77yJXG4gICAgICovXG4gICAgdXBkYXRlUHJlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcucmVmZXJyZXIpIHtcbiAgICAgICAgXyQucGFnZV9yZWZlcnJlciA9IGNvbmZpZy5yZWZlcnJlcjtcbiAgICAgICAgZGF0YS5wcmUgPSBjb25maWcucmVmZXJyZXI7XG4gICAgICB9XG4gICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog5pu05paw6aG16Z2i55qEVXJsXG4gICAgICovXG4gICAgdXBkYXRlVXJsOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICBpZihjb25maWcmJmNvbmZpZy5wYWdlVXJsKXtcbiAgICAgICAgZGF0YS51cmwgPSBjb25maWcucGFnZVVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog5pu05paw5p2l5rqQc3BtXG4gICAgICovXG4gICAgdXBkYXRlU3BtVXJsOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgc3BtVXJsID0gY29uZmlnW2FwbHVzU3RhdGljLlNQTV9VUkxdfHxjb25maWcuc3BtVXJsO1xuICAgICAgaWYoc3BtVXJsKXtcbiAgICAgICAgZGF0YS5nb2tleVthcGx1c1N0YXRpYy5TUE1fVVJMXSA9IHNwbVVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGQgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YTtcbiAgICAgIHZhciB1c2VyZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZ2V0VXNlcmRhdGEoKSwgZC51c2VyZGF0YSB8fCB7fSk7XG4gICAgICBkLmdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZC5nb2tleSwgdXNlcmRhdGEpO1xuICAgICAgZCA9IHRoaXMudXBkYXRlUHJlKGQpO1xuICAgICAgZCA9IHRoaXMudXBkYXRlVXJsKGQpO1xuICAgICAgZCA9IHRoaXMudXBkYXRlU3BtVXJsKGQpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBkO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQudXNlcmRhdGEgPSBkLmdva2V5O1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YV9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL2Nhbl90b19zZW5kcHYuanNcbiAqXG4gKiDkvZznlKjvvJrliKTmlq1wduiDveWQpuWPkemAge+8jOS4jeWPr+S7peWPkemAgeWImeS8muS4reaWreWQjue7reaJgOacieS4remXtOS7tuaJp+ihjFxuICogZGVwczog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICog5piv5ZCm6KaB5omn6KGMc2VuZHB255qE5YWl5Y+jXG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIHZhciBjb3VudCA9IF8kLnNlbmRfcHZfY291bnQgfHwgMDtcbiAgICAgIF8kLnNlbmRfcHZfY291bnQgPSArK2NvdW50O1xuICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9jYW5fdG9fc2VuZHB2X21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX2hqbGpfdXNlcmRhdGEuanNcbiAqXG4gKiAg5o+S5Lu25L2c55So77ya5pS26ZuG5bqU55So5pa56Ieq5a6a5LmJcHblj4LmlbBcbiAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBsb2dkYXRh5ZCO6Z2i77yabG9nZGF0YS5jb25jYXQodXNlcmRhdGEpXG4gKiAgZGVwczogd2hhdF90b19oamxqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGZvcm1hdCA9IHJlcXVpcmUoJ0B1dGlscy9mb3JtYXQnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcbi8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuXG4gICAgLyoqXG4gICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG4gICAgICpcbiAgICAgKiByZWNvcmQobG9na2V5LCBnbWtleSwgZ29rZXkpIEFQSeS4reeahGdva2V5XG4gICAgICogbWV0YTphcGx1cy1leGluZm/kv6Hmga8sIG1ldGE6YXBsdXMtZXhkYXRh5L+h5oGvXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG4gICAgICovXG4gICAgZ2V0VXNlckRhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB1c2VyZGF0YSA9IGMudXNlcmRhdGEgfHwge307XG4gICAgICB2YXIgZ29rZXkgPSBjLndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5O1xuICAgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBnb2tleSwgZm9ybWF0LnBhcmFtMm9iaih1c2VyZGF0YS5nb2tleSkpO1xuICAgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBnb2tleSwgZm9ybWF0LnBhcmFtMm9iaihhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhpbmZvJyl8fHt9KSk7XG4gICAgICB2YXIgZXhkYXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScpO1xuICAgICAgaWYgKGlzQXJyYXkoZXhkYXRhKSkge1xuICAgICAgICBleGRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBleGRhdGEgfHwge30pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGdva2V5O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6NcbiAgICAgKiDov5Tlm54nZG9uZSfnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gJ2RvbmUnIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsb2dkYXRhID0gdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGE7XG4gICAgICB2YXIgZ29rZXkgPSB0aGlzLmdldFVzZXJEYXRhKCk7XG4gICAgICAvLyDlupTnlKjpgIDlh7rkuovku7bmr5TovoPnibnmrorvvIxkdXJhdGlvbuWNs2FyZzEgQOaWh+mdklxuICAgICAgaWYgKGxvZ2RhdGEuZ21rZXkgPT09ICcxMDEwJykge1xuICAgICAgICBsb2dkYXRhLmFyZzEgPSBnb2tleS5kdXJhdGlvbiB8fCBsb2dkYXRhLmxvZ2tleTtcbiAgICAgIH1cbiAgICAgIGxvZ2RhdGEuZ29rZXkgPSBnb2tleTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gbG9nZGF0YTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvaGpsai93aGF0X3RvX2hqbGpfdXNlcmRhdGFfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuICogQVBJ5o+S5Lu2XG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9hcGkvbWFpbl9taW5pJykodGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9hcGx1c19hcGlfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuICogQVBJ5o+S5Lu2XG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxuLyoqXG4gKiBAcGFyYW1zIHtPYmplY3R9IGxvZ0NvbmZpZyB7XG4gKiAgICBwdjoge1xuICogICAgICBwbHVnaW5zOiByZXF1aXJlKCcuL2xpYl9sb2cvcGx1Z2luc19wdicpLFxuICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ191JylcbiAqICAgIH0sXG4gKiAgICBoamxqOiB7XG4gKiAgICAgIHBsdWdpbnM6IHJlcXVpcmUoJy4vbGliX2xvZy9wbHVnaW5zX2hqbGonKSxcbiAqICAgICAgY29udGV4dDogcmVxdWlyZSgnLi9saWJfbG9nL2NvbmZpZy9jb25maWdfaGpsal91JylcbiAqICAgIH1cbiAqICB9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxvZ0NvbmZpZykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIGlmIChhcGx1cy5fYXBsdXNfYXBpKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIGFwbHVzLl9hcGx1c19hcGkgPSB7XG4gICAgICBzdGF0dXM6IGFwbHVzU3RhdGljLkNPTVBMRVRFXG4gICAgfTtcbiAgfVxuXG4gIHZhciBhcGx1c09iaiA9IHJlcXVpcmUoJy4vYXBsdXNfbWluaScpLnJ1bi5jcmVhdGUoe1xuICAgIGxvZ0NvbmZpZzogbG9nQ29uZmlnXG4gIH0pO1xuICBmb3IgKHZhciBrIGluIGFwbHVzT2JqKSB7XG4gICAgYXBsdXNba10gPSBhcGx1c09ialtrXTtcbiAgfVxuICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUywgYXBsdXMpO1xuICB2YXIgbXNnQXJyID0gW2FwbHVzU3RhdGljLkFQTFVTICsgJ1JlYWR5JywgYXBsdXNTdGF0aWMuQ09NUExFVEVdO1xuICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ0Fycik7XG4gIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNnQXJyKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbl9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA3N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIFJlZHVjZXIgPSByZXF1aXJlKCdAY29yZS9SZWR1Y2VyJyk7XG52YXIgbWV0YUluZm8gPSByZXF1aXJlKCcuLi9saWJfbWV0YS9tZXRhSW5mb01pbmknKTtcbnZhciBpc1RyaXZlciA9IHJlcXVpcmUoJ0B1dGlscy9pc1RyaXZlcicpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xuXG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG52YXIgX2dldFBhZ2VTcG0gPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAob3B0cywgY2FsbGJhY2spIHtcbiAgaWYgKG15ICYmIG15LmNhbGwgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgbXkuY2FsbCgnaGFuZGxlTG9nZ2luZ0FjdGlvbicsIHtcbiAgICAgICd0eXBlJzogJ2JlaGF2aW9yJyxcbiAgICAgICdzdWJUeXBlJzogb3B0cy5zdWJUeXBlXG4gICAgfSwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgdmFyIHJzID0ge307XG4gICAgICByc1tvcHRzLnNwbVR5cGVdID0gcmVzW29wdHMuc3BtVHlwZV07XG4gICAgICBjYWxsYmFjayhycyk7XG4gICAgfSk7XG4gIH1cbn07XG5cbnZhciBydW4gPSBCYXNlLmV4dGVuZCh7XG5cbiAgLyoqXG4gICAqIEdFVCDor7fmsYLkuIDkuKrlm77niYflnLDlnYDvvIzlkJHmnI3liqHlmajlj5HpgIHmiZPngrlcbiAgICpcbiAgICogQHBhcmFtIHVybCB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW2RhdGFTdHJdIHtTdHJpbmcgfHwgT2JqZWN0fVxuICAgKiBAcGFyYW0gW21ldGhvZF0ge1N0cmluZ30gIC8vIFBPU1QgT1IgR0VUXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIF9zZW5kOiBmdW5jdGlvbiAodXJsLCBkYXRhLCBtZXRob2QsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgdXJsID0gdXRpbC5jYW4yaHR0cHModXJsKTtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICBtaW5pLnJlcXVlc3QodXJsLCB7XG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBkYXRhVHlwZTogJ2Jhc2U2NCdcbiAgICAgIH0sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWluaS5yZXF1ZXN0KHVybCArICc/JyArIGRhdGEsIHtcbiAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgIGRhdGFUeXBlOiAnYmFzZTY0J1xuICAgICAgfSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdXJsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHRVQg6K+35rGC5LiA5Liq5Y+v6KeG5YyW6YWN572u5L+h5oGv77yM5ZCR5pyN5Yqh5Zmo5Y+RXG4gICAqXG4gICAqIEBwYXJhbSB1cmwge1N0cmluZ31cbiAgICovXG4gIF9yZXF1ZXN0VlRDb25maWc6IGZ1bmN0aW9uKHVybCwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBpZiAodXJsLmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICAgIC8vIHVybCA9IGFwbHVzU3RhdGljLkhUVFBTICsgdXJsO1xuICAgICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG4gICAgICBpZiAoLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcbiAgICAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuICAgICAgfVxuICAgICAgdXJsID0gcHJvdG9jYWwgKyB1cmw7XG4gICAgfVxuICAgIG1pbmkucmVxdWVzdCh1cmwsIHsgbWV0aG9kOiAnR0VUJyB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBbT2JqZWN0XSBjb25maWc6IHtcbiAgICogICBjaGVja3N1bTogMTExMTExMTEsICAgLy8g5qC55o2uc3BtYSxzcG1i6Ieq5Yqo55Sf5oiQ55qE5LiA5Liq5a2X56ym5LiyXG4gICAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2VcbiAgICogICBwYWdlX2lkOiAxMjMsICAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuICAgKiAgIGdva2V5OiAnJywgICAgICAgICAgICAvLyDnlKjmiLfoh6rlrprkuYnlj4LmlbDvvIjlkJHkuIvlhbzlrrnvvIxUT0RP5ZCO57ut5LiL5o6J77yJXG4gICAqIH1cbiAgICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhOiB7XG4gICAqICAgcmVmZXJyZXI6ICdodHRwOi8vd3d3LnRhb2Jhby5jb20nICAgLy8g5bCG5Lya5pu/5o2icHbor7fmsYLnmoRwcmXlj4LmlbBcbiAgICogICB4eHgxOiAndnZ2MScsXG4gICAqICAgeHh4MjogJ3Z2djInLFxuICAgKiAgIHh4eE46ICd2dnZOJyxcbiAgICogfSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG4gICAqL1xuICBfc2VuZFBWOiBmdW5jdGlvbiAoY29uZmlnLCB1c2VyZGF0YSkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG5cbiAgICBpZiAoY29uZmlnLnBhZ2VOYW1lKSB7XG4gICAgICBhcGx1cy5fc2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVMgKyAnLXBhZ2VuYW1lJywgY29uZmlnLnBhZ2VOYW1lKTtcbiAgICB9XG5cbiAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG4gICAgY29uZmlnLnJlY29yZFR5cGUgPSAnUFYnOyAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcbiAgICBpZiAoIWNvbmZpZy5tZXRob2QpIHtcbiAgICAgIGNvbmZpZy5tZXRob2QgPSAnR0VUJztcbiAgICB9XG5cbiAgICB2YXIgcHYgPSBhcGx1cy5sb2dDb25maWcucHY7XG4gICAgcmVkdWNlci5ydW4oe1xuICAgICAgcGx1Z2luczogcHYucGx1Z2lucyxcbiAgICAgIGNvbnRleHQ6IGNsb25lRGVlcChwdi5jb250ZXh0KSAvLyDpmLLmraLmupDphY3nva7ooqvmsaHmn5NcbiAgICB9LCB7XG4gICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgIHVzZXJkYXRhOiB1c2VyZGF0YSB8fCB7fSxcbiAgICAgIHB1YnN1YlR5cGU6ICdwdicsXG4gICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcHYsXG4gICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9wdidcbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICog6IGa5ZCI5LiK5oql5Luk566t5pel5b+XXG4gICAqXG4gICAqIEBwYXJhbXMge1N0cmluZ30gbG9na2V577yI5b+F5aGr77yJXG4gICAqIEBwYXJhbXMge1N0cmluZ30gZ21rZXnvvIjlv4XloavvvIkg5p6a5Li+5YC877yaIENMSyDlkowgRVhQXG4gICAqIEBwYXJhbXMge0FycmF5T2JqZWN0fSBnb2tleXPvvIjlv4XloavvvInlhoXnva7nmoTlr7nosaHlj4LmlbDmoLzlvI/lpoLvvJpcbiAgICogIFt7XG4gICAqICAgIFwiZXhhcmdzXCI6IHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS4iuaKpeeahOiHquWumuS5ieWPguaVsO+8jOWGheWuueWdh+S4uuWPr+mAie+8jOWmguaXoOiHquWumuS5ieWPguaVsOWImeS8oOepuuWvueixoVxuICAgKiAgICAgIFwiX3dcIjogMzc1LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnmqKHlnZflrr3luqZcbiAgICogICAgICBcIl9oXCI6IDE4OCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X6auY5bqmXG4gICAqICAgICAgXCJfeFwiOiAwLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOabneWFieaooeWdl+aoquWdkOagh1xuICAgKiAgICAgIFwiX3lcIjogODcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnmqKHlnZfnurXlnZDmoIdcbiAgICogICAgICBcIl9yYXRlXCI6IFwiMS4wMFwiLCAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnpnaLnp6/mr5TkvotcbiAgICogICAgICBcIl92aWV3YWJpbGl0eVwiOiBcImludGVyc2VjdGlvblwiLCAgICAgICAvLyDmm53lhYnmlrnlvI8gaW50ZXJzZWN0aW9uIOaIliBmaWxsd2luZG93XG4gICAqICAgICAgLy8g6Zmk5LqG5LiK6L+w5L+d55WZ5Y+C5pWw5aSW55qE5YW25LuW5Y+C5pWwa2V5LXZhbHVl6Ieq6KGM5a6a5LmJ77yaXG4gICAqICAgICAgXCJ5b3VyS2V5MVwiOiBcInlvdXJWYWx1ZTFcIiwgICAgICAgIFxuICAgKiAgICAgIFwieW91cktleTJcIjogXCIlRTQlQjglQUQlRTUlOUIlQkRcIiAgICAgIC8vIOWmguS4uuS4reaWh++8jOWImemcgOiHquihjOe8lueggVxuICAgKiAgICAgIC4uLi4uLlxuICAgKiAgICB9LFxuICAgKiAgICBcInNjbVwiOiBcImEuYi5jLmRcIiwgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjbeS4uuWPr+mAieWPguaVsO+8jOWmguaXoOWImeS8oOepuuWAvFxuICAgKiAgICBcInNwbVwiOiBcInNwbWEuc3BtYi5zcG1jLnNwbWRcIiwgICAgICAgICAgIC8vIHNwbeS4uuW/hemAieWPguaVsO+8jOS9v+eUqOagh+WHhueahOWbm+auteW8j1xuICAgKiAgICBcImFwbHVzQ29udGVudElkXCI6IFwiXCIgICAgICAgICAgICAgICAgICAgIC8vIOS/neeVmeWtl+aute+8jOaaguaXtuS4jemcgOimgeS8oFxuICAgKiAgfV1cbiAgICogQHBhcmFtcyB7U3RyaW5nfSBtZXRob2TvvIjlj6/pgInvvIkgICAgICAgICAgICAgIC8vIOaemuS4vuWAvO+8miBHRVTlkoxQT1NU77yM6buY6K6k5L2/55SoUE9TVOaWueW8j+S4iuaKpVxuICAgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2IgICAgICAgICAgICAgICAgICAgICAgLy8g5L+d55WZ5bGe5oCn77yM5pqC5pe25LiN6ZyA6KaB5LygXG4gICAqL1xuICBfY29tYmluZVJlY29yZDogZnVuY3Rpb24obG9na2V5LCBnbWtleSwgZ29rZXlzLCBtZXRob2QpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgdmFyIEVYUCA9ICdFWFAnO1xuICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgKGdta2V5ID09PSBFWFAgfHwgZ21rZXkgPT09ICdDTEsnKSkge1xuICAgICAgaWYgKGlzQXJyYXkoZ29rZXlzKSkge1xuICAgICAgICBpZiAoIW1ldGhvZCkge1xuICAgICAgICAgIG1ldGhvZCA9ICdQT1NUJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXNlcmRhdGEgPSBbXTtcbiAgICAgICAgdmFyIHNlbmR0b215ID0gJ3RydWUnO1xuICAgICAgICBnb2tleXMuZm9yRWFjaChmdW5jdGlvbih2KXtcbiAgICAgICAgICB1c2VyZGF0YS5wdXNoKHtcbiAgICAgICAgICAgIGV4YXJnczogdHlwZW9mIHYuZXhhcmdzID09PSAnb2JqZWN0JyA/IHYuZXhhcmdzIDoge30sXG4gICAgICAgICAgICBzY206IHYuc2NtLFxuICAgICAgICAgICAgc3BtOiB2LnNwbSxcbiAgICAgICAgICAgIGFwbHVzQ29udGVudElkOiB2LmFwbHVzQ29udGVudElkLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmICh2Ll9hcGx1c19zZW5kdG9teSA9PT0gJ2ZhbHNlJyAmJiBzZW5kdG9teSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBzZW5kdG9teSA9ICdmYWxzZSc7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIF9nb2tleXMgPSBbXTtcbiAgICAgICAgX2dva2V5cy5wdXNoKChnbWtleSA9PT0gRVhQID8gJ2V4cGRhdGE9JyA6ICdjbGtkYXRhPScpICsgSlNPTi5zdHJpbmdpZnkodXNlcmRhdGEpKTtcbiAgICAgICAgX2dva2V5cy5wdXNoKGdta2V5ID09PSBFWFAgPyAnX2lzX2F1dG9fZXhwPTEnIDogJ19pc19hdXRvX2Nsaz0xJyk7XG4gICAgICAgIF9nb2tleXMucHVzaCgnX2V2ZW50VHlwZT1jdXN0b20nKTtcbiAgICAgICAgX2dva2V5cy5wdXNoKCdfbWV0aG9kPScgKyBtZXRob2QpO1xuICAgICAgICBfZ29rZXlzLnB1c2goJ19wa2dTaXplPScgKyBnb2tleXMubGVuZ3RoKTtcbiAgICAgICAgaWYgKHNlbmR0b215ID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgX2dva2V5cy5wdXNoKCdfYXBsdXNfc2VuZHRvbXk9ZmFsc2UnKTtcbiAgICAgICAgfVxuICAgICAgICBhcGx1cy5yZWNvcmQobG9na2V5LCBnbWtleSwgX2dva2V5cy5qb2luKCcmJyksIG1ldGhvZCk7ICBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2FybigndHlwZSBvZiBnb2tleXMgbXVzdCBiZSBBcnJheU9iamVjdCEnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdvbmx5IHN1cHBvcnQgRVhQIG9yIENMSyBsb2cgdG8gY29tYmlsZSByZWNvcmQhJyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiDlj5HpgIHpu4Tph5Hku6Tnrq3miZPngrlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGxvZ2tleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZ21rZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGdva2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2Qg6K+35rGC5pa55rOV5Li6IFBPU1Qgb3IgR0VUXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYlxuICAgKi9cbiAgX3JlY29yZDogZnVuY3Rpb24gKGxvZ2tleSwgZ21rZXksIGdva2V5LCBtZXRob2QsIGNiKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgIGxvZ2tleSA9IGxvZ2tleSArICcnO1xuICAgIGlmIChsb2drZXkgJiYgbG9na2V5LmluZGV4T2YoJy8nKSAhPT0gMCAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgIGxvZ2tleSA9ICcvJyArIGxvZ2tleTtcbiAgICB9XG4gICAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICAgIHZhciBoamxqID0gYXBsdXMubG9nQ29uZmlnLmhqbGo7XG4gICAgcmVkdWNlci5ydW4oe1xuICAgICAgcGx1Z2luczogaGpsai5wbHVnaW5zLFxuICAgICAgY29udGV4dDogY2xvbmVEZWVwKGhqbGouY29udGV4dCkgLy8g6Ziy5q2i5rqQ6YWN572u6KKr5rGh5p+TXG4gICAgfSwge1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIHJlY29yZFR5cGU6ICdDT01NT05fSEpMSicsIC8vIOWIpOaWreWNleWPjOWPkeeUqOeahO+8jOiAg+iZkeenu+mZpFxuICAgICAgICBtZXRob2Q6IG1ldGhvZCB8fCAnR0VUJ1xuICAgICAgfSxcbiAgICAgIHVzZXJkYXRhOiB7XG4gICAgICAgIGxvZ2tleTogbG9na2V5LFxuICAgICAgICBnbWtleTogZ21rZXksXG4gICAgICAgIGdva2V5OiBnb2tleVxuICAgICAgfSxcbiAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcbiAgICAgIC8vIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9yZWNvcmQsXG4gICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICBpZiAoaXNGdW5jdGlvbihjYikpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgXG4gIGdldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgdmFyIF8kID0gYXBsdXMuXyQgfHwge307XG4gICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcbiAgICB2YXIgZGF0YSA9IHNwbS5kYXRhIHx8IHt9O1xuICAgIHJldHVybiBbZGF0YS5hLCBkYXRhLmJdO1xuICB9LFxuXG4gIC8qKlxuICAgKiDmm7TmlrDpobXpnaLnmoQgYeOAgWIg5L2NXG4gICAqIOmcgOaxguWPguinge+8mmh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL2FsaWxvZy9rYi9pc3N1ZXMvMTM3XG4gICAqIEBwYXJhbSBhIHtTdHJpbmd9XG4gICAqIEBwYXJhbSBbYl0ge1N0cmluZ31cbiAgICogQHBhcmFtIFtjYl0ge0Z1bmN0aW9ufVxuICAgKi9cbiAgX3NldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JqID0ge307XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIGNiO1xuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG9iaiA9IGFyZ3NbMF07XG4gICAgICBjYiA9IGFyZ3NbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iai5zcG1DbnQgPSBbYXJnc1swXSwgYXJnc1sxXSwgJzAnLCAnMCddLmpvaW4oJy4nKTtcbiAgICAgIGNiID0gYXJnc1syXTtcbiAgICB9XG4gICAgdmFyIG1zZ3M7XG4gICAgaWYgKCFvYmouc3BtQ250ICYmICFvYmouc3BtVXJsICYmIG1ldGFJbmZvLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykpIHtcbiAgICAgIG1zZ3MgPSBbJ2NsZWFyUGFnZVNQTSddO1xuICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcbiAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtcyBvYmoge09iamVjdH0ge1xuICAgICAgICogICBzcG1DbnQ6ICdhLmIuMC4wJ1xuICAgICAgICogICBzcG1Vcmw6ICdhLmIuMC4wJ1xuICAgICAgICogICBzcG1QcmU6ICdhLmIuMC4wJ1xuICAgICAgICogfVxuICAgICAgICovXG4gICAgICBtc2dzID0gWydzZXRQYWdlU1BNJywgb2JqXTtcbiAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgIH1cbiAgICB2YXIgY2FsbGJhY2sgPSB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgPyBjYiA6IGZ1bmN0aW9uICgpIHt9O1xuICAgIGNhbGxiYWNrKG1zZ3MpO1xuICB9LFxuXG4gIC8qKlxuICAgKiDliqjmgIHphY3nva5tZXRhXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIHtcbiAgICogICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG4gICAqIH1cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIF9zZXRNZXRhSW5mbzogZnVuY3Rpb24oYXJnMSwgdmFsdWUpIHtcbiAgICByZXR1cm4gbWV0YUluZm8uX3NldE1ldGFJbmZvKGFyZzEsIHZhbHVlKTtcbiAgfSxcblxuICAvKipcbiAgICogaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9hcGx1c2pzL3Byb2plY3QvYXBsdXNfY2xvdWQjMzMyZGU2MmNcbiAgICog5LiN5pSv5oyBdXBkYXRlUGFnZVByb3BlcnRpZXPvvIzmlLnnlKjmm7/ku6PmlrnmoYhzZXRNZXRhSW5mb1xuICAgKiBAcGFyYW1zIHtTdHJpbmd9IOmAj+S8oGpzb27lrZfnrKbkuLLvvIzlv4XpobvmmK/lrZfnrKbkuLJcbiAgICovXG4gIF91cGRhdGVQYWdlUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFyYW1zKXtcbiAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8vIOaWsOWuueWZqFRyaXZlcumHh+eUqHVwZGF0ZVBhZ2VQcm9wZXJ0aWVzXG4gICAgICBpZiAoaXNUcml2ZXIoKSkge1xuICAgICAgICBteS5yZXBvcnRBbmFseXRpY3MoJ3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzJywgcGFyYW1zKTtcbiAgICAgIH0gZWxzZSBpZihtaW5pLmdldFBsYXRmb3JtVHlwZSgpPT09J215Jyl7XG4gICAgICAgIG15LmNhbGwoJ3JlcG9ydERhdGEnLHtcbiAgICAgICAgICBzcG1EZXRhaWw6cGFyYW1zLFxuICAgICAgICAgIGlnbm9yZURlZmF1bHRQYWdlTW9uaXRvcjp0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8g5ZCR5LiL5YW85a6577yM5LiN566h5oCO5LmI5qC36YO95b6AbWV0YUluZm/orr7nva7kuIDku71cbiAgICAgIHZhciBjdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgIHZhciBwYWdlTmFtZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICdwYWdlJztcbiAgICAgIHZhciBkYXRhID0ge307XG4gICAgICBkYXRhW3BhZ2VOYW1lXSA9IHBhcmFtcztcbiAgICAgIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1wYWdlLXByb3BlcnRpZXMnLCBkYXRhKTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCM2MDM0YzFkYVxuICAgKi9cbiAgX3VwZGF0ZU5leHRQYWdlUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICBwYXJhbXMgPSB7fTtcbiAgICB9XG4gICAgaWYgKG15KSB7XG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgdHlwZTogJ3VwZGF0ZU5leHRQcm9wJyxcbiAgICAgICAgZXZlbnRJZDogLTEsXG4gICAgICAgIGV2ZW50aWQ6IC0xLFxuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgcGFnZU5hbWU6ICcnLFxuICAgICAgICBjb21OYW1lOiAnJyxcbiAgICAgICAgYXJnMTogJycsXG4gICAgICAgIGFyZzI6ICcnLFxuICAgICAgICBhcmczOiAnJyxcbiAgICAgICAgcGFyYW06IHBhcmFtcyxcbiAgICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICAgIH07XG4gICAgICBpZiAobXkuY2FsbFVzZXJUcmFjaykge1xuICAgICAgICBteS5jYWxsVXNlclRyYWNrKCdjb21taXR1dCcsIGRhdGEpO1xuICAgICAgfSBlbHNlIGlmIChteS5yZXBvcnRBbmFseXRpY3MpIHtcbiAgICAgICAgbXkucmVwb3J0QW5hbHl0aWNzKCdlbnRlcicsIGRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG4gICAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuICAgKiAgLSBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgY2FsbGVkIG9uIEFycmF5IHZhbHVlcy5cbiAgICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuICAgKiAgQHBhcmFtIGtcbiAgICogIEBwYXJhbSB2XG4gICAqL1xuICBfYXBwZW5kTWV0YUluZm86IG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvLFxuXG4gIC8qKlxuICAgKiBnZXQgbWV0YUluZm8gYnkga2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXRNZXRhSW5mbzogZnVuY3Rpb24gKGspIHtcbiAgICByZXR1cm4gbWV0YUluZm8uZ2V0TWV0YUluZm8oayk7XG4gIH0sXG5cbiAgLy8g5rex5bqm5YWL6ZqG77yM5LuO5qC45b+D5bqT5pq06Zyy5Ye65Y675L6bYXBsdXNKU+aPkuS7tuS9v+eUqFxuICBjbG9uZURlZXA6IGNsb25lRGVlcCxcbiAgLyoqXG4gICAqIOWmguaenOWuueWZqOWunueOsOS6hmFwcGVhcuOAgWRpc2FwcGVhcu+8jOS9huS4muWKoeWPiOaDs+aJi+WKqOaOp+WItuaJk+eCueeUn+WRveWRqOacn+aXtuS9v+eUqFxuICAgKlxuICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG4gICAqL1xuICBfc2tpcFBhZ2U6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBVc2VyVHJhY2suc2tpcFBhZ2UoKTtcbiAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuICAgICAgbXkuY2FsbFVzZXJUcmFjaygnc2tpcFBhZ2UnKTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiDlpoLmnpzlrrnlmajmnKrmj5DkvpthcHBlYXLjgIFkaXNhcHBlYXLml7bpnIDopoHkuJrliqHmiYvliqjosIPnlKhcbiAgICpcbiAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuICAgKi9cbiAgX3BhZ2VBcHBlYXI6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCl7XG4gICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2sgJiYgdGhpcy5pc1BhZ2VEaXNBcHBlYXIpIHtcbiAgICAgIHRoaXMuaXNQYWdlRGlzQXBwZWFyID0gZmFsc2U7XG4gICAgICB0aGlzLmlzUGFnZUFwcGVhciA9IHRydWU7XG4gICAgICBteS5jYWxsVXNlclRyYWNrKCdwYWdlQXBwZWFyJyk7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICog5aaC5p6c5a655Zmo5pyq5o+Q5L6bYXBwZWFy44CBZGlzYXBwZWFy5pe26ZyA6KaB5Lia5Yqh5omL5Yqo6LCD55SoXG4gICAqXG4gICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cbiAgICovXG4gIF9wYWdlRGlzYXBwZWFyOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbigpe1xuICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrICYmIHRoaXMuaXNQYWdlQXBwZWFyKSB7XG4gICAgICB0aGlzLmlzUGFnZURpc0FwcGVhciA9IHRydWU7XG4gICAgICB0aGlzLmlzUGFnZUFwcGVhciA9IGZhbHNlO1xuICAgICAgbXkuY2FsbFVzZXJUcmFjaygncGFnZURpc2FwcGVhcicpO1xuICAgIH1cbiAgfSxcbiAgX3VwZGF0ZVBhZ2VVdHBhcmFtOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IHt9O1xuICAgIH1cbiAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuICAgICAgbXkuY2FsbFVzZXJUcmFjaygndXBkYXRlUGFnZVV0cGFyYW0nLCB7XG4gICAgICAgICd1dFBhcmFtSnNvbic6IEpTT04uc3RyaW5naWZ5KHBhcmFtcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBfdXBkYXRlTmV4dFBhZ2VVdHBhcmFtOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYXJhbXMpe1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICBwYXJhbXMgPSB7fTtcbiAgICB9XG4gICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2spIHtcbiAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3VwZGF0ZU5leHRQYWdlVXRwYXJhbScsIHtcbiAgICAgICAgJ3V0UGFyYW1Kc29uJzogSlNPTi5zdHJpbmdpZnkocGFyYW1zKVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiDku4XmiYvmt5jvvIhWOS4xMC4w77yJ5bCP56iL5bqP5pSv5oyBXG4gICAqIEBwYXJhbXMge09iamVjdH0gcHJvcGVydGllc1xuICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG4gICAqL1xuICBfdXBkYXRlU2Vzc2lvblByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG4gICAgLy8gaWYgKG15ICYmIG15LnJlcG9ydEFuYWx5dGljcyAmJiB0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICAvLyAgIG15LnJlcG9ydEFuYWx5dGljcygndXBkYXRlU2Vzc2lvblByb3BlcnRpZXMnLCBwcm9wZXJ0aWVzKTtcbiAgICAvLyB9XG4gICAgaWYgKG15ICYmIG15LmNhbGwgJiYgdHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICBteS5jYWxsKCdoYW5kbGVMb2dnaW5nQWN0aW9uJywge1xuICAgICAgICB0eXBlOiAnYmVoYXZpb3InLFxuICAgICAgICBzdWJUeXBlOiAndXBkYXRlU2Vzc2lvblByb3BlcnRpZXMnLFxuICAgICAgICBleHREYXRhOiBwcm9wZXJ0aWVzLFxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICog5LuF5omL5reY77yIVjkuOS4w77yJ5bCP56iL5bqP5pSv5oyBXG4gICAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjazoge3NwbVVybDogJyd9XG4gICAqL1xuICBfZ2V0UGFnZVNwbVVybDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgX2dldFBhZ2VTcG0oe1xuICAgICAgc3ViVHlwZTogJ2dldFBhZ2VTcG1VcmwnLFxuICAgICAgc3BtVHlwZTogJ3NwbVVybCdcbiAgICB9LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOS7heaJi+a3mO+8iFY5LjkuMO+8ieWwj+eoi+W6j+aUr+aMgVxuICAgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2sgOiB7c3BtUHJlOiAnJ31cbiAgICovXG4gIF9nZXRQYWdlU3BtUHJlOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBfZ2V0UGFnZVNwbSh7XG4gICAgICBzdWJUeXBlOiAnZ2V0UGFnZVNwbVByZScsXG4gICAgICBzcG1UeXBlOiAnc3BtUHJlJ1xuICAgIH0sIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICog6K6+572uUGFnZU5hbWUgXG4gICovXG4gIF9zZXRQYWdlTmFtZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFnZU5hbWUsIHBhdGgpIHtcbiAgICBpZiAoIXBhZ2VOYW1lKSB7XG4gICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgIG1zZzogJ3NldFBhZ2VOYW1lIGZhaWxlZDogJyArICcgcGFnZU5hbWU9JyArIHBhZ2VOYW1lIFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBjdXJQYXRoID0gcGF0aCB8fCBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcbiAgICBcbiAgICB2YXIgcGFnZU1ldGEgPSBjbG9uZURlZXAobWV0YUluZm8uZ2V0TWV0YUluZm8oJ3BhZ2VDb25maWcnKSB8fCB7fSk7XG4gICAgcGFnZU1ldGFbY3VyUGF0aF0gPSBwYWdlTmFtZTtcbiAgICBtZXRhSW5mby5hcHBlbmRNZXRhSW5mbygncGFnZUNvbmZpZycsIHBhZ2VNZXRhKTtcbiAgfSxcblxuICAvKipcbiAgICog6I635Y+WUGFnZU5hbWVcbiAgKi9cbiAgZ2V0UGFnZU5hbWU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhdGgpIHtcbiAgICByZXR1cm4gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUocGF0aCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiOt+WPluWFg+e0oOeahHNwbVxuICAgKiAqLyBcbiAgX2dldEVsZW1lbnRTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB2YXIgc3BtQiA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgJyc7IFxuXG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICB2YXIgdHJhY2tlclBhcmFtcyA9IHRhcmdldC5kYXRhc2V0ICYmIHRhcmdldC5kYXRhc2V0LnRyYWNrZXJQYXJhbXMgfHwgJyc7XG4gICAgICB2YXIgc3BtQ0QgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04odHJhY2tlclBhcmFtcyk7XG4gICAgICByZXR1cm4gW3NwbUIsIHNwbUNELnNwbUMsIHNwbUNELnNwbURdLmpvaW4oJy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgICAgdmFyIGF1dG9fY2xrX21ldGFpbmZvID0gbWV0YUluZm8uZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJykgfHwgW107XG4gICAgICB2YXIgYXV0b19leHBfbWV0YWluZm8gPSBtZXRhSW5mby5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnKSB8fCBbXTtcbiAgICAgIHZhciB0YXJnZXRTcG07XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgLy/oh6rliqjngrnlh7vkvJjlhYjnuqfmm7Tpq5hcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXV0b19jbGtfbWV0YWluZm8ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgIHZhciBjbGtfaW5mbyA9IGF1dG9fY2xrX21ldGFpbmZvW2ldO1xuICAgICAgICAgIGlmIChjbGtfaW5mby5jc3NTZWxlY3RvciA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICB0YXJnZXRTcG0gPSBbc3BtQiwgY2xrX2luZm8uc3BtQywgY2xrX2luZm8uc3BtRF0uam9pbignLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXV0b19leHBfbWV0YWluZm8ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgIHZhciBleHBfaW5mbyA9IGF1dG9fZXhwX21ldGFpbmZvW2ldO1xuICAgICAgICAgIGlmIChleHBfaW5mby5jc3NTZWxlY3RvciA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICB0YXJnZXRTcG0gPSBbc3BtQiwgZXhwX2luZm8uc3BtQywgZXhwX2luZm8uc3BtRF0uam9pbignLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9OyBcblxuICAgICAgICB2YXIgZWxlbWVudHMgPSBjdHguY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbCh0YXJnZXQpO1xuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRzLmZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG4gICAgICAgICAgICBkYXRhc2V0OiB0cnVlLFxuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgfSwgZnVuY3Rpb24ocmV0KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBpZiAocmV0ICYmIHJldC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHJldC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRhcmdldFNwbSArICdfJyArIGkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXN1bHQpOyAgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5leGVjKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybign6K+l5bmz5Y+w5LiN5pSv5oyBZG9t5YWD57Sg5p+l6K+iLCBlcnIgPSAnLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuZXhwb3J0cy5ydW4gPSBydW47XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9hcGkvYXBsdXNfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG52YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBDb21wb3NlID0gcmVxdWlyZSgnQGNvcmUvY29tcG9zZScpO1xudmFyIHBsdWdpbnNMb2FkZXIgPSByZXF1aXJlKCdAY29yZS9wbHVnaW5zTG9hZGVyJyk7XG5cbi8qKlxuICogc2VucHZcbiAqIEBwYXJhbSBbT2JqZWN0XSBjb25maWc6IHtcbiAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuICogICBpc19hdXRvOiB0cnVlL2ZhbHNl77yMIC8vIOagh+ivhuaYr+WQpuiHquWKqOaJk+eCue+8jOm7mOiupOS4unRydWXvvIzljZXpobXlupTnlKjpnIDopoHkvKBmYWxzZVxuICogICBwYWdlX2lkOiAxMjMsICAgICAgICAvLyDlsIbkvJrkvZPnjrDlnKhzcG1i5L2N5LiKXG4gKiAgIGdva2V5OiAnJywgICAgICAgICAgIC8vIOebruWJjeW3sue7j+WkseaViFxuICogICByZWZlcnJlcjogJ2h0dHA6Ly93d3cudGFvYmFvLmNvbScgICAvLyDlsIbkvJrmm7/mjaJwduivt+axgueahHByZeWPguaVsFxuICogfSAvLyDlkIwgYXBsdXMubGF1bmNo56ys5LqM5Liq5YWl5Y+C4oCcbWFudWFs4oCdXG4gKlxuICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhICAgLy8g5ZCE56eN6Ieq5a6a5LmJcHblj4LmlbBcbiAqXG4gKiBAcGFyYW0gW09iamVjdF0gb2JqIC0ge2ZuX2FmdGVyX3B2OiBmbl9hZnRlcl9wdiwgeHh4OiB4eHh9XG4gKlxuICogc3RlcDE6IGxvYWRlciBwbHVnaW5zICBtaWRkbGV3YXJlXG4gKiBzdGVwMjogbG9hZGVyIGRvU2VuZFB2IG1pZGRsZXdhcmVcbiAqIHN0ZXAzOiBydW4gbWlkZGxld2FyZXNcbiAqL1xuXG52YXIgUmVkdWNlciA9IGZ1bmN0aW9uKCkge1xufTtcblxuLyoqXG4gKiBAcGFyYW1zIE9iamVjdCBDT05GSUcge1xuICogICBjb250ZXh0OiB4eHgsXG4gKiAgIHBsdWdpbnM6IHh4eCBcbiAqIH1cbiAqIEBwYXJhbXMgT2JqZWN0IG9wdHMge1xuICogICBjb25maWc6IGNvbmZpZyxcbiAqICAgdXNlcmRhdGE6IHVzZXJkYXRhLFxuICogICBwdWJzdWJUeXBlOiAncHYnIHx8ICdoamxqJyB8fCAncHJlcHYnXG4gKiAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2JyB8fCAnbXdfY2hhbmdlX2hqbGonIHx8ICdtd19jaGFuZ2VfcHJlcHYnXG4gKiAgIG1lc3NhZ2VGblF1ZXVlOiBbZm4xLCBmbjIgLi4uXVxuICogfVxuICovXG5SZWR1Y2VyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoQ09ORklHLCBvcHRzLCBjYWxsYmFjaykge1xuICAvLyAx44CBaW5pdCBwbHVnaW5zXG4gIHZhciBwbCA9IG5ldyBwbHVnaW5zTG9hZGVyKCk7XG4gIHBsLmluaXQoe1xuICAgIG1pZGRsZXdhcmU6IFtdLFxuICAgIGNvbmZpZzogb3B0cy5jb25maWcsXG4gICAgcGx1Z2luczogQ09ORklHLnBsdWdpbnNcbiAgfSk7XG4gIHZhciBtaWRkbGV3YXJlID0gcGwucnVuKCk7XG5cbiAgLy8g5Yid5aeL5YyW5LiK5LiL5paH546v5aKD77yMY29udGV4dOWGheeahGRhdGHlsIbkvJrlnKjlkITkuKrmj5Lku7bkuK3ov5vooYzotYvlgLzmiJbogIXkv67mlLnvvIjph43opoHvvIlcbiAgdmFyIGNvbnRleHQgPSBpc0Z1bmN0aW9uKENPTkZJRy5jb250ZXh0KSA/IG5ldyBDT05GSUcuY29udGV4dCgpIDogQ09ORklHLmNvbnRleHQ7XG4gIGNvbnRleHQudXNlcmRhdGEgPSBvcHRzLnVzZXJkYXRhO1xuICBjb250ZXh0LmxvZ2dlciA9IHV0aWxMb2dnZXIubG9nZ2VyO1xuXG4gIHZhciBhcHAgPSB7XG4gICAgY29udGV4dDogY29udGV4dCxcbiAgICBwdWJzdWI6IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ2FwbHVzX3B1YnN1YicpLFxuICAgIHB1YnN1YlR5cGU6IG9wdHMgJiYgb3B0cy5wdWJzdWJUeXBlXG4gIH07XG5cbiAgdmFyIGNvbXBvc2UgPSBuZXcgQ29tcG9zZSgpO1xuICBjb21wb3NlLmNyZWF0ZShhcHApO1xuICAvLyDmiafooYzkuK3pl7Tku7ZcbiAgY29tcG9zZS53cmFwKG1pZGRsZXdhcmUsIGZ1bmN0aW9uKCkge1xuICAgIGFwcC5jb250ZXh0LnN0YXR1cyA9IGFwbHVzU3RhdGljLkNPTVBMRVRFO1xuICAgIGlmIChvcHRzKSB7XG4gICAgICBpZiAob3B0cy5taWRkbGV3YXJlTWVzc2FnZUtleSkge1xuICAgICAgICB1dGlsUHVic3ViLmRvUHViTXNnKFtvcHRzLm1pZGRsZXdhcmVNZXNzYWdlS2V5LCBhcHAuY29udGV4dF0pOyAgXG4gICAgICB9XG4gICAgICBpZiAob3B0cy5tZXNzYWdlRm5RdWV1ZSkge1xuICAgICAgICBlYWNoKG9wdHMubWVzc2FnZUZuUXVldWUsIGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgIGZuKHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKSwgQ09ORklHKTtcbiAgICAgICAgfSk7ICBcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICBjYWxsYmFjayhhcHAuY29udGV4dCk7XG4gICAgfVxuICB9KSgpO1xuXG59O1xubW9kdWxlLmV4cG9ydHMgPSBSZWR1Y2VyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9SZWR1Y2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9jb21wb3NlLmpzXG4gKiDlh73mlbDpmJ/liJfljIXoo4XlmaggRXhwb3NlIGNvbXBvc2l0b3JcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXG5mdW5jdGlvbiBjb21wb3NlICgpIHt9O1xuXG5jb21wb3NlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihwcm9wcykge1xuICAvKipcbiAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG4gICAqIGNyZWF0Zei/lOWbnueahOWunuS+i+WunumZheS4iuWwseaYr25ld+aehOmAoOWHuueahOWunuS+i++8m1xuICAgKiB0aGlz5Y2z5oyH5ZCR6LCD55So5b2T5YmNY3JlYXRl55qE5p6E6YCg5Ye95pWw77ybXG4gICAqL1xuICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzW25hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpc1tuYW1lXSA9IHByb3BzW25hbWVdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmNvbXBvc2UucHJvdG90eXBlLmNhbGxlZExpc3QgPSBbXTtcblxuY29tcG9zZS5wcm90b3R5cGUuc2V0Q2FsbGVkTGlzdCA9IGZ1bmN0aW9uKGkpIHtcbiAgaWYgKHV0aWxBcnJheS5pbmRleG9mKHRoaXMuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG4gICAgdGhpcy5jYWxsZWRMaXN0LnB1c2goaSk7XG4gIH1cbn07XG5cbmNvbXBvc2UucHJvdG90eXBlLnJlc2V0Q2FsbGVkTGlzdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNhbGxlZExpc3QgPSBbXTtcbn07XG5cbmNvbXBvc2UucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbihtdywgY2FsbGJhY2spIHtcbiAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICB2YXIgY3R4ID0gdGhpcy5jb250ZXh0IHx8IHt9O1xuICB2YXIgY29tcG9zZSA9IGN0eC5jb21wb3NlIHx8IHt9O1xuICB2YXIgbWF4VGltZW91dCA9IGNvbXBvc2UubWF4VGltZW91dCB8fCAxMCAqIDEwMDA7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHZhciBzaXplID0gbXcubGVuZ3RoOyAvLyDkuK3pl7Tku7bpmJ/liJfplb/luqZcbiAgICB2YXIgaSA9IDA7IC8vIOS4remXtOS7tue0ouW8lVxuICAgIHZhciBqID0gMDsgLy8g5LiA5Liq5qCH6K+G77yMMC3liJ3lp4vnirbmgIHvvIwxLeS4remXtOS7tuWbnuiwg+aJp+ihjOS6hlxuICAgIHZhciBzbGVlcEhhbmRlcjE7XG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uKGluZGV4LCBzdGF0dXMpIHtcbiAgICAgIC8vIGNvbnRleHQucHVic3ViSW5mbyhjb250ZXh0LCBtd1tpXSk7XG4gICAgICAvLyDkuK3pl7Tku7bpmJ/liJfmiafooYzlrozmr5XlkI7ov5Tlm55cbiAgICAgIGlmIChpID09PSBzaXplKSB7XG4gICAgICAgIHN0YXRlID0gJ2RvbmUnO1xuICAgICAgICBjb250ZXh0LnJlc2V0Q2FsbGVkTGlzdCgpOyAvLyDph43nva5jYWxsZWRMaXN05Y+Y6YePXG4gICAgICAgIC8vIHN0YXR1c+WmguaenOetieS6jmRvbmXvvIzor7TmmI7mmK/kuK3pgJTpgIDlh7rnmoTkuK3pl7Tku7bvvIzkuI3pnIDopoHmiafooYzlm57osINcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spICYmIHN0YXR1cyAhPT0gc3RhdGUpIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBjbGVhclRpbWVvdXQoc2xlZXBIYW5kZXIxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gdmFyIGNiX3N0YXRlID0gbnVsbDtcbiAgICAgIC8vIOS/neivgeavj+S4quS4remXtOS7tuWPquS8muaJp+ihjOS4gOasoVxuICAgICAgaWYgKHV0aWxBcnJheS5pbmRleG9mKGNvbnRleHQuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG4gICAgICAgIGNvbnRleHQuc2V0Q2FsbGVkTGlzdCAmJiBjb250ZXh0LnNldENhbGxlZExpc3QoaSk7XG4gICAgICAgIGlmIChtdyAmJiBtd1tpXSAmJiBpc0Z1bmN0aW9uKG13W2ldWzBdKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwYXJhbXMge0FycmF5fSBtaWRkbGV3YXJlXG4gICAgICAgICAgICAgKiBAcGFyYW1zIHtBcnJheX0gbXNnXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHN0YXRlID0gbXdbaV1bMF0uY2FsbChjb250ZXh0LCBzdGF0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgIGogPSAxOyAgLy8gMS3kuK3pl7Tku7blm57osIPmiafooYzkuoZcbiAgICAgICAgICAgICAgcnVuKGkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgICAgICBtc2c6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIOeKtuaAgeS4unBhdXNl562J5b6FMjAwbXPova7or6LvvIznirbmgIHkuLpudW1iZXLnsbvlnovnmoTmlbDlgLznrYnlvoVzdGF0ZW1z6L2u6K+iXG4gICAgICB2YXIgaXNOdW1iZXIgPSB0eXBlb2Ygc3RhdGUgPT09ICdudW1iZXInO1xuICAgICAgaWYgKHN0YXRlID09PSAncGF1c2UnIHx8IGlzTnVtYmVyKSB7XG4gICAgICAgIGogPSAwO1xuICAgICAgICAvLyDmnIDlpKfnrYnlvoXml7bplb9cbiAgICAgICAgdmFyIF90aW1lX291dCA9IGlzTnVtYmVyID8gc3RhdGUgOiBtYXhUaW1lb3V0O1xuICAgICAgICB2YXIgX213X25hbWUgPSBtd1tpXSA/IG13W2ldWzFdIDogJyc7XG4gICAgICAgIHNsZWVwSGFuZGVyMSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKGogPT09IDApIHtcbiAgICAgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgICAgICAgICAgbXNnOiAnanVtcCB0aGUgbWlkZGxld2FyZSBhYm91dCAnICsgX213X25hbWUgKyAnLCBiZWNhdXNlIHdhaXRpbmcgdGltZW91dCBtYXhUaW1lb3V0ID0gJyArIF90aW1lX291dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGF0ZSA9IG51bGw7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgICBydW4oaSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBfdGltZV9vdXQpO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ2RvbmUnKSB7XG4gICAgICAgIC8vIOeKtuaAgeS4umRvbmXooajnpLrnu5PmnZ/vvIzkuI3nrqHlkI7pnaLov5jmnInmsqHmnInkuK3pl7Tku7bpg73nu5PmnZ9cbiAgICAgICAgaSA9IHNpemU7XG4gICAgICAgIHJ1bihpLCBzdGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDpu5jorqTnirbmgIHvvIzlj6rnrqHmiafooYzkuK3pl7Tku7bpmJ/liJdcbiAgICAgICAgaSsrO1xuICAgICAgICBydW4oaSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoY29udGV4dC5jYWxsZWRMaXN0ICYmIGNvbnRleHQuY2FsbGVkTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICBjb250ZXh0LnJlc2V0Q2FsbGVkTGlzdCgpO1xuICAgIH1cbiAgICByZXR1cm4gcnVuKGkpO1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb21wb3NlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvY29tcG9zZS5qc1xuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9wbHVnaW5zTG9hZGVyLmpzXG4gKiDmj5Lku7bliqDovb3lmahcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnQHV0aWxzL2Fzc2lnbicpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbXMgb3B0cyB7XG4gICAgICogICBtaWRkbGV3YXJlOiBbXSxcbiAgICAgKiAgIHBsdWdpbnM6IFtdLFxuICAgICAqICAgY29uZmlnOiB7fVxuICAgICAqIH1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgICAgaWYgKG9wdHMgJiYgdHlwZW9mIG9wdHMubWlkZGxld2FyZSA9PT0gJ29iamVjdCcgJiYgb3B0cy5taWRkbGV3YXJlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gb3B0cy5taWRkbGV3YXJlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLnBsdWdpbnNfbmFtZSA9IFtdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDliIblj5HorqLpmIXlj5jljJZcbiAgICAgKiBAcGFyYW0gbyB7XG4gICAgICogICBwdWJzdWI6IHsuLi59LFxuICAgICAqICAgY29udGV4dDogey4uLn1cbiAgICAgKiB9LFxuICAgICAqIEBwYXJhbSBtdyDlvZPliY3miafooYznmoTkuK3pl7Tku7ZcbiAgICAgKi9cbiAgICBwdWJzdWJJbmZvOiBmdW5jdGlvbihjdHgsIG13KSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcHVic3ViID0gY3R4LnB1YnN1YjtcbiAgICAgICAgaWYgKHB1YnN1Yikge1xuICAgICAgICAgIHB1YnN1Yi5wdWJsaXNoKCdwbHVnaW5zX2NoYW5nZV8nICsgY3R4LnB1YnN1YlR5cGUsIG13KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgbXNnOiBlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgaWYoIWluZGV4KSBpbmRleCA9IDA7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIG1pZGRsZXdhcmUgPSB0aGlzLm1pZGRsZXdhcmU7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0cyB8fCB7fTtcbiAgICAgIHZhciBwbHVnaW5zID0gb3B0cy5wbHVnaW5zO1xuICAgICAgaWYgKHBsdWdpbnMgJiYgdHlwZW9mIHBsdWdpbnMgPT09ICdvYmplY3QnICYmIHBsdWdpbnMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgcGx1Z2luID0gcGx1Z2luc1tpbmRleF07XG4gICAgICAgIHRoaXMucGx1Z2luc19uYW1lLnB1c2gocGx1Z2luLm5hbWUpO1xuICAgICAgICBtaWRkbGV3YXJlLnB1c2goW2Z1bmN0aW9uKHN0YXRlLCBjYil7XG4gICAgICAgICAgX3NlbGYucHVic3ViSW5mbyh0aGlzLCBwbHVnaW4pO1xuICAgICAgICAgIC8vIOiOt+WPluaPkuS7tuaooeWdl+i3r+W+hOW5tuWIneWni+WMllxuICAgICAgICAgIHZhciBtID0gbmV3IHBsdWdpbi5wYXRoKCk7XG5cbiAgICAgICAgICAvLyDkuLroioLnnIHku6PnoIHph4/vvIzpu5jorqTnmoTliJ3lp4vljJbmlrnms5XlnKjliqDovb3lmajlhoXlgZrlhZzlupXlpITnkIbvvIzljbPmj5Lku7blhoXml6Dnibnmrormg4XlhrXml6DpnIDlrp7njrBpbml05pa55rOVXG4gICAgICAgICAgaWYgKCFtLmluaXQpIHtcbiAgICAgICAgICAgIG0uaW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDlsIbkuIrkuIvmlofms6jlhaXliLDmj5Lku7blhoVcbiAgICAgICAgICBtLmluaXQoe1xuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgICAgICAgY29uZmlnOiBhc3NpZ24ocGx1Z2luLmNvbmZpZyB8fCB7fSwgb3B0cy5jb25maWcpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIG0ucnVuKHN0YXRlLCBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICAvLyDov5nph4zkvb/nlKgx5q+r56eS5bu26L+f5omn6KGM77yM6Ziy5q2i5Lit6Ze05Lu25Li75L2T5YaF55qEY2FsbGJhY2vlhYjmiafooYzvvIzlr7zoh7TmoYbmnrbmi7/kuI3liLDkuK3pl7Tku7ZyZXR1cm7nmoTnrYnlvoXml7bplb/vvIzku47ogIzlr7zoh7Tnm5HmjqflvILluLhcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjYihwbHVnaW4sIG1zZyk7XG4gICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgcGx1Z2luLm5hbWVdKTtcblxuICAgICAgICBpbmRleCsrO1xuICAgICAgICBpZihwbHVnaW5zW2luZGV4XSl7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucnVuKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1pZGRsZXdhcmU7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL3BsdWdpbnNMb2FkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDgxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImZ1bmN0aW9uIGlzVHJpdmVyKCkge1xuICB0cnkge1xuICAgIHZhciBVQSA9IG5hdmlnYXRvciA/IChuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci5zd3VzZXJBZ2VudCkgOiAnJztcbiAgICByZXR1cm4gL1RyaXZlci9nLnRlc3QoVUEpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVHJpdmVyO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9pc1RyaXZlci5qc1xuLy8gbW9kdWxlIGlkID0gODJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvaW5pdC9pbml0TG9hZF9iYXNlLmpzXG4gKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBAYXV0aG9yIGppemhhLnd5aiBAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWN0aW9uID0gcmVxdWlyZSgnLi9hY3Rpb24nKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46ICBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuICAgICAgdmFyIEFQTFVTX1FVRVVFID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRTtcblxuICAgICAgdmFyIGNvbnRleHQgPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gICAgICB2YXIgcXVlID0gY29udGV4dFtBUExVU19RVUVVRV0gfHwgW107XG4gICAgICB2YXIgcnMgPSBhY3Rpb24uZ2V0Rm9ybWF0UXVldWUocXVlLCAnbWV0YVF1ZXVlJyk7XG4gICAgICBjb250ZXh0W0FQTFVTX1FVRVVFXSA9IHJzLnF1ZXVlO1xuICAgICAgYWN0aW9uLnByb2Nlc3NHb2xkbG9nUXVldWUocnMuZm9ybWF0UXVldWUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9tZXRhX3F1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSA4M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG4vKipcbiAqIEBwYXJhbXMge0FycmF5fSBRVUVVRVxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuICogfVxuICovXG52YXIgcHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IGZ1bmN0aW9uIChRVUVVRSwgb3B0cykge1xuICBmdW5jdGlvbiBmKCkge1xuICAgIGlmICghUVVFVUUgfHwgIXV0aWxBcnJheS5pc0FycmF5KFFVRVVFKSB8fCAhUVVFVUUubGVuZ3RoKSByZXR1cm47XG4gICAgLy8g5o6S5bqPXG4gICAgdmFyIHF1ZSA9IGdldEZvcm1hdFF1ZXVlKFFVRVVFKS5xdWV1ZTtcbiAgICB2YXIgdGFzayA9IHt9O1xuICAgIHZhciBkZWxheVRhc2tzID0gW107XG4gICAgd2hpbGUgKHRhc2sgPSBxdWUuc2hpZnQoKSkgeyAvLyDkvp3mrKHmiafooYwgd2luZG93LmFwbHVzX3F1ZXVlIOS4reeahOS7u+WKoVxuICAgICAgcHJvY2Vzc1Rhc2sodGFzaywgb3B0cywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgZGVsYXlUYXNrcy5wdXNoKHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChkZWxheVRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGFzayA9IGRlbGF5VGFza3Muc2hpZnQoKSkge1xuICAgICAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDApO1xuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICBmKCk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIG1zZzogZVxuICAgIH0pO1xuICB9XG59O1xuZXhwb3J0cy5wcm9jZXNzR29sZGxvZ1F1ZXVlID0gcHJvY2Vzc0dvbGRsb2dRdWV1ZTtcblxuZnVuY3Rpb24gZ2V0TWV0YUluZm8oKSB7XG4gIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcbiAgcmV0dXJuIG1ldGFfaW5mbztcbn1cblxuZnVuY3Rpb24gZ2V0QXBsdXNIb2xkVHlwZSAoKSB7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgdWFpZCA9IG1ldGFfaW5mby51YWlkICsgJyc7XG4gIGlmICh1YWlkID09PSAnMScgJiYgIW1ldGFfaW5mby5fYW5vbnlfaWQpIHtcbiAgICByZXR1cm4gJ0JMT0NLJztcbiAgfVxuICByZXR1cm4gbWV0YV9pbmZvWydfaG9sZCddIHx8IG1ldGFfaW5mb1snYXBsdXMtd2FpdGluZyddO1xufVxuXG52YXIgQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUgPSBbXTtcbnZhciBBUExVU19IT0xEX0FOT05ZX1FVRVVFID0gW107XG52YXIgQVBMVVNfSE9MRF9RVUVVRSA9IFtdO1xuXG5mdW5jdGlvbiBmaWx0ZXJUYXNrICh0YXNrKSB7XG4gIHZhciBob2xkVHlwZSA9IGdldEFwbHVzSG9sZFR5cGUoKTtcbiAgLy8gY29uc29sZS5sb2coJ2hvbGRUeXBlID09PSAnLCBob2xkVHlwZSk7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgZmxhZyA9IHRydWU7XG5cbiAgLy8gMDogXCJfaG9sZFwiXG4gIC8vIDE6IFwiU1RBUlRcIlxuICB2YXIgYXJncyA9IHRhc2suYXJndW1lbnRzIHx8IFtdO1xuICB2YXIgbWV0YUtleSA9IGFyZ3NbMF07XG4gIHZhciBtZXRhVmFsdWUgPSBhcmdzWzFdO1xuICB2YXIgU1RBUlQgPSAnU1RBUlQnO1xuICBpZiAobWV0YUtleSA9PT0gJ19ob2xkJyAmJiBtZXRhVmFsdWUgPT09IFNUQVJUKSB7XG4gICAgcmV0dXJuIFNUQVJUO1xuICB9XG4gIGlmIChtZXRhS2V5ID09PSAnX2Fub255X2lkJyAmJiBtZXRhVmFsdWUpIHtcbiAgICByZXR1cm4gU1RBUlQ7XG4gIH1cbiAgaWYgKHRhc2sgJiYgL3NlbmRQVnxyZWNvcmR8c2V0UGFnZVNQTXxzZXRNZXRhSW5mb3xhcHBlbmRNZXRhSW5mbyQvLnRlc3QodGFzay5hY3Rpb24pKSB7XG4gICAgc3dpdGNoIChob2xkVHlwZSkge1xuICAgIGNhc2UgJ0JMT0NLJzpcbiAgICAgIGlmICghbWV0YV9pbmZvW2hvbGRUeXBlXSkge1xuICAgICAgICBBUExVU19IT0xEX1FVRVVFLnB1c2godGFzayk7XG4gICAgICAgIGZsYWcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZsYWc7XG59XG5cblxuLy8gdmFyIHByb2Nlc3NlZCA9IGZhbHNlO1xuZnVuY3Rpb24gcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUgKG9wdHMpIHtcbiAgLy8gaWYgKCFwcm9jZXNzZWQpIHtcbiAgLy8gICBwcm9jZXNzZWQgPSB0cnVlO1xuICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1FVRVVFLCBvcHRzKTsgIFxuICAvLyB9XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSBxdWV1ZU5hbWU6IGFwbHVzX3F1ZXVlIHx8IGdvbGRsb2dfcXVldWVcbiAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG4gKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcbiAqIH1cbiAqL1xuZXhwb3J0cy5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUgPSBmdW5jdGlvbiAocXVldWVOYW1lLCBvcHRzKSB7XG4gIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuICBxdWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuU0VUX01FVEFfSU5GTywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9VU0VSX0lEICYmIHZhbHVlKSB7XG4gICAgICAgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9BTk9OWV9JRCAmJiB2YWx1ZSkge1xuICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfQU5PTllfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdfaG9sZCcgJiYgdmFsdWUgPT09ICdTVEFSVCcpIHtcbiAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXRNZXRob2ROYW1lIChrZXksIGlzT3BlbkFwaSkge1xuICBpZiAoaXNPcGVuQXBpICYmIGFwbHVzU3RhdGljLm9wZW5BUElzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAga2V5ID0gJ18nICsga2V5O1xuICB9XG4gIHJldHVybiBrZXk7XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSB0YXNrXG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG4gKiB9XG4gKi9cbnZhciBwcm9jZXNzVGFzayA9IGZ1bmN0aW9uKHRhc2ssIG9wdHMsIGNhbGxiYWNrKSB7XG4gIHZhciBpc09wZW5BcGkgPSAhIW9wdHMuaXNPcGVuQXBpO1xuICB2YXIgYWN0aW9uID0gdGFzayA/IHRhc2suYWN0aW9uIDogJyc7XG4gIHZhciBhcmdzID0gdGFzayA/IHRhc2suYXJndW1lbnRzIDogJyc7XG5cbiAgdmFyIHJlc3VsdCA9IGZpbHRlclRhc2sodGFzayk7XG4gIGlmICghcmVzdWx0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZXh0ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB0cnkgeyAvLyDnoa7kv53mn5DkuKrku7vliqHmiafooYzlpLHotKXkuI3kvJrlvbHlk43lhbblroPku7vliqFcbiAgICBpZiAoYWN0aW9uICYmIGFyZ3MgJiYgdXRpbEFycmF5LmlzQXJyYXkoYXJncykpIHtcbiAgICAgIHZhciBhID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gICAgICB2YXIgb2JqID0gY29udGV4dDtcbiAgICAgIHZhciBfZm4gPSBjb250ZXh0O1xuICAgICAgdmFyIG1ldGhvZE5hbWU7XG4gICAgICBpZiAoYS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgb2JqID0gY29udGV4dFthWzBdXVthWzFdXSB8fCB7fTtcbiAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYVsyXSwgaXNPcGVuQXBpKTtcbiAgICAgICAgX2ZuID0gb2JqW21ldGhvZE5hbWVdID8gb2JqW21ldGhvZE5hbWVdIDogJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAoYS5sZW5ndGgpIHtcbiAgICAgICAgICBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShhLnNoaWZ0KCksIGlzT3BlbkFwaSk7XG4gICAgICAgICAgX2ZuID0gb2JqID0gb2JqW21ldGhvZE5hbWVdO1xuICAgICAgICAgIGlmICghb2JqKSB7IC8vIOmdnuazlSBhY3Rpb25cbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc0Z1bmN0aW9uKF9mbikpIHtcbiAgICAgICAgX2ZuLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0ID09PSAnU1RBUlQnKSB7XG4gICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgbXNnOiBlXG4gICAgfSk7XG4gIH1cbn07XG5leHBvcnRzLnByb2Nlc3NUYXNrID0gcHJvY2Vzc1Rhc2s7XG5cbnZhciBnZXRGb3JtYXRRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZSwgdHlwZSkge1xuICB2YXIgcXVldWVNYXAgPSB7XG4gICAgc3Vic2NyaWJlTXdDaGFuZ2VRdWV1ZTogW10sXG4gICAgc3Vic2NyaWJlTWV0YVF1ZXVlOiBbXSxcbiAgICBzdWJzY3JpYmVRdWV1ZTogW10sXG4gICAgbWV0YVF1ZXVlOiBbXSxcbiAgICBvdGhlcnNRdWV1ZTogW11cbiAgfTtcblxuICB2YXIgcSA9IFtdO1xuICB2YXIgdGFzayA9IHt9O1xuICB3aGlsZSAodGFzayA9IHF1ZXVlLnNoaWZ0KCkpIHsgLy8g5L6d5qyh5omn6KGMIHdpbmRvdy5hcGx1c19xdWV1ZSDkuK3nmoTku7vliqFcbiAgICB0cnkge1xuICAgICAgdmFyIGFjID0gdGFzay5hY3Rpb247XG4gICAgICB2YXIga2V5ID0gdGFzay5hcmd1bWVudHNbMF07XG4gICAgICBpZiAoL3N1YnNjcmliZS8udGVzdChhYykpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3NldE1ldGFJbmZvJykge1xuICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWIHx8IGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEopIHtcbiAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgvTWV0YUluZm8vLnRlc3QoYWMpKSB7XG4gICAgICAgIHF1ZXVlTWFwLm1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVNYXAub3RoZXJzUXVldWUucHVzaCh0YXNrKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgIG1zZzogZVxuICAgICAgfSk7XG4gICAgICBxdWV1ZU1hcC5vdGhlcnNRdWV1ZS5wdXNoKHRhc2spO1xuICAgIH1cbiAgfVxuICB2YXIgZm9ybWF0UXVldWU7XG4gIGlmICh0eXBlICYmIHF1ZXVlTWFwW3R5cGVdKSB7XG4gICAgZm9ybWF0UXVldWUgPSBxdWV1ZU1hcFt0eXBlXTtcbiAgICBxdWV1ZU1hcFt0eXBlXSA9IFtdO1xuICB9XG4gIHEgPSBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLmNvbmNhdChxdWV1ZU1hcC5tZXRhUXVldWUpO1xuICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlUXVldWUpO1xuICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlTWV0YVF1ZXVlLCBxdWV1ZU1hcC5vdGhlcnNRdWV1ZSk7XG4gIHJldHVybiB7XG4gICAgcXVldWU6IHEsXG4gICAgZm9ybWF0UXVldWU6IGZvcm1hdFF1ZXVlXG4gIH07XG59O1xuZXhwb3J0cy5nZXRGb3JtYXRRdWV1ZSA9IGdldEZvcm1hdFF1ZXVlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfcXVldWUvYWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9pbml0L2luaXRMb2FkX2Jhc2UuanNcbiAqIOWIneWni+WMluWfuuehgOaooeWdl++8jOS4jeiDveebtOaOpeS9v+eUqO+8jOmcgOimgemAmui/h2luaXRMb2FkX3BjLmpz5oiWaW5pdExvYWRfd2FwLmpz562J5YW35L2T55qE5Zy65pmv5qih5Z2X6LCD55SoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIEBhdXRob3Igaml6aGEud3lqIEBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYWN0aW9uID0gcmVxdWlyZSgnLi9hY3Rpb24nKTtcblxudmFyIFF1ZXVlID0gQmFzZS5leHRlbmQoe1xuICBwdXNoOiBmdW5jdGlvbih0YXNrKSB7XG4gICAgdGhpcy5sZW5ndGgrKztcbiAgICBhY3Rpb24ucHJvY2Vzc1Rhc2sodGFzaywgdGhpcy5vcHRzKTsgIFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHByb2Nlc3NBcGx1c1F1ZXVlOiBmdW5jdGlvbiAocXVldWVOYW1lKSB7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgcXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUocXVldWVOYW1lKTtcbiAgICAgIGFjdGlvbi5wcm9jZXNzR29sZGxvZ1F1ZXVlKHF1ZSwgb3B0cyk7XG4gICAgICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUsIFF1ZXVlLmNyZWF0ZSh7XG4gICAgICAgIG9wdHM6IG9wdHMsIFxuICAgICAgICBzdGFydExlbmd0aDogcXVlLmxlbmd0aCxcbiAgICAgICAgbGVuZ3RoOiAwXG4gICAgICB9KSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbXMge1N0cmluZ30gdHlwZVxuICAgICAqL1xuICAgIHJ1bjogIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1c19jb25maWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWc7XG4gICAgICB2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFO1xuXG4gICAgICB0aGlzLnByb2Nlc3NBcGx1c1F1ZXVlKEFQTFVTX1FVRVVFKTtcblxuICAgICAgaWYgKEFQTFVTX1FVRVVFID09PSAnYXBsdXNfcXVldWUnKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc0FwbHVzUXVldWUoJ2dvbGRsb2dfcXVldWUnKTtcbiAgICAgIH1cbiAgICAgIGFjdGlvbi5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUoQVBMVVNfUVVFVUUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hcGx1c19xdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gODVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDlj4vnm5/kupHmnaHku7bkuIvnmoToh6rliqjkuovku7bmj5Lku7YgICAgIFxuICogXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqIFxuICogQXV0aG9yOiBcbiAqICAgIOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xudmFyIEZldGNoQ29uZmlnID0gcmVxdWlyZSgnLi9saWJfbWluaXZ0L2ZldGNoQ29uZmlnJyk7XG52YXIgdXRpbEdRID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHUScpO1xuLy8gdmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIE1JTklfVlRfQ09ORklHX0ZPUk1BVCA9ICdNaW5pVnRDb25maWdGb3JtYXQnO1xuLy8gdmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIHV0aWxWVCA9IHJlcXVpcmUoJy4vbGliX21pbml2dC91dGlsVlQnKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcblxuZnVuY3Rpb24gYXV0b1RyYWNrZXIgKCkge1xuICB2YXIgcmJfY29uZmlnLCBwZHJfY29uZmlnLCBzaGFyZV9jb25maWc7XG4gIC8vIHZhciBwcmVmaXggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVU19RVUVVRSk7XG4gIHZhciBfaGFzVHJhY2tlZCA9IGZhbHNlO1xuICB2YXIgX2N1cnJlbnRQYWdlID0gbnVsbDtcbiAgdmFyIGNvdW50ID0ge1xuICAgICdvblB1bGxEb3duUmVmcmVzaCc6IDAsXG4gICAgJ29uU2hhcmVUaW1lbGluZSc6IDAsXG4gICAgJ29uUmVhY2hCb3R0b20nOiAwLFxuICAgICdvblNoYXJlQXBwTWVzc2FnZSc6IDAsXG4gICAgJ29uQ2xpY2snOiAwXG4gIH07XG5cbiAgZnVuY3Rpb24gZXZlbnRIYW5kbGUgKCkge1xuICAgIHZhciBldmVudE5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6ICcnO1xuICAgIHZhciBwYWdlSW5zdGFuY2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgdmFyIGN1cnJlbnRQYWdlID0gcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcbiAgICAvLyB2YXIgcDtcbiAgICBcbiAgICBzd2l0Y2ggKGV2ZW50TmFtZSkge1xuICAgIGNhc2UgJ29uUHVsbERvd25SZWZyZXNoJzpcbiAgICAgIGNvdW50Lm9uUHVsbERvd25SZWZyZXNoICs9IDE7XG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgYXJndW1lbnRzOiBbcGRyX2NvbmZpZy5sb2drZXkgfHwgJyQkX3B1bGxfZG93bl9yZWZyZXNoJywgJ0NMSycsIHtcbiAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuICAgICAgICAgIGNvdW50OiBjb3VudC5vblB1bGxEb3duUmVmcmVzaFxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvblJlYWNoQm90dG9tJzpcbiAgICAgIGNvdW50Lm9uUmVhY2hCb3R0b20gKz0gMTtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuICAgICAgICBhcmd1bWVudHM6IFtyYl9jb25maWcubG9na2V5IHx8ICckJF9yZWFjaF9ib3R0b20nLCAnQ0xLJywge1xuICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG4gICAgICAgICAgcGFnZW5hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgY3VycmVudFBhZ2UsXG4gICAgICAgICAgY291bnQ6IGNvdW50Lm9uUmVhY2hCb3R0b21cbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnb25TaGFyZUFwcE1lc3NhZ2UnOlxuICAgICAgY291bnQub25TaGFyZUFwcE1lc3NhZ2UgKz0gMTtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuICAgICAgICBhcmd1bWVudHM6IFtzaGFyZV9jb25maWcubG9na2V5IHx8ICckJF9zaGFyZScsICdDTEsnLCB7XG4gICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcbiAgICAgICAgICBjb3VudDogY291bnQub25TaGFyZUFwcE1lc3NhZ2UsXG4gICAgICAgICAgc2hhcmVfdHlwZTogMVxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvblNoYXJlVGltZWxpbmUnOiBcbiAgICAgIGNvdW50Lm9uU2hhcmVUaW1lbGluZSArPSAxO1xuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG4gICAgICAgIGFyZ3VtZW50czogW3NoYXJlX2NvbmZpZy5sb2drZXkgfHwgJyQkX3NoYXJlJywgJ0NMSycsIHtcbiAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuICAgICAgICAgIGNvdW50OiBjb3VudC5vblNoYXJlVGltZWxpbmUsXG4gICAgICAgICAgc2hhcmVfdHlwZTogMFxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvblBhZ2VTaG93JzpcbiAgICAgIGlmKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSl7XG4gICAgICAgIHZhciBwYWdlQ29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BhZ2VDb25maWcnKTtcbiAgICAgICAgdmFyIGN1cnJlbnRQYWdlUGF0aCA9IHBhZ2VJbnN0YW5jZS5yb3V0ZSB8fCBwYWdlSW5zdGFuY2UuaXM7XG4gICAgICAgIGlmKHBhZ2VDb25maWcmJnBhZ2VDb25maWdbY3VycmVudFBhZ2VQYXRoXSl7XG4gICAgICAgICAgaWYoaXNBcnJheShwYWdlQ29uZmlnW2N1cnJlbnRQYWdlUGF0aF0uc3BtKSl7XG4gICAgICAgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgYWN0aW9uOidhcGx1cy5zZXRQYWdlU1BNJyxcbiAgICAgICAgICAgICAgYXJndW1lbnRzOnBhZ2VDb25maWdbY3VycmVudFBhZ2VQYXRoXS5zcG0gLy/orr7nva7pobXpnaJzcG3nmoRh44CBYuS9jVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgICAgIGxldmVsOidlcnJvcicsXG4gICAgICAgICAgICAgIG1zZzpjdXJyZW50UGFnZVBhdGgrJ+WcqG1ldGFJbmZvLnBhZ2VDb25maWfkuK3phY3nva7nmoRzcG3moLzlvI/kuI3lr7nvvIzmraPnoa7moLzlvI/kuLrvvJpbXCJzcG1hXCIsXCJzcG1iXCJdJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgICBsZXZlbDonZXJyb3InLFxuICAgICAgICAgICAgbXNnOifmnKrljLnphY3or6XpobXpnaIoJytjdXJyZW50UGFnZVBhdGgrJynnmoRzcG3vvIzor7fmo4Dmn6VtZXRhSW5mby5wYWdlQ29uZmlnJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYWdlSW5zdGFuY2Uucm91dGUgJiYgIV9oYXNUcmFja2VkKSB7XG4gICAgICAgIF9jdXJyZW50UGFnZSA9IHtcbiAgICAgICAgICB0czogRGF0ZS5ub3coKSxcbiAgICAgICAgICBwYXRoOiBwYWdlSW5zdGFuY2Uucm91dGUsXG4gICAgICAgICAgcGFnZV9uYW1lOiBwYWdlSW5zdGFuY2Uucm91dGUsXG4gICAgICAgIH07XG4gICAgICAgIF9oYXNUcmFja2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ29uUGFnZUhpZGUnOiAgXG4gICAgICBpZiAoX2hhc1RyYWNrZWQpIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIF9jdXJyZW50UGFnZS50cztcbiAgICAgICAgXG4gICAgICAgIGlmIChhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpIHx8IFBhZ2VNYW5hZ2VyLmdldFZUUmVhbHRpbWVDb2RlKCkpIHtcbiAgICAgICAgICB2YXIgZXh0cmFQYXJhbXMgPSAoUGFnZU1hbmFnZXIuZ2V0UGFnZU5hbWUoKSB8fCB7fSkuZXh0cmFQYXJhbXM7ICAgICAgICAgIFxuICAgICAgICAgIHZhciBwdmFyZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBleHRyYVBhcmFtcywge1xuICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgcGF0aDogX2N1cnJlbnRQYWdlLnBhdGgsXG4gICAgICAgICAgICBwYWdlX25hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCksXG4gICAgICAgICAgICBwYWdlX3N0YXJ0OiBfY3VycmVudFBhZ2UudHMsXG4gICAgICAgICAgICBpc01pbmk6IHRydWUsXG4gICAgICAgICAgICBfcGFnZV9hdXRvX2lkOiBhcGx1c1N0YXRpYy5QQUdFX0VORCxcbiAgICAgICAgICAgIF9wYWdlX2F1dG9fcHY6IHRydWVcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFwbHVzLnNlbmRQVih7IGlzX2F1dG86IHRydWUgfSwgcHZhcmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcGx1cy5zZW5kUFYoe1xuICAgICAgICAgICAgaXNfYXV0bzogdHJ1ZSxcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICBwYXRoOiBfY3VycmVudFBhZ2UucGF0aCxcbiAgICAgICAgICAgIHBhZ2VfbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBfY3VycmVudFBhZ2UucGFnZV9uYW1lLFxuICAgICAgICAgICAgcGFnZV9zdGFydDogX2N1cnJlbnRQYWdlLnRzLFxuICAgICAgICAgICAgaXNNaW5pOiB0cnVlLFxuICAgICAgICAgICAgX3BhZ2VfYXV0b19pZDogYXBsdXNTdGF0aWMuUEFHRV9FTkQsXG4gICAgICAgICAgICBfcGFnZV9hdXRvX3B2OiB0cnVlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBfY3VycmVudFBhZ2UgPSBudWxsO1xuICAgICAgICBfaGFzVHJhY2tlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBnZXRDb25maWcgKCkge1xuICAgIHJiX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdyYl9jb25maWcnKTtcbiAgICBwZHJfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3Bkcl9jb25maWcnKTtcbiAgICBzaGFyZV9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnc2hhcmVfY29uZmlnJyk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaFZlcmlmeUNvbmZpZyhjb2RlLCBhcHBJbmZvSWQpIHtcbiAgICBpZiAoIWNvZGUgfHwgIWFwcEluZm9JZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7IFxuICAgICAgdmFyIGFwaV9ob3N0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWFwaS1ob3N0Jyk7XG4gICAgICB2YXIgcmVnID0gL1tbYS16fFxcLXxcXF98MC05XFwuXStbYS16fFxcLXxcXF98MC05XSg6XFxkKik/LztcbiAgICAgIHZhciB2ZXJpZnlfaG9zdCA9IGFwaV9ob3N0Lm1hdGNoKHJlZyk7XG4gICAgICBcbiAgICAgIGlmICh2ZXJpZnlfaG9zdCAmJiB2ZXJpZnlfaG9zdFswXSkge1xuICAgICAgICB2YXIgcHJvdG9jYWwgPSBhcGx1c1N0YXRpYy5IVFRQUztcbiAgICAgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh2ZXJpZnlfaG9zdFswXSkpIHtcbiAgICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZlcmlmeVVybCA9IHByb3RvY2FsICsgJy8vJyArIGFwaV9ob3N0KyAnL3Z0L2xvYWRUcmFuc2ZlckNvbmZpZz9jb2RlPScgKyBjb2RlICsgJyZhcHBJbmZvSWQ9JyArIGFwcEluZm9JZDtcbiAgICAgICAgbWluaS5yZXF1ZXN0KHZlcmlmeVVybCwge30sIGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgY2ZnRGF0YSA9IChyZXNwLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEuY29uZmlnKSB8fCAnJztcbiAgICAgICAgICAgIHZhciBkZWJ1Z0lkID0gKHJlc3AuZGF0YSAmJiByZXNwLmRhdGEuZGF0YSAmJiByZXNwLmRhdGEuZGF0YS5kZWJ1Z0lkKSB8fCAnJztcbiAgICAgICAgICAgIGlmKGRlYnVnSWQpe1xuICAgICAgICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnLHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0lkOmRlYnVnSWRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2JlZ2luTG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gX2JlZ2luTG9hZDtcbiAgICAgICAgICAgIGlmIChjZmdEYXRhKSB7XG4gICAgICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSBKU09OLnBhcnNlKGNmZ0RhdGEpIHx8IHt9O1xuICAgICAgICAgICAgICB1dGlsVlQudnQyYXV0b0V2ZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgICAgICBsZXZlbDonZXJyb3InLFxuICAgICAgICAgICAgICBtc2c6J+aLieWPluWunuaXtuWPr+inhuWMluWfi+eCuemqjOivgeWksei0pSwg6ZSZ6K+v5L+h5oGv77yaJyArIGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIFxuICAgIH1cbiAgfVxuXG4gIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICBnZXRDb25maWcoKTtcbiAgICAgIH1cbiAgICB9XVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvbkxvYWQnLCBmdW5jdGlvbihvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGNvZGUgPSBQYWdlTWFuYWdlci5nZXRWVFJlYWx0aW1lQ29kZSgpO1xuICAgICAgICBpZiAoY29kZSkge1xuICAgICAgICAgIHZhciBhcHBJbmZvSWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwSW5mb0lkJyk7XG4gICAgICAgICAgZmV0Y2hWZXJpZnlDb25maWcoY29kZSwgYXBwSW5mb0lkKTtcbiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgXG4gICAgICAgICAgISFhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpICYmIHV0aWxWVC52dDJhdXRvRXZlbnQoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgICAgICBsZXZlbDogJ2Vycm9yJyxcbiAgICAgICAgICBtc2c6ICfmi4nlj5blrp7ml7blj6/op4bljJbln4vngrnpqozor4Hkv6Hmga/lpLHotKXvvIwg6ZSZ6K+v5Y6f5Zug77yaJyArIGVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblNob3cnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIHZhciBpc0F1dG8gPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSAhPT0gJ01BTic7XG4gICAgICBpc0F1dG8gJiYgZXZlbnRIYW5kbGUoJ29uUGFnZVNob3cnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uSGlkZScsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgdmFyIGlzQXV0byA9IGN0eC5hcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtd2FpdGluZycpICE9PSAnTUFOJztcbiAgICAgIGlzQXV0byAmJiBldmVudEhhbmRsZSgnb25QYWdlSGlkZScpO1xuICAgIH1cbiAgfSk7XG5cbiAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25QdWxsRG93blJlZnJlc2gnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIGV2ZW50SGFuZGxlKCdvblB1bGxEb3duUmVmcmVzaCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25SZWFjaEJvdHRvbScsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgZXZlbnRIYW5kbGUoJ29uUmVhY2hCb3R0b20nKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hhcmVBcHBNZXNzYWdlJywgZnVuY3Rpb24gKG9wdCkge1xuICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICBldmVudEhhbmRsZSgnb25TaGFyZUFwcE1lc3NhZ2UnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hhcmVUaW1lbGluZScsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgZXZlbnRIYW5kbGUoJ29uU2hhcmVUaW1lbGluZScpO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKCEhYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIFtNSU5JX1ZUX0NPTkZJR19GT1JNQVQsIGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgICAgdmFyIHBhZ2VDb25maWcgPSBvcHRpb25zLnBhZ2VDb25maWc7XG4gICAgICBpZiAocGFnZUNvbmZpZyAmJiBwYWdlQ29uZmlnLmVuYWJsZWQpIHtcbiAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHBhZ2VDb25maWc7XG4gICAgICB9XG4gICAgfV0pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgYXV0b1RyYWNrZXIoKTtcbiAgICAgIGlmICghYXBsdXMuX2FwbHVzX2FsZWFkeV9sb2FkX21pbml2dCl7XG4gICAgICAgIGFwbHVzLl9hcGx1c19hbGVhZHlfbG9hZF9taW5pdnQgPSAxO1xuICAgICAgICB2YXIgZmMgPSBGZXRjaENvbmZpZy5jcmVhdGUoKTtcbiAgICAgICAgZmMucnVuKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfdW0uanNcbi8vIG1vZHVsZSBpZCA9IDg2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog5Y+v6KeG5YyW5Z+L54K56YWN572u5L+h5oGv6K+35rGCIFxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIEFhcm9ufOmSsOaYrSA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbnZhciB1dGlsR1EgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdRJyk7XG52YXIgdXRpbENhdGNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxDYXRjaCcpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgbWluaXZ0U3RvcmUgPSByZXF1aXJlKCdAdXRpbHMvbWluaXZ0U3RvcmUnKTtcbi8vIHZhciB1dGlsVXJsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxVcmwnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBNSU5JX1ZUX0NPTkZJR19CQUNLID0gJ01pbmlWdENvbmZpZ0JhY2snO1xudmFyIE1JTklfVlRfQ09ORklHX0ZPUk1BVCA9ICdNaW5pVnRDb25maWdGb3JtYXQnO1xuXG52YXIgR09MRExPR19QVUJMSVNIID0gYXBsdXNTdGF0aWMuUFVCTElTSDtcbi8vIHByb2Q6IGh0dHBzOi8vYWxpZHQuYWxpY2RuLmNvbS9hbGlsb2cvdnRkYWlseS8ke2NvbXBvbmVudElEfS5qc29uXG4vLyBodHRwczovL2QuYWxpY2RuLmNvbS9hbGlsb2cvdnQvYTF6MWQxXzEyMjc5OTE0Lmpzb25cbi8vIHZhciBIT1NUID0gJy8vZy5hbGljZG4uY29tL2FsaWxvZyc7XG4vLyB2YXIgSE9TVCA9ICcvL2QuYWxpY2RuLmNvbS9hbGlsb2cnO1xuXG4vLyBmdW5jdGlvbiBpc0RhaWx5ICgpIHtcbi8vICAgdmFyIHJzID0gZmFsc2U7XG4vLyAgIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnKSB7XG4vLyAgICAgcmV0dXJuIHRydWU7XG4vLyAgIH1cbi8vICAgcmV0dXJuIHJzO1xuLy8gfVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2UuZXh0ZW5kKHV0aWxEYXNoLmFzc2lnbihtaW5pdnRTdG9yZSwge1xuXG4gIHBhdGhuYW1lOiAnJyxcblxuICBwYWdlQ29uZmlnOiB7fSxcblxuICBvcmlnaW5TcG06IHtcbiAgICBzcG1BOiAnJyxcbiAgICBzcG1COiAnJ1xuICB9LFxuXG4gIHVwZGF0ZUNmZ0xzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIF9zZWxmLmZldGNoRnJvbUNkbigpO1xuICAgIH0sMTAwMCk7XG4gIH0sXG5cbiAgZmV0Y2hGcm9tQ2RuOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgcGF0aCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJyk7XG4gICAgaWYgKCFwYXRoKSByZXR1cm47XG4gICAgdmFyIF9iZWdpbkxvYWQgPSAobmV3IERhdGUpLmdldFRpbWUoKTtcbiAgICBhcGx1cy5yZXF1ZXN0VlRDb25maWcocGF0aCwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgdmFyIGNmZ0RhdGEgPSByZXNwLmRhdGE7XG4gICAgICBhcGx1cy5fbWluaWNmZ19sb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCkgLSBfYmVnaW5Mb2FkO1xuICAgICAgaWYgKGNmZ0RhdGEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0gdHlwZW9mIGNmZ0RhdGEgPT09ICdvYmplY3QnID8gY2ZnRGF0YSA6IEpTT04ucGFyc2UoY2ZnRGF0YSk7XG4gICAgICAgICAgaWYgKGFwbHVzLl9hcGx1c192dF9jZmcucG9pbnRzKSB7XG4gICAgICAgICAgICBlYWNoKGFwbHVzLl9hcGx1c192dF9jZmcucG9pbnRzLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICB2LnNlbGVjdG9yID0gZGVjb2RlVVJJQ29tcG9uZW50KHYuc2VsZWN0b3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIF9zZWxmLnNldENvbmZpZ0ludG9McyhhcGx1cy5fYXBsdXNfdnRfY2ZnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSB7XG4gICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzphcGx1cy5fYXBsdXNfdnRfY2ZnLCBlbmFibGU6IDB9XSk7XG4gICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAoYXBsdXMuX2FwbHVzX3Z0X2NmZyAmJiBhcGx1cy5fYXBsdXNfdnRfY2ZnLmVuYWJsZWQpIHtcbiAgICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0JBQ0ssIHtwYWdlQ29uZmlnOmFwbHVzLl9hcGx1c192dF9jZmcsIGVuYWJsZTogMH1dKTsgIFxuICAgICAgfVxuICAgICAgdXRpbENhdGNoLmNhdGNoRXhjZXB0aW9uKCdnZXRUcmFja2VyQ2ZnJywgZXJyb3IsIHtcbiAgICAgICAgbXNnOiBwYXRoXG4gICAgICB9KTtcbiAgICB9LCB7XG4gICAgICB0aW1lb3V0OiA1MDAwXG4gICAgfSk7XG4gIH0sXG5cbiAgZ2V0TWluaVZ0RGF0YTogZnVuY3Rpb24oY2RucGF0aCwgcHJlVXJsLCBmcm9tQ0ROKXtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICBhcGx1cy5fbWluaWNmZ19sb2FkID0gMDtcbiAgICBpZiAoY2RucGF0aCkge1xuICAgICAgdmFyIHZ0Q29uZmlnID0gdGhpcy5mZXRjaEZyb21MUyhjZG5wYXRoKTtcbiAgICAgIGlmKHR5cGVvZiB2dENvbmZpZyA9PSAnc3RyaW5nJykge1xuICAgICAgICB0cnl7XG4gICAgICAgICAgdnRDb25maWcgPSBKU09OLnBhcnNlKHZ0Q29uZmlnKTtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgdnRDb25maWcgPSB7fTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodnRDb25maWcgJiYgdnRDb25maWcuZW5hYmxlZCkge1xuICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0gdnRDb25maWc7XG4gICAgICB9XG4gICAgICBpZiggIWZyb21DRE4pIHtcbiAgICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0JBQ0ssIHtwYWdlQ29uZmlnOnZ0Q29uZmlnLCBlbmFibGU6IDB9XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZldGNoRnJvbUNkbihjZG5wYXRoLCBwcmVVcmwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvLyBodHRwczovL2QuYWxpY2RuLmNvbS9hbGlsb2cvdnRfZGFpbHkvYTF6MWQxXzEyMjc5OTE0Lmpzb25cbiAgc3luY01pbmlWdERhdGE6IGZ1bmN0aW9uKCl7XG4gICAgLy9zdWJzY3JpYmUgIHdzLnJlYWR5XG4gICAgdmFyIGNkbnBhdGggPSB0aGlzLmdldFZ0Q29uZmlnUGF0aCgpO1xuICAgIHRoaXMuZ2V0TWluaVZ0RGF0YShjZG5wYXRoLCAnJywgdHJ1ZSk7XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24oKXtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIFxuICAgIHZhciBHT0xETE9HX1NVQlNDUklCRSA9IGFwbHVzU3RhdGljLlNVQlNDUklCRTtcbiAgICAvL3RoaXMgZXZlbnQgZnJvbSBMUyBvciBmcm9tIFdTIHRvIGdldCBjb25maWdcbiAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19TVUJTQ1JJQkUsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcbiAgICAgIGlmKCFvcmlEYXRhcy5lbmFibGUpIHtcbiAgICAgICAgX3NlbGYucGFnZUNvbmZpZyA9IG9yaURhdGFzLnBhZ2VDb25maWc7XG4gICAgICB9XG4gICAgICAvL3RoaXMgZXZlbnQgdG8gdXNlO1xuICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0ZPUk1BVCwge1xuICAgICAgICBwYWdlQ29uZmlnOiBfc2VsZi5wYWdlQ29uZmlnLFxuICAgICAgICBvcmlnaW5TcG06IF9zZWxmLm9yaWdpblNwbVxuICAgICAgfV0pO1xuICAgICAgIW9yaURhdGFzLmVuYWJsZSAmJiBfc2VsZi5zZXRDb25maWdJbnRvTHMoX3NlbGYucGFnZUNvbmZpZyk7XG4gICAgfV0pO1xuICAgIF9zZWxmLnN5bmNNaW5pVnREYXRhKCk7XG4gIH0sXG5cbiAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn0pKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9saWJfbWluaXZ0L2ZldGNoQ29uZmlnLmpzXG4vLyBtb2R1bGUgaWQgPSA4N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR1EgPSByZXF1aXJlKCcuL3V0aWxHUScpO1xuXG5leHBvcnRzLmNhdGNoRXhjZXB0aW9uID0gZnVuY3Rpb24gKGZpbGVuYW1lLCBlcnJvcikge1xuICB2YXIgbWVzc2FnZSA9IGZpbGVuYW1lO1xuICBpZiAodHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvci5tZXNzYWdlKSB7XG4gICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnXycgKyBlcnJvci5tZXNzYWdlO1xuICB9XG4gIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZSgnYXBsdXMuX2FwbHVzX2NwbHVnaW5fbS5kb190cmFja2VyX2pzZXJyb3InLCBbe1xuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgZXJyb3I6IEpTT04uc3RyaW5naWZ5KGVycm9yKSxcbiAgICBmaWxlbmFtZTogZmlsZW5hbWVcbiAgfV0pO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsQ2F0Y2guanNcbi8vIG1vZHVsZSBpZCA9IDg4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG4vKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuKiBkZXNjcmlwdGlvblxuKlxuKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4qXG4qIEF1dGhvcnM6XG4qICAgQWFyb24gfCDpkrDmmK0gPGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbT5cbiovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBsc01pbml2dENvbmZpZ0tleTogJ0FQTFVTX01JTklfQ09ORklHJyxcblxuICAvKipcbiAgICog5YWs5YWx5qih5p2/5Zy65pmv77yM5aaC5p6cdHVybm9uPT09JzEnIOaLieWPlnZhbHVl5YaF55qE5YaF5a65XG4gICAqIG1ldGFJbmZvOiB7XG4gICAqICAnYXBsdXMtdHJhY2stY29uZmlnLWlkJzoge1xuICAgKiAgICAndmFsdWUnOiAncGFDd1psRzJXdjdsbGhobScsXG4gICAqICAgICd0dXJub24nOiAnMCcgb3IgJzEnICAgXG4gICAqICB9XG4gICAqIH1cbiAgICovXG4gIGdldE1pbmlWdFRwbENkblBhdGg6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHZhciBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXRyYWNrLWNvbmZpZy1pZCcpO1xuICAgIHZhciB0dXJub24gPSBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvICYmIGFwbHVzVHJhY2tDb25maWdJZEluZm8udHVybm9uO1xuICAgIHZhciB2YWx1ZSA9IGFwbHVzVHJhY2tDb25maWdJZEluZm8gJiYgYXBsdXNUcmFja0NvbmZpZ0lkSW5mby52YWx1ZTtcbiAgICBpZiAodHVybm9uID09PSAnMScgJiYgdmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9LFxuXG4gIGdldFZ0Q29uZmlnUGF0aDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIHRlbXBsYXRlVmFsID0gdGhpcy5nZXRNaW5pVnRUcGxDZG5QYXRoKCk7XG4gICAgdmFyIHNwbUFCID0gW107XG4gICAgdmFyIHNwbUlkO1xuICAgIHZhciBhcHBrZXkgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwa2V5JykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcElkJykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcEtleScpO1xuICAgIGlmIChhcHBrZXkpIHtcbiAgICAgIHNwbUlkID0gYXBwa2V5O1xuICAgIH1cbiAgICBcbiAgICBpZiAoc3BtSWQpIHtcbiAgICAgIHNwbUFCID0gc3BtSWQuc3BsaXQoJy4nKTtcbiAgICB9IFxuICAgIC8vIHJlbW92ZSBlbHNlIGxvZ2ljIGluc2lkZSB3ZWJ2dFN0b3JlLCBiZWNhdXNlIG1pbmlfY2xvdWQgZG9udCBzdXBwb3J0IHNwbVxuICAgIGlmIChzcG1BQi5sZW5ndGggPT09IDIpIHtcbiAgICAgIHRoaXMub3JpZ2luU3BtID0ge1xuICAgICAgICBzcG1BOiBzcG1BQlswXSxcbiAgICAgICAgc3BtQjogc3BtQUJbMV1cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChzcG1BQi5sZW5ndGggPT09IDEpIHtcbiAgICAgIHRoaXMub3JpZ2luU3BtLnNwbUEgPSBzcG1BQlswXTtcbiAgICB9XG5cbiAgICBpZiAodGVtcGxhdGVWYWwpIHtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZVZhbDtcbiAgICB9XG4gICAgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMikge1xuICAgICAgcmV0dXJuIHNwbUFCLmpvaW4oJ18nKTtcbiAgICB9IGVsc2UgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHNwbUFCWzBdO1xuICAgIH1cbiAgfSxcblxuICBmZXRjaEZyb21MUzogZnVuY3Rpb24gKGNkbnBhdGgpIHtcbiAgICBpZiAoIXRoaXMuY2RucGF0aCkge1xuICAgICAgdGhpcy5jZG5wYXRoID0gY2RucGF0aCB8fCB0aGlzLmdldE1pbmlWdFRwbENkblBhdGgoKTtcbiAgICB9XG4gICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY3R4LmdldFN0b3JhZ2VTeW5jKHRoaXMubHNNaW5pdnRDb25maWdLZXkgKyAnLScgKyBjZG5wYXRoKSkgfHwge307XG4gIH0sXG5cbiAgc2V0Q29uZmlnSW50b0xzOiBmdW5jdGlvbihjb25maWcpIHtcbiAgICBpZiAoIXRoaXMuY2RucGF0aCkge1xuICAgICAgdGhpcy5jZG5wYXRoID0gdGhpcy5nZXRWdENvbmZpZ1BhdGgoKTtcbiAgICB9XG4gICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgIGN0eC5zZXRTdG9yYWdlU3luYyh0aGlzLmxzTWluaXZ0Q29uZmlnS2V5ICsgJy0nICsgdGhpcy5jZG5wYXRoLCBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSkpO1xuICAgIC8vIHV0aWxTdG9yZS5zZXQodGhpcy5sc01pbml2dENvbmZpZ0tleSArICctJyArIHRoaXMuY2RucGF0aCwgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNvbmZpZykpKTtcbiAgfVxuXG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL21pbml2dFN0b3JlLmpzXG4vLyBtb2R1bGUgaWQgPSA4OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbFZULmpzXG4gKiDlj6/op4bljJbphY3nva4g6Kej5p6Q6YWN572u5L+h5oGv5Li66Ieq5Yqo54K55Ye744CB6Ieq5Yqo5pud5YWJ44CB6Ieq5YqocHblhazlhbHlh73mlbBcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcblxuZXhwb3J0cy5nZXRDdXJyZW50UGFnZVZUQ2ZnID0gZnVuY3Rpb24oKSB7XG4gIHZhciB2dENmZyA9IGFwbHVzLl9hcGx1c192dF9jZmc7XG4gIGlmICghdnRDZmcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHBhdGggPSBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHZ0Q2ZnLnBhZ2VzLmxlbmd0aDsgaSsrICl7XG4gICAgdmFyIHBhZ2VDb25maWcgPSB2dENmZy5wYWdlc1tpXTtcbiAgICBpZiAocGFnZUNvbmZpZy5tYXRjaFVybCA9PT0gcGF0aCkge1xuICAgICAgcmV0dXJuIHBhZ2VDb25maWc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuO1xufTtcblxuXG5leHBvcnRzLnZ0MmF1dG9FdmVudCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdnRfY2ZnID0gYXBsdXMuX2FwbHVzX3Z0X2NmZztcbiAgaWYgKCF2dF9jZmcpIHJldHVybjtcbiAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgdmFyIGN1cnJlbnRQYWdlID0gcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcbiAgZWFjaCh2dF9jZmcucGFnZXMsIGZ1bmN0aW9uKHBjKSB7XG4gICAgYXBsdXMuc2V0UGFnZU5hbWUoeyBwYWdlTmFtZTogcGMuc3BtQiwgZXh0cmFQYXJhbXM6IHBjLmV4dHJhUGFyYW1zIH0sIHBjLm1hdGNoVXJsKTtcbiAgICBpZiAocGMubWF0Y2hVcmwgPT09IGN1cnJlbnRQYWdlKSB7XG4gICAgICB2YXIgYXV0b19leHBfYXJyID0gW10sIGF1dG9fY2xrX2FyciA9IFtdO1xuICAgICAgZWFjaCh2dF9jZmcucG9pbnRzLCBmdW5jdGlvbihwKXtcbiAgICAgICAgaWYgKHBjLnNwbUIgPT09IHAuc3BtQikge1xuICAgICAgICAgIGlmIChwLnRyYWNrZXJUeXBlID09PSBcImV4cG9zdXJlXCIpIHsgXG4gICAgICAgICAgICBhdXRvX2V4cF9hcnIucHVzaCh7XG4gICAgICAgICAgICAgICdjc3NTZWxlY3Rvcic6IHAuc2VsZWN0b3IsXG4gICAgICAgICAgICAgICdsb2drZXknOiBwLmxvZ2tleSxcbiAgICAgICAgICAgICAgJ3Byb3BzJzogcC5zZWxlY3RvclR5cGUsXG4gICAgICAgICAgICAgICdzcG1DJzogcC5zcG1DLFxuICAgICAgICAgICAgICAnc3BtRCc6IHAuc3BtRCxcbiAgICAgICAgICAgICAgJ2N1c3RvbUFyZ3MnOiBwLmN1c3RvbUFyZ3MsXG4gICAgICAgICAgICAgICdfdnQnOiBwYy50ZW1wbGF0ZSB8fCBwYy5zdGRJZCA/IDIgOiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXV0b19jbGtfYXJyLnB1c2goe1xuICAgICAgICAgICAgICAnY3NzU2VsZWN0b3InOiBwLnNlbGVjdG9yLFxuICAgICAgICAgICAgICAnbG9na2V5JzogcC5sb2drZXksXG4gICAgICAgICAgICAgICdwcm9wcyc6IHAuc2VsZWN0b3JUeXBlLCBcbiAgICAgICAgICAgICAgJ3NwbUMnOiBwLnNwbUMsXG4gICAgICAgICAgICAgICdzcG1EJzogcC5zcG1ELFxuICAgICAgICAgICAgICAnY3VzdG9tQXJncyc6IHAuY3VzdG9tQXJncyxcbiAgICAgICAgICAgICAgJ192dCc6IHBjLnRlbXBsYXRlIHx8IHBjLnN0ZElkID8gMiA6IDFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChhdXRvX2V4cF9hcnIubGVuZ3RoID4gMCkge1xuICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnLCBhdXRvX2V4cF9hcnIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXV0b19jbGtfYXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXBsdXMuYXBwZW5kTWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJywgYXV0b19jbGtfYXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2xpYl9taW5pdnQvdXRpbFZULmpzXG4vLyBtb2R1bGUgaWQgPSA5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhcGx1c19taW5pX2Jhc2ljXG4gKiDlsI/nqIvluo/mqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOm+mempuSA8Y2hlbmdwaW5nLnJjcEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwQ29uZmlnLGFwbHVzX2NvbmZpZykge1xuICB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbiAgLy8gcmVxdWlyZSgnQHV0aWxzL2RlYnVnJykuaXNEZWJ1Z0FwbHVzKHRydWUpO1xuXG4gIHZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcbiAgdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuICB2YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG4gIHZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbiAgdmFyIGFwbHVzaW5pdCA9IHJlcXVpcmUoJ0Bjb3JlL2FwbHVzaW5pdCcpO1xuICBtaW5pLmluaXRJc1RCKCk7XG5cbiAgaWYgKHR5cGVvZiBhcHBDb25maWcgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKGFwcENvbmZpZy5zaXRlSWQpIHtcbiAgICAgIGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuc2l0ZUlkID0gYXBwQ29uZmlnLnNpdGVJZDtcbiAgICB9XG4gICAgYXBsdXNfY29uZmlnLm1ldGFJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgYXBsdXNfY29uZmlnLm1ldGFJbmZvLCBhcHBDb25maWcubWV0YUluZm8pO1xuICB9XG5cbiAgdmFyIFJVTk5JTkcgPSAncnVubmluZyc7XG4gIHZhciBDT01QTEVURSA9ICdjb21wbGV0ZSc7XG4gIHZhciBhcGx1c1N0YXR1cyA9IFsnYXBsdXNSZWFkeScsIFJVTk5JTkddO1xuXG4gIHV0aWxQdWJzdWIuZG9QdWJNc2coYXBsdXNTdGF0dXMpO1xuXG4gIGFwbHVzaW5pdC5ydW4oe1xuICAgIHBsdWdpbnM6IGFwbHVzX2NvbmZpZy5wbHVnaW5zLFxuICAgIGNvbnRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb25maWdfcHZfY29udGV4dCA9IHtcbiAgICAgICAgUEFHRV9MT0FEX1RJTUU6IG5ldyBEYXRlKClcbiAgICAgIH07XG4gICAgICB2YXIgUExVR0lOU19QViA9IFtdO1xuICAgICAgZWFjaChhcGx1c19jb25maWcucGx1Z2lucywgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgY29uZmlnX3B2X2NvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnO1xuICAgICAgICBpZiAodi5uYW1lID09PSAnYXBsdXNfbG9nX2luamVjdCcgJiYgdi5jb25maWcgJiYgdi5jb25maWcucGx1Z2lucykge1xuICAgICAgICAgIFBMVUdJTlNfUFYgPSB2LmNvbmZpZy5wbHVnaW5zLnB2O1xuICAgICAgICAgIGVhY2goUExVR0lOU19QViwgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIGNvbmZpZ19wdl9jb250ZXh0W3YubmFtZV0gPSB2LmNvbmZpZztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnX3B2X2NvbnRleHQsIHtcbiAgICAgICAgYXBsdXNfY29uZmlnOiBhcGx1c19jb25maWdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwgZnVuY3Rpb24gKCkge1xuICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIG1zZzogJ0FQTFVTIElOSVQgU1VDQ0VTUydcbiAgICB9KTtcbiAgICAvLyBhcGx1c+WHhuWkh+WlveS6hu+8jOWIhuWPkeS4gOS4qnJlYWR55LqL5Lu2XG4gICAgYXBsdXNTdGF0dXNbMV0gPSBDT01QTEVURTtcbiAgICB1dGlsUHVic3ViLmRvUHViTXNnKGFwbHVzU3RhdHVzKTtcbiAgfSk7XG5cbiAgLy8gcmV0dXJuIHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUUpO1xuICByZXR1cm4gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYXBsdXNfbWluaV9iYXNpYy5qc1xuLy8gbW9kdWxlIGlkID0gOTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGFwbHVzIEFQSVxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWR1Y2VyID0gcmVxdWlyZSgnQGNvcmUvUmVkdWNlcicpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xuXG4vKipcbiAqIOWwhuWQjue7reeahGluaXTliqjkvZzpg73lgZrmiJDmj5Lku7bvvIznm67liY3lj6rmnIl3aGVyZV90b19zZW5kcHbkuIDpoblcbiAqXG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuICogICBwbHVnaW5zXG4gKiAgIGNvbnRleHRcbiAqIH1cbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFja1xuICpcbiAqL1xuZXhwb3J0cy5ydW4gPSBmdW5jdGlvbiAob3B0cywgY2FsbGJhY2spIHtcbiAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICByZWR1Y2VyLnJ1bih7XG4gICAgcGx1Z2luczogb3B0cy5wbHVnaW5zLFxuICAgIGNvbnRleHQ6IG9wdHMuY29udGV4dFxuICB9LCB7XG4gICAgY29uZmlnOiB7fSxcbiAgICB1c2VyZGF0YToge30sXG4gICAgcHVic3ViVHlwZTogJ2FwbHVzaW5pdCcsXG4gICAgbWVzc2FnZUZuUXVldWU6IFtdLFxuICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2FwbHVzaW5pdCdcbiAgfSwgZnVuY3Rpb24gKGN0eCkge1xuICAgIHZhciBtc2dzID0gWydhcGx1c0luaXRDb250ZXh0JywgY3R4XTtcbiAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG4gICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICBjYWxsYmFjayhjdHgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9hcGx1c2luaXQuanNcbi8vIG1vZHVsZSBpZCA9IDkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=