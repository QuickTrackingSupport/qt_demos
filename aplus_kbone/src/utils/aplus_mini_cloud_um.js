/*! 2022-01-06 17:51:43 */
module.exports = function(e) {
    function t(a) {
        if (n[a]) return n[a].exports;
        var r = n[a] = {
            exports: {},
            id: a,
            loaded: !1
        };
        return e[a].call(r.exports, r, r.exports, t), r.loaded = !0, r.exports;
    }
    var n = {};
    return t.m = e, t.c = n, t.p = "", t(0);
}([ function(e, t, n) {
    e.exports = n(1);
}, function(e, t, n) {
    "use strict";
    n(2).initGlobal(), e.exports = function(e) {
        var t = n(4);
        return n(94)(e, t);
    };
}, function(e, t, n) {
    "use strict";
    var a, r = n(3), o = r.APLUS, s = r.APLUS_QUEUE, i = r.GOLDLOG, u = r.GOLDLOG_QUEUE, c = !1;
    try {
        a = window, c = !0;
    } catch (e) {
        a = {};
    }
    t.getContext = function() {
        return a;
    }, t.initGlobal = function(e) {
        a = e ? e : {
            v: 1,
            aplus: {},
            aplus_queue: []
        };
        var t, n;
        if (c) try {
            t = a.aplus || a.goldlog || (a.aplus = {});
            var r = a.goldlog_queue || (a.goldlog_queue = []);
            n = a.aplus_queue || (a.aplus_queue = []), n = r.concat(n);
        } catch (e) {} else t = a.aplus, n = a.aplus_queue;
        return a.aplus = a.goldlog = t, a.aplus_queue = a.goldlog_queue = n, a;
    };
    var p = function(e) {
        if (e === o || e === i) {
            var t = a[o] || a[i];
            return t || (t = a[o] = a[i] = {}), t;
        }
        var n = u, r = s;
        if (e === r || e === n) {
            var c = a[r] || a[n];
            return c || (c = a[r] = a[n] = []), c;
        }
    };
    t.getGlobalValue = p, t.setGlobalValue = function(e, t) {
        a[e] = t;
    };
    var l = function(e) {
        var t;
        try {
            var n = p(o);
            t = n[e];
        } catch (e) {
            t = "";
        } finally {
            return t;
        }
    };
    t.getGoldlogVal = l;
    var f = function(e, t) {
        var n = !1;
        try {
            var a = p(o);
            e && (a[e] = t, n = !0);
        } catch (e) {
            n = !1;
        } finally {
            return n;
        }
    };
    t.setGoldlogVal = f, t.getClientInfo = function() {
        return l("_aplus_client") || {};
    };
}, function(e, t) {
    var n = "aplus", a = "goldlog", r = n + "_queue", o = a + "_queue", s = "mw_change", i = "MetaInfo", u = "append" + i, c = "set" + i, p = "http", l = "_pubsub", f = "other", g = "2101", d = "2201", h = "2202", _ = "19999", v = "1023", m = "1010", y = 3e4, b = 18e5, S = "ekvs", P = 1e4, A = 1, I = 3e3, C = "$$_page_start", T = "$$_page_end", E = "$$_app_start", x = "$$_app_end", M = "aplus_user_profile", O = "imprint", w = "aplus-idtype", k = "aplus-jsbridge-only", U = "aplus-page-config", N = "aplus-skip-apv-rules", L = "aplus-rhost-v", R = "aplus-rhost-g";
    e.exports = {
        PAGE_ENTER: "PAGE_ENTER",
        CURRENT_PAGE_CONFIG: "CURRENT_PAGE_CONFIG",
        _ANONY_ID: "_anony_id",
        _USER_ID: "_user_id",
        DEFAULT_CODE: f,
        OTHER: _,
        EVENT_MAP: {
            "2101": "click",
            "2201": "exposure",
            "2202": "exposure",
            "19999": f,
            "1023": "app_show",
            "1010": "app_hide_or_unload"
        },
        EVENT_ID_MAP: {
            EXP: d,
            IMPEXP: h,
            CLK: g,
            OTHER: _,
            SHOW: v,
            H_OR_U: m
        },
        APLUS: n,
        GOLDLOG: a,
        UNSUBSCRIBE: n + "." + n + l + ".unsubscribe",
        SUBSCRIBE: n + "." + n + l + ".subscribe",
        PUBLISH: n + "." + n + l + ".publish",
        CACHE_PUBS: n + "." + n + l + ".cachePubs",
        APLUS_UNIVERSAL: n + "_universal",
        APLUS_QUEUE: r,
        GOLDLOG_QUEUE: o,
        COMPLETE: "complete",
        PV_CODE: "2001",
        EXP_CODE: d,
        CLK_CODE: g,
        OTHER_CODE: _,
        CLK: "CLK",
        EXP: "EXP",
        SPM_CNT: "spm-cnt",
        SPM_URL: "spm-url",
        SPM_PRE: "spm-pre",
        MW_CHANGE_PV: s + "_pv",
        MW_CHANGE_HJLJ: s + "_hjlj",
        HTTP: p + ":",
        HTTPS: "https:",
        APPEND_META_INFO: u,
        SET_META_INFO: c,
        APLUS_APPEND_META_INFO: n + "." + u,
        APLUS_SET_META_INFO: n + "." + c,
        PVID: "pvid",
        APLUS_LOG_PIPE: "aplus-log-pipe",
        openAPIs: [ "send", "enter", "sendPV", "record", "combineRecord", "recordUdata", "requestVTConfig", "setPageSPM", "setMetaInfo", "appendMetaInfo", "updatePageProperties", "updateNextPageProperties", "updatePageUtparam", "updateNextPageUtparam", "pageAppear", "pageDisappear", "skipPage", "updateSessionProperties", "getPageSpmUrl", "getPageSpmPre", "setPageName", "getElementSPM", "recordAppLink" ],
        SESSION_INTERVAL: y,
        SESSION_PAUSE_TIME: "session_pause_time",
        IMPRINT: "imprint",
        CURRENT_SESSION: "current_session",
        MAX_EVENTID_LENGTH: 128,
        MAX_PROPERTY_KEY_LENGTH: 256,
        MAX_PROPERTY_KEYS_COUNT: 100,
        REQUESTS: "requests",
        SHARES: "shares",
        APLUS_SSRC: "_aplus_ssrc",
        EKVS: S,
        EVENT_MAX_COUNT: P,
        MEMORY_MAX_COUNT: A,
        EVENT_SEND_DEFAULT_INTERVAL: I,
        PAGE_START: C,
        PAGE_END: T,
        APP_START: E,
        APP_END: x,
        USER_PROFILE_KEY: M,
        SHARE_CACHE_INTERVAL: b,
        IMPRINT: O,
        ID_TYPE: w,
        GLOBAL_PROPERTY: "globalproperty",
        JSBRIDGE_ONLY: k,
        PAGE_CONFIG: U,
        APLUS_SKIP_APV_RULES: N,
        APLUS_PV_DOMAIN: L,
        APLUS_EKV_DOMAIN: R
    };
}, function(e, t, n) {
    e.exports = {
        metaInfo: {
            "aplus-rhost-v": "",
            "aplus-rhost-g": "",
            "aplus-mmstat-timeout": "10000",
            sdkId: "aplus_mini_cloud_um"
        },
        globalConfig: {
            isAli: !1,
            isDecodeUrl: !0,
            APLUS_QUEUE: "aplus_queue",
            ETAG_STORAGE_KEY: "__ETAG__CNA__ID__",
            script_name: "aplus_mini.js",
            "aplus-globaldata": {},
            lver: "1.8.1"
        },
        plugins: [ {
            name: "inject_app_um",
            path: n(5)
        }, {
            name: "inject_page_um",
            path: n(31)
        }, {
            name: "open_api",
            path: n(34)
        }, {
            name: "aplus_client",
            path: n(35)
        }, {
            name: "pubsub",
            path: n(36)
        }, {
            name: "aplus_meta_inject",
            path: n(39)
        }, {
            name: "aplus_ac",
            path: n(43),
            deps: [ "inject_page_um" ]
        }, {
            name: "aplus_ae",
            path: n(51),
            deps: [ "inject_page_um" ]
        }, {
            name: "aplus_mini_spm",
            path: n(57)
        }, {
            name: "aplus_mini_report_um",
            path: n(58)
        }, {
            name: "aplus_log_inject",
            path: n(63),
            deps: [ "aplus_meta_inject" ],
            config: {
                plugins: {
                    pv: [ {
                        name: "etag",
                        path: n(64)
                    }, {
                        name: "when_to_sendpv",
                        path: n(69),
                        config: {
                            aplusWaiting: ""
                        }
                    }, {
                        name: "where_to_send",
                        path: n(70)
                    }, {
                        name: "what_to_send",
                        path: n(71),
                        config: {
                            logdataToUt: {}
                        }
                    }, {
                        name: "miniapp_data",
                        path: n(75)
                    }, {
                        name: "what_to_sendpv_userdata",
                        path: n(76),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "can_to_sendpv",
                        path: n(77)
                    } ],
                    hjlj: [ {
                        name: "etag",
                        path: n(64)
                    }, {
                        name: "where_to_send",
                        path: n(70)
                    }, {
                        name: "what_to_send",
                        path: n(71),
                        deps: []
                    }, {
                        name: "miniapp_data",
                        path: n(75)
                    }, {
                        name: "what_to_hjlj_userdata",
                        path: n(78)
                    } ]
                }
            }
        }, {
            name: "aplus_api",
            path: n(79),
            deps: [ "aplus_log_inject", "aplus_meta_inject" ]
        }, {
            name: "meta_queue",
            path: n(86),
            config: {
                isOpenApi: !0
            }
        }, {
            name: "etag",
            path: n(64)
        }, {
            name: "aplus_queue",
            path: n(88),
            config: {
                isOpenApi: !0
            }
        }, {
            name: "auto_tracker_um",
            path: n(89),
            deps: [ "inject_page_um" ]
        } ]
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        var n = {};
        t && (n.scene = t), e && e.miniappDebugId && (n.debugId = e.miniappDebugId);
        for (var a in e) "$$_share_uid" !== a && 0 !== a.indexOf("$$_utm_") || (n[a] = e[a]);
        return n;
    }
    function r(e) {
        h().load(function() {
            v().w("cache init success");
        });
        var t = {}, n = p(e);
        for (var a in n) "object" == typeof n[a] ? t = y.assign(n[a], t) : n[a] && (t[a] = n[a]);
        d().load();
        var r = f().resume(t), o = f().getCurrentSessionId();
        g().setSessionId(o), r && d().add(_.DataType.HALF_SESSION, {}, function() {
            v().w("before send session"), d().send();
        });
    }
    function o() {
        f().pause(), d().send(_.DataType.CLOSE_SESSION, {}, function() {
            d().save(), h().save(), v().w("after send session");
        });
    }
    function s() {
        var e = App, t = !1, n = !1, s = i.getContext(), p = l.getContext(), f = {
            onLaunch: function(e) {
                l.initIsTB();
                var t = e ? e.query : {}, n = e ? e.referrerInfo : {};
                if (S += 1, s.aplus_queue.push({
                    action: "aplus.appendMetaInfo",
                    arguments: [ "aplus-session-args", y.assign(n, {
                        scene: e.scene || ""
                    }) ]
                }), t) {
                    var r = {};
                    if (t.spm && (s.aplus.spm_orign = t.spm), e.scene && (r.scene = e.scene), t.miniappDebugId) {
                        var o = t.miniappDebugId.trim(), i = o.split("_");
                        r = y.assign(r, {
                            aplus_work_no: i.length > 2 ? i[1] : o,
                            aplus_track_debug_id: o,
                            aplus_flag: "aplus_test"
                        });
                    }
                    s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-exdata", r ]
                    }), s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-cpvdata", r ]
                    }), s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-global-args", a(t, e.scene) ]
                    });
                }
            },
            onShow: function(e) {
                S += 1;
                var n, o = e ? e.query : {}, i = e ? e.scene : "";
                s.aplus_queue.push({
                    action: "aplus.setMetaInfo",
                    arguments: [ "aplus-global-args", a(o, i) ]
                }), i && (s.aplus_queue.push({
                    action: "aplus.appendMetaInfo",
                    arguments: [ "aplus-exdata", {
                        scene: i
                    } ]
                }), s.aplus_queue.push({
                    action: "aplus.appendMetaInfo",
                    arguments: [ "aplus-cpvdata", {
                        scene: i
                    } ]
                }), s.aplus_queue.push({
                    action: "aplus.appendMetaInfo",
                    arguments: [ "aplus-session-args", {
                        scene: i
                    } ]
                })), 2 === S ? n = 1 : 1 === S ? n = 0 : v().w("APP_LAUNCH_TYPE should not reach this, value = " + S), 
                u.onAplusReady(s.aplus_queue, c.SUBSCRIBE, function() {
                    t || (t = !0, r(e));
                    var a = s.aplus.globalConfig || {};
                    if (!a.isAli) {
                        var o = m.getPageCode();
                        s.onAppShowTime = new Date().getTime(), s.aplus_queue.push({
                            action: "aplus.record",
                            arguments: [ c.APP_START, "SHOW", {
                                start_type: n,
                                page_name: o || e.path || "-",
                                url: e.path || "-"
                            } ]
                        });
                    }
                });
            },
            onHide: function() {
                u.onAplusReady(s.aplus_queue, c.SUBSCRIBE, function() {
                    var e = s.aplus.globalConfig || {}, n = m.getPageCode();
                    if (!e.isAli) {
                        var a = m.getCurrentPagePath(), r = new Date().getTime() - s.onAppShowTime;
                        s.aplus_queue.push({
                            action: "aplus.record",
                            arguments: [ c.APP_END, "H_OR_U", {
                                duration: r,
                                end_type: 0,
                                page_name: n || a || "-",
                                url: a || "-",
                                start_time: s.onAppShowTime
                            } ]
                        });
                    }
                    t = !1, o();
                }), S = 0;
            }
        };
        App = function(t) {
            var n = i.getContext();
            t.aplus = n, e(t);
        }, p.onAppShow(function(e) {
            if (!n) {
                var t = {};
                t = b(p.getLaunchOptionsSync) ? p.getLaunchOptionsSync() || {} : e, f.onLaunch(t), 
                n = !0;
            }
            f.onShow(e);
        }), p.onAppHide(function() {
            f.onHide();
        });
    }
    var i = n(2), u = n(6), c = n(3), p = n(13), l = n(9), f = n(14), g = n(18), d = n(20), h = n(15), _ = n(17), v = n(12), m = n(30), y = n(28), b = n(10), S = 0;
    e.exports = function() {
        return {
            run: function() {
                [ "object", "function" ].indexOf(typeof App) > -1 && s();
            }
        };
    };
}, function(e, t, n) {
    var a = n(7), r = n(9);
    e.exports = {
        resetFn: function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function() {}, a = e[t];
            e[t] = function() {
                var e = a && a.apply(this, arguments);
                return e ? n.call(this, e) : n.apply(this, arguments);
            };
        },
        rewriteFn: function(e, t, n) {
            var a = e[t];
            e[t] = function(e) {
                n.call(this, e), a && a.call(this, e);
            };
        },
        onAplusReady: function(e, t, n) {
            e.push({
                action: t,
                arguments: [ "aplusReady", function(e) {
                    "complete" === e && "function" == typeof n && n();
                } ]
            });
        },
        getIndexByRect: function(e, t, n) {
            var o = -1;
            r.getContext().createSelectorQuery().selectAll(e).boundingClientRect().exec(function(e) {
                a(e[0], function(e, n) {
                    e.width === t.width && e.height === t.height && e.left === t.left && e.top === t.top && e.right === t.right && e.bottom === t.bottom && (o = n);
                }), n(o);
            });
        }
    };
}, function(e, t, n) {
    "use strict";
    var a = n(8);
    e.exports = function(e, t) {
        if (a(e) && void 0 === e.length) for (var n in e) e.hasOwnProperty(n) && t(n, e[n], e); else {
            var r, o = e.length;
            for (r = 0; r < o; r++) {
                var s = t(e[r], r);
                if ("break" === s) break;
            }
        }
    };
}, function(e, t) {
    e.exports = function(e) {
        if ("object" != typeof e || null === e) return !1;
        for (var t = e; null !== Object.getPrototypeOf(t); ) t = Object.getPrototypeOf(t);
        return Object.getPrototypeOf(e) === t;
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        if ("boolean" == typeof c) return c;
        var e = !1;
        try {
            var t = navigator ? navigator.userAgent || navigator.swuserAgent : "";
            e = !!/AliApp/i.test(t), (/AliApp\(AP/i.test(t) || /AliApp\(DingTalk/i.test(t) || /AliApp\(AMAP/i.test(t)) && (e = !1), 
            /AliApp\(KB/i.test(t) && (e = !!/Mist/.test(t)), /AlipayIDE Taobao/.test(t) && (e = !0);
            var n = p().ctx;
            "function" == typeof n.canIUse && (e = !!n.canIUse("callUserTrack"));
        } catch (e) {}
        return c = e, e;
    }
    function r() {
        return "boolean" == typeof c ? !!c : a();
    }
    var o = n(10), s = n(2), i = n(11), u = n(12);
    t.getCurrentPage = function() {
        var e = getCurrentPages();
        return e[e.length - 1] || {};
    }, t.getReferrerPage = function() {
        var e = getCurrentPages();
        return e[e.length - 2] || {};
    };
    var c;
    t.resetIsTB = function(e) {
        c = e;
    }, t.initIsTB = a;
    var p = function() {
        try {
            return {
                ctx: dd,
                platType: "dd",
                sdkType: "ddmp",
                logDomain: "/ddm_logs"
            };
        } catch (e) {
            try {
                return {
                    ctx: my,
                    platType: my && my.tb ? "taobao" : "my",
                    sdkType: my && my.tb ? "taobaomp" : "mymp",
                    logDomain: "/alipaym_logs"
                };
            } catch (e) {
                try {
                    return {
                        ctx: tt,
                        platType: "tt",
                        sdkType: "ttmp",
                        logDomain: "/bytedancem_logs"
                    };
                } catch (e) {
                    try {
                        return {
                            ctx: swan,
                            platType: "bd",
                            sdkType: "bdmp",
                            logDomain: "/baidum_logs"
                        };
                    } catch (e) {
                        try {
                            return {
                                ctx: wx,
                                platType: "wx",
                                sdkType: "wxmp",
                                logDomain: "/wxm_logs"
                            };
                        } catch (e) {
                            return {
                                ctx: {},
                                platType: "UNKNOW",
                                sdkType: "UNKNOW"
                            };
                        }
                    }
                }
            }
        }
    };
    t.isTB = r, t.getPlatformType = function() {
        return p().platType;
    }, t.getSdkType = function() {
        return p().sdkType;
    }, t.getContext = function() {
        return p().ctx;
    }, t.getLogDomain = function() {
        return p().logDomain;
    };
    var l = "httpRequest", f = "request", g = function() {};
    t.request = function(e, t, n, a) {
        var r = p().ctx;
        t || (t = {}), o(a) || (a = g), o(n) || (n = g);
        var c = t.requestMethodName || f, d = r[c];
        o(d) || (c !== f ? c = f : c !== l && (c = l), d = r[c]);
        var h = t.dataType || "json", _ = t.timeout || 5e3, v = t.method || "GET";
        e = i.can2https(e);
        var m;
        if (o(d)) {
            var y = {
                url: e,
                method: v,
                dataType: h,
                timeout: _,
                success: function(e) {
                    n(e);
                },
                fail: function(t) {
                    u().w("request " + e + " failure, the msg is ", t), a(t);
                }
            };
            "object" == typeof t.data && "POST" === v && (y.data = t.data, y.url = y.url.split("?")[0]);
            var b = s.getGlobalValue("aplus"), S = b.getMetaInfo("aplus-request-extinfo");
            "object" == typeof S && (y._extInfo = S), d(y);
        } else u().w('can not find "' + c + '"!'), a(m);
    };
}, function(e, t) {
    "use strict";
    e.exports = function(e) {
        return "function" == typeof e;
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        var t, n, a, o = [], s = e.length;
        for (a = 0; a < s; a++) t = e[a][0], n = e[a][1], o.push(0 === t.indexOf(r) ? n : t + "=" + encodeURIComponent(n));
        return o.join("&");
    }
    var r = "::-plain-::";
    t.mkPlainKey = function() {
        return r + Math.random();
    }, t.s_plain_obj = r, t.mkPlainKeyForExparams = function(e) {
        var t = e || r;
        return t + "exparams";
    }, t.arr2param = a, t.param2arr = function(e) {
        for (var t, n = e.split("&"), a = 0, r = n.length, o = []; a < r; a++) t = n[a].split("="), 
        o.push([ t.shift(), t.join("=") ]);
        return o;
    }, t.arr2obj = function(e) {
        var t, n, a, r = {}, o = e.length;
        for (a = 0; a < o; a++) t = e[a][0], n = e[a][1], r[t] = n;
        return r;
    }, t.jsonLikeStr2JSON = function(e) {
        if (!e || "string" != typeof e) return {};
        for (var t = e.replace(/['"{}]+/g, ""), n = t.split(","), a = [], r = 0; r < n.length; r++) a.push(n[r].split(":"));
        var o = this.arr2obj(a);
        return o;
    }, t.can2https = function(e) {
        if (0 === e.indexOf("//")) {
            var t = "https:";
            /(\d+\.){3,}\d+/.test(e) && (t = "http:"), e = t + e;
        }
        return e;
    }, t.getAppKey = function() {
        var e = n(2).getGlobalValue("aplus");
        return e.getMetaInfo("appkey") || e.getMetaInfo("appId") || e.getMetaInfo("appKey");
    }, t.checkEmptyObj = function(e) {
        return "object" != typeof e || 0 === Object.keys(e).length;
    }, t.checkDomain = function(e) {
        const t = new RegExp(/^[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:[0-9]{1,5})*$/);
        if (!e || !e.match(t)) {
            var a = n(12);
            return a().tip_w(a().repeat("!")), a().tip_w("收数域名配置错误,请检查aplus-rhost-v取值的内容, 正确格式 eg. test-qtracking-xxx.com:端口号可选 "), 
            a().tip_w(a().repeat("!")), !1;
        }
        return !0;
    }, t.checkOpenid = function(e) {
        if (!e) {
            var t = n(12);
            return t().tip_w(t().repeat("!")), t().tip_w("QT的UV计算依赖小程序的用户唯一标识, 请确保针对用户唯一标识的上报！！"), 
            t().tip_w("配置参考代码: aplus_queue.push({action: 'aplus.setMetaInfo', arguments: ['_anony_id', 待配置取值]});"), 
            t().tip_w("获取小程序唯一标识请参考链接: https://t.tb.cn/1dTHjTTQF0UjOTNHiCkaCS"), t().tip_w(t().repeat("!")), 
            !1;
        }
        return !0;
    };
}, function(e, t) {
    var n = "[APLUS] -- ";
    e.exports = function() {
        function e() {
            this.setDebug = function(e) {
                a = e;
            }, this.i = function() {
                try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.info.apply(console, arguments);
                } catch (e) {}
            }, this.e = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.error.apply(console, arguments);
                } catch (e) {}
            }, this.w = function() {
                try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.warn.apply(console, arguments);
                } catch (e) {}
            }, this.v = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.log.apply(console, arguments);
                } catch (e) {}
            }, this.tip_w = function(e) {
                try {
                    console.log("%c " + n + e, "background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;");
                } catch (e) {}
            }, this.repeat = function(e) {
                for (var t = e; t.length < 86; ) t += e;
                return t;
            };
        }
        var t = null, a = !1;
        return function() {
            return null === t && (t = new e()), t;
        };
    }();
}, function(e, t) {
    function n(e) {
        var t, a = Array.isArray(e) ? [] : {};
        if ("object" == typeof e) {
            if (JSON && JSON.parse) t = JSON.stringify(e), a = JSON.parse(t); else for (var r in e) a[r] = "object" == typeof e[r] ? n(e[r]) : e[r];
            return a;
        }
    }
    e.exports = n;
}, function(e, t, n) {
    var a = n(15), r = n(12), o = n(3), s = n(9), i = n(13), u = n(17), c = n(2);
    e.exports = function() {
        function e() {
            return {
                resume: function(e) {
                    var t = !1;
                    g || (g = a().get(o.CURRENT_SESSION));
                    var s = new Date();
                    return f = s.getTime(), !g || !g.end_time || f - g.end_time > o.SESSION_INTERVAL ? (t = !0, 
                    n(e), r().v("开始新的session(%s): ", g.id, g)) : r().v("延续上一次session(%s): %s ", g.id, s.toLocaleTimeString(), g), 
                    t;
                },
                pause: function() {
                    p();
                },
                getCurrentSessionId: function() {
                    return (g || {}).id;
                },
                getCurrentSession: function() {
                    return g;
                },
                cloneCurrentSession: function() {
                    return i(g);
                }
            };
        }
        function t(e) {
            var t = {};
            for (var n in e) t[n] = e[n];
            return r().v("query: ", e), t;
        }
        function n(e) {
            try {
                var n = (g || {}).options || {}, a = u.assign({}, t(e.query));
                a.path = e.path || n.path, a.scene = e.scene ? s.getPlatformType() + "_" + e.scene : n.scene;
                var o = e.referrerInfo;
                o && (a.referrerAppId = o.appId), r().v("session options: ", a);
                var i = c.getGlobalValue("aplus"), p = i.getMetaInfo("globalproperty"), l = Date.now();
                g = {
                    id: u.getRandomStr(10) + l,
                    start_time: l,
                    options: a,
                    state_s: 1
                }, p && (g.gp = p);
            } catch (e) {
                r().e("生成新session失败: ", e);
            }
        }
        function p() {
            if (g) {
                var e = new Date();
                g.end_time = e.getTime(), "number" != typeof g.duration && (g.duration = 0), g.duration = g.end_time - f, 
                g.state_s = 0, a().set(o.CURRENT_SESSION, g), r().v("退出会话(%s): %s ", g.id, e.toLocaleTimeString(), g);
            }
        }
        var l = null, f = null, g = null;
        return function() {
            return l || (l = e()), l;
        };
    }();
}, function(e, t, n) {
    var a = n(9), r = n(10), o = n(16), s = n(12), i = n(11);
    e.exports = function() {
        function e() {
            var e = a.getContext();
            this.load = function(t) {
                u ? (e.removeStorage({
                    key: n
                }), r(t) && t()) : (n = "aplus_cache_" + i.getAppKey() || "", e.getStorage({
                    key: n,
                    success: function(a) {
                        u = a && a.data ? o.parse(a.data) || {} : {}, c = !0, e.removeStorage({
                            key: n
                        }), r(t) && t();
                    },
                    fail: function(a) {
                        s().v(n + ": " + a.errMsg), u = {}, c = !0, e.removeStorage({
                            key: n
                        }), r(t) && t();
                    }
                }));
            }, this.save = function() {
                u && e.setStorage({
                    key: n,
                    data: o.stringfy(u)
                });
            }, this.set = function(e, t) {
                u && (u[e] = t);
            }, this.get = function(e) {
                return (u || {})[e];
            }, this.remove = function(e) {
                u && u[e] && delete u[e];
            }, this.getAll = function() {
                return u;
            }, this.clear = function() {
                u = null;
            }, this.has = function(e) {
                return !!this.get(e);
            }, this.isLoaded = function() {
                return c;
            };
        }
        var t = null, n = "", u = null, c = !1;
        return function() {
            return t || (t = new e()), t;
        };
    }();
}, function(e, t) {
    t.stringfy = function(e) {
        if (e) try {
            return JSON.stringify(e);
        } catch (e) {}
        return "";
    }, t.parse = function(e) {
        if (e) try {
            return JSON.parse(e);
        } catch (e) {}
        return null;
    }, t.parseToArray = function(e) {
        if (e) try {
            return JSON.parse(e);
        } catch (e) {}
        return [];
    };
}, function(e, t, n) {
    t.getRandomStr = function(e) {
        for (var t = "", n = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z" ], a = 0; a < Number(e); a++) {
            var r = Math.round(Math.random() * (n.length - 1));
            t += n[r];
        }
        return t;
    }, t.startsWith = function(e, t) {
        return !(!e || !t || 0 === t.length || t.length > e.length) && e.substr(0, t.length) === t;
    }, t.assign = function(e) {
        if (void 0 === e || null === e) throw new TypeError("Cannot convert undefined or null to object");
        for (var t = Object(e), n = 1; n < arguments.length; n++) {
            var a = arguments[n];
            if (a) for (var r in a) Object.prototype.hasOwnProperty.call(a, r) && (t[r] = a[r]);
        }
        return t;
    }, t.checkEvent = function(e, t) {
        var a = n(3), r = n(12);
        if (!e || "string" != typeof e) return r().e('please check trackEvent id. id should be "string" and not null'), 
        !1;
        var o = [ "id", "du" ], s = {};
        if (o.forEach(function(e) {
            s[e] = 1;
        }), s[e]) return r().e("eventId不能与以下保留字冲突: " + o.join(",")), !1;
        if (e.length > a.MAX_EVENTID_LENGTH) return r().e("The maximum length of event id shall not exceed " + a.MAX_EVENTID_LENGTH), 
        !1;
        if (t && ("object" != typeof t || Array.isArray(t)) && "string" != typeof t) return r().e("please check trackEvent properties. properties should be string or object(not include Array)"), 
        !1;
        if ("object" == typeof t) {
            var i = 0;
            for (var u in t) if ({}.hasOwnProperty.call(t, u)) {
                if (u.length > a.MAX_PROPERTY_KEY_LENGTH) return r().e("The maximum length of property key shall not exceed " + a.MAX_PROPERTY_KEY_LENGTH), 
                !1;
                if (i >= a.MAX_PROPERTY_KEYS_COUNT) return r().e("The maximum count of properties shall not exceed " + a.MAX_PROPERTY_KEYS_COUNT), 
                !1;
                if (s[u]) return r().e("属性中的key不能与以下保留字冲突: " + o.join(",")), !1;
                i += 1;
            }
        }
        return !0;
    };
    var a = n(7);
    t.deleteInfo = function(e, t) {
        return a(t, function(t) {
            delete e[t];
        }), e;
    }, t.checkEmptyObj = function(e) {
        return "object" != typeof e || 0 === Object.keys(e).length;
    }, t.DataType = {
        HALF_SESSION: "half_session",
        CLOSE_SESSION: "close_session",
        EKV: "ekv",
        ENTER_PAGE: "enter_page",
        LEAVE_PAGE: "leave_page"
    }, t.AccessType = {
        MOBILE_NETWORK_2G: "2g",
        MOBILE_NETWORK_3G: "3g",
        MOBILE_NETWORK_4G: "4g",
        MOBILE_NETWORK_NONE: "none"
    };
}, function(e, t, n) {
    var a = n(15), r = n(12), o = n(3), s = n(19);
    e.exports = function() {
        function e() {
            if (p.length) {
                var e = a().get(o.EKVS);
                n(e) + p.length <= o.EVENT_MAX_COUNT && (e = t(e, p), a().set(o.EKVS, e));
            }
        }
        function t(e, t) {
            e = e || {};
            var n = e[c];
            return s(n) && n.length ? e[c] = n.concat(t) : e[c] = [].concat(t), e;
        }
        function n(e) {
            var t = 0;
            for (var n in e) s(e[n]) && (t += e[n].length);
            return t;
        }
        function i() {
            return {
                addEvent: function(t) {
                    t && (c ? (p.unshift(t), p.length > o.MEMORY_MAX_COUNT && (e(c), p.length = 0)) : (r().w("session id is null: ", c), 
                    l.unshift(t)));
                },
                setSessionId: function(e) {
                    if (c = e, r().v("setSessionId: ", c), s(l) && l.length && c) {
                        for (var t = 0; t < l.length; t++) this.addEvent(l[t]);
                        l.length = 0;
                    }
                },
                getEkvs: function() {
                    var e = a().get(o.EKVS);
                    return p && p.length && (e = t(e, p)), e;
                },
                clear: function() {
                    a().remove(o.EKVS), p.length = 0, l.length = 0;
                }
            };
        }
        var u, c, p = [], l = [];
        return function() {
            return u || (u = i()), u;
        };
    }();
}, function(e, t) {
    "use strict";
    e.exports = function(e) {
        return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
    };
}, function(e, t, n) {
    var a = n(21), r = n(15), o = n(3), s = n(12), i = n(22), u = n(23), c = n(27), p = n(10), l = n(28), f = n(13), g = n(11), d = 50, h = n(2);
    e.exports = function() {
        function e(e, t, r) {
            t = t || {};
            var s = i(e);
            if (s) {
                var u = n(2), c = u.getGlobalValue(o.APLUS), f = c._aplus_client || {};
                s.header = l.assign(s.header, a.getNetInfo(f)), s.noCache = t.noCache, P.enqueue(s);
            }
            p(r) && r();
        }
        function t(e) {
            var n = P.front(), a = function() {
                P.dequeue(), t(e);
            }, r = function() {
                var n = P.dequeue();
                n && !n.noCache && S.push(n), t(e);
            };
            n ? u(n, a, r) : (_(), e());
        }
        function _() {
            S.forEach(function(e) {
                P.enqueue(e);
            }), S.length = 0;
        }
        function v(e) {
            if (b) return void s().v("队列正在发送中");
            b = !0;
            var n = function() {
                b = !1, p(e) && e();
            };
            t(n);
        }
        function m() {
            this.send = function(e, t, n) {
                e ? this.add(e, t, function() {
                    v(n);
                }) : v(n);
            }, this.add = function(t, n, a) {
                var r = h.getGlobalValue(o.APLUS);
                g.checkOpenid(r.getMetaInfo(o._ANONY_ID)) && e(t, n, a);
            }, this.load = function() {
                var e = r().get(o.REQUESTS);
                e && e.length && e.forEach(function(e) {
                    P.enqueue(e);
                }), r().remove(o.REQUESTS);
            }, this.save = function() {
                r().set(o.REQUESTS, f(P.items())), P.clear();
            };
        }
        var y = null, b = !1, S = [], P = new c(d);
        return function() {
            return y || (y = new m()), y;
        };
    }();
}, function(e, t, n) {
    var a = n(9), r = n(3), o = n(15), s = n(2), i = n(17), u = n(11);
    t.getNetInfo = function(e) {
        var t = {}, n = e.networkType;
        switch ("none" === n && (n = "unknown"), n = n ? n.toLowerCase() : "") {
          case i.AccessType.MOBILE_NETWORK_4G:
            t.access_subtype = "LTE", t.access = "4G";
            break;

          case i.AccessType.MOBILE_NETWORK_3G:
            t.access_subtype = "CDMA", t.access = "3G";
            break;

          case i.AccessType.MOBILE_NETWORK_2G:
            t.access_subtype = "GRPS", t.access = "2G";
            break;

          default:
            t.access = n, delete t.access_subtype;
        }
        return t;
    }, t.getHeaderInfo = function() {
        var e = {}, t = s.getGlobalValue(r.APLUS), n = t.globalConfig || {}, i = t._aplus_client || {}, c = o().get(r.IMPRINT);
        c && (e.imprint = c), e.device_type = "Phone", e.sdk_version = n.lver, e.appkey = u.getAppKey(), 
        e.device_info = "", e.appid = i.appId, e.app_env = i.appEnv, e.app_version = t.getMetaInfo("appVersion") || "devtools";
        var p = t.getMetaInfo("aplus-global-args");
        p && p.debugId && (e.miniappDebugId = p.debugId);
        var l = i || {};
        l.safeArea = l.safeArea || {};
        var f = l.model || "", g = l.platform || "", d = l.brand || "", h = d.toLowerCase();
        e.sdk_type = a.getSdkType(), e.platform = a.getPlatformType(), e.platform_sdk_version = l.SDKVersion, 
        e.platform_version = l.platformVersion;
        var _ = Math.round(l.screenWidth * l.pixelRatio), v = Math.round(l.screenHeight * l.pixelRatio);
        e.resolution = _ > v ? _ + "*" + v : v + "*" + _, e.pixel_ratio = l.pixelRatio, 
        e.os = g, e.font_size_setting = l.fontSizeSetting, e.device_model = f, e.device_brand = d, 
        e.device_manufacturer = h, e.device_manuid = f, e.device_name = f, e.os_version = l.os_version, 
        e.language = l.language;
        var m = this.getNetInfo(i);
        return e.access = m.access, m.access_subtype && (e.access_subtype = m.access_subtype), 
        e;
    };
}, function(e, t, n) {
    function a() {
        var e = null, t = s().cloneCurrentSession();
        return t && (e = {
            header: {
                st: "1"
            },
            analytics: {
                sessions: [ t ]
            }
        }), e;
    }
    function r() {
        var e = null, t = {}, n = s().cloneCurrentSession();
        n && (t.sessions = [ n ]);
        var a = i().getEkvs();
        return a && (t.ekvs = c(a), i().clear()), (t.sessions || t.ekvs) && (e = {
            analytics: t
        }), e;
    }
    function o() {
        var e = null, t = i().getEkvs();
        return t && (e = {
            analytics: {
                ekvs: c(t)
            }
        }, i().clear()), e;
    }
    var s = n(14), i = n(18), u = n(17), c = n(13);
    e.exports = function(e) {
        var t = null;
        switch (e) {
          case u.DataType.HALF_SESSION:
            t = a();
            break;

          case u.DataType.CLOSE_SESSION:
            t = r();
            break;

          case u.DataType.EKV:
            t = o();
        }
        return t;
    };
}, function(e, t, n) {
    function a() {
        var e = d.getGlobalValue(_.APLUS), t = e.getMetaInfo(_.APLUS_PV_DOMAIN), n = i.getLogDomain();
        if (!t || !n) return l().w("current request domain invalid, please check your aplus-rhost-v value inside metainfo!"), 
        "";
        var a = [ "//", t, n ].join(""), r = _.HTTPS;
        return /(\d+\.){3,}\d+/.test(a) && (r = "http:"), a = r + a;
    }
    function r(e) {
        var t = i.getContext(), n = e.success, a = e.fail, r = !1, o = null;
        e.success = function(e) {
            r || (o && clearTimeout(o), v(n) && n(e));
        }, e.fail = function() {
            r || (o && clearTimeout(o), v(a) && a(!1));
        };
        try {
            t.request(e);
        } catch (t) {
            try {
                dd && dd.httpRequest(e);
            } catch (e) {
                l().w("请求发送失败: ", e);
            }
        }
        o = setTimeout(function() {
            o && clearTimeout(o), r = !0, v(a) && a(r);
        }, e.timeout || m);
    }
    function o(e) {
        e && (p.set(e), p.save(), l().v("imprint: ", p.getImpObj()));
    }
    function s() {
        var e = i.getSdkType() + "/json", t = !1;
        try {
            my && (t = !0);
        } catch (e) {}
        return t ? {
            headers: {
                "Content-Type": e,
                "Msg-Type": e
            }
        } : {
            header: {
                "Content-Type": e,
                "Msg-Type": e
            }
        };
    }
    var i = n(9), u = n(21), c = n(24), p = n(25), l = n(12), f = n(16), g = n(26), d = n(2), h = n(17), _ = n(3), v = n(10), m = 5e3;
    e.exports = function(e, t, n, m) {
        var y = d.getGlobalValue(_.APLUS), b = u.getHeaderInfo();
        if ("my" === i.getPlatformType() || "taobao" === i.getPlatformType() ? (b.id_type = "alipay_id", 
        b.id_tracking = {
            alipay_id: y.getMetaInfo(_._ANONY_ID) || "",
            unionid: y.getMetaInfo("_dev_id") || "",
            userId: y.getMetaInfo(_._USER_ID) || ""
        }) : (b.id_type = "openid", b.id_tracking = {
            openid: y.getMetaInfo(_._ANONY_ID) || "",
            unionid: y.getMetaInfo("_dev_id") || "",
            userId: y.getMetaInfo(_._USER_ID) || ""
        }), p.get() && (b[_.IMPRINT] = p.get()), e.analytics) {
            var S = y.getMetaInfo(_._USER_ID), P = y.getMetaInfo("_user_nick");
            e.analytics.active_user = {
                puid: S,
                provider: P
            };
        }
        e.header = h.assign(b, e.header, {
            ts: Date.now(),
            traceId: h.getRandomStr(10) + Date.now() + h.getRandomStr(9)
        });
        var A = c(e), I = f.stringfy(A), C = a(), T = {
            url: C,
            method: "POST",
            data: g.encode(I),
            success: function(a) {
                var r = a.code || a.status || a.statusCode;
                200 === r || 413 === r ? (l().i("数据发送成功: ", e, I), o((a.data || {}).imprint), v(t) && t(a)) : (l().w("数据发送失败: ", I), 
                v(n) && n());
            },
            fail: function(e) {
                l().w("超时: ", I), v(n) && n();
            },
            complete: function() {
                v(m) && m();
            }
        };
        r(h.assign(T, s()));
    };
}, function(e, t) {
    function n(e, t) {
        var n = a(e, t);
        return e && e.id_tracking && (n[t.id_tracking || "id_tracking"] = a(e.id_tracking, i)), 
        n;
    }
    function a(e, t) {
        var n = {};
        for (var a in e) t[a] ? n[t[a]] = e[a] : n[a] = e[a];
        return n;
    }
    function r(e, t) {
        var n = {};
        if (e) for (var a in e) e[a] && (n[t[a]] = e[a]);
        return n;
    }
    var o = {
        sessions: "sn",
        ekvs: "e",
        active_user: "active_user"
    }, s = {
        sdk_type: "sdt",
        access: "ac",
        access_subtype: "acs",
        device_model: "dm",
        language: "lang",
        device_type: "dt",
        device_manufacturer: "dmf",
        device_name: "dn",
        platform_version: "pv",
        id_type: "it",
        font_size_setting: "fss",
        os_version: "ov",
        device_manuid: "did",
        platform_sdk_version: "psv",
        device_brand: "db",
        appkey: "ak",
        _id: "id",
        id_tracking: "itr",
        imprint: "imp",
        sdk_version: "sv",
        resolution: "rl",
        testToken: "ttn",
        miniappDebugId: "dk",
        pixel_ratio: "pr"
    }, i = {
        uuid: "ud",
        unionid: "und",
        openid: "od",
        anonymousid: "nd",
        alipay_id: "ad",
        device_id: "dd",
        userid: "puid"
    };
    e.exports = function(e) {
        return {
            h: n(e.header, s),
            a: r(e.analytics, o)
        };
    };
}, function(e, t, n) {
    function a() {
        var e = "", t = this;
        this.set = function(t) {
            e = t;
        }, this.get = function() {
            return e;
        }, this.getImpObj = function() {
            return o.parse(s.decode(e));
        }, this.getItem = function(e) {
            var n = t.getImpObj();
            return n ? n[e] || "" : "";
        }, this.load = function() {
            e = r().get(i.IMPRINT);
        }, this.save = function() {
            e && r().set(i.IMPRINT, e);
        };
    }
    var r = n(15), o = n(16), s = n(26), i = n(3), u = new a();
    e.exports = u;
}, function(e, t) {
    var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = function(e) {
        for (var t = {}, n = 0, a = e.length; n < a; n++) t[e.charAt(n)] = n;
        return t;
    }(n), r = String.fromCharCode, o = function(e) {
        var t;
        return e.length < 2 ? (t = e.charCodeAt(0), t < 128 ? e : t < 2048 ? r(192 | t >>> 6) + r(128 | 63 & t) : r(224 | t >>> 12 & 15) + r(128 | t >>> 6 & 63) + r(128 | 63 & t)) : (t = 65536 + 1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320), 
        r(240 | t >>> 18 & 7) + r(128 | t >>> 12 & 63) + r(128 | t >>> 6 & 63) + r(128 | 63 & t));
    }, s = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, i = function(e) {
        return e.replace(s, o);
    }, u = function(e) {
        var t = [ 0, 2, 1 ][e.length % 3], a = e.charCodeAt(0) << 16 | (e.length > 1 ? e.charCodeAt(1) : 0) << 8 | (e.length > 2 ? e.charCodeAt(2) : 0), r = [ n.charAt(a >>> 18), n.charAt(a >>> 12 & 63), t >= 2 ? "=" : n.charAt(a >>> 6 & 63), t >= 1 ? "=" : n.charAt(63 & a) ];
        return r.join("");
    }, c = function(e) {
        return e.replace(/[\s\S]{1,3}/g, u);
    }, p = function(e) {
        return c(i(e));
    }, l = function(e, t) {
        return t ? p(String(e)).replace(/[+\/]/g, function(e) {
            return "+" == e ? "-" : "_";
        }).replace(/\=/g, "") : p(String(e));
    }, f = new RegExp([ "[À-ß][-¿]", "[à-ï][-¿]{2}", "[ð-÷][-¿]{3}" ].join("|"), "g"), g = function(e) {
        switch (e.length) {
          case 4:
            var t = (7 & e.charCodeAt(0)) << 18 | (63 & e.charCodeAt(1)) << 12 | (63 & e.charCodeAt(2)) << 6 | 63 & e.charCodeAt(3), n = t - 65536;
            return r((n >>> 10) + 55296) + r((1023 & n) + 56320);

          case 3:
            return r((15 & e.charCodeAt(0)) << 12 | (63 & e.charCodeAt(1)) << 6 | 63 & e.charCodeAt(2));

          default:
            return r((31 & e.charCodeAt(0)) << 6 | 63 & e.charCodeAt(1));
        }
    }, d = function(e) {
        return e.replace(f, g);
    }, h = function(e) {
        var t = e.length, n = t % 4, o = (t > 0 ? a[e.charAt(0)] << 18 : 0) | (t > 1 ? a[e.charAt(1)] << 12 : 0) | (t > 2 ? a[e.charAt(2)] << 6 : 0) | (t > 3 ? a[e.charAt(3)] : 0), s = [ r(o >>> 16), r(o >>> 8 & 255), r(255 & o) ];
        return s.length -= [ 0, 0, 2, 1 ][n], s.join("");
    }, _ = function(e) {
        return e.replace(/[\s\S]{1,4}/g, h);
    }, v = function(e) {
        return d(_(e));
    }, m = function(e) {
        return v(String(e).replace(/[-_]/g, function(e) {
            return "-" == e ? "+" : "/";
        }).replace(/[^A-Za-z0-9\+\/]/g, ""));
    };
    t.encode = l, t.decode = m;
}, function(e, t, n) {
    var a = n(12);
    e.exports = function(e) {
        var t = e, n = [];
        this.enqueue = function(e) {
            "number" == typeof t && this.size() >= t && this.dequeue(), n.push(e);
        }, this.dequeue = function() {
            return n.shift();
        }, this.front = function() {
            return n[0];
        }, this.isEmpty = function() {
            return 0 === n.length;
        }, this.clear = function() {
            n.length = 0;
        }, this.size = function() {
            return n.length;
        }, this.items = function() {
            return n;
        }, this.print = function() {
            a().v("---queue: ", n.toString());
        };
    };
}, function(e, t, n) {
    "use strict";
    t.assign = n(29), t.makeCacheNum = function() {
        return Math.floor(268435456 * Math.random()).toString(16);
    }, t.isStartWith = function(e, t) {
        return 0 === e.indexOf(t);
    }, t.isEndWith = function(e, t) {
        var n = e.length, a = t.length;
        return n >= a && e.indexOf(t) == n - a;
    }, t.any = function(e, t) {
        var n, a = e.length;
        for (n = 0; n < a; n++) if (t(e[n])) return !0;
        return !1;
    }, t.isNumber = function(e) {
        return "number" == typeof e;
    }, t.isNaN = function(e) {
        return isNaN ? isNaN(e) : e !== e;
    }, t.isContain = function(e, t) {
        return e.indexOf(t) > -1;
    };
    var a = function(e) {
        var t, n = e.constructor === Array ? [] : {};
        if ("object" == typeof e) {
            if (JSON && JSON.parse) t = JSON.stringify(e), n = JSON.parse(t); else for (var r in e) n[r] = "object" == typeof e[r] ? a(e[r]) : e[r];
            return n;
        }
    };
    t.cloneDeep = a;
    var r = function() {
        for (var e, t = /[?&]([^=#]+)=([^&#]*)/g, n = window.location.href, a = {}; e = t.exec(n); ) a[e[1]] = e[2];
        return a;
    };
    t.getUrlParams = r;
    var o = function(e) {
        if (!e) return !0;
        for (var t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
        return !0;
    };
    t.isEmptyObject = o;
}, function(e, t) {
    e.exports = function(e, t) {
        return "function" != typeof Object.assign ? function(e) {
            for (var t = Object(e), n = 1; n < arguments.length; n++) {
                var a = arguments[n];
                if (null !== a) for (var r in a) Object.prototype.hasOwnProperty.call(a, r) && (t[r] = a[r]);
            }
            return t;
        }(e, t) : Object.assign({}, e, t);
    };
}, function(e, t, n) {
    function a(e, t) {
        if (!e) return "";
        var n = [];
        for (var a in t) n.push(a + "=" + t[a]);
        var r = n.join("&");
        return r ? e + "?" + r : e;
    }
    var r = n(2), o = "", s = {};
    t.getCurrentPagePath = function() {
        return o;
    }, t.setCurrentPath = function(e) {
        e && (o = e);
    }, t.getPageQuery = function(e) {
        if (e) return s[e];
    }, t.setPageQuery = function(e, t) {
        e && (s[e] = t);
    }, t.getFullPath = function(e) {
        return a(o, s[e]);
    }, t.getPageName = function(e) {
        var t = r.getGlobalValue("aplus"), n = t.getMetaInfo("pageConfig"), a = e || o;
        try {
            if (n && "object" == typeof n) for (var s in n) {
                if (s === a) break;
                if (n[s] && n[s].regRule) {
                    a = n[s].regRule.test(e) ? s : a;
                    break;
                }
            }
        } catch (e) {}
        return n[a];
    }, t.getPageCode = function(e) {
        return (this.getPageName(e) || {}).pageName;
    }, t.getVTRealtimeCode = function() {
        if (o) {
            var e = s[o] || {}, t = /^\$vt_/, n = decodeURIComponent(e.scene);
            return n && t.test(n) && n.replace(t, "");
        }
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        var t = {};
        try {
            P(e, function(e, n) {
                0 === e.indexOf("utm_") && (t[e] = n);
            });
        } catch (e) {}
        return t;
    }
    function r(e, t) {
        var n = y.getContext(), a = E.getCurrentPage(), r = a.route || a.is || "", o = a.options || {}, s = I.obj2param(o, !0);
        s && (r = r + "?" + s), e.query || (e.query = {}), e.query.$$_share_uid = n.aplus.getMetaInfo("_anony_id") || n.aplus.__ETAG__CNA__ID__, 
        e.query.$$_utm_medium = 3, e.query = A.assign({}, o, e.query);
        var i = e.path || r, u = "$$_share_uid=" + e.query.$$_share_uid + "&$$_utm_medium=3";
        return i.indexOf("?") > -1 ? e.path = i + "&" + u : e.path = i + "?" + u, e.status = "ready", 
        n.aplus_queue.push({
            action: b.PUBLISH,
            arguments: [ t, e ]
        }), e;
    }
    function o() {
        var e = y.getContext(), t = {
            status: "ready"
        };
        e.aplus_queue.push({
            action: b.PUBLISH,
            arguments: [ "onPullDownRefresh", t ]
        });
    }
    function s() {
        var e = y.getContext(), t = this, n = {
            status: "ready",
            context: t
        };
        e.aplus_queue.push({
            action: b.PUBLISH,
            arguments: [ "onReachBottom", n ]
        });
    }
    function i(e) {
        var t = y.getContext();
        try {
            T.setCurrentPath(this.route), e && T.setPageQuery(this.route, e), C().i("Page onLoad: ", this.route, e);
            var n = this;
            S.onAplusReady(t.aplus_queue, b.SUBSCRIBE, function() {
                t.aplus.appendMetaInfo(b.GLOBAL_PROPERTY, a(e)), t.aplus_queue.push({
                    action: b.PUBLISH,
                    arguments: [ "onLoad", {
                        status: "ready",
                        context: n
                    } ]
                });
                var r = E.getCurrentPage();
                S.resetFn(r, "setData", function(e) {
                    t.aplus_queue.push({
                        action: b.PUBLISH,
                        arguments: [ "onPageDataChanged", {
                            data: e,
                            context: n
                        } ]
                    });
                });
            });
        } catch (e) {
            C().w("onPageLoad: ", e);
        }
    }
    function u() {
        var e = y.getContext();
        try {
            T.setCurrentPath(this.route), S.onAplusReady(e.aplus_queue, b.SUBSCRIBE, function() {
                var t = this;
                e.aplus_queue.push({
                    action: b.PUBLISH,
                    arguments: [ "onShow", {
                        status: "ready",
                        context: t
                    } ]
                });
            });
        } catch (e) {
            C().w("onPageShow: ", e);
        }
    }
    function c() {
        var e = y.getContext();
        try {
            var t = this;
            e.aplus_queue.push({
                action: b.PUBLISH,
                arguments: [ "onReady", {
                    status: "ready",
                    context: t
                } ]
            });
        } catch (e) {
            C().w("onPageReady: ", e);
        }
    }
    function p() {
        var e = y.getContext();
        try {
            e.aplus_queue.push({
                action: b.PUBLISH,
                arguments: [ "onHide", {
                    status: "ready"
                } ]
            });
        } catch (e) {
            C().w("onPageHide: ", e);
        }
    }
    function l() {
        var e = y.getContext();
        try {
            e.aplus_queue.push({
                action: b.PUBLISH,
                arguments: [ "onHide", {
                    status: "ready"
                } ]
            });
        } catch (e) {
            C().w("onPageUnload: ", e);
        }
    }
    function f(e) {
        var t = y.getContext();
        t.aplus_queue.push({
            action: b.PUBLISH,
            arguments: [ "onAplusClk", {
                status: "ready",
                event: e,
                context: this
            } ]
        });
    }
    function g(e) {
        var t = y.getContext(), n = this;
        t.aplus_queue.push({
            action: b.PUBLISH,
            arguments: [ "onAplusTouch", {
                status: "ready",
                context: n,
                event: e
            } ]
        });
    }
    function d(e) {
        if (e.onShareAppMessage) {
            var t = e.onShareAppMessage;
            e.onShareAppMessage = function(e) {
                var n = t.call(this, e) || {};
                return r(n, "onShareAppMessage");
            };
        }
    }
    function h(e) {
        if (e.onShareTimeline) {
            var t = e.onShareTimeline;
            e.onShareTimeline = function(e) {
                var n = t.call(this, e) || {};
                return r(n, "onShareTimeline");
            };
        }
    }
    function _() {
        try {
            var e = Page;
            Page = function(t) {
                S.rewriteFn(t, "onShow", u), S.rewriteFn(t, "onHide", p), S.rewriteFn(t, "onUnload", l), 
                S.rewriteFn(t, "onLoad", i), S.rewriteFn(t, "onReady", c), S.rewriteFn(t, "onPullDownRefresh", o), 
                S.rewriteFn(t, "onReachBottom", s), S.rewriteFn(t, "onAplusClk", f), S.rewriteFn(t, "onAplusTouch", g), 
                d(t), h(t), e(t);
            };
        } catch (e) {
            C().w("Page 重写异常");
        }
    }
    function v() {
        try {
            var e = Component;
            Component = function(t) {
                try {
                    t.methods = t.methods || {};
                    var n = t.methods;
                    S.rewriteFn(n, "onShow", u), S.rewriteFn(n, "onHide", p), S.rewriteFn(n, "onUnload", p), 
                    S.rewriteFn(n, "onLoad", i), d(n), e(t);
                } catch (n) {
                    e(t);
                }
            };
        } catch (e) {
            C().w("Component 重写异常");
        }
    }
    function m(e, t, n) {
        [ "object", "function" ].indexOf(typeof e) > -1 ? n() : C().w("typeof " + t + " is not object cant watchExp.");
    }
    var y = n(2), b = n(3), S = n(6), P = n(32), A = n(17), I = n(33), C = n(12), T = n(30), E = n(9);
    e.exports = function() {
        return {
            run: function() {
                m(Page, "Page", _), m(Component, "Component", v);
            }
        };
    };
}, function(e, t) {
    "use strict";
    e.exports = function(e, t) {
        if (Object && Object.keys) for (var n = Object.keys(e), a = n.length, r = 0; r < a; r++) {
            var o = n[r];
            t(o, e[o]);
        } else for (var s in e) t(s, e[s]);
    };
}, function(e, t) {
    "use strict";
    function n(e, t) {
        var n, r, o, s = [], i = e.length;
        for (o = 0; o < i; o++) {
            n = e[o][0], r = e[o][1];
            var u = 0 === n.indexOf(a), c = u || t ? r : encodeURIComponent(r);
            s.push(u ? c : n + "=" + c);
        }
        return s.join("&");
    }
    t.arr2obj = function(e) {
        var t, n, a, r = {}, o = e.length;
        for (a = 0; a < o; a++) t = e[a][0], n = e[a][1], r[t] = n;
        return r;
    }, t.param2obj = function(e) {
        if ("object" == typeof e) return e;
        var t = {};
        if (!e || "string" != typeof e) return t;
        for (var n = e.split("&"), a = 0; a < n.length; a++) {
            var r = n[a], o = r.indexOf("="), s = r.split("="), i = r.length;
            if (2 === s.length) t[s[0]] = s[1] || ""; else if (o > 0) {
                var u = r.slice(0, o), c = r.slice(o + 1, i) || "";
                t[u] = c;
            } else t[s[0]] = "";
        }
        return t;
    };
    var a = "::-plain-::";
    t.s_plain_obj = a, t.arr2param = n, t.obj2param = function(e, t) {
        var n, r, o, s = [];
        for (n in e) n && e.hasOwnProperty(n) && ("object" == typeof e[n] ? (r = "" + this.obj2param(e[n]), 
        o = r) : (r = "" + e[n], o = n + "=" + r), t ? s.push(o) : s.push(0 === n.indexOf(a) ? r : o));
        return s.join("&");
    }, t.encodeGokeyValue = function(e) {
        return e;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), r = n(3), o = n(7);
    e.exports = function() {
        return {
            pushQueue: function(e, t) {
                var n = a.getGlobalValue("aplus_queue");
                n.push({
                    action: "aplus." + e,
                    arguments: t
                });
            },
            run: function() {
                var e = this, t = a.getGlobalValue(r.APLUS);
                o(r.openAPIs, function(n) {
                    t[n] = function() {
                        var t = [];
                        o(arguments, function(e) {
                            t.push(e);
                        });
                        var a = "enter" === n ? "_sendPV" : "_" + n;
                        e.pushQueue(a, t);
                    };
                });
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(9), r = n(2);
    e.exports = function() {
        return {
            _getNetworkType: function(e) {
                var t = a.getContext();
                t.getNetworkType ? t.getNetworkType({
                    success: function(t) {
                        e(t ? t.networkType : "");
                    }
                }) : e("");
            },
            _getSystemInfo: function(e) {
                var t = this, n = {}, r = t.SYSTEM_INFO || {};
                if (r && r.version) e(t.SYSTEM_INFO); else try {
                    a.getContext().getSystemInfo({
                        complete: function(a) {
                            a && a.version ? t._getNetworkType(function(n) {
                                a.networkType = n, t.SYSTEM_INFO = a, e(a);
                            }) : t._getNetworkType(function(t) {
                                n.networkType = t, e(n);
                            });
                        }
                    });
                } catch (t) {
                    e(n);
                }
            },
            _getAccountInfoSync: function() {
                var e = {};
                try {
                    var t = a.getContext();
                    if (t.getAccountInfoSync && t.canIUse("getAccountInfoSync")) {
                        var n = t.getAccountInfoSync(), r = n.miniProgram || {}, o = n.plugin || {};
                        e.appId = r.appId, e.appVersion = r.version || r.envVersion, e.pluginAppId = o.appId, 
                        e.pluginAppVersion = o.version;
                    } else if (t.getAppIdSync && t.canIUse("getAppIdSync")) {
                        var s = t.getAppIdSync() || {};
                        e.appId = s.appId || "";
                    }
                } catch (e) {}
                return e;
            },
            run: function(e, t) {
                var n = this;
                return this._getSystemInfo(function(e) {
                    e.userAgent = "-", e.os = e.platform ? e.platform.toLocaleUpperCase() : "", e.os_version = e.system ? e.system : "", 
                    e.access = e.brand ? e.brand : "";
                    var a = "";
                    e.host && "string" == typeof e.host.env && (a = e.host.env), e.host = a;
                    var o = n._getAccountInfoSync(), s = Object.assign({}, e, o), i = r.getGlobalValue("aplus");
                    i._aplus_client = s, t();
                }), 2e3;
            }
        };
    };
}, function(e, t, n) {
    var a = n(37), r = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = r.getGlobalValue("aplus");
                e.aplus_pubsub || (e.aplus_pubsub = a.create());
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(10), r = n(38), o = function(e) {
        for (var t = e.length, n = new Array(t - 1), a = 1; a < t; a++) n[a - 1] = e[a];
        return n;
    }, s = r.extend({
        callable: function(e) {
            if (!a(e)) throw new TypeError(e + " is not a function");
            return e;
        },
        create: function(e) {
            var t = new this();
            for (var n in e) t[n] = e[n];
            return t.handlers = [], t.pubs = {}, t;
        },
        setHandlers: function(e) {
            this.handlers = e;
        },
        subscribe: function(e, t) {
            this.callable(t);
            var n = this, a = n.pubs || {}, r = a[e] || [];
            if (r) for (var o = 0; o < r.length; o++) {
                var s = r[o]();
                t.apply(n, s);
            }
            var i = n.handlers || [];
            return e in i || (i[e] = []), i[e].push(t), n.setHandlers(i), n;
        },
        unsubscribe: function(e, t) {
            this.callable(t);
            try {
                var n = this.handlers[e];
                if (!n) return this;
                if ("object" == typeof n && n.length > 0) {
                    for (var a = 0; a < n.length; a++) {
                        var r = t.toString(), o = n[a].toString();
                        r === o && n.splice(a, 1);
                    }
                    this.handlers[e] = n;
                } else delete this.handlers[e];
            } catch (e) {}
            return this;
        },
        publish: function(e) {
            var t = o(arguments), n = this.handlers || [], r = n[e] ? n[e].length : 0;
            if (r > 0) for (var s = 0; s < r; s++) {
                var i = n[e][s];
                a(i) && i.apply(this, t);
            }
            return this;
        },
        cachePubs: function(e) {
            var t = this.pubs || {}, n = o(arguments);
            t[e] || (t[e] = []), t[e].push(function() {
                return n;
            });
        }
    });
    e.exports = s;
}, function(e, t, n) {
    "use strict";
    function a() {}
    var r = n(10);
    a.prototype.extend = function() {}, a.prototype.create = function() {}, a.extend = function(e) {
        return this.prototype.extend.call(this, e);
    }, a.prototype.create = function(e) {
        var t = new this();
        for (var n in e) t[n] = e[n];
        return t;
    }, a.prototype.extend = function(e) {
        var t = function() {};
        try {
            r(Object.create) || (Object.create = function(e) {
                function t() {}
                return t.prototype = e, new t();
            }), t.prototype = Object.create(this.prototype);
            for (var n in e) t.prototype[n] = e[n];
            t.prototype.constructor = t, t.extend = t.prototype.extend, t.create = t.prototype.create;
        } catch (e) {
            console && console.log(e);
        } finally {
            return t;
        }
    }, e.exports = a;
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(40)(this.options.context.aplus_config);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), r = n(3), o = n(41);
    e.exports = function(e) {
        var t = a.getGlobalValue(r.APLUS), n = t._$ = t._$ || {};
        n.is_terminal = !0, n.send_pv_count = 0, n.spm = {
            data: {}
        }, n.meta_info = o.qGet() || {}, t.globalConfig = e.globalConfig;
        for (var s in e.metaInfo) o.setMetaInfo(s, e.metaInfo[s]);
        t._$ = n, t.isInternational = function() {
            return !1;
        };
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        return s = p || {}, p;
    }
    function r() {
        return s || a();
    }
    function o(e, t) {
        return s || (s = {}), s[e] = t, !0;
    }
    var s, i = n(42), u = n(33), c = n(2), p = {}, l = "object", f = "string";
    t.getInfo = a, t.qGet = r, t.setMetaInfo = o;
    var g = function(e) {
        return s || (s = {}), s[e] || "";
    };
    t.getMetaInfo = g;
    var d = function(e, t) {
        if (e && t) {
            var n, a = function(n) {
                try {
                    var a = typeof t === f ? JSON.parse(t) : t;
                    s(e, Object.assign({}, n, a));
                } catch (e) {}
            }, r = function(n) {
                try {
                    var a = typeof t === f ? JSON.parse(t) : t;
                    s(e, n.concat(a));
                } catch (e) {}
            }, o = function(e) {
                e.constructor === Array ? r(e) : a(e);
            }, s = function(e, t) {
                h(e, t, {
                    from: "appendMetaInfo"
                });
            }, i = g(e);
            if ("aplus-exinfo" === e && (s(e, Object.assign({}, i, u.param2obj(t))), n = !0), 
            "aplus-page-properties" === e) {
                var c = t;
                if (i) for (var p in i) t[p] ? c[p] = Object.assign({}, i[p], t[p]) : c[p] = i[p];
                s(e, c), n = !0;
            }
            if (i) if (typeof i === l) o(i), n = !0; else try {
                var d = JSON.parse(i);
                typeof d === l && (o(d), n = !0);
            } catch (e) {}
            n || s(e, t);
        }
    };
    t.appendMetaInfo = d;
    var h = function(e, t) {
        var n, a, s = "OVERWRITE", u = s;
        if ("object" == typeof e ? (n = e.metaName, a = e.metaValue, u = e.mode || s) : (n = e, 
        a = t), u !== s) return d(n, a);
        if (o(n, a)) {
            var p = c.getGoldlogVal("_$") || {};
            p.meta_info = r();
            var l = c.setGoldlogVal("_$", p), f = [ "setMetaInfo", n, a, {} ];
            return i.doPubMsg(f), i.doCachePubs(f), l;
        }
    };
    t._setMetaInfo = h;
}, function(e, t, n) {
    "use strict";
    var a = n(2), r = "function", o = function() {
        var e = a.getGlobalValue("aplus"), t = e.aplus_pubsub || {}, n = typeof t.publish === r;
        return n ? t : "";
    };
    t.doPubMsg = function(e) {
        var t = o();
        t && typeof t.publish === r && t.publish.apply(t, e);
    }, t.doCachePubs = function(e) {
        var t = o();
        t && typeof t.cachePubs === r && t.cachePubs.apply(t, e);
    }, t.doSubMsg = function(e, t) {
        var n = o();
        n && typeof n.subscribe === r && n.subscribe(e, t);
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(44)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(45), r = n(2), o = n(3), s = n(50), i = n(28), u = n(30), c = n(9);
    e.exports = function() {
        var e = r.getContext(), t = r.getGlobalValue("aplus"), n = [], p = function(e) {
            function r(t, r) {
                s.isArray(t) && p.push({
                    config: r,
                    elements: t
                }), console.log("===> elements", t, p), p.length === n.length && a.watch_click(e.event, p);
            }
            n = t.getMetaInfo("aplus-auto-clk");
            var o = u.getPageCode(), p = [];
            s.isArray(n) && n.forEach(function(e) {
                i.isStartWith(e.cssSelector, ".") || (e.cssSelector = "." + e.cssSelector), e.spmB || (e.spmB = o);
                var t = c.getContext().createSelectorQuery().selectAll(e.cssSelector);
                "function" == typeof t.fields ? t.fields({
                    id: !0,
                    dataset: !0,
                    rect: !0,
                    scrollOffset: !0
                }, function(t) {
                    r(t, e);
                }).exec() : t.boundingClientRect().exec(function(t) {
                    r(t, e);
                });
            });
        };
        e.aplus_queue.push({
            action: o.SUBSCRIBE,
            arguments: [ "aplusReady", function(e) {
                "complete" === e && (n = t.getMetaInfo("aplus-auto-clk"));
            } ]
        }), e.aplus_queue.push({
            action: o.SUBSCRIBE,
            arguments: [ "onAplusClk", function(e) {
                "ready" === e.status && p(e);
            } ]
        });
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        var n = o.getGoldlogVal("_aplus_auto_exp") || {}, a = n.hashMap || {};
        for (var s in a) for (var i = a[s] || [], u = 0; u < i.length; u++) {
            var p = i[u] || {}, l = p.expConfig || {};
            if (e.cssSelector === l.cssSelector) {
                var f = c({
                    index: t
                }, l);
                if (f === p.hash_value) return r(p.dataset);
            }
        }
    }
    var r = n(13), o = n(2), s = n(11), i = n(7), u = n(46), c = n(48), p = n(49);
    t.watch_click = function(e, t) {
        function n(e, t) {
            var n = {};
            console.log("===> clkInfo", e), e && (e.changedTouches ? n = e.changedTouches[0] : e.detail && (n = e.detail));
            var a = n.clientX || 0, r = n.clientY || 0, o = t.top, s = t.bottom;
            return t.scrollTop && (o += t.scrollTop, s += t.scrollTop), t.left < a && a < t.right && o < r && r < s;
        }
        var c = o.getGlobalValue("aplus"), l = [];
        i(t, function(t) {
            for (var o = t.elements, i = t.config, u = 0; u < o.length; u++) {
                var f = o[u];
                if (n(e, f)) {
                    var g = u + 1, d = f.dataset || a(i, g) || {}, h = {}, _ = s.jsonLikeStr2JSON(d.trackerParams) || {};
                    if (c.globalConfig.isAli) if (h = r(c._$.spm.data || {}), document && c.getMetaInfo("aplus-vt-cfg-url")) {
                        var v = p.getDataSet(i, g - 1), m = v.spmC || i.spmC || "0", y = v.spmD || i.spmD || "0";
                        h.c = m, h.d = y, d = Object.assign(d, v);
                    } else {
                        var b = d.tracker || i.cssSelector.replace(/\'|\"|\;|\:|\=|\[|\]|\.|\#|\-|\/|\|/g, "");
                        if (h.c = b, h.c && "0" !== h.c) {
                            var S = "d" + g;
                            h.d = S;
                        }
                    } else h.b = i.spmB, i.spmC ? h.c = i.spmC : h.c = _.spmC ? encodeURIComponent(_.spmC) : "", 
                    i.spmD ? h.d = g ? i.spmD + "_" + g : i.spmD : h.d = _.spmD ? encodeURIComponent(_.spmD) : "";
                    l.push({
                        dataset: d,
                        config: i,
                        element: f,
                        spmData: h
                    });
                }
            }
        });
        var f = void 0;
        1 === l.length ? f = l[0] : l.length > 1 && (f = l.reduce(function(e, t) {
            var n = e, a = e.element, r = t.element;
            return r.top >= a.top && r.right <= a.right && r.bottom <= a.bottom && r.left >= a.left && (n = t), 
            n;
        })), f && u.pushEvent("CLK", f.dataset, f.config, f.element, f.spmData);
    };
}, function(e, t, n) {
    function a(e, t, n, a) {
        var r = o.getGlobalValue("aplus") || {}, u = r.getMetaInfo;
        if ("function" == typeof u) {
            var c = u(e), p = {};
            return "function" == typeof c && (p = c(t ? i(t) : {}, n, a)), s.param2obj(p);
        }
        return {};
    }
    function r(e, t) {
        var n = "";
        try {
            var a = new Number(e);
            n = parseFloat(a.toFixed(t));
        } catch (t) {
            n = e;
        }
        return n;
    }
    var o = n(2), s = n(33), i = n(13), u = n(19), c = n(38), p = n(47), l = {}, f = 3, g = "POST", d = "EXP", h = c.extend({
        push: function(e) {
            var t = o.getGlobalValue("aplus");
            for (this.buffer.push(e); this.buffer.length >= this.pkgSize; ) {
                var n = this.buffer.splice(0, this.pkgSize);
                n.length > 0 && t.combineRecord(this.logkey, d, n, this.method);
            }
        }
    });
    t.pushEvent = function(e, t, n, s, c) {
        var f = o.getGlobalValue("aplus"), h = n.props || [], _ = {}, v = {};
        if (t) for (var m in t) m.toLowerCase().match(/^data-/) ? v[m.toLowerCase().replace(/^data-/, "").replace(/-/g, "")] = t[m] : _[m] = t[m];
        if (h && u(h)) for (var y = 0; y < h.length; y++) {
            var b = h[y].toLowerCase().replace(/^data-/, "").replace(/-/g, "");
            _[h[y]] = v[b];
        } else _ = Object.assign({}, v);
        s && e === d && (_ = Object.assign({}, _, {
            _w: r(s.width, 2),
            _h: r(s.height, 2),
            _x: r(s.x, 2),
            _y: r(s.y, 2),
            _rate: r(s.viewabilityRate || s.intersectionRatio, 2),
            _viewability: "intersection"
        })), n._vt && (_._vt = n._vt);
        var S = e === d ? "aplus-auto-exp-userfn" : "aplus-auto-clk-userfn", P = a(S, s, n.cssSelector, c);
        P.spm || (f.globalConfig.isAli && c && c.a && c.b ? P.spm = [ c.a, c.b, c.c || "0", c.d || "0" ].join(".") : P.spm = c && c.b ? c : void 0);
        var A = {}, I = t.trackerParams || t["tracker-params"];
        if (I) try {
            var C = JSON.parse(I);
            _ = Object.assign(_, C), delete _.trackerParams, delete _.trackerparams;
        } catch (e) {}
        if ("EXP" === e && f.globalConfig.isAli && l[n.logkey]) {
            var T = Object.assign({}, _, P);
            A = Object.assign({}, {
                exargs: T
            }), p.log("自动曝光", n.logkey, T), l[n.logkey].push(i(A));
        } else A = Object.assign({}, _, P, n.customArgs), p.log("自动点击", n.logkey, A), f.record(n.logkey, e, A, g);
    }, t.watchRecord = function(e) {
        var t = o.getGlobalValue("aplus");
        t.globalConfig.isAli && e && e.forEach(function(e) {
            l.hasOwnProperty(e.logkey) || (l[e.logkey] = h.create({
                length: 0,
                buffer: [],
                logkey: e.logkey,
                pkgSize: "number" == typeof e.pkgSize && e.pkgSize || f,
                method: e.method || g
            }));
        });
    }, t.clearRecord = function() {
        var e = o.getGlobalValue("aplus");
        if (e.globalConfig.isAli) for (var t in l) {
            var n = l[t].buffer || [];
            n.length > 0 && (e.combineRecord(t, d, n, g), l[t].buffer = []);
        }
    };
}, function(e, t, n) {
    "use strict";
    var a = n(41), r = "[APLUS] -- ";
    t.logger = function(e) {
        e || (e = {});
        var t = e.level || "warn";
        console && console[t] && console[t](r + e.msg);
    }, t.log = function() {
        const e = a.getMetaInfo("debug");
        e && console.log.apply(console, [ r ].concat(Array.prototype.slice.apply(arguments)));
    }, t.debugLog = function(e) {
        var t = n(2).getGlobalValue("aplus");
        t && t.aplusDebug && this.logger(e);
    };
}, function(e, t) {
    e.exports = function(e, t) {
        var n = [ t.logkey, t.cssSelector ];
        return t.positionSelector && n.push(t.positionSelector), e.id && n.push(e.id), e.index >= 0 && n.push(e.index), 
        e.dataset && e.dataset.privateNodeId && delete e.dataset.privateNodeId, e.dataset && n.push(JSON.stringify(e.dataset)), 
        n = n.join("_");
    };
}, function(e, t, n) {
    "use strict";
    var a = n(11), r = n(28);
    t.getDataSet = function(e, t) {
        var n, o = {};
        n = r.isStartWith(e.cssSelector, ".") ? e.cssSelector.slice(1, e.cssSelector.length) : e.cssSelector;
        var s = document.getElementsByClassName(n);
        if (s && s.length > 0) {
            var i = s[t].dataset || {};
            for (var u in i) {
                var c = i[u];
                switch (typeof c) {
                  case "function":
                    o[u] = c();
                    break;

                  case "object":
                    o = Object.assign(o, c);
                    break;

                  case "string":
                    if ("trackerParams" === u) {
                        var p = a.jsonLikeStr2JSON(i.trackerParams);
                        o = Object.assign(o, p);
                    } else o[u] = c;
                    break;

                  case "number":
                  case "boolean":
                    o[u] = c;
                    break;

                  default:
                    continue;
                }
            }
        }
        return o;
    }, t.isRax = function() {
        return !!document;
    };
}, function(e, t) {
    "use strict";
    function n(e) {
        return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
    }
    function a(e) {
        var t = [];
        if (n(e)) for (var r = 0; r < e.length; r++) {
            var o = e[r];
            n(o) ? (e[r] = a(o), t = t.concat(e[r])) : t.push(o);
        }
        return t;
    }
    t.indexof = function(e, t) {
        var n = -1;
        try {
            n = e.indexOf(t);
        } catch (r) {
            for (var a = 0; a < e.length; a++) e[a] === t && (n = a);
        } finally {
            return n;
        }
    }, t.itemMatch = function(e, t) {
        var n = !1;
        try {
            if (!this.isArray(e)) return n;
            n = e.some(function(e) {
                return e && e.length > 0 && t.indexOf(e) !== -1;
            });
        } catch (r) {
            for (var a = 0; a < e.length; a++) if (t.indexOf(e[a]) !== -1) {
                n = !0;
                break;
            }
        }
        return n;
    }, t.isArray = n, t.flat = a;
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(52)();
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), r = n(53), o = n(54), s = n(3), i = n(9), u = {};
    e.exports = function() {
        function e(e, t, n) {
            var a = function(n, a) {
                if ("aplus-auto-exp" === n) {
                    var s = o.getAutoExpConfig(a);
                    if (JSON.stringify(s) === JSON.stringify(g)) return;
                    g = s, a && g && g.length > 0 && r.watch_exposure(e, g, t);
                }
            };
            c.aplus_queue.push({
                action: n,
                arguments: [ "setMetaInfo", a ]
            });
        }
        function t(e, t) {
            g = f.getMetaInfo("aplus-auto-exp"), setTimeout(function() {
                r.watch_exposure(e, g, t);
            }, 0);
        }
        function n(e) {
            try {
                var n = i.getCurrentPage(), a = n.route || n.is, r = u[a], o = JSON.stringify(e.data);
                r !== o && (u[a] = o, t(e.context, 0));
            } catch (e) {}
        }
        var c = a.getContext(), p = 0, l = 0, f = a.getGlobalValue("aplus");
        if (!f._aplus_auto_exp) {
            f._aplus_auto_exp = {
                hashMap: {}
            };
            var g = [];
            c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onShow", function(n) {
                    if ("ready" === n.status) {
                        e(n.context, 1, s.SUBSCRIBE), 0 === p ? (t(n.context, 1), p = 1) : t(n.context, 0);
                        try {
                            var a = i.getCurrentPage(), r = a.route || a.is;
                            u[r] = r;
                        } catch (e) {}
                    }
                } ]
            }), c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onAplusTouch", function(e) {
                    "ready" === e.status && (0 === l ? (l = 1, t(e.context, 1)) : n(e));
                } ]
            }), c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onPageDataChanged", function(e) {
                    setTimeout(function() {
                        n(e);
                    }, 200);
                } ]
            }), c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onHide", function(t) {
                    "ready" === t.status && (u = {}, p = 0, l = 0, e(t.context, 1, s.UNSUBSCRIBE), r.clear());
                } ]
            }), c.aplus_queue.push({
                action: s.SUBSCRIBE,
                arguments: [ "onUnload", function(e) {
                    "ready" === e.status && (u = {}, r.clear());
                } ]
            });
        }
    };
}, function(e, t, n) {
    "use strict";
    var a, r = n(2), o = n(54), s = n(13), i = n(9), u = n(28), c = n(11), p = n(7), l = n(50), f = n(30), g = n(46), d = n(48), h = n(49), _ = n(6), v = [];
    t.watch_exposure = function(e, t, n, m) {
        function y(r) {
            function o(e) {
                var t = c[0];
                t && !u.isStartWith(c[0], ".") && (t = "." + t);
                try {
                    var n = a.createSelectorQuery().selectAll(t);
                    "function" == typeof n.fields ? n.fields({
                        dataset: !0,
                        id: !0
                    }, function(t) {
                        l.isArray(t) && e({
                            elements: t,
                            type: "COMMON"
                        });
                    }).exec() : console.warn("该平台不支持自动曝光");
                } catch (e) {
                    console.warn("该平台不支持自动曝光, err = ", e);
                }
            }
            if (r < t.length) {
                var i = t[r];
                T = 0, v.forEach(function(e) {
                    e.subject[0] === i.cssSelector && e.subject[1] === i.positionSelector && (T = 1);
                });
                var c = [ i.cssSelector, i.positionSelector ];
                o(function(t) {
                    if (0 === T || 0 === n) {
                        var a = P(e);
                        a.subject = c, v.push(a), p(t.elements, function(e, t) {
                            e.index = t + 1 + "", b(e, i) || S(e, i);
                        }), A(a, i, function(e, t) {
                            _.getIndexByRect(t.cssSelector, e.boundingClientRect, function(n) {
                                var a = n + 1;
                                if (a) {
                                    var r = s(e);
                                    r.index = "" + a;
                                    var o = s(r.dataset);
                                    S({
                                        id: r.id,
                                        index: r.index,
                                        dataset: o
                                    }, t), I(r, o, i);
                                }
                            });
                        });
                    }
                    y(++r);
                });
            }
        }
        function b(e, t) {
            var n = d(e, t), a = e.index;
            return x[t.logkey] && x[t.logkey].forEach(function(e) {
                if (e.hash_value === n && e.index === a) return !0;
            }), !1;
        }
        function S(e, t) {
            var n = d(e, t);
            try {
                var a = e.index;
                if (x[t.logkey]) {
                    var r = 0;
                    x[t.logkey].forEach(function(t) {
                        t.hash_value === n && (r = 1, e.id && (t.id = e.id), e.dataset && (t.dataset = e.dataset), 
                        e.status && (t.status = e.status));
                    }), r || x[t.logkey].push({
                        id: e.id,
                        hash_value: n,
                        status: 0,
                        expConfig: t,
                        dataset: e.dataset,
                        index: a
                    });
                } else x[t.logkey] = [ {
                    id: e.id,
                    hash_value: n,
                    status: 0,
                    expConfig: t,
                    dataset: e.dataset,
                    index: a
                } ];
            } catch (e) {
                console.log("error === ", e);
            }
        }
        function P(e) {
            var t = {
                thresholds: [ o.AUTO_AT_VIEW_RATE ],
                initialRatio: 0
            }, n = !1;
            try {
                my && (n = !0);
            } catch (e) {}
            return n ? (t.selectAll = !0, a.createIntersectionObserver(t)) : (t.observeAll = !0, 
            a.createIntersectionObserver(e, t));
        }
        function A(e, t, n) {
            var a = t.cssSelector;
            a && !u.isStartWith(a, ".") && (a = "." + a), t.positionSelector ? e.relativeTo(t.positionSelector).observe(a, function(e) {
                try {
                    n(e, t);
                } catch (e) {
                    console.log("errorMessage: ", e);
                }
            }) : e.relativeToViewport().observe(a, function(e) {
                try {
                    n(e, t);
                } catch (e) {
                    console.log("errorMessage: ", e);
                }
            });
        }
        function I(e, t, n) {
            var a = r.getGlobalValue("aplus"), o = new Date().getTime(), i = C(o, e, n);
            if (i && i.length > 0) {
                var u = i[0], p = {}, l = c.jsonLikeStr2JSON(t.trackerParams || {}) || {}, d = u.index;
                if (a.globalConfig.isAli) if (p = s(a._$.spm.data || {}), h.isRax()) {
                    var _ = h.getDataSet(n, d - 1), v = _.spmC || n.spmC || "0", m = _.spmD || n.spmD || "0";
                    p.c = v, p.d = m, t = Object.assign(t, _);
                } else {
                    var y = t.tracker || n.cssSelector.replace(/\'|\"|\;|\:|\=|\[|\]|\.|\#|\-|\/|\|/g, "");
                    if (p.c = y, p.c && "0" !== p.c) {
                        var b = "d" + d;
                        p.d = b;
                    }
                } else f.getPageCode() && (p.b = f.getPageCode()), n.spmC ? p.c = n.spmC : p.c = l.spmC ? encodeURIComponent(l.spmC) : "", 
                n.spmD ? p.d = d ? n.spmD + "_" + d : n.spmD : p.d = l.spmD ? encodeURIComponent(l.spmD) : "";
                g.pushEvent("EXP", t, n, Object.assign({}, e, {
                    x: u.x,
                    y: u.y,
                    width: u.width,
                    height: u.height,
                    hash_value: u.hash_value
                }), p);
            }
        }
        function C(e, t, n) {
            var a = r.getGoldlogVal("_aplus_auto_exp") || {}, s = a.hashMap || {}, i = [];
            for (var u in s) for (var c = s[u] || [], p = 0; p < c.length; p++) {
                var l = d(t, n), f = c[p] || {};
                if (0 === f.status && f.expConfig && l === f.hash_value) {
                    var g = t.boundingClientRect || {};
                    if (g.width && g.height) {
                        f.dataset = t.dataset, f.x = g.left, f.y = g.top, f.width = g.width, f.height = g.height, 
                        f.size = g.width * g.height;
                        var h = o.AUTO_AT_VIEW_RATE;
                        t.intersectionRatio >= h && (f.exposureTime = e, f.status = 1, i.push(f));
                    }
                }
            }
            return i;
        }
        a && !m || (a = i.getContext());
        var T, E = r.getGoldlogVal("_aplus_auto_exp") || {}, x = E.hashMap || {};
        g.watchRecord(t), y(0);
    }, t.reset = function() {}, t.clear = function() {
        g.clearRecord();
        for (var e = 0; e < v.length; e++) v[e].disconnect();
        v = [];
        var t = r.getGoldlogVal("_aplus_auto_exp") || {}, n = t.hashMap || {};
        for (var a in n) delete n[a];
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        return aplus && aplus.getMetaInfo ? aplus.getMetaInfo(e) : o.getMetaCnt(e);
    }
    var r = n(50), o = n(55), s = n(12);
    t.DATA_APLUS_AE_KEY = "data-aplus-ae", t.DATA_APLUS_AC_KEY = "data-aplus-clk", t.DATA_APLUS_SPM_ANCHOR_ID_KEY = "data-spm-anchor-id", 
    t.DATA_APLUS_VT_ITEM_INDEX_KEY = "data-aplus-vt-pos", t.LOOP_TIME = 1e3, t.getDefaultRequestCfg = function() {
        return {
            method: "POST",
            pkgSize: 10
        };
    };
    var i = function(e) {
        var t = e;
        try {
            var n = a("aplus-auto-exp-visible");
            n && (t = parseFloat(n)), t <= 0 && (t = e);
        } catch (n) {
            t = e;
        } finally {
            return t;
        }
    };
    t.AUTO_AT_VIEW_RATE = i(.3);
    var u = function(e) {
        var t = e;
        try {
            var n = a("aplus-auto-exp-duration"), r = parseInt(n);
            r + "" != "NaN" && (t = r);
        } catch (e) {} finally {
            return t;
        }
    };
    t.EXP_DURATION = u(300);
    var c = function(e, t) {
        var n, o = [], i = [];
        try {
            n = t || a(e);
            var u = [];
            if (n && "string" == typeof n) try {
                u = JSON.parse(n);
            } catch (e) {
                u = JSON.parse(n.replace(/'/g, '"'));
            } else "object" == typeof n && n.constructor === Array && (u = n);
            if (u && u.constructor === Array) for (var c = 0; c < u.length; c++) {
                var p = u[c] || {}, l = p.logkey || "", f = p.tag ? p.tag : "", g = p.filter, d = p.cssSelector, h = d || f && g;
                if (!l || !h) throw new Error("meta " + e + " config error, " + JSON.stringify(p));
                g = "string" == typeof g ? g.split("=") : [];
                var _ = f;
                if (g.length >= 2 ? _ += "[" + g.shift() + '="' + decodeURIComponent(g.join("")) + '"]' : 1 == g.length && g[0] && (_ += "[" + decodeURIComponent(g[0]) + "]"), 
                d && (_ += d), p.elementSelector = _, r.indexof(i, _) > -1) throw new Error("meta " + e + " config error, tag_filter_cssSelector " + _ + " repeated");
                i.push(_), o.push(p);
            }
        } catch (e) {
            s().w(e);
        } finally {
            return o;
        }
    };
    t.getAutoExpConfig = function(e) {
        return c("aplus-auto-exp", e) || [];
    }, t.getAutoExpUserFn = function() {
        var e = a("aplus-auto-exp-userfn");
        if (e) {
            var t = window[e] || e;
            if ("function" == typeof t) return t;
        }
        return null;
    }, t.isThrottleWatchDom = function() {
        var e = !1;
        try {
            e = "throttle" === a("aplus-auto-exp-watchdom");
        } catch (e) {}
        return e;
    }, t.getAutoClkConfig = function(e) {
        return c("aplus-auto-clk", e) || [];
    }, t.getAutoClkUserFn = function() {
        var e = a("aplus-auto-clk-userfn");
        if (e) {
            var t = window[e] || e;
            if ("function" == typeof t) return t;
        }
        return null;
    };
}, function(e, t, n) {
    "use strict";
    function a(e) {
        return s = s || document.getElementsByTagName("head")[0], i && !e ? i : s ? i = s.getElementsByTagName("meta") : [];
    }
    function r(e, t) {
        var n, r, o, s = a(), i = s.length;
        for (n = 0; n < i; n++) r = s[n], u.tryToGetAttribute(r, "name") === e && (o = u.tryToGetAttribute(r, t || "content"));
        return o || "";
    }
    function o(e) {
        var t = {
            isonepage: "-1",
            urlpagename: ""
        }, n = e.qGet();
        if (n && n.hasOwnProperty("isonepage_data")) t.isonepage = n.isonepage_data.isonepage, 
        t.urlpagename = n.isonepage_data.urlpagename; else {
            var a = r("isonepage") || "-1", o = a.split("|");
            t.isonepage = o[0], t.urlpagename = o[1] ? o[1] : "";
        }
        return t;
    }
    var s, i, u = n(56);
    t.getMetaTags = a, t.getMetaCnt = r, t.getOnePageInfo = o;
}, function(e, t) {
    "use strict";
    t.tryToGetAttribute = function(e, t) {
        return e && e.getAttribute ? e.getAttribute(t) || "" : "";
    };
    var n = function(e, t, n) {
        if (e && e.setAttribute) try {
            e.setAttribute(t, n);
        } catch (e) {}
    };
    t.tryToSetAttribute = n, t.tryToRemoveAttribute = function(e, t) {
        if (e && e.removeAttribute) try {
            e.removeAttribute(t);
        } catch (a) {
            n(e, t, "");
        }
    };
}, function(e, t, n) {
    var a = n(2), r = n(19), o = n(3), s = n(9), i = n(12);
    e.exports = function() {
        return {
            resetLastPageSpm: function() {
                var e = a.getGlobalValue(o.APLUS, {}), t = e._$.spm || {};
                t.spm_cnt = "";
            },
            listen: function() {
                var e = this, t = a.getGlobalValue(o.APLUS_QUEUE, []);
                t.push({
                    action: o.SUBSCRIBE,
                    arguments: [ "onShow", function(e) {
                        if ("ready" === e.status) {
                            var t = a.getGlobalValue(o.APLUS, {}), n = t.getMetaInfo("pages"), i = s.getCurrentPage(), u = i.route || i.is;
                            if (r(n)) for (var c = 0; c < n.length; c++) {
                                var p = n[c];
                                if (p.matchUrl === u) {
                                    t.setPageSPM(p.spmA, p.spmB);
                                    break;
                                }
                            }
                        }
                    } ]
                }), t.push({
                    action: o.SUBSCRIBE,
                    arguments: [ "clearPageSPM", function() {
                        e.resetLastPageSpm();
                    } ]
                }), t.push({
                    action: o.SUBSCRIBE,
                    arguments: [ "setPageSPM", function(e) {
                        try {
                            var t = a.getGlobalValue(o.APLUS, {}), n = t._$.spm || {}, r = getCurrentPages() || [], s = e.spmCnt ? e.spmCnt.split(".") : [ n.data.a || "0", n.data.b || "0" ];
                            2 === s.length && (s = s.concat([ "0", "0" ]));
                            var u = s.join("."), c = r[r.length - 1], p = r[r.length - 2] || {}, l = r[r.length - 3] || {};
                            r.length > 0 && c && (r[r.length - 1].spm = u);
                            var f = n.data && n.data.a ? [ n.data.a, n.data.b, n.data.c || "0", n.data.d || "0" ].join(".") : "";
                            n.data.a = s[0] ? "" + s[0] : "0", n.data.b = s[1] ? "" + s[1] : "0", n.data.c = "0", 
                            n.data.d = "0", n.page_referrer = r.length > 1 && c ? c.route || c.is : "", n.spm_cnt = u;
                            var g = t.spm_orign || n.spm_orign;
                            n.spm_pre = e.spmPre || n.spm_url || l.spm || "", n.spm_url = e.spmUrl || f || p.spm || g || "", 
                            t._$.spm = n;
                        } catch (e) {
                            i().w("setPageSPM error, the errorInfo is ", e);
                        }
                    } ]
                });
            },
            run: function() {
                this.listen();
            }
        };
    };
}, function(e, t, n) {
    e.exports = function() {
        return {
            run: function() {
                var e = n(59), t = e.create();
                t.run(this.options);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        if (u().v("event: ", e, t), i.checkEvent(e, t)) {
            var a = n(62)(e, t);
            o().addEvent(a), s().send(i.DataType.EKV, {
                noCache: !1
            }, function() {
                u().i("event send success: ", e, a);
            });
        }
    }
    var r = n(60), o = n(18), s = n(20), i = n(17), u = n(12), c = n(13), p = n(28), l = n(2), f = n(9), g = n(3), d = n(30);
    e.exports = r.extend({
        handlerMiddleware: function(e) {
            var t = l.getGlobalValue("aplus");
            u().setDebug(!!t.getMetaInfo("DEBUG"));
            var n, r, o, s = e && e.userdata && e.userdata.logkey, h = e && e.userdata && e.userdata.gmkey, _ = e && e.what_to_send && e.what_to_send.logdata && e.what_to_send.logdata || {}, v = t.getMetaInfo("globalproperty");
            if ("CLK" === h || "EXP" === h || "OTHER" === h || s === g.APP_START || s === g.APP_END) {
                n = c(e && e.userdata && e.userdata.gokey) || {}, r = _.gokey || {};
                var m, y = {};
                "$$_share" === s && (y.refer_page = _.url, y.share_type = n.share_type), r.scene && (y.scene = f.getPlatformType() + "_" + r.scene), 
                r.targetAppKey && (y.targetAppKey = n.targetAppKey, delete n.targetAppKey), o = n["data-pagename"] || n.page_name || n.spm && n.spm.b || t.getPageName() || _.url || "", 
                y.page_name = o, y.url = _.url || "-", (n.page_name || n["data-pagename"]) && (delete n.page_name, 
                delete n["data-pagename"]), p.isEmptyObject(v) || (y.gp = v), n.spm && (y["spm-cnt"] = [ encodeURIComponent(o), n.spm.c, n.spm.d ].filter(function(e) {
                    return !!e;
                }).join("."), delete n.spm);
                var b = c(n);
                for (var S in b) "string" == typeof S && i.startsWith(S, "_") && (y[S] = b[S], delete n[S]);
                m = s === g.APP_START || s === g.APP_END ? p.assign(y, n) : p.assign(y, {
                    cusp: n
                }), a(s, m);
            } else if ("2001" === _.event_code) {
                var P = {}, A = g.PAGE_START;
                r = c(_.gokey) || {}, o = r.page_name || t.getPageName() || d.getPageCode(_.url) || _.url || "", 
                P.r = _.arg1 || _.logkey || "-", P.page_name = o, r._page_auto_pv ? (P.is_auto = 1, 
                P.url = r.path || "-", P.ref_url = r.referrer, delete r._page_auto_pv, delete r.referrer, 
                delete r.path, delete r.page_name) : (P.is_auto = 0, P.url = _.url || "-", P.ref_url = _.pre), 
                r.duration && (P.duration = r.duration, delete r.duration), p.isEmptyObject(v) || (P.gp = v), 
                r.scene && (P.scene = f.getPlatformType() + "_" + r.scene), r = i.deleteInfo(r, [ "_anony_id", "_dev_id", "_session_id", "_user_id", "_user_nick", "uaid", "pvid", "scene" ]), 
                P["spm-cnt"] = encodeURIComponent(o), r._page_auto_id && (A = r._page_auto_id, delete r._page_auto_id), 
                r.page_start && (P.page_start = r.page_start, delete r.page_start), a(A, p.assign(P, {
                    cusp: r
                }));
            }
        },
        run: function() {
            this.watchLOG();
        }
    });
}, function(e, t, n) {
    "use strict";
    var a = n(38), r = n(61), o = n(3);
    e.exports = a.extend({
        subscribeLogs: function(e, t) {
            r.pushIntoGoldlogQueue(o.SUBSCRIBE, [ e, function(e) {
                e.status === o.COMPLETE && t(e);
            } ]);
        },
        getLogicSymbol: function() {
            return "ALI" === this.format ? "&" : "||";
        },
        handlerMiddleware: function() {},
        watchLOG: function() {
            var e = this;
            e.subscribeLogs(o.MW_CHANGE_PV, function(t) {
                e.handlerMiddleware(t, "pv");
            }), e.subscribeLogs(o.MW_CHANGE_HJLJ, function(t) {
                e.handlerMiddleware(t, o.APLUS);
            });
        },
        run: function() {
            this.watchLOG();
        }
    });
}, function(e, t, n) {
    "use strict";
    var a = n(2);
    t.pushIntoGoldlogQueue = function(e, t) {
        var n = a.getGlobalValue("aplus_queue"), r = a.getGlobalValue("aplus"), o = e.split("."), s = r[o[1]], i = s ? s[o[2]] : null;
        r && 2 === o.length && s ? s.apply(r, t) : 3 === o.length && i ? i.apply(s, t) : n.push({
            action: e,
            arguments: t
        });
    };
}, function(e, t, n) {
    var a = n(2), r = n(28);
    e.exports = function(e, t) {
        if ("string" != typeof e) return null;
        var n = Object.create(null);
        n.id = e, t && t.ts || (n.ts = Date.now());
        var o = typeof t;
        if ("object" === o) for (var s in t) ({}).hasOwnProperty.call(t, s) && (n[s] = t[s]);
        var i = a.getGlobalValue("aplus"), u = i.getMetaInfo("globalproperty");
        return r.isEmptyObject(u) || (n.gp = u), n;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(7);
    e.exports = function() {
        return {
            getLogConfig: function() {
                var e = {}, t = this.options.config.plugins;
                for (var n in t) e[n] = {
                    plugins: t[n],
                    context: {}
                }, a(t[n], function(t) {
                    e[n].context[t.name] = t.config || {};
                });
                return e;
            },
            run: function() {
                this.options.context.logConfig = this.getLogConfig(), this.options.context.logConfig.pageLoadTime = this.options.context.PAGE_LOAD_TIME;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), r = n(9), o = n(3), s = n(65), i = n(12), u = "EMPTY_CNA";
    e.exports = function() {
        return {
            _syncEtag: function(e) {
                var t, n = a.getGlobalValue(o.APLUS), c = this, p = function(t) {
                    var r = t && t.data ? t.data.cna : "";
                    r ? (a.setGoldlogVal(g, r), e(r)) : "Y" === n.fetchEtagStatus ? n.aplus_pubsub.subscribe("etag", function(t) {
                        e(t);
                    }) : d();
                }, l = n.getMetaInfo(o.APLUS_PV_DOMAIN);
                l && (t = s.getUrl({
                    egUrl: (l.indexOf("//") === -1 ? "//" + l : l) + "/eg.js"
                }), c.options.context.etag && (c.options.context.etag.egUrl = t));
                var f = r.getContext(), g = n.globalConfig.ETAG_STORAGE_KEY, d = function() {
                    t && (n.fetchEtagStatus = "Y", r.request(t, {
                        dataType: "text",
                        requestMethodName: "request"
                    }, function(t) {
                        n.fetchEtagStatus = "N";
                        var r = "";
                        try {
                            var o = t.data || "", s = o.split(";");
                            if (s.length > 1) {
                                var c = s[1], p = c.split("=");
                                r = p[1] || "", r = r.replace(/\"/g, ""), a.setGoldlogVal(g, r), f.setStorage({
                                    key: g,
                                    data: {
                                        cna: r
                                    }
                                }), n.aplus_pubsub.publish("etag", r), n.aplus_pubsub.cachePubs("etag", r);
                            }
                        } catch (e) {
                            i().w(e);
                        }
                        r || (r = u), e(r);
                    }, function(e) {
                        i().w(e);
                    }));
                }, h = a.getGoldlogVal(g);
                h ? e(h) : f.getStorage({
                    key: g,
                    success: function(e) {
                        p(e);
                    },
                    fail: function(e) {
                        p(e);
                    }
                });
            },
            run: function(e, t) {
                var n = this, r = a.getGlobalValue("aplus"), o = r.getMetaInfo("aplus-etag-timeout"), s = 200, i = s;
                try {
                    i = parseInt(o), isNaN(i) && (i = s);
                } catch (e) {}
                if (this._syncEtag(function(e) {
                    n.options.context.etag && (n.options.context.etag.cna = e), i >= 200 && t(e);
                }), !(i < 200)) return i;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(66);
    t.getUrl = function(e) {
        var t = a.getUrl(e && e.egUrl);
        if (0 !== t.indexOf("http")) {
            var n = "https:";
            /(\d+\.){3,}\d+/.test(t) && (n = "http:"), t = n + t;
        }
        return t;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(67), r = n(68), o = n(2);
    e.exports = {
        tryToDecodeURIComponent: function(e, t) {
            var n = t || "";
            if (e) try {
                n = decodeURIComponent(e);
            } catch (e) {}
            return n;
        },
        parseSemicolonContent: function(e, t, n) {
            t = t || {};
            var r, o, s = e.split(";"), i = s.length;
            for (r = 0; r < i; r++) {
                o = s[r].split("=");
                var u = a.trim(o.slice(1).join("="));
                t[a.trim(o[0]) || ""] = n ? u : this.tryToDecodeURIComponent(u);
            }
            return t;
        },
        nodeListToArray: function(e) {
            var t, n;
            try {
                return t = [].slice.call(e);
            } catch (r) {
                t = [], n = e.length;
                for (var a = 0; a < n; a++) t.push(e[a]);
                return t;
            }
        },
        getLsCna: function(e, t) {
            if (r.set && r.test()) {
                var n = "", a = r.get(e);
                if (a) {
                    var o = a.split("_") || [];
                    n = t ? o.length > 1 && t === o[0] ? o[1] : "" : o.length > 1 ? o[1] : "";
                }
                return decodeURIComponent(n);
            }
            return "";
        },
        setLsCna: function(e, t, n) {
            n && r.set && r.test() && r.set(e, t + "_" + encodeURIComponent(n));
        },
        getUrl: function(e) {
            var t = o.getGlobalValue("aplus"), a = n(3), r = e || "//log.mmstat.com/eg.js";
            try {
                var s = t.getMetaInfo(a.APLUS_PV_DOMAIN), i = /[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/, u = s.match(i);
                u && u[0] && (r = "//" + u[0] + "/eg.js");
            } catch (e) {}
            return r;
        }
    };
}, function(e, t) {
    "use strict";
    function n(e) {
        return "string" == typeof e ? e.replace(/^\s+|\s+$/g, "") : "";
    }
    t.trim = n;
}, function(e, t) {
    "use strict";
    e.exports = {
        set: function(e, t) {
            try {
                return localStorage.setItem(e, t), !0;
            } catch (e) {
                return !1;
            }
        },
        get: function(e) {
            try {
                return localStorage.getItem(e);
            } catch (e) {
                return "";
            }
        },
        test: function() {
            var e = "grey_test_key";
            try {
                return localStorage.setItem(e, 1), localStorage.removeItem(e), !0;
            } catch (e) {
                return !1;
            }
        },
        remove: function(e) {
            localStorage.removeItem(e);
        }
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), r = n(3);
    e.exports = function() {
        return {
            getMetaInfo: function() {
                var e = a.getGoldlogVal("_$") || {}, t = e.meta_info;
                return t;
            },
            getAplusWaiting: function() {
                var e = this.getMetaInfo() || {};
                return e["aplus-waiting"];
            },
            run: function(e, t) {
                var n = this.options.config || {}, a = this.getAplusWaiting();
                if (a && n.is_auto) switch (a = this.getAplusWaiting() + "", this.options.context.when_to_sendpv = {
                    aplusWaiting: a
                }, a) {
                  case r._USER_ID:
                  case r._ANONY_ID:
                  case "MAN":
                    return "done";

                  case "1":
                    return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                        t();
                    }, 6e3), 6e3;

                  default:
                    var o = 1 * a;
                    if (o + "" != "NaN") return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                        t();
                    }, o), o;
                }
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), r = n(12), o = n(9), s = n(3), i = n(11);
    e.exports = function() {
        return {
            getMetaInfo: function(e) {
                var t = a.getGoldlogVal("_$") || {};
                return (t.meta_info || {})[e];
            },
            getHostUrl: function() {
                var e = this.getMetaInfo(s.APLUS_PV_DOMAIN);
                if (!i.checkDomain(e)) return "";
                var t = o.getLogDomain();
                if (!t) return r().tip_w("当前小程序框架未支持，请联系QT交付同学寻求帮助！！"), "";
                var n = [ "//", e, t ];
                return n.join("");
            },
            run: function() {
                this.options.context.where_to_send.method = "POST";
                var e = this.getHostUrl();
                if (!e) return "done";
                if (0 !== e.indexOf("//")) return r().w("上报域名无效: " + e), "done";
                var t = s.HTTPS;
                /(\d+\.){3,}\d+/.test(e) && (t = "http:"), e = t + e, this.options.context.where_to_send.url = e;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), r = n(3), o = n(12), s = n(9), i = n(72), u = n(74), c = n(11), p = r.SPM_CNT, l = r.SPM_URL, f = r.SPM_PRE;
    e.exports = function() {
        return {
            getCommonParams: function() {
                var e = a.getGlobalValue(r.APLUS), t = this.options.context || {}, n = t.etag || {}, g = t.userdata || {}, d = a.getGoldlogVal("_$") || {}, h = d.spm || {}, _ = this.options.config || {}, v = e.getMetaInfo("platformType") || s.getPlatformType(), m = {
                    _dev_id: e.getMetaInfo("_dev_id"),
                    _anony_id: e.getMetaInfo(r._ANONY_ID),
                    _user_id: e.getMetaInfo(r._USER_ID),
                    _user_nick: e.getMetaInfo("_user_nick"),
                    _session_id: e.getMetaInfo("_session_id"),
                    uaid: e.getMetaInfo("uaid") + "" == "1" ? 1 : 0
                }, y = e._aplus_client || {}, b = e.globalConfig || {}, S = "-";
                try {
                    var P = getCurrentPages()[0];
                    S = P.route || P.is;
                } catch (e) {}
                var A = new Date().getTime() + S, I = y.model + y.networkType + _.title + n.cna, C = (b.isDecodeUrl ? "DC_" : "") + i.getLogId(A, I), T = c.getAppKey();
                T || o().w("please set appKey in aplus metaInfo before sendPV!");
                var E = Object.assign({}, {
                    appKey: T,
                    cache: C,
                    cna: n.cna,
                    etag: n,
                    pre: d.page_referrer || "-",
                    sdk_info: {
                        jsver: b.script_name,
                        lver: b.lver,
                        customSdkId: e.getMetaInfo("customSdkId") || "",
                        platformType: v.toLowerCase()
                    },
                    title: _.title || "",
                    url: S || "-",
                    client: y,
                    timeZone: u.getTimeZone(),
                    gmkey: g.gmkey || "",
                    method: this.options.context.where_to_send.method
                }, m), x = m;
                return h.spm_url && (x[l] = h.spm_url || ""), h.spm_pre && (x[f] = h.spm_pre || ""), 
                h.spm_cnt && (x[p] = h.spm_cnt || ""), x[r.PVID] = e.pvid || "", E.sessionArgs = e.getMetaInfo("aplus-session-args"), 
                E.globalArgs = e.getMetaInfo("aplus-global-args"), E.gokey = x, E;
            },
            getPvParams: function() {
                var e = a.getGlobalValue(r.APLUS), t = this.getCommonParams();
                return this.options.config.is_auto || (t.sdk_info.mansndlog = 1), Object.assign({}, t, {
                    event_code: r.PV_CODE,
                    logtype: "1",
                    logkey: "/vx.gif",
                    event_timestamp: e._$.send_pv_count > 0 ? new Date() : e.logConfig.pageLoadTime
                });
            },
            getHjljParams: function() {
                var e = this.options.context || {}, t = e.userdata || {}, n = {
                    event_code: r.EVENT_ID_MAP[t.gmkey] || t.gmkey,
                    logtype: "2",
                    logkey: t.logkey,
                    event_timestamp: new Date()
                };
                return Object.assign({}, this.getCommonParams(), n);
            },
            run: function() {
                var e = {};
                e = "PV" === this.options.config.recordType ? this.getPvParams() : this.getHjljParams(), 
                this.options.context.what_to_send.logdata = e;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t, n) {
        return e ? r.hash(encodeURIComponent(e)).substr(0, t) : n;
    }
    var r = n(73), o = function(e) {
        function t(e) {
            var t = "0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ", n = "0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ";
            return 1 == e ? t.substr(Math.floor(60 * Math.random()), 1) : 2 == e ? n.substr(Math.floor(60 * Math.random()), 1) : "0";
        }
        for (var n, a = "", r = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", o = !1; a.length < e; ) n = r.substr(Math.floor(62 * Math.random()), 1), 
        !o && a.length <= 2 && ("g" == n.toLowerCase() || "l" == n.toLowerCase()) && (0 === a.length && "g" == n.toLowerCase() ? Math.random() < .5 && (n = t(1), 
        o = !0) : 1 == a.length && "l" == n.toLowerCase() && "g" == a.charAt(0).toLowerCase() && (n = t(2), 
        o = !0)), a += n;
        return a;
    };
    t.getLogId = function(e, t) {
        var n = o(8), r = n.substr(0, 4), s = n.substr(0, 6);
        return [ a(e, 4, r), a(t, 4, r), s ].join("");
    };
}, function(e, t) {
    "use strict";
    t.hash = function(e, t) {
        var n, a, r = 1315423911, o = t || r;
        for (n = e.length - 1; n >= 0; n--) a = e.charCodeAt(n), o ^= (o << 5) + a + (o >> 2);
        var s = (2147483647 & o).toString(16);
        return s;
    };
}, function(e, t) {
    t.getTimeZone = function() {
        var e = -new Date().getTimezoneOffset() / 60, t = "+";
        e < 0 && (t = "-");
        var n = Math.abs(parseInt(e)), a = Math.abs(parseInt(e) - e), r = "00";
        return a > 0 && (r = 60 * a), "GMT" + t + (n > 9 ? n : "0" + n) + ":" + r;
    };
}, function(e, t, n) {
    "use strict";
    var a = n(3), r = n(2), o = n(9);
    e.exports = function() {
        return {
            run: function() {
                var e = o.isTB(), t = r.getGlobalValue(a.APLUS), n = this.options.context.what_to_send.logdata || {}, s = getCurrentPages(), i = s[s.length - 1] || {};
                i && !n.title && (n.title = i.route || ""), n.url = (!e && t.globalConfig.isAli ? "https://" : "") + (i.route || i.is || "-");
                var u = "-";
                if (s.length > 1) {
                    var c = s[s.length - 2] || {};
                    u = (!e && t.globalConfig.isAli ? "https://" : "") + (c.route || c.is || "-");
                }
                n.pre = u, n.sdk_info && (n.sdk_info.windmill = "1"), this.options.context.what_to_send.logdata = n;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(33), r = n(19), o = n(2), s = n(3), i = n(9);
    e.exports = function() {
        return {
            getUserdata: function() {
                var e = o.getGlobalValue("aplus"), t = this.options.config || {}, n = {};
                t && !t.is_auto && t.gokey && ("string" == typeof t.gokey ? n = a.param2obj(t.gokey) : "object" == typeof t.gokey && (n = t.gokey));
                var s = function(e) {
                    r(e) ? e.forEach(function(e) {
                        n = Object.assign({}, n, e);
                    }) : n = Object.assign({}, n, e);
                };
                s(e.getMetaInfo("aplus-cpvdata"));
                var u = i.getCurrentPage(), c = u.route || u.is || "page", p = e.getMetaInfo("aplus-page-properties") || {}, l = p[c];
                "object" == typeof l && s(l);
                var f = this.options.context || {}, g = f.userdata || {};
                return s(g), n;
            },
            updatePre: function(e) {
                var t = this.options.config || {}, n = o.getGoldlogVal("_$") || {};
                return t && t.referrer && (n.page_referrer = t.referrer, e.pre = t.referrer), o.setGoldlogVal("_$", n), 
                e;
            },
            updateUrl: function(e) {
                var t = this.options.config || {};
                return t && t.pageUrl && (e.url = t.pageUrl), e;
            },
            updateSpmUrl: function(e) {
                var t = this.options.config || {}, n = t[s.SPM_URL] || t.spmUrl;
                return n && (e.gokey[s.SPM_URL] = n), e;
            },
            run: function() {
                var e = this.options.context.what_to_send.logdata, t = Object.assign({}, this.getUserdata(), e.userdata || {});
                e.gokey = Object.assign({}, e.gokey, t), e = this.updatePre(e), e = this.updateUrl(e), 
                e = this.updateSpmUrl(e), this.options.context.what_to_send.logdata = e, this.options.context.userdata = e.gokey;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = a.getGoldlogVal("_$") || {}, t = e.send_pv_count || 0;
                e.send_pv_count = ++t, a.setGoldlogVal("_$", e);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(33), r = n(19), o = n(2);
    e.exports = function() {
        return {
            getUserData: function() {
                var e = o.getGlobalValue("aplus"), t = this.options.context || {}, n = t.userdata || {}, s = t.what_to_send.logdata.gokey;
                s = Object.assign({}, s, a.param2obj(n.gokey)), s = Object.assign({}, s, a.param2obj(e.getMetaInfo("aplus-exinfo") || {}));
                var i = e.getMetaInfo("aplus-exdata");
                return r(i) ? i.forEach(function(e) {
                    s = Object.assign({}, s, e);
                }) : s = Object.assign({}, s, i || {}), s;
            },
            run: function() {
                var e = this.options.context.what_to_send.logdata, t = this.getUserData();
                "1010" === e.gmkey && (e.arg1 = t.duration || e.logkey), e.gokey = t, this.options.context.what_to_send.logdata = e;
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function() {
        return {
            run: function() {
                n(80)(this.options.context.logConfig);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(42), r = n(3), o = n(2);
    e.exports = function(e) {
        var t = o.getGlobalValue(r.APLUS);
        if (!t._aplus_api) {
            t._aplus_api = {
                status: r.COMPLETE
            };
            var s = n(81).run.create({
                logConfig: e
            });
            for (var i in s) t[i] = s[i];
            o.setGlobalValue(r.APLUS, t);
            var u = [ r.APLUS + "Ready", r.COMPLETE ];
            a.doPubMsg(u), a.doCachePubs(u);
        }
    };
}, function(e, t, n) {
    "use strict";
    var a = n(38), r = n(10), o = n(9), s = n(19), i = n(3), u = n(42), c = n(13), p = n(2), l = n(82), f = n(41), g = n(85), d = n(12), h = n(11), _ = n(30), v = function(e, t) {
        my && my.call && "function" == typeof t && my.call("handleLoggingAction", {
            type: "behavior",
            subType: e.subType
        }, function(n) {
            var a = {};
            a[e.spmType] = n[e.spmType], t(a);
        });
    }, m = a.extend({
        _send: function(e, t, n, a, r) {
            return e = h.can2https(e), "object" == typeof t && "POST" === n ? o.request(e, {
                method: n,
                data: t,
                dataType: "base64"
            }, a, r) : o.request(e + "?" + t, {
                method: n,
                dataType: "base64"
            }, a, r), e;
        },
        _requestVTConfig: function(e, t, n) {
            if (0 === e.indexOf("//")) {
                var a = i.HTTPS;
                /(\d+\.){3,}\d+/.test(e) && (a = "http:"), e = a + e;
            }
            o.request(e, {
                method: "GET"
            }, t, n);
        },
        _sendPV: function(e, t) {
            var n = p.getGlobalValue(i.APLUS);
            e = e || {}, e.pageName && n._setMetaInfo(i.APLUS + "-pagename", e.pageName);
            var a = new l();
            e.recordType = "PV", e.method || (e.method = "GET");
            var r = n.logConfig.pv;
            return a.run({
                plugins: r.plugins,
                context: c(r.context)
            }, {
                config: e,
                userdata: t || {},
                pubsubType: "pv",
                middlewareMessageKey: "mw_change_pv"
            }), !0;
        },
        _combineRecord: function(e, t, n, a) {
            var r = p.getGlobalValue(i.APLUS), o = "EXP";
            if (!r.globalConfig.isAli || t !== o && "CLK" !== t) console.warn("only support EXP or CLK log to combile record!"); else if (s(n)) {
                a || (a = "POST");
                var u = [], c = "true";
                n.forEach(function(e) {
                    u.push({
                        exargs: "object" == typeof e.exargs ? e.exargs : {},
                        scm: e.scm,
                        spm: e.spm,
                        aplusContentId: e.aplusContentId
                    }), "false" === e._aplus_sendtomy && "true" === c && (c = "false");
                });
                var l = [];
                l.push((t === o ? "expdata=" : "clkdata=") + JSON.stringify(u)), l.push(t === o ? "_is_auto_exp=1" : "_is_auto_clk=1"), 
                l.push("_eventType=custom"), l.push("_method=" + a), l.push("_pkgSize=" + n.length), 
                "false" === c && l.push("_aplus_sendtomy=false"), r.record(e, t, l.join("&"), a);
            } else console.warn("type of gokeys must be ArrayObject!");
        },
        _record: function(e, t, n, a, o) {
            var s = p.getGlobalValue(i.APLUS);
            e += "", e && 0 !== e.indexOf("/") && s.globalConfig.isAli && (e = "/" + e);
            var u = new l(), f = s.logConfig.hjlj;
            return u.run({
                plugins: f.plugins,
                context: c(f.context)
            }, {
                config: {
                    recordType: "COMMON_HJLJ",
                    method: a || "GET"
                },
                userdata: {
                    logkey: e,
                    gmkey: t,
                    gokey: n
                },
                pubsubType: "hjlj",
                middlewareMessageKey: "mw_change_hjlj"
            }, function() {
                r(o) && o();
            }), !0;
        },
        getPageSPM: function() {
            var e = p.getGlobalValue(i.APLUS), t = e._$ || {}, n = t.spm || {}, a = n.data || {};
            return [ a.a, a.b ];
        },
        _setPageSPM: function() {
            var e, t = {}, n = arguments;
            "object" == typeof n[0] ? (t = n[0], e = n[1]) : (t.spmCnt = [ n[0], n[1], "0", "0" ].join("."), 
            e = n[2]);
            var a;
            t.spmCnt || t.spmUrl || !f.getMetaInfo("pageConfig") ? (a = [ "setPageSPM", t ], 
            u.doPubMsg(a), u.doCachePubs(a)) : (a = [ "clearPageSPM" ], u.doPubMsg(a), u.doCachePubs(a));
            var r = "function" == typeof e ? e : function() {};
            r(a);
        },
        _setMetaInfo: function(e, t) {
            return f._setMetaInfo(e, t);
        },
        _updatePageProperties: function(e) {
            if ("object" == typeof e) {
                g() ? my.reportAnalytics("updatePageProperties", e) : "my" === o.getPlatformType() && my.call("reportData", {
                    spmDetail: e,
                    ignoreDefaultPageMonitor: !0
                });
                var t = o.getCurrentPage(), n = t.route || t.is || "page", a = {};
                a[n] = e, f.appendMetaInfo("aplus-page-properties", a);
            }
        },
        _updateNextPageProperties: function(e) {
            if (e || (e = {}), my) {
                var t = {
                    type: "updateNextProp",
                    eventId: -1,
                    eventid: -1,
                    name: "",
                    pageName: "",
                    comName: "",
                    arg1: "",
                    arg2: "",
                    arg3: "",
                    param: e,
                    params: e
                };
                my.callUserTrack ? my.callUserTrack("commitut", t) : my.reportAnalytics && my.reportAnalytics("enter", t);
            }
        },
        _appendMetaInfo: f.appendMetaInfo,
        getMetaInfo: function(e) {
            return f.getMetaInfo(e);
        },
        cloneDeep: c,
        _skipPage: function() {
            my && my.callUserTrack && my.callUserTrack("skipPage");
        },
        _pageAppear: function() {
            my && my.callUserTrack && this.isPageDisAppear && (this.isPageDisAppear = !1, this.isPageAppear = !0, 
            my.callUserTrack("pageAppear"));
        },
        _pageDisappear: function() {
            my && my.callUserTrack && this.isPageAppear && (this.isPageDisAppear = !0, this.isPageAppear = !1, 
            my.callUserTrack("pageDisappear"));
        },
        _updatePageUtparam: function(e) {
            e || (e = {}), my && my.callUserTrack && my.callUserTrack("updatePageUtparam", {
                utParamJson: JSON.stringify(e)
            });
        },
        _updateNextPageUtparam: function(e) {
            e || (e = {}), my && my.callUserTrack && my.callUserTrack("updateNextPageUtparam", {
                utParamJson: JSON.stringify(e)
            });
        },
        _updateSessionProperties: function(e) {
            my && my.call && "object" == typeof e && my.call("handleLoggingAction", {
                type: "behavior",
                subType: "updateSessionProperties",
                extData: e
            });
        },
        _getPageSpmUrl: function(e) {
            v({
                subType: "getPageSpmUrl",
                spmType: "spmUrl"
            }, e);
        },
        _getPageSpmPre: function(e) {
            v({
                subType: "getPageSpmPre",
                spmType: "spmPre"
            }, e);
        },
        _setPageName: function(e, t) {
            if (!e) return void d().w("setPageName failed:  pageName=" + e);
            var n = t || _.getCurrentPagePath(), a = c(f.getMetaInfo("pageConfig") || {});
            a[n] = e, f.appendMetaInfo("pageConfig", a);
        },
        getPageName: function(e) {
            return _.getPageCode(e);
        },
        _getElementSPM: function(e, t) {
            if (e) {
                var n = _.getPageCode() || "";
                if ("string" != typeof e) {
                    var a = e.dataset && e.dataset.trackerParams || "", r = h.jsonLikeStr2JSON(a);
                    return [ n, r.spmC, r.spmD ].join(".");
                }
                var s, i = o.getContext(), u = f.getMetaInfo("aplus-auto-clk") || [], c = f.getMetaInfo("aplus-auto-exp") || [];
                try {
                    var p;
                    for (p = 0; p < u.length; p++) {
                        var l = u[p];
                        if (l.cssSelector === e) {
                            s = [ n, l.spmC, l.spmD ].join(".");
                            break;
                        }
                    }
                    for (p = 0; p < c.length; p++) {
                        var g = c[p];
                        if (g.cssSelector === e) {
                            s = [ n, g.spmC, g.spmD ].join(".");
                            break;
                        }
                    }
                    var v = i.createSelectorQuery().selectAll(e);
                    "function" == typeof v.fields && v.fields({
                        dataset: !0,
                        id: !0
                    }, function(e) {
                        var n = [];
                        if (e && e.length > 0) {
                            for (var a = 1; a <= e.length; a++) n.push(s + "_" + a);
                            t && "function" == typeof t && t(n);
                        }
                    }).exec();
                } catch (e) {
                    d().w("该平台不支持dom元素查询, err = ", e);
                }
            }
        },
        _recordAppLink: function(e, t, n) {
            if (!e.targetAppKey) return d().w("send $$_app_link failed: targetAppKey is null"), 
            !1;
            var a = p.getGlobalValue(i.APLUS);
            return a._record("$$_app_link", "OTHER", e, t, n);
        }
    });
    t.run = m;
}, function(e, t, n) {
    "use strict";
    var a = n(7), r = n(2), o = n(10), s = n(42), i = n(47), u = n(3), c = n(83), p = n(84), l = function() {};
    l.prototype.run = function(e, t, n) {
        var l = new p();
        l.init({
            middleware: [],
            config: t.config,
            plugins: e.plugins
        });
        var f = l.run(), g = o(e.context) ? new e.context() : e.context;
        g.userdata = t.userdata, g.logger = i.logger;
        var d = {
            context: g,
            pubsub: r.getGoldlogVal("aplus_pubsub"),
            pubsubType: t && t.pubsubType
        }, h = new c();
        h.create(d), h.wrap(f, function() {
            d.context.status = u.COMPLETE, t && (t.middlewareMessageKey && s.doPubMsg([ t.middlewareMessageKey, d.context ]), 
            t.messageFnQueue && a(t.messageFnQueue, function(t) {
                t(r.getGlobalValue(u.APLUS), e);
            })), o(n) && n(d.context);
        })();
    }, e.exports = l;
}, function(e, t, n) {
    "use strict";
    function a() {}
    var r = n(10), o = n(50), s = n(12);
    a.prototype.create = function(e) {
        for (var t in e) "undefined" == typeof this[t] && (this[t] = e[t]);
        return this;
    }, a.prototype.calledList = [], a.prototype.setCalledList = function(e) {
        o.indexof(this.calledList, e) === -1 && this.calledList.push(e);
    }, a.prototype.resetCalledList = function() {
        this.calledList = [];
    }, a.prototype.wrap = function(e, t) {
        var n = this, a = this.context || {}, i = a.compose || {}, u = i.maxTimeout || 1e4;
        return function(a) {
            var i, c = e.length, p = 0, l = 0, f = function(g, d) {
                if (p === c) return a = "done", n.resetCalledList(), r(t) && d !== a && t.call(n, a), 
                void clearTimeout(i);
                if (o.indexof(n.calledList, p) === -1) {
                    if (n.setCalledList && n.setCalledList(p), !(e && e[p] && r(e[p][0]))) return;
                    try {
                        a = e[p][0].call(n, a, function() {
                            p++, l = 1, f(p);
                        });
                    } catch (e) {
                        s().w(e);
                    }
                }
                var h = "number" == typeof a;
                if ("pause" === a || h) {
                    l = 0;
                    var _ = h ? a : u, v = e[p] ? e[p][1] : "";
                    i = setTimeout(function() {
                        0 === l && (s().w("jump the middleware about " + v + ", because waiting timeout maxTimeout = " + _), 
                        a = null, p++, f(p));
                    }, _);
                } else "done" === a ? (p = c, f(p, a)) : (p++, f(p));
            };
            return n.calledList && n.calledList.length > 0 && n.resetCalledList(), f(p);
        };
    }, e.exports = a;
}, function(e, t, n) {
    "use strict";
    var a = n(29), r = n(12);
    e.exports = function() {
        return {
            init: function(e) {
                this.opts = e, e && "object" == typeof e.middleware && e.middleware.length > 0 ? this.middleware = e.middleware : this.middleware = [], 
                this.plugins_name = [];
            },
            pubsubInfo: function(e, t) {
                try {
                    var n = e.pubsub;
                    n && n.publish("plugins_change_" + e.pubsubType, t);
                } catch (e) {
                    r().w(e);
                }
            },
            run: function(e) {
                e || (e = 0);
                var t = this, n = this.middleware, r = this.opts || {}, o = r.plugins;
                if (o && "object" == typeof o && o.length > 0) {
                    var s = o[e];
                    if (this.plugins_name.push(s.name), n.push([ function(e, n) {
                        t.pubsubInfo(this, s);
                        var o = new s.path();
                        return o.init || (o.init = function(e) {
                            this.options = e;
                        }), o.init({
                            context: this.context,
                            config: a(s.config || {}, r.config)
                        }), o.run(e, function(e) {
                            setTimeout(function() {
                                n(s, e);
                            }, 1);
                        });
                    }, s.name ]), e++, o[e]) return this.run(e);
                }
                return n;
            }
        };
    };
}, function(e, t) {
    function n() {
        try {
            var e = navigator ? navigator.userAgent || navigator.swuserAgent : "";
            return /Triver/g.test(e);
        } catch (e) {
            return !1;
        }
    }
    e.exports = n;
}, function(e, t, n) {
    "use strict";
    var a = n(87), r = n(2);
    e.exports = function() {
        return {
            run: function() {
                var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE, n = r.getContext(), o = n[t] || [], s = a.getFormatQueue(o, "metaQueue");
                n[t] = s.queue, a.processGoldlogQueue(s.formatQueue, this.options.config);
            }
        };
    };
}, function(e, t, n) {
    function a() {
        var e = u.getGoldlogVal("_$") || {}, t = e.meta_info;
        return t;
    }
    function r() {
        var e = a() || {}, t = e.uaid + "";
        return "1" !== t || e._anony_id ? e._hold || e["aplus-waiting"] : "BLOCK";
    }
    function o(e) {
        var t = r(), n = a() || {}, o = !0, s = e.arguments || [], i = s[0], u = s[1], c = "START";
        if ("_hold" === i && u === c) return c;
        if ("_anony_id" === i && u) return c;
        if (e && /sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo$/.test(e.action)) switch (t) {
          case "BLOCK":
            n[t] || (_.push(e), o = !1);
        }
        return o;
    }
    function s(e) {
        g(d, e), g(h, e), g(_, e);
    }
    function i(e, t) {
        return t && f.openAPIs.indexOf(e) > -1 && (e = "_" + e), e;
    }
    var u = n(2), c = n(50), p = n(10), l = n(12), f = n(3), g = function(e, t) {
        function n() {
            if (e && c.isArray(e) && e.length) {
                for (var n = m(e).queue, a = {}, r = []; a = n.shift(); ) v(a, t, function(e) {
                    r.push(e);
                });
                r.length > 0 && setTimeout(function() {
                    for (;a = r.shift(); ) v(a, t);
                }, 100);
            }
        }
        try {
            n();
        } catch (e) {
            l().w(e);
        }
    };
    t.processGoldlogQueue = g;
    var d = [], h = [], _ = [];
    t.subscribeAndProcessQueue = function(e, t) {
        var n = u.getGlobalValue(e);
        n.push({
            action: f.SUBSCRIBE,
            arguments: [ f.SET_META_INFO, function(e, n) {
                e === f._USER_ID && n ? g(d, t) : e === f._ANONY_ID && n ? g(h, t) : "_hold" === e && "START" === n && s(t);
            } ]
        });
    };
    var v = function(e, t, n) {
        var a = !!t.isOpenApi, r = e ? e.action : "", f = e ? e.arguments : "", g = o(e);
        if (g) {
            var d = u.getContext();
            try {
                if (r && f && c.isArray(f)) {
                    var h, _ = r.split("."), v = d, m = d;
                    if (3 === _.length) v = d[_[0]][_[1]] || {}, h = i(_[2], a), m = v[h] ? v[h] : ""; else for (;_.length; ) if (h = i(_.shift(), a), 
                    m = v = v[h], !v) return void (p(n) && n(e));
                    p(m) && m.apply(v, f), "START" === g && s(t);
                }
            } catch (e) {
                l().w(e);
            }
        }
    };
    t.processTask = v;
    var m = function(e, t) {
        for (var n = {
            subscribeMwChangeQueue: [],
            subscribeMetaQueue: [],
            subscribeQueue: [],
            metaQueue: [],
            othersQueue: []
        }, a = [], r = {}; r = e.shift(); ) try {
            var o = r.action, s = r.arguments[0];
            /subscribe/.test(o) ? "setMetaInfo" === s ? n.subscribeMetaQueue.push(r) : s === f.MW_CHANGE_PV || s === f.MW_CHANGE_HJLJ ? n.subscribeMwChangeQueue.push(r) : n.subscribeQueue.push(r) : /MetaInfo/.test(o) ? n.metaQueue.push(r) : n.othersQueue.push(r);
        } catch (e) {
            l().w(e), n.othersQueue.push(r);
        }
        var i;
        return t && n[t] && (i = n[t], n[t] = []), a = n.subscribeMwChangeQueue.concat(n.metaQueue), 
        a = a.concat(n.subscribeQueue), a = a.concat(n.subscribeMetaQueue, n.othersQueue), 
        {
            queue: a,
            formatQueue: i
        };
    };
    t.getFormatQueue = m;
}, function(e, t, n) {
    "use strict";
    var a = n(38), r = n(2), o = n(87), s = a.extend({
        push: function(e) {
            this.length++, o.processTask(e, this.opts);
        }
    });
    e.exports = function() {
        return {
            processAplusQueue: function(e) {
                var t = this.options.config || {}, n = r.getGlobalValue(e);
                o.processGoldlogQueue(n, t), r.setGlobalValue(e, s.create({
                    opts: t,
                    startLength: n.length,
                    length: 0
                }));
            },
            run: function() {
                var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE;
                this.processAplusQueue(t), "aplus_queue" === t && this.processAplusQueue("goldlog_queue"), 
                o.subscribeAndProcessQueue(t, this.options.config);
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    function a() {
        function e() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "", t = s.getCurrentPage(), n = t.route || t.is;
            switch (e) {
              case "onPullDownRefresh":
                y.onPullDownRefresh += 1, _.push({
                    action: "aplus.record",
                    arguments: [ i.logkey || "$$_pull_down_refresh", "CLK", {
                        event: e,
                        pagename: l.getPageCode() || n,
                        count: y.onPullDownRefresh
                    } ]
                });
                break;

              case "onReachBottom":
                y.onReachBottom += 1, _.push({
                    action: "aplus.record",
                    arguments: [ a.logkey || "$$_reach_bottom", "CLK", {
                        event: e,
                        pagename: l.getPageCode() || n,
                        count: y.onReachBottom
                    } ]
                });
                break;

              case "onShareAppMessage":
                y.onShareAppMessage += 1, _.push({
                    action: "aplus.record",
                    arguments: [ g.logkey || "$$_share", "CLK", {
                        event: e,
                        pagename: l.getPageCode() || n,
                        count: y.onShareAppMessage,
                        share_type: 1
                    } ]
                });
                break;

              case "onShareTimeline":
                y.onShareTimeline += 1, _.push({
                    action: "aplus.record",
                    arguments: [ g.logkey || "$$_share", "CLK", {
                        event: e,
                        pagename: l.getPageCode() || n,
                        count: y.onShareTimeline,
                        share_type: 0
                    } ]
                });
                break;

              case "onPageShow":
                t.route && !v && (m = {
                    ts: Date.now(),
                    path: t.route,
                    page_name: t.route
                }, v = !0);
                break;

              case "onPageHide":
                if (v) {
                    var r = Date.now() - m.ts, u = s.getReferrerPage().route || s.getReferrerPage().is || "-", c = (l.getPageName() || {}).extraParams, p = Object.assign({}, c, {
                        duration: r,
                        path: m.path,
                        page_name: l.getPageCode() || m.page_name,
                        page_start: m.ts,
                        isMini: !0,
                        _page_auto_id: o.PAGE_END,
                        _page_auto_pv: !0,
                        referrer: u
                    });
                    h.sendPV({
                        is_auto: !0
                    }, p), m = null, v = !1;
                }
            }
        }
        function t() {
            a = h.getMetaInfo("rb_config"), i = h.getMetaInfo("pdr_config"), g = h.getMetaInfo("share_config");
        }
        function n(e, t) {
            if (e && t) try {
                var n = h.getMetaInfo("aplus-api-host"), a = /[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/, r = n.match(a);
                if (r && r[0]) {
                    var i = o.HTTPS;
                    /(\d+\.){3,}\d+/.test(r[0]) && (i = "http:");
                    var u = i + "//" + n + "/vt/loadTransferConfig?code=" + e + "&appInfoId=" + t;
                    s.request(u, {}, function(e) {
                        try {
                            var t = e.data && e.data.data && e.data.data.config || "", n = e.data && e.data.data && e.data.data.debugId || "";
                            n && h.appendMetaInfo("aplus-global-args", {
                                debugId: n
                            });
                            var a = new Date().getTime();
                            h._minicfg_load = new Date().getTime() - a, t && (h._aplus_vt_cfg = JSON.parse(t) || {}, 
                            p.vt2autoEvent());
                        } catch (e) {
                            f().w("拉取实时可视化埋点验证失败, 错误信息：" + e);
                        }
                    });
                }
            } catch (e) {}
        }
        var a, i, g, d = r.getContext(), h = r.getGlobalValue(o.APLUS), _ = r.getGlobalValue(o.APLUS_QUEUE), v = !1, m = null, y = {
            onPullDownRefresh: 0,
            onShareTimeline: 0,
            onReachBottom: 0,
            onShareAppMessage: 0,
            onClick: 0
        };
        _.push({
            action: o.SUBSCRIBE,
            arguments: [ "aplusReady", function(e) {
                "complete" === e && t();
            } ]
        }), h.aplus_pubsub.subscribe("onLoad", function(e) {
            if ("ready" === e.status) try {
                var t = l.getVTRealtimeCode();
                if (t) {
                    var a = h.getMetaInfo("appInfoId");
                    n(t, a);
                } else !!h.getMetaInfo("aplus-vt-cfg-url") && p.vt2autoEvent();
            } catch (e) {
                f().w("拉取实时可视化埋点验证信息失败， 错误原因：" + e);
            }
        }), h.aplus_pubsub.subscribe("onShow", function(t) {
            if ("ready" === t.status) {
                var n = "MAN" !== d.aplus.getMetaInfo("aplus-waiting");
                n && e("onPageShow");
            }
        }), h.aplus_pubsub.subscribe("onHide", function(t) {
            if ("ready" === t.status) {
                var n = "MAN" !== d.aplus.getMetaInfo("aplus-waiting");
                n && e("onPageHide");
            }
        }), h.aplus_pubsub.subscribe("onPullDownRefresh", function(t) {
            "ready" === t.status && e("onPullDownRefresh");
        }), h.aplus_pubsub.subscribe("onReachBottom", function(t) {
            "ready" === t.status && e("onReachBottom");
        }), h.aplus_pubsub.subscribe("onShareAppMessage", function(t) {
            "ready" === t.status && e("onShareAppMessage");
        }), h.aplus_pubsub.subscribe("onShareTimeline", function(t) {
            "ready" === t.status && e("onShareTimeline");
        }), h.getMetaInfo("aplus-vt-cfg-url") && u.pushIntoGoldlogQueue(o.SUBSCRIBE, [ c, function(e) {
            var t = e.pageConfig;
            t && t.enabled && (h._aplus_vt_cfg = t);
        } ]);
    }
    var r = n(2), o = n(3), s = n(9), i = n(90), u = n(61), c = "MiniVtConfigFormat", p = n(93), l = n(30), f = n(12);
    e.exports = function() {
        return {
            run: function() {
                var e = r.getGlobalValue("aplus");
                if (a(), !e._aplus_aleady_load_minivt) {
                    e._aplus_aleady_load_minivt = 1;
                    var t = i.create();
                    t.run();
                }
            }
        };
    };
}, function(e, t, n) {
    "use strict";
    var a = n(38), r = n(61), o = n(91), s = n(7), i = n(28), u = n(92), c = n(3), p = n(2), l = "MiniVtConfigBack", f = "MiniVtConfigFormat", g = c.PUBLISH;
    e.exports = a.extend(i.assign(u, {
        pathname: "",
        pageConfig: {},
        originSpm: {
            spmA: "",
            spmB: ""
        },
        updateCfgLs: function() {
            var e = this;
            setTimeout(function() {
                e.fetchFromCdn();
            }, 1e3);
        },
        fetchFromCdn: function() {
            var e = this, t = p.getGlobalValue("aplus"), n = t.getMetaInfo("aplus-vt-cfg-url");
            if (n) {
                var a = new Date().getTime();
                t.requestVTConfig(n, function(n) {
                    var o = n.data;
                    if (t._minicfg_load = new Date().getTime() - a, o) try {
                        t._aplus_vt_cfg = "object" == typeof o ? o : JSON.parse(o), t._aplus_vt_cfg.points && s(t._aplus_vt_cfg.points, function(e) {
                            e.selector = decodeURIComponent(e.selector);
                        }), e.setConfigIntoLs(t._aplus_vt_cfg);
                    } catch (e) {
                        t._aplus_vt_cfg = {
                            enabled: !1
                        };
                    }
                    r.pushIntoGoldlogQueue(g, [ l, {
                        pageConfig: t._aplus_vt_cfg,
                        enable: 0
                    } ]);
                }, function(e) {
                    t._aplus_vt_cfg && t._aplus_vt_cfg.enabled && r.pushIntoGoldlogQueue(g, [ l, {
                        pageConfig: t._aplus_vt_cfg,
                        enable: 0
                    } ]), o.catchException("getTrackerCfg", e, {
                        msg: n
                    });
                }, {
                    timeout: 5e3
                });
            }
        },
        getMiniVtData: function(e, t, n) {
            var a = p.getGlobalValue("aplus");
            if (a._minicfg_load = 0, e) {
                var o = this.fetchFromLS(e);
                if ("string" == typeof o) try {
                    o = JSON.parse(o);
                } catch (e) {
                    o = {};
                }
                o && o.enabled && (a._aplus_vt_cfg = o), n ? this.fetchFromCdn(e, t) : r.pushIntoGoldlogQueue(g, [ l, {
                    pageConfig: o,
                    enable: 0
                } ]);
            }
        },
        syncMiniVtData: function() {
            var e = this.getVtConfigPath();
            this.getMiniVtData(e, "", !0);
        },
        init: function() {
            var e = this, t = c.SUBSCRIBE;
            r.pushIntoGoldlogQueue(t, [ l, function(t) {
                t.enable || (e.pageConfig = t.pageConfig), r.pushIntoGoldlogQueue(g, [ f, {
                    pageConfig: e.pageConfig,
                    originSpm: e.originSpm
                } ]), !t.enable && e.setConfigIntoLs(e.pageConfig);
            } ]), e.syncMiniVtData();
        },
        run: function() {
            return this.init(), this;
        }
    }));
}, function(e, t, n) {
    "use strict";
    var a = n(61);
    t.catchException = function(e, t) {
        var n = e;
        "object" == typeof t && t.message && (n = n + "_" + t.message), a.pushIntoGoldlogQueue("aplus._aplus_cplugin_m.do_tracker_jserror", [ {
            message: n,
            error: JSON.stringify(t),
            filename: e
        } ]);
    };
}, function(e, t, n) {
    "use strict";
    var a = n(2), r = n(9), o = n(11);
    e.exports = {
        lsMinivtConfigKey: "APLUS_MINI_CONFIG",
        getMiniVtTplCdnPath: function() {
            var e = a.getGlobalValue("aplus"), t = e.getMetaInfo("aplus-track-config-id"), n = t && t.turnon, r = t && t.value;
            return "1" === n && r ? r : "";
        },
        getVtConfigPath: function() {
            var e, t = this.getMiniVtTplCdnPath(), n = [], a = o.getAppKey();
            return a && (e = a), e && (n = e.split(".")), 2 === n.length ? this.originSpm = {
                spmA: n[0],
                spmB: n[1]
            } : 1 === n.length && (this.originSpm.spmA = n[0]), t ? t : 2 === n.length ? n.join("_") : 1 === n.length ? n[0] : void 0;
        },
        fetchFromLS: function(e) {
            this.cdnpath || (this.cdnpath = e || this.getMiniVtTplCdnPath());
            var t = r.getContext();
            return decodeURIComponent(t.getStorageSync(this.lsMinivtConfigKey + "-" + e)) || {};
        },
        setConfigIntoLs: function(e) {
            this.cdnpath || (this.cdnpath = this.getVtConfigPath());
            var t = r.getContext();
            t.setStorageSync(this.lsMinivtConfigKey + "-" + this.cdnpath, encodeURIComponent(JSON.stringify(e)));
        }
    };
}, function(e, t, n) {
    "use strict";
    function a(e, t) {
        function n(e, t) {
            for (var n = -1, a = 0; a < t.length; a++) {
                var r = t[a];
                if (r.cssSelector === e.cssSelector && r.logkey === e.logkey) {
                    n = a;
                    break;
                }
            }
            return n;
        }
        e = i.isArray(e) ? e : [], t = i.isArray(t) ? t : [];
        var a = [].concat(t, e), r = a.filter(function(e, t, a) {
            return n(e, a) === t;
        });
        return r;
    }
    function r(e) {
        return i.isArray(e) ? e.filter(function(e) {
            return void 0 === e._vt;
        }) : [];
    }
    function o(e) {
        return /^[.#]/.test(e) ? e : e ? "." + e : "";
    }
    var s = n(9), i = n(50), u = n(2), c = n(7), p = u.getGlobalValue("aplus"), l = n(30);
    t.getCurrentPageVTCfg = function() {
        var e = p._aplus_vt_cfg;
        if (e) for (var t = l.getCurrentPagePath(), n = 0; n < e.pages.length; n++) {
            var a = e.pages[n];
            if (a.matchUrl === t) return a;
        }
    }, t.vt2autoEvent = function() {
        var e = p._aplus_vt_cfg || p._aplus_tracking_cfg;
        if (e) {
            var t = s.getCurrentPage(), n = t.route || t.is, i = [], u = [];
            c(e.pages, function(t) {
                p.setPageName({
                    pageName: t.spmB,
                    extraParams: t.extraParams
                }, t.matchUrl), t.matchUrl === n && (c(e.points, function(e) {
                    t.spmB === e.spmB && ("exposure" === e.trackerType ? i.push({
                        cssSelector: o(e.selector),
                        positionSelector: e.positionSelector,
                        logkey: e.logkey,
                        props: e.props || [],
                        spmB: e.spmB,
                        spmC: e.spmC,
                        spmD: e.spmD,
                        customArgs: e.customArgs,
                        _vt: t.template || t.stdId ? 2 : 1
                    }) : u.push({
                        cssSelector: o(e.selector),
                        logkey: e.logkey,
                        props: e.props || [],
                        spmB: e.spmB,
                        spmC: e.spmC,
                        spmD: e.spmD,
                        customArgs: e.customArgs,
                        _vt: t.template || t.stdId ? 2 : 1
                    }));
                }), e.common_exdata && "object" == typeof e.common_exdata && p.setMetaInfo("aplus-exdata", e.common_exdata), 
                e.common_pvdata && "object" == typeof e.common_pvdata && p.setMetaInfo("aplus-cpvdata", e.common_pvdata));
            });
            var l = r(p.getMetaInfo("aplus-auto-exp"));
            p.setMetaInfo("aplus-auto-exp", a(l, i));
            var f = r(p.getMetaInfo("aplus-auto-clk"));
            p.setMetaInfo("aplus-auto-clk", a(f, u));
        }
    };
}, function(e, t, n) {
    "use strict";
    e.exports = function(e, t) {
        var a = n(2), r = n(42), o = n(12), s = n(7), i = n(9), u = n(95);
        i.initIsTB(), "object" == typeof e && (e.siteId && (t.globalConfig.siteId = e.siteId), 
        t.metaInfo = Object.assign({}, t.metaInfo, e.metaInfo));
        var c = "running", p = "complete", l = [ "aplusReady", c ];
        return r.doPubMsg(l), u.run({
            plugins: t.plugins,
            context: function() {
                var e = {
                    PAGE_LOAD_TIME: new Date()
                }, n = [];
                return s(t.plugins, function(t) {
                    e[t.name] = t.config, "aplus_log_inject" === t.name && t.config && t.config.plugins && (n = t.config.plugins.pv, 
                    s(n, function(t) {
                        e[t.name] = t.config;
                    }));
                }), Object.assign({}, e, {
                    aplus_config: t
                });
            }
        }, function() {
            o().w("APLUS INIT SUCCESS"), l[1] = p, r.doPubMsg(l);
        }), a.getContext();
    };
}, function(e, t, n) {
    "use strict";
    var a = n(82), r = n(10), o = n(42);
    t.run = function(e, t) {
        var n = new a();
        n.run({
            plugins: e.plugins,
            context: e.context
        }, {
            config: {},
            userdata: {},
            pubsubType: "aplusinit",
            messageFnQueue: [],
            middlewareMessageKey: "mw_change_aplusinit"
        }, function(e) {
            var n = [ "aplusInitContext", e ];
            o.doPubMsg(n), o.doCachePubs(n), r(t) && t(e);
        });
    };
} ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBsdXNfbWluaV9jbG91ZF91bS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYjM1NzE1MTQ5NDkzYjljMjg0MDMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwbHVzX21pbmlfY2xvdWRfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxHb2xkbG9nLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9hcGx1c1N0YXRpYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBsdXNfbWluaV9jbG91ZF91bV9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfYXBwX3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2VhY2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2lzUGxhaW5PYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3Vsb2cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2Nsb25lRGVlcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vdW1fc2Vzc2lvbl9tYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9jYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vanNvblV0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9ldmVudE1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2lzQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3JlcXVlc3RRdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vdW1faGVhZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9ib2R5QnVpbGRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vcmVxdWVzdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vbWFuZ2xlX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2ltcHJpbnRNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9iYXNlNjQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3F1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRGFzaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvYXNzaWduLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2luamVjdF9wYWdlX3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9lYWNoTWFwLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9mb3JtYXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9vcGVuX2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbWVzc2FnZXIvcHVic3ViX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL0Jhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfbWV0YV9pbmplY3RfbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tYWluX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21ldGEvbWV0YUluZm9NaW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsUHVic3ViLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX2Nsay5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2Nsay9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvbGliX2F1dG9fY2xrL2NvbGxlY3RfY2xrLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvdXRpbHMvd2F0Y2hUcmFja2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsTG9nZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvdXRpbHMvZ2V0SGFzaEtleS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL3JheFV0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl9leHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19leHAvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2V4cC9jb2xsZWN0X2V4cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc193ZWIvbGliX2NvbW1vbi9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxNZXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsQXR0cmlidXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvbWluaV9zcG0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfbWluaV9yZXBvcnRfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbWFpbl9taW5pX3VtX2h0dHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbWFpbl9iYXNlX2h0dHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vZXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfbG9nX2luamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEV0YWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxEYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsVHJpbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFN0b3JlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGVuX3RvX3NlbmRwdi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfbWluaV91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF9taW5pX2Nsb3VkLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9sb2dJZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEhhc2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi91dGlsUGFyYW1zLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YV9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9jYW5fdG9fc2VuZHB2X21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfYXBpX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2FwaS9hcGx1c19taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1JlZHVjZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvY29tcG9zZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9wbHVnaW5zTG9hZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9pc1RyaXZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfcXVldWUvbWV0YV9xdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfcXVldWUvYWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hcGx1c19xdWV1ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9taW5pdnQvZmV0Y2hDb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxDYXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvbWluaXZ0U3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9saWJfbWluaXZ0L3V0aWxWVC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBsdXNfbWluaV9iYXNpYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9hcGx1c2luaXQuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiaW5pdEdsb2JhbCIsImFwcENvbmZpZyIsImFwbHVzX2NvbmZpZyIsIl9hcGx1c19jb250ZXh0IiwiYXBsdXNTdGF0aWMiLCJBUExVUyIsIkFQTFVTX1FVRVVFIiwiR09MRExPRyIsIkdPTERMT0dfUVVFVUUiLCJpc1dlYiIsIndpbmRvdyIsImUiLCJnZXRDb250ZXh0IiwiY29udGV4dCIsInYiLCJhcGx1cyIsImFwbHVzX3F1ZXVlIiwiX2FwbHVzRGVmYXVsdFZhbHVlIiwiX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUiLCJnb2xkbG9nIiwiX2dvbGRsb2dfcXVldWUiLCJnb2xkbG9nX3F1ZXVlIiwiY29uY2F0IiwiZ2V0R2xvYmFsVmFsdWUiLCJrZXkiLCJnIiwicSIsInNldEdsb2JhbFZhbHVlIiwidmFsdWUiLCJnZXRHb2xkbG9nVmFsIiwic2V0R29sZGxvZ1ZhbCIsInZhbCIsImYiLCJnZXRDbGllbnRJbmZvIiwiTVdfQ0hBTkdFIiwiTUVUQV9JTkZPIiwiQVBQRU5EX01FVEFfSU5GTyIsIlNFVF9NRVRBX0lORk8iLCJIVFRQIiwiX3B1YnN1YiIsImRlZmF1bHRDb2RlIiwiQ0xLIiwiRVhQIiwiSU1QRVhQIiwiT1RIRVIiLCJBUFBfU0hPVyIsIkFQUF9ISURFX09SX1VOTE9BRCIsIlNFU1NJT05fSU5URVJWQUwiLCJTSEFSRV9DQUNIRV9JTlRFUlZBTCIsIkVLVlMiLCJFVkVOVF9NQVhfQ09VTlQiLCJNRU1PUllfTUFYX0NPVU5UIiwiRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMIiwiUEFHRV9TVEFSVCIsIlBBR0VfRU5EIiwiQVBQX1NUQVJUIiwiQVBQX0VORCIsIlVTRVJfUFJPRklMRV9LRVkiLCJJTVBSSU5UIiwiSURfVFlQRSIsIkpTQlJJREdFX09OTFkiLCJQQUdFX0NPTkZJRyIsIkFQTFVTX1NLSVBfQVBWX1JVTEVTIiwiQVBMVVNfUFZfRE9NQUlOIiwiQVBMVVNfRUtWX0RPTUFJTiIsIlBBR0VfRU5URVIiLCJDVVJSRU5UX1BBR0VfQ09ORklHIiwiX0FOT05ZX0lEIiwiX1VTRVJfSUQiLCJERUZBVUxUX0NPREUiLCJFVkVOVF9NQVAiLCIyMTAxIiwiMjIwMSIsIjIyMDIiLCIxOTk5OSIsIjEwMjMiLCIxMDEwIiwiRVZFTlRfSURfTUFQIiwiU0hPVyIsIkhfT1JfVSIsIlVOU1VCU0NSSUJFIiwiU1VCU0NSSUJFIiwiUFVCTElTSCIsIkNBQ0hFX1BVQlMiLCJBUExVU19VTklWRVJTQUwiLCJDT01QTEVURSIsIlBWX0NPREUiLCJFWFBfQ09ERSIsIkNMS19DT0RFIiwiT1RIRVJfQ09ERSIsIlNQTV9DTlQiLCJTUE1fVVJMIiwiU1BNX1BSRSIsIk1XX0NIQU5HRV9QViIsIk1XX0NIQU5HRV9ISkxKIiwiSFRUUFMiLCJBUExVU19BUFBFTkRfTUVUQV9JTkZPIiwiQVBMVVNfU0VUX01FVEFfSU5GTyIsIlBWSUQiLCJBUExVU19MT0dfUElQRSIsIm9wZW5BUElzIiwiU0VTU0lPTl9QQVVTRV9USU1FIiwiQ1VSUkVOVF9TRVNTSU9OIiwiTUFYX0VWRU5USURfTEVOR1RIIiwiTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgiLCJNQVhfUFJPUEVSVFlfS0VZU19DT1VOVCIsIlJFUVVFU1RTIiwiU0hBUkVTIiwiQVBMVVNfU1NSQyIsIkdMT0JBTF9QUk9QRVJUWSIsIm1ldGFJbmZvIiwiYXBsdXMtcmhvc3QtdiIsImFwbHVzLXJob3N0LWciLCJhcGx1cy1tbXN0YXQtdGltZW91dCIsInNka0lkIiwiZ2xvYmFsQ29uZmlnIiwiaXNBbGkiLCJpc0RlY29kZVVybCIsIkVUQUdfU1RPUkFHRV9LRVkiLCJzY3JpcHRfbmFtZSIsImFwbHVzLWdsb2JhbGRhdGEiLCJsdmVyIiwicGx1Z2lucyIsIm5hbWUiLCJwYXRoIiwiZGVwcyIsImNvbmZpZyIsInB2IiwiYXBsdXNXYWl0aW5nIiwibG9nZGF0YVRvVXQiLCJoamxqIiwiaXNPcGVuQXBpIiwiZ2V0R2xvYmFsQXJncyIsInF1ZXJ5Iiwic2NlbmUiLCJnbG9iYWxfYXJncyIsIm1pbmlhcHBEZWJ1Z0lkIiwiZGVidWdJZCIsImsiLCJpbmRleE9mIiwic2Vzc2lvblN0YXJ0Iiwib3B0aW9ucyIsImNhY2hlIiwibG9hZCIsInVsb2ciLCJ3IiwibmV3T3B0aW9ucyIsImRlZXBDbG9uZSIsImNsb25lRGVlcCIsImkiLCJ1dGlsRGFzaCIsImFzc2lnbiIsInJlcXVlc3RRdWV1ZSIsImlzTmV3U2Vzc2lvbiIsInNlc3Npb25NYW5hZ2VyIiwicmVzdW1lIiwic2Vzc2lvbklkIiwiZ2V0Q3VycmVudFNlc3Npb25JZCIsImV2ZW50TWFuYWdlciIsInNldFNlc3Npb25JZCIsImFkZCIsInVtVXRpbHMiLCJEYXRhVHlwZSIsIkhBTEZfU0VTU0lPTiIsInNlbmQiLCJzZXNzaW9uRW5kIiwicGF1c2UiLCJDTE9TRV9TRVNTSU9OIiwic2F2ZSIsImluamVjdEFwcCIsImFwcEJhayIsIkFwcCIsImFscmVhZHlTdGFydGVkIiwibGFudWNoZWQiLCJjdHgiLCJ1dGlsR29sZGxvZyIsIm1pbmkiLCJmbiIsIm9uTGF1bmNoIiwiaW5pdElzVEIiLCJyZWZlcnJlckluZm8iLCJBUFBfTEFVTkNIX1RZUEUiLCJwdXNoIiwiYWN0aW9uIiwiYXJndW1lbnRzIiwicXVlcnlEYXRhIiwic3BtIiwic3BtX29yaWduIiwidHJpbSIsImRlYnVnSW5mb3MiLCJzcGxpdCIsImFwbHVzX3dvcmtfbm8iLCJsZW5ndGgiLCJhcGx1c190cmFja19kZWJ1Z19pZCIsImFwbHVzX2ZsYWciLCJvblNob3ciLCJvcHRzIiwic3RhcnRfdHlwZSIsInV0aWxzIiwib25BcGx1c1JlYWR5IiwicGFnZUNvZGUiLCJQYWdlTWFuYWdlciIsImdldFBhZ2VDb2RlIiwib25BcHBTaG93VGltZSIsIkRhdGUiLCJnZXRUaW1lIiwicGFnZV9uYW1lIiwidXJsIiwib25IaWRlIiwiZ2V0Q3VycmVudFBhZ2VQYXRoIiwiZHVyYXRpb24iLCJlbmRfdHlwZSIsInN0YXJ0X3RpbWUiLCJvbkFwcFNob3ciLCJpc0Z1bmN0aW9uIiwiZ2V0TGF1bmNoT3B0aW9uc1N5bmMiLCJvbkFwcEhpZGUiLCJydW4iLCJlYWNoIiwicmVzZXRGbiIsInQiLCJuIiwicnMiLCJhcHBseSIsInRoaXMiLCJyZXdyaXRlRm4iLCJvYmoiLCJuZXdGbiIsIm9sZEZuIiwiY2FsbGJhY2siLCJzdGF0dXMiLCJnZXRJbmRleEJ5UmVjdCIsInNlbGVjdG9yIiwidGFyZ2V0UmVjdCIsInRhcmdldEluZGV4IiwiY3JlYXRlU2VsZWN0b3JRdWVyeSIsInNlbGVjdEFsbCIsImJvdW5kaW5nQ2xpZW50UmVjdCIsImV4ZWMiLCJyZWN0IiwiaXRlbSIsImluZGV4Iiwid2lkdGgiLCJoZWlnaHQiLCJsZWZ0IiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJpc1BsYWluT2JqZWN0IiwiYXJyIiwiYXR0ciIsImhhc093blByb3BlcnR5IiwibCIsInByb3RvIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJfaXNUYiIsInJlc3VsdCIsIlVBIiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwic3d1c2VyQWdlbnQiLCJ0ZXN0IiwiZ2V0UGxhdGZvcm1UeXBlIiwiY2FuSVVzZSIsImlzVEIiLCJ1dGlsIiwiZ2V0Q3VycmVudFBhZ2UiLCJwYWdlcyIsImdldEN1cnJlbnRQYWdlcyIsImdldFJlZmVycmVyUGFnZSIsInJlc2V0SXNUQiIsImRkIiwicGxhdFR5cGUiLCJzZGtUeXBlIiwibG9nRG9tYWluIiwibXkiLCJ0YiIsInR0Iiwic3dhbiIsInd4IiwiZ2V0U2RrVHlwZSIsImdldExvZ0RvbWFpbiIsIkhUVFBfUkVRVUVTVCIsIlJFUVVFU1QiLCJGTiIsInJlcXVlc3QiLCJzdWNjZXNzQ2FsbGJhY2siLCJmYWlsdXJlQ2FsbGJhY2siLCJtZXRob2ROYW1lIiwicmVxdWVzdE1ldGhvZE5hbWUiLCJyZXEiLCJkYXRhVHlwZSIsInRpbWVvdXQiLCJtZXRob2QiLCJjYW4yaHR0cHMiLCJtc2ciLCJyZXFPcHRpb25zIiwic3VjY2VzcyIsInJlcyIsImZhaWwiLCJkYXRhIiwiX2V4dEluZm8iLCJnZXRNZXRhSW5mbyIsIm8iLCJhcnIycGFyYW0iLCJhIiwibGVuIiwic19wbGFpbl9vYmoiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwibWtQbGFpbktleSIsIk1hdGgiLCJyYW5kb20iLCJta1BsYWluS2V5Rm9yRXhwYXJhbXMiLCJrZXlfcHJlZml4IiwiX2tleSIsInBhcmFtMmFyciIsInBhcmFtcyIsInNoaWZ0IiwiYXJyMm9iaiIsInJldCIsImpzb25MaWtlU3RyMkpTT04iLCJqc29uU3RyIiwic3RyIiwicmVwbGFjZSIsImFycjEiLCJhcnIyIiwicHJvdG9jYWwiLCJnZXRBcHBLZXkiLCJjaGVja0VtcHR5T2JqIiwia2V5cyIsImNoZWNrRG9tYWluIiwicmVnIiwiUmVnRXhwIiwibWF0Y2giLCJ0aXBfdyIsInJlcGVhdCIsImNoZWNrT3BlbmlkIiwib2QiLCJMT0dfUFJFRklYIiwiVUxvZyIsInNldERlYnVnIiwiZGVidWciLCJfZGVidWciLCJjb25zb2xlIiwiaW5mbyIsImVycm9yIiwid2FybiIsImxvZyIsImNoYXIiLCJfaW5zdGFuY2UiLCJuZXdvYmoiLCJBcnJheSIsImlzQXJyYXkiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJpbml0IiwibmV3U2Vzc2lvbiIsIl9jdXJyZW50U2Vzc2lvbiIsImdldCIsImRhdGUiLCJfcmVzdW1lVGltZSIsImVuZF90aW1lIiwiX2NyZWF0ZU5ld1Nlc3Npb24iLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJfZW5kU2Vzc2lvbiIsImdldEN1cnJlbnRTZXNzaW9uIiwiY2xvbmVDdXJyZW50U2Vzc2lvbiIsIl9nZXRVbVBhcmFtcyIsImFwbHVzX3F1ZXJ5IiwicHJldk9wdGlvbnMiLCJsYXVuY2hPcHRpb25zIiwicmVmZXJyZXJBcHBJZCIsImFwcElkIiwiZ3AiLCJ0cyIsIm5vdyIsImdldFJhbmRvbVN0ciIsInN0YXRlX3MiLCJzZXQiLCJqc29uVXRpbCIsIkNhY2hlIiwiY2IiLCJfZGF0YSIsInJlbW92ZVN0b3JhZ2UiLCJfbmFtZSIsImdldFN0b3JhZ2UiLCJfbG9hZGVkIiwiZXJyTXNnIiwic2V0U3RvcmFnZSIsInN0cmluZ2Z5IiwicmVtb3ZlIiwiZ2V0QWxsIiwiY2xlYXIiLCJoYXMiLCJpc0xvYWRlZCIsImpzb24iLCJwYXJzZVRvQXJyYXkiLCJOdW1iZXIiLCJwb3MiLCJyb3VuZCIsInN0YXJ0c1dpdGgiLCJzZWFyY2hWYWwiLCJzdWJzdHIiLCJ0YXJnZXQiLCJ1bmRlZmluZWQiLCJUeXBlRXJyb3IiLCJvdXRwdXQiLCJzb3VyY2UiLCJuZXh0S2V5IiwicHJvdG90eXBlIiwiY2hlY2tFdmVudCIsImV2ZW50SWQiLCJwcm9wZXJ0aWVzIiwicmVzZXJ2ZVdvcmRzIiwicmVzZXJ2ZVdvcmRNYXAiLCJmb3JFYWNoIiwid29yZCIsImNvdW50IiwiZGVsZXRlSW5mbyIsImdva2V5IiwiRUtWIiwiRU5URVJfUEFHRSIsIkxFQVZFX1BBR0UiLCJBY2Nlc3NUeXBlIiwiTU9CSUxFX05FVFdPUktfMkciLCJNT0JJTEVfTkVUV09SS18zRyIsIk1PQklMRV9ORVRXT1JLXzRHIiwiTU9CSUxFX05FVFdPUktfTk9ORSIsIl9jYWNoZUV2ZW50cyIsIl9tZW1vcnlFdmVudHMiLCJla3ZzIiwiX2dldENhY2hlRXZlbnRzTGVuZ3RoIiwiX2J1aWxkRWt2cyIsIm1lbW9yeUV2ZW50cyIsImV2ZW50cyIsIl9zZXNzaW9uSWQiLCJldmVudHNNYXAiLCJhZGRFdmVudCIsImV2ZW50IiwidW5zaGlmdCIsIl9ub1Nlc3Npb25FdmVudHMiLCJnZXRFa3ZzIiwidG9TdHJpbmciLCJIZWFkZXIiLCJidWlsZEJvZHkiLCJRdWV1ZSIsIk1BWF9RVUVVRV9DT1VOVCIsIl9lbnF1ZXVlUmVxdWVzdCIsImNsaWVudCIsIl9hcGx1c19jbGllbnQiLCJoZWFkZXIiLCJnZXROZXRJbmZvIiwibm9DYWNoZSIsIl9xdWV1ZSIsImVucXVldWUiLCJfc2VuZFF1ZXVlIiwiY29tcGxldGVkQ2FsbGJhY2siLCJmcm9udCIsImRlcXVldWUiLCJfZmFpbFJlcXVlc3RzIiwiX3Byb2Nlc3NGYWlsUmVxdWVzdHMiLCJfc3RhcnRTZW5kIiwiX3J1bm5pbmciLCJSZXF1ZXN0UXVldWUiLCJpdGVtcyIsImFjY2VzcyIsIm5ldHdvcmtUeXBlIiwidG9Mb3dlckNhc2UiLCJhY2Nlc3Nfc3VidHlwZSIsImdldEhlYWRlckluZm8iLCJpbXByaW50IiwiZGV2aWNlX3R5cGUiLCJzZGtfdmVyc2lvbiIsImFwcGtleSIsImRldmljZV9pbmZvIiwiYXBwaWQiLCJhcHBfZW52IiwiYXBwRW52IiwiYXBwX3ZlcnNpb24iLCJzeXN0ZW1JbmZvIiwic2FmZUFyZWEiLCJtb2RlbCIsInBsYXRmb3JtIiwiYnJhbmQiLCJicmFuZEwiLCJzZGtfdHlwZSIsInBsYXRmb3JtX3Nka192ZXJzaW9uIiwiU0RLVmVyc2lvbiIsInBsYXRmb3JtX3ZlcnNpb24iLCJwbGF0Zm9ybVZlcnNpb24iLCJzY3JlZW5XaWR0aCIsInBpeGVsUmF0aW8iLCJoIiwic2NyZWVuSGVpZ2h0IiwicmVzb2x1dGlvbiIsInBpeGVsX3JhdGlvIiwib3MiLCJmb250X3NpemVfc2V0dGluZyIsImZvbnRTaXplU2V0dGluZyIsImRldmljZV9tb2RlbCIsImRldmljZV9icmFuZCIsImRldmljZV9tYW51ZmFjdHVyZXIiLCJkZXZpY2VfbWFudWlkIiwiZGV2aWNlX25hbWUiLCJvc192ZXJzaW9uIiwibGFuZ3VhZ2UiLCJuZXRJbmZvIiwiX2J1aWxkSGFsZlNlc3Npb24iLCJzZXNzaW9uIiwic3QiLCJhbmFseXRpY3MiLCJzZXNzaW9ucyIsIl9idWlsZENsb3NlU2Vzc2lvbiIsIl9idWlsZEVrdiIsImdldFVybCIsInJob3N0Iiwic2RrUmVxdWVzdCIsInNyY1N1Y2Nlc3MiLCJzcmNGYWlsIiwiaXNUaW1lb3V0IiwicmVzcCIsImNsZWFyVGltZW91dCIsImh0dHBSZXF1ZXN0Iiwic2V0VGltZW91dCIsIk1BWF9SRVFVRVNUX1RJTUVPVVQiLCJzYXZlSW1wcmludCIsImltcHJpbnRNYW5hZ2VyIiwiZ2V0SW1wT2JqIiwiYnVpbGRIdHRwSGVhZGVyIiwiaGVhZGVyVHlwZSIsImlzTXkiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiTXNnLVR5cGUiLCJtYW5nbGUiLCJiYXNlNjQiLCJmYWlsQ2FsbGJhY2siLCJwX2hlYWRlciIsImFsaXBheV9pZCIsInVuaW9uaWQiLCJ1c2VySWQiLCJvcGVuaWQiLCJ1c2VyX25pY2siLCJhY3RpdmVfdXNlciIsInB1aWQiLCJwcm92aWRlciIsInRyYWNlSWQiLCJtYW5nbGVEYXRhIiwicmVxdWVzdERhdGEiLCJlbmNvZGUiLCJzdGF0dXNDb2RlIiwiY29kZSIsImNvbXBsZXRlIiwiX21hbmdsZUhlYWRlciIsIm1hcCIsIl9tYW5nbGVPYmoiLCJpZF90cmFja2luZyIsImlkTWFwIiwiX21hbmdsZUFuYWx5dGljcyIsInByb3AiLCJhbmFseXRpY3NNYXAiLCJoZWFkZXJNYXAiLCJpZF90eXBlIiwiX2lkIiwidGVzdFRva2VuIiwidXVpZCIsImFub255bW91c2lkIiwiZGV2aWNlX2lkIiwidXNlcmlkIiwiSW1wcmludE1hbmFnZXIiLCJfaW1wcmludCIsImRlY29kZSIsImdldEl0ZW0iLCJpbXBvYmoiLCJiNjRjaGFycyIsImI2NHRhYiIsImJpbiIsImNoYXJBdCIsImZyb21DaGFyQ29kZSIsIlN0cmluZyIsImNiX3V0b2IiLCJjYyIsImNoYXJDb2RlQXQiLCJyZV91dG9iIiwidXRvYiIsInUiLCJjYl9lbmNvZGUiLCJjY2MiLCJwYWRsZW4iLCJvcmQiLCJjaGFycyIsImJ0b2EiLCJiIiwiX2VuY29kZSIsInVyaXNhZmUiLCJtMCIsInJlX2J0b3UiLCJjYl9idG91IiwiY2NjYyIsImNwIiwib2Zmc2V0IiwiYnRvdSIsImNiX2RlY29kZSIsImF0b2IiLCJfZGVjb2RlIiwibWF4Q291bnQiLCJfbWF4Q291bnQiLCJfaXRlbXMiLCJzaXplIiwiaXNFbXB0eSIsInByaW50IiwibWFrZUNhY2hlTnVtIiwiZmxvb3IiLCJpc1N0YXJ0V2l0aCIsInMxIiwiczIiLCJpc0VuZFdpdGgiLCJsMSIsImwyIiwiYW55IiwiaXNOdW1iZXIiLCJpc05hTiIsImlzQ29udGFpbiIsImNvbnN0cnVjdG9yIiwiZ2V0VXJsUGFyYW1zIiwicmVnZXgiLCJsb2NhdGlvbiIsImhyZWYiLCJpc0VtcHR5T2JqZWN0IiwidGFyZ2V0T2JqIiwiYXJnc09iaiIsInRvIiwibmV4dFNvdXJjZSIsImJ1aWxkUGF0aCIsInFzIiwicXNzIiwiY3VycmVudFBhdGgiLCJwYWdlT3B0aW9uTWFwIiwic2V0Q3VycmVudFBhdGgiLCJnZXRQYWdlUXVlcnkiLCJzZXRQYWdlUXVlcnkiLCJnZXRGdWxsUGF0aCIsImdldFBhZ2VOYW1lIiwibWV0YSIsInJlYWxQYXRoIiwicmVnUnVsZSIsInBhZ2VOYW1lIiwiZ2V0VlRSZWFsdGltZUNvZGUiLCJyZWdFeHAiLCJkZWNvZGVVUklDb21wb25lbnQiLCJnZXRVdG1QYXJhbXNPYmoiLCJlYWNoTWFwIiwiaGFuZGxlclNoYXJlQXBwTXNnIiwib3B0IiwicGFnZSIsInJvdXRlIiwiaXMiLCJsaW5rUGFybWFzIiwiZm9ybWF0Iiwib2JqMnBhcmFtIiwiJCRfc2hhcmVfdWlkIiwiX19FVEFHX19DTkFfX0lEX18iLCIkJF91dG1fbWVkaXVtIiwiYXBwZW5kUGFyYW1zIiwib25QdWxsRG93blJlZnJlc2giLCJvblJlYWNoQm90dG9tIiwidGhhdCIsIm9uUGFnZUxvYWQiLCJhcHBlbmRNZXRhSW5mbyIsIl9jdXJyZW50UGFnZSIsIm9uUGFnZVNob3ciLCJvblBhZ2VSZWFkeSIsIm9uUGFnZUhpZGUiLCJvblBhZ2VVbmxvYWQiLCJvbkFwbHVzQ2xrIiwib25BcGx1c1RvdWNoIiwicmV3cml0ZVNoYXJlIiwib25TaGFyZUFwcE1lc3NhZ2UiLCJvbGRPblNoYXJlQXBwTWVzc2FnZSIsInNoYXJlUmVzdWx0IiwicmV3cml0ZVNoYXJlVGltZWxpbmUiLCJvblNoYXJlVGltZWxpbmUiLCJvbGRPblNoYXJlVGltZWxpbmUiLCJpbmplY3RQYWdlIiwib2xkUGFnZSIsIlBhZ2UiLCJwYWdlT3B0aW9ucyIsImluamVjdENvbXBvbmVudCIsIm9sZENvbXBvbmVudCIsIkNvbXBvbmVudCIsIm1ldGhvZHMiLCJpbmplY3RNaWR3YXkiLCJtcEN0eCIsImsxIiwic2tpcEVuY29kZSIsImlzSW5QbGFuT2JqIiwiX3ZhbHVlIiwicGFyYW0yb2JqIiwiZnJhZ21lbnQiLCJzbGljZSIsImNvbW1UcmFuc2xhdGUiLCJfdiIsImVuY29kZUdva2V5VmFsdWUiLCJwdXNoUXVldWUiLCJhcmdzIiwiX3NlbGYiLCJfZ2V0TmV0d29ya1R5cGUiLCJnZXROZXR3b3JrVHlwZSIsIl9nZXRTeXN0ZW1JbmZvIiwiZW1wdHlPYmoiLCJzeXNJbmZvIiwiU1lTVEVNX0lORk8iLCJ2ZXJzaW9uIiwiZ2V0U3lzdGVtSW5mbyIsIl9nZXRBY2NvdW50SW5mb1N5bmMiLCJnZXRBY2NvdW50SW5mb1N5bmMiLCJhY2NvdW50SW5mbyIsIm1pbmlQcm9ncmFtIiwicGx1Z2luIiwiYXBwVmVyc2lvbiIsImVudlZlcnNpb24iLCJwbHVnaW5BcHBJZCIsInBsdWdpbkFwcFZlcnNpb24iLCJnZXRBcHBJZFN5bmMiLCJhcHBJbmZvIiwic3RhdGUiLCJ0b0xvY2FsZVVwcGVyQ2FzZSIsInN5c3RlbSIsImhvc3QiLCJlbnYiLCJQdWJTdWIiLCJhcGx1c19wdWJzdWIiLCJjcmVhdGUiLCJCYXNlIiwiZ2V0QXJncyIsIl9hcmdzIiwiaiIsImV4dGVuZCIsImNhbGxhYmxlIiwicHJvcHMiLCJpbnN0YW5jZSIsImhhbmRsZXJzIiwicHVicyIsInNldEhhbmRsZXJzIiwic3Vic2NyaWJlIiwiZVR5cGUiLCJ1bnN1YnNjcmliZSIsInMiLCJoX3N0ciIsInNfc3RyIiwic3BsaWNlIiwicHVibGlzaCIsImNhY2hlUHVicyIsIlN1YkJhc2UiLCJGIiwiZXJyIiwiXyQiLCJpc190ZXJtaW5hbCIsInNlbmRfcHZfY291bnQiLCJtZXRhX2luZm8iLCJxR2V0Iiwic2V0TWV0YUluZm8iLCJpc0ludGVybmF0aW9uYWwiLCJnZXRJbmZvIiwibGFzdF9pbmZvIiwidXRpbFB1YnN1YiIsIk9CSkVDVCIsIlNUUklORyIsImZsYWciLCJwcm9jZXNzT2JqZWN0Iiwib2xkX3ZhbHVlIiwibmV3X3ZhbHVlIiwidG9TZXRNZXRhSW5mbyIsInByb2Nlc3NBcnJheSIsInByb2Nlc3NPYmoiLCJfc2V0TWV0YUluZm8iLCJmcm9tIiwiX29sZFZhbHVlIiwicGFnZVByb3BlcnRpZXMiLCJfayIsInRtcF9wYXJzZSIsImFyZzEiLCJkZWZhdWx0TW9kZSIsIm1vZGUiLCJtZXRhTmFtZSIsIm1ldGFWYWx1ZSIsIm1zZ3MiLCJkb1B1Yk1zZyIsImRvQ2FjaGVQdWJzIiwiZ2V0UHVic3ViIiwicHVic3ViIiwiZG9TdWJNc2ciLCJjb2xsZWN0X2NsayIsInV0aWxBcnJheSIsImFwbHVzQ3R4IiwiY2xrX2NvbmZpZyIsImluaXRDbGsiLCJlbGVtZW50c1F1ZXJ5UmVzdWx0Q2FsbGJhY2siLCJlbGVtZW50cyIsImVsZW1lbnRzR3JvdXBzIiwid2F0Y2hfY2xpY2siLCJzcG1CIiwiY3NzU2VsZWN0b3IiLCJmaWVsZHMiLCJkYXRhc2V0Iiwic2Nyb2xsT2Zmc2V0IiwiZ2V0RGF0YVNldCIsIl9hcGx1c19hdXRvX2V4cCIsIl9oYXNoTWFwIiwiaGFzaE1hcCIsImxvZ2tleSIsImVsZV9zIiwiZXhwQ29uZmlnIiwiaGFzaCIsImdldEhhc2hLZXkiLCJoYXNoX3ZhbHVlIiwid2F0Y2hUcmFja2VyIiwicmF4VXRpbCIsImNsa0luZm8iLCJpc0luQXJlYSIsImVsZUluZm8iLCJjaGFuZ2VkVG91Y2giLCJjaGFuZ2VkVG91Y2hlcyIsImRldGFpbCIsIngiLCJjbGllbnRYIiwieSIsImNsaWVudFkiLCJfdG9wIiwiX2JvdHRvbSIsInNjcm9sbFRvcCIsInJlc3VsdHMiLCJncm91cCIsInNwbURhdGEiLCJfc3BtRGF0YSIsInRyYWNrZXJQYXJhbXMiLCJkb2N1bWVudCIsImRvbURhdGFTZXQiLCJzcG1DIiwiZCIsInNwbUQiLCJ0cmFja2VyIiwiZWxlbWVudCIsInJlZHVjZSIsInByZXZpb3VzIiwiY3VycmVudCIsIm1hdGNoZWRSZXN1bHQiLCJwcmV2aW91c0VsZW1lbnQiLCJjdXJyZW50RWxlbWVudCIsInB1c2hFdmVudCIsImdldFVzZXJJbmZvIiwidXNlckZuTmFtZSIsInVzZXJGbiIsInVzZXJJbmZvIiwiZ2V0Rml4ZWROdW1iZXIiLCJfcmVzdWx0IiwiX251bSIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwidXRpbExvZ2dlciIsInJlY29yZEV4cE1hcFF1ZXVlIiwiREVGQVVMVF9QS0dfU0laRSIsIlBPU1QiLCJFdmVudEFycmF5IiwiYnVmZmVyIiwicGtnU2l6ZSIsImdva2V5cyIsImNvbWJpbmVSZWNvcmQiLCJnbWtleSIsImRhdGFrZXkiLCJfdyIsIl9oIiwiX3giLCJfeSIsIl9yYXRlIiwidmlld2FiaWxpdHlSYXRlIiwiaW50ZXJzZWN0aW9uUmF0aW8iLCJfdmlld2FiaWxpdHkiLCJfdnQiLCJfdHJhY2tlclBhcmFtcyIsInRyYWNrZXJwYXJhbXMiLCJleGRhdGEiLCJleGFyZ3MiLCJjdXN0b21BcmdzIiwicmVjb3JkIiwid2F0Y2hSZWNvcmQiLCJjZmciLCJjbGVhclJlY29yZCIsInByZWZpeCIsImxvZ2dlciIsImxldmVsIiwiZGVidWdMb2ciLCJhcGx1c0RlYnVnIiwiZWxlbWVudEF0dHIiLCJoYXNoS2V5IiwicG9zaXRpb25TZWxlY3RvciIsImNseCIsImRvbXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwidHAiLCJpc1JheCIsImZsYXQiLCJpbmRleG9mIiwiaXRlbU1hdGNoIiwibWF0Y2hlZCIsInNvbWUiLCJjb2xsZWN0X2V4cCIsIlBBR0VfREFUQV9NQVAiLCJ3YXRjaE1ldGFJbmZvIiwiaXNGaXJzdCIsIndhdGNoVHlwZSIsImhhbmRsZXJNZXRhSW5mbyIsIm1ldGFLZXkiLCJfY29uZmlnMiIsImdldEF1dG9FeHBDb25maWciLCJfY29uZmlnIiwid2F0Y2hfZXhwb3N1cmUiLCJpbml0RXhwIiwicmVzZXRBdXRvRXhwIiwiX3BhdGgiLCJfY3VycmVudERhdGEiLCJpc1N0YXJ0IiwiaXNGaXJzdFRvdWNoIiwibWluaVV0aWwiLCJvYnNlcnZlcnMiLCJjb25mIiwicmVsb2FkQ3R4Iiwid2FpdCIsImhhc2hpbmciLCJzdWJqZWN0IiwidHlwZSIsImR1cCIsIm5ld09ic2VydmVyIiwiaW5pdE9ic2VydmVyIiwiY2hlY2tJc0luSGFzaE1hcCIsInVwZGF0ZUhhc2hNYXAiLCJhZGRPYnNlcnZlIiwiZW50cnkiLCJfaW5kZXgiLCJfZW50cnkiLCJleHBvc3VyZUhhbmRsZSIsImV4aXN0IiwidGhyZXNob2xkcyIsIkFVVE9fQVRfVklFV19SQVRFIiwiaW5pdGlhbFJhdGlvIiwiaXNNWSIsImNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyIiwib2JzZXJ2ZUFsbCIsIm9ic2VydmVyIiwiY3NzIiwicmVsYXRpdmVUbyIsIm9ic2VydmUiLCJyZWxhdGl2ZVRvVmlld3BvcnQiLCJleHBvc3VyZVRpbWUiLCJleHBFbGVtZW50cyIsImNoZWNrU3RhcnQiLCJ0ZW1wcyIsIl9lbGVQb3MiLCJkZWZhdWx0UmF0aW8iLCJyZXNldCIsImRpc2Nvbm5lY3QiLCJnZXRNZXRhVmFsdWUiLCJ1dGlsTWV0YSIsImdldE1ldGFDbnQiLCJEQVRBX0FQTFVTX0FFX0tFWSIsIkRBVEFfQVBMVVNfQUNfS0VZIiwiREFUQV9BUExVU19TUE1fQU5DSE9SX0lEX0tFWSIsIkRBVEFfQVBMVVNfVlRfSVRFTV9JTkRFWF9LRVkiLCJMT09QX1RJTUUiLCJnZXREZWZhdWx0UmVxdWVzdENmZyIsImdldEF1dG9FeHBWaWV3UmF0ZSIsImRlZmF1bHRfdmFsdWUiLCJyYXRlIiwidmlzaWJsZV9yYXRlIiwiZ2V0QXV0b0V4cER1cmF0aW9uIiwidG1wX2R1cmF0aW9uIiwiZHVyYXRpb25fbiIsInBhcnNlSW50IiwiRVhQX0RVUkFUSU9OIiwiZ2V0QXV0b0NvbmZpZyIsImNvbmZpZ0tleSIsIm1ldGFPYmoiLCJhcGx1c0F1dG9FeHAiLCJjb25maWdzIiwidG1wX3RhZ19maWx0ZXIiLCJ0bXAiLCJ0YWciLCJmaWx0ZXIiLCJ3aG9sZVNlbGVjdG9yIiwiRXJyb3IiLCJ0YWdfZmlsdGVyIiwiZWxlbWVudFNlbGVjdG9yIiwiZ2V0QXV0b0V4cFVzZXJGbiIsImFlQXV0b1VzZXJGbiIsImlzVGhyb3R0bGVXYXRjaERvbSIsImdldEF1dG9DbGtDb25maWciLCJnZXRBdXRvQ2xrVXNlckZuIiwiYWNBdXRvVXNlckZuIiwiZ2V0TWV0YVRhZ3MiLCJmb3JjZSIsIl9oZWFkX25vZGUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIl9tZXRhX25vZGVzIiwiY29udGVudCIsIm1ldGFfbm9kZXMiLCJ1dGlsQXR0cmlidXRlIiwidHJ5VG9HZXRBdHRyaWJ1dGUiLCJnZXRPbmVQYWdlSW5mbyIsImlzb25lcGFnZSIsInVybHBhZ2VuYW1lIiwiaXNvbmVwYWdlX2RhdGEiLCJhcnJfY29udGVudCIsImF0dHJfbmFtZSIsImdldEF0dHJpYnV0ZSIsInRyeVRvU2V0QXR0cmlidXRlIiwiYXR0cl92YWx1ZSIsInNldEF0dHJpYnV0ZSIsInRyeVRvUmVtb3ZlQXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwicmVzZXRMYXN0UGFnZVNwbSIsInNwbV9jbnQiLCJsaXN0ZW4iLCJwYWdlSW5zdGFuY2UiLCJjdXJyZW50UGFnZVBhdGgiLCJtYXRjaFVybCIsInNldFBhZ2VTUE0iLCJzcG1BIiwic3BtYWIiLCJzcG1DbnQiLCJzcG1hYnN0ciIsImN1cnJlbnRQYWdlIiwicHJlUGFnZSIsInByZVByZVBhZ2UiLCJjdXJyZW50UGFnZVNwbSIsInBhZ2VfcmVmZXJyZXIiLCJzcG1fcHJlIiwic3BtUHJlIiwic3BtX3VybCIsInNwbVVybCIsIk1haW4iLCJtYWluIiwiaGFuZGxlRXZlbnQiLCJtYWluX2Jhc2VfaHR0cCIsImhhbmRsZXJNaWRkbGV3YXJlIiwidXNlckV2ZW50QXJncyIsInVzZXJkYXRhIiwibG9nZGF0YSIsIndoYXRfdG9fc2VuZCIsImV2ZW50X2FyZ3MiLCJzZGtBcmdzIiwicmVmZXJfcGFnZSIsInNoYXJlX3R5cGUiLCJ0YXJnZXRBcHBLZXkiLCJjbG9uZVAiLCJjdXNwIiwiZXZlbnRfY29kZSIsInB2YXJncyIsInBhZ2VfaWQiLCJyIiwiX3BhZ2VfYXV0b19wdiIsImlzX2F1dG8iLCJyZWZfdXJsIiwicmVmZXJyZXIiLCJwcmUiLCJfcGFnZV9hdXRvX2lkIiwicGFnZV9zdGFydCIsIndhdGNoTE9HIiwidXRpbEdRIiwic3Vic2NyaWJlTG9ncyIsInB1c2hJbnRvR29sZGxvZ1F1ZXVlIiwib3JpRGF0YXMiLCJnZXRMb2dpY1N5bWJvbCIsIm5hbWVzIiwiYXBsdXNfMSIsImFwbHVzXzIiLCJwcm9wc1R5cGUiLCJnZXRMb2dDb25maWciLCJsb2dDb25maWciLCJwYWdlTG9hZFRpbWUiLCJQQUdFX0xPQURfVElNRSIsInV0aWxFdGFnIiwiRU1QVFlfQ05BIiwiX3N5bmNFdGFnIiwiY2hlY2siLCJjbmEiLCJldGFnU3RvcmFnZUtleSIsImZldGNoRXRhZ1N0YXR1cyIsInRvU3luY0V0YWciLCJhcGx1c19yaG9zdF92IiwiZWdVcmwiLCJldGFnIiwiZXRhZ0tleVZhbHVlIiwiZXRhZ3MiLCJyZXMyIiwiQ05BIiwiZXRhZ1RpbWVvdXQiLCJkZWZhdWx0VGltZSIsInRpbWUiLCJ1dGlsRGF0YSIsInV0aWxUcmltIiwidXRpbFN0b3JlIiwidHJ5VG9EZWNvZGVVUklDb21wb25lbnQiLCJkZWZhdWx0X3ZhbCIsInBhcnNlU2VtaWNvbG9uQ29udGVudCIsImRpY3QiLCJ1bmRlY29kZSIsImEyIiwiYV9sZW4iLCJub2RlTGlzdFRvQXJyYXkiLCJub2RlcyIsImdldExzQ25hIiwiX2xzX2NuYSIsIl9hcnIiLCJzZXRMc0NuYSIsInRvZGF5Iiwicmhvc3RfdiIsImN1c3RvbV9ob3N0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInRlc3RLZXkiLCJyZW1vdmVJdGVtIiwiZ2V0QXBsdXNXYWl0aW5nIiwid2hlbl90b19zZW5kcHYiLCJpc1dhaXQiLCJnZXRIb3N0VXJsIiwid2hlcmVfdG9fc2VuZCIsImxvZ0lkIiwidXRpbFBhcmFtcyIsIkNOVCIsIlVSTCIsIlBSRSIsImdldENvbW1vblBhcmFtcyIsInBsYXRmb3JtVHlwZSIsIl9kZXZfaWQiLCJfYW5vbnlfaWQiLCJfdXNlcl9pZCIsIl91c2VyX25pY2siLCJfc2Vzc2lvbl9pZCIsInVhaWQiLCJsb2dJZEtleSIsImxvZ0lkS2V5MiIsInRpdGxlIiwiZ2V0TG9nSWQiLCJhcHBLZXkiLCJjb21tb25QYXJhbXMiLCJzZGtfaW5mbyIsImpzdmVyIiwiY3VzdG9tU2RrSWQiLCJ0aW1lWm9uZSIsImdldFRpbWVab25lIiwicHZpZCIsInNlc3Npb25BcmdzIiwiZ2xvYmFsQXJncyIsImdldFB2UGFyYW1zIiwibWFuc25kbG9nIiwibG9ndHlwZSIsImV2ZW50X3RpbWVzdGFtcCIsImdldEhqbGpQYXJhbXMiLCJoamxqUGFyYW1zIiwicmVjb3JkVHlwZSIsImdldENoYXJzIiwiZGVmYXVsdFZhbCIsInV0aWxIYXNoIiwiZ2V0UmFuZG9tSWQiLCJoYW5kbGVQVklkIiwiY2hhclBvcyIsImNoYXJzV2l0aG91dEciLCJjaGFyc1dpdGhvdXRMIiwicm5kX3N0cnMiLCJoYW5kbGVkIiwicGFnZVVybCIsImxvZ05hbWUiLCJyYW5kb204Q2hhcnMiLCJyYW5kb200Q2hhcnMiLCJyYW5kb202Q2hhcnMiLCJjaCIsImRlZl92IiwiX3RpbWVab25lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJfYW5kIiwiem9uZSIsImFicyIsInJlbWFpbmRlciIsInJlbWFpbmRlclpvbmUiLCJpc1RCRW52Iiwid2luZG1pbGwiLCJnZXRVc2VyZGF0YSIsImNvbWJvVXNlcmRhdGEiLCJwYWdlUHJvcGVydHkiLCJ1cGRhdGVQcmUiLCJ1cGRhdGVVcmwiLCJ1cGRhdGVTcG1VcmwiLCJnZXRVc2VyRGF0YSIsIl9hcGx1c19hcGkiLCJhcGx1c09iaiIsIm1zZ0FyciIsIlJlZHVjZXIiLCJpc1RyaXZlciIsIl9nZXRQYWdlU3BtIiwic3ViVHlwZSIsInNwbVR5cGUiLCJfc2VuZCIsIl9yZXF1ZXN0VlRDb25maWciLCJfc2VuZFBWIiwicmVkdWNlciIsInB1YnN1YlR5cGUiLCJtaWRkbGV3YXJlTWVzc2FnZUtleSIsIl9jb21iaW5lUmVjb3JkIiwic2VuZHRvbXkiLCJzY20iLCJhcGx1c0NvbnRlbnRJZCIsIl9hcGx1c19zZW5kdG9teSIsIl9nb2tleXMiLCJfcmVjb3JkIiwiZ2V0UGFnZVNQTSIsIl9zZXRQYWdlU1BNIiwiX3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzIiwicmVwb3J0QW5hbHl0aWNzIiwic3BtRGV0YWlsIiwiaWdub3JlRGVmYXVsdFBhZ2VNb25pdG9yIiwiX3VwZGF0ZU5leHRQYWdlUHJvcGVydGllcyIsImV2ZW50aWQiLCJjb21OYW1lIiwiYXJnMiIsImFyZzMiLCJwYXJhbSIsImNhbGxVc2VyVHJhY2siLCJfYXBwZW5kTWV0YUluZm8iLCJfc2tpcFBhZ2UiLCJfcGFnZUFwcGVhciIsImlzUGFnZURpc0FwcGVhciIsImlzUGFnZUFwcGVhciIsIl9wYWdlRGlzYXBwZWFyIiwiX3VwZGF0ZVBhZ2VVdHBhcmFtIiwidXRQYXJhbUpzb24iLCJfdXBkYXRlTmV4dFBhZ2VVdHBhcmFtIiwiX3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzIiwiZXh0RGF0YSIsIl9nZXRQYWdlU3BtVXJsIiwiX2dldFBhZ2VTcG1QcmUiLCJfc2V0UGFnZU5hbWUiLCJjdXJQYXRoIiwicGFnZU1ldGEiLCJfZ2V0RWxlbWVudFNQTSIsInNwbUNEIiwidGFyZ2V0U3BtIiwiYXV0b19jbGtfbWV0YWluZm8iLCJhdXRvX2V4cF9tZXRhaW5mbyIsImNsa19pbmZvIiwiZXhwX2luZm8iLCJfcmVjb3JkQXBwTGluayIsIkNvbXBvc2UiLCJwbHVnaW5zTG9hZGVyIiwiQ09ORklHIiwicGwiLCJtaWRkbGV3YXJlIiwiYXBwIiwiY29tcG9zZSIsIndyYXAiLCJtZXNzYWdlRm5RdWV1ZSIsImNhbGxlZExpc3QiLCJzZXRDYWxsZWRMaXN0IiwicmVzZXRDYWxsZWRMaXN0IiwibXciLCJtYXhUaW1lb3V0Iiwic2xlZXBIYW5kZXIxIiwiX3RpbWVfb3V0IiwiX213X25hbWUiLCJwbHVnaW5zX25hbWUiLCJwdWJzdWJJbmZvIiwicXVlIiwiZ2V0Rm9ybWF0UXVldWUiLCJxdWV1ZSIsInByb2Nlc3NHb2xkbG9nUXVldWUiLCJmb3JtYXRRdWV1ZSIsImdldEFwbHVzSG9sZFR5cGUiLCJmaWx0ZXJUYXNrIiwidGFzayIsImhvbGRUeXBlIiwiU1RBUlQiLCJBUExVU19IT0xEX1FVRVVFIiwicHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUiLCJBUExVU19IT0xEX1VTRVJJRF9RVUVVRSIsIkFQTFVTX0hPTERfQU5PTllfUVVFVUUiLCJnZXRNZXRob2ROYW1lIiwiUVVFVUUiLCJkZWxheVRhc2tzIiwicHJvY2Vzc1Rhc2siLCJzdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUiLCJxdWV1ZU5hbWUiLCJfZm4iLCJxdWV1ZU1hcCIsInN1YnNjcmliZU13Q2hhbmdlUXVldWUiLCJzdWJzY3JpYmVNZXRhUXVldWUiLCJzdWJzY3JpYmVRdWV1ZSIsIm1ldGFRdWV1ZSIsIm90aGVyc1F1ZXVlIiwiYWMiLCJwcm9jZXNzQXBsdXNRdWV1ZSIsInN0YXJ0TGVuZ3RoIiwiYXV0b1RyYWNrZXIiLCJldmVudEhhbmRsZSIsImV2ZW50TmFtZSIsInBkcl9jb25maWciLCJwYWdlbmFtZSIsInJiX2NvbmZpZyIsInNoYXJlX2NvbmZpZyIsIl9oYXNUcmFja2VkIiwiZXh0cmFQYXJhbXMiLCJpc01pbmkiLCJzZW5kUFYiLCJnZXRDb25maWciLCJmZXRjaFZlcmlmeUNvbmZpZyIsImFwcEluZm9JZCIsImFwaV9ob3N0IiwidmVyaWZ5X2hvc3QiLCJ2ZXJpZnlVcmwiLCJjZmdEYXRhIiwiX2JlZ2luTG9hZCIsIl9taW5pY2ZnX2xvYWQiLCJfYXBsdXNfdnRfY2ZnIiwidXRpbFZUIiwidnQyYXV0b0V2ZW50Iiwib25DbGljayIsImlzQXV0byIsIk1JTklfVlRfQ09ORklHX0ZPUk1BVCIsInBhZ2VDb25maWciLCJlbmFibGVkIiwiRmV0Y2hDb25maWciLCJfYXBsdXNfYWxlYWR5X2xvYWRfbWluaXZ0IiwiZmMiLCJ1dGlsQ2F0Y2giLCJtaW5pdnRTdG9yZSIsIk1JTklfVlRfQ09ORklHX0JBQ0siLCJHT0xETE9HX1BVQkxJU0giLCJwYXRobmFtZSIsIm9yaWdpblNwbSIsInVwZGF0ZUNmZ0xzIiwiZmV0Y2hGcm9tQ2RuIiwicmVxdWVzdFZUQ29uZmlnIiwicG9pbnRzIiwic2V0Q29uZmlnSW50b0xzIiwiZW5hYmxlIiwiY2F0Y2hFeGNlcHRpb24iLCJnZXRNaW5pVnREYXRhIiwiY2RucGF0aCIsInByZVVybCIsImZyb21DRE4iLCJ2dENvbmZpZyIsImZldGNoRnJvbUxTIiwic3luY01pbmlWdERhdGEiLCJnZXRWdENvbmZpZ1BhdGgiLCJHT0xETE9HX1NVQlNDUklCRSIsImZpbGVuYW1lIiwibWVzc2FnZSIsImxzTWluaXZ0Q29uZmlnS2V5IiwiZ2V0TWluaVZ0VHBsQ2RuUGF0aCIsImFwbHVzVHJhY2tDb25maWdJZEluZm8iLCJ0dXJub24iLCJzcG1JZCIsInRlbXBsYXRlVmFsIiwic3BtQUIiLCJnZXRTdG9yYWdlU3luYyIsInNldFN0b3JhZ2VTeW5jIiwibWVyZ2VBdXRvQ2ZncyIsImNmZzEiLCJjZmcyIiwiZ2V0SW5kZXgiLCJ0b3RhbEF1dG9DZmdzIiwiZmluYWxBdXRvQ2ZncyIsImFycmF5IiwicmVtb3ZlQXV0b0NmZ3NGcm9tVnQiLCJmb3JtYXRTZWxlY3RvciIsImdldEN1cnJlbnRQYWdlVlRDZmciLCJ2dENmZyIsInZ0X2NmZyIsIl9hcGx1c190cmFja2luZ19jZmciLCJhdXRvX2V4cF9hcnIiLCJhdXRvX2Nsa19hcnIiLCJwYyIsInNldFBhZ2VOYW1lIiwidHJhY2tlclR5cGUiLCJ0ZW1wbGF0ZSIsInN0ZElkIiwiY29tbW9uX2V4ZGF0YSIsImNvbW1vbl9wdmRhdGEiLCJvbGRfYXV0b19leHBfYXJyIiwib2xkX2F1dG9fY2xrX2FyciIsImFwbHVzaW5pdCIsInNpdGVJZCIsIlJVTk5JTkciLCJhcGx1c1N0YXR1cyIsImNvbmZpZ19wdl9jb250ZXh0IiwiUExVR0lOU19QViJdLCJtYXBwaW5ncyI6IjtBQUFBQSxPQUFPQyxVQUNFLFNBQVVDO0lDR25CLFNBQUFDLEVBQUFDO1FBR0EsSUFBQUMsRUFBQUQsSUFDQSxPQUFBQyxFQUFBRCxHQUFBSDtRQUdBLElBQUFELElBQUFLLEVBQUFEO1lBQ0FIO1lBQ0FLLElBQUFGO1lBQ0FHLFNBQUE7O1FBVUEsT0FOQUwsRUFBQUUsR0FBQUksS0FBQVIsRUFBQUMsU0FBQUQsS0FBQUMsU0FBQUUsSUFHQUgsRUFBQU8sVUFBQSxHQUdBUCxFQUFBQzs7SUF2QkEsSUFBQUk7SUFxQ0EsT0FUQUYsRUFBQU0sSUFBQVAsR0FHQUMsRUFBQU8sSUFBQUwsR0FHQUYsRUFBQVEsSUFBQSxJQUdBUixFQUFBO0lET00sU0FBVUgsR0FBUUMsR0FBU0U7SUFFaENILEVBQU9DLFVBQVVFLEVBQW9CO0dBS2hDLFNBQVVILEdBQVFDLEdBQVNFO0lFMUNqQztJQUNBQSxFQUFBLEdBQUFTLGNBQ0FaLEVBQUFDLFVBQUEsU0FBQVk7UUFDQSxJQUFBQyxJQUFBWCxFQUFBO1FBQ0EsT0FBQUEsRUFBQSxJQUFBVSxHQUFBQzs7R0Y0RE0sU0FBVWQsR0FBUUMsR0FBU0U7SUdqRWpDO0lBRUEsSUFRQVksR0FSQUMsSUFBQWIsRUFBQSxJQUVBYyxJQUFBRCxFQUFBQyxPQUNBQyxJQUFBRixFQUFBRSxhQUVBQyxJQUFBSCxFQUFBRyxTQUNB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bmlfY2xvdWRfdW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9XG4vKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFwbHVzX21pbmlfY2xvdWQuanNcblx0ICog5LqR5LiK5bCP56iL5bqP5qih5Z2X5YyW55qEYXBsdXNKc+WFpeWPo1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyKS5pbml0R2xvYmFsKCk7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwcENvbmZpZykge1xuXHQgIHZhciBhcGx1c19jb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOyBcblx0ICByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCkoYXBwQ29uZmlnLGFwbHVzX2NvbmZpZyk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDmk43kvZxhcGx1c+eahOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgQVBMVVMgPSBhcGx1c1N0YXRpYy5BUExVUztcblx0dmFyIEFQTFVTX1FVRVVFID0gYXBsdXNTdGF0aWMuQVBMVVNfUVVFVUU7XG5cdFxuXHR2YXIgR09MRExPRyA9IGFwbHVzU3RhdGljLkdPTERMT0c7XG5cdHZhciBHT0xETE9HX1FVRVVFID0gYXBsdXNTdGF0aWMuR09MRExPR19RVUVVRTtcblx0XG5cdHZhciBfYXBsdXNfY29udGV4dDtcblx0dmFyIGlzV2ViID0gZmFsc2U7XG5cdHRyeSB7XG5cdCAgX2FwbHVzX2NvbnRleHQgPSB3aW5kb3c7XG5cdCAgaXNXZWIgPSB0cnVlO1xuXHR9IGNhdGNoIChlKSB7XG5cdCAgX2FwbHVzX2NvbnRleHQgPSB7fTtcblx0fVxuXHRcblx0ZXhwb3J0cy5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBfYXBsdXNfY29udGV4dDtcblx0fTtcblx0XG5cdGV4cG9ydHMuaW5pdEdsb2JhbCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG5cdCAgaWYgKGNvbnRleHQpIHtcblx0ICAgIF9hcGx1c19jb250ZXh0ID0gY29udGV4dDtcblx0ICB9IGVsc2Uge1xuXHQgICAgX2FwbHVzX2NvbnRleHQgPSB7XG5cdCAgICAgIHY6IDEsXG5cdCAgICAgIGFwbHVzOiB7fSxcblx0ICAgICAgYXBsdXNfcXVldWU6IFtdXG5cdCAgICB9O1xuXHQgIH1cblx0ICB2YXIgX2FwbHVzRGVmYXVsdFZhbHVlO1xuXHQgIHZhciBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcblx0ICBpZiAoaXNXZWIpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIF9hcGx1c0RlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1cyB8fCBfYXBsdXNfY29udGV4dC5nb2xkbG9nIHx8IChfYXBsdXNfY29udGV4dC5hcGx1cyA9IHt9KSk7XG5cdCAgICAgIHZhciBfZ29sZGxvZ19xdWV1ZSA9IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlIHx8IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlID0gW10pKTtcblx0ICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgfHwgKF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gW10pKTtcblx0ICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfZ29sZGxvZ19xdWV1ZS5jb25jYXQoX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUpOyAgXG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH0gZWxzZSB7XG5cdCAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1cztcblx0ICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWU7XG5cdCAgfVxuXHQgIFxuXHQgIF9hcGx1c19jb250ZXh0LmFwbHVzID0gX2FwbHVzX2NvbnRleHQuZ29sZGxvZyA9IF9hcGx1c0RlZmF1bHRWYWx1ZTtcblx0ICBfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgPSBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcblx0ICBcblx0ICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG5cdH07XG5cdFxuXHR2YXIgZ2V0R2xvYmFsVmFsdWUgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgaWYgKGtleSA9PT0gQVBMVVMgfHwga2V5ID09PSBHT0xETE9HKSB7XG5cdCAgICB2YXIgZyA9IF9hcGx1c19jb250ZXh0W0FQTFVTXSB8fCBfYXBsdXNfY29udGV4dFtHT0xETE9HXTtcblx0ICAgIGlmICghZykge1xuXHQgICAgICBnID0gX2FwbHVzX2NvbnRleHRbQVBMVVNdID0gX2FwbHVzX2NvbnRleHRbR09MRExPR10gPSB7fTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBnO1xuXHQgIH1cblx0ICB2YXIgZ29sZGxvZ19xdWV1ZSA9IEdPTERMT0dfUVVFVUU7XG5cdCAgdmFyIGFwbHVzX3F1ZXVlID0gQVBMVVNfUVVFVUU7XG5cdCAgaWYgKGtleSA9PT0gYXBsdXNfcXVldWUgfHwga2V5ID09PSBnb2xkbG9nX3F1ZXVlKSB7XG5cdCAgICB2YXIgcSA9IF9hcGx1c19jb250ZXh0W2FwbHVzX3F1ZXVlXSB8fCBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXTtcblx0ICAgIGlmICghcSkge1xuXHQgICAgICBxID0gX2FwbHVzX2NvbnRleHRbYXBsdXNfcXVldWVdID0gX2FwbHVzX2NvbnRleHRbZ29sZGxvZ19xdWV1ZV0gPSBbXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBxO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRHbG9iYWxWYWx1ZSA9IGdldEdsb2JhbFZhbHVlO1xuXHRcblx0ZXhwb3J0cy5zZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgX2FwbHVzX2NvbnRleHRba2V5XSA9IHZhbHVlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPlmFwbHVz5YaF6YOo5Y+Y6YePXG5cdCAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG5cdCAqIEByZXR1cm4gW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dXG5cdCAqL1xuXHR2YXIgZ2V0R29sZGxvZ1ZhbCA9IGZ1bmN0aW9uKGtleSkge1xuXHQgIHZhciB2O1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG5cdCAgICB2ID0gYXBsdXNba2V5XTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB2ID0gJyc7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiB2O1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRHb2xkbG9nVmFsID0gZ2V0R29sZGxvZ1ZhbDtcblx0LyoqXG5cdCAqIOiuvue9rmFwbHVz5YaF6YOo5Y+Y6YePXG5cdCAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG5cdCAqIEBwYXJhbXMgW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dIHZhbFxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXVxuXHQgKi9cblx0dmFyIHNldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuXHQgIHZhciBmID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBhcGx1cyA9IGdldEdsb2JhbFZhbHVlKEFQTFVTKTtcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgYXBsdXNba2V5XSA9IHZhbDtcblx0ICAgICAgZiA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgZiA9IGZhbHNlO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gZjtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuc2V0R29sZGxvZ1ZhbCA9IHNldEdvbGRsb2dWYWw7XG5cdFxuXHQvKipcblx0ICog6I635Y+WY2xpZW50SW5mbyjmtY/op4jlmajjgIHorr7lpIfnrYnkv6Hmga8pXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICogICB2ZXJzaW9uOiAyLFxuXHQgKiAgIHVhX2luZm86IHtcblx0ICogICAgIGI6IFwiY2hyb21lNThcIlxuXHQgKiAgICAgaXNtOiBcIm1hY1wiXG5cdCAqICAgICBteDogXCIzNjBlZVwiXG5cdCAqICAgICBvOiBcIm1hY1wiXG5cdCAqICAgICBwOiAxXG5cdCAqICAgICBzOiBcIjE5MjB4MTA4MFwiXG5cdCAqICAgICB3OiBcIndlYmtpdFwiXG5cdCAqICAgfVxuXHQgKiB9XG5cdCAqL1xuXHRleHBvcnRzLmdldENsaWVudEluZm8gPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2NsaWVudCcpIHx8IHt9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBBUExVUyA9ICdhcGx1cyc7XG5cdHZhciBHT0xETE9HID0gJ2dvbGRsb2cnO1xuXHR2YXIgQVBMVVNfUVVFVUUgPSBBUExVUyArICdfcXVldWUnO1xuXHR2YXIgR09MRExPR19RVUVVRSA9IEdPTERMT0cgKyAnX3F1ZXVlJztcblx0dmFyIE1XX0NIQU5HRSA9ICdtd19jaGFuZ2UnO1xuXHR2YXIgTUVUQV9JTkZPID0gJ01ldGFJbmZvJztcblx0dmFyIEFQUEVORF9NRVRBX0lORk8gPSAnYXBwZW5kJyArIE1FVEFfSU5GTztcblx0dmFyIFNFVF9NRVRBX0lORk8gPSAnc2V0JyArIE1FVEFfSU5GTztcblx0dmFyIEhUVFAgPSAnaHR0cCc7XG5cdHZhciBfcHVic3ViID0gJ19wdWJzdWInO1xuXHRcblx0dmFyIGRlZmF1bHRDb2RlID0gJ290aGVyJztcblx0dmFyIENMSyA9ICcyMTAxJztcblx0dmFyIEVYUCA9ICcyMjAxJztcblx0dmFyIElNUEVYUCA9ICcyMjAyJztcblx0dmFyIE9USEVSID0gJzE5OTk5Jztcblx0dmFyIEFQUF9TSE9XID0gJzEwMjMnO1xuXHR2YXIgQVBQX0hJREVfT1JfVU5MT0FEID0gJzEwMTAnOyBcblx0dmFyIFNFU1NJT05fSU5URVJWQUwgPSAzMDAwMDsgLy8gc2Vzc2lvbklk6L+H5pyf5pe26Ze0IDMw56eSXG5cdHZhciBTSEFSRV9DQUNIRV9JTlRFUlZBTCA9IDEwMDAgKiA2MCAqIDMwO1xuXHR2YXIgRUtWUyA9ICdla3ZzJztcblx0dmFyIEVWRU5UX01BWF9DT1VOVCA9IDEwMDAwOyAvLyDmnKzlnLDmnIDlpJrlrZjlgqjov5nkuYjlpJpla3bmlbDmja5cblx0dmFyIE1FTU9SWV9NQVhfQ09VTlQgPSAxOyAvLyDlhoXlrZjkuK3lrZjlgqjnmoTmnIDlpKfmlbDmja7mlbDph4/vvIzotoXov4fliJnnvJPlrZjliLDmnKzlnLBcblx0dmFyIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCA9IDMwMDA7IC8vIGVrdum7mOiupOWPkemAgemXtOmalOaXtumXtDogM+enklxuXHR2YXIgUEFHRV9TVEFSVCA9ICckJF9wYWdlX3N0YXJ0Jztcblx0dmFyIFBBR0VfRU5EID0gJyQkX3BhZ2VfZW5kJztcblx0dmFyIEFQUF9TVEFSVCA9ICckJF9hcHBfc3RhcnQnO1xuXHR2YXIgQVBQX0VORCA9ICckJF9hcHBfZW5kJztcblx0dmFyIFVTRVJfUFJPRklMRV9LRVkgPSAnYXBsdXNfdXNlcl9wcm9maWxlJztcblx0dmFyIElNUFJJTlQgPSAnaW1wcmludCc7XG5cdHZhciBJRF9UWVBFID0gJ2FwbHVzLWlkdHlwZSc7XG5cdHZhciBKU0JSSURHRV9PTkxZID0gJ2FwbHVzLWpzYnJpZGdlLW9ubHknO1xuXHR2YXIgUEFHRV9DT05GSUcgPSAnYXBsdXMtcGFnZS1jb25maWcnOyBcblx0dmFyIEFQTFVTX1NLSVBfQVBWX1JVTEVTID0gJ2FwbHVzLXNraXAtYXB2LXJ1bGVzJztcblx0dmFyIEFQTFVTX1BWX0RPTUFJTiA9ICdhcGx1cy1yaG9zdC12Jztcblx0dmFyIEFQTFVTX0VLVl9ET01BSU4gPSAnYXBsdXMtcmhvc3QtZyc7XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIFBBR0VfRU5URVI6ICdQQUdFX0VOVEVSJyxcblx0ICBDVVJSRU5UX1BBR0VfQ09ORklHOiAnQ1VSUkVOVF9QQUdFX0NPTkZJRycsXG5cdCAgX0FOT05ZX0lEOiAnX2Fub255X2lkJyxcblx0ICBfVVNFUl9JRDogJ191c2VyX2lkJyxcblx0ICBERUZBVUxUX0NPREU6IGRlZmF1bHRDb2RlLFxuXHQgIE9USEVSOiBPVEhFUixcblx0ICBFVkVOVF9NQVA6IHtcblx0ICAgICcyMTAxJzogJ2NsaWNrJyxcblx0ICAgICcyMjAxJzogJ2V4cG9zdXJlJyxcblx0ICAgICcyMjAyJzogJ2V4cG9zdXJlJyxcblx0ICAgICcxOTk5OSc6IGRlZmF1bHRDb2RlLFxuXHQgICAgJzEwMjMnOiAnYXBwX3Nob3cnLFxuXHQgICAgJzEwMTAnOiAnYXBwX2hpZGVfb3JfdW5sb2FkJ1xuXHQgIH0sXG5cdCAgRVZFTlRfSURfTUFQOiB7XG5cdCAgICAnRVhQJzogRVhQLFxuXHQgICAgJ0lNUEVYUCc6IElNUEVYUCxcblx0ICAgICdDTEsnOiBDTEssXG5cdCAgICAnT1RIRVInOiBPVEhFUixcblx0ICAgICdTSE9XJzogQVBQX1NIT1csXG5cdCAgICAnSF9PUl9VJzogQVBQX0hJREVfT1JfVU5MT0FEXG5cdCAgfSxcblx0ICBBUExVUzogQVBMVVMsXG5cdCAgR09MRExPRzogR09MRExPRyxcblx0ICBVTlNVQlNDUklCRTogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnVuc3Vic2NyaWJlJyxcblx0ICBTVUJTQ1JJQkU6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5zdWJzY3JpYmUnLFxuXHQgIFBVQkxJU0g6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5wdWJsaXNoJyxcblx0ICBDQUNIRV9QVUJTOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuY2FjaGVQdWJzJyxcblx0ICBBUExVU19VTklWRVJTQUw6IEFQTFVTICsgJ191bml2ZXJzYWwnLFxuXHQgIEFQTFVTX1FVRVVFOiBBUExVU19RVUVVRSxcblx0ICBHT0xETE9HX1FVRVVFOiBHT0xETE9HX1FVRVVFLFxuXHQgIENPTVBMRVRFOiAnY29tcGxldGUnLFxuXHQgIFBWX0NPREU6ICcyMDAxJyxcblx0ICBFWFBfQ09ERTogRVhQLFxuXHQgIENMS19DT0RFOiBDTEssXG5cdCAgT1RIRVJfQ09ERTogT1RIRVIsXG5cdCAgQ0xLOiAnQ0xLJyxcblx0ICBFWFA6ICdFWFAnLFxuXHQgIC8vIE9USEVSOiAnT1RIRVInLFxuXHQgIFNQTV9DTlQ6ICdzcG0tY250Jyxcblx0ICBTUE1fVVJMOiAnc3BtLXVybCcsXG5cdCAgU1BNX1BSRTogJ3NwbS1wcmUnLFxuXHQgIE1XX0NIQU5HRV9QVjogTVdfQ0hBTkdFICsgJ19wdicsXG5cdCAgTVdfQ0hBTkdFX0hKTEo6IE1XX0NIQU5HRSArICdfaGpsaicsXG5cdCAgSFRUUDogSFRUUCArICc6Jyxcblx0ICBIVFRQUzogJ2h0dHBzOicsXG5cdCAgQVBQRU5EX01FVEFfSU5GTzogQVBQRU5EX01FVEFfSU5GTyxcblx0ICBTRVRfTUVUQV9JTkZPOiBTRVRfTUVUQV9JTkZPLFxuXHQgIEFQTFVTX0FQUEVORF9NRVRBX0lORk86IEFQTFVTICsgJy4nICsgQVBQRU5EX01FVEFfSU5GTyxcblx0ICBBUExVU19TRVRfTUVUQV9JTkZPOiBBUExVUyArICcuJyArIFNFVF9NRVRBX0lORk8sXG5cdCAgUFZJRDoncHZpZCcsXG5cdCAgQVBMVVNfTE9HX1BJUEU6J2FwbHVzLWxvZy1waXBlJyxcblx0ICBvcGVuQVBJczogW1xuXHQgICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsICdjb21iaW5lUmVjb3JkJywgJ3JlY29yZFVkYXRhJywgJ3JlcXVlc3RWVENvbmZpZycsXG5cdCAgICAnc2V0UGFnZVNQTScsICdzZXRNZXRhSW5mbycsICdhcHBlbmRNZXRhSW5mbycsXG5cdCAgICAndXBkYXRlUGFnZVByb3BlcnRpZXMnLFxuXHQgICAgJ3VwZGF0ZU5leHRQYWdlUHJvcGVydGllcycsXG5cdCAgICAndXBkYXRlUGFnZVV0cGFyYW0nLFxuXHQgICAgJ3VwZGF0ZU5leHRQYWdlVXRwYXJhbScsXG5cdCAgICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJywgJ3NraXBQYWdlJyxcblx0ICAgICd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsICdnZXRQYWdlU3BtVXJsJywgJ2dldFBhZ2VTcG1QcmUnLFxuXHQgICAgJ3NldFBhZ2VOYW1lJywgJ2dldEVsZW1lbnRTUE0nLCAncmVjb3JkQXBwTGluaydcblx0ICBdLFxuXHQgIFNFU1NJT05fSU5URVJWQUw6IFNFU1NJT05fSU5URVJWQUwsXG5cdCAgU0VTU0lPTl9QQVVTRV9USU1FOiAnc2Vzc2lvbl9wYXVzZV90aW1lJyxcblx0ICBJTVBSSU5UOiAnaW1wcmludCcsXG5cdCAgQ1VSUkVOVF9TRVNTSU9OOiAnY3VycmVudF9zZXNzaW9uJyxcblx0ICBNQVhfRVZFTlRJRF9MRU5HVEg6IDEyOCxcblx0ICBNQVhfUFJPUEVSVFlfS0VZX0xFTkdUSDogMjU2LFxuXHQgIE1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UOiAxMDAsXG5cdCAgUkVRVUVTVFM6ICdyZXF1ZXN0cycsXG5cdCAgU0hBUkVTOiAnc2hhcmVzJyxcblx0ICBBUExVU19TU1JDOiAnX2FwbHVzX3NzcmMnLFxuXHQgIEVLVlM6IEVLVlMsXG5cdCAgRVZFTlRfTUFYX0NPVU5UOiBFVkVOVF9NQVhfQ09VTlQsXG5cdCAgTUVNT1JZX01BWF9DT1VOVDogTUVNT1JZX01BWF9DT1VOVCxcblx0ICBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUw6IEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCxcblx0ICBQQUdFX1NUQVJUOiBQQUdFX1NUQVJULFxuXHQgIFBBR0VfRU5EOiBQQUdFX0VORCxcblx0ICBBUFBfU1RBUlQ6IEFQUF9TVEFSVCxcblx0ICBBUFBfRU5EOiBBUFBfRU5ELFxuXHQgIFVTRVJfUFJPRklMRV9LRVk6IFVTRVJfUFJPRklMRV9LRVksXG5cdCAgU0hBUkVfQ0FDSEVfSU5URVJWQUw6IFNIQVJFX0NBQ0hFX0lOVEVSVkFMLFxuXHQgIElNUFJJTlQ6IElNUFJJTlQsXG5cdCAgSURfVFlQRTogSURfVFlQRSxcblx0ICBHTE9CQUxfUFJPUEVSVFk6ICdnbG9iYWxwcm9wZXJ0eScsXG5cdCAgLy8gVVRNX0tFWVM6IFsndXRtX3NvdXJjZScsICd1dG1fY29udGVudCcsICd1dG1fbWVkaXVtJywgJ3V0bV9jYW1wYWlnbicsICd1dG1fdGVybSddLFxuXHQgIEpTQlJJREdFX09OTFk6IEpTQlJJREdFX09OTFksXG5cdCAgUEFHRV9DT05GSUc6IFBBR0VfQ09ORklHLFxuXHQgIEFQTFVTX1NLSVBfQVBWX1JVTEVTOiBBUExVU19TS0lQX0FQVl9SVUxFUyxcblx0ICBBUExVU19QVl9ET01BSU46IEFQTFVTX1BWX0RPTUFJTixcblx0ICBBUExVU19FS1ZfRE9NQUlOOiBBUExVU19FS1ZfRE9NQUlOXG5cdH07XG5cdFxuXHQvLyB2YXIgb3BlbkFQSXMgPSBbXG5cdC8vICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsXG5cdC8vICAgJ3NldFBhZ2VTUE0nLCAnc2V0TWV0YUluZm8nLCAnYXBwZW5kTWV0YUluZm8nLFxuXHQvLyAgIFVQREFURSArICdQYWdlUHJvcGVydGllcycsXG5cdC8vICAgVVBEQVRFICsgJ05leHRQYWdlUHJvcGVydGllcycsXG5cdC8vICAgVVBEQVRFICsgJ1BhZ2VVdHBhcmFtJyxcblx0Ly8gICBVUERBVEUgKyAnTmV4dFBhZ2VVdHBhcmFtJyxcblx0Ly8gICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJyxcblx0Ly8gICAnc2tpcFBhZ2UnXG5cdC8vIF07XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIFwibWV0YUluZm9cIjoge1xuXHQgICAgXCJhcGx1cy1yaG9zdC12XCI6IFwiXCIsXG5cdCAgICBcImFwbHVzLXJob3N0LWdcIjogXCJcIixcblx0ICAgIFwiYXBsdXMtbW1zdGF0LXRpbWVvdXRcIjogXCIxMDAwMFwiLFxuXHQgICAgXCJzZGtJZFwiOiBcImFwbHVzX21pbmlfY2xvdWRfdW1cIlxuXHQgIH0sXG5cdCAgXCJnbG9iYWxDb25maWdcIjoge1xuXHQgICAgXCJpc0FsaVwiOiBmYWxzZSxcblx0ICAgIFwiaXNEZWNvZGVVcmxcIjogdHJ1ZSxcblx0ICAgIFwiQVBMVVNfUVVFVUVcIjogXCJhcGx1c19xdWV1ZVwiLFxuXHQgICAgXCJFVEFHX1NUT1JBR0VfS0VZXCI6IFwiX19FVEFHX19DTkFfX0lEX19cIixcblx0ICAgIFwic2NyaXB0X25hbWVcIjogXCJhcGx1c19taW5pLmpzXCIsXG5cdCAgICBcImFwbHVzLWdsb2JhbGRhdGFcIjoge30sXG5cdCAgICBcImx2ZXJcIjogXCIxLjguMVwiXG5cdCAgfSxcblx0ICBcInBsdWdpbnNcIjogW1xuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJpbmplY3RfYXBwX3VtXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJpbmplY3RfcGFnZV91bVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygzMSlcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcIm9wZW5fYXBpXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfY2xpZW50XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwicHVic3ViXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWV0YV9pbmplY3RcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMzkpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19hY1wiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg0MyksXG5cdCAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgXCJpbmplY3RfcGFnZV91bVwiXG5cdCAgICAgIF1cblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcblx0ICAgICAgXVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWluaV9zcG1cIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTcpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19taW5pX3JlcG9ydF91bVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1OClcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2xvZ19pbmplY3RcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNjMpLFxuXHQgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgIFwiYXBsdXNfbWV0YV9pbmplY3RcIlxuXHQgICAgICBdLFxuXHQgICAgICBcImNvbmZpZ1wiOiB7XG5cdCAgICAgICAgXCJwbHVnaW5zXCI6IHtcblx0ICAgICAgICAgIFwicHZcIjogW1xuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hlbl90b19zZW5kcHZcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2OSksXG5cdCAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgICAgICAgICAgXCJhcGx1c1dhaXRpbmdcIjogXCJcIlxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3MClcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZFwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKSxcblx0ICAgICAgICAgICAgICBcImNvbmZpZ1wiOiB7XG5cdCAgICAgICAgICAgICAgICBcImxvZ2RhdGFUb1V0XCI6IHt9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWluaWFwcF9kYXRhXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNzUpXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRwdl91c2VyZGF0YVwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KSxcblx0ICAgICAgICAgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRcIlxuXHQgICAgICAgICAgICAgIF1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcImNhbl90b19zZW5kcHZcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3Nylcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgXSxcblx0ICAgICAgICAgIFwiaGpsalwiOiBbXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNjQpXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVyZV90b19zZW5kXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNzApXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3MSksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJtaW5pYXBwX2RhdGFcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3NSlcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9faGpsal91c2VyZGF0YVwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICBdXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19hcGlcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNzkpLFxuXHQgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgIFwiYXBsdXNfbG9nX2luamVjdFwiLFxuXHQgICAgICAgIFwiYXBsdXNfbWV0YV9pbmplY3RcIlxuXHQgICAgICBdXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJtZXRhX3F1ZXVlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KSxcblx0ICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgIFwiaXNPcGVuQXBpXCI6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2NClcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX3F1ZXVlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KSxcblx0ICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgIFwiaXNPcGVuQXBpXCI6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXV0b190cmFja2VyX3VtXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcblx0ICAgICAgXVxuXHQgICAgfVxuXHQgIF1cblx0fTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfYXBwX3VtX25ldy5qc1xuXHQgKiDmlrDniYjoh6rliqjph4fpm4blsI/nqIvluo/kv6Hmga/nmoTmj5Lku7YgLSBhcHDms6jlhaVcblx0ICpcblx0ICog6YCa6L+H6YeN5YaZd3jnmoRhcGnmnaXmqKHmi5/nlJ/lkb3lkajmnJ/vvIzku6XmraTnu5Xov4fkuInmlrnmoYbmnrblr7nnlJ/lkb3lkajmnJ/nmoTph43lhpnmnLrliLZcblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDogoblj4EgPHNpc2FuLnFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdFxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgc2Vzc2lvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGV2ZW50TWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgcmVxdWVzdFF1ZXVlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgdW1VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdHZhciBBUFBfTEFVTkNIX1RZUEUgPSAwO1xuXHRcblx0ZnVuY3Rpb24gZ2V0R2xvYmFsQXJncyhxdWVyeSwgc2NlbmUpIHtcblx0ICB2YXIgZ2xvYmFsX2FyZ3MgPSB7fTtcblx0ICBpZiAoc2NlbmUpIHtcblx0ICAgIGdsb2JhbF9hcmdzLnNjZW5lID0gc2NlbmU7XG5cdCAgfVxuXHQgIGlmIChxdWVyeSAmJiBxdWVyeS5taW5pYXBwRGVidWdJZCkge1xuXHQgICAgZ2xvYmFsX2FyZ3MuZGVidWdJZCA9IHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkO1xuXHQgIH1cblx0ICBmb3IgKHZhciBrIGluIHF1ZXJ5KSB7XG5cdCAgICBpZiAoayA9PT0gJyQkX3NoYXJlX3VpZCcgfHwgay5pbmRleE9mKCckJF91dG1fJykgPT09IDApIHtcblx0ICAgICAgZ2xvYmFsX2FyZ3Nba10gPSBxdWVyeVtrXTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGdsb2JhbF9hcmdzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXNzaW9uU3RhcnQob3B0aW9ucykge1xuXHQgIGNhY2hlKCkubG9hZChmdW5jdGlvbigpe1xuXHQgICAgdWxvZygpLncoJ2NhY2hlIGluaXQgc3VjY2VzcycpO1xuXHQgIH0pO1xuXHRcblx0ICB2YXIgbmV3T3B0aW9ucyA9IHt9O1xuXHQgIHZhciBkZWVwQ2xvbmUgPSBjbG9uZURlZXAob3B0aW9ucyk7XG5cdCAgZm9yICh2YXIgaSBpbiBkZWVwQ2xvbmUpIHtcblx0ICAgIGlmICh0eXBlb2YgZGVlcENsb25lW2ldID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBuZXdPcHRpb25zID0gdXRpbERhc2guYXNzaWduKGRlZXBDbG9uZVtpXSwgbmV3T3B0aW9ucyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoZGVlcENsb25lW2ldKSB7XG5cdCAgICAgICAgbmV3T3B0aW9uc1tpXSA9IGRlZXBDbG9uZVtpXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIHJlcXVlc3RRdWV1ZSgpLmxvYWQoKTtcblx0ICB2YXIgaXNOZXdTZXNzaW9uID0gc2Vzc2lvbk1hbmFnZXIoKS5yZXN1bWUobmV3T3B0aW9ucyk7XG5cdCAgdmFyIHNlc3Npb25JZCA9IHNlc3Npb25NYW5hZ2VyKCkuZ2V0Q3VycmVudFNlc3Npb25JZCgpO1xuXHQgIGV2ZW50TWFuYWdlcigpLnNldFNlc3Npb25JZChzZXNzaW9uSWQpO1xuXHQgIGlmIChpc05ld1Nlc3Npb24pIHtcblx0ICAgIHJlcXVlc3RRdWV1ZSgpLmFkZCh1bVV0aWxzLkRhdGFUeXBlLkhBTEZfU0VTU0lPTiwge30sIGZ1bmN0aW9uKCkge1xuXHQgICAgICB1bG9nKCkudygnYmVmb3JlIHNlbmQgc2Vzc2lvbicpO1xuXHQgICAgICByZXF1ZXN0UXVldWUoKS5zZW5kKCk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXNzaW9uRW5kKCkge1xuXHQgIHNlc3Npb25NYW5hZ2VyKCkucGF1c2UoKTtcblx0ICByZXF1ZXN0UXVldWUoKS5zZW5kKHVtVXRpbHMuRGF0YVR5cGUuQ0xPU0VfU0VTU0lPTiwge30sIGZ1bmN0aW9uKCl7XG5cdCAgICByZXF1ZXN0UXVldWUoKS5zYXZlKCk7XG5cdCAgICBjYWNoZSgpLnNhdmUoKTtcblx0ICAgIHVsb2coKS53KFwiYWZ0ZXIgc2VuZCBzZXNzaW9uXCIpO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaW5qZWN0QXBwKCkge1xuXHRcblx0ICB2YXIgYXBwQmFrID0gQXBwO1xuXHQgIHZhciBhbHJlYWR5U3RhcnRlZCA9IGZhbHNlO1xuXHQgIHZhciBsYW51Y2hlZCA9IGZhbHNlO1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIGNvbnRleHQgPSBtaW5pLmdldENvbnRleHQoKTsgICAvLyDlubPlj7DkuIrkuIvmlofvvJogd3jjgIFkZOOAgW1544CBdHTjgIFzd2FuXG5cdCAgdmFyIGZuID0ge1xuXHQgICAgb25MYXVuY2g6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgIG1pbmkuaW5pdElzVEIoKTtcblx0ICAgICAgdmFyIHF1ZXJ5ID0gb3B0aW9ucyA/IG9wdGlvbnMucXVlcnkgOiB7fTtcblx0ICAgICAgdmFyIHJlZmVycmVySW5mbyA9IG9wdGlvbnMgPyBvcHRpb25zLnJlZmVycmVySW5mbyA6IHt9O1xuXHQgICAgICAvLyBodHRwczovL2RldmVsb3BlcnMud2VpeGluLnFxLmNvbS9taW5pcHJvZ3JhbS9kZXYvYXBpL2Jhc2UvYXBwL2xpZmUtY3ljbGUvd3guZ2V0TGF1bmNoT3B0aW9uc1N5bmMuaHRtbCMlRTglQkYlOTQlRTUlOUIlOUUlRTYlOUMlODklRTYlOTUlODglMjByZWZlcnJlckluZm8lMjAlRTclOUElODQlRTUlOUMlQkElRTYlOTklQUZcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEBwYXJhbXMge09iamVjdH0gcmVmZXJyZXJJbmZvIHtcblx0ICAgICAgICogICBhcHBJZCAgc3RyaW5nICDmnaXmupDlsI/nqIvluo/jgIHlhazkvJflj7fmiJYgQXBwIOeahCBhcHBJZFxuXHQgICAgICAgKiAgIGV4dHJhRGF0YSAgT2JqZWN0ICDmnaXmupDlsI/nqIvluo/kvKDov4fmnaXnmoTmlbDmja7vvIxzY2VuZT0xMDM35oiWMTAzOOaXtuaUr+aMgVxuXHQgICAgICAgKiB9XG5cdCAgICAgICAqL1xuXHRcblx0ICAgICAgQVBQX0xBVU5DSF9UWVBFICs9IDE7XG5cdFxuXHQgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1zZXNzaW9uLWFyZ3MnLCB1dGlsRGFzaC5hc3NpZ24ocmVmZXJyZXJJbmZvLCB7XG5cdCAgICAgICAgICBzY2VuZTogb3B0aW9ucy5zY2VuZSB8fCAnJ1xuXHQgICAgICAgIH0pXVxuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKHF1ZXJ5KSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5RGF0YSA9IHt9OyAvLyBjbG9uZURlZXAocXVlcnkpO1xuXHQgICAgICAgIGlmIChxdWVyeS5zcG0pIHtcblx0ICAgICAgICAgIGN0eC5hcGx1cy5zcG1fb3JpZ24gPSBxdWVyeS5zcG07XG5cdCAgICAgICAgICAvLyBkZWxldGUgcXVlcnlEYXRhLnNwbTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKG9wdGlvbnMuc2NlbmUpIHtcblx0ICAgICAgICAgIHF1ZXJ5RGF0YS5zY2VuZSA9IG9wdGlvbnMuc2NlbmU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChxdWVyeS5taW5pYXBwRGVidWdJZCkge1xuXHQgICAgICAgICAgdmFyIGRlYnVnSWQgPSBxdWVyeS5taW5pYXBwRGVidWdJZC50cmltKCk7XG5cdCAgICAgICAgICB2YXIgZGVidWdJbmZvcyA9IGRlYnVnSWQuc3BsaXQoJ18nKTtcblx0ICAgICAgICAgIHF1ZXJ5RGF0YSA9IHV0aWxEYXNoLmFzc2lnbihxdWVyeURhdGEsIHtcblx0ICAgICAgICAgICAgYXBsdXNfd29ya19ubzogZGVidWdJbmZvcy5sZW5ndGggPiAyID8gZGVidWdJbmZvc1sxXSA6IGRlYnVnSWQsXG5cdCAgICAgICAgICAgIGFwbHVzX3RyYWNrX2RlYnVnX2lkOiBkZWJ1Z0lkLFxuXHQgICAgICAgICAgICBhcGx1c19mbGFnOiAnYXBsdXNfdGVzdCdcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgLy8gZGVsZXRlIHF1ZXJ5RGF0YS5taW5pYXBwRGVidWdJZDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWV4ZGF0YScsIHF1ZXJ5RGF0YV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtY3B2ZGF0YScsIHF1ZXJ5RGF0YV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZ2xvYmFsLWFyZ3MnLCBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBvcHRpb25zLnNjZW5lKV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIG9uU2hvdzogZnVuY3Rpb24gKG9wdHMpIHtcblx0XG5cdCAgICAgIEFQUF9MQVVOQ0hfVFlQRSArPSAxO1xuXHQgICAgICB2YXIgcXVlcnkgPSBvcHRzID8gb3B0cy5xdWVyeSA6IHt9O1xuXHQgICAgICB2YXIgc2NlbmUgPSBvcHRzID8gb3B0cy5zY2VuZSA6ICcnO1xuXHQgICAgICB2YXIgc3RhcnRfdHlwZTsgLy/lsI/nqIvluo/lkK/liqjnsbvlnosgXG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsICAvLyDmraTlpITpnIDopoHnlKhzZXRNZXRhSW5mb+WBmuimhuebluW8j+abtOaWsO+8jOWboOS4uuW+ruS/oeWwj+eoi+W6j+S8muaciee8k+WtmFxuXHQgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1nbG9iYWwtYXJncycsIGdldEdsb2JhbEFyZ3MocXVlcnksIHNjZW5lKV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGlmIChzY2VuZSkge1xuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1leGRhdGEnLCB7XG5cdCAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtY3B2ZGF0YScsIHtcblx0ICAgICAgICAgICAgc2NlbmU6IHNjZW5lXG5cdCAgICAgICAgICB9XVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1zZXNzaW9uLWFyZ3MnLCB7XG5cdCAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoQVBQX0xBVU5DSF9UWVBFID09PSAyKSB7XG5cdCAgICAgICAgc3RhcnRfdHlwZSA9IDE7XG5cdCAgICAgIH0gZWxzZSBpZiAoQVBQX0xBVU5DSF9UWVBFID09PSAxKSB7XG5cdCAgICAgICAgc3RhcnRfdHlwZSA9IDA7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdWxvZygpLncoJ0FQUF9MQVVOQ0hfVFlQRSBzaG91bGQgbm90IHJlYWNoIHRoaXMsIHZhbHVlID0gJyArICBBUFBfTEFVTkNIX1RZUEUpO1xuXHQgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAvLyAgIG1zZzogJ0FQUF9MQVVOQ0hfVFlQRSBzaG91bGQgbm90IHJlYWNoIHRoaXMsIHZhbHVlID0gJyArICBBUFBfTEFVTkNIX1RZUEVcblx0ICAgICAgICAvLyB9KTtcblx0ICAgICAgfVxuXHQgICAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIWFscmVhZHlTdGFydGVkKSB7XG5cdCAgICAgICAgICBhbHJlYWR5U3RhcnRlZCA9IHRydWU7XG5cdCAgICAgICAgICBzZXNzaW9uU3RhcnQob3B0cyk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZ2xvYmFsQ29uZmlnID0gY3R4LmFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcblx0ICAgICAgICBpZiAoIWdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgICAgdmFyIHBhZ2VDb2RlID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcblx0ICAgICAgICAgIGN0eC5vbkFwcFNob3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQUF9TVEFSVCwgJ1NIT1cnLCB7XG5cdCAgICAgICAgICAgICAgLy8gc2NlbmU6IHNjZW5lLFxuXHQgICAgICAgICAgICAgIHN0YXJ0X3R5cGU6IHN0YXJ0X3R5cGUsXG5cdCAgICAgICAgICAgICAgcGFnZV9uYW1lOiBwYWdlQ29kZSB8fCBvcHRzLnBhdGggfHwgJy0nLFxuXHQgICAgICAgICAgICAgIHVybDogb3B0cy5wYXRoIHx8ICctJ1xuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBvbkhpZGU6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdXRpbHMub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGN0eC5hcGx1cy5nbG9iYWxDb25maWcgfHwge307XG5cdCAgICAgICAgdmFyIHBhZ2VDb2RlID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcblx0ICAgICAgICBpZiAoIWdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgICAgdmFyIHVybCA9IFBhZ2VNYW5hZ2VyLmdldEN1cnJlbnRQYWdlUGF0aCgpO1xuXHQgICAgICAgICAgdmFyIGR1cmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBjdHgub25BcHBTaG93VGltZTtcblx0ICAgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcblx0ICAgICAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBQX0VORCwgJ0hfT1JfVScsIHtcblx0ICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG5cdCAgICAgICAgICAgICAgZW5kX3R5cGU6IDAsXG5cdCAgICAgICAgICAgICAgcGFnZV9uYW1lOiBwYWdlQ29kZSB8fCB1cmwgfHwgJy0nLFxuXHQgICAgICAgICAgICAgIHVybDogdXJsIHx8ICctJyxcblx0ICAgICAgICAgICAgICBzdGFydF90aW1lOiBjdHgub25BcHBTaG93VGltZVxuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfSk7ICAgICAgICAgICAgXG5cdCAgICAgICAgfVxuXHQgICAgICAgIGFscmVhZHlTdGFydGVkID0gZmFsc2U7XG5cdCAgICAgICAgc2Vzc2lvbkVuZCgpO1xuXHQgICAgICB9KTtcblx0ICAgICAgQVBQX0xBVU5DSF9UWVBFID0gMDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBBcHAgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICAgIGUuYXBsdXMgPSBjdHgsIC8vIOazqOWGjOWFqOWxgOWPmOmHj1xuXHQgICAgYXBwQmFrKGUpO1xuXHQgIH07XG5cdFxuXHQgIGNvbnRleHQub25BcHBTaG93KGZ1bmN0aW9uIChlKSB7XG5cdCAgICAvLyDpgJrov4d3eC5nZXRMYXVuY2hPcHRpb25zU3luY+aWueazle+8jOWunueOsOWvuW9uTGFudWNo55qE55uR5ZCsXG5cdCAgICBpZighbGFudWNoZWQpIHtcblx0ICAgICAgLy8g55m+5bqm5LiN5pSv5oyBZ2V0TGF1bmNoT3B0aW9uc1N5bmPvvIznlKhvblNob3fnmoRvcHRpb25z5Luj5pu/XG5cdCAgICAgIHZhciBvcHRzID0ge307XG5cdCAgICAgIGlmKGlzRnVuY3Rpb24oY29udGV4dC5nZXRMYXVuY2hPcHRpb25zU3luYykpIHtcblx0ICAgICAgICBvcHRzID0gY29udGV4dC5nZXRMYXVuY2hPcHRpb25zU3luYygpIHx8IHt9O1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG9wdHMgPSBlO1xuXHQgICAgICB9XG5cdCAgICAgIGZuLm9uTGF1bmNoKG9wdHMpO1xuXHQgICAgICBsYW51Y2hlZCA9IHRydWU7XG5cdCAgICB9O1xuXHQgICAgLy8gb25TaG93XG5cdCAgICBmbi5vblNob3coZSk7XG5cdCAgfSksXG5cdFxuXHQgIGNvbnRleHQub25BcHBIaWRlKGZ1bmN0aW9uICgpIHtcblx0ICAgIC8vIG9uSGlkZVxuXHQgICAgZm4ub25IaWRlKCk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChbJ29iamVjdCcsICdmdW5jdGlvbiddLmluZGV4T2YodHlwZW9mIEFwcCkgPiAtMSkge1xuXHQgICAgICAgIGluamVjdEFwcCgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIHJlc2V0Rm46IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiAnJyxcblx0ICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdID8gYXJndW1lbnRzWzJdIDogZnVuY3Rpb24gKCkgeyB9LFxuXHQgICAgICBpID0gZVt0XTtcblx0ICAgIGVbdF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBycyA9IGkgJiYgaS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBhcHDmnKzouqvnmoRmdW5jdGlvblxuXHQgICAgICBpZiAocnMpIHtcblx0ICAgICAgICByZXR1cm4gbi5jYWxsKHRoaXMsIHJzKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyB0YXJvMXjjgIF0YXJvMngg5b+F6aG75Yqg5Liq6aKd5aSW55qE6K+t5Y+lbi5hcHBseeaJjeiDveaJp+ihjO+8jOavlOWmgnRyeWNhdGNo77yM5Y+Y6YeP5aOw5piO562J77yM5q2k5aSE5Yqg5LqGcmV0dXJuXG5cdCAgICAgICAgcmV0dXJuIG4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICByZXdyaXRlRm46IGZ1bmN0aW9uKG9iaiwgbmFtZSwgbmV3Rm4pIHtcblx0ICAgIHZhciBvbGRGbiA9IG9ialtuYW1lXTtcblx0ICAgIG9ialtuYW1lXSA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIG5ld0ZuLmNhbGwodGhpcywgZSk7XG5cdCAgICAgIG9sZEZuICYmIG9sZEZuLmNhbGwodGhpcywgZSk7XG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIG9uQXBsdXNSZWFkeTogZnVuY3Rpb24gKGFwbHVzX3F1ZXVlLCBTVUJTQ1JJQkUsIGNhbGxiYWNrKSB7XG5cdCAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgYWN0aW9uOiBTVUJTQ1JJQkUsXG5cdCAgICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuXHQgICAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICBjYWxsYmFjaygpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfV1cblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgZ2V0SW5kZXhCeVJlY3Q6IGZ1bmN0aW9uKHNlbGVjdG9yLCB0YXJnZXRSZWN0LCBjYWxsYmFjayl7XG5cdCAgICB2YXIgdGFyZ2V0SW5kZXggPSAtMTtcblx0ICAgIG1pbmkuZ2V0Q29udGV4dCgpLmNyZWF0ZVNlbGVjdG9yUXVlcnkoKS5zZWxlY3RBbGwoc2VsZWN0b3IpLmJvdW5kaW5nQ2xpZW50UmVjdCgpLmV4ZWMoZnVuY3Rpb24ocmVjdCl7XG5cdCAgICAgIGVhY2gocmVjdFswXSxmdW5jdGlvbihpdGVtLGluZGV4KXtcblx0ICAgICAgICBpZihpdGVtLndpZHRoID09PSB0YXJnZXRSZWN0LndpZHRoICYmIGl0ZW0uaGVpZ2h0ID09PSB0YXJnZXRSZWN0LmhlaWdodCAmJiBpdGVtLmxlZnQgPT09IHRhcmdldFJlY3QubGVmdCAmJiBpdGVtLnRvcCA9PT0gdGFyZ2V0UmVjdC50b3AgJiYgaXRlbS5yaWdodCA9PT0gdGFyZ2V0UmVjdC5yaWdodCAmJiBpdGVtLmJvdHRvbSA9PT0gdGFyZ2V0UmVjdC5ib3R0b20pe1xuXHQgICAgICAgICAgdGFyZ2V0SW5kZXggPSBpbmRleDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBjYWxsYmFjayh0YXJnZXRJbmRleCk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdHZhciBpc1BsYWluT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdFxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXJyLCBmbikge1xuXHQgIGlmKGlzUGxhaW5PYmplY3QoYXJyKSAmJiBhcnIubGVuZ3RoID09PSB2b2lkIDApe1xuXHQgICAgZm9yKHZhciBhdHRyIGluIGFycil7XG5cdCAgICAgIGlmKGFyci5oYXNPd25Qcm9wZXJ0eShhdHRyKSl7XG5cdCAgICAgICAgZm4oYXR0cixhcnJbYXR0cl0sYXJyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1lbHNlIHtcblx0ICAgIHZhciBpO1xuXHQgICAgdmFyIGwgPSBhcnIubGVuZ3RoO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgcnMgPSBmbihhcnJbaV0sIGkpO1xuXHQgICAgICBpZiAocnMgPT09ICdicmVhaycpIHtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmope1xuXHQgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgdmFyIHByb3RvID0gb2JqO1xuXHQgIHdoaWxlIChPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pICE9PSBudWxsKSB7XG5cdCAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgPT09IHByb3RvO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOWwj+eoi+W6j+W3peWFt1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0JzsgXG5cdFxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQvLyB2YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMuanMnKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdGV4cG9ydHMuZ2V0Q3VycmVudFBhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG5cdCAgcmV0dXJuIHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdIHx8IHt9O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRSZWZlcnJlclBhZ2UgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcblx0ICByZXR1cm4gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMl0gfHwge307XG5cdH07XG5cdFxuXHR2YXIgX2lzVGI7XG5cdC8vIOWNlemhtea1i+ivlemcgOimgVxuXHRleHBvcnRzLnJlc2V0SXNUQiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgIF9pc1RiID0gdmFsdWU7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpbml0SXNUQiAoKSB7XG5cdCAgaWYgKHR5cGVvZiBfaXNUYiA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gX2lzVGI7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciByZXN1bHQgPSBmYWxzZTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBVQSA9IG5hdmlnYXRvciA/IChuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci5zd3VzZXJBZ2VudCkgOiAnJztcblx0ICAgICAgcmVzdWx0ID0gISEvQWxpQXBwL2kudGVzdChVQSk7XG5cdCAgICAgIGlmICgvQWxpQXBwXFwoQVAvaS50ZXN0KFVBKSB8fCAvQWxpQXBwXFwoRGluZ1RhbGsvaS50ZXN0KFVBKSB8fCAvQWxpQXBwXFwoQU1BUC9pLnRlc3QoVUEpKSB7XG5cdCAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKC9BbGlBcHBcXChLQi9pLnRlc3QoVUEpKSB7XG5cdCAgICAgICAgcmVzdWx0ID0gISEvTWlzdC8udGVzdChVQSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy9JREUt5reY5a6dLeWVhuWutuW6lOeUqOS4i+acn+acm+i/lOWbnnRydWVcblx0ICAgICAgaWYoL0FsaXBheUlERSBUYW9iYW8vLnRlc3QoVUEpKXtcblx0ICAgICAgICByZXN1bHQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG5cdCAgICAgIGlmICh0eXBlb2YgY3R4LmNhbklVc2UgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICByZXN1bHQgPSAhIWN0eC5jYW5JVXNlKCdjYWxsVXNlclRyYWNrJyk7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICBfaXNUYiA9IHJlc3VsdDtcblx0ICAgIHJldHVybiByZXN1bHQ7ICBcblx0ICB9XG5cdH1cblx0ZXhwb3J0cy5pbml0SXNUQiA9IGluaXRJc1RCO1xuXHRcblx0ZnVuY3Rpb24gaXNUQigpIHtcblx0ICBpZiAodHlwZW9mIF9pc1RiID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiAhIV9pc1RiOyAgXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBpbml0SXNUQigpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGdldFBsYXRmb3JtVHlwZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgY3R4OiBkZCxcblx0ICAgICAgcGxhdFR5cGU6ICdkZCcsXG5cdCAgICAgIHNka1R5cGU6ICdkZG1wJyxcblx0ICAgICAgbG9nRG9tYWluOiAnL2RkbV9sb2dzJ1xuXHQgICAgfTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGN0eDogbXksXG5cdCAgICAgICAgcGxhdFR5cGU6IG15ICYmIG15LnRiID8gJ3Rhb2JhbycgOiAnbXknLFxuXHQgICAgICAgIHNka1R5cGU6IG15ICYmIG15LnRiID8gJ3Rhb2Jhb21wJyA6ICdteW1wJyxcblx0ICAgICAgICBsb2dEb21haW46ICcvYWxpcGF5bV9sb2dzJ1xuXHQgICAgICB9O1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICBjdHg6IHR0LFxuXHQgICAgICAgICAgcGxhdFR5cGU6ICd0dCcsXG5cdCAgICAgICAgICBzZGtUeXBlOiAndHRtcCcsXG5cdCAgICAgICAgICBsb2dEb21haW46ICcvYnl0ZWRhbmNlbV9sb2dzJ1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgY3R4OiBzd2FuLFxuXHQgICAgICAgICAgICBwbGF0VHlwZTogJ2JkJyxcblx0ICAgICAgICAgICAgc2RrVHlwZTogJ2JkbXAnLFxuXHQgICAgICAgICAgICBsb2dEb21haW46ICcvYmFpZHVtX2xvZ3MnXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgY3R4OiB3eCxcblx0ICAgICAgICAgICAgICBwbGF0VHlwZTogJ3d4Jyxcblx0ICAgICAgICAgICAgICBzZGtUeXBlOiAnd3htcCcsXG5cdCAgICAgICAgICAgICAgbG9nRG9tYWluOiAnL3d4bV9sb2dzJ1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgIGN0eDoge30sXG5cdCAgICAgICAgICAgICAgcGxhdFR5cGU6ICdVTktOT1cnLFxuXHQgICAgICAgICAgICAgIHNka1R5cGU6ICdVTktOT1cnXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLmlzVEIgPSBpc1RCO1xuXHRleHBvcnRzLmdldFBsYXRmb3JtVHlwZSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkucGxhdFR5cGU7XG5cdH07XG5cdGV4cG9ydHMuZ2V0U2RrVHlwZSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkuc2RrVHlwZTtcblx0fTtcblx0ZXhwb3J0cy5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG5cdH07XG5cdGV4cG9ydHMuZ2V0TG9nRG9tYWluID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLmxvZ0RvbWFpbjtcblx0fTtcblx0XG5cdFxuXHR2YXIgSFRUUF9SRVFVRVNUID0gJ2h0dHBSZXF1ZXN0Jztcblx0dmFyIFJFUVVFU1QgPSAncmVxdWVzdCc7XG5cdHZhciBGTiA9IGZ1bmN0aW9uICgpIHt9O1xuXHRcblx0LyoqXG5cdCAqIOWPkemAgUdFVOivt+axglxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IHVybFxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IG9wdHMge1xuXHQgKiAgIHRpbWVvdXQ6IDUwMDBcblx0ICogfVxuXHQgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2sge1xuXHQgKiAgIHRpbWVvdXQ6IDUwMDBcblx0ICogfVxuXHQgKi9cblx0ZXhwb3J0cy5yZXF1ZXN0ID0gZnVuY3Rpb24gKHVybCwgb3B0cywgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcblx0ICB2YXIgY3R4ID0gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuXHQgIGlmICghb3B0cykge1xuXHQgICAgb3B0cyA9IHt9O1xuXHQgIH1cblx0ICBpZiAoIWlzRnVuY3Rpb24oZmFpbHVyZUNhbGxiYWNrKSkge1xuXHQgICAgZmFpbHVyZUNhbGxiYWNrID0gRk47XG5cdCAgfVxuXHQgIGlmICghaXNGdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2spKSB7XG5cdCAgICBzdWNjZXNzQ2FsbGJhY2sgPSBGTjtcblx0ICB9XG5cdCAgdmFyIG1ldGhvZE5hbWUgPSBvcHRzLnJlcXVlc3RNZXRob2ROYW1lIHx8IFJFUVVFU1Q7XG5cdCAgdmFyIHJlcSA9IGN0eFttZXRob2ROYW1lXTtcblx0XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKHJlcSkpIHtcblx0ICAgIGlmIChtZXRob2ROYW1lICE9PSBSRVFVRVNUKSB7XG5cdCAgICAgIG1ldGhvZE5hbWUgPSBSRVFVRVNUO1xuXHQgICAgfSBlbHNlIGlmIChtZXRob2ROYW1lICE9PSBIVFRQX1JFUVVFU1QpIHtcblx0ICAgICAgbWV0aG9kTmFtZSA9IEhUVFBfUkVRVUVTVDtcblx0ICAgIH1cblx0ICAgIHJlcSA9IGN0eFttZXRob2ROYW1lXTtcblx0ICB9XG5cdCAgdmFyIGRhdGFUeXBlID0gb3B0cy5kYXRhVHlwZSB8fCAnanNvbic7XG5cdCAgdmFyIHRpbWVvdXQgPSBvcHRzLnRpbWVvdXQgfHwgNTAwMDtcblx0ICB2YXIgbWV0aG9kID0gb3B0cy5tZXRob2QgfHwgJ0dFVCc7XG5cdFxuXHQgIC8vIOWmguaenHVybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuXHQgIHVybCA9IHV0aWwuY2FuMmh0dHBzKHVybCk7XG5cdCAgLy8gaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG5cdCAgLy8gICB2YXIgcHJvdG9jYWwgPSBhcGx1c1N0YXRpYy5IVFRQUztcblx0ICAvLyAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgIC8vICAgICBwcm90b2NhbCA9ICdodHRwOic7XG5cdCAgLy8gICB9XG5cdCAgLy8gICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICAvLyB9XG5cdCAgdmFyIG1zZztcblx0ICBpZiAoaXNGdW5jdGlvbihyZXEpKSB7XG5cdCAgICB2YXIgcmVxT3B0aW9ucyA9IHtcblx0ICAgICAgdXJsOiB1cmwsXG5cdCAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICBkYXRhVHlwZTogZGF0YVR5cGUsXG5cdCAgICAgIHRpbWVvdXQ6IHRpbWVvdXQsXG5cdCAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAvLyBjb25zb2xlICYmIGNvbnNvbGUud2FybigncmVxdWVzdCAnICsgdXJsICsgJyBzdWNjZXNzLCB0aGUgbXNnIGlzICcsIHJlcyk7XG5cdCAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlcyk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICB1bG9nKCkudygncmVxdWVzdCAnICsgdXJsICsgJyBmYWlsdXJlLCB0aGUgbXNnIGlzICcsIHJlcyk7XG5cdCAgICAgICAgLy8gY29uc29sZSAmJiBjb25zb2xlLndhcm4oJ3JlcXVlc3QgJyArIHVybCArICcgZmFpbHVyZSwgdGhlIG1zZyBpcyAnLCByZXMpO1xuXHQgICAgICAgIGZhaWx1cmVDYWxsYmFjayhyZXMpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgaWYgKHR5cGVvZiBvcHRzLmRhdGEgPT09ICdvYmplY3QnICYmIG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG5cdCAgICAgIHJlcU9wdGlvbnMuZGF0YSA9IG9wdHMuZGF0YTtcblx0ICAgICAgcmVxT3B0aW9ucy51cmwgPSByZXFPcHRpb25zLnVybC5zcGxpdCgnPycpWzBdO1xuXHQgICAgfVxuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgX2V4dEluZm8gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmVxdWVzdC1leHRpbmZvJyk7XG5cdCAgICBpZiAodHlwZW9mIF9leHRJbmZvID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZXFPcHRpb25zLl9leHRJbmZvID0gX2V4dEluZm87XG5cdCAgICB9XG5cdCAgICByZXEocmVxT3B0aW9ucyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHVsb2coKS53KCdjYW4gbm90IGZpbmQgXCInICsgbWV0aG9kTmFtZSArICdcIiEnKTtcblx0ICAgIC8vIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCdjYW4gbm90IGZpbmQgXCInICsgbWV0aG9kTmFtZSArICdcIiEnKTtcblx0ICAgIGZhaWx1cmVDYWxsYmFjayhtc2cpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcblx0ICByZXR1cm4gdHlwZW9mIG8gPT09ICdmdW5jdGlvbic7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOagh+WHhuW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCcuL3V0aWxBcnJheScpO1xuXHQvLyB2YXIgZm9ybWF0ID0gcmVxdWlyZSgnLi9mb3JtYXQnKTtcblx0XG5cdHZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5cdGV4cG9ydHMubWtQbGFpbktleSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gc19wbGFpbl9vYmogKyBNYXRoLnJhbmRvbSgpO1xuXHR9O1xuXHRleHBvcnRzLnNfcGxhaW5fb2JqID0gc19wbGFpbl9vYmo7XG5cdFxuXHQvLyAyMDE2LTA4LTI0IOeQrOWtkOmcgOaxgu+8jGV4cGFyYW1z5Y2V54us5aSE55CG77yMd2luZHZhbmXph4zpnIDopoEgQOiwi+Wjq1xuXHRleHBvcnRzLm1rUGxhaW5LZXlGb3JFeHBhcmFtcyA9IGZ1bmN0aW9uKGtleV9wcmVmaXgpIHtcblx0ICB2YXIgX2tleSA9IGtleV9wcmVmaXggfHwgc19wbGFpbl9vYmo7XG5cdCAgcmV0dXJuIF9rZXkgKyAnZXhwYXJhbXMnO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGFycmF5IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG5cdCAqIOWFtuS4reaVsOe7hOS4ulxuXHQgKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG5cdCAqIOeahOW9ouW8j+OAglxuXHQgKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuXHQgKiBAcGFyYW0gYXJyIHtBcnJheX1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyMnBhcmFtKGFycikge1xuXHQgIHZhciBhID0gW10sXG5cdCAgICBrLFxuXHQgICAgdixcblx0ICAgIGksXG5cdCAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogKGsgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodikpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGEuam9pbignJicpO1xuXHR9O1xuXHRleHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblx0XG5cdFxuXHQvKipcblx0ICogcGFyYW0gdG8gYXJyYXlcblx0ICogMjAxNi0wOC0yNCDmlL7lvIDvvIznlKjmnaXlpITnkIZleHBhcmFtcyBA6LCL5aOrXG5cdCAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgYXJyYXkg5qC85byP77yM5aaC77yaXG5cdCAqIFtbXCJhXCIsIFwiMVwiXSwgW1wiYlwiLCBcIjJcIl0sIFtcImNcIiwgXCIzXCJdXVxuXHQgKlxuXHQgKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLnBhcmFtMmFyciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG5cdCAgICBpID0gMCwgbCA9IGEubGVuZ3RoLFxuXHQgICAgaXRlbSxcblx0ICAgIGFyciA9IFtdO1xuXHQgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpdGVtID0gYVtpXS5zcGxpdChcIj1cIik7XG5cdCAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYXJyO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICB2YXIgaztcblx0ICB2YXIgdjtcblx0ICB2YXIgaTtcblx0ICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBrID0gYXJyW2ldWzBdO1xuXHQgICAgdiA9IGFycltpXVsxXTtcblx0ICAgIHJldFtrXSA9IHY7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdC8vIOS7heaUr+aMgeS4gOe6p2pzb27nu5PmnoRcblx0ZXhwb3J0cy5qc29uTGlrZVN0cjJKU09OID0gZnVuY3Rpb24oanNvblN0cikge1xuXHQgIGlmICghanNvblN0ciB8fCB0eXBlb2YganNvblN0ciAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdCAgdmFyIHN0ciA9IGpzb25TdHIucmVwbGFjZSgvWydcInt9XSsvZywgJycpO1xuXHQgIHZhciBhcnIxID0gc3RyLnNwbGl0KCcsJyk7IFxuXHQgIHZhciBhcnIyID0gW107IFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuXHQgICAgYXJyMi5wdXNoKGFycjFbaV0uc3BsaXQoJzonKSk7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSB0aGlzLmFycjJvYmooYXJyMik7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2FuMmh0dHBzID0gZnVuY3Rpb24odXJsKSB7XG5cdCAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG5cdCAgICB2YXIgcHJvdG9jYWwgPSAnaHR0cHM6Jztcblx0ICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG5cdCAgICB9XG5cdCAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICB9XG5cdCAgcmV0dXJuIHVybDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0QXBwS2V5ID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKS5nZXRHbG9iYWxWYWx1ZShcImFwbHVzXCIpO1xuXHQgIHJldHVybiBhcGx1cy5nZXRNZXRhSW5mbygnYXBwa2V5JykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcElkJykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcEtleScpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jaGVja0VtcHR5T2JqID0gZnVuY3Rpb24oZGF0YSkge1xuXHQgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PT0gMCkpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH07XG5cdFxuXHRleHBvcnRzLmNoZWNrRG9tYWluID0gZnVuY3Rpb24odXJsKSB7XG5cdCAgY29uc3QgcmVnID0gbmV3IFJlZ0V4cCgvXlthLXpBLVowLTldWy1hLXpBLVowLTldezAsNjJ9KFxcLlthLXpBLVowLTldWy1hLXpBLVowLTldezAsNjJ9KSsoOlswLTldezEsNX0pKiQvKTtcblx0ICBpZiAoIXVybCB8fCAhdXJsLm1hdGNoKHJlZykpIHtcblx0ICAgIHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdCAgICB1bG9nKCkudGlwX3codWxvZygpLnJlcGVhdChcIiFcIikpO1xuXHQgICAgdWxvZygpLnRpcF93KFwi5pS25pWw5Z+f5ZCN6YWN572u6ZSZ6K+vLOivt+ajgOafpWFwbHVzLXJob3N0LXblj5blgLznmoTlhoXlrrksIOato+ehruagvOW8jyBlZy4gdGVzdC1xdHJhY2tpbmcteHh4LmNvbTrnq6/lj6Plj7flj6/pgIkgXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoXCIhXCIpKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9IFxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jaGVja09wZW5pZCA9IGZ1bmN0aW9uKG9kKSB7XG5cdCAgaWYgKCFvZCkge1xuXHQgICAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0ICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KCchJykpO1xuXHQgICAgdWxvZygpLnRpcF93KFwiUVTnmoRVVuiuoeeul+S+nei1luWwj+eoi+W6j+eahOeUqOaIt+WUr+S4gOagh+ivhiwg6K+356Gu5L+d6ZKI5a+555So5oi35ZSv5LiA5qCH6K+G55qE5LiK5oql77yB77yBXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KFwi6YWN572u5Y+C6ICD5Luj56CBOiBhcGx1c19xdWV1ZS5wdXNoKHthY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsIGFyZ3VtZW50czogWydfYW5vbnlfaWQnLCDlvoXphY3nva7lj5blgLxdfSk7XCIpO1xuXHQgICAgdWxvZygpLnRpcF93KFwi6I635Y+W5bCP56iL5bqP5ZSv5LiA5qCH6K+G6K+35Y+C6ICD6ZO+5o6lOiBodHRwczovL3QudGIuY24vMWRUSGpUVFFGMFVqT1ROSGlDa2FDU1wiKTtcblx0ICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KCchJykpO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0dmFyIExPR19QUkVGSVggPSAnW0FQTFVTXSAtLSAnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuXHQgIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuXHQgIHZhciBfZGVidWcgPSBmYWxzZTtcblx0XG5cdCAgZnVuY3Rpb24gVUxvZygpIHtcblx0ICAgIHRoaXMuc2V0RGVidWcgPSBmdW5jdGlvbiAoZGVidWcpIHtcblx0ICAgICAgX2RlYnVnID0gZGVidWc7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuaSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNvbnNvbGUuaW5mby5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgLy8gZVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgLy8gZVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMudiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgLy8gZVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLnRpcF93ID0gZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKFxuXHQgICAgICAgICAgJyVjICcgKyBMT0dfUFJFRklYICsgbXNnLFxuXHQgICAgICAgICAgJ2JhY2tncm91bmQ6cmVkOyBwYWRkaW5nOiA0cHg7IHBhZGRpbmctcmlnaHQ6IDhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjb2xvcjogI2ZmZjsnXG5cdCAgICAgICAgKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIC8vIGVcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLnJlcGVhdCA9IGZ1bmN0aW9uKGNoYXIpIHtcblx0ICAgICAgdmFyIHJlcyA9IGNoYXI7XG5cdCAgICAgIHdoaWxlIChyZXMubGVuZ3RoIDwgODYpIHtcblx0ICAgICAgICByZXMgPSByZXMgKyBjaGFyO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZXM7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChfaW5zdGFuY2UgPT09IG51bGwpIHtcblx0ICAgICAgX2luc3RhbmNlID0gbmV3IFVMb2coKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfaW5zdGFuY2U7XG5cdCAgfTtcblx0fSkoKTtcblxuLyoqKi8gfSksXG4vKiAxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDlhYvpmobkuIDkuKpvYmplY3Rcblx0ICovXG5cdGZ1bmN0aW9uIGNsb25lRGVlcCAob2JqKSB7XG5cdCAgdmFyIHN0cjtcblx0ICB2YXIgbmV3b2JqID0gQXJyYXkuaXNBcnJheShvYmopID8gW10gOiB7fTsgLy9GaXggb2JqLmNvbnRydWN0b3IgdHlwZUVycm9yIGNvbnN0cnVjdG9yIHVuZGVmaW5lZFxuXHQgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG5cdCAgICBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopOyAvL+ezu+WIl+WMluWvueixoVxuXHQgICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuXHQgIH0gZWxzZSB7XG5cdCAgICBmb3IgKHZhciBpIGluIG9iaikge1xuXHQgICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbmV3b2JqO1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gY2xvbmVEZWVwO1xuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9yZXN1bWVUaW1lID0gbnVsbDtcblx0ICB2YXIgX2N1cnJlbnRTZXNzaW9uID0gbnVsbDsgLy8g5b2T5YmNc2Vzc2lvbuWvueixoVxuXHRcblx0ICBmdW5jdGlvbiBpbml0KCl7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICByZXN1bWU6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgICAgdmFyIG5ld1Nlc3Npb24gPSBmYWxzZTtcblx0XG5cdCAgICAgICAgaWYgKCFfY3VycmVudFNlc3Npb24pIHtcblx0ICAgICAgICAgIF9jdXJyZW50U2Vzc2lvbiA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkNVUlJFTlRfU0VTU0lPTik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdCAgICAgICAgX3Jlc3VtZVRpbWUgPSBkYXRlLmdldFRpbWUoKTtcblx0ICAgICAgICBpZiAoIV9jdXJyZW50U2Vzc2lvblxuXHQgICAgICAgICAgfHwgIV9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZVxuXHQgICAgICAgICAgfHwgX3Jlc3VtZVRpbWUgLSBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPiBhcGx1c1N0YXRpYy5TRVNTSU9OX0lOVEVSVkFMKSB7XG5cdCAgICAgICAgICBuZXdTZXNzaW9uID0gdHJ1ZTtcblx0ICAgICAgICAgIF9jcmVhdGVOZXdTZXNzaW9uKG9wdGlvbnMpO1xuXHQgICAgICAgICAgdWxvZygpLnYoJ+W8gOWni+aWsOeahHNlc3Npb24oJXMpOiAnLCBfY3VycmVudFNlc3Npb24uaWQsIF9jdXJyZW50U2Vzc2lvbik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHVsb2coKS52KCflu7bnu63kuIrkuIDmrKFzZXNzaW9uKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gbmV3U2Vzc2lvbjtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIC8vIOWcqG9uSGlkZeaWueazleaXtumXreWQiHNlc3Npb25cblx0ICAgICAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfZW5kU2Vzc2lvbigpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgLy8g6I635Y+W5b2T5YmN55qEc2Vzc2lvbklk77yM5rKh5pyJ5YiZ6L+U5Zue56m6XG5cdCAgICAgIGdldEN1cnJlbnRTZXNzaW9uSWQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gKF9jdXJyZW50U2Vzc2lvbiB8fCB7fSkuaWQ7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBnZXRDdXJyZW50U2Vzc2lvbjogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBfY3VycmVudFNlc3Npb247XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBjbG9uZUN1cnJlbnRTZXNzaW9uOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsb25lRGVlcChfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX2dldFVtUGFyYW1zKHF1ZXJ5KSB7XG5cdCAgICB2YXIgYXBsdXNfcXVlcnkgPSB7fTtcblx0ICAgIGZvciAodmFyIGkgaW4gcXVlcnkpIHtcblx0ICAgICAgYXBsdXNfcXVlcnlbaV0gPSBxdWVyeVtpXTtcblx0ICAgIH1cblx0XG5cdCAgICB1bG9nKCkudigncXVlcnk6ICcsIHF1ZXJ5KTtcblx0ICAgIHJldHVybiBhcGx1c19xdWVyeTtcblx0ICB9XG5cdFxuXHQgIC8vIOW8gOWni+S4gOS4quaWsHNlc3Npb25cblx0ICBmdW5jdGlvbiBfY3JlYXRlTmV3U2Vzc2lvbihuZXdPcHRpb25zKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgcHJldk9wdGlvbnMgPSAoX2N1cnJlbnRTZXNzaW9uIHx8IHt9KS5vcHRpb25zIHx8IHt9O1xuXHQgICAgICBcblx0ICAgICAgdmFyIGxhdW5jaE9wdGlvbnMgPSB1dGlscy5hc3NpZ24oe30sIF9nZXRVbVBhcmFtcyhuZXdPcHRpb25zLnF1ZXJ5KSk7XG5cdCAgICAgIGxhdW5jaE9wdGlvbnMucGF0aCA9IG5ld09wdGlvbnMucGF0aCB8fCBwcmV2T3B0aW9ucy5wYXRoO1xuXHQgICAgICBsYXVuY2hPcHRpb25zLnNjZW5lID0gbmV3T3B0aW9ucy5zY2VuZVxuXHQgICAgICAgID8gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKSArICdfJyArIG5ld09wdGlvbnMuc2NlbmVcblx0ICAgICAgICA6IHByZXZPcHRpb25zLnNjZW5lO1xuXHRcblx0ICAgICAgdmFyIHJlZmVycmVySW5mbyA9IG5ld09wdGlvbnMucmVmZXJyZXJJbmZvO1xuXHQgICAgICBpZiAocmVmZXJyZXJJbmZvKSB7XG5cdCAgICAgICAgbGF1bmNoT3B0aW9ucy5yZWZlcnJlckFwcElkID0gcmVmZXJyZXJJbmZvLmFwcElkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB1bG9nKCkudignc2Vzc2lvbiBvcHRpb25zOiAnLCBsYXVuY2hPcHRpb25zKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuXHQgICAgICB2YXIgdHMgPSBEYXRlLm5vdygpO1xuXHQgICAgICBfY3VycmVudFNlc3Npb24gPSB7XG5cdCAgICAgICAgaWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyB0cyxcblx0ICAgICAgICBzdGFydF90aW1lOiB0cyxcblx0ICAgICAgICBvcHRpb25zOiBsYXVuY2hPcHRpb25zLFxuXHQgICAgICAgIHN0YXRlX3M6IDFcblx0ICAgICAgfTsgXG5cdCAgICAgIGlmIChncCkge1xuXHQgICAgICAgIF9jdXJyZW50U2Vzc2lvblsnZ3AnXSA9IGdwO1xuXHQgICAgICB9IFxuXHRcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdWxvZygpLmUoJ+eUn+aIkOaWsHNlc3Npb27lpLHotKU6ICcsIGUpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLy8g57uT5p2f5b2T5YmNc2Vzc2lvbu+8jOeUseS6jjMw56eS5py65Yi277yM5LiA5Liqc2Vzc2lvbuS8muiiq+e7k+adn+WkmuasoVxuXHQgIGZ1bmN0aW9uIF9lbmRTZXNzaW9uKCkge1xuXHQgICAgaWYgKF9jdXJyZW50U2Vzc2lvbikge1xuXHQgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdCAgICAgIF9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZSA9IGRhdGUuZ2V0VGltZSgpO1xuXHQgICAgICBpZiAodHlwZW9mIF9jdXJyZW50U2Vzc2lvbi5kdXJhdGlvbiAhPT0gJ251bWJlcicpIHtcblx0ICAgICAgICBfY3VycmVudFNlc3Npb24uZHVyYXRpb24gPSAwO1xuXHQgICAgICB9XG5cdCAgICAgIF9jdXJyZW50U2Vzc2lvbi5kdXJhdGlvbiA9IF9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZSAtIF9yZXN1bWVUaW1lO1xuXHQgICAgICBfY3VycmVudFNlc3Npb24uc3RhdGVfcyA9IDA7XG5cdCAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLkNVUlJFTlRfU0VTU0lPTiwgX2N1cnJlbnRTZXNzaW9uKTtcblx0XG5cdCAgICAgIHVsb2coKS52KCfpgIDlh7rkvJror50oJXMpOiAlcyAnLCBfY3VycmVudFNlc3Npb24uaWQsIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCksIF9jdXJyZW50U2Vzc2lvbik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFfaW5zdGFuY2UpIHtcblx0ICAgICAgX2luc3RhbmNlID0gaW5pdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9pbnN0YW5jZTtcblx0ICB9O1xuXHRcblx0fSkoKTtcblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIGpzb25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXHQgIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuXHQgIHZhciBfbmFtZSA9ICcnO1xuXHQgIHZhciBfZGF0YSA9IG51bGw7XG5cdCAgdmFyIF9sb2FkZWQgPSBmYWxzZTtcblx0XG5cdCAgZnVuY3Rpb24gQ2FjaGUoKSB7XG5cdCAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoY2IpIHtcblx0ICAgICAgaWYgKCFfZGF0YSkge1xuXHQgICAgICAgIF9uYW1lID0gJ2FwbHVzX2NhY2hlXycgKyB1dGlsLmdldEFwcEtleSgpIHx8ICcnO1xuXHQgICAgICAgIGN0eC5nZXRTdG9yYWdlKHtcblx0ICAgICAgICAgIGtleTogX25hbWUsXG5cdCAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcblx0ICAgICAgICAgICAgICBfZGF0YSA9IGpzb25VdGlsLnBhcnNlKHJlcy5kYXRhKSB8fCB7fTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIF9sb2FkZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICBjdHgucmVtb3ZlU3RvcmFnZSh7XG5cdCAgICAgICAgICAgICAga2V5OiBfbmFtZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoZSkge1xuXHRcblx0ICAgICAgICAgICAgdWxvZygpLnYoX25hbWUgKyAnOiAnICsgZS5lcnJNc2cpO1xuXHQgICAgICAgICAgICBfZGF0YSA9IHt9O1xuXHQgICAgICAgICAgICBfbG9hZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuXHQgICAgICAgICAgICAgIGtleTogX25hbWVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuXHQgICAgICAgICAga2V5OiBfbmFtZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX2RhdGEpIHtcblx0ICAgICAgICBjdHguc2V0U3RvcmFnZSh7XG5cdCAgICAgICAgICBrZXk6IF9uYW1lLFxuXHQgICAgICAgICAgZGF0YToganNvblV0aWwuc3RyaW5nZnkoX2RhdGEpXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICBpZiAoX2RhdGEpIHtcblx0ICAgICAgICBfZGF0YVtrZXldID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAoX2RhdGEgfHwge30pW2tleV07XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICBpZiAoX2RhdGEgJiYgX2RhdGFba2V5XSkge1xuXHQgICAgICAgIGRlbGV0ZSBfZGF0YVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gX2RhdGE7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9kYXRhID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAhIXRoaXMuZ2V0KGtleSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBfbG9hZGVkO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIV9pbnN0YW5jZSkge1xuXHQgICAgICBfaW5zdGFuY2UgPSBuZXcgQ2FjaGUoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gX2luc3RhbmNlO1xuXHQgIH07XG5cdH0pKCk7XG5cbi8qKiovIH0pLFxuLyogMTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcblx0ZXhwb3J0cy5zdHJpbmdmeSA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBpZiAoZGF0YSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAvLyBlbXB0eVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gJyc7XG5cdH07XG5cdFxuXHRleHBvcnRzLnBhcnNlID0gZnVuY3Rpb24oanNvbikge1xuXHQgIGlmIChqc29uKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgLy8gZW1wdHlcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG51bGw7XG5cdH07XG5cdFxuXHRleHBvcnRzLnBhcnNlVG9BcnJheSA9IGZ1bmN0aW9uKGpzb24pIHtcblx0ICBpZiAoanNvbikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIC8vIGVtcHR5XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBbXTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMuZ2V0UmFuZG9tU3RyID0gZnVuY3Rpb24obGVuKSB7XG5cdCAgdmFyIHN0ciA9ICcnO1xuXHQgIHZhciBhcnIgPSBbJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJywgJ2knLCAnaicsICdrJywgJ2wnLCAnbScsICduJywgJ28nLCAncCcsICdxJywgJ3InLCAncycsICd0JywgJ3UnLCAndicsICd3JywgJ3gnLCAneScsICd6JywgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgTnVtYmVyKGxlbik7IGkrKykge1xuXHQgICAgdmFyIHBvcyA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChhcnIubGVuZ3RoIC0gMSkpO1xuXHQgICAgc3RyICs9IGFycltwb3NdO1xuXHQgIH1cblx0ICByZXR1cm4gc3RyO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5zdGFydHNXaXRoID0gZnVuY3Rpb24oc3RyLCBzZWFyY2hWYWwpIHtcblx0ICBpZiAoIXN0ciB8fCAhc2VhcmNoVmFsIHx8IHNlYXJjaFZhbC5sZW5ndGggPT09IDAgfHwgc2VhcmNoVmFsLmxlbmd0aCA+IHN0ci5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgc2VhcmNoVmFsLmxlbmd0aCkgPT09IHNlYXJjaFZhbDtcblx0fTtcblx0XG5cdGV4cG9ydHMuYXNzaWduID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG5cdCAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuXHQgICAgaWYgKHNvdXJjZSkge1xuXHQgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuXHQgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBuZXh0S2V5KSkge1xuXHQgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gb3V0cHV0O1xuXHR9O1xuXHRcblx0Ly8gMS5la3bkuK3lrZjlnKjop4TliJnkuI3lkIjms5Xmg4XlhrXvvIzkuKLlvIPmlbTmnaHkuovku7Zcblx0Ly8gMi5ldmVudGlk6ZW/5bqm5LiN6IO96LaF6L+HMTI45Liq5a2X56ymXG5cdC8vIDMua2V56ZW/5bqm5LiN6IO96LaF6L+HMjU25Liq5a2X56ymXG5cdC8vIDQu5q+P5LiqZXZlbnTmkLrluKZrZXnkuKrmlbDkuI3og73otoXov4cxMDDkuKpcblx0ZXhwb3J0cy5jaGVja0V2ZW50ID0gZnVuY3Rpb24oZXZlbnRJZCwgcHJvcGVydGllcykge1xuXHQgIHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdCAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0ICBpZiAoIShldmVudElkICYmIHR5cGVvZiBldmVudElkID09PSAnc3RyaW5nJykpIHtcblx0ICAgIHVsb2coKS5lKCdwbGVhc2UgY2hlY2sgdHJhY2tFdmVudCBpZC4gaWQgc2hvdWxkIGJlIFwic3RyaW5nXCIgYW5kIG5vdCBudWxsJyk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyDkv53nlZnlhbPplK7lrZdcblx0ICB2YXIgcmVzZXJ2ZVdvcmRzID0gWydpZCcsICdkdSddO1xuXHQgIHZhciByZXNlcnZlV29yZE1hcCA9IHt9O1xuXHRcblx0ICByZXNlcnZlV29yZHMuZm9yRWFjaChmdW5jdGlvbiAod29yZCkge1xuXHQgICAgcmVzZXJ2ZVdvcmRNYXBbd29yZF0gPSAxO1xuXHQgIH0pO1xuXHRcblx0ICAvLyDmo4Dmn6VldmVudElk5piv5ZCm5LiO5L+d55WZ5YWz6ZSu5a2X5Yay56qBXG5cdCAgaWYgKHJlc2VydmVXb3JkTWFwW2V2ZW50SWRdKSB7XG5cdCAgICB1bG9nKCkuZSgnZXZlbnRJZOS4jeiDveS4juS7peS4i+S/neeVmeWtl+WGsueqgTogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgaWYgKGV2ZW50SWQubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX0VWRU5USURfTEVOR1RIKSB7XG5cdCAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gbGVuZ3RoIG9mIGV2ZW50IGlkIHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyBwcm9wZXJ0aWVz55qE5ZCI5rOV57G75Z6L5Li6IHN0cmluZyB8IG9iamVjdChub3QgaW5jbHVkZSBBcnJheSlcblx0ICBpZiAocHJvcGVydGllc1xuXHQgICAgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHByb3BlcnRpZXMpKVxuXHQgICAgJiYgdHlwZW9mIHByb3BlcnRpZXMgIT09ICdzdHJpbmcnKSB7XG5cdCAgICB1bG9nKCkuZSgncGxlYXNlIGNoZWNrIHRyYWNrRXZlbnQgcHJvcGVydGllcy4gcHJvcGVydGllcyBzaG91bGQgYmUgc3RyaW5nIG9yIG9iamVjdChub3QgaW5jbHVkZSBBcnJheSknKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgIHZhciBjb3VudCA9IDA7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuXHQgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG5cdCAgICAgICAgaWYgKGtleS5sZW5ndGggPiBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBwcm9wZXJ0eSBrZXkgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGNvdW50ID49IGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UKSB7XG5cdCAgICAgICAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gY291bnQgb2YgcHJvcGVydGllcyBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCk7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAocmVzZXJ2ZVdvcmRNYXBba2V5XSkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ+WxnuaAp+S4reeahGtleeS4jeiDveS4juS7peS4i+S/neeVmeWtl+WGsueqgTogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY291bnQgKz0gMTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdFxuXHRcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0ZXhwb3J0cy5kZWxldGVJbmZvID0gZnVuY3Rpb24oZ29rZXksIGFycikge1xuXHQgIGVhY2goYXJyLCBmdW5jdGlvbih2KSB7XG5cdCAgICBkZWxldGUgZ29rZXlbdl07XG5cdCAgfSk7XG5cdCAgcmV0dXJuIGdva2V5O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jaGVja0VtcHR5T2JqID0gZnVuY3Rpb24oZGF0YSkge1xuXHQgIGlmICh0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PT0gMCkpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH07XG5cdFxuXHRcblx0ZXhwb3J0cy5EYXRhVHlwZSA9IHtcblx0ICBIQUxGX1NFU1NJT046ICdoYWxmX3Nlc3Npb24nLFxuXHQgIENMT1NFX1NFU1NJT046ICdjbG9zZV9zZXNzaW9uJyxcblx0ICBFS1Y6ICdla3YnLFxuXHQgIEVOVEVSX1BBR0U6ICdlbnRlcl9wYWdlJyxcblx0ICBMRUFWRV9QQUdFOiAnbGVhdmVfcGFnZSdcblx0fTtcblx0XG5cdGV4cG9ydHMuQWNjZXNzVHlwZSA9IHtcblx0ICBNT0JJTEVfTkVUV09SS18yRzogJzJnJyxcblx0ICBNT0JJTEVfTkVUV09SS18zRzogJzNnJyxcblx0ICBNT0JJTEVfTkVUV09SS180RzogJzRnJyxcblx0ICBNT0JJTEVfTkVUV09SS19OT05FOiAnbm9uZSdcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0ICB2YXIgX2luc3RhbmNlO1xuXHQgIHZhciBfc2Vzc2lvbklkO1xuXHQgIHZhciBfbWVtb3J5RXZlbnRzID0gW107XG5cdFxuXHQgIC8vIOWcqOWIm+W7unNlc3Npb25JZOWJjea3u+WKoOeahOS6i+S7tlxuXHQgIHZhciBfbm9TZXNzaW9uRXZlbnRzID0gW107XG5cdFxuXHQgIGZ1bmN0aW9uIF9jYWNoZUV2ZW50cygpIHtcblx0ICAgIGlmIChfbWVtb3J5RXZlbnRzLmxlbmd0aCkge1xuXHQgICAgICB2YXIgZWt2cyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkVLVlMpO1xuXHQgICAgICBcblx0ICAgICAgLy8g5pys5Zyw5pyA5aSa5a2Y5YKoIEVWRU5UX01BWF9DT1VOVCDmnaHmlbDmja7vvIzjgIzlpJrkvZnmlbDmja7jgI3mmoLml7blhYjmipvlvINcblx0ICAgICAgaWYgKF9nZXRDYWNoZUV2ZW50c0xlbmd0aChla3ZzKSArIF9tZW1vcnlFdmVudHMubGVuZ3RoIDw9IGFwbHVzU3RhdGljLkVWRU5UX01BWF9DT1VOVCkge1xuXHQgICAgICAgIGVrdnMgPSBfYnVpbGRFa3ZzKGVrdnMsIF9tZW1vcnlFdmVudHMpO1xuXHQgICAgICAgIFxuXHQgICAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLkVLVlMsIGVrdnMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBfYnVpbGRFa3ZzKGVrdnMsIG1lbW9yeUV2ZW50cykge1xuXHQgICAgZWt2cyA9IGVrdnMgfHwge307XG5cdCAgICB2YXIgZXZlbnRzID0gZWt2c1tfc2Vzc2lvbklkXTtcblx0ICAgIGlmIChpc0FycmF5KGV2ZW50cykgJiYgZXZlbnRzLmxlbmd0aCkge1xuXHQgICAgICBla3ZzW19zZXNzaW9uSWRdID0gZXZlbnRzLmNvbmNhdChtZW1vcnlFdmVudHMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWt2c1tfc2Vzc2lvbklkXSA9IFtdLmNvbmNhdChtZW1vcnlFdmVudHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBla3ZzO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX2dldENhY2hlRXZlbnRzTGVuZ3RoKGV2ZW50c01hcCkge1xuXHQgICAgdmFyIGxlbiA9IDA7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnRzTWFwKSB7XG5cdCAgICAgIGlmIChpc0FycmF5KGV2ZW50c01hcFtrZXldKSkge1xuXHQgICAgICAgIGxlbiArPSBldmVudHNNYXBba2V5XS5sZW5ndGg7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBsZW47XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgYWRkRXZlbnQ6IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgIGlmICghZXZlbnQpIHJldHVybjtcblx0ICAgICAgICBpZiAoX3Nlc3Npb25JZCkge1xuXHQgICAgICAgICAgX21lbW9yeUV2ZW50cy51bnNoaWZ0KGV2ZW50KTtcblx0ICAgICAgICAgIFxuXHQgICAgICAgICAgaWYgKF9tZW1vcnlFdmVudHMubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUVNT1JZX01BWF9DT1VOVCkge1xuXHQgICAgICAgICAgICBfY2FjaGVFdmVudHMoX3Nlc3Npb25JZCk7XG5cdCAgICAgICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdWxvZygpLncoJ3Nlc3Npb24gaWQgaXMgbnVsbDogJywgX3Nlc3Npb25JZCk7XG5cdCAgICAgICAgICBcblx0ICAgICAgICAgIF9ub1Nlc3Npb25FdmVudHMudW5zaGlmdChldmVudCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHRcblx0ICAgICAgc2V0U2Vzc2lvbklkOiBmdW5jdGlvbiAoc2Vzc2lvbklkKSB7XG5cdCAgICAgICAgX3Nlc3Npb25JZCA9IHNlc3Npb25JZDtcblx0XG5cdCAgICAgICAgdWxvZygpLnYoJ3NldFNlc3Npb25JZDogJywgX3Nlc3Npb25JZCk7XG5cdCAgICAgICAgaWYgKGlzQXJyYXkoX25vU2Vzc2lvbkV2ZW50cykgJiYgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggJiYgX3Nlc3Npb25JZCkge1xuXHQgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfbm9TZXNzaW9uRXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkRXZlbnQoX25vU2Vzc2lvbkV2ZW50c1tpXSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIGdldEVrdnM6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZWt2cyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkVLVlMpO1xuXHQgICAgICAgIFxuXHQgICAgICAgIGlmIChfbWVtb3J5RXZlbnRzICYmIF9tZW1vcnlFdmVudHMubGVuZ3RoKSB7XG5cdCAgICAgICAgICBla3ZzID0gX2J1aWxkRWt2cyhla3ZzLCBfbWVtb3J5RXZlbnRzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGVrdnM7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNhY2hlKCkucmVtb3ZlKGFwbHVzU3RhdGljLkVLVlMpO1xuXHQgICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcblx0ICAgICAgICBfbm9TZXNzaW9uRXZlbnRzLmxlbmd0aCA9IDA7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFfaW5zdGFuY2UpIHtcblx0ICAgICAgX2luc3RhbmNlID0gaW5pdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9pbnN0YW5jZTtcblx0ICB9O1xuXHR9KSgpO1xuXG4vKioqLyB9KSxcbi8qIDE5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkpIHtcblx0ICAgIHJldHVybiBBcnJheS5pc0FycmF5KG8pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIEhlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIGJ1aWxkQm9keSA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHR2YXIgcmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHR2YXIgUXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIE1BWF9RVUVVRV9DT1VOVCA9IDUwOyAvLyDkuLrpmLLmraLlm6DnvZHnu5zlvILluLjlr7zoh7TnvJPlrZjov4flpKfvvIzorr7nva7nvJPlrZjkuKrmlbDkuIrpmZBcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0bW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXsgXG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9ydW5uaW5nID0gZmFsc2U7XG5cdCAgdmFyIF9mYWlsUmVxdWVzdHMgPSBbXTtcblx0ICB2YXIgX3F1ZXVlID0gbmV3IFF1ZXVlKE1BWF9RVUVVRV9DT1VOVCk7XG5cdFxuXHQgIGZ1bmN0aW9uIF9lbnF1ZXVlUmVxdWVzdChkYXRhVHlwZSwgb3B0aW9ucywgY2IpIHtcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgICAgdmFyIGRhdGEgPSBidWlsZEJvZHkoZGF0YVR5cGUpO1xuXHQgICAgaWYgKGRhdGEpIHtcblx0ICAgICAgdmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgY2xpZW50ID0gYXBsdXMuX2FwbHVzX2NsaWVudCB8fCB7fTtcblx0ICAgICAgZGF0YS5oZWFkZXIgPSB1dGlsRGFzaC5hc3NpZ24oZGF0YS5oZWFkZXIsIEhlYWRlci5nZXROZXRJbmZvKGNsaWVudCkpO1xuXHQgICAgICBkYXRhLm5vQ2FjaGUgPSBvcHRpb25zLm5vQ2FjaGU7XG5cdCAgICAgIF9xdWV1ZS5lbnF1ZXVlKGRhdGEpO1xuXHQgICAgfVxuXHQgICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcblx0ICB9XG5cdCAgZnVuY3Rpb24gX3NlbmRRdWV1ZShjb21wbGV0ZWRDYWxsYmFjaykge1xuXHQgICAgdmFyIGRhdGEgPSBfcXVldWUuZnJvbnQoKTtcblx0ICAgIHZhciBzdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBfcXVldWUuZGVxdWV1ZSgpO1xuXHQgICAgICBfc2VuZFF1ZXVlKGNvbXBsZXRlZENhbGxiYWNrKTtcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGZhaWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIOWPkemAgeWksei0peWImeWwhuivpeadoeaVsOaNrua3u+WKoOWIsOmYn+WIl+WwvumDqO+8jOmYsuatouW9seWTjeWQjue7reaVsOaNrueahOWPkemAgVxuXHQgICAgICB2YXIgaXRlbSA9IF9xdWV1ZS5kZXF1ZXVlKCk7XG5cdCAgICAgIGl0ZW0gJiYgKCFpdGVtLm5vQ2FjaGUpICYmIF9mYWlsUmVxdWVzdHMucHVzaChpdGVtKTtcblx0ICAgICAgX3NlbmRRdWV1ZShjb21wbGV0ZWRDYWxsYmFjayk7XG5cdCAgICB9O1xuXHQgICAgaWYgKGRhdGEpIHtcblx0ICAgICAgcmVxdWVzdChkYXRhLCBzdWNjZXNzLCBmYWlsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIF9wcm9jZXNzRmFpbFJlcXVlc3RzKCk7XG5cdCAgICAgIGNvbXBsZXRlZENhbGxiYWNrKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBfcHJvY2Vzc0ZhaWxSZXF1ZXN0cygpIHtcblx0ICAgIC8vIOWPkemAgeWujOaIkOWQjuWwhuWksei0peeahOivt+axgumHjeaWsOa3u+WKoOWIsOmYn+WIl+S4rVxuXHQgICAgX2ZhaWxSZXF1ZXN0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgIF9xdWV1ZS5lbnF1ZXVlKGl0ZW0pO1xuXHQgICAgfSk7XG5cdCAgICBfZmFpbFJlcXVlc3RzLmxlbmd0aCA9IDA7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBfc3RhcnRTZW5kKGNvbXBsZXRlZENhbGxiYWNrKSB7XG5cdCAgICBpZiAoX3J1bm5pbmcpIHtcblx0ICAgICAgdWxvZygpLnYoJ+mYn+WIl+ato+WcqOWPkemAgeS4rScpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBfcnVubmluZyA9IHRydWU7XG5cdCAgICAvLyDlnKh0YXJvMXjjgIF0YXJvMnjmoYbmnrbkuK3vvIzlv4XpobvpgJrov4flj5jph4/lo7DmmI7nmoTmlrnlvI/kvKDlhaXvvIzlkKbliJlfc2VuZFF1ZXVl6Zi75aGe77yM5Zue6LCD5peg5rOV6YeN572uX3J1bm5pbmfvvIzlr7zoh7Tml6Xlv5flj5HpgIHkuI3lh7rvvJvljp/lm6DkuI3mmI5cblx0ICAgIC8vIOWmguaenOWOu+aOiV9ydW5uaW5n55qE6K+d77yM5Lya5a+86Ie06YeN5aSN5LiK5oqlc2Vzc2lvbuaXpeW/l1xuXHQgICAgdmFyIGNiID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBfcnVubmluZyA9IGZhbHNlO1xuXHQgICAgICBpc0Z1bmN0aW9uKGNvbXBsZXRlZENhbGxiYWNrKSAmJiBjb21wbGV0ZWRDYWxsYmFjaygpO1xuXHQgICAgfTtcblx0ICAgIF9zZW5kUXVldWUoY2IpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gUmVxdWVzdFF1ZXVlKCkge1xuXHQgICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKGRhdGFUeXBlLCBvcHRpb25zLCBjb21wbGV0ZWRDYWxsYmFjaykge1xuXHQgICAgICBpZiAoZGF0YVR5cGUpIHtcblx0ICAgICAgICB0aGlzLmFkZChkYXRhVHlwZSwgb3B0aW9ucywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgX3N0YXJ0U2VuZChjb21wbGV0ZWRDYWxsYmFjayk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgX3N0YXJ0U2VuZChjb21wbGV0ZWRDYWxsYmFjayk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5hZGQgPSBmdW5jdGlvbiAoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgaWYgKCF1dGlsLmNoZWNrT3BlbmlkKGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCkpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIF9lbnF1ZXVlUmVxdWVzdChkYXRhVHlwZSwgb3B0aW9ucywgY2IpO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBpdGVtcyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLlJFUVVFU1RTKTtcblx0ICAgICAgaWYgKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCkge1xuXHQgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIF9xdWV1ZS5lbnF1ZXVlKGl0ZW0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIGNhY2hlKCkucmVtb3ZlKGFwbHVzU3RhdGljLlJFUVVFU1RTKTtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5SRVFVRVNUUywgY2xvbmVEZWVwKF9xdWV1ZS5pdGVtcygpKSk7XG5cdCAgICAgIF9xdWV1ZS5jbGVhcigpOyAvLyDkuIDlrpropoHlhYjkv53lrZjlho3muIXnqbrvvIzlkKbliJnkv53lrZjnmoTmsLjov5zmmK/nqbrmlbDmja5cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFfaW5zdGFuY2UpIHtcblx0ICAgICAgX2luc3RhbmNlID0gbmV3IFJlcXVlc3RRdWV1ZSgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9pbnN0YW5jZTtcblx0ICB9O1xuXHR9KSgpO1xuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRleHBvcnRzLmdldE5ldEluZm8gPSBmdW5jdGlvbihjbGllbnQpe1xuXHQgIHZhciByZXN1bHQgPSB7fTtcblx0ICB2YXIgYWNjZXNzID0gY2xpZW50Lm5ldHdvcmtUeXBlO1xuXHQgIGlmIChhY2Nlc3MgPT09ICdub25lJykge1xuXHQgICAgYWNjZXNzID0gJ3Vua25vd24nO1xuXHQgIH1cblx0XG5cdCAgYWNjZXNzID0gYWNjZXNzID8gYWNjZXNzLnRvTG93ZXJDYXNlKCkgOiAnJztcblx0ICBzd2l0Y2ggKGFjY2Vzcykge1xuXHQgIGNhc2UgdXRpbHMuQWNjZXNzVHlwZS5NT0JJTEVfTkVUV09SS180Rzpcblx0ICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdMVEUnO1xuXHQgICAgcmVzdWx0LmFjY2VzcyA9ICc0Ryc7XG5cdCAgICBicmVhaztcblx0ICBjYXNlIHV0aWxzLkFjY2Vzc1R5cGUuTU9CSUxFX05FVFdPUktfM0c6XG5cdCAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnQ0RNQSc7XG5cdCAgICByZXN1bHQuYWNjZXNzID0gJzNHJztcblx0ICAgIGJyZWFrO1xuXHQgIGNhc2UgdXRpbHMuQWNjZXNzVHlwZS5NT0JJTEVfTkVUV09SS18yRzpcblx0ICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdHUlBTJztcblx0ICAgIHJlc3VsdC5hY2Nlc3MgPSAnMkcnO1xuXHQgICAgYnJlYWs7XG5cdCAgZGVmYXVsdDpcblx0ICAgIHJlc3VsdC5hY2Nlc3MgPSBhY2Nlc3M7XG5cdCAgICBkZWxldGUgcmVzdWx0LmFjY2Vzc19zdWJ0eXBlO1xuXHQgICAgYnJlYWs7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0SGVhZGVySW5mbyA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBoZWFkZXIgPSB7fTtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdFxuXHQgIHZhciBnbG9iYWxDb25maWcgPSBhcGx1cy5nbG9iYWxDb25maWcgfHwge307XG5cdCAgdmFyIGNsaWVudCA9IGFwbHVzLl9hcGx1c19jbGllbnQgfHwge307XG5cdFxuXHQgIHZhciBkYXRhID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuSU1QUklOVCk7XG5cdCAgaWYgKGRhdGEpIHtcblx0ICAgIGhlYWRlci5pbXByaW50ID0gZGF0YTtcblx0ICB9XG5cdFxuXHQgIGhlYWRlci5kZXZpY2VfdHlwZSA9ICdQaG9uZSc7XG5cdCAgaGVhZGVyLnNka192ZXJzaW9uID0gZ2xvYmFsQ29uZmlnLmx2ZXI7XG5cdCAgaGVhZGVyLmFwcGtleSA9IHV0aWwuZ2V0QXBwS2V5KCk7XG5cdCAgaGVhZGVyLmRldmljZV9pbmZvID0gJyc7XG5cdCAgaGVhZGVyLmFwcGlkID0gY2xpZW50LmFwcElkO1xuXHQgIGhlYWRlci5hcHBfZW52ID0gY2xpZW50LmFwcEVudjtcblx0ICBoZWFkZXIuYXBwX3ZlcnNpb24gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwVmVyc2lvbicpIHx8ICdkZXZ0b29scyc7XG5cdFxuXHQgIHZhciBnbG9iYWxfYXJncyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1nbG9iYWwtYXJncycpO1xuXHQgIGlmIChnbG9iYWxfYXJncyAmJiBnbG9iYWxfYXJncy5kZWJ1Z0lkKSB7XG5cdCAgICBoZWFkZXIubWluaWFwcERlYnVnSWQgPSBnbG9iYWxfYXJncy5kZWJ1Z0lkO1xuXHQgIH1cblx0XG5cdCAgdmFyIHN5c3RlbUluZm8gPSBjbGllbnQgfHwge307XG5cdCAgc3lzdGVtSW5mby5zYWZlQXJlYSA9IHN5c3RlbUluZm8uc2FmZUFyZWEgfHwge307XG5cdFxuXHQgIHZhciBtb2RlbCA9IHN5c3RlbUluZm8ubW9kZWwgfHwgJyc7XG5cdCAgdmFyIHBsYXRmb3JtID0gc3lzdGVtSW5mby5wbGF0Zm9ybSB8fCAnJztcblx0ICB2YXIgYnJhbmQgPSBzeXN0ZW1JbmZvLmJyYW5kIHx8ICcnO1xuXHQgIHZhciBicmFuZEwgPSBicmFuZC50b0xvd2VyQ2FzZSgpO1xuXHRcblx0ICBoZWFkZXIuc2RrX3R5cGUgPSBtaW5pLmdldFNka1R5cGUoKTtcblx0ICBoZWFkZXIucGxhdGZvcm0gPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuXHQgIGhlYWRlci5wbGF0Zm9ybV9zZGtfdmVyc2lvbiA9IHN5c3RlbUluZm8uU0RLVmVyc2lvbjtcblx0ICBoZWFkZXIucGxhdGZvcm1fdmVyc2lvbiA9IHN5c3RlbUluZm8ucGxhdGZvcm1WZXJzaW9uO1xuXHQgICAgXG5cdCAgdmFyIHcgPSBNYXRoLnJvdW5kKHN5c3RlbUluZm8uc2NyZWVuV2lkdGggKiBzeXN0ZW1JbmZvLnBpeGVsUmF0aW8pO1xuXHQgIHZhciBoID0gTWF0aC5yb3VuZChzeXN0ZW1JbmZvLnNjcmVlbkhlaWdodCAqIHN5c3RlbUluZm8ucGl4ZWxSYXRpbyk7XG5cdCAgaGVhZGVyLnJlc29sdXRpb24gPSB3ID4gaCA/IHcgKyAnKicgKyBoIDogaCArICcqJyArIHc7XG5cdFxuXHQgIGhlYWRlci5waXhlbF9yYXRpbyA9IHN5c3RlbUluZm8ucGl4ZWxSYXRpbztcblx0ICBoZWFkZXIub3MgPSBwbGF0Zm9ybTtcblx0ICBoZWFkZXIuZm9udF9zaXplX3NldHRpbmcgPSBzeXN0ZW1JbmZvLmZvbnRTaXplU2V0dGluZztcblx0ICBoZWFkZXIuZGV2aWNlX21vZGVsID0gbW9kZWw7IC8vIOiuvuWkh+Wei+WPt1xuXHQgIGhlYWRlci5kZXZpY2VfYnJhbmQgPSBicmFuZDsgLy8g6K6+5aSH55Sf5Lqn5ZWGXG5cdCAgLy8gX2hlYWRlci5jaGFubmVsID0gYnJhbmRMOyAvLyDov5nph4zmuKDpgZPmmoLml7blhYjnlKgg55Sf5Lqn5ZWG55qE5ZCN5a2XXG5cdCAgaGVhZGVyLmRldmljZV9tYW51ZmFjdHVyZXIgPSBicmFuZEw7XG5cdCAgaGVhZGVyLmRldmljZV9tYW51aWQgPSBtb2RlbDsgLy8g6K6+5aSH5ZOB54mML+Wei+WPt1xuXHQgIGhlYWRlci5kZXZpY2VfbmFtZSA9IG1vZGVsOyAvLyDlhoXpg6jkuqflk4Hku6Plj7dcblx0ICBoZWFkZXIub3NfdmVyc2lvbiA9IHN5c3RlbUluZm8ub3NfdmVyc2lvbjsgLy8gb3PniYjmnKzlj7dcblx0ICBoZWFkZXIubGFuZ3VhZ2UgPSBzeXN0ZW1JbmZvLmxhbmd1YWdlOyAvLyDor63oqIDvvIx6aFxuXHRcblx0ICB2YXIgbmV0SW5mbyA9IHRoaXMuZ2V0TmV0SW5mbyhjbGllbnQpO1xuXHQgIGhlYWRlci5hY2Nlc3MgPSBuZXRJbmZvLmFjY2Vzcztcblx0ICBpZiAobmV0SW5mby5hY2Nlc3Nfc3VidHlwZSkge1xuXHQgICAgaGVhZGVyLmFjY2Vzc19zdWJ0eXBlID0gbmV0SW5mby5hY2Nlc3Nfc3VidHlwZTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBoZWFkZXI7XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgc2Vzc2lvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGV2ZW50TWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGF0YVR5cGUpIHtcblx0ICB2YXIgZGF0YSA9IG51bGw7XG5cdCAgc3dpdGNoIChkYXRhVHlwZSkge1xuXHQgIGNhc2UgdXRpbHMuRGF0YVR5cGUuSEFMRl9TRVNTSU9OOlxuXHQgICAgZGF0YSA9IF9idWlsZEhhbGZTZXNzaW9uKCk7XG5cdCAgICBicmVhaztcblx0ICBjYXNlIHV0aWxzLkRhdGFUeXBlLkNMT1NFX1NFU1NJT046XG5cdCAgICBkYXRhID0gX2J1aWxkQ2xvc2VTZXNzaW9uKCk7XG5cdCAgICBicmVhaztcblx0ICBjYXNlIHV0aWxzLkRhdGFUeXBlLkVLVjpcblx0ICAgIGRhdGEgPSBfYnVpbGRFa3YoKTtcblx0ICAgIGJyZWFrO1xuXHQgIGRlZmF1bHQ6XG5cdCAgICBicmVhaztcblx0ICB9XG5cdCAgcmV0dXJuIGRhdGE7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRIYWxmU2Vzc2lvbigpIHtcblx0ICB2YXIgZGF0YSA9IG51bGw7XG5cdCAgdmFyIHNlc3Npb24gPSBzZXNzaW9uTWFuYWdlcigpLmNsb25lQ3VycmVudFNlc3Npb24oKTtcblx0ICBpZiAoc2Vzc2lvbikge1xuXHQgICAgZGF0YSA9IHtcblx0ICAgICAgaGVhZGVyOiB7XG5cdCAgICAgICAgc3Q6ICcxJ1xuXHQgICAgICB9LFxuXHQgICAgICBhbmFseXRpY3M6IHtcblx0ICAgICAgICBzZXNzaW9uczogW3Nlc3Npb25dXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGF0YTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9idWlsZENsb3NlU2Vzc2lvbigpIHtcblx0ICB2YXIgZGF0YSA9IG51bGw7XG5cdFxuXHQgIHZhciBhbmFseXRpY3MgPSB7fTtcblx0XG5cdCAgdmFyIHNlc3Npb24gPSBzZXNzaW9uTWFuYWdlcigpLmNsb25lQ3VycmVudFNlc3Npb24oKTtcblx0ICBpZiAoc2Vzc2lvbikge1xuXHQgICAgYW5hbHl0aWNzLnNlc3Npb25zID0gW3Nlc3Npb25dO1xuXHQgIH1cblx0XG5cdCAgdmFyIGVrdnMgPSBldmVudE1hbmFnZXIoKS5nZXRFa3ZzKCk7XG5cdCAgaWYgKGVrdnMpIHtcblx0ICAgIGFuYWx5dGljcy5la3ZzID0gY2xvbmVEZWVwKGVrdnMpO1xuXHQgICAgZXZlbnRNYW5hZ2VyKCkuY2xlYXIoKTtcblx0ICB9XG5cdFxuXHQgIGlmIChhbmFseXRpY3Muc2Vzc2lvbnMgfHwgYW5hbHl0aWNzLmVrdnMpIHtcblx0ICAgIGRhdGEgPSB7XG5cdCAgICAgIGFuYWx5dGljczogYW5hbHl0aWNzXG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGRhdGE7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRFa3YoKSB7XG5cdCAgdmFyIGRhdGEgPSBudWxsO1xuXHRcblx0ICB2YXIgZWt2cyA9IGV2ZW50TWFuYWdlcigpLmdldEVrdnMoKTtcblx0ICBpZiAoZWt2cykge1xuXHQgICAgZGF0YSA9IHtcblx0ICAgICAgYW5hbHl0aWNzOiB7XG5cdCAgICAgICAgZWt2czogY2xvbmVEZWVwKGVrdnMpXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBldmVudE1hbmFnZXIoKS5jbGVhcigpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGRhdGE7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIEhlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgbWFuZ2xlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdHZhciBpbXByaW50TWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIganNvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0dmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdGZ1bmN0aW9uIGdldFVybCgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgdmFyIHJob3N0ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcblx0ICB2YXIgbG9nRG9tYWluID0gbWluaS5nZXRMb2dEb21haW4oKTtcblx0ICBpZiAoIXJob3N0IHx8ICFsb2dEb21haW4pIHsgXG5cdCAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAvLyAgIG1zZzogJ2N1cnJlbnQgcmVxdWVzdCBkb21haW4gaW52YWxpZCwgcGxlYXNlIGNoZWNrIHlvdXIgYXBsdXMtcmhvc3QtdiB2YWx1ZSBpbnNpZGUgbWV0YWluZm8hJ1xuXHQgICAgLy8gfSk7XG5cdCAgICB1bG9nKCkudygnY3VycmVudCByZXF1ZXN0IGRvbWFpbiBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91ciBhcGx1cy1yaG9zdC12IHZhbHVlIGluc2lkZSBtZXRhaW5mbyEnKTtcblx0ICAgIHJldHVybiAnJztcblx0ICB9XG5cdCAgdmFyIHVybCA9IFsnLy8nLCByaG9zdCwgbG9nRG9tYWluXS5qb2luKCcnKTtcblx0ICB2YXIgcHJvdG9jYWwgPSBhcGx1c1N0YXRpYy5IVFRQUztcblx0ICBpZiAoLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcblx0ICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICB9XG5cdCAgdXJsID0gcHJvdG9jYWwgKyB1cmw7XG5cdCAgcmV0dXJuIHVybDtcblx0fTtcblx0XG5cdHZhciBNQVhfUkVRVUVTVF9USU1FT1VUID0gNTAwMDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVxdWVzdChkYXRhLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWxDYWxsYmFjaywgY29tcGxldGVkQ2FsbGJhY2spIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgdmFyIHBfaGVhZGVyID0gSGVhZGVyLmdldEhlYWRlckluZm8oKTtcblx0ICAvLyBpZiAoIXV0aWwuY2hlY2tPcGVuaWQoYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSkpIHtcblx0ICAvLyAgIHJldHVybjtcblx0ICAvLyB9XG5cdFxuXHQgIGlmIChtaW5pLmdldFBsYXRmb3JtVHlwZSgpID09PSAnbXknIHx8IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCkgPT09ICd0YW9iYW8nKSB7XG5cdCAgICBwX2hlYWRlclsnaWRfdHlwZSddID0gJ2FsaXBheV9pZCc7XG5cdCAgICBwX2hlYWRlclsnaWRfdHJhY2tpbmcnXSA9IHtcblx0ICAgICAgYWxpcGF5X2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8ICcnLFxuXHQgICAgICB1bmlvbmlkOiBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpIHx8ICcnLFxuXHQgICAgICB1c2VySWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSB8fCAnJyxcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHBfaGVhZGVyWydpZF90eXBlJ10gPSAnb3BlbmlkJztcblx0ICAgIHBfaGVhZGVyWydpZF90cmFja2luZyddID0ge1xuXHQgICAgICBvcGVuaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCkgfHwgJycsXG5cdCAgICAgIHVuaW9uaWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfZGV2X2lkJykgfHwgJycsXG5cdCAgICAgIHVzZXJJZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpIHx8ICcnLFxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGlmIChpbXByaW50TWFuYWdlci5nZXQoKSkge1xuXHQgICAgcF9oZWFkZXJbYXBsdXNTdGF0aWMuSU1QUklOVF0gPSBpbXByaW50TWFuYWdlci5nZXQoKTtcblx0ICB9XG5cdFxuXHQgIGlmIChkYXRhLmFuYWx5dGljcykge1xuXHQgICAgdmFyIHVzZXJJZCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKTtcblx0ICAgIHZhciB1c2VyX25pY2sgPSBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpO1xuXHQgICAgZGF0YS5hbmFseXRpY3MuYWN0aXZlX3VzZXIgPSB7XG5cdCAgICAgIHB1aWQ6IHVzZXJJZCxcblx0ICAgICAgcHJvdmlkZXI6IHVzZXJfbmlja1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGRhdGEuaGVhZGVyID0gdXRpbHMuYXNzaWduKHBfaGVhZGVyLCBkYXRhLmhlYWRlciwge1xuXHQgICAgdHM6IERhdGUubm93KCksXG5cdCAgICB0cmFjZUlkOiB1dGlscy5nZXRSYW5kb21TdHIoMTApICsgRGF0ZS5ub3coKSArIHV0aWxzLmdldFJhbmRvbVN0cig5KVxuXHQgIH0pO1xuXHQgIHZhciBtYW5nbGVEYXRhID0gbWFuZ2xlKGRhdGEpO1xuXHQgIHZhciByZXF1ZXN0RGF0YSA9IGpzb25VdGlsLnN0cmluZ2Z5KG1hbmdsZURhdGEpO1xuXHQgIHZhciB1cmwgPSBnZXRVcmwoKTtcblx0ICB2YXIgY29uZmlnID0ge1xuXHQgICAgdXJsOiB1cmwsXG5cdCAgICBtZXRob2Q6ICdQT1NUJyxcblx0ICAgIGRhdGE6IGJhc2U2NC5lbmNvZGUocmVxdWVzdERhdGEpLFxuXHQgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHtcblx0ICAgICAgdmFyIHN0YXR1c0NvZGUgPSByZXNwLmNvZGUgfHwgcmVzcC5zdGF0dXMgfHwgcmVzcC5zdGF0dXNDb2RlO1xuXHQgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gMjAwIHx8IHN0YXR1c0NvZGUgPT09IDQxMykge1xuXHQgICAgICAgIHVsb2coKS5pKCfmlbDmja7lj5HpgIHmiJDlip86ICcsIGRhdGEsIHJlcXVlc3REYXRhKTtcblx0XG5cdCAgICAgICAgLy8g5Zyo5q2k5aSE5bCGaW1wcmludOWGheWuueWKoOWFpeWIsOacrOWcsOe8k+WtmOS4rVxuXHQgICAgICAgIHNhdmVJbXByaW50KChyZXNwLmRhdGEgfHwge30pLmltcHJpbnQpO1xuXHQgICAgICAgIGlzRnVuY3Rpb24oc3VjY2Vzc0NhbGxiYWNrKSAmJiBzdWNjZXNzQ2FsbGJhY2socmVzcCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdWxvZygpLncoJ+aVsOaNruWPkemAgeWksei0pTogJywgcmVxdWVzdERhdGEpO1xuXHQgICAgICAgIGlzRnVuY3Rpb24oZmFpbENhbGxiYWNrKSAmJiBmYWlsQ2FsbGJhY2soKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGZhaWw6IGZ1bmN0aW9uIChpc1RpbWVvdXQpIHtcblx0ICAgICAgdWxvZygpLncoIHRydWUgPyAn6LaF5pe2OiAnIDogJ+Wksei0pTogJywgcmVxdWVzdERhdGEpO1xuXHQgICAgICBpc0Z1bmN0aW9uKGZhaWxDYWxsYmFjaykgJiYgZmFpbENhbGxiYWNrKCk7XG5cdCAgICB9LFxuXHQgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaXNGdW5jdGlvbihjb21wbGV0ZWRDYWxsYmFjaykgJiYgY29tcGxldGVkQ2FsbGJhY2soKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBzZGtSZXF1ZXN0KHV0aWxzLmFzc2lnbihjb25maWcsIGJ1aWxkSHR0cEhlYWRlcigpKSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZGtSZXF1ZXN0KG9wdGlvbnMpIHtcblx0ICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIHNyY1N1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cdCAgdmFyIHNyY0ZhaWwgPSBvcHRpb25zLmZhaWw7XG5cdCAgdmFyIGlzVGltZW91dCA9IGZhbHNlO1xuXHQgIHZhciBzdCA9IG51bGw7XG5cdFxuXHQgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uIChyZXNwKSB7XG5cdCAgICBpZiAoIWlzVGltZW91dCkge1xuXHQgICAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuXHQgICAgICBpc0Z1bmN0aW9uKHNyY1N1Y2Nlc3MpICYmIHNyY1N1Y2Nlc3MocmVzcCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgb3B0aW9ucy5mYWlsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFpc1RpbWVvdXQpIHtcblx0ICAgICAgc3QgJiYgY2xlYXJUaW1lb3V0KHN0KTtcblx0ICAgICAgaXNGdW5jdGlvbihzcmNGYWlsKSAmJiBzcmNGYWlsKGZhbHNlKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHRyeSB7XG5cdCAgICBjdHgucmVxdWVzdChvcHRpb25zKTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGRkICYmIGRkLmh0dHBSZXF1ZXN0KG9wdGlvbnMpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB1bG9nKCkudygn6K+35rGC5Y+R6YCB5aSx6LSlOiAnLCBlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHN0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuXHQgICAgaXNUaW1lb3V0ID0gdHJ1ZTtcblx0XG5cdCAgICBpc0Z1bmN0aW9uKHNyY0ZhaWwpICYmIHNyY0ZhaWwoaXNUaW1lb3V0KTtcblx0ICB9LCBvcHRpb25zLnRpbWVvdXQgfHwgTUFYX1JFUVVFU1RfVElNRU9VVCk7XG5cdH1cblx0XG5cdC8vIOacjeWKoeerr+S4i+WPkeWPkemAgeetlueVpVxuXHRmdW5jdGlvbiBzYXZlSW1wcmludChpbXByaW50KSB7XG5cdCAgaWYgKGltcHJpbnQpIHtcblx0ICAgIGltcHJpbnRNYW5hZ2VyLnNldChpbXByaW50KTtcblx0ICAgIGltcHJpbnRNYW5hZ2VyLnNhdmUoKTtcblx0XG5cdCAgICB1bG9nKCkudignaW1wcmludDogJywgaW1wcmludE1hbmFnZXIuZ2V0SW1wT2JqKCkpO1xuXHRcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJ1aWxkSHR0cEhlYWRlcigpIHtcblx0ICB2YXIgaGVhZGVyVHlwZSA9IG1pbmkuZ2V0U2RrVHlwZSgpICsgJy9qc29uJztcblx0ICB2YXIgaXNNeSA9IGZhbHNlO1xuXHQgIHRyeSB7XG5cdCAgICBpZiAobXkpIHtcblx0ICAgICAgaXNNeSA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKXt9O1xuXHRcblx0ICBpZiAoaXNNeSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaGVhZGVyczoge1xuXHQgICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuXHQgICAgICAgICdNc2ctVHlwZSc6IGhlYWRlclR5cGVcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaGVhZGVyOiB7XG5cdCAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IGhlYWRlclR5cGUsXG5cdCAgICAgICAgJ01zZy1UeXBlJzogaGVhZGVyVHlwZVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0XG5cblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBhbmFseXRpY3NNYXAgPSB7XG5cdCAgc2Vzc2lvbnM6ICdzbicsXG5cdCAgLy8gcGFnZXM6ICdwJyxcblx0ICAvLyBzaGFyZXM6ICdzcicsXG5cdCAgZWt2czogJ2UnLFxuXHQgIGFjdGl2ZV91c2VyOiAnYWN0aXZlX3VzZXInXG5cdH07XG5cdFxuXHR2YXIgaGVhZGVyTWFwID0ge1xuXHQgIHNka190eXBlOiAnc2R0Jyxcblx0ICBhY2Nlc3M6ICdhYycsXG5cdCAgYWNjZXNzX3N1YnR5cGU6ICdhY3MnLFxuXHQgIGRldmljZV9tb2RlbDogJ2RtJyxcblx0ICBsYW5ndWFnZTogJ2xhbmcnLFxuXHQgIGRldmljZV90eXBlOiAnZHQnLFxuXHQgIGRldmljZV9tYW51ZmFjdHVyZXI6ICdkbWYnLFxuXHQgIGRldmljZV9uYW1lOiAnZG4nLFxuXHQgIHBsYXRmb3JtX3ZlcnNpb246ICdwdicsXG5cdCAgaWRfdHlwZTogJ2l0Jyxcblx0ICBmb250X3NpemVfc2V0dGluZzogJ2ZzcycsXG5cdCAgb3NfdmVyc2lvbjogJ292Jyxcblx0ICBkZXZpY2VfbWFudWlkOiAnZGlkJyxcblx0ICBwbGF0Zm9ybV9zZGtfdmVyc2lvbjogJ3BzdicsXG5cdCAgZGV2aWNlX2JyYW5kOiAnZGInLFxuXHQgIGFwcGtleTogJ2FrJyxcblx0ICBfaWQ6ICdpZCcsXG5cdCAgaWRfdHJhY2tpbmc6ICdpdHInLFxuXHQgIGltcHJpbnQ6ICdpbXAnLFxuXHQgIHNka192ZXJzaW9uOiAnc3YnLFxuXHQgIHJlc29sdXRpb246ICdybCcsXG5cdCAgdGVzdFRva2VuOiAndHRuJyxcblx0ICBtaW5pYXBwRGVidWdJZDogJ2RrJyxcblx0ICAvLyB0aGVtZTogJ3Q1Jyxcblx0ICAvLyBiZW5jaG1hcmtfbGV2ZWw6ICdibWwnLFxuXHQgIC8vIHNjcmVlbl93aWR0aDogJ3N3Jyxcblx0ICAvLyBzY3JlZW5faGVpZ2h0OiAnc2gnLFxuXHQgIC8vIHN0YXR1c19iYXJfaGVpZ2h0OidzYmgnLFxuXHQgIC8vIHNhZmVfYXJlYV90b3A6ICdzYXQnLFxuXHQgIC8vIHNhZmVfYXJlYV9sZWZ0OiAnc2FsJyxcblx0ICAvLyBzYWZlX2FyZWFfcmlnaHQ6ICdzYXInLFxuXHQgIC8vIHNhZmVfYXJlYV9ib3R0b206ICdzYWInLFxuXHQgIC8vIHNhZmVfYXJlYV9oZWlnaHQ6ICdzYWgnLFxuXHQgIC8vIHNhZmVfYXJlYV93aWR0aDogJ3NhdycsXG5cdCAgcGl4ZWxfcmF0aW86ICdwcicsXG5cdCAgLy8gc3RvcmFnZTogJ3M3Jyxcblx0ICAvLyBob3N0OiAnaHMnXG5cdH07XG5cdFxuXHR2YXIgaWRNYXAgPSB7XG5cdCAgdXVpZDogJ3VkJyxcblx0ICB1bmlvbmlkOiAndW5kJyxcblx0ICBvcGVuaWQ6ICdvZCcsXG5cdCAgYW5vbnltb3VzaWQ6ICduZCcsXG5cdCAgYWxpcGF5X2lkOiAnYWQnLFxuXHQgIGRldmljZV9pZDogJ2RkJyxcblx0ICB1c2VyaWQ6ICdwdWlkJ1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGg6IF9tYW5nbGVIZWFkZXIoZGF0YS5oZWFkZXIsIGhlYWRlck1hcCksXG5cdCAgICBhOiBfbWFuZ2xlQW5hbHl0aWNzKGRhdGEuYW5hbHl0aWNzLCBhbmFseXRpY3NNYXApXG5cdCAgfTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9tYW5nbGVIZWFkZXIoaGVhZGVyLCBtYXApIHtcblx0ICB2YXIgcmVzdWx0ID0gX21hbmdsZU9iaihoZWFkZXIsIG1hcCk7XG5cdFxuXHQgIGlmIChoZWFkZXIgJiYgaGVhZGVyLmlkX3RyYWNraW5nKSB7XG5cdCAgICByZXN1bHRbbWFwLmlkX3RyYWNraW5nIHx8ICdpZF90cmFja2luZyddID0gX21hbmdsZU9iaihoZWFkZXIuaWRfdHJhY2tpbmcsIGlkTWFwKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfbWFuZ2xlT2JqKG9iaiwgbWFwKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHRcblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICBpZiAobWFwW2tleV0pIHtcblx0ICAgICAgcmVzdWx0W21hcFtrZXldXSA9IG9ialtrZXldO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfbWFuZ2xlQW5hbHl0aWNzKGFuYWx5dGljcywgbWFwKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHRcblx0ICBpZiAoYW5hbHl0aWNzKSB7XG5cdCAgICBmb3IgKHZhciBwcm9wIGluIGFuYWx5dGljcykge1xuXHQgICAgICBpZiAoYW5hbHl0aWNzW3Byb3BdKSB7XG5cdCAgICAgICAgcmVzdWx0W21hcFtwcm9wXV0gPSBhbmFseXRpY3NbcHJvcF07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAyNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIganNvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0dmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0ZnVuY3Rpb24gSW1wcmludE1hbmFnZXIoKSB7XG5cdCAgdmFyIF9pbXByaW50ID0gJyc7XG5cdCAgdmFyIHQgPSB0aGlzO1xuXHQgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGltcHJpbnQpIHtcblx0ICAgIF9pbXByaW50ID0gaW1wcmludDtcblx0ICB9O1xuXHRcblx0ICB0aGlzLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBfaW1wcmludDtcblx0ICB9O1xuXHQgIHRoaXMuZ2V0SW1wT2JqID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGpzb25VdGlsLnBhcnNlKGJhc2U2NC5kZWNvZGUoX2ltcHJpbnQpKTtcblx0ICB9O1xuXHQgIHRoaXMuZ2V0SXRlbSA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHZhciBpbXBvYmogPSB0LmdldEltcE9iaigpO1xuXHQgICAgcmV0dXJuIGltcG9iaiA/IGltcG9ialtuYW1lXSB8fCBcIlwiIDogXCJcIjtcblx0ICB9O1xuXHRcblx0ICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBfaW1wcmludCA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChfaW1wcmludCkge1xuXHQgICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5JTVBSSU5ULCBfaW1wcmludCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHR2YXIgaW1wcmludE1hbmFnZXIgPSBuZXcgSW1wcmludE1hbmFnZXIoKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaW1wcmludE1hbmFnZXI7XG5cbi8qKiovIH0pLFxuLyogMjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHR2YXIgYjY0Y2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cdHZhciBiNjR0YWIgPSAoZnVuY3Rpb24gKGJpbikge1xuXHQgIHZhciB0ID0ge307XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBiaW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB0W2Jpbi5jaGFyQXQoaSldID0gaTtcblx0ICByZXR1cm4gdDtcblx0fSkoYjY0Y2hhcnMpO1xuXHR2YXIgZnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcblx0dmFyIGNiX3V0b2IgPSBmdW5jdGlvbiAoYykge1xuXHQgIHZhciBjYztcblx0ICBpZiAoYy5sZW5ndGggPCAyKSB7XG5cdCAgICBjYyA9IGMuY2hhckNvZGVBdCgwKTtcblx0ICAgIHJldHVybiBjYyA8IDEyOCA/IGMgOiBjYyA8IDIwNDggPyBmcm9tQ2hhckNvZGUoMTkyIHwgY2MgPj4+IDYpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpIDogZnJvbUNoYXJDb2RlKDIyNCB8IGNjID4+PiAxMiAmIDE1KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gNiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgY2MgPSA2NTUzNiArIChjLmNoYXJDb2RlQXQoMCkgLSA1NTI5NikgKiAxMDI0ICsgKGMuY2hhckNvZGVBdCgxKSAtIDU2MzIwKTtcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoMjQwIHwgY2MgPj4+IDE4ICYgNykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDEyICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiA2ICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpO1xuXHQgIH1cblx0fTtcblx0dmFyIHJlX3V0b2IgPSAvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGRl18W15cXHgwMC1cXHg3Rl0vZztcblx0dmFyIHV0b2IgPSBmdW5jdGlvbiAodSkge1xuXHQgIHJldHVybiB1LnJlcGxhY2UocmVfdXRvYiwgY2JfdXRvYik7XG5cdH07XG5cdHZhciBjYl9lbmNvZGUgPSBmdW5jdGlvbiAoY2NjKSB7XG5cdCAgdmFyIHBhZGxlbiA9IFswLCAyLCAxXVtjY2MubGVuZ3RoICUgM10sXG5cdCAgICBvcmQgPSBjY2MuY2hhckNvZGVBdCgwKSA8PCAxNiB8IChjY2MubGVuZ3RoID4gMSA/IGNjYy5jaGFyQ29kZUF0KDEpIDogMCkgPDwgOCB8IChjY2MubGVuZ3RoID4gMiA/IGNjYy5jaGFyQ29kZUF0KDIpIDogMCksXG5cdCAgICBjaGFycyA9IFtiNjRjaGFycy5jaGFyQXQob3JkID4+PiAxOCksIGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDEyICYgNjMpLCBwYWRsZW4gPj0gMiA/ICc9JyA6IGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDYgJiA2MyksIHBhZGxlbiA+PSAxID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCAmIDYzKV07XG5cdCAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xuXHR9O1xuXHR2YXIgYnRvYSA9IGZ1bmN0aW9uIChiKSB7XG5cdCAgcmV0dXJuIGIucmVwbGFjZSgvW1xcc1xcU117MSwzfS9nLCBjYl9lbmNvZGUpO1xuXHR9O1xuXHR2YXIgX2VuY29kZSA9IGZ1bmN0aW9uICh1KSB7XG5cdCAgcmV0dXJuIGJ0b2EodXRvYih1KSk7XG5cdH07XG5cdHZhciBlbmNvZGUgPSBmdW5jdGlvbiAodSwgdXJpc2FmZSkge1xuXHQgIHJldHVybiAhdXJpc2FmZSA/IF9lbmNvZGUoU3RyaW5nKHUpKSA6IF9lbmNvZGUoU3RyaW5nKHUpKS5yZXBsYWNlKC9bK1xcL10vZywgZnVuY3Rpb24gKG0wKSB7XG5cdCAgICByZXR1cm4gbTAgPT0gJysnID8gJy0nIDogJ18nO1xuXHQgIH0pLnJlcGxhY2UoL1xcPS9nLCAnJyk7XG5cdH07XG5cdC8vIHZhciBlbmNvZGVVUkkgPSBmdW5jdGlvbiAodSkge1xuXHQvLyAgIHJldHVybiBlbmNvZGUodSwgdHJ1ZSk7XG5cdC8vIH07XG5cdHZhciByZV9idG91ID0gbmV3IFJlZ0V4cChbJ1vDgC3Dn11bwoAtwr9dJywgJ1vDoC3Dr11bwoAtwr9dezJ9JywgJ1vDsC3Dt11bwoAtwr9dezN9J10uam9pbignfCcpLCAnZycpO1xuXHR2YXIgY2JfYnRvdSA9IGZ1bmN0aW9uIChjY2NjKSB7XG5cdCAgc3dpdGNoIChjY2NjLmxlbmd0aCkge1xuXHQgIGNhc2UgNDpcblx0ICAgIHZhciBjcCA9ICg3ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxOCB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMikpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgzKSwgb2Zmc2V0ID0gY3AgLSA2NTUzNjtcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKG9mZnNldCA+Pj4gMTApICsgNTUyOTYpICsgZnJvbUNoYXJDb2RlKChvZmZzZXQgJiAxMDIzKSArIDU2MzIwKTtcblx0ICBjYXNlIDM6XG5cdCAgICByZXR1cm4gZnJvbUNoYXJDb2RlKCgxNSAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSk7XG5cdCAgZGVmYXVsdDpcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDMxICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpO1xuXHQgIH1cblx0fTtcblx0dmFyIGJ0b3UgPSBmdW5jdGlvbiAoYikge1xuXHQgIHJldHVybiBiLnJlcGxhY2UocmVfYnRvdSwgY2JfYnRvdSk7XG5cdH07XG5cdHZhciBjYl9kZWNvZGUgPSBmdW5jdGlvbiAoY2NjYykge1xuXHQgIHZhciBsZW4gPSBjY2NjLmxlbmd0aCxcblx0ICAgIHBhZGxlbiA9IGxlbiAlIDQsXG5cdCAgICBuID0gKGxlbiA+IDAgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMCldIDw8IDE4IDogMCkgfCAobGVuID4gMSA/IGI2NHRhYltjY2NjLmNoYXJBdCgxKV0gPDwgMTIgOiAwKSB8IChsZW4gPiAyID8gYjY0dGFiW2NjY2MuY2hhckF0KDIpXSA8PCA2IDogMCkgfCAobGVuID4gMyA/IGI2NHRhYltjY2NjLmNoYXJBdCgzKV0gOiAwKSxcblx0ICAgIGNoYXJzID0gW2Zyb21DaGFyQ29kZShuID4+PiAxNiksIGZyb21DaGFyQ29kZShuID4+PiA4ICYgMjU1KSwgZnJvbUNoYXJDb2RlKG4gJiAyNTUpXTtcblx0ICBjaGFycy5sZW5ndGggLT0gWzAsIDAsIDIsIDFdW3BhZGxlbl07XG5cdCAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xuXHR9O1xuXHR2YXIgYXRvYiA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIGEucmVwbGFjZSgvW1xcc1xcU117MSw0fS9nLCBjYl9kZWNvZGUpO1xuXHR9O1xuXHR2YXIgX2RlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIGJ0b3UoYXRvYihhKSk7XG5cdH07XG5cdHZhciBkZWNvZGUgPSBmdW5jdGlvbiAoYSkge1xuXHQgIHJldHVybiBfZGVjb2RlKFN0cmluZyhhKS5yZXBsYWNlKC9bLV9dL2csIGZ1bmN0aW9uIChtMCkge1xuXHQgICAgcmV0dXJuIG0wID09ICctJyA/ICcrJyA6ICcvJztcblx0ICB9KS5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL10vZywgJycpKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZW5jb2RlID0gZW5jb2RlO1xuXHRleHBvcnRzLmRlY29kZSA9IGRlY29kZTtcblxuLyoqKi8gfSksXG4vKiAyNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1heENvdW50KSB7XG5cdCAgdmFyIF9tYXhDb3VudCA9IG1heENvdW50O1xuXHQgIHZhciBfaXRlbXMgPSBbXTtcblx0XG5cdCAgdGhpcy5lbnF1ZXVlID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgIGlmICh0eXBlb2YgX21heENvdW50ID09PSAnbnVtYmVyJyAmJiB0aGlzLnNpemUoKSA+PSBfbWF4Q291bnQpIHtcblx0ICAgICAgdGhpcy5kZXF1ZXVlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2l0ZW1zLnB1c2goaXRlbSk7XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIF9pdGVtcy5zaGlmdCgpO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuZnJvbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gX2l0ZW1zWzBdO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBfaXRlbXMubGVuZ3RoID09PSAwO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBfaXRlbXMubGVuZ3RoID0gMDtcblx0ICB9O1xuXHRcblx0ICB0aGlzLnNpemUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gX2l0ZW1zLmxlbmd0aDtcblx0ICB9O1xuXHRcblx0ICB0aGlzLml0ZW1zID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIF9pdGVtcztcblx0ICB9O1xuXHRcblx0ICB0aGlzLnByaW50ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdWxvZygpLnYoJy0tLXF1ZXVlOiAnLCBfaXRlbXMudG9TdHJpbmcoKSk7XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAyOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLmFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHRcblx0LyoqXG5cdCAqIOeUn+aIkOS4gOS4queUqOS6jumBv+WFjee8k+WtmOeahOmaj+acuuaVsFxuXHQgKiDkuLrkuoblh4/lsJEgdXJsIOmVv+W6pu+8jOi/meS4qumaj+acuuaVsOaNrueahOmVv+W6puWumuS4uiA3IOS9je+8jFxuXHQgKiDkuLrkuoblh4/lsJHnorDmkp7vvIzkvb/nlKggMTYg6L+b5Yi25pWw5a2XXG5cdCAqXG5cdCAqIDI2ODQzNTQ1NiA9IDIgXiAyOCA9IDB4ZmZmZmZmZiArIDFcblx0ICovXG5cdGV4cG9ydHMubWFrZUNhY2hlTnVtID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNjg0MzU0NTYpLnRvU3RyaW5nKDE2KTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5ZCm5Lul5a2X56ym5LiyIHMyIOW8gOWktFxuXHQgKiBAcGFyYW0gczEge1N0cmluZ31cblx0ICogQHBhcmFtIHMyIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLmlzU3RhcnRXaXRoID0gZnVuY3Rpb24oczEsIHMyKSB7XG5cdCAgcmV0dXJuIHMxLmluZGV4T2YoczIpID09PSAwO1xuXHR9O1xuXHQvKipcblx0ICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+a7nuS7peWtl+espuS4siBzMiDnu5PlsL5cblx0ICogQHBhcmFtIHMxIHtTdHJpbmd9XG5cdCAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5pc0VuZFdpdGggPSBmdW5jdGlvbihzMSwgczIpIHtcblx0ICB2YXIgbDEgPSBzMS5sZW5ndGgsIGwyID0gczIubGVuZ3RoO1xuXHQgIHJldHVybiBsMSA+PSBsMiAmJiBzMS5pbmRleE9mKHMyKSA9PSAobDEgLSBsMik7XG5cdH07XG5cdFxuXHRleHBvcnRzLmFueSA9IGZ1bmN0aW9uKGFyciwgZm4pIHtcblx0ICB2YXIgaTtcblx0ICB2YXIgbCA9IGFyci5sZW5ndGg7XG5cdCAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgaWYgKGZuKGFycltpXSkpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuaXNOdW1iZXIgPSBmdW5jdGlvbih2KSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJztcblx0fTtcblx0XG5cdGV4cG9ydHMuaXNOYU4gPSBmdW5jdGlvbih2KSB7XG5cdCAgaWYoaXNOYU4pIHtcblx0ICAgIHJldHVybiBpc05hTih2KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHYgIT09IHY7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbljIXlkKvlrZfnrKbkuLIgczJcblx0ICogQHBhcmFtIHMxIHtTdHJpbmd9XG5cdCAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5pc0NvbnRhaW4gPSBmdW5jdGlvbiAoczEsIHMyKSB7XG5cdCAgcmV0dXJuIHMxLmluZGV4T2YoczIpID4gLTE7XG5cdH07XG5cdFxuXHQvKipcblx0ICog5YWL6ZqG5LiA5Liqb2JqZWN0XG5cdCAqL1xuXHR2YXIgY2xvbmVEZWVwID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgdmFyIHN0cjtcblx0ICB2YXIgbmV3b2JqID0gb2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSA/IFtdIDoge307XG5cdCAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfSBlbHNlIGlmIChKU09OICYmIEpTT04ucGFyc2UpIHtcblx0ICAgIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7IC8v57O75YiX5YyW5a+56LGhXG5cdCAgICBuZXdvYmogPSBKU09OLnBhcnNlKHN0cik7IC8v6L+Y5Y6fXG5cdCAgfSBlbHNlIHtcblx0ICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG5cdCAgICAgIG5ld29ialtpXSA9IHR5cGVvZiBvYmpbaV0gPT09ICdvYmplY3QnID8gY2xvbmVEZWVwKG9ialtpXSkgOiBvYmpbaV07XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBuZXdvYmo7XG5cdH07XG5cdFxuXHRleHBvcnRzLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcblx0XG5cdC8qKlxuXHQgKiDojrflj5Z1cmzlj4LmlbAs5LuF6ZmQd2Vi44CBaDVcblx0ICovXG5cdHZhciBnZXRVcmxQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHJlZ2V4ID0gL1s/Jl0oW149I10rKT0oW14mI10qKS9nO1xuXHQgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0ICB2YXIgcGFyYW1zID0ge307XG5cdCAgdmFyIG1hdGNoO1xuXHQgIHdoaWxlIChtYXRjaCA9IHJlZ2V4LmV4ZWModXJsKSkge1xuXHQgICAgcGFyYW1zW21hdGNoWzFdXSA9IG1hdGNoWzJdO1xuXHQgIH1cblx0ICByZXR1cm4gcGFyYW1zO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRVcmxQYXJhbXMgPSBnZXRVcmxQYXJhbXM7XG5cdFxuXHQvKipcblx0ICog5Yik5pat56m65a+56LGhXG5cdCAqL1xuXHR2YXIgaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uKG8pIHtcblx0ICBpZighbykge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfTtcblx0ICBmb3IgKHZhciBrIGluIG8pIHtcblx0ICAgIGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRleHBvcnRzLmlzRW1wdHlPYmplY3QgPSBpc0VtcHR5T2JqZWN0O1xuXG4vKioqLyB9KSxcbi8qIDI5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XG5cdC8qKlxuXHQgKiDlr7nosaFtZXJnZVxuXHQgKiAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnblxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0T2JqLCBhcmdzT2JqKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgICAgICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcblx0ICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG5cdCAgICAgICAgaWYgKG5leHRTb3VyY2UgIT09IG51bGwpIHsgLy8gU2tpcCBvdmVyIGlmIHVuZGVmaW5lZCBvciBudWxsXG5cdCAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIG5leHRTb3VyY2UpIHtcblx0ICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuXHQgICAgICAgICAgICAgIHRvW25leHRLZXldID0gbmV4dFNvdXJjZVtuZXh0S2V5XTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdG87XG5cdCAgICB9KHRhcmdldE9iaiwgYXJnc09iaik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0YXJnZXRPYmosIGFyZ3NPYmopO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiAzMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgY3VycmVudFBhdGggPSBcIlwiO1xuXHR2YXIgcGFnZU9wdGlvbk1hcCA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gYnVpbGRQYXRoKHBhdGgsIHF1ZXJ5KSB7XG5cdCAgaWYgKCFwYXRoKSB7XG5cdCAgICByZXR1cm4gXCJcIjtcblx0ICB9XG5cdCAgdmFyIHFzID0gW107XG5cdCAgZm9yICh2YXIgcSBpbiBxdWVyeSkge1xuXHQgICAgcXMucHVzaChxICsgJz0nICsgcXVlcnlbcV0pO1xuXHQgIH1cblx0ICB2YXIgcXNzID0gcXMuam9pbignJicpO1xuXHQgIHJldHVybiBxc3MgPyBwYXRoICsgJz8nICsgcXNzIDogcGF0aDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0Q3VycmVudFBhZ2VQYXRoID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIGN1cnJlbnRQYXRoO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5zZXRDdXJyZW50UGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICBpZiAocGF0aCkge1xuXHQgICAgY3VycmVudFBhdGggPSBwYXRoO1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UGFnZVF1ZXJ5ID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICByZXR1cm4gcGFnZU9wdGlvbk1hcFtwYXRoXTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLnNldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgsIHF1ZXJ5KSB7XG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIHBhZ2VPcHRpb25NYXBbcGF0aF0gPSBxdWVyeTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEZ1bGxQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIHJldHVybiBidWlsZFBhdGgoY3VycmVudFBhdGgsIHBhZ2VPcHRpb25NYXBbcGF0aF0pO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRQYWdlTmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgbWV0YSA9IGFwbHVzLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJyk7XG5cdCAgdmFyIHJlYWxQYXRoID0gcGF0aCB8fCBjdXJyZW50UGF0aDtcblx0ICB0cnkge1xuXHQgICAgLy8g5a+55LqO5Yqo5oCB6Lev55Sx77yM5pSv5oyB55So5oi35Lyg5YWl5q2j5YiZ6L+b6KGM5Yy56YWNXG5cdCAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PSAnb2JqZWN0Jykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YSkge1xuXHQgICAgICAgIGlmIChrZXkgPT09IHJlYWxQYXRoKSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9IGVsc2UgaWYgKG1ldGFba2V5XSAmJiBtZXRhW2tleV0ucmVnUnVsZSkge1xuXHQgICAgICAgICAgcmVhbFBhdGggPSBtZXRhW2tleV0ucmVnUnVsZS50ZXN0KHBhdGgpID8ga2V5IDogcmVhbFBhdGg7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy9cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIC8vXG5cdCAgfVxuXHQgIHJldHVybiBtZXRhW3JlYWxQYXRoXTtcblx0ICAvLyBpZiAoIXBhdGgpIHtcblx0ICAvLyAgIHJldHVybiBtZXRhICYmIG1ldGFbY3VycmVudFBhdGhdO1xuXHQgIC8vIH0gZWxzZSB7XG5cdCAgLy8gICByZXR1cm4gbWV0YSAmJiBtZXRhW3BhdGhdO1xuXHQgIC8vIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UGFnZUNvZGUgPSBmdW5jdGlvbihwYXRoKSB7XG5cdCAgcmV0dXJuICh0aGlzLmdldFBhZ2VOYW1lKHBhdGgpIHx8IHt9KS5wYWdlTmFtZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0VlRSZWFsdGltZUNvZGUgPSBmdW5jdGlvbigpIHtcblx0ICBpZiAoY3VycmVudFBhdGgpIHtcblx0ICAgIHZhciBxdWVyeSA9IHBhZ2VPcHRpb25NYXBbY3VycmVudFBhdGhdIHx8IHt9O1xuXHQgICAgdmFyIHJlZ0V4cCA9IC9eXFwkdnRfLztcblx0ICAgIHZhciBzY2VuZSA9IGRlY29kZVVSSUNvbXBvbmVudChxdWVyeS5zY2VuZSk7XG5cdCAgICByZXR1cm4gc2NlbmUgJiYgcmVnRXhwLnRlc3Qoc2NlbmUpICYmIHNjZW5lLnJlcGxhY2UocmVnRXhwLCAnJyk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDMxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2FwbHVzX3BsdWdpbl9taW5pL2xpYl9hdXRvX2NvbGxlY3QvaW5qZWN0X3BhZ2UuanNcblx0ICog6Ieq5Yqo6YeH6ZuG5bCP56iL5bqP5L+h5oGv55qE5o+S5Lu2IC0g6aG16Z2i5rOo5YWlXG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHR2YXIgZWFjaE1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHR2YXIgdW1VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHRmdW5jdGlvbiBnZXRVdG1QYXJhbXNPYmogKHEpIHtcblx0ICB2YXIgb2JqID0ge307XG5cdCAgdHJ5IHtcblx0ICAgIGVhY2hNYXAocSwgZnVuY3Rpb24gKGssIHYpIHtcblx0ICAgICAgLy8g6YG/5YWN5Li656m65pe26YeN5YaZZ2xvYmFscHJvcGVydHnlhoXnmoTlsZ7mgKdcblx0ICAgICAgaWYoay5pbmRleE9mKCd1dG1fJykgPT09IDApIHtcblx0ICAgICAgICBvYmpba10gPSB2O1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoIChlKSB7fVxuXHQgIHJldHVybiBvYmo7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZXJTaGFyZUFwcE1zZyAob3B0LCBuYW1lKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgcGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICB2YXIgcm91dGUgPSBwYWdlLnJvdXRlIHx8IHBhZ2UuaXMgfHwgJyc7XG5cdCAgdmFyIG9wdGlvbnMgPSBwYWdlLm9wdGlvbnMgfHwge307XG5cdCAgdmFyIGxpbmtQYXJtYXMgPSBmb3JtYXQub2JqMnBhcmFtKG9wdGlvbnMsIHRydWUpO1xuXHQgIC8vIOaLvOaOpWN1cnJlbnRQYWdl55qEdXJs5LiOcXVlcnlcblx0ICBpZihsaW5rUGFybWFzKSB7XG5cdCAgICByb3V0ZSA9IHJvdXRlICsgJz8nICsgbGlua1Bhcm1hcztcblx0ICB9IFxuXHQgIGlmICghb3B0LnF1ZXJ5KSB7XG5cdCAgICBvcHQucXVlcnkgPSB7fTtcblx0ICB9XG5cdCAgb3B0LnF1ZXJ5LiQkX3NoYXJlX3VpZCA9IGN0eC5hcGx1cy5nZXRNZXRhSW5mbygnX2Fub255X2lkJykgfHwgY3R4LmFwbHVzLl9fRVRBR19fQ05BX19JRF9fO1xuXHQgIG9wdC5xdWVyeS4kJF91dG1fbWVkaXVtID0gMztcblx0XG5cdCAgLy8gb25TaGFyZUFwcE1lc3NhZ2XmsqHmnIlyZXR1cm4g5oiWIG9uU2hhcmVUaW1lbGluZeaXtu+8jOWFpeWPgm9wdOeahHBhdGjkuI5xdWVyeeS4uuepuu+8jOatpOaXtueUqGN1cnJlbnRQYWdl55qEcGF0aOWSjG9wdGlvbnPlhZzlupVcblx0ICBvcHQucXVlcnkgPSB1bVV0aWxzLmFzc2lnbih7fSwgb3B0aW9ucywgb3B0LnF1ZXJ5KTtcblx0ICB2YXIgcGF0aCA9IG9wdC5wYXRoIHx8IHJvdXRlO1xuXHRcblx0ICB2YXIgYXBwZW5kUGFyYW1zID0gJyQkX3NoYXJlX3VpZD0nICsgb3B0LnF1ZXJ5LiQkX3NoYXJlX3VpZCArICcmJCRfdXRtX21lZGl1bT0zJztcblx0IFxuXHQgIGlmIChwYXRoLmluZGV4T2YoJz8nKSA+IC0xKSB7XG5cdCAgICBvcHQucGF0aCA9IHBhdGggKyAnJicgKyBhcHBlbmRQYXJhbXM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9wdC5wYXRoID0gcGF0aCArICc/JyArIGFwcGVuZFBhcmFtcztcblx0ICB9XG5cdCAgb3B0LnN0YXR1cyA9ICdyZWFkeSc7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgYXJndW1lbnRzOiBbbmFtZSwgb3B0XVxuXHQgIH0pO1xuXHQgIHJldHVybiBvcHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblB1bGxEb3duUmVmcmVzaCgpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBvcHQgPSB7XG5cdCAgICBzdGF0dXM6ICdyZWFkeSdcblx0ICB9O1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgIGFyZ3VtZW50czogWydvblB1bGxEb3duUmVmcmVzaCcsIG9wdF1cblx0ICB9KTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIG9uUmVhY2hCb3R0b20oKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgdmFyIG9wdCA9IHtcblx0ICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgIGNvbnRleHQ6IHRoYXRcblx0ICB9O1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgIGFyZ3VtZW50czogWydvblJlYWNoQm90dG9tJywgb3B0XVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0Ly8g6aG16Z2i5Yqg6L29XG5cdGZ1bmN0aW9uIG9uUGFnZUxvYWQocXVlcnkpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7XG5cdCAgICBQYWdlTWFuYWdlci5zZXRDdXJyZW50UGF0aCh0aGlzLnJvdXRlKTtcblx0ICAgIGlmIChxdWVyeSkge1xuXHQgICAgICBQYWdlTWFuYWdlci5zZXRQYWdlUXVlcnkodGhpcy5yb3V0ZSwgcXVlcnkpO1xuXHQgICAgfVxuXHQgICAgdWxvZygpLmkoJ1BhZ2Ugb25Mb2FkOiAnLCB0aGlzLnJvdXRlLCBxdWVyeSk7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uKCl7XG5cdCAgICAgIC8vIOWFqOWxgOWxnuaAp+i/veWKoHV0beWPguaVsFxuXHQgICAgICBjdHguYXBsdXMuYXBwZW5kTWV0YUluZm8oYXBsdXNTdGF0aWMuR0xPQkFMX1BST1BFUlRZLCBnZXRVdG1QYXJhbXNPYmoocXVlcnkpKTtcblx0ICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgICBhcmd1bWVudHM6IFsnb25Mb2FkJywge1xuXHQgICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICAgICAgY29udGV4dDogdGhhdCxcblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgICAgLy8g6aG16Z2i5Yqg6L295a6M5ZCO5re35YWlc2V0RGF0Ye+8jOaWueS+v+iHquWKqOabneWFieOAgeiHquWKqOeCueWHu+etieaPkuS7tuS9v+eUqFxuXHQgICAgICB2YXIgX2N1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuXHQgICAgICB1dGlscy5yZXNldEZuKF9jdXJyZW50UGFnZSwgJ3NldERhdGEnLCBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydvblBhZ2VEYXRhQ2hhbmdlZCcsIHtcblx0ICAgICAgICAgICAgZGF0YTogZGF0YSxcblx0ICAgICAgICAgICAgY29udGV4dDogdGhhdFxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KCdvblBhZ2VMb2FkOiAnLCBlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblBhZ2VTaG93KCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHtcblx0ICAgIFBhZ2VNYW5hZ2VyLnNldEN1cnJlbnRQYXRoKHRoaXMucm91dGUpO1xuXHQgICAgdXRpbHMub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciB0aGF0ID0gdGhpcztcblx0ICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgICBhcmd1bWVudHM6IFsnb25TaG93Jywge1xuXHQgICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICAgICAgY29udGV4dDogdGhhdCxcblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ29uUGFnZVNob3c6ICcsIGUpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIG9uUGFnZVJlYWR5KCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciB0aGF0ID0gdGhpcztcblx0ICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgICBhcmd1bWVudHM6IFsnb25SZWFkeScsIHtcblx0ICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG5cdCAgICAgICAgY29udGV4dDogdGhhdFxuXHQgICAgICB9XVxuXHQgICAgfSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgdWxvZygpLncoJ29uUGFnZVJlYWR5OiAnLCBlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblBhZ2VIaWRlKCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHtcblx0ICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgICBhcmd1bWVudHM6IFsnb25IaWRlJywge1xuXHQgICAgICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgICAgfV1cblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ29uUGFnZUhpZGU6ICcsIGUpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIG9uUGFnZVVubG9hZCgpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7XG5cdCAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIHtcblx0ICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG5cdCAgICAgIH1dXG5cdCAgICB9KTtcblx0ICB9IGNhdGNoKGUpe1xuXHQgICAgdWxvZygpLncoJ29uUGFnZVVubG9hZDogJywgZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gb25BcGx1c0NsayhlKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICBhcmd1bWVudHM6IFsnb25BcGx1c0NsaycsIHtcblx0ICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICBldmVudDogZSxcblx0ICAgICAgY29udGV4dDogdGhpc1xuXHQgICAgfV1cblx0ICB9KTtcblx0fTtcblx0XG5cdC8v6Kem5pG45LqL5Lu2XG5cdGZ1bmN0aW9uIG9uQXBsdXNUb3VjaChlKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgYXJndW1lbnRzOiBbJ29uQXBsdXNUb3VjaCcsIHtcblx0ICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICBjb250ZXh0OiB0aGF0LFxuXHQgICAgICBldmVudDogZSxcblx0ICAgIH1dXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiByZXdyaXRlU2hhcmUob3B0KSB7XG5cdCAgaWYgKG9wdC5vblNoYXJlQXBwTWVzc2FnZSkge1xuXHQgICAgdmFyIG9sZE9uU2hhcmVBcHBNZXNzYWdlID0gb3B0Lm9uU2hhcmVBcHBNZXNzYWdlO1xuXHQgICAgb3B0Lm9uU2hhcmVBcHBNZXNzYWdlID0gZnVuY3Rpb24ocmVzKSB7XG5cdCAgICAgIHZhciBzaGFyZVJlc3VsdCA9IG9sZE9uU2hhcmVBcHBNZXNzYWdlLmNhbGwodGhpcywgcmVzKSB8fCB7fTtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXJTaGFyZUFwcE1zZyhzaGFyZVJlc3VsdCwgJ29uU2hhcmVBcHBNZXNzYWdlJyk7XG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIOWIhuS6q+aci+WPi+WciFxuXHRmdW5jdGlvbiByZXdyaXRlU2hhcmVUaW1lbGluZShvcHQpIHtcblx0ICBpZiAob3B0Lm9uU2hhcmVUaW1lbGluZSkge1xuXHQgICAgdmFyIG9sZE9uU2hhcmVUaW1lbGluZSA9IG9wdC5vblNoYXJlVGltZWxpbmU7XG5cdCAgICBvcHQub25TaGFyZVRpbWVsaW5lID0gZnVuY3Rpb24ocmVzKSB7XG5cdCAgICAgIHZhciBzaGFyZVJlc3VsdCA9IG9sZE9uU2hhcmVUaW1lbGluZS5jYWxsKHRoaXMsIHJlcykgfHwge307XG5cdCAgICAgIHJldHVybiBoYW5kbGVyU2hhcmVBcHBNc2coc2hhcmVSZXN1bHQsICdvblNoYXJlVGltZWxpbmUnKTtcblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaW5qZWN0UGFnZSgpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIG9sZFBhZ2UgPSBQYWdlO1xuXHQgICAgUGFnZSA9IGZ1bmN0aW9uKHBhZ2VPcHRpb25zKSB7XG5cdCAgICAgIHV0aWxzLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uU2hvdycsIG9uUGFnZVNob3cpO1xuXHQgICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkhpZGUnLCBvblBhZ2VIaWRlKTtcblx0ICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25VbmxvYWQnLCBvblBhZ2VVbmxvYWQpO1xuXHQgICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkxvYWQnLCBvblBhZ2VMb2FkKTtcblx0ICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25SZWFkeScsIG9uUGFnZVJlYWR5KTtcblx0ICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25QdWxsRG93blJlZnJlc2gnLCBvblB1bGxEb3duUmVmcmVzaCk7XG5cdCAgICAgIHV0aWxzLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uUmVhY2hCb3R0b20nLCBvblJlYWNoQm90dG9tKTtcblx0ICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25BcGx1c0NsaycsIG9uQXBsdXNDbGspO1xuXHQgICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkFwbHVzVG91Y2gnLCBvbkFwbHVzVG91Y2gpO1xuXHQgICAgICByZXdyaXRlU2hhcmUocGFnZU9wdGlvbnMpO1xuXHQgICAgICByZXdyaXRlU2hhcmVUaW1lbGluZShwYWdlT3B0aW9ucyk7XG5cdCAgICAgIG9sZFBhZ2UocGFnZU9wdGlvbnMpO1xuXHQgICAgfTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KCdQYWdlIOmHjeWGmeW8guW4uCcpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluamVjdENvbXBvbmVudCgpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIG9sZENvbXBvbmVudCA9IENvbXBvbmVudDtcblx0ICAgIENvbXBvbmVudCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBvcHRpb25zLm1ldGhvZHMgPSBvcHRpb25zLm1ldGhvZHMgfHwge307XG5cdCAgICAgICAgdmFyIG1ldGhvZHMgPSBvcHRpb25zLm1ldGhvZHM7XG5cdCAgICAgICAgdXRpbHMucmV3cml0ZUZuKG1ldGhvZHMsICdvblNob3cnLCBvblBhZ2VTaG93KTtcblx0ICAgICAgICB1dGlscy5yZXdyaXRlRm4obWV0aG9kcywgJ29uSGlkZScsIG9uUGFnZUhpZGUpO1xuXHQgICAgICAgIHV0aWxzLnJld3JpdGVGbihtZXRob2RzLCAnb25VbmxvYWQnLCBvblBhZ2VIaWRlKTtcblx0ICAgICAgICB1dGlscy5yZXdyaXRlRm4obWV0aG9kcywgJ29uTG9hZCcsIG9uUGFnZUxvYWQpO1xuXHQgICAgICAgIHJld3JpdGVTaGFyZShtZXRob2RzKTtcblx0ICAgICAgICBvbGRDb21wb25lbnQob3B0aW9ucyk7XG5cdCAgICAgIH0gY2F0Y2godCkge1xuXHQgICAgICAgIG9sZENvbXBvbmVudChvcHRpb25zKTtcblx0ICAgICAgfTtcblx0ICAgIH07XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudygnQ29tcG9uZW50IOmHjeWGmeW8guW4uCcpO1xuXHQgIH1cblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGluamVjdE1pZHdheSAobXBDdHgsIG5hbWUsIGNhbGxiYWNrKSB7XG5cdCAgaWYgKFsnb2JqZWN0JywgJ2Z1bmN0aW9uJ10uaW5kZXhPZih0eXBlb2YgbXBDdHgpID4gLTEpIHtcblx0ICAgIGNhbGxiYWNrKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIGNvbnNvbGUubG9nKCd0eXBlb2YgJyArIG5hbWUgKyAnIGlzIG5vdCBvYmplY3QgY2FudCB3YXRjaEV4cC4nKTtcblx0ICAgIHVsb2coKS53KCd0eXBlb2YgJyArIG5hbWUgKyAnIGlzIG5vdCBvYmplY3QgY2FudCB3YXRjaEV4cC4nKTtcblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaW5qZWN0TWlkd2F5KFBhZ2UsICdQYWdlJywgaW5qZWN0UGFnZSk7XG5cdCAgICAgIGluamVjdE1pZHdheShDb21wb25lbnQsICdDb21wb25lbnQnLCBpbmplY3RDb21wb25lbnQpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5a+5bWFw6L+b6KGM6auY5oCn6IO955qE6YGN5Y6GXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWFwLCBjYWxsYmFjaykge1xuXHQgIGlmIChPYmplY3QgJiYgT2JqZWN0LmtleXMpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMobWFwKTtcblx0ICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgdmFyIGsxID0ga2V5c1tpXTtcblx0ICAgICAgY2FsbGJhY2soazEsIG1hcFtrMV0pO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBmb3IgKHZhciBrIGluIG1hcCkge1xuXHQgICAgICBjYWxsYmFjayhrLCBtYXBba10pO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDMzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3V0aWwvZm9ybWF0LmpzXG5cdCAqIOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB0cnlUb0RlY29kZSA9IHJlcXVpcmUoJy4vdHJ5VG9EZWNvZGUnKTtcblx0XG5cdGV4cG9ydHMuYXJyMm9iaiA9IGZ1bmN0aW9uIChhcnIpIHtcblx0ICB2YXIgcmV0ID0ge307XG5cdCAgdmFyIGs7XG5cdCAgdmFyIHY7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgayA9IGFycltpXVswXTtcblx0ICAgIHYgPSBhcnJbaV1bMV07XG5cdCAgICByZXRba10gPSB2O1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIHBhcmFtIHRvIG9iamVjdFxuXHQgKiDlsIbkuIDkuKrnroDljZXnmoTlvaLlpoIgYT0xJmI9MiZjPTMg6L+Z5qC355qE5Y+C5pWw6L2s5YyW5Li6566A5Y2V55qEIG9iamVjdCDmoLzlvI/vvIzlpoLvvJpcblx0ICoge1xuXHQgKiAgIGE6IFwiMVwiLFxuXHQgKiAgIGI6IFwiMlwiLFxuXHQgKiAgIGM6IFwiM1wiXG5cdCAqIH1cblx0ICogQHBhcmFtIHBhcmFtcyB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5wYXJhbTJvYmogPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm4gcGFyYW1zO1xuXHQgIH1cblx0ICB2YXIgb2JqID0ge307XG5cdCAgaWYgKCFwYXJhbXMgfHwgdHlwZW9mIHBhcmFtcyAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiBvYmo7XG5cdCAgfVxuXHQgIHZhciBhID0gcGFyYW1zLnNwbGl0KCcmJyk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgaXRlbSA9IGFbaV07XG5cdCAgICB2YXIgaW5kZXggPSBpdGVtLmluZGV4T2YoJz0nKTtcblx0ICAgIHZhciBmcmFnbWVudCA9IGl0ZW0uc3BsaXQoJz0nKTtcblx0ICAgIHZhciBsZW4gPSBpdGVtLmxlbmd0aDtcblx0ICAgIGlmIChmcmFnbWVudC5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgb2JqW2ZyYWdtZW50WzBdXSA9IGZyYWdtZW50WzFdIHx8ICcnOyAgXG5cdCAgICB9IGVsc2UgaWYgKGluZGV4ID4gMCkge1xuXHQgICAgICB2YXIga2V5ID0gaXRlbS5zbGljZSgwLCBpbmRleCk7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGl0ZW0uc2xpY2UoaW5kZXggKyAxLCBsZW4pIHx8ICcnO1xuXHQgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb2JqW2ZyYWdtZW50WzBdXSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRcblx0Ly8gY29uc29sZS5sb2coJ1RPRE8gZGVsZXRlIHNfcGxhaW5fb2JqJyk7XG5cdHZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5cdGV4cG9ydHMuc19wbGFpbl9vYmogPSBzX3BsYWluX29iajtcblx0XG5cdC8qKlxuXHQgKiBhcnJheSB0byBwYXJhbVxuXHQgKiDlsIbkuIDkuKrnroDljZXnmoTmlbDnu4TovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j++8jFxuXHQgKiDlhbbkuK3mlbDnu4TkuLpcblx0ICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuXHQgKiDnmoTlvaLlvI/jgIJcblx0ICog5LiOIG9iajJwYXJhbSDnm7jmr5TvvIzov5nkuKrmlrnms5XnmoTlpb3lpITmmK/lj6/ku6Xkv53or4HmnIDlkI7lj4LmlbDnmoTpobrluo9cblx0ICogQHBhcmFtIGFyciB7QXJyYXl9XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGFycjJwYXJhbShhcnIsIHNraXBFbmNvZGUpIHtcblx0ICB2YXIgYSA9IFtdLFxuXHQgICAgayxcblx0ICAgIHYsXG5cdCAgICBpLFxuXHQgICAgbGVuID0gYXJyLmxlbmd0aDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBrID0gYXJyW2ldWzBdO1xuXHQgICAgdiA9IGFycltpXVsxXTtcblx0ICAgIHZhciBpc0luUGxhbk9iaiA9IGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDA7XG5cdCAgICB2YXIgX3ZhbHVlID0gaXNJblBsYW5PYmogfHwgc2tpcEVuY29kZSA/IHYgOiBlbmNvZGVVUklDb21wb25lbnQodik7XG5cdCAgICBhLnB1c2goaXNJblBsYW5PYmogPyBfdmFsdWUgOiAoayArICc9JyArIF92YWx1ZSkpO1xuXHQgIH1cblx0ICByZXR1cm4gYS5qb2luKCcmJyk7XG5cdH07XG5cdGV4cG9ydHMuYXJyMnBhcmFtID0gYXJyMnBhcmFtO1xuXHRcblx0LyoqXG5cdCAqIG9iamVjdCB0byBwYXJhbVxuXHQgKiDlsIbkuIDkuKrnroDljZXlr7nosaHovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j1xuXHQgKiDlj4Lop4EgYXJyMnBhcmFtKCkg5pa55rOVXG5cdCAqIEBwYXJhbSBvYmoge09iamVjdH1cblx0ICogQHBhcmFtIGNvbW1UcmFuc2xhdGUge0Jvb2xlYW59IOaZrumAmui9rOaNouS4jeWBmmlzU3RhcnRXaXRo5qCh6aqMXG5cdCAqXG5cdCAqL1xuXHRleHBvcnRzLm9iajJwYXJhbSA9IGZ1bmN0aW9uIChvYmosIGNvbW1UcmFuc2xhdGUpIHtcblx0ICB2YXIgYSA9IFtdO1xuXHQgIHZhciBrO1xuXHQgIHZhciB2O1xuXHQgIHZhciBfdjtcblx0ICBmb3IgKGsgaW4gb2JqKVxuXHQgIC8vIFRPRE86IOWvueS6jmV4YXJncyBrZXksIHZhbHVlIOS5n+aYr29iauexu+Wei++8jOmcgOimgemAkuW9kuino+aekCBA6ZKw5pitXG5cdCAgICBpZiAoayAmJiBvYmouaGFzT3duUHJvcGVydHkoaykpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBvYmpba10gPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgdiA9ICcnICsgdGhpcy5vYmoycGFyYW0ob2JqW2tdKTtcblx0ICAgICAgICBfdiA9IHY7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdiA9ICcnICsgb2JqW2tdO1xuXHQgICAgICAgIF92ID0gayArICc9JyArIHY7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFjb21tVHJhbnNsYXRlKSB7XG5cdCAgICAgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogX3YpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGEucHVzaChfdik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICByZXR1cm4gYS5qb2luKCcmJyk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmVuY29kZUdva2V5VmFsdWUgPSBmdW5jdGlvbiAoZ29rZXkpIHtcblx0ICAvLyB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAvLyAvLyDlr7lnb2tleeWGheeahHZhbHVl57uf5LiA5Yqg5LiA5bGC57yW56CBXG5cdCAgLy8gaWYgKHR5cGVvZiBnb2tleSA9PT0gJ29iamVjdCcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdCAgLy8gICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG5cdCAgLy8gICAgIGlmICh0eXBlb2YgZ29rZXlba10gPT09ICdzdHJpbmcnKSB7XG5cdCAgLy8gICAgICAgdHJ5IHtcblx0ICAvLyAgICAgICAgIGdva2V5W2tdID0gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChnb2tleVtrXSkpO1xuXHQgIC8vICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgLy8gICAgIH1cblx0ICAvLyAgIH1cblx0ICAvLyB9XG5cdCAgcmV0dXJuIGdva2V5O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHQvLyB2YXIgVVBEQVRFID0gJ3VwZGF0ZSc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcHVzaFF1ZXVlOmZ1bmN0aW9uKG1ldGhvZE5hbWUsIGFyZ3Mpe1xuXHQgICAgICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXNfcXVldWUnKTtcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMuJyArIG1ldGhvZE5hbWUsXG5cdCAgICAgICAgYXJndW1lbnRzOiBhcmdzXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIGVhY2goYXBsdXNTdGF0aWMub3BlbkFQSXMsIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgYXBsdXNbdl0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcblx0ICAgICAgICAgIGVhY2goYXJndW1lbnRzLCBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IHYgPT09ICdlbnRlcicgPyAnX3NlbmRQVicgOiAnXycgKyB2O1xuXHRcblx0ICAgICAgICAgIF9zZWxmLnB1c2hRdWV1ZShtZXRob2ROYW1lLCBpdGVtcyk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDM1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvYXBsdXNfY2xpZW50X21pbmkuanNcblx0ICpcblx0ICogY2xpZW50SW5mbyBmb3IgbWluaWFwcFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIOWIneWni+WMluaooeWdlywg5Liq5oCn5YyW6YOo5YiG5a2Q57G75Lit5a6e546wXG5cdCAgICAgKi9cblx0ICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgIC8vIH0sXG5cdFxuXHQgICAgX2dldE5ldHdvcmtUeXBlOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgICBpZiAoY3R4LmdldE5ldHdvcmtUeXBlKSB7XG5cdCAgICAgICAgY3R4LmdldE5ldHdvcmtUeXBlKHtcblx0ICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgY2FsbGJhY2socmVzID8gcmVzLm5ldHdvcmtUeXBlIDogJycpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNhbGxiYWNrKCcnKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOiOt+WPluezu+e7n+S/oeaBryBodHRwczovL2RvY3MuYWxpcGF5LmNvbS9taW5pL2FwaS9zeXN0ZW0taW5mb1xuXHQgICAgICog5omL5py65Z6L5Y+344CB5bGP5bmV5YiG6L6o546H44CB57O757uf54mI5pys562J5L+h5oGvXG5cdCAgICAgKi9cblx0ICAgIF9nZXRTeXN0ZW1JbmZvOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgdmFyIGVtcHR5T2JqID0ge307XG5cdCAgICAgIHZhciBzeXNJbmZvID0gX3NlbGYuU1lTVEVNX0lORk8gfHwge307XG5cdCAgICAgIGlmIChzeXNJbmZvICYmIHN5c0luZm8udmVyc2lvbikge1xuXHQgICAgICAgIGNhbGxiYWNrKF9zZWxmLlNZU1RFTV9JTkZPKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgbWluaS5nZXRDb250ZXh0KCkuZ2V0U3lzdGVtSW5mbyh7XG5cdCAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMudmVyc2lvbikge1xuXHQgICAgICAgICAgICAgICAgX3NlbGYuX2dldE5ldHdvcmtUeXBlKGZ1bmN0aW9uIChuKSB7XG5cdCAgICAgICAgICAgICAgICAgIHJlcy5uZXR3b3JrVHlwZSA9IG47XG5cdCAgICAgICAgICAgICAgICAgIF9zZWxmLlNZU1RFTV9JTkZPID0gcmVzO1xuXHQgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXMpO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIF9zZWxmLl9nZXROZXR3b3JrVHlwZShmdW5jdGlvbiAobikge1xuXHQgICAgICAgICAgICAgICAgICBlbXB0eU9iai5uZXR3b3JrVHlwZSA9IG47XG5cdCAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVtcHR5T2JqKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgY2FsbGJhY2soZW1wdHlPYmopO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBfZ2V0QWNjb3VudEluZm9TeW5jOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBpbmZvID0ge307XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgICAgIGlmIChjdHguZ2V0QWNjb3VudEluZm9TeW5jICYmIGN0eC5jYW5JVXNlKCdnZXRBY2NvdW50SW5mb1N5bmMnKSkge1xuXHQgICAgICAgICAgLy8g5b6u5L+hXG5cdCAgICAgICAgICB2YXIgYWNjb3VudEluZm8gPSBjdHguZ2V0QWNjb3VudEluZm9TeW5jKCk7XG5cdCAgICAgICAgICB2YXIgbWluaVByb2dyYW0gPSBhY2NvdW50SW5mby5taW5pUHJvZ3JhbSB8fCB7fTtcblx0ICAgICAgICAgIHZhciBwbHVnaW4gPSBhY2NvdW50SW5mby5wbHVnaW4gfHwge307XG5cdCAgICAgICAgICBpbmZvLmFwcElkID0gbWluaVByb2dyYW0uYXBwSWQ7ICAvLyDlsI/nqIvluo8gYXBwSWRcblx0ICAgICAgICAgIGluZm8uYXBwVmVyc2lvbiA9IG1pbmlQcm9ncmFtLnZlcnNpb24gfHwgbWluaVByb2dyYW0uZW52VmVyc2lvbjsgIC8vIOWwj+eoi+W6jyBhcHBWZXJzaW9uXG5cdCAgICAgICAgICBpbmZvLnBsdWdpbkFwcElkID0gcGx1Z2luLmFwcElkOyAvLyDmj5Lku7YgYXBwSWRcblx0ICAgICAgICAgIGluZm8ucGx1Z2luQXBwVmVyc2lvbiA9IHBsdWdpbi52ZXJzaW9uOyAvLyDmj5Lku7YgYXBwVmVyc2lvbiAgXG5cdCAgICAgICAgfSBlbHNlIGlmIChjdHguZ2V0QXBwSWRTeW5jICYmIGN0eC5jYW5JVXNlKCdnZXRBcHBJZFN5bmMnKSkge1xuXHQgICAgICAgICAgdmFyIGFwcEluZm8gPSBjdHguZ2V0QXBwSWRTeW5jKCkgfHwge307XG5cdCAgICAgICAgICBpbmZvLmFwcElkID0gYXBwSW5mby5hcHBJZCB8fCAnJztcblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgIHJldHVybiBpbmZvO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHdvcmtub1xuXHQgICAgICogICAxLiBjb29raWUuZ2V0Q29va2llKCd3b3Jrbm8nKVxuXHQgICAgICogICAyLiBjb29raWUuZ2V0Q29va2llKCdlbXBsSWQnKVxuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8fCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoc3RhdGUsIGNiKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIC8vIGNvbnNvbGUubG9nKCdUT0RPIGdldFN5c3RlbUluZm8nKTtcblx0ICAgICAgdGhpcy5fZ2V0U3lzdGVtSW5mbyhmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgLy8g5pSv5LuY5a6d5bCP56iL5bqP5paH5qGjICBzeXN0ZW0t57O757uf54mI5pysIHBsYXRmb3JtLeezu+e7n+WQjVxuXHQgICAgICAgIHJlcy51c2VyQWdlbnQgPSAnLSc7XG5cdCAgICAgICAgcmVzLm9zID0gcmVzLnBsYXRmb3JtID8gcmVzLnBsYXRmb3JtLnRvTG9jYWxlVXBwZXJDYXNlKCkgOiAnJztcblx0ICAgICAgICByZXMub3NfdmVyc2lvbiA9IHJlcy5zeXN0ZW0gPyByZXMuc3lzdGVtIDogJyc7XG5cdCAgICAgICAgcmVzLmFjY2VzcyA9IHJlcy5icmFuZCA/IHJlcy5icmFuZCA6ICcnO1xuXHQgICAgICAgIHZhciBob3N0ID0gJyc7XG5cdCAgICAgICAgaWYocmVzLmhvc3QgJiYgKHR5cGVvZiByZXMuaG9zdC5lbnYgPT09ICdzdHJpbmcnKSl7XG5cdCAgICAgICAgICBob3N0ID0gcmVzLmhvc3QuZW52O1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXMuaG9zdCA9IGhvc3Q7XG5cdFxuXHQgICAgICAgIHZhciBhY2NvdW50SW5mbyA9IF9zZWxmLl9nZXRBY2NvdW50SW5mb1N5bmMoKTtcblx0ICAgICAgICB2YXIgcnMgPSBPYmplY3QuYXNzaWduKHt9LCByZXMsIGFjY291bnRJbmZvKTtcblx0XG5cdCAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgICAgYXBsdXMuX2FwbHVzX2NsaWVudCA9IHJzO1xuXHQgICAgICAgIGNiKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gMjAwMDtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0dmFyIFB1YlN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgLy8g5L+d6K+B5Y+q5Lya5pyJ5LiA5LiqcHVic3Vi6L+Q6KGMXG5cdCAgICAgIGlmIChhcGx1cy5hcGx1c19wdWJzdWIpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgLy8gYXBsdXMuYXBsdXNfcHVic3Vi5piv5LiA5Liq55uR5ZCs6ICF77yM5Zyo5o+S5Lu25YyW5YaF6YOo5Lya55So5Yiw5LuW77yM5pyJ5pWw5o2u5Y+Y5YyW5bCG5Lya5Y+R5bCE55u45bqU55qEZGF0YWNoYW5nZeS6i+S7tlxuXHQgICAgICBhcGx1cy5hcGx1c19wdWJzdWIgPSBQdWJTdWIuY3JlYXRlKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDM3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL1B1YlN1Yi5qc1xuXHQgKiDmtojmga/orqLpmIXmqKHlnotcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXHRcblx0dmFyIGdldEFyZ3MgPSBmdW5jdGlvbihhcmdzKSB7XG5cdCAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuXHQgIHZhciBfYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcblx0ICBmb3IgKHZhciBqID0gMTsgaiA8IGxlbjsgaisrKSB7XG5cdCAgICBfYXJnc1tqIC0gMV0gPSBhcmdzW2pdO1xuXHQgIH1cblx0ICByZXR1cm4gX2FyZ3M7XG5cdH07XG5cdFxuXHR2YXIgUHViU3ViID0gQmFzZS5leHRlbmQoe1xuXHQgIC8qKlxuXHQgICAqIOWvuWZu6L+b6KGM5pat6KiA77yM5LiN5piv4oCYZnVuY3Rpb27igJnnsbvlnovmiqXplJnvvIzlkKbliJnov5Tlm55mblxuXHQgICAqL1xuXHQgIGNhbGxhYmxlOiBmdW5jdGlvbiAoZm4pIHtcblx0ICAgIGlmICghaXNGdW5jdGlvbihmbikpIHRocm93IG5ldyBUeXBlRXJyb3IoZm4gKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG5cdCAgICByZXR1cm4gZm47XG5cdCAgfSxcblx0XG5cdCAgY3JlYXRlOiBmdW5jdGlvbiAocHJvcHMpIHtcblx0ICAgIHZhciBpbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG5cdCAgICAvLyDnu5Hlrpror6Xlrp7kvovnmoTlsZ7mgKdcblx0ICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgICAgaW5zdGFuY2VbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICAgIH1cblx0XG5cdCAgICBpbnN0YW5jZS5oYW5kbGVycyA9IFtdO1xuXHQgICAgaW5zdGFuY2UucHVicyA9IHt9O1xuXHQgICAgcmV0dXJuIGluc3RhbmNlO1xuXHQgIH0sXG5cdFxuXHQgIHNldEhhbmRsZXJzOiBmdW5jdGlvbihoYW5kbGVycykge1xuXHQgICAgdGhpcy5oYW5kbGVycyA9IGhhbmRsZXJzO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOiuoumYheWPpeafhOS4uuKAnGVUeXBl4oCd55qE5raI5oGv77yM5b2T5pyJ5raI5oGv6L+H5p2l5omn6KGM5Zue6LCD5Ye95pWw77ya4oCcaOKAnVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4Rcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuXHQgICAqIEByZXR1cm4gY29udGV4dFxuXHQgICAqL1xuXHQgIHN1YnNjcmliZTogZnVuY3Rpb24oZVR5cGUsIGgpe1xuXHQgICAgLy8g5a+55Zue6LCD5Ye95pWw6L+b6KGM5pat6KiAXG5cdCAgICB0aGlzLmNhbGxhYmxlKGgpO1xuXHRcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgcHVicyA9IF9zZWxmLnB1YnMgfHwge307XG5cdFxuXHQgICAgdmFyIGFyciA9IHB1YnNbZVR5cGVdIHx8IFtdO1xuXHQgICAgaWYgKGFycikge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciBfYXJncyA9IGFycltpXSgpO1xuXHQgICAgICAgIGguYXBwbHkoX3NlbGYsIF9hcmdzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIGhhbmRsZXJzID0gX3NlbGYuaGFuZGxlcnMgfHwgW107XG5cdCAgICBpZighKGVUeXBlIGluIGhhbmRsZXJzKSkge1xuXHQgICAgICBoYW5kbGVyc1tlVHlwZV0gPSBbXTtcblx0ICAgIH1cblx0ICAgIGhhbmRsZXJzW2VUeXBlXS5wdXNoKGgpO1xuXHQgICAgX3NlbGYuc2V0SGFuZGxlcnMoaGFuZGxlcnMpO1xuXHQgICAgcmV0dXJuIF9zZWxmO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWPlua2iOiuoumYhe+8jOWwhuS8muWPlua2iOKAnGVUeXBl4oCd5Y+l5p+E5a+55bqU55qE4oCcaOKAneWbnuiwg+WHveaVsOS4i+eahOaJgOacieiuoumYhVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4Rcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuXHQgICAqIEByZXR1cm4gY29udGV4dFxuXHQgICAqL1xuXHQgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbihlVHlwZSwgaCkge1xuXHQgICAgLy8g5a+55Zue6LCD5Ye95pWw6L+b6KGM5pat6KiAXG5cdCAgICB0aGlzLmNhbGxhYmxlKGgpO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBzID0gdGhpcy5oYW5kbGVyc1tlVHlwZV07XG5cdCAgICAgIGlmICghcykgcmV0dXJuIHRoaXM7XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIHMgPT09ICdvYmplY3QnICYmIHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICB2YXIgaF9zdHIgPSBoLnRvU3RyaW5nKCk7XG5cdCAgICAgICAgICB2YXIgc19zdHIgPSBzW2ldLnRvU3RyaW5nKCk7XG5cdCAgICAgICAgICBpZiAoaF9zdHIgPT09IHNfc3RyKSB7XG5cdCAgICAgICAgICAgIHMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmhhbmRsZXJzW2VUeXBlXSA9IHM7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGVsZXRlIHRoaXMuaGFuZGxlcnNbZVR5cGVdO1xuXHQgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5raI5oGv5YiG5Y+R77yM5bCG5Lya5YiG5Y+R5Yiw5omA5pyJ6K6i6ZiFZVR5cGXlj6Xmn4TnmoTorqLpmIXogIVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg5YiG5Y+R5raI5oGv5Y+l5p+EXG5cdCAgICovXG5cdCAgcHVibGlzaDogZnVuY3Rpb24gKGVUeXBlKSB7XG5cdFxuXHQgICAgdmFyIGFyZ3MgPSBnZXRBcmdzKGFyZ3VtZW50cyk7XG5cdCAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzIHx8IFtdO1xuXHRcblx0ICAgIHZhciBzaXplID0gaGFuZGxlcnNbZVR5cGVdID8gaGFuZGxlcnNbZVR5cGVdLmxlbmd0aCA6IDA7XG5cdCAgICBpZiAoc2l6ZSA+IDApIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcblx0ICAgICAgICB2YXIgZm4gPSBoYW5kbGVyc1tlVHlwZV1baV07XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG5cdCAgICAgICAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9LFxuXHRcblx0ICBjYWNoZVB1YnM6IGZ1bmN0aW9uIChlVHlwZSkge1xuXHQgICAgdmFyIHB1YnMgPSB0aGlzLnB1YnMgfHwge307XG5cdCAgICB2YXIgYXJncyA9IGdldEFyZ3MoYXJndW1lbnRzKTtcblx0ICAgIGlmICghcHVic1tlVHlwZV0pIHtcblx0ICAgICAgcHVic1tlVHlwZV0gPSBbXTtcblx0ICAgIH1cblx0ICAgIHB1YnNbZVR5cGVdLnB1c2goZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gYXJncztcblx0ICAgIH0pO1xuXHQgIH1cblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFB1YlN1YjtcblxuXG4vKioqLyB9KSxcbi8qIDM4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL0Jhc2UuanNcblx0ICog5Z+657G777yM5o+Q5L6b57G75omA6ZyA6KaB55qE5Z+656GA5bGe5oCnXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdC8vIOWfuuexu1xuXHRmdW5jdGlvbiBCYXNlKCkge31cblx0XG5cdC8vIOWwhmV4dGVuZOWSjGNyZWF0Zee9ruS6jnByb3RvdHlwZeWvueixoeS4re+8jOS7peS+v+WtkOexu+e7p+aJv1xuXHRCYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbigpIHt9O1xuXHRCYXNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcblx0Ly8g5Li65LqG6IO95Zyo5Z+657G75LiK55u05o6l5LulLmV4dGVuZOeahOaWueW8j+i/m+ihjOiwg+eUqFxuXHRCYXNlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgcmV0dXJuIHRoaXMucHJvdG90eXBlLmV4dGVuZC5jYWxsKHRoaXMsIHByb3BzKTtcblx0fTtcblx0XG5cdEJhc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgLyoqXG5cdCAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG5cdCAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG5cdCAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuXHQgICAqL1xuXHQgIHZhciBpbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG5cdCAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG5cdCAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuXHQgICAgaW5zdGFuY2VbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICB9XG5cdCAgcmV0dXJuIGluc3RhbmNlO1xuXHR9O1xuXHRcblx0QmFzZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24ocHJvcHMpIHtcblx0ICAvLyDmtL7nlJ/lh7rmnaXnmoTmlrDnmoTlrZDnsbtcblx0ICB2YXIgU3ViQmFzZSA9IGZ1bmN0aW9uKCkge307XG5cdCAgdHJ5IHtcblx0ICAgIC8qKlxuXHQgICAgICog57un5om/54i257G755qE5bGe5oCn5ZKM5pa55rOV77yMXG5cdCAgICAgKiDlvZPnhLbliY3mj5DmmK/niLbnsbvnmoTlsZ7mgKfpg73mlL7lnKhwcm90b3R5cGXkuK1cblx0ICAgICAqIOiAjOmdnuS4iumdomNyZWF0ZeaWueazleeahOKAnOWunuS+i+WxnuaAp+KAneS4rVxuXHQgICAgICovXG5cdCAgICBpZiAoIWlzRnVuY3Rpb24oT2JqZWN0LmNyZWF0ZSkpIHtcblx0ICAgICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgZnVuY3Rpb24gRigpIHt9XG5cdCAgICAgICAgRi5wcm90b3R5cGUgPSBvO1xuXHQgICAgICAgIHJldHVybiBuZXcgRigpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgICAgU3ViQmFzZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHRoaXMucHJvdG90eXBlKTtcblx0XG5cdCAgICAvLyDlubbkuJTmt7vliqDoh6rlt7HnmoTmlrnms5XlkozlsZ7mgKdcblx0ICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgICAgU3ViQmFzZS5wcm90b3R5cGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICAgIH1cblx0ICAgIFN1YkJhc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViQmFzZTtcblx0XG5cdCAgICAvLyDpnIDopoHku6UuZXh0ZW5k55qE5pa55byP5ZKMLmNyZWF0ZeeahOaWueW8j+iwg+eUqO+8mlxuXHQgICAgU3ViQmFzZS5leHRlbmQgPSBTdWJCYXNlLnByb3RvdHlwZS5leHRlbmQ7XG5cdCAgICBTdWJCYXNlLmNyZWF0ZSA9IFN1YkJhc2UucHJvdG90eXBlLmNyZWF0ZTtcblx0ICB9IGNhdGNoKGVycikge1xuXHQgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhlcnIpO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gU3ViQmFzZTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEJhc2U7XG5cblxuLyoqKi8gfSksXG4vKiAzOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog6I635Y+W6aG16Z2i5LiK55qEIDxtZXRhPiDkuK3kuI4gYXBsdXMg5omT54K555u45YWz55qE5YC8XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKSh0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuXHQgKiBtZXRh6YWN572u5o+S5Lu277yM6KKrYXBp5o+S5Lu25L6d6LWWXG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgbWV0YUluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwbHVzX2NvbmZpZykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICB2YXIgXyQgPSAoYXBsdXMuXyQgPSBhcGx1cy5fJCB8fCB7fSk7IC8vIOWGhemDqOS9v+eUqOeahOWPmOmHj1xuXHQgIF8kLmlzX3Rlcm1pbmFsID0gdHJ1ZTtcblx0ICBfJC5zZW5kX3B2X2NvdW50ID0gMDtcblx0ICAvLyBfJC5zdGF0dXMgPSBTVEFUVVM7XG5cdCAgLy8gXyQuc2NyaXB0X25hbWUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLnNjcmlwdF9uYW1lO1xuXHQgIF8kLnNwbSA9IHtcblx0ICAgIGRhdGE6IHt9XG5cdCAgfTtcblx0ICBfJC5tZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCkgfHwge307XG5cdCAgYXBsdXMuZ2xvYmFsQ29uZmlnID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZztcblx0XG5cdCAgZm9yICh2YXIgayBpbiBhcGx1c19jb25maWcubWV0YUluZm8pIHtcblx0ICAgIG1ldGFJbmZvLnNldE1ldGFJbmZvKGssIGFwbHVzX2NvbmZpZy5tZXRhSW5mb1trXSk7XG5cdCAgfVxuXHQgIGFwbHVzLl8kID0gXyQ7XG5cdFxuXHQgIGFwbHVzLmlzSW50ZXJuYXRpb25hbCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdC8vIHZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdFxuXHR2YXIgaW5mbyA9IHt9O1xuXHRcblx0dmFyIE9CSkVDVCA9ICdvYmplY3QnO1xuXHR2YXIgU1RSSU5HID0gJ3N0cmluZyc7XG5cdFxuXHQvKipcblx0ICogQHJldHVybnMge3t9fVxuXHQgKi9cblx0dmFyIGxhc3RfaW5mbztcblx0ZnVuY3Rpb24gZ2V0SW5mbygpIHtcblx0ICBsYXN0X2luZm8gPSBpbmZvIHx8IHt9O1xuXHQgIHJldHVybiBpbmZvO1xuXHR9O1xuXHRleHBvcnRzLmdldEluZm8gPSBnZXRJbmZvO1xuXHRcblx0Ly8g5aaC5p6c5pyJ57yT5a2Y77yM5L2/55So57yT5a2Y55qE5YC877yM5rKh5pyJ57yT5a2Y5YiZ5LuOIERPTSDkuK3or7vlj5Zcblx0ZnVuY3Rpb24gcUdldCAoKSB7XG5cdCAgcmV0dXJuIGxhc3RfaW5mbyB8fCBnZXRJbmZvKCk7XG5cdH07XG5cdGV4cG9ydHMucUdldCA9IHFHZXQ7XG5cdFxuXHQvKipcblx0ICog5Yqo5oCB6YWN572ubWV0YVxuXHQgKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcblx0ICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2XG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRNZXRhSW5mbyAoaywgdikge1xuXHQgIGlmICghbGFzdF9pbmZvKSB7XG5cdCAgICBsYXN0X2luZm8gPSB7fTtcblx0ICB9XG5cdCAgbGFzdF9pbmZvW2tdID0gdjtcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0ZXhwb3J0cy5zZXRNZXRhSW5mbyA9IHNldE1ldGFJbmZvO1xuXHRcblx0LyoqXG5cdCAqIGdldCBtZXRhSW5mbyBieSBrZXlcblx0ICog5a656ZSZ5qCh6aqM56e75qSN5YiwYXBsdXPlj6/op4bljJbln4vngrnpqozor4Hlt6XlhbflhoUgMjAxOC0wMS0xMCBA6LCL5aOrXG5cdCAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvcHJvamVjdC9wZXJmb3JtYW5jZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ31cblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0dmFyIGdldE1ldGFJbmZvID0gZnVuY3Rpb24oaykge1xuXHQgIGlmICghbGFzdF9pbmZvKSB7XG5cdCAgICBsYXN0X2luZm8gPSB7fTtcblx0ICB9XG5cdCAgcmV0dXJuIGxhc3RfaW5mb1trXSB8fCAnJztcblx0fTtcblx0ZXhwb3J0cy5nZXRNZXRhSW5mbyA9IGdldE1ldGFJbmZvO1xuXHRcblx0LyoqXG5cdCAqIFRvIGFwcGVuZCBgbWV0YWAgdGFnIGlmIHRoZXJlJ3Mgbm9uZSBhcGx1cyBtZXRhLlxuXHQgKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcblx0ICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG5cdCAqICAtIGBPYmplY3QuYXNzaWduYCBjYWxsZWQgb24gT2JqZWN0IHZhbHVlcy5cblx0ICogIEBwYXJhbSBrXG5cdCAqICBAcGFyYW0gdlxuXHQgKi9cblx0dmFyIGFwcGVuZE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcblx0ICAvLyBjb25zb2xlLmxvZyhrLCB2KTtcblx0ICBpZiAoayAmJiB2KSB7XG5cdCAgICAvLyBhcGx1cy11dHBhcmFtIHx8IGFwbHVzLW5leHRwYWdlLXV0cGFyYW0gfHwgYXBsdXMtZXhkYXRhXG5cdCAgICB2YXIgcHJvY2Vzc09iamVjdCA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuXHQgICAgICAgIHRvU2V0TWV0YUluZm8oaywgT2JqZWN0LmFzc2lnbih7fSwgb2xkX3ZhbHVlLCBuZXdfdmFsdWUpKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIH07XG5cdCAgICAvLyBhcGx1cy1hdXRvLWV4cCB8fCBhcGx1cy1hdXRvLWNsa1xuXHQgICAgdmFyIHByb2Nlc3NBcnJheSA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuXHQgICAgICAgIHRvU2V0TWV0YUluZm8oaywgb2xkX3ZhbHVlLmNvbmNhdChuZXdfdmFsdWUpKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIHByb2Nlc3NPYmogPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuXHQgICAgICAgIHByb2Nlc3NBcnJheSh2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzc09iamVjdCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgdG9TZXRNZXRhSW5mbyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgIF9zZXRNZXRhSW5mbyhrZXksIHZhbHVlLCB7XG5cdCAgICAgICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGZsYWc7XG5cdCAgICB2YXIgX29sZFZhbHVlID0gZ2V0TWV0YUluZm8oayk7XG5cdCAgICBpZiAoayA9PT0gJ2FwbHVzLWV4aW5mbycpIHtcblx0ICAgICAgdG9TZXRNZXRhSW5mbyhrLCBPYmplY3QuYXNzaWduKHt9LCBfb2xkVmFsdWUsIGZvcm1hdC5wYXJhbTJvYmoodikpKTtcblx0ICAgICAgZmxhZyA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBpZiAoayA9PT0gJ2FwbHVzLXBhZ2UtcHJvcGVydGllcycpIHtcblx0ICAgICAgdmFyIHBhZ2VQcm9wZXJ0aWVzID0gdjtcblx0ICAgICAgaWYgKF9vbGRWYWx1ZSkge1xuXHQgICAgICAgIGZvciAodmFyIF9rIGluIF9vbGRWYWx1ZSkge1xuXHQgICAgICAgICAgaWYgKHZbX2tdKSB7XG5cdCAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IE9iamVjdC5hc3NpZ24oe30sIF9vbGRWYWx1ZVtfa10sIHZbX2tdKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IF9vbGRWYWx1ZVtfa107XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRvU2V0TWV0YUluZm8oaywgcGFnZVByb3BlcnRpZXMpO1xuXHQgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIGlmIChfb2xkVmFsdWUpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBfb2xkVmFsdWUgPT09IE9CSkVDVCkge1xuXHQgICAgICAgIHByb2Nlc3NPYmooX29sZFZhbHVlKTtcblx0ICAgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdmFyIHRtcF9wYXJzZSA9IEpTT04ucGFyc2UoX29sZFZhbHVlKTtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgdG1wX3BhcnNlID09PSBPQkpFQ1QpIHtcblx0ICAgICAgICAgICAgcHJvY2Vzc09iaih0bXBfcGFyc2UpO1xuXHQgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoIWZsYWcpIHtcblx0ICAgICAgdG9TZXRNZXRhSW5mbyhrLCB2KTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuYXBwZW5kTWV0YUluZm8gPSBhcHBlbmRNZXRhSW5mbztcblx0XG5cdHZhciBfc2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoYXJnMSwgdmFsdWUpIHtcblx0ICB2YXIgaztcblx0ICB2YXIgdjtcblx0ICB2YXIgZGVmYXVsdE1vZGUgPSAnT1ZFUldSSVRFJztcblx0ICB2YXIgbW9kZSA9IGRlZmF1bHRNb2RlO1xuXHQgIGlmICh0eXBlb2YgYXJnMSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGsgPSBhcmcxLm1ldGFOYW1lO1xuXHQgICAgdiA9IGFyZzEubWV0YVZhbHVlO1xuXHQgICAgbW9kZSA9IGFyZzEubW9kZSB8fCBkZWZhdWx0TW9kZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgayA9IGFyZzE7XG5cdCAgICB2ID0gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChtb2RlID09PSBkZWZhdWx0TW9kZSkge1xuXHQgICAgaWYgKHNldE1ldGFJbmZvKGssIHYpKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIF8kLm1ldGFfaW5mbyA9IHFHZXQoKTtcblx0ICAgICAgdmFyIHJzID0gdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cdFxuXHQgICAgICB2YXIgbXNncyA9IFsnc2V0TWV0YUluZm8nLCBrLCB2LCB7fV07XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICAgIHJldHVybiBycztcblx0ICAgIH0gXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBhcHBlbmRNZXRhSW5mbyhrLCB2KTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuX3NldE1ldGFJbmZvID0gX3NldE1ldGFJbmZvO1xuXG4vKioqLyB9KSxcbi8qIDQyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgRk4gPSAnZnVuY3Rpb24nO1xuXHRcblx0dmFyIGdldFB1YnN1YiA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBwdWJzdWIgPSBhcGx1cy5hcGx1c19wdWJzdWIgfHwge307XG5cdCAgdmFyIGZsYWcgPSB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOO1xuXHQgIHJldHVybiBmbGFnID8gcHVic3ViIDogJyc7XG5cdH07XG5cdFxuXHQvKipcblx0ICog5YiG5Y+R5raI5oGv5bel5YW35Ye95pWwXG5cdCAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuXHQgKi9cblx0ZXhwb3J0cy5kb1B1Yk1zZyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0ICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG5cdCAgaWYgKHB1YnN1YiAmJiB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOKSB7XG5cdCAgICBwdWJzdWIucHVibGlzaC5hcHBseShwdWJzdWIsIGFyZ3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBjYWNoZeW9k+WJjeeahOWIhuWPkeWHveaVsOeahOW3peWFt+WHveaVsFxuXHQgKiBAcGFyYW1zIHtBcnJheX0gYXJncyBba2V5LCBtc2dWYWx1ZTEsIG1zZ1ZhbHVlMiwgbXNnVmFsdWUzLCBtc2dWYWx1ZU4sIC4uLl1cblx0ICovXG5cdGV4cG9ydHMuZG9DYWNoZVB1YnMgPSBmdW5jdGlvbihhcmdzKSB7XG5cdCAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuXHQgIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5jYWNoZVB1YnMgPT09IEZOKSB7XG5cdCAgICBwdWJzdWIuY2FjaGVQdWJzLmFwcGx5KHB1YnN1YiwgYXJncyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOiuoumYhea2iOaBr+W3peWFt+WHveaVsFxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2IoWyBtc2dWYWx1ZTEsIG1zZ1ZhbHVlMiwgbXNnVmFsdWUzLCBtc2dWYWx1ZU4sIC4uLl0pXG5cdCAqL1xuXHRleHBvcnRzLmRvU3ViTXNnID0gZnVuY3Rpb24oa2V5LCBjYikge1xuXHQgIHZhciBwdWJzdWIgPSBnZXRQdWJzdWIoKTtcblx0ICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIuc3Vic2NyaWJlID09PSBGTikge1xuXHQgICAgcHVic3ViLnN1YnNjcmliZShrZXksIGNiKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHRcblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg0NCkoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY29sbGVjdF9jbGsgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0Ly8gdmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBhcGx1c0N0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgY2xrX2NvbmZpZyA9IFtdO1xuXHRcblx0ICB2YXIgaW5pdENsayA9IGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGNsa19jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnKTtcblx0ICAgIHZhciBzcG1CID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcblx0ICAgIHZhciBlbGVtZW50c0dyb3VwcyA9IFtdO1xuXHQgICAgZnVuY3Rpb24gZWxlbWVudHNRdWVyeVJlc3VsdENhbGxiYWNrKGVsZW1lbnRzLGNvbmZpZyl7XG5cdCAgICAgIGlmKHV0aWxBcnJheS5pc0FycmF5KGVsZW1lbnRzKSl7XG5cdCAgICAgICAgZWxlbWVudHNHcm91cHMucHVzaCh7XG5cdCAgICAgICAgICBjb25maWc6IGNvbmZpZyxcblx0ICAgICAgICAgIGVsZW1lbnRzOiBlbGVtZW50c1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIGNvbnNvbGUubG9nKCc9PT0+IGVsZW1lbnRzJywgZWxlbWVudHMsIGVsZW1lbnRzR3JvdXBzKVxuXHQgICAgICBpZihlbGVtZW50c0dyb3Vwcy5sZW5ndGg9PT1jbGtfY29uZmlnLmxlbmd0aCl7XG5cdCAgICAgICAgY29sbGVjdF9jbGsud2F0Y2hfY2xpY2sob3B0LmV2ZW50LCBlbGVtZW50c0dyb3Vwcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh1dGlsQXJyYXkuaXNBcnJheShjbGtfY29uZmlnKSkge1xuXHQgICAgICBjbGtfY29uZmlnLmZvckVhY2goZnVuY3Rpb24gKGNvbmZpZykge1xuXHQgICAgICAgIGlmICghdXRpbERhc2guaXNTdGFydFdpdGgoY29uZmlnLmNzc1NlbGVjdG9yLCAnLicpKSB7XG5cdCAgICAgICAgICBjb25maWcuY3NzU2VsZWN0b3IgPSAnLicgKyBjb25maWcuY3NzU2VsZWN0b3I7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghY29uZmlnLnNwbUIpIHtcblx0ICAgICAgICAgIGNvbmZpZy5zcG1CID0gc3BtQjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGVsZW1lbnRzID0gbWluaS5nZXRDb250ZXh0KCkuY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbChjb25maWcuY3NzU2VsZWN0b3IpO1xuXHQgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudHMuZmllbGRzID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICBlbGVtZW50cy5maWVsZHMoe1xuXHQgICAgICAgICAgICBpZDogdHJ1ZSxcblx0ICAgICAgICAgICAgZGF0YXNldDogdHJ1ZSxcblx0ICAgICAgICAgICAgcmVjdDogdHJ1ZSxcblx0ICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0OiB0cnVlXG5cdCAgICAgICAgICB9LCBmdW5jdGlvbiAocmV0KSB7XG5cdCAgICAgICAgICAgIGVsZW1lbnRzUXVlcnlSZXN1bHRDYWxsYmFjayhyZXQsY29uZmlnKTtcblx0ICAgICAgICAgIH0pLmV4ZWMoKTsgXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIOS4jeaUr+aMgWZpZWxkc+aWueazleeahOWcuuaZr++8iOaUr+S7mOWuneS4i++8jOaUueeUqOWdkOagh++8iVxuXHQgICAgICAgICAgZWxlbWVudHMuYm91bmRpbmdDbGllbnRSZWN0KCkuZXhlYyhmdW5jdGlvbiAocmV0KSB7XG5cdCAgICAgICAgICAgIGVsZW1lbnRzUXVlcnlSZXN1bHRDYWxsYmFjayhyZXQsY29uZmlnKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0ICBcblx0ICBhcGx1c0N0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG5cdCAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScpIHtcblx0ICAgICAgICBjbGtfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJyk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdCAgLy8gYXBsdXNDdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgLy8gICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAvLyAgIGFyZ3VtZW50czogWydvblNob3cnLCBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gICAgIC8vIFRPRE9cblx0ICAvLyAgIH1dXG5cdCAgLy8gfSk7XG5cdCAgLy8gYXBsdXNDdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgLy8gICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAvLyAgIGFyZ3VtZW50czogWydvbkhpZGUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gICAgIC8vIFRPRE9cblx0ICAvLyAgIH1dXG5cdCAgLy8gfSk7XG5cdFxuXHQgIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25BcGx1c0NsaycsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgICBpbml0Q2xrKG9wdCk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdFxuXHQgIC8vIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uVW5sb2FkJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgIC8vICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAvLyAgICAgLy8gVE9ET1xuXHQgIC8vICAgfVxuXHQgIC8vIH0pO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDQ1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgd2F0Y2hUcmFja2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7XG5cdHZhciBnZXRIYXNoS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdHZhciByYXhVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdC8qKlxuXHQgKiDmioroh6rliqjmm53lhYnnm7jlkIxjc3NTZWxlY3RvcueahOebuOWQjOS9jee9rueahGRhdGFzZXTmi7/liLDnu5noh6rliqjngrnlh7vkvb/nlKhcblx0ICog5Zug5Li65Zyo5pSv5LuY5a6d546v5aKD5LiL6Ieq5Yqo54K55Ye75LqL5Lu25ou/5LiN5YiwZGF0YXNldFxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0RGF0YVNldCAoY29uZmlnLCBpbmRleCkge1xuXHQgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcblx0ICB2YXIgX2hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuaGFzaE1hcCB8fCB7fTtcblx0ICBcblx0ICBmb3IgKHZhciBsb2drZXkgaW4gX2hhc2hNYXApIHtcblx0ICAgIHZhciBlbGVfcyA9IF9oYXNoTWFwW2xvZ2tleV0gfHwgW107XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVfcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuXHQgICAgICB2YXIgZXhwQ29uZmlnID0gdi5leHBDb25maWcgfHwge307XG5cdCAgICAgIC8vIOabneWFiWNzc1NlbGVjdG9y5LiO54K55Ye755qEY3NzU2VsZWN0b3Lnm7jlkIzmiY3orqTkuLrmmK/lkIznsbvlnovlhYPntKBcblx0ICAgICAgaWYgKGNvbmZpZy5jc3NTZWxlY3RvciA9PT0gZXhwQ29uZmlnLmNzc1NlbGVjdG9yKSB7XG5cdCAgICAgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KHtcblx0ICAgICAgICAgIGluZGV4OiBpbmRleFxuXHQgICAgICAgIH0sIGV4cENvbmZpZyk7XG5cdCAgICAgICAgXG5cdCAgICAgICAgaWYgKGhhc2ggPT09IHYuaGFzaF92YWx1ZSkge1xuXHQgICAgICAgICAgcmV0dXJuIGNsb25lRGVlcCh2LmRhdGFzZXQpO1xuXHQgICAgICAgIH0gIFxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy53YXRjaF9jbGljayA9IGZ1bmN0aW9uIChjbGtJbmZvLCBlbGVtZW50c0dyb3Vwcykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciByZXN1bHRzID0gW107XG5cdCAgZWFjaChlbGVtZW50c0dyb3VwcyxmdW5jdGlvbihncm91cCl7XG5cdCAgICB2YXIgZWxlbWVudHMgPSBncm91cC5lbGVtZW50cztcblx0ICAgIHZhciBjb25maWcgPSBncm91cC5jb25maWc7XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgIHZhciBfdmFsdWUgPSBlbGVtZW50c1tqXTtcblx0ICAgICAgaWYgKGlzSW5BcmVhKGNsa0luZm8sIF92YWx1ZSkpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSBqICsgMTtcblx0ICAgICAgICB2YXIgZGF0YXNldCA9IF92YWx1ZS5kYXRhc2V0IHx8IGdldERhdGFTZXQoY29uZmlnLCBpbmRleCkgfHwge307XG5cdCAgICAgICAgdmFyIHNwbURhdGEgPSB7fTtcblx0ICAgICAgICB2YXIgX3NwbURhdGEgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZGF0YXNldC50cmFja2VyUGFyYW1zKSB8fCB7fTtcblx0ICAgICAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdCAgICAgICAgICAvLyDlj5ZkYXRhLXRyYWNrZXIg5oiWIGNzc1NlbGVjdG9yXG5cdCAgICAgICAgICBzcG1EYXRhID0gY2xvbmVEZWVwKGFwbHVzLl8kLnNwbS5kYXRhIHx8IHt9KTtcblx0ICAgICAgICAgIGlmIChkb2N1bWVudCAmJiBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpKSB7XG5cdCAgICAgICAgICAgIHZhciBkb21EYXRhU2V0ID0gcmF4VXRpbC5nZXREYXRhU2V0KGNvbmZpZywgaW5kZXgtMSk7XG5cdCAgICAgICAgICAgIHZhciBjID0gZG9tRGF0YVNldC5zcG1DIHx8IGNvbmZpZy5zcG1DIHx8ICcwJztcblx0ICAgICAgICAgICAgdmFyIGQgPSBkb21EYXRhU2V0LnNwbUQgfHwgY29uZmlnLnNwbUQgfHwgJzAnO1xuXHQgICAgICAgICAgICBzcG1EYXRhLmMgPSBjO1xuXHQgICAgICAgICAgICBzcG1EYXRhLmQgPSBkO1xuXHQgICAgICAgICAgICAvLyDooaXlhYUgcmF4IGRhdGEtKiDlsZ7mgKdcblx0ICAgICAgICAgICAgZGF0YXNldCA9IE9iamVjdC5hc3NpZ24oZGF0YXNldCwgZG9tRGF0YVNldCk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgc3BtQyA9IGRhdGFzZXQudHJhY2tlciB8fCBjb25maWcuY3NzU2VsZWN0b3IucmVwbGFjZSgvXFwnfFxcXCJ8XFw7fFxcOnxcXD18XFxbfFxcXXxcXC58XFwjfFxcLXxcXC98XFx8L2csICcnKTsgLy8g5Y675o6J54m55q6K5a2X56ymXG5cdCAgICAgICAgICAgIHNwbURhdGEuYyA9IHNwbUM7XG5cdCAgICAgICAgICAgIGlmIChzcG1EYXRhLmMgJiYgc3BtRGF0YS5jICE9PSAnMCcpIHtcblx0ICAgICAgICAgICAgICB2YXIgc3BtRCA9ICdkJyArIGluZGV4O1xuXHQgICAgICAgICAgICAgIHNwbURhdGEuZCA9IHNwbUQ7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3BtRGF0YS5iID0gY29uZmlnLnNwbUI7XG5cdCAgICAgICAgICBpZiAoY29uZmlnLnNwbUMpIHtcblx0ICAgICAgICAgICAgc3BtRGF0YS5jID0gY29uZmlnLnNwbUM7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBzcG1EYXRhLmMgPSBfc3BtRGF0YS5zcG1DID8gZW5jb2RlVVJJQ29tcG9uZW50KF9zcG1EYXRhLnNwbUMpIDogJyc7XG5cdCAgICAgICAgICB9XG5cdCAgXG5cdCAgICAgICAgICBpZiAoY29uZmlnLnNwbUQpIHtcblx0ICAgICAgICAgICAgc3BtRGF0YS5kID0gaW5kZXggPyBjb25maWcuc3BtRCArICdfJyArIGluZGV4IDogY29uZmlnLnNwbUQ7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBzcG1EYXRhLmQgPSBfc3BtRGF0YS5zcG1EID8gZW5jb2RlVVJJQ29tcG9uZW50KF9zcG1EYXRhLnNwbUQpIDogJyc7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJlc3VsdHMucHVzaCh7XG5cdCAgICAgICAgICBkYXRhc2V0OiBkYXRhc2V0LFxuXHQgICAgICAgICAgY29uZmlnOiBjb25maWcsXG5cdCAgICAgICAgICBlbGVtZW50OiBfdmFsdWUsXG5cdCAgICAgICAgICBzcG1EYXRhOiBzcG1EYXRhXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KTtcblx0ICB2YXIgcmVzdWx0ID0gdm9pZCAwO1xuXHQgIGlmKHJlc3VsdHMubGVuZ3RoPT09MSl7XG5cdCAgICByZXN1bHQgPSByZXN1bHRzWzBdO1xuXHQgIH1lbHNlIGlmKHJlc3VsdHMubGVuZ3RoPjEpe1xuXHQgICAgcmVzdWx0ID0gcmVzdWx0cy5yZWR1Y2UoZnVuY3Rpb24ocHJldmlvdXMsY3VycmVudCl7XG5cdCAgICAgIHZhciBtYXRjaGVkUmVzdWx0ID0gcHJldmlvdXM7XG5cdCAgICAgIHZhciBwcmV2aW91c0VsZW1lbnQgPSBwcmV2aW91cy5lbGVtZW50O1xuXHQgICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSBjdXJyZW50LmVsZW1lbnQ7XG5cdCAgICAgIGlmKGN1cnJlbnRFbGVtZW50LnRvcCA+PSBwcmV2aW91c0VsZW1lbnQudG9wICYmIGN1cnJlbnRFbGVtZW50LnJpZ2h0IDw9IHByZXZpb3VzRWxlbWVudC5yaWdodCAmJiBjdXJyZW50RWxlbWVudC5ib3R0b20gPD0gcHJldmlvdXNFbGVtZW50LmJvdHRvbSAmJiBjdXJyZW50RWxlbWVudC5sZWZ0ID49IHByZXZpb3VzRWxlbWVudC5sZWZ0KXtcblx0ICAgICAgICBtYXRjaGVkUmVzdWx0ID0gY3VycmVudDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWF0Y2hlZFJlc3VsdDtcblx0ICAgIH0pO1xuXHQgIH1cblx0ICBpZihyZXN1bHQpe1xuXHQgICAgd2F0Y2hUcmFja2VyLnB1c2hFdmVudCgnQ0xLJywgcmVzdWx0LmRhdGFzZXQsIHJlc3VsdC5jb25maWcsIHJlc3VsdC5lbGVtZW50LCByZXN1bHQuc3BtRGF0YSk7XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIGlzSW5BcmVhIChjbGtJbmZvLCBlbGVJbmZvKSB7XG5cdCAgICB2YXIgY2hhbmdlZFRvdWNoID0ge307XG5cdCAgICBjb25zb2xlLmxvZygnPT09PiBjbGtJbmZvJywgY2xrSW5mbylcblx0ICAgIGlmIChjbGtJbmZvKSB7XG5cdCAgICAgIGlmIChjbGtJbmZvLmNoYW5nZWRUb3VjaGVzKSB7XG5cdCAgICAgICAgLy8g5b6u5L+hXG5cdCAgICAgICAgY2hhbmdlZFRvdWNoID0gY2xrSW5mby5jaGFuZ2VkVG91Y2hlc1swXTtcblx0ICAgICAgfSBlbHNlIGlmIChjbGtJbmZvLmRldGFpbCkge1xuXHQgICAgICAgIC8vIOaUr+S7mOWunVxuXHQgICAgICAgIGNoYW5nZWRUb3VjaCA9IGNsa0luZm8uZGV0YWlsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgeCA9IGNoYW5nZWRUb3VjaC5jbGllbnRYIHx8IDA7XG5cdCAgICB2YXIgeSA9IGNoYW5nZWRUb3VjaC5jbGllbnRZIHx8IDA7XG5cdFxuXHQgICAgdmFyIF90b3AgPSBlbGVJbmZvLnRvcDtcblx0ICAgIHZhciBfYm90dG9tID0gZWxlSW5mby5ib3R0b207XG5cdCAgICBpZiAoZWxlSW5mby5zY3JvbGxUb3ApIHtcblx0ICAgICAgX3RvcCArPSBlbGVJbmZvLnNjcm9sbFRvcDtcblx0ICAgICAgX2JvdHRvbSArPSBlbGVJbmZvLnNjcm9sbFRvcDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZWxlSW5mby5sZWZ0IDwgeCAmJiB4IDwgZWxlSW5mby5yaWdodCAmJiBfdG9wIDwgeSAmJiB5IDwgX2JvdHRvbSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIHJlY29yZEV4cE1hcFF1ZXVlID0ge307XG5cdHZhciBERUZBVUxUX1BLR19TSVpFID0gMztcblx0dmFyIFBPU1QgPSAnUE9TVCc7XG5cdHZhciBFWFAgPSAnRVhQJztcblx0XG5cdC8qKlxuXHQgKiDojrflj5bnlKjmiLfms6jlhaXnmoTln4vngrnkv6Hmga/vvJpodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvZG9jcy9tZXRhI2I3ZDhjY2M3XG5cdCAqIEBwYXJhbXMge0Z1bmN0aW9ufSB1c2VyRm5OYW1lXG5cdCAqIEBwYXJhbXMge09iamVjdH0gZWxlbWVudFxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IHNlbGVjdG9yXG5cdCAqXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdGZ1bmN0aW9uIGdldFVzZXJJbmZvICh1c2VyRm5OYW1lLCBlbGVtZW50LCBzZWxlY3Rvciwgc3BtRGF0YSkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpIHx8IHt9O1xuXHQgIHZhciBnZXRNZXRhSW5mbyA9IGFwbHVzLmdldE1ldGFJbmZvO1xuXHQgIGlmICh0eXBlb2YgZ2V0TWV0YUluZm8gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHZhciB1c2VyRm4gPSBnZXRNZXRhSW5mbyh1c2VyRm5OYW1lKTtcblx0ICAgIHZhciB1c2VySW5mbyA9IHt9O1xuXHQgICAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdXNlckluZm8gPSB1c2VyRm4oZWxlbWVudCA/IGNsb25lRGVlcChlbGVtZW50KSA6IHt9LCBzZWxlY3Rvciwgc3BtRGF0YSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZm9ybWF0LnBhcmFtMm9iaih1c2VySW5mbyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIOiBmuWQiOS4iuaKpeabneWFieaXpeW/l1xuXHR2YXIgRXZlbnRBcnJheSA9IEJhc2UuZXh0ZW5kKHtcblx0ICBwdXNoOiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG5cdCAgICB3aGlsZSAodGhpcy5idWZmZXIubGVuZ3RoID49IHRoaXMucGtnU2l6ZSkge1xuXHQgICAgICB2YXIgZ29rZXlzID0gdGhpcy5idWZmZXIuc3BsaWNlKDAsIHRoaXMucGtnU2l6ZSk7XG5cdCAgICAgIGlmIChnb2tleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGFwbHVzLmNvbWJpbmVSZWNvcmQodGhpcy5sb2drZXksIEVYUCwgZ29rZXlzLCB0aGlzLm1ldGhvZCk7XG5cdCAgICAgIH1cblx0ICAgIH0gXG5cdCAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIGdldEZpeGVkTnVtYmVyICh2YWx1ZSwgbGVuZ3RoKSB7XG5cdCAgdmFyIF9yZXN1bHQgPSAnJztcblx0ICB0cnkge1xuXHQgICAgdmFyIF9udW0gPSBuZXcgTnVtYmVyKHZhbHVlKTtcblx0ICAgIF9yZXN1bHQgPSBwYXJzZUZsb2F0KF9udW0udG9GaXhlZChsZW5ndGgpKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBfcmVzdWx0ID0gdmFsdWU7XG5cdCAgfVxuXHQgIHJldHVybiBfcmVzdWx0O1xuXHR9XG5cdFxuXHRleHBvcnRzLnB1c2hFdmVudCA9IGZ1bmN0aW9uIChnbWtleSwgZGF0YSwgY29uZmlnLCBlbGVtZW50LCBzcG1EYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgXG5cdCAgdmFyIHByb3BzID0gY29uZmlnLnByb3BzIHx8IFtdO1xuXHQgIHZhciBwYXJhbXMgPSB7fTtcblx0ICB2YXIgZGF0YXNldCA9IHt9O1xuXHRcblx0ICBpZiAoZGF0YSkge1xuXHQgICAgZm9yICh2YXIgZGF0YWtleSBpbiBkYXRhKSB7XG5cdCAgICAgIGlmICghIWRhdGFrZXkudG9Mb3dlckNhc2UoKS5tYXRjaCgvXmRhdGEtLykpIHtcblx0ICAgICAgICBkYXRhc2V0W2RhdGFrZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eZGF0YS0vLCAnJykucmVwbGFjZSgvLS9nLCAnJyldID0gZGF0YVtkYXRha2V5XTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBUT0RPOiDlr7nkuo7mt5jlrp3lsI/nqIvluo8sZGF0YWtleeW3sue7j+WcqGRhdGHlhoXkuobvvIzlubbkuJTkuI3lkKtkYXRhLeWJjee8gCzpnIDljZXni6zliqDlhaVA6ZKw5pitXG5cdCAgICAgICAgcGFyYW1zW2RhdGFrZXldID0gZGF0YVtkYXRha2V5XTtcblx0ICAgICAgfVxuXHQgICAgfSAgXG5cdCAgfVxuXHQgIGlmIChwcm9wcyAmJiBpc0FycmF5KHByb3BzKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0gcHJvcHNbaV0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eZGF0YS0vLCAnJykucmVwbGFjZSgvLS9nLCAnJyk7XG5cdCAgICAgIHBhcmFtc1twcm9wc1tpXV0gPSBkYXRhc2V0W2tleV07XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIGRhdGFzZXQpO1xuXHQgIH1cblx0ICBcblx0ICBpZiAoZWxlbWVudCAmJiBnbWtleSA9PT0gRVhQKSB7XG5cdCAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgJ193JzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC53aWR0aCwgMiksXG5cdCAgICAgICdfaCc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQuaGVpZ2h0LCAyKSxcblx0ICAgICAgJ194JzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC54LCAyKSxcblx0ICAgICAgJ195JzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC55LCAyKSxcblx0ICAgICAgLy8gJ19oYXNoJzogZWxlbWVudC5oYXNoX3ZhbHVlIHx8ICcnLFxuXHQgICAgICAnX3JhdGUnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LnZpZXdhYmlsaXR5UmF0ZSB8fCBlbGVtZW50LmludGVyc2VjdGlvblJhdGlvLCAyKSxcblx0ICAgICAgJ192aWV3YWJpbGl0eSc6ICdpbnRlcnNlY3Rpb24nXG5cdCAgICB9KTtcblx0ICB9ICBcblx0ICBpZiAoY29uZmlnLl92dCkge1xuXHQgICAgcGFyYW1zLl92dCA9IGNvbmZpZy5fdnQ7XG5cdCAgfVxuXHRcblx0ICAvLyBpZiAoZG9jdW1lbnQgJiYgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuXHQgIC8vICAgdmFyIHNwbURhdGEgPSBcblx0ICAvLyB9XG5cdFxuXHQgIHZhciB1c2VyRm5OYW1lID0gZ21rZXkgPT09IEVYUCA/ICdhcGx1cy1hdXRvLWV4cC11c2VyZm4nIDogJ2FwbHVzLWF1dG8tY2xrLXVzZXJmbic7XG5cdCAgdmFyIHVzZXJJbmZvID0gZ2V0VXNlckluZm8odXNlckZuTmFtZSwgZWxlbWVudCwgY29uZmlnLmNzc1NlbGVjdG9yLCBzcG1EYXRhKTtcblx0XG5cdCAgaWYgKCF1c2VySW5mby5zcG0pIHtcblx0ICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgc3BtRGF0YSAmJiBzcG1EYXRhLmEgJiYgc3BtRGF0YS5iKSB7XG5cdCAgICAgIHVzZXJJbmZvLnNwbSA9IFtzcG1EYXRhLmEsIHNwbURhdGEuYiwgc3BtRGF0YS5jIHx8ICcwJywgc3BtRGF0YS5kIHx8ICcwJ10uam9pbignLicpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdXNlckluZm8uc3BtID0gc3BtRGF0YSAmJiBzcG1EYXRhLmIgPyBzcG1EYXRhIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGdva2V5ID0ge307XG5cdFxuXHQgIHZhciB0cmFja2VyUGFyYW1zID0gZGF0YS50cmFja2VyUGFyYW1zIHx8IGRhdGFbJ3RyYWNrZXItcGFyYW1zJ107XG5cdCAgaWYgKHRyYWNrZXJQYXJhbXMpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBfdHJhY2tlclBhcmFtcyA9IEpTT04ucGFyc2UodHJhY2tlclBhcmFtcyk7XG5cdCAgICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24ocGFyYW1zLCBfdHJhY2tlclBhcmFtcyk7XG5cdCAgICAgIGRlbGV0ZSBwYXJhbXMudHJhY2tlclBhcmFtcztcblx0ICAgICAgZGVsZXRlIHBhcmFtcy50cmFja2VycGFyYW1zO1xuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICB9XG5cdCAgXG5cdCAgaWYgKGdta2V5ID09PSAnRVhQJyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgcmVjb3JkRXhwTWFwUXVldWVbY29uZmlnLmxvZ2tleV0pIHtcblx0ICAgIHZhciBleGRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMsIHVzZXJJbmZvKTtcblx0ICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwge1xuXHQgICAgICBleGFyZ3M6IGV4ZGF0YVxuXHQgICAgfSk7XG5cdCAgICB1dGlsTG9nZ2VyLmxvZygn6Ieq5Yqo5pud5YWJJyxjb25maWcubG9na2V5LGV4ZGF0YSk7XG5cdCAgICByZWNvcmRFeHBNYXBRdWV1ZVtjb25maWcubG9na2V5XS5wdXNoKGNsb25lRGVlcChnb2tleSkpO1xuXHQgIH0gZWxzZSB7ICAgIFxuXHQgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMsIHVzZXJJbmZvLCBjb25maWcuY3VzdG9tQXJncyk7XG5cdCAgICB1dGlsTG9nZ2VyLmxvZygn6Ieq5Yqo54K55Ye7Jyxjb25maWcubG9na2V5LGdva2V5KTtcblx0ICAgIGFwbHVzLnJlY29yZChjb25maWcubG9na2V5LCBnbWtleSwgZ29rZXksIFBPU1QpOyAgXG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge0FycmF5T2JqZWN0fSBjb25maWcgOiBbe1xuXHQgKiAgICAncG9zaXRpb25TZWxlY3Rvcic6ICcuc2Nyb2xsLXZpZXcnLFxuXHQgKiAgICAnY3NzU2VsZWN0b3InOicuYmFsbCcsXG5cdCAqICAgICdsb2drZXknOicvdGVzdC5iYWxsLjEnLFxuXHQgKiAgICAncHJvcHMnOiBbJ2RhdGEtdHJhY2tlciddLFxuXHQgKiAgfSwge1xuXHQgKiAgICAnY3NzU2VsZWN0b3InOicubXlidXR0b24nLFxuXHQgKiAgICAnbG9na2V5JzonL3Rlc3QubXlidXR0b24uMScsXG5cdCAqICAgICdwcm9wcyc6IFsnZGF0YS10cmFja2VyJ10sXG5cdCAqICB9XVxuXHQgKi9cblx0ZXhwb3J0cy53YXRjaFJlY29yZCA9IGZ1bmN0aW9uIChjb25maWcpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICBcblx0ICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpICYmIGNvbmZpZykge1xuXHQgICAgY29uZmlnLmZvckVhY2goZnVuY3Rpb24gKGNmZykge1xuXHQgICAgICBpZiAoIXJlY29yZEV4cE1hcFF1ZXVlLmhhc093blByb3BlcnR5KGNmZy5sb2drZXkpKSB7XG5cdCAgICAgICAgcmVjb3JkRXhwTWFwUXVldWVbY2ZnLmxvZ2tleV0gPSBFdmVudEFycmF5LmNyZWF0ZSh7XG5cdCAgICAgICAgICBsZW5ndGg6IDAsXG5cdCAgICAgICAgICBidWZmZXI6IFtdLFxuXHQgICAgICAgICAgbG9na2V5OiBjZmcubG9na2V5LFxuXHQgICAgICAgICAgcGtnU2l6ZTogdHlwZW9mIGNmZy5wa2dTaXplID09PSAnbnVtYmVyJyAmJiBjZmcucGtnU2l6ZSB8fCBERUZBVUxUX1BLR19TSVpFLFxuXHQgICAgICAgICAgbWV0aG9kOiBjZmcubWV0aG9kIHx8IFBPU1Rcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBcblx0ICAgIH0pOyAgICBcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmNsZWFyUmVjb3JkID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgIGZvciAodmFyIGxvZ2tleSBpbiByZWNvcmRFeHBNYXBRdWV1ZSkge1xuXHQgICAgICB2YXIgZ29rZXlzID0gcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgfHwgW107XG5cdCAgICAgIGlmIChnb2tleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGFwbHVzLmNvbWJpbmVSZWNvcmQobG9na2V5LCBFWFAsIGdva2V5cywgUE9TVCk7XG5cdCAgICAgICAgcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgPSBbXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cblxuLyoqKi8gfSksXG4vKiA0NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5pel5b+X57G75bel5YW36ZuG5ZCIXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gbyA6e1xuXHQgKiAgIGxldmVsOiAnd2Fybi9pbmZvL2xvZycgZGVmYXVsdCBpcyB3YXJuXG5cdCAqICAgbXNnOiAnbXNnJ1xuXHQgKiB9XG5cdCAqL1xuXHR2YXIgbWV0YUluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIHByZWZpeCA9ICdbQVBMVVNdIC0tICc7XG5cdGV4cG9ydHMubG9nZ2VyID0gZnVuY3Rpb24gKG8pIHtcblx0ICBpZiAoIW8pIHtcblx0ICAgIG8gPSB7fTtcblx0ICB9XG5cdCAgdmFyIGxldmVsID0gby5sZXZlbCB8fCAnd2Fybic7XG5cdCAgY29uc29sZSAmJiBjb25zb2xlW2xldmVsXSAmJiBjb25zb2xlW2xldmVsXShwcmVmaXgrby5tc2cpO1xuXHR9O1xuXHRleHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCl7XG5cdCAgY29uc3QgZGVidWcgPSBtZXRhSW5mby5nZXRNZXRhSW5mbygnZGVidWcnKTtcblx0ICBkZWJ1ZyAmJiBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLFtwcmVmaXhdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSkpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWJ1Z0xvZyA9IGZ1bmN0aW9uKG8pIHtcblx0ICB2YXIgYXBsdXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnKSB7XG5cdCAgICB0aGlzLmxvZ2dlcihvKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDmoLnmja7lhYPntKDlsZ7mgKflkozln4vngrnphY3nva7nsr7noa7ojrflj5bkuIDkuKrlhYPntKDnmoRoYXNoS2V5XG5cdCAqIEBwYXJhbXMge09iamVjdH0gZWxlbWVudEF0dHIge1xuXHQgKiAgIGlkXG5cdCAqIH1cblx0ICogQHBhcmFtcyB7T2JqZWN0fSBjb25maWcge1xuXHQgKiAgIGxvZ2tleSwgY3NzU2VsZWN0b3IsIHBvc2l0aW9uU2VsZWN0b3Jcblx0ICogfVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IGhhc2hLZXlcblx0ICovXG5cdFxuXHQvLyBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbGVtZW50QXR0ciwgY29uZmlnKSB7XG5cdC8vICAgdmFyIGhhc2hLZXkgPSBbXG5cdC8vICAgICBjb25maWcubG9na2V5LFxuXHQvLyAgICAgY29uZmlnLmNzc1NlbGVjdG9yLFxuXHQvLyAgICAgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IsXG5cdC8vICAgICBlbGVtZW50QXR0ci5pbmRleFxuXHQvLyAgIF0uam9pbignXycpO1xuXHQvLyAgIHJldHVybiBoYXNoS2V5O1xuXHQvLyB9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZWxlbWVudEF0dHIsIGNvbmZpZykge1xuXHQgIHZhciBoYXNoS2V5ID0gW1xuXHQgICAgY29uZmlnLmxvZ2tleSxcblx0ICAgIGNvbmZpZy5jc3NTZWxlY3Rvcixcblx0ICAgIC8vIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yIHx8ICcnLFxuXHQgICAgLy8gZWxlbWVudEF0dHIuaW5kZXggLy/mt5jlrp3lsI/nqIvluo/liKTmlq1oYXNoS2V5XG5cdCAgXTtcblx0XG5cdCAgaWYgKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG5cdCAgICBoYXNoS2V5LnB1c2goY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpO1xuXHQgIH1cblx0ICBcblx0ICBpZiAoZWxlbWVudEF0dHIuaWQpIHtcblx0ICAgIGhhc2hLZXkucHVzaChlbGVtZW50QXR0ci5pZCk7XG5cdCAgfVxuXHRcblx0ICBpZiAoZWxlbWVudEF0dHIuaW5kZXggPj0gMCkge1xuXHQgICAgaGFzaEtleS5wdXNoKGVsZW1lbnRBdHRyLmluZGV4KTtcblx0ICB9XG5cdCAgLy8gUmF45qGG5p626L+Q6KGM5pe26I635b6X55qEZGF0YXNldOWJjeWQjuS4jeS4gOiHtO+8jOWIoOmZpOaXoOaViOWxnuaApyBA6ZKw5pitIDIwMjEtMDktMTggMDk6MTc6NTJcblx0ICBpZiAoZWxlbWVudEF0dHIuZGF0YXNldCAmJiBlbGVtZW50QXR0ci5kYXRhc2V0Wydwcml2YXRlTm9kZUlkJ10pIHtcblx0ICAgIGRlbGV0ZSBlbGVtZW50QXR0ci5kYXRhc2V0Wydwcml2YXRlTm9kZUlkJ107XG5cdCAgfVxuXHQgIGlmIChlbGVtZW50QXR0ci5kYXRhc2V0KSB7XG5cdCAgICBoYXNoS2V5LnB1c2goSlNPTi5zdHJpbmdpZnkoZWxlbWVudEF0dHIuZGF0YXNldCkpO1xuXHQgIH1cblx0ICBoYXNoS2V5ID0gaGFzaEtleS5qb2luKCdfJyk7XG5cdCAgcmV0dXJuIGhhc2hLZXk7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiByYXhVdGlsLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFxuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHRleHBvcnRzLmdldERhdGFTZXQgPSBmdW5jdGlvbiAoY29uZmlnLGluZGV4KSB7XG5cdCAgdmFyIGQgPSB7fTtcblx0ICB2YXIgY2x4O1xuXHQgIGlmICh1dGlsRGFzaC5pc1N0YXJ0V2l0aChjb25maWcuY3NzU2VsZWN0b3IsICcuJykpIHtcblx0ICAgIGNseCA9IGNvbmZpZy5jc3NTZWxlY3Rvci5zbGljZSgxLCBjb25maWcuY3NzU2VsZWN0b3IubGVuZ3RoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgY2x4ID0gY29uZmlnLmNzc1NlbGVjdG9yO1xuXHQgIH1cblx0ICB2YXIgZG9tcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2x4KTtcblx0ICBpZiAoZG9tcyAmJiBkb21zLmxlbmd0aCA+IDApe1xuXHQgICAgdmFyIGRvbURhdGFTZXQgPSBkb21zW2luZGV4XS5kYXRhc2V0IHx8IHt9O1xuXHQgICAgZm9yICh2YXIga2V5IGluIGRvbURhdGFTZXQpIHtcblx0ICAgICAgdmFyIHQgPSBkb21EYXRhU2V0W2tleV07XG5cdCAgICAgIHN3aXRjaCh0eXBlb2YgdCl7XG5cdCAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcblx0ICAgICAgICBkW2tleV0gPSB0KCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ29iamVjdCc6XG5cdCAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oZCwgdCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ3N0cmluZyc6XG5cdCAgICAgICAgaWYgKGtleSA9PT0gJ3RyYWNrZXJQYXJhbXMnKSB7XG5cdCAgICAgICAgICB2YXIgdHAgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZG9tRGF0YVNldC50cmFja2VyUGFyYW1zKTtcblx0ICAgICAgICAgIGQgPSBPYmplY3QuYXNzaWduKGQsIHRwKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZFtrZXldID0gdDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ251bWJlcic6XG5cdCAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuXHQgICAgICAgIGRba2V5XSA9IHQ7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzUmF4ID0gZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gZG9jdW1lbnQgPyB0cnVlIDogZmFsc2U7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOaVsOe7hOW3peWFt1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBJRTjkuI3mlK/mjIHmlbDnu4Tljp/nlJ/nmoRpbmRleE9m77yM5pWF6Ieq6KGM5a6e546w5LiA5LiqaW5kZXhvZlxuXHQgKiBAcGFyYW0gW0FycmF5XSBhcnJcblx0ICogQHBhcmFtIFtPYmplY3RdIGl0ZW1cblx0ICogQHJldHVybiBbTnVtYmVyXSBpbmRleFxuXHQgKi9cblx0ZXhwb3J0cy5pbmRleG9mID0gZnVuY3Rpb24oYXJyLCBpdGVtKSB7XG5cdCAgdmFyIGluZGV4ID0gLTE7XG5cdCAgdHJ5IHtcblx0ICAgIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgaWYgKGFycltqXSA9PT0gaXRlbSkge1xuXHQgICAgICAgIGluZGV4ID0gajtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gaW5kZXg7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLml0ZW1NYXRjaCA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuXHQgIHZhciBtYXRjaGVkID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIGlmICghdGhpcy5pc0FycmF5KGFycikpIHtcblx0ICAgICAgcmV0dXJuIG1hdGNoZWQ7XG5cdCAgICB9XG5cdCAgICBtYXRjaGVkID0gYXJyLnNvbWUoZnVuY3Rpb24ocykge1xuXHQgICAgICByZXR1cm4gKHMgJiYgcy5sZW5ndGggPiAwKSAmJiBpdGVtLmluZGV4T2YocykgIT09IC0xO1xuXHQgICAgfSk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuXHQgICAgICBpZiAoaXRlbS5pbmRleE9mKGFycltqXSkgIT09IC0xKSB7XG5cdCAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG1hdGNoZWQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpc0FycmF5KG8pIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSkge1xuXHQgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAvQXJyYXkvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pKTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXHRcblx0ZnVuY3Rpb24gZmxhdChhcnIpIHtcblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgaWYgKGlzQXJyYXkoYXJyKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHYgPSBhcnJbaV07XG5cdCAgICAgIGlmIChpc0FycmF5KHYpKSB7XG5cdCAgICAgICAgLy/pgJLlvZLmiYHlubPljJbmlbDnu4Rcblx0ICAgICAgICBhcnJbaV0gPSBmbGF0KHYpO1xuXHQgICAgICAgIC8vIOmAkuW9kuWQjiDov57mjqXmlbDnu4Rcblx0ICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGFycltpXSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzdWx0LnB1c2godik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0ZXhwb3J0cy5mbGF0ID0gZmxhdDtcblxuLyoqKi8gfSksXG4vKiA1MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHRcblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1MikoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgY29sbGVjdF9leHAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKTtcblx0dmFyIGNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdC8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG5cdFxuXHQvLyDnlKjkuo7nm5HlkKxcblx0dmFyIFBBR0VfREFUQV9NQVAgPSB7fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIGlzU3RhcnQgPSAwO1xuXHQgIHZhciBpc0ZpcnN0VG91Y2ggPSAwO1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIGlmIChhcGx1cy5fYXBsdXNfYXV0b19leHApIHtcblx0ICAgIHJldHVybjtcblx0ICB9IGVsc2Uge1xuXHQgICAgYXBsdXMuX2FwbHVzX2F1dG9fZXhwID0ge1xuXHQgICAgICBoYXNoTWFwOiB7fVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHZhciBfY29uZmlnID0gW107XG5cdFxuXHQgIGZ1bmN0aW9uIHdhdGNoTWV0YUluZm8oY29udGV4dCwgaXNGaXJzdCwgd2F0Y2hUeXBlKSB7XG5cdCAgICB2YXIgaGFuZGxlck1ldGFJbmZvID0gZnVuY3Rpb24gKG1ldGFLZXksIG1ldGFWYWx1ZSkgeyAgIFxuXHQgICAgICBpZiAobWV0YUtleSA9PT0gJ2FwbHVzLWF1dG8tZXhwJykge1xuXHQgICAgICAgIHZhciBfY29uZmlnMiA9IGNvbmZpZy5nZXRBdXRvRXhwQ29uZmlnKG1ldGFWYWx1ZSk7XG5cdCAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KF9jb25maWcyKSA9PT0gSlNPTi5zdHJpbmdpZnkoX2NvbmZpZykpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgX2NvbmZpZyA9IF9jb25maWcyO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAobWV0YVZhbHVlICYmIF9jb25maWcgJiYgX2NvbmZpZy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICBjb2xsZWN0X2V4cC53YXRjaF9leHBvc3VyZShjb250ZXh0LCBfY29uZmlnLCBpc0ZpcnN0KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogd2F0Y2hUeXBlLCAvLyBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICAgIGFyZ3VtZW50czogWydzZXRNZXRhSW5mbycsIGhhbmRsZXJNZXRhSW5mb11cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW5pdEV4cCAoY29udGV4dCwgaXNGaXJzdCkge1xuXHQgICAgX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpO1xuXHQgICAgLy8gVGFyb+ahhuaetuWfuuS6jui/kOihjOaXtu+8jOiHquWKqOabneWFieS8muWHuueOsOiOt+WPluS4jeWIsOabneWFieWFg+e0oOeahOaDheWGtVxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgICAgY29sbGVjdF9leHAud2F0Y2hfZXhwb3N1cmUoY29udGV4dCwgX2NvbmZpZywgaXNGaXJzdCk7XG5cdCAgICB9LCAwKTtcblx0ICB9XG5cdFxuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ29uU2hvdycsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgICB3YXRjaE1ldGFJbmZvKG9wdC5jb250ZXh0LCAxLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUpO1xuXHQgICAgICAgIGlmIChpc1N0YXJ0ID09PSAwKSB7XG5cdCAgICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAxKTtcblx0ICAgICAgICAgIGlzU3RhcnQgPSAxO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAwKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHZhciBfY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgICAgICB2YXIgX3BhdGggPSBfY3VycmVudFBhZ2Uucm91dGUgfHwgX2N1cnJlbnRQYWdlLmlzO1xuXHQgICAgICAgICAgUEFHRV9EQVRBX01BUFtfcGF0aF0gPSBfcGF0aDsgLy8gSlNPTi5zdHJpbmdpZnkoX2N1cnJlbnRQYWdlLmRhdGEpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdFxuXHQgIGZ1bmN0aW9uIHJlc2V0QXV0b0V4cCAob3B0KSB7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgX2N1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuXHQgICAgICB2YXIgX3BhdGggPSBfY3VycmVudFBhZ2Uucm91dGUgfHwgX2N1cnJlbnRQYWdlLmlzO1xuXHQgICAgICB2YXIgX2RhdGEgPSBQQUdFX0RBVEFfTUFQW19wYXRoXTtcblx0ICAgICAgXG5cdCAgICAgIHZhciBfY3VycmVudERhdGEgPSBKU09OLnN0cmluZ2lmeShvcHQuZGF0YSk7XG5cdCAgICAgIGlmIChfZGF0YSAhPT0gX2N1cnJlbnREYXRhKSB7XG5cdCAgICAgICAgUEFHRV9EQVRBX01BUFtfcGF0aF0gPSBfY3VycmVudERhdGE7XG5cdCAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMCk7XG5cdCAgICAgIH0gIFxuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICB9XG5cdFxuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ29uQXBsdXNUb3VjaCcsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgICBpZiAoaXNGaXJzdFRvdWNoID09PSAwKSB7XG5cdCAgICAgICAgICBpc0ZpcnN0VG91Y2ggPSAxO1xuXHQgICAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJlc2V0QXV0b0V4cChvcHQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydvblBhZ2VEYXRhQ2hhbmdlZCcsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgIHJlc2V0QXV0b0V4cChvcHQpO1xuXHQgICAgICB9LCAyMDApO1xuXHQgICAgfV1cblx0ICB9KTtcblx0XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25IaWRlJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgIFBBR0VfREFUQV9NQVAgPSB7fTtcblx0ICAgICAgICBpc1N0YXJ0ID0gMDtcblx0ICAgICAgICBpc0ZpcnN0VG91Y2ggPSAwO1xuXHQgICAgICAgIHdhdGNoTWV0YUluZm8ob3B0LmNvbnRleHQsIDEsIGFwbHVzU3RhdGljLlVOU1VCU0NSSUJFKTtcblx0ICAgICAgICBjb2xsZWN0X2V4cC5jbGVhcigpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHRcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydvblVubG9hZCcsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgICBQQUdFX0RBVEFfTUFQID0ge307XG5cdCAgICAgICAgY29sbGVjdF9leHAuY2xlYXIoKTtcblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgX2NvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTQpO1xuXHR2YXIgY2xvbmVEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0dmFyIHdhdGNoVHJhY2tlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpO1xuXHR2YXIgZ2V0SGFzaEtleSA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgcmF4VXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHR2YXIgbWluaVV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHR2YXIgb2JzZXJ2ZXJzID0gW107XG5cdHZhciBjdHg7XG5cdFxuXHQvLyByZWxvYWRDdHgg55So5LqO5Y2V5YWD5rWL6K+V77yM5Y2V5rWL5Lit6ZyA6KaB5YiH5o2i5pSv5LuY5a6d44CB5b6u5L+h546v5aKD77yM5a6e6ZmF55Sf5Lqn546v5aKD55So5LiN5YiwXG5cdGV4cG9ydHMud2F0Y2hfZXhwb3N1cmUgPSBmdW5jdGlvbiAoY29udGV4dCwgY29uZiwgaXNGaXJzdCwgcmVsb2FkQ3R4KSB7XG5cdCAgaWYgKCFjdHggfHwgcmVsb2FkQ3R4KSB7XG5cdCAgICBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICB9XG5cdCAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuXHQgIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuXHQgIHZhciBkdXA7XG5cdCAgXG5cdCAgd2F0Y2hUcmFja2VyLndhdGNoUmVjb3JkKGNvbmYpO1xuXHQgIFxuXHQgIGZ1bmN0aW9uIHdhaXQgKGNvdW50KSB7XG5cdCAgICBpZiAoY291bnQgPCBjb25mLmxlbmd0aCkge1xuXHQgICAgICB2YXIgY29uZmlnID0gY29uZltjb3VudF07XG5cdCAgICAgIGR1cCA9IDA7XG5cdCAgICAgIG9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdCAgICAgICAgaWYgKGVsZW1lbnQuc3ViamVjdFswXSA9PT0gY29uZmlnLmNzc1NlbGVjdG9yICYmXG5cdCAgICAgICAgICBlbGVtZW50LnN1YmplY3RbMV0gPT09IGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgICAgICBkdXAgPSAxO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHZhciBzdWJqZWN0ID0gW2NvbmZpZy5jc3NTZWxlY3RvciwgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3JdO1xuXHQgICAgICBmdW5jdGlvbiBoYXNoaW5nIChjYWxsYmFjaykge1xuXHQgICAgICAgIHZhciBjc3NTZWxlY3RvciA9IHN1YmplY3RbMF07XG5cdCAgICAgICAgaWYgKGNzc1NlbGVjdG9yICYmICF1dGlsRGFzaC5pc1N0YXJ0V2l0aChzdWJqZWN0WzBdLCAnLicpKSB7XG5cdCAgICAgICAgICBjc3NTZWxlY3RvciA9ICcuJyArIGNzc1NlbGVjdG9yO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdmFyIGVsZW1lbnRzID0gY3R4LmNyZWF0ZVNlbGVjdG9yUXVlcnkoKS5zZWxlY3RBbGwoY3NzU2VsZWN0b3IpOyAgICAgICAgICBcblx0ICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudHMuZmllbGRzID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG5cdCAgICAgICAgICAgICAgZGF0YXNldDogdHJ1ZSxcblx0ICAgICAgICAgICAgICBpZDogdHJ1ZSxcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmV0KSB7XG5cdCAgICAgICAgICAgICAgLy8g6YWN572u5YyW5Z+L54K55YW85a6554K55L2N5peg5pWI5pe25LiN6Zi75aGe5pud5YWJ6Kej5p6QXG5cdCAgICAgICAgICAgICAgaWYgKHV0aWxBcnJheS5pc0FycmF5KHJldCkpIHtcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKHtcblx0ICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHJldCxcblx0ICAgICAgICAgICAgICAgICAgdHlwZTogJ0NPTU1PTidcblx0ICAgICAgICAgICAgICAgIH0pOyAgXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KS5leGVjKCk7ICBcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNvbnNvbGUud2Fybign6K+l5bmz5Y+w5LiN5pSv5oyB6Ieq5Yqo5pud5YWJJyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyB9XG5cdFxuXHQgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgY29uc29sZS53YXJuKCfor6XlubPlj7DkuI3mlK/mjIHoh6rliqjmm53lhYksIGVyciA9ICcsIGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGhhc2hpbmcoZnVuY3Rpb24gKG9wdHMpIHtcblx0ICAgICAgICAvLyB2YXIgdHlwZSA9IG9wdHMudHlwZTtcblx0ICAgICAgICBpZiAoZHVwID09PSAwIHx8IGlzRmlyc3QgPT09IDApIHtcblx0ICAgICAgICAgIHZhciBuZXdPYnNlcnZlciA9IGluaXRPYnNlcnZlcihjb250ZXh0KTtcblx0ICAgICAgICAgIG5ld09ic2VydmVyLnN1YmplY3QgPSBzdWJqZWN0O1xuXHQgICAgICAgICAgb2JzZXJ2ZXJzLnB1c2gobmV3T2JzZXJ2ZXIpO1xuXHQgICAgICAgICAgLy8g5pu05pawaGFzaG1hcFxuXHQgICAgICAgICAgZWFjaChvcHRzLmVsZW1lbnRzLGZ1bmN0aW9uKGl0ZW0saW5kZXgpe1xuXHQgICAgICAgICAgICBpdGVtLmluZGV4ID0gKGluZGV4KzEpICsgJyc7XG5cdCAgICAgICAgICAgIGlmICghY2hlY2tJc0luSGFzaE1hcChpdGVtLCBjb25maWcpKSB7XG5cdCAgICAgICAgICAgICAgdXBkYXRlSGFzaE1hcChpdGVtLCBjb25maWcpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGFkZE9ic2VydmUobmV3T2JzZXJ2ZXIsIGNvbmZpZywgZnVuY3Rpb24gKGVudHJ5LCBfY29uZmlnKSB7XG5cdCAgICAgICAgICAgIG1pbmlVdGlsLmdldEluZGV4QnlSZWN0KF9jb25maWcuY3NzU2VsZWN0b3IsZW50cnkuYm91bmRpbmdDbGllbnRSZWN0LGZ1bmN0aW9uKGluZGV4KXtcblx0ICAgICAgICAgICAgICB2YXIgX2luZGV4ID0gaW5kZXggKyAxO1xuXHQgICAgICAgICAgICAgIGlmIChfaW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBfZW50cnkgPSBjbG9uZURlZXAoZW50cnkpO1xuXHQgICAgICAgICAgICAgICAgX2VudHJ5LmluZGV4ID0gJycgKyBfaW5kZXg7XG5cdCAgICAgICAgICAgICAgICB2YXIgZGF0YXNldCA9IGNsb25lRGVlcChfZW50cnkuZGF0YXNldCk7XG5cdCAgICAgICAgICAgICAgICB1cGRhdGVIYXNoTWFwKHtcblx0ICAgICAgICAgICAgICAgICAgaWQ6IF9lbnRyeS5pZCxcblx0ICAgICAgICAgICAgICAgICAgaW5kZXg6IF9lbnRyeS5pbmRleCxcblx0ICAgICAgICAgICAgICAgICAgZGF0YXNldDogZGF0YXNldCxcblx0ICAgICAgICAgICAgICAgIH0sIF9jb25maWcpO1xuXHQgICAgICAgICAgICAgICAgZXhwb3N1cmVIYW5kbGUoX2VudHJ5LCBkYXRhc2V0LCBjb25maWcpOyAgXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB3YWl0KCsrY291bnQpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgd2FpdCgwKTtcblx0XG5cdCAgZnVuY3Rpb24gY2hlY2tJc0luSGFzaE1hcCAoZWxlbWVudCwgY29uZmlnKSB7XG5cdCAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZWxlbWVudCwgY29uZmlnKTtcblx0ICAgIHZhciBpbmRleCA9IGVsZW1lbnQuaW5kZXg7XG5cdCAgICBpZiAoX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0pIHtcblx0ICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0uZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG5cdCAgICAgICAgaWYgKGVsZW1lbnQuaGFzaF92YWx1ZSA9PT0gaGFzaCAmJiBlbGVtZW50LmluZGV4ID09PSBpbmRleCkge1xuXHQgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtcyB7T2JqZWN0fSBlIHtcblx0ICAgKiAgIGlkLCBkYXRhc2V0LCBwb3NpdGlvblxuXHQgICAqIH1cblx0ICAgKi9cblx0ICBmdW5jdGlvbiB1cGRhdGVIYXNoTWFwKGUsIGNvbmZpZykge1xuXHQgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGUsIGNvbmZpZyk7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgaW5kZXggPSBlLmluZGV4O1xuXHQgICAgICBpZiAoX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0pIHtcblx0ICAgICAgICB2YXIgZXhpc3QgPSAwO1xuXHQgICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuXHQgICAgICAgICAgaWYgKGVsZW1lbnQuaGFzaF92YWx1ZSA9PT0gaGFzaCkge1xuXHQgICAgICAgICAgICBleGlzdCA9IDE7XG5cdCAgICAgICAgICAgIGlmIChlLmlkKSBlbGVtZW50LmlkID0gZS5pZDtcblx0ICAgICAgICAgICAgaWYgKGUuZGF0YXNldCkgZWxlbWVudC5kYXRhc2V0ID0gZS5kYXRhc2V0O1xuXHQgICAgICAgICAgICBpZiAoZS5zdGF0dXMpIGVsZW1lbnQuc3RhdHVzID0gZS5zdGF0dXM7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgaWYgKCFleGlzdCkge1xuXHQgICAgICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0ucHVzaCh7XG5cdCAgICAgICAgICAgIGlkOiBlLmlkLFxuXHQgICAgICAgICAgICBoYXNoX3ZhbHVlOiBoYXNoLFxuXHQgICAgICAgICAgICBzdGF0dXM6IDAsXG5cdCAgICAgICAgICAgIGV4cENvbmZpZzogY29uZmlnLFxuXHQgICAgICAgICAgICBkYXRhc2V0OiBlLmRhdGFzZXQsXG5cdCAgICAgICAgICAgIGluZGV4OiBpbmRleFxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldID0gW3tcblx0ICAgICAgICAgIGlkOiBlLmlkLFxuXHQgICAgICAgICAgaGFzaF92YWx1ZTogaGFzaCxcblx0ICAgICAgICAgIHN0YXR1czogMCxcblx0ICAgICAgICAgIGV4cENvbmZpZzogY29uZmlnLFxuXHQgICAgICAgICAgZGF0YXNldDogZS5kYXRhc2V0LFxuXHQgICAgICAgICAgaW5kZXg6IGluZGV4XG5cdCAgICAgICAgfV07XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgY29uc29sZS5sb2coJ2Vycm9yID09PSAnLCBlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGluaXRPYnNlcnZlcihjb250ZXh0KSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgdGhyZXNob2xkczogW19jb25maWcuQVVUT19BVF9WSUVXX1JBVEVdLFxuXHQgICAgICBpbml0aWFsUmF0aW86IDBcblx0ICAgIH07XG5cdCAgICB2YXIgaXNNWSA9IGZhbHNlO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgaWYgKG15KSB7XG5cdCAgICAgICAgaXNNWSA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICBpZiAoaXNNWSkge1xuXHQgICAgICAvLyDomoLomoHnmoTmm53lhYnnm5HlkKzlkozlvq7kv6HkuI3kuIDoh7TvvIxodHRwczovL2RldmVsb3BlcnMud2VpeGluLnFxLmNvbS9taW5pcHJvZ3JhbS9kZXYvYXBpL3d4bWwvd3guY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIuaHRtbFxuXHQgICAgICAvLyBodHRwczovL29wZW5kb2NzLmFsaXBheS5jb20vbWluaS9hcGkvaW50ZXJzZWN0aW9ub2JzZXJ2ZXJcblx0ICAgICAgb3B0aW9ucy5zZWxlY3RBbGwgPSB0cnVlO1xuXHQgICAgICByZXR1cm4gY3R4LmNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyKG9wdGlvbnMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3B0aW9ucy5vYnNlcnZlQWxsID0gdHJ1ZTtcblx0ICAgICAgcmV0dXJuIGN0eC5jcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlcihjb250ZXh0LCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGFkZE9ic2VydmUob2JzZXJ2ZXIsIGNvbmZpZywgY2FsbGJhY2spIHtcblx0ICAgIHZhciBjc3MgPSBjb25maWcuY3NzU2VsZWN0b3I7XG5cdCAgICBpZiAoY3NzICYmICF1dGlsRGFzaC5pc1N0YXJ0V2l0aChjc3MsICcuJykpIHtcblx0ICAgICAgY3NzID0gJy4nICsgY3NzO1xuXHQgICAgfVxuXHQgICAgaWYgKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgIG9ic2VydmVyLnJlbGF0aXZlVG8oY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpLm9ic2VydmUoY3NzLCBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGNhbGxiYWNrKHJlcywgY29uZmlnKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3JNZXNzYWdlOiAnLCBlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb2JzZXJ2ZXIucmVsYXRpdmVUb1ZpZXdwb3J0KCkub2JzZXJ2ZShjc3MsIGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgY2FsbGJhY2socmVzLCBjb25maWcpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvck1lc3NhZ2U6ICcsIGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBleHBvc3VyZUhhbmRsZSAoZW50cnksIGRhdGFzZXQsIGNvbmZpZykge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgZXhwb3N1cmVUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgICB2YXIgZXhwRWxlbWVudHMgPSBjaGVja1N0YXJ0KGV4cG9zdXJlVGltZSwgZW50cnksIGNvbmZpZyk7XG5cdFxuXHQgICAgaWYgKGV4cEVsZW1lbnRzICYmIGV4cEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIGVsZW1lbnQgPSBleHBFbGVtZW50c1swXTtcblx0XG5cdCAgICAgIHZhciBzcG1EYXRhID0ge307XG5cdCAgICAgIHZhciBfc3BtRGF0YSA9IHV0aWwuanNvbkxpa2VTdHIySlNPTihkYXRhc2V0LnRyYWNrZXJQYXJhbXMgfHwge30pIHx8IHt9O1xuXHQgICAgICB2YXIgX2luZGV4ID0gZWxlbWVudC5pbmRleDtcblx0ICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgIHNwbURhdGEgPSBjbG9uZURlZXAoYXBsdXMuXyQuc3BtLmRhdGEgfHwge30pO1xuXHQgICAgICAgIGlmIChyYXhVdGlsLmlzUmF4KCkpIHtcblx0ICAgICAgICAgIHZhciBkb21EYXRhU2V0ID0gcmF4VXRpbC5nZXREYXRhU2V0KGNvbmZpZyxfaW5kZXgtMSk7XG5cdCAgICAgICAgICB2YXIgYyA9IGRvbURhdGFTZXQuc3BtQyB8fCBjb25maWcuc3BtQyB8fCAnMCc7XG5cdCAgICAgICAgICB2YXIgZCA9IGRvbURhdGFTZXQuc3BtRCB8fCBjb25maWcuc3BtRCB8fCAnMCc7XG5cdCAgICAgICAgICBzcG1EYXRhLmMgPSBjO1xuXHQgICAgICAgICAgc3BtRGF0YS5kID0gZDtcblx0ICAgICAgICAgIC8vIOihpeWFhSByYXggZGF0YS0qIOWxnuaAp1xuXHQgICAgICAgICAgZGF0YXNldCA9IE9iamVjdC5hc3NpZ24oZGF0YXNldCwgZG9tRGF0YVNldCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIOWPlmRhdGEtdHJhY2tlciDmiJYgY3NzU2VsZWN0b3Jcblx0ICAgICAgICAgIHZhciBzcG1DID0gZGF0YXNldC50cmFja2VyIHx8IGNvbmZpZy5jc3NTZWxlY3Rvci5yZXBsYWNlKC9cXCd8XFxcInxcXDt8XFw6fFxcPXxcXFt8XFxdfFxcLnxcXCN8XFwtfFxcL3xcXHwvZywgJycpOyAvLyDljrvmjonnibnmrorlrZfnrKZcblx0ICAgICAgICAgIC8vIOabneWFieinpuWPkeeahHNwbeS4jeaxoeafk+WFqOWxgGFwbHVzLl8kLnNwbS5kYXRh77yM5pWF6L+Z6YeM5YGa5rex5ou36LSdXG5cdCAgICAgICAgICBzcG1EYXRhLmMgPSBzcG1DO1xuXHQgICAgICAgICAgaWYgKHNwbURhdGEuYyAmJiBzcG1EYXRhLmMgIT09ICcwJykge1xuXHQgICAgICAgICAgICB2YXIgc3BtRCA9ICdkJyArIF9pbmRleDtcblx0ICAgICAgICAgICAgc3BtRGF0YS5kID0gc3BtRDtcblx0ICAgICAgICAgIH0gIFxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSkge1xuXHQgICAgICAgICAgc3BtRGF0YS5iID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgXG5cdCAgICAgICAgaWYgKGNvbmZpZy5zcG1DKSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmMgPSBjb25maWcuc3BtQztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3BtRGF0YS5jID0gX3NwbURhdGEuc3BtQyA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1DKSA6ICcnO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGNvbmZpZy5zcG1EKSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmQgPSBfaW5kZXggPyBjb25maWcuc3BtRCArICdfJyArIF9pbmRleCA6IGNvbmZpZy5zcG1EO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmQgPSBfc3BtRGF0YS5zcG1EID8gZW5jb2RlVVJJQ29tcG9uZW50KF9zcG1EYXRhLnNwbUQpIDogJyc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHdhdGNoVHJhY2tlci5wdXNoRXZlbnQoJ0VYUCcsIGRhdGFzZXQsIGNvbmZpZywgT2JqZWN0LmFzc2lnbih7fSwgZW50cnksIHtcblx0ICAgICAgICB4OiBlbGVtZW50LngsXG5cdCAgICAgICAgeTogZWxlbWVudC55LFxuXHQgICAgICAgIHdpZHRoOiBlbGVtZW50LndpZHRoLFxuXHQgICAgICAgIGhlaWdodDogZWxlbWVudC5oZWlnaHQsXG5cdCAgICAgICAgaGFzaF92YWx1ZTogZWxlbWVudC5oYXNoX3ZhbHVlXG5cdCAgICAgIH0pLCBzcG1EYXRhKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNoZWNrU3RhcnQgKGV4cG9zdXJlVGltZSwgZW50cnksIGNvbmZpZykge1xuXHQgICAgLy8gdmFyIHNpemUgPSAwO1xuXHQgICAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuXHQgICAgdmFyIF9oYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLmhhc2hNYXAgfHwge307ICAgIFxuXHQgICAgdmFyIHRlbXBzID0gW107XG5cdCAgICBmb3IgKHZhciBsb2drZXkgaW4gX2hhc2hNYXApIHtcblx0ICAgICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVfcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIC8vIHZhciBzdHJpbmcgPSBjb25maWcubG9na2V5ICsgJ18nICsgY29uZmlnLmNzc1NlbGVjdG9yICsgJ18nXG5cdCAgICAgICAgLy8gICAgICAgICAgICAgICsgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IgKyAnXycgKyBvcHRzLmlkICsgSlNPTi5zdHJpbmdpZnkob3B0cy5kYXRhc2V0KTtcblx0ICAgICAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZW50cnksIGNvbmZpZyk7XG5cdCAgICAgICAgdmFyIHYgPSBlbGVfc1tpXSB8fCB7fTtcblx0ICAgICAgICBpZiAodi5zdGF0dXMgPT09IDAgJiYgdi5leHBDb25maWcgJiYgaGFzaCA9PT0gdi5oYXNoX3ZhbHVlKSB7XG5cdCAgICAgICAgICB2YXIgX2VsZVBvcyA9IGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdCB8fCB7fTtcblx0ICAgICAgICAgIGlmIChfZWxlUG9zLndpZHRoICYmIF9lbGVQb3MuaGVpZ2h0KSB7XG5cdCAgICAgICAgICAgIHYuZGF0YXNldCA9IGVudHJ5LmRhdGFzZXQ7XG5cdCAgICAgICAgICAgIHYueCA9IF9lbGVQb3MubGVmdDtcblx0ICAgICAgICAgICAgdi55ID0gX2VsZVBvcy50b3A7XG5cdCAgICAgICAgICAgIHYud2lkdGggPSBfZWxlUG9zLndpZHRoO1xuXHQgICAgICAgICAgICB2LmhlaWdodCA9IF9lbGVQb3MuaGVpZ2h0O1xuXHQgICAgICAgICAgICB2LnNpemUgPSBfZWxlUG9zLndpZHRoICogX2VsZVBvcy5oZWlnaHQ7XG5cdCAgICAgICAgICAgIC8vIFJheOahhuaetuWGhe+8jOa3mOWuneWwj+eoi+W6jyDpgJrov4cgdGhyZXNob2xkcywgb2JzZXJ2ZXIub2JzZXJ2ZSDmsqHmnIljYWxsYmFja+i/lOWbnu+8jOWboOatpOaUueaIkOm7mOiupOWAvOS4ujBcblx0ICAgICAgICAgICAgdmFyIGRlZmF1bHRSYXRpbyA9IF9jb25maWcuQVVUT19BVF9WSUVXX1JBVEU7XG5cdCAgICAgICAgICAgIGlmIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+PSBkZWZhdWx0UmF0aW8pIHtcblx0ICAgICAgICAgICAgICB2LmV4cG9zdXJlVGltZSA9IGV4cG9zdXJlVGltZTtcblx0ICAgICAgICAgICAgICB2LnN0YXR1cyA9IDE7IC8vIOabneWFieeKtuaAgVxuXHQgICAgICAgICAgICAgIHRlbXBzLnB1c2godik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0ZW1wcztcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLnJlc2V0ID0gZnVuY3Rpb24gKCkge307XG5cdFxuXHRleHBvcnRzLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHdhdGNoVHJhY2tlci5jbGVhclJlY29yZCgpO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBvYnNlcnZlcnNbaV0uZGlzY29ubmVjdCgpO1xuXHQgIH1cblx0ICBvYnNlcnZlcnMgPSBbXTtcblx0ICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG5cdCAgdmFyIF9oYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLmhhc2hNYXAgfHwge307XG5cdCAgZm9yICh2YXIgbG9na2V5IGluIF9oYXNoTWFwKSB7XG5cdCAgICBkZWxldGUgX2hhc2hNYXBbbG9na2V5XTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciB1dGlsTWV0YSA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdGV4cG9ydHMuREFUQV9BUExVU19BRV9LRVkgPSAnZGF0YS1hcGx1cy1hZSc7XG5cdGV4cG9ydHMuREFUQV9BUExVU19BQ19LRVkgPSAnZGF0YS1hcGx1cy1jbGsnO1xuXHRleHBvcnRzLkRBVEFfQVBMVVNfU1BNX0FOQ0hPUl9JRF9LRVkgPSAnZGF0YS1zcG0tYW5jaG9yLWlkJztcblx0ZXhwb3J0cy5EQVRBX0FQTFVTX1ZUX0lURU1fSU5ERVhfS0VZID0gJ2RhdGEtYXBsdXMtdnQtcG9zJztcblx0XG5cdC8vIOS4jeaUr+aMgW9ic2VydmVy55qE5oOF5Ya15LiL77yM6L2u6K+i6Ze06ZqU77yIbXMpXG5cdGV4cG9ydHMuTE9PUF9USU1FID0gMTAwMDtcblx0XG5cdGV4cG9ydHMuZ2V0RGVmYXVsdFJlcXVlc3RDZmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIG1ldGhvZDogJ1BPU1QnLFxuXHQgICAgcGtnU2l6ZTogMTBcblx0ICB9O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0TWV0YVZhbHVlIChrZXkpIHtcblx0ICBpZiAoYXBsdXMgJiYgYXBsdXMuZ2V0TWV0YUluZm8pIHtcblx0ICAgIHJldHVybiBhcGx1cy5nZXRNZXRhSW5mbyhrZXkpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gdXRpbE1ldGEuZ2V0TWV0YUNudChrZXkpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8g6Ieq5Yqo5pud5YWJ5omT54K5IC0g5Yik5a6a5Y+v6KeG55qE5q+U5L6L546HXG5cdHZhciBnZXRBdXRvRXhwVmlld1JhdGUgPSBmdW5jdGlvbihkZWZhdWx0X3ZhbHVlKSB7XG5cdCAgdmFyIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgdmlzaWJsZV9yYXRlID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC12aXNpYmxlJyk7XG5cdCAgICBpZiAodmlzaWJsZV9yYXRlKSB7XG5cdCAgICAgIHJhdGUgPSBwYXJzZUZsb2F0KHZpc2libGVfcmF0ZSk7XG5cdCAgICB9XG5cdCAgICBpZiAocmF0ZSA8PSAwKSB7XG5cdCAgICAgIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiByYXRlO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5BVVRPX0FUX1ZJRVdfUkFURSA9IGdldEF1dG9FeHBWaWV3UmF0ZSgwLjMpO1xuXHRcblx0Ly8gdmFyIEVYUF9ERUJPVU5DRV9EVVJBVElPTiA9IDEwMDsgLy8gZGVib3VjZSBkdXJhdGlvbiAxMDBtc1xuXHRcblx0LyoqXG5cdCAqIOacieaViOabneWFieaXtumVv+W6lee6vyAtIOavq+enkuaVsChtcylcblx0ICogQHBhcmFtcyB7TnVtYmVyfSBkZWZhdWx0X3ZhbHVlIGlzIDMwMG1zXG5cdCAqIEByZXR1cm4ge051bWJlcn0gZHVyYXRpb25cblx0ICovXG5cdHZhciBnZXRBdXRvRXhwRHVyYXRpb24gPSBmdW5jdGlvbihkZWZhdWx0X3ZhbHVlKSB7XG5cdCAgdmFyIGR1cmF0aW9uID0gZGVmYXVsdF92YWx1ZTtcblx0ICB0cnkge1xuXHQgICAgdmFyIHRtcF9kdXJhdGlvbiA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtZHVyYXRpb24nKTtcblx0ICAgIHZhciBkdXJhdGlvbl9uID0gcGFyc2VJbnQodG1wX2R1cmF0aW9uKTtcblx0ICAgIGlmICgoZHVyYXRpb25fbiArICcnKSAhPT0gJ05hTicpIHtcblx0ICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbl9uO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSkge1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gZHVyYXRpb247XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLkVYUF9EVVJBVElPTiA9IGdldEF1dG9FeHBEdXJhdGlvbigzMDApOyAvL+m7mOiupDMwMG1zXG5cdFxuXHQvLyBkZWJvdWNlIGR1cmF0aW9uIDEwMG1zXG5cdC8vIGV4cG9ydHMuZ2V0RGVib3VuY2VEdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcblx0Ly8gICByZXR1cm4gRVhQX0RFQk9VTkNFX0RVUkFUSU9OO1xuXHQvLyB9O1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPluiHquWKqOabneWFiemFjee9rumhue+8jOW5tuWwhmZpbHRlcuOAgXRhZ+WSjGNzc1NlbGVjdG9y5ZCI5bm25Li6ZWxlbWVudFNlbGVjdG9yXG5cdCAqIFRPRE8gSlNPTi5wYXJzZSDku4XmlK/mjIFJRTjlj4rku6XkuIrmtY/op4jlmaggPT4ganMgYXBpXG5cdCAqIEBwYXJhbXMga2V5IHtTdHJpbmd9ICdhcGx1cy1hdXRvLWV4cCcvJ2FwbHVzLWF1dG8tY2xrJ1xuXHQgKiBAcmV0dXJuIHtBcnJheX0gW3tcblx0ICogICAgbG9na2V5OiAvYS5iLmMxLFxuXHQgKiAgICBlbGVtZW50U2VsZWN0b3I6ICdkaXZbc2NtPTEyMzRdJyxcblx0ICogICAgdGFnOiBkaXYsXG5cdCAqICAgIGZpbHRlcjogc2NtPTEyMzRcblx0ICogICAgcG9zaXRpb25TZWxlY3RvcjogdHJ1ZS8ucGFyZW50Q2xhc3NuYW1lIC8vIOebuOWvueWumuS9jeS4muWKoeWfi+eCuVxuXHQgKiB9LCB7XG5cdCAqICAgIGxvZ2tleTogL2EuYi5jMixcblx0ICogICAgZWxlbWVudFNlbGVjdG9yOiAncFtzY209MjM0NV0ub25lJyxcblx0ICogICAgdGFnOiBwLFxuXHQgKiAgICBmaWx0ZXI6IHNjbT0yMzQ1LFxuXHQgKiAgICBjc3NTZWxlY3RvcjogLm9uZVxuXHQgKiB9LCB7XG5cdCAqICAgIGxvZ2tleTogL2EuYi5jMyxcblx0ICogICAgZWxlbWVudFNlbGVjdG9yOiAncFtkYXRhLXNwbS1jbGlja10nLFxuXHQgKiAgICB0YWc6IHAsXG5cdCAqICAgIGZpbHRlcjogZGF0YS1zcG0tY2xpY2tcblx0ICogfV1cblx0ICovXG5cdHZhciBnZXRBdXRvQ29uZmlnID0gZnVuY3Rpb24oY29uZmlnS2V5LCBtZXRhT2JqKSB7XG5cdCAgdmFyIGNvbmZpZ3MgPSBbXTtcblx0ICAvLyB2YXIgdG1wX2xvZ2tleXMgPSBbXTtcblx0ICB2YXIgdG1wX3RhZ19maWx0ZXIgPSBbXTtcblx0ICB2YXIgYXBsdXNBdXRvRXhwO1xuXHQgIHRyeSB7XG5cdCAgICBhcGx1c0F1dG9FeHAgPSBtZXRhT2JqIHx8IGdldE1ldGFWYWx1ZShjb25maWdLZXkpO1xuXHQgICAgdmFyIHRlbXBzID0gW107XG5cdCAgICBpZiAoYXBsdXNBdXRvRXhwICYmIHR5cGVvZiBhcGx1c0F1dG9FeHAgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdGVtcHMgPSBKU09OLnBhcnNlKGFwbHVzQXV0b0V4cCk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0ZW1wcyA9IEpTT04ucGFyc2UoYXBsdXNBdXRvRXhwLnJlcGxhY2UoLycvZywgJ1wiJykpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcGx1c0F1dG9FeHAgPT09ICdvYmplY3QnICYmIGFwbHVzQXV0b0V4cC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcblx0ICAgICAgdGVtcHMgPSBhcGx1c0F1dG9FeHA7XG5cdCAgICB9XG5cdCAgICBpZiAodGVtcHMgJiYgdGVtcHMuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgdG1wID0gdGVtcHNbaV0gfHwge307XG5cdCAgICAgICAgdmFyIGxvZ2tleSA9IHRtcC5sb2drZXkgfHwgJyc7XG5cdCAgICAgICAgdmFyIHRhZyA9IHRtcC50YWcgPyB0bXAudGFnIDogJyc7XG5cdCAgICAgICAgdmFyIGZpbHRlciA9IHRtcC5maWx0ZXI7XG5cdCAgICAgICAgdmFyIGNzc1NlbGVjdG9yID0gdG1wLmNzc1NlbGVjdG9yO1xuXHQgICAgICAgIHZhciB3aG9sZVNlbGVjdG9yID0gY3NzU2VsZWN0b3IgfHwgKHRhZyAmJiBmaWx0ZXIpO1xuXHQgICAgICAgIGlmICghbG9na2V5IHx8ICF3aG9sZVNlbGVjdG9yKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCAnICsgSlNPTi5zdHJpbmdpZnkodG1wKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIDIwMTctMTEtMjMg5omL5reY5o6l5YWl5ZKMbGF6YWRh5Lia5Yqh6ZyA5rGC77yM5YWB6K64bG9na2V56YeN5aSNXG5cdCAgICAgICAgLy8gaWYgKHV0aWxBcnJheS5pbmRleG9mKHRtcF9sb2drZXlzLCBsb2drZXkpID4gLTEpIHtcblx0ICAgICAgICAvLyAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsIGxvZ2tleSAnICsgbG9na2V5ICsgJyByZXBlYXRlZCcpO1xuXHQgICAgICAgIC8vIH1cblx0ICAgICAgICBmaWx0ZXIgPSB0eXBlb2YgZmlsdGVyID09PSAnc3RyaW5nJyA/IGZpbHRlci5zcGxpdChcIj1cIikgOiBbXTtcblx0ICAgICAgICB2YXIgdGFnX2ZpbHRlciA9IHRhZztcblx0ICAgICAgICBpZiAoZmlsdGVyLmxlbmd0aCA+PSAyKSB7XG5cdCAgICAgICAgICB0YWdfZmlsdGVyICs9ICdbJyArIGZpbHRlci5zaGlmdCgpICsgJz1cIicgKyBkZWNvZGVVUklDb21wb25lbnQoZmlsdGVyLmpvaW4oJycpKSArICdcIl0nO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLmxlbmd0aCA9PSAxICYmIGZpbHRlclswXSkge1xuXHQgICAgICAgICAgdGFnX2ZpbHRlciArPSAnWycgKyBkZWNvZGVVUklDb21wb25lbnQoZmlsdGVyWzBdKSArICddJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGNzc1NlbGVjdG9yKSB7XG5cdCAgICAgICAgICB0YWdfZmlsdGVyICs9IGNzc1NlbGVjdG9yO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdG1wLmVsZW1lbnRTZWxlY3RvciA9IHRhZ19maWx0ZXI7XG5cdCAgICAgICAgaWYgKHV0aWxBcnJheS5pbmRleG9mKHRtcF90YWdfZmlsdGVyLCB0YWdfZmlsdGVyKSA+IC0xKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCB0YWdfZmlsdGVyX2Nzc1NlbGVjdG9yICcgKyB0YWdfZmlsdGVyICsgJyByZXBlYXRlZCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyB0bXBfbG9na2V5cy5wdXNoKGxvZ2tleSk7XG5cdCAgICAgICAgdG1wX3RhZ19maWx0ZXIucHVzaCh0YWdfZmlsdGVyKTtcblx0ICAgICAgICBjb25maWdzLnB1c2godG1wKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgLy8gVE9ETyDnm5Hmjqfov5nlnZflhoXlrrlcblx0ICAgIHVsb2coKS53KGVycik7XG5cdCAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAvLyAgIG1zZzogZXJyXG5cdCAgICAvLyB9KTtcblx0ICB9IGZpbmFsbHkge1xuXHQgICAgcmV0dXJuIGNvbmZpZ3M7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPluabneWFieiHquWKqOmHh+mbhueahOmFjee9rumhuVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRBdXRvRXhwQ29uZmlnID0gZnVuY3Rpb24obWV0YU9iaikge1xuXHQgIHJldHVybiBnZXRBdXRvQ29uZmlnKCdhcGx1cy1hdXRvLWV4cCcsIG1ldGFPYmopIHx8IFtdO1xuXHR9O1xuXHQvKipcblx0ICog6I635Y+W5pud5YWJ6Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG5cdCAqL1xuXHRleHBvcnRzLmdldEF1dG9FeHBVc2VyRm4gPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYWVBdXRvVXNlckZuID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC11c2VyZm4nKTtcblx0ICBpZiAoYWVBdXRvVXNlckZuKSB7XG5cdCAgICB2YXIgZm4gPSB3aW5kb3dbYWVBdXRvVXNlckZuXSB8fCBhZUF1dG9Vc2VyRm47XG5cdCAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHJldHVybiBmbjtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG51bGw7XG5cdH07XG5cdFxuXHQvLyA8bWV0YSBuYW1lPVwiYXBsdXMtYXV0by1leHAtd2F0Y2hkb21cIiBjb250ZW50PVwidGhyb3R0bGVcIiAvPlxuXHRleHBvcnRzLmlzVGhyb3R0bGVXYXRjaERvbSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgcnMgPSBmYWxzZTtcblx0ICB0cnkge1xuXHQgICAgcnMgPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLXdhdGNoZG9tJykgPT09ICd0aHJvdHRsZSc7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgIH1cblx0ICByZXR1cm4gcnM7XG5cdH07XG5cdC8qKlxuXHQgKiDojrflj5bngrnlh7voh6rliqjph4fpm4bnmoTphY3nva7poblcblx0ICovXG5cdGV4cG9ydHMuZ2V0QXV0b0Nsa0NvbmZpZyA9IGZ1bmN0aW9uKG1ldGFPYmopIHtcblx0ICByZXR1cm4gZ2V0QXV0b0NvbmZpZygnYXBsdXMtYXV0by1jbGsnLCBtZXRhT2JqKSB8fCBbXTtcblx0fTtcblx0LyoqXG5cdCAqIOiOt+WPlueCueWHu+iHquWKqOmHh+mbhueahOmFjee9rumhuVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRBdXRvQ2xrVXNlckZuID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFjQXV0b1VzZXJGbiA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1jbGstdXNlcmZuJyk7XG5cdCAgaWYoIGFjQXV0b1VzZXJGbiApe1xuXHQgICAgdmFyIGZuID0gd2luZG93W2FjQXV0b1VzZXJGbl0gfHwgYWNBdXRvVXNlckZuO1xuXHQgICAgaWYoIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyApe1xuXHQgICAgICByZXR1cm4gZm47XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBudWxsO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOaTjeS9nG1ldGHnmoTlt6Xlhbfnsbtcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2hlYWRfbm9kZTtcblx0dmFyIF9tZXRhX25vZGVzO1xuXHRcblx0dmFyIHV0aWxBdHRyaWJ1dGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTtcblx0LyoqXG5cdCAqIOWPluW+l+mhtemdouS4iiBoZWFkIOS4reeahOaJgOaciSBtZXRhIOWFg+e0oFxuXHQgKiBAcGFyYW0gW2ZvcmNlXSB7Ym9vbGVhbn0g5piv5ZCm5by65Yi26I635Y+W5paw5YaF5a65XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRNZXRhVGFncyhmb3JjZSkge1xuXHQgIF9oZWFkX25vZGUgPSBfaGVhZF9ub2RlIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG5cdFxuXHQgIGlmIChfbWV0YV9ub2RlcyAmJiAhZm9yY2UpIHtcblx0ICAgIHJldHVybiBfbWV0YV9ub2Rlcztcblx0ICB9XG5cdFxuXHQgIHJldHVybiBfaGVhZF9ub2RlID8gKF9tZXRhX25vZGVzID0gX2hlYWRfbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbWV0YScpKSA6IFtdO1xuXHR9O1xuXHRleHBvcnRzLmdldE1ldGFUYWdzID0gZ2V0TWV0YVRhZ3M7XG5cdFxuXHQvKipcblx0ICog5Y+W5b6XIGhlYWQgLyBtZXRhIOS4reaMh+WumiBtZXRhIOeahCAoYXR0ciB8fCBjb250ZW50KSDlgLxcblx0ICogPG1ldGEgbmFtZT1cImFwbHVzLXRlcm1pbmFsXCIgY29udGVudD1cIjFcIj5cblx0ICovXG5cdGZ1bmN0aW9uIGdldE1ldGFDbnQobmFtZSwgYXR0cikge1xuXHQgIHZhciBpO1xuXHQgIHZhciBtZXRhO1xuXHQgIHZhciBtZXRhX25vZGVzID0gZ2V0TWV0YVRhZ3MoKTtcblx0ICB2YXIgbCA9IG1ldGFfbm9kZXMubGVuZ3RoO1xuXHQgIHZhciBjb250ZW50O1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBtZXRhID0gbWV0YV9ub2Rlc1tpXTtcblx0ICAgIGlmICh1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsICduYW1lJykgPT09IG5hbWUpIHtcblx0ICAgICAgY29udGVudCA9IHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobWV0YSwgYXR0ciB8fCAnY29udGVudCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGNvbnRlbnQgfHwgJyc7XG5cdH07XG5cdGV4cG9ydHMuZ2V0TWV0YUNudCA9IGdldE1ldGFDbnQ7XG5cdFxuXHRcblx0LyoqXG5cdCAqIOehruWumiBoZWFkIC8gbWV0YSDkuK3nmoQgaXNvbmVwYWdlIOeahOaVsOaNrlxuXHQgKiDlvaLlpoLvvJpcblx0ICogPG1ldGEgbmFtZT1cImlzb25lcGFnZVwiIGNvbnRlbnQ9XCIwXCIgLz4g6KGo56S65LiN5pivb25lcGFnZVxuXHQgKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjF8aHR0cDovL2g1Lm0udGFvYmFvLmNvbS93ZS9pbmRleC5odG0jZGV0YWlsXCIgLz4g6KGo56S65pivb25lcGFnZVxuXHQgKi9cblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ZnVuY3Rpb24gZ2V0T25lUGFnZUluZm8obWV0YUluZm8pIHtcblx0ICB2YXIgb2JqID0ge1xuXHQgICAgaXNvbmVwYWdlOiAnLTEnLFxuXHQgICAgdXJscGFnZW5hbWU6ICcnXG5cdCAgfTtcblx0ICB2YXIgbWV0YV9pbmZvID0gbWV0YUluZm8ucUdldCgpO1xuXHQgIGlmIChtZXRhX2luZm8gJiYgbWV0YV9pbmZvLmhhc093blByb3BlcnR5KCdpc29uZXBhZ2VfZGF0YScpKSB7XG5cdCAgICBvYmouaXNvbmVwYWdlID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLmlzb25lcGFnZTtcblx0ICAgIG9iai51cmxwYWdlbmFtZSA9IG1ldGFfaW5mby5pc29uZXBhZ2VfZGF0YS51cmxwYWdlbmFtZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGNvbnRlbnQgPSBnZXRNZXRhQ250KCdpc29uZXBhZ2UnKSB8fCAnLTEnO1xuXHQgICAgdmFyIGFycl9jb250ZW50ID0gY29udGVudC5zcGxpdChcInxcIik7XG5cdCAgICBvYmouaXNvbmVwYWdlID0gYXJyX2NvbnRlbnRbMF07XG5cdCAgICBvYmoudXJscGFnZW5hbWUgPSBhcnJfY29udGVudFsxXSA/IGFycl9jb250ZW50WzFdIDogXCJcIjtcblx0ICB9XG5cdCAgcmV0dXJuIG9iajtcblx0fTtcblx0ZXhwb3J0cy5nZXRPbmVQYWdlSW5mbyA9IGdldE9uZVBhZ2VJbmZvO1xuXG5cbi8qKiovIH0pLFxuLyogNTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanNcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLnRyeVRvR2V0QXR0cmlidXRlID0gZnVuY3Rpb24oZWxlbWVudCwgYXR0cl9uYW1lKSB7XG5cdCAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUgPyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cl9uYW1lKSB8fCAnJykgOiAnJztcblx0fTtcblx0XG5cdHZhciB0cnlUb1NldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyX25hbWUsIGF0dHJfdmFsdWUpIHtcblx0ICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cl9uYW1lLCBhdHRyX3ZhbHVlKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdGV4cG9ydHMudHJ5VG9TZXRBdHRyaWJ1dGUgPSB0cnlUb1NldEF0dHJpYnV0ZTtcblx0XG5cdGV4cG9ydHMudHJ5VG9SZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cl9uYW1lKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJfbmFtZSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHRyeVRvU2V0QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJfbmFtZSwgJycpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDU3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIOWwj+eoi+W6j+S4i+mdoueahHNwbeS9k+ezu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBpc0FycmF5ICA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgYXBsdXNTdGF0aWMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJlc2V0TGFzdFBhZ2VTcG06IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMsIHt9KTsgXG5cdCAgICAgIHZhciBzcG0gPSBhcGx1cy5fJC5zcG0gfHwge307XG5cdCAgICAgIHNwbS5zcG1fY250ID0gJyc7XG5cdCAgICB9LFxuXHQgICAgbGlzdGVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTX1FVRVVFLFtdKTsgIFxuXHQgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246YXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgICAgIGFyZ3VtZW50czpbJ29uU2hvdycsZnVuY3Rpb24ob3B0KXtcblx0ICAgICAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgICAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLHt9KTsgXG5cdCAgICAgICAgICAgIHZhciBwYWdlcyA9IGFwbHVzLmdldE1ldGFJbmZvKCdwYWdlcycpO1xuXHQgICAgICAgICAgICB2YXIgcGFnZUluc3RhbmNlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuXHQgICAgICAgICAgICB2YXIgY3VycmVudFBhZ2VQYXRoID0gcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcblx0ICAgICAgICAgICAgaWYgKGlzQXJyYXkocGFnZXMpKSB7XG5cdCAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBwYWdlc1tpXTtcblx0ICAgICAgICAgICAgICAgIGlmKGN1cnJlbnQubWF0Y2hVcmwgPT09IGN1cnJlbnRQYWdlUGF0aCl7XG5cdCAgICAgICAgICAgICAgICAgIGFwbHVzLnNldFBhZ2VTUE0oY3VycmVudC5zcG1BLCBjdXJyZW50LnNwbUIpO1xuXHQgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOmFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgICAgICBhcmd1bWVudHM6WydjbGVhclBhZ2VTUE0nLGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIF9zZWxmLnJlc2V0TGFzdFBhZ2VTcG0oKTtcblx0ICAgICAgICB9XSxcblx0ICAgICAgfSk7XG5cdCAgICAgIFxuXHQgICAgICAvKipcblx0ICAgICAgICogQHBhcmFtcyBkYXRhIHtPYmplY3R9IHtcblx0ICAgICAgICogICBzcG1DbnQ6ICdhLmIuMC4wJ1xuXHQgICAgICAgKiAgIHNwbVVybDogJ2EuYi4wLjAnXG5cdCAgICAgICAqICAgc3BtUHJlOiAnYS5iLjAuMCdcblx0ICAgICAgICogfVxuXHQgICAgICAgKi9cblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOmFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgICAgICBhcmd1bWVudHM6WydzZXRQYWdlU1BNJyxmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMsIHt9KTsgXG5cdCAgICAgICAgICAgIHZhciBzcG0gPSBhcGx1cy5fJC5zcG0gfHwge307XG5cdCAgICAgICAgICAgIFxuXHQgICAgICAgICAgICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKSB8fCBbXTtcblx0ICAgICAgICAgICAgdmFyIHNwbWFiID0gZGF0YS5zcG1DbnQgPyBkYXRhLnNwbUNudC5zcGxpdCgnLicpIDogW3NwbS5kYXRhLmEgfHwgJzAnLCBzcG0uZGF0YS5iIHx8ICcwJ107XG5cdCAgICAgICAgICAgIGlmIChzcG1hYi5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgICAgICAgICBzcG1hYiA9IHNwbWFiLmNvbmNhdChbJzAnLCAnMCddKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgc3BtYWJzdHIgPSBzcG1hYi5qb2luKCcuJyk7XG5cdFxuXHQgICAgICAgICAgICB2YXIgY3VycmVudFBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAxXTtcblx0ICAgICAgICAgICAgdmFyIHByZVBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAyXSB8fCB7fTtcblx0ICAgICAgICAgICAgdmFyIHByZVByZVBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAzXSB8fCB7fTtcblx0XG5cdCAgICAgICAgICAgIGlmIChwYWdlcy5sZW5ndGggPiAwICYmIGN1cnJlbnRQYWdlKSB7XG5cdCAgICAgICAgICAgICAgcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0uc3BtID0gc3BtYWJzdHI7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZVNwbSA9IHNwbS5kYXRhICYmIHNwbS5kYXRhLmEgPyBbc3BtLmRhdGEuYSwgc3BtLmRhdGEuYiwgc3BtLmRhdGEuYyB8fCAnMCcsIHNwbS5kYXRhLmQgfHwgJzAnXS5qb2luKCcuJykgOiAnJztcblx0ICAgICAgICAgICAgc3BtLmRhdGEuYSA9IHNwbWFiWzBdID8gJycgKyBzcG1hYlswXSA6ICcwJztcblx0ICAgICAgICAgICAgc3BtLmRhdGEuYiA9IHNwbWFiWzFdID8gJycgKyBzcG1hYlsxXSA6ICcwJztcblx0ICAgICAgICAgICAgc3BtLmRhdGEuYyA9ICcwJztcblx0ICAgICAgICAgICAgc3BtLmRhdGEuZCA9ICcwJztcblx0ICAgICAgICAgICAgc3BtLnBhZ2VfcmVmZXJyZXIgPSBwYWdlcy5sZW5ndGggPiAxICYmIGN1cnJlbnRQYWdlID8gKGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzKSA6ICcnO1xuXHQgICAgICAgICAgICBzcG0uc3BtX2NudCA9IHNwbWFic3RyO1xuXHRcblx0ICAgICAgICAgICAgLy8g5Lul55So5oi35ZyoVVJM5LiK5ou85o6l55qEc3Bt5Li65YeG77yMYXBsdXMuc3BtX29yaWdu5p2l5rqQ5LqOYXV0b19pbml0L2luamVjdF9hcHAuanNcblx0ICAgICAgICAgICAgdmFyIHNwbV9vcmlnbiA9IGFwbHVzLnNwbV9vcmlnbiB8fCBzcG0uc3BtX29yaWduO1xuXHQgICAgICAgICAgICBzcG0uc3BtX3ByZSA9IGRhdGEuc3BtUHJlIHx8IHNwbS5zcG1fdXJsIHx8IHByZVByZVBhZ2Uuc3BtIHx8ICcnO1xuXHQgICAgICAgICAgICBzcG0uc3BtX3VybCA9IGRhdGEuc3BtVXJsIHx8IGN1cnJlbnRQYWdlU3BtIHx8IHByZVBhZ2Uuc3BtIHx8IHNwbV9vcmlnbiB8fCAgJyc7XG5cdCAgICAgICAgICAgIGFwbHVzLl8kLnNwbSA9IHNwbTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NldFBhZ2VTUE0gZXJyb3IsIHRoZSBlcnJvckluZm8gaXMgJywgZSk7XG5cdCAgICAgICAgICAgIHVsb2coKS53KCdzZXRQYWdlU1BNIGVycm9yLCB0aGUgZXJyb3JJbmZvIGlzICcsIGUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgXG5cdCAgICAgICAgfV0sXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5saXN0ZW4oKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBhcGx1c19taW5pX3JlcG9ydF91bS5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIE1haW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTtcblx0ICAgICAgdmFyIG1haW4gPSBNYWluLmNyZWF0ZSgpO1xuXHQgICAgICBtYWluLnJ1bih0aGlzLm9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBtYWluX21pbmlfdW1faHR0cC5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHQvLyB2YXIgbG9nX2Nsb3VkID0gcmVxdWlyZSgnLi9sb2dfY2xvdWQnKTtcblx0dmFyIG1haW5fYmFzZV9odHRwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cdHZhciBldmVudE1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0dmFyIHJlcXVlc3RRdWV1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIFBhZ2VNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVFdmVudChpZCwgb3B0aW9ucykge1xuXHQgIHVsb2coKS52KCdldmVudDogJywgaWQsIG9wdGlvbnMpO1xuXHQgIFxuXHQgIGlmICh1dGlscy5jaGVja0V2ZW50KGlkLCBvcHRpb25zKSkge1xuXHQgICAgdmFyIGV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MikoaWQsIG9wdGlvbnMpO1xuXHQgICAgZXZlbnRNYW5hZ2VyKCkuYWRkRXZlbnQoZXZlbnQpO1xuXHRcblx0ICAgIHJlcXVlc3RRdWV1ZSgpLnNlbmQodXRpbHMuRGF0YVR5cGUuRUtWLCB7IG5vQ2FjaGU6IGZhbHNlIH0sIGZ1bmN0aW9uKCl7XG5cdCAgICAgIHVsb2coKS5pKCdldmVudCBzZW5kIHN1Y2Nlc3M6ICcsIGlkLCBldmVudCk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1haW5fYmFzZV9odHRwLmV4dGVuZCh7XG5cdFxuXHQgIGhhbmRsZXJNaWRkbGV3YXJlOiBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB1bG9nKCkuc2V0RGVidWcoISFhcGx1cy5nZXRNZXRhSW5mbygnREVCVUcnKSk7XG5cdCAgICB2YXIgdXNlckV2ZW50QXJncywgZ29rZXk7XG5cdCAgICB2YXIgbG9na2V5ID0gZGF0YSAmJiBkYXRhLnVzZXJkYXRhICYmIGRhdGEudXNlcmRhdGEubG9na2V5O1xuXHQgICAgdmFyIGdta2V5ID0gZGF0YSAmJiBkYXRhLnVzZXJkYXRhICYmIGRhdGEudXNlcmRhdGEuZ21rZXk7XG5cdCAgICB2YXIgbG9nZGF0YSA9IGRhdGEgJiYgZGF0YS53aGF0X3RvX3NlbmQgJiYgZGF0YS53aGF0X3RvX3NlbmQubG9nZGF0YSAmJiBkYXRhLndoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuXHQgICAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG5cdCAgICB2YXIgcGFnZV9uYW1lO1xuXHQgICAgaWYgKGdta2V5ID09PSAnQ0xLJyB8fCBnbWtleSA9PT0gJ0VYUCcgfHwgZ21rZXkgPT09ICdPVEhFUicgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfU1RBUlQgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG5cdCAgICAgIHVzZXJFdmVudEFyZ3MgPSBjbG9uZURlZXAoZGF0YSAmJiBkYXRhLnVzZXJkYXRhICYmIGRhdGEudXNlcmRhdGEuZ29rZXkpIHx8IHt9O1xuXHQgICAgICBnb2tleSA9IGxvZ2RhdGEuZ29rZXkgfHwge307XG5cdCAgICAgIHZhciBldmVudF9hcmdzO1xuXHQgICAgICB2YXIgc2RrQXJncyA9IHt9O1xuXHQgICAgICBpZiAobG9na2V5ID09PSAnJCRfc2hhcmUnKSB7XG5cdCAgICAgICAgc2RrQXJncy5yZWZlcl9wYWdlID0gbG9nZGF0YS51cmw7XG5cdCAgICAgICAgc2RrQXJncy5zaGFyZV90eXBlID0gdXNlckV2ZW50QXJncy5zaGFyZV90eXBlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZ29rZXkuc2NlbmUpIHtcblx0ICAgICAgICBzZGtBcmdzLnNjZW5lID0gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKSArICdfJyArIGdva2V5LnNjZW5lO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyAkJF9hcHBfbGlua+S6i+S7tueahHRhcmdldEFwcEtleVxuXHQgICAgICBpZihnb2tleS50YXJnZXRBcHBLZXkpIHtcblx0ICAgICAgICBzZGtBcmdzLnRhcmdldEFwcEtleSA9IHVzZXJFdmVudEFyZ3MudGFyZ2V0QXBwS2V5O1xuXHQgICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzLnRhcmdldEFwcEtleTtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgcGFnZV9uYW1lID0gdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddIHx8IHVzZXJFdmVudEFyZ3MucGFnZV9uYW1lIHx8ICh1c2VyRXZlbnRBcmdzLnNwbSAmJiB1c2VyRXZlbnRBcmdzLnNwbS5iKSB8fCBhcGx1cy5nZXRQYWdlTmFtZSgpIHx8IGxvZ2RhdGEudXJsIHx8ICcnO1xuXHQgICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcblx0ICAgICAgXG5cdCAgICAgIHNka0FyZ3MudXJsID0gbG9nZGF0YS51cmwgfHwgJy0nO1xuXHQgICAgICBpZiAodXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddKSB7XG5cdCAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MucGFnZV9uYW1lO1xuXHQgICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzWydkYXRhLXBhZ2VuYW1lJ107XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghdXRpbERhc2guaXNFbXB0eU9iamVjdChncCkpIHtcblx0ICAgICAgICBzZGtBcmdzLmdwID0gZ3A7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh1c2VyRXZlbnRBcmdzLnNwbSkge1xuXHQgICAgICAgIHNka0FyZ3NbJ3NwbS1jbnQnXSA9IFtlbmNvZGVVUklDb21wb25lbnQocGFnZV9uYW1lKSwgdXNlckV2ZW50QXJncy5zcG0uYywgdXNlckV2ZW50QXJncy5zcG0uZF0uZmlsdGVyKGZ1bmN0aW9uKHYpe1xuXHQgICAgICAgICAgcmV0dXJuICEhdjtcblx0ICAgICAgICB9KS5qb2luKCcuJyk7XG5cdCAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3Muc3BtO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgY2xvbmVQID0gY2xvbmVEZWVwKHVzZXJFdmVudEFyZ3MpO1xuXHQgICAgICBmb3IgKHZhciBrIGluIGNsb25lUCkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgayA9PT0gJ3N0cmluZycgJiYgdXRpbHMuc3RhcnRzV2l0aChrLCAnXycpKSB7XG5cdCAgICAgICAgICBzZGtBcmdzW2tdID0gY2xvbmVQW2tdO1xuXHQgICAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3Nba107XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9TVEFSVCB8fCBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9FTkQpIHtcblx0ICAgICAgICBldmVudF9hcmdzID0gdXRpbERhc2guYXNzaWduKHNka0FyZ3MsIHVzZXJFdmVudEFyZ3MpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGV2ZW50X2FyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oc2RrQXJncywgeyBjdXNwOiB1c2VyRXZlbnRBcmdzIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIGhhbmRsZUV2ZW50KGxvZ2tleSwgZXZlbnRfYXJncyk7XG5cdCAgICB9IGVsc2UgaWYgKGxvZ2RhdGEuZXZlbnRfY29kZSA9PT0gJzIwMDEnKSB7IFxuXHQgICAgICB2YXIgcHZhcmdzID0ge307XG5cdCAgICAgIHZhciBwYWdlX2lkID0gYXBsdXNTdGF0aWMuUEFHRV9TVEFSVDtcblx0ICAgICAgZ29rZXkgPSBjbG9uZURlZXAobG9nZGF0YS5nb2tleSkgfHwge307XG5cdCAgICAgIFxuXHQgICAgICBwYWdlX25hbWUgPSBnb2tleS5wYWdlX25hbWUgfHwgYXBsdXMuZ2V0UGFnZU5hbWUoKSB8fCBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZShsb2dkYXRhLnVybCkgfHwgbG9nZGF0YS51cmwgfHwgJyc7XG5cdCAgICAgIHB2YXJncy5yID0gbG9nZGF0YS5hcmcxIHx8IGxvZ2RhdGEubG9na2V5IHx8ICctJztcblx0ICAgICAgcHZhcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcblx0ICAgICAgaWYgKGdva2V5Ll9wYWdlX2F1dG9fcHYpIHtcblx0ICAgICAgICBwdmFyZ3MuaXNfYXV0byA9IDE7XG5cdCAgICAgICAgcHZhcmdzLnVybCA9IGdva2V5LnBhdGggfHwgJy0nO1xuXHQgICAgICAgIHB2YXJncy5yZWZfdXJsID0gZ29rZXkucmVmZXJyZXI7XG5cdCAgICAgICAgZGVsZXRlIGdva2V5Ll9wYWdlX2F1dG9fcHY7XG5cdCAgICAgICAgZGVsZXRlIGdva2V5LnJlZmVycmVyO1xuXHQgICAgICAgIGRlbGV0ZSBnb2tleS5wYXRoO1xuXHQgICAgICAgIGRlbGV0ZSBnb2tleS5wYWdlX25hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHZhcmdzLmlzX2F1dG8gPSAwO1xuXHQgICAgICAgIHB2YXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG5cdCAgICAgICAgcHZhcmdzLnJlZl91cmwgPSBsb2dkYXRhLnByZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGdva2V5LmR1cmF0aW9uKSB7XG5cdCAgICAgICAgcHZhcmdzLmR1cmF0aW9uID0gZ29rZXkuZHVyYXRpb247XG5cdCAgICAgICAgZGVsZXRlIGdva2V5LmR1cmF0aW9uO1xuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBpZiAoIXV0aWxEYXNoLmlzRW1wdHlPYmplY3QoZ3ApKSB7XG5cdCAgICAgICAgcHZhcmdzLmdwID0gZ3A7XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIGlmIChnb2tleS5zY2VuZSkge1xuXHQgICAgICAgIHB2YXJncy5zY2VuZSA9IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCkgKyAnXycgKyBnb2tleS5zY2VuZTtcblx0ICAgICAgfVxuXHQgICAgICBnb2tleSA9IHV0aWxzLmRlbGV0ZUluZm8oZ29rZXksIFsnX2Fub255X2lkJywgJ19kZXZfaWQnLCAnX3Nlc3Npb25faWQnLCAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaycsICd1YWlkJywgJ3B2aWQnLCAnc2NlbmUnXSk7XG5cdCAgICAgIHB2YXJnc1snc3BtLWNudCddID0gZW5jb2RlVVJJQ29tcG9uZW50KHBhZ2VfbmFtZSk7XG5cdCAgICAgIGlmIChnb2tleS5fcGFnZV9hdXRvX2lkKSB7XG5cdCAgICAgICAgcGFnZV9pZCA9IGdva2V5Ll9wYWdlX2F1dG9faWQ7XG5cdCAgICAgICAgZGVsZXRlIGdva2V5Ll9wYWdlX2F1dG9faWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChnb2tleS5wYWdlX3N0YXJ0KSB7XG5cdCAgICAgICAgcHZhcmdzLnBhZ2Vfc3RhcnQgPSBnb2tleS5wYWdlX3N0YXJ0O1xuXHQgICAgICAgIGRlbGV0ZSBnb2tleS5wYWdlX3N0YXJ0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBpZiAoZ29rZXkucGFnZV9uYW1lKSB7XG5cdCAgICAgIC8vIGRlbGV0ZSBnb2tleS5wYWdlX25hbWU7XG5cdCAgICAgIC8vIH1cblx0ICAgICAgXG5cdCAgICAgIGhhbmRsZUV2ZW50KHBhZ2VfaWQsIHV0aWxEYXNoLmFzc2lnbihwdmFyZ3MsIHsgY3VzcDogZ29rZXl9ICkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gY29uc29sZS5sb2coMjIyMiwgZGF0YSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgIHRoaXMud2F0Y2hMT0coKTtcblx0ICB9XG5cdCAgXG5cdH0pO1xuXG4vKioqLyB9KSxcbi8qIDYwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIOaLpuaIquW5tuaMiWh0dHDljY/orq7lj5HpgIHml6Xlv5dcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cdC8vIHZhciBsb2dfY2xvdWQgPSByZXF1aXJlKCcuL2xvZ19jbG91ZCcpO1xuXHR2YXIgdXRpbEdRID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdC8vIHZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQmFzZS5leHRlbmQoe1xuXHRcblx0ICBzdWJzY3JpYmVMb2dzOiBmdW5jdGlvbiAoYWN0aW9uLCBjYWxsYmFjaykge1xuXHQgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKGFwbHVzU3RhdGljLlNVQlNDUklCRSwgW2FjdGlvbiwgZnVuY3Rpb24gKG9yaURhdGFzKSB7XG5cdCAgICAgIGlmIChvcmlEYXRhcy5zdGF0dXMgPT09IGFwbHVzU3RhdGljLkNPTVBMRVRFKSB7XG5cdCAgICAgICAgY2FsbGJhY2sob3JpRGF0YXMpO1xuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdCAgfSxcblx0XG5cdCAgZ2V0TG9naWNTeW1ib2w6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiB0aGlzLmZvcm1hdCA9PT0gJ0FMSScgPyAnJicgOiAnfHwnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWcqOWtkOexu+S4reWunueOsFxuXHQgICAqIEBwYXJhbXMge09iamVjdH0gZGF0YVxuXHQgICAqL1xuXHQgIGhhbmRsZXJNaWRkbGV3YXJlOiBmdW5jdGlvbiAoKSB7fSxcblx0ICBcblx0XG5cdCAgd2F0Y2hMT0c6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICBcblx0ICAgIC8vIOiuoumYhXB25LqL5Lu2XG5cdCAgICBfc2VsZi5zdWJzY3JpYmVMb2dzKGFwbHVzU3RhdGljLk1XX0NIQU5HRV9QViwgZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgX3NlbGYuaGFuZGxlck1pZGRsZXdhcmUoZGF0YSwgJ3B2Jyk7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvLyDorqLpmIVoamxqL2FwbHVz5LqL5Lu2XG5cdCAgICBfc2VsZi5zdWJzY3JpYmVMb2dzKGFwbHVzU3RhdGljLk1XX0NIQU5HRV9ISkxKLCBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICBfc2VsZi5oYW5kbGVyTWlkZGxld2FyZShkYXRhLCBhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICB9KTtcblx0ICB9LFxuXHRcblx0ICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMud2F0Y2hMT0coKTtcblx0ICB9XG5cdH0pO1xuXG5cbi8qKiovIH0pLFxuLyogNjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qc1xuXHQgKiDmk43kvZxhcGx1c19xdWV1ZeeahOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRleHBvcnRzLnB1c2hJbnRvR29sZGxvZ1F1ZXVlID0gZnVuY3Rpb24gKGFjdGlvbiwgYXJncykge1xuXHQgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBuYW1lcyA9IGFjdGlvbi5zcGxpdCgnLicpO1xuXHQgIHZhciBhcGx1c18xID0gYXBsdXNbbmFtZXNbMV1dO1xuXHQgIHZhciBhcGx1c18yID0gYXBsdXNfMSA/IGFwbHVzXzFbbmFtZXNbMl1dIDogbnVsbDtcblx0XG5cdCAgaWYgKGFwbHVzICYmIG5hbWVzLmxlbmd0aCA9PT0gMiAmJiBhcGx1c18xKSB7XG5cdCAgICBhcGx1c18xLmFwcGx5KGFwbHVzLCBhcmdzKTtcblx0ICB9IGVsc2UgaWYgKG5hbWVzLmxlbmd0aCA9PT0gMyAmJiBhcGx1c18yKSB7XG5cdCAgICBhcGx1c18yLmFwcGx5KGFwbHVzXzEsIGFyZ3MpOyAgXG5cdCAgfSBlbHNlIHtcblx0ICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICBhY3Rpb246IGFjdGlvbixcblx0ICAgICAgYXJndW1lbnRzOiBhcmdzXG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IGV2ZW50LmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpZCwgcHJvcGVydGllcykge1xuXHQgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdCAgdmFyIGV2ZW50ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBldmVudC5pZCA9IGlkO1xuXHQgIGlmICghcHJvcGVydGllcyB8fCAhcHJvcGVydGllcy50cykge1xuXHQgICAgZXZlbnQudHMgPSBEYXRlLm5vdygpO1xuXHQgIH1cblx0ICB2YXIgcHJvcHNUeXBlID0gdHlwZW9mIHByb3BlcnRpZXM7XG5cdCAgaWYgKHByb3BzVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG5cdCAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkpIHtcblx0ICAgICAgICBldmVudFtrZXldID0gcHJvcGVydGllc1trZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuXHQgIGlmICghdXRpbERhc2guaXNFbXB0eU9iamVjdChncCkpIHtcblx0ICAgIGV2ZW50WydncCddID0gZ3A7IFxuXHQgIH1cblx0ICByZXR1cm4gZXZlbnQ7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOazqOWFpWxvZ0NvbmZpZyzkvpvlkI7nu63mj5Lku7bkvb/nlKhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgZ2V0TG9nQ29uZmlnOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBsb2dDb25maWcgPSB7fTtcblx0ICAgICAgdmFyIHBsdWdpbnMgPSB0aGlzLm9wdGlvbnMuY29uZmlnLnBsdWdpbnM7XG5cdFxuXHQgICAgICBmb3IgKHZhciBrIGluIHBsdWdpbnMpIHtcblx0ICAgICAgICBsb2dDb25maWdba10gPSB7XG5cdCAgICAgICAgICBwbHVnaW5zOiBwbHVnaW5zW2tdLFxuXHQgICAgICAgICAgY29udGV4dDoge31cblx0ICAgICAgICB9O1xuXHQgICAgICAgIGVhY2gocGx1Z2luc1trXSwgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgIGxvZ0NvbmZpZ1trXS5jb250ZXh0W3YubmFtZV0gPSB2LmNvbmZpZyB8fCB7fTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbG9nQ29uZmlnO1xuXHQgICAgfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnID0gdGhpcy5nZXRMb2dDb25maWcoKTtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnLnBhZ2VMb2FkVGltZSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LlBBR0VfTE9BRF9USU1FO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9ldGFnLmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8muWQjOatpWFwbHVzX2luaXTlt6XkvZzmtYHnmoTkv6Hmga9cblx0ICogZGVwczog5pegXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEV0YWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIEVNUFRZX0NOQSA9ICdFTVBUWV9DTkEnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgX3N5bmNFdGFnOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgY2hlY2sgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICAgIHZhciBjbmEgPSBvICYmIG8uZGF0YSA/IG8uZGF0YS5jbmEgOiAnJztcblx0ICAgICAgICBpZiAoIWNuYSkge1xuXHQgICAgICAgICAgaWYgKGFwbHVzLmZldGNoRXRhZ1N0YXR1cyA9PT0gJ1knKSB7XG5cdCAgICAgICAgICAgIC8vIOS4uuS6huino+WGs+W5tuWPkemXrumimO+8jOS7jmFwbHVzX3F1ZXVl5pS55oiQ55u05o6l55SoYXBsdXMuYXBsdXNfcHVic3ViIEDosIvlo6sgMjAwMjEtMDEtMTlcblx0ICAgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnZXRhZycsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgIGNhbGxiYWNrKHZhbHVlKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0b1N5bmNFdGFnKCk7ICBcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbChldGFnU3RvcmFnZUtleSwgY25hKTtcblx0ICAgICAgICAgIGNhbGxiYWNrKGNuYSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgICBcblx0ICAgICAgdmFyIGFwbHVzX3Job3N0X3YgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pO1xuXHQgICAgICB2YXIgdXJsO1xuXHRcblx0ICAgICAgaWYgKGFwbHVzX3Job3N0X3YpIHtcblx0ICAgICAgICB1cmwgPSB1dGlsRXRhZy5nZXRVcmwoe1xuXHQgICAgICAgICAgZWdVcmw6IChhcGx1c19yaG9zdF92LmluZGV4T2YoJy8vJykgPT09IC0xID8gJy8vJyArIGFwbHVzX3Job3N0X3YgOiBhcGx1c19yaG9zdF92KSArICcvZWcuanMnXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgaWYgKF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnKSB7XG5cdCAgICAgICAgICBfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZy5lZ1VybCA9IHVybDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgICB2YXIgZXRhZ1N0b3JhZ2VLZXkgPSBhcGx1cy5nbG9iYWxDb25maWcuRVRBR19TVE9SQUdFX0tFWTtcblx0ICAgICAgdmFyIHRvU3luY0V0YWcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHVybCkge1xuXHQgICAgICAgICAgYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID0gJ1knO1xuXHQgICAgICAgICAgbWluaS5yZXF1ZXN0KHVybCwge1xuXHQgICAgICAgICAgICBkYXRhVHlwZTogJ3RleHQnLFxuXHQgICAgICAgICAgICByZXF1ZXN0TWV0aG9kTmFtZTogJ3JlcXVlc3QnXG5cdCAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIGFwbHVzLmZldGNoRXRhZ1N0YXR1cyA9ICdOJztcblx0ICAgICAgICAgICAgdmFyIGV0YWcgPSAnJztcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhIHx8ICcnO1xuXHQgICAgICAgICAgICAgIHZhciBhcnIgPSBkYXRhLnNwbGl0KCc7Jyk7XG5cdCAgICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgZXRhZ0tleVZhbHVlID0gYXJyWzFdO1xuXHQgICAgICAgICAgICAgICAgdmFyIGV0YWdzID0gZXRhZ0tleVZhbHVlLnNwbGl0KCc9Jyk7XG5cdCAgICAgICAgICAgICAgICBldGFnID0gZXRhZ3NbMV0gfHwgJyc7XG5cdCAgICAgICAgICAgICAgICBldGFnID0gZXRhZy5yZXBsYWNlKC9cXFwiL2csICcnKTtcblx0ICAgICAgICAgICAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoZXRhZ1N0b3JhZ2VLZXksIGV0YWcpO1xuXHQgICAgICAgICAgICAgICAgY3R4LnNldFN0b3JhZ2Uoe1xuXHQgICAgICAgICAgICAgICAgICBrZXk6IGV0YWdTdG9yYWdlS2V5LFxuXHQgICAgICAgICAgICAgICAgICBkYXRhOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgY25hOiBldGFnXG5cdCAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgLy8g5Li65LqG6Kej5Yaz5bm25Y+R6Zeu6aKY77yM5LuOYXBsdXNfcXVldWXmlLnmiJDnm7TmjqXnlKhhcGx1cy5hcGx1c19wdWJzdWJcblx0ICAgICAgICAgICAgICAgIC8vIOW5tmNhY2hl5L2P5LiK5LiA5qyh55qE57uT5p6cIEDosIvlo6sgMjAwMjEtMDEtMTlcblx0ICAgICAgICAgICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5wdWJsaXNoKCdldGFnJywgZXRhZyk7XG5cdCAgICAgICAgICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIuY2FjaGVQdWJzKCdldGFnJywgZXRhZyk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgdWxvZygpLncoZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKCFldGFnKSB7XG5cdCAgICAgICAgICAgICAgZXRhZyA9IEVNUFRZX0NOQTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjYWxsYmFjayhldGFnKTtcblx0ICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMyKSB7XG5cdCAgICAgICAgICAgIHVsb2coKS53KHJlczIpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgICB2YXIgQ05BID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbChldGFnU3RvcmFnZUtleSk7XG5cdCAgICAgIGlmIChDTkEpIHtcblx0ICAgICAgICBjYWxsYmFjayhDTkEpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGN0eC5nZXRTdG9yYWdlKHtcblx0ICAgICAgICAgIGtleTogZXRhZ1N0b3JhZ2VLZXksXG5cdCAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIGNoZWNrKHJlcyk7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICBjaGVjayhyZXMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogcHblj5HpgIHliLDlk6rph4zljrtcblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGM77yM6L+U5Zue4oCccGF1c2XigJ3mmoLlgZzkuK3pl7Tku7bmiafooYzvvIzov5Tlm57kuIDkuKrmlbTmlbDigJxu4oCd5ZGK6K+J5Lit6Ze05Lu24oCcbuKAneavq+enkuWQjue7p+e7reaJp+ihjOS4remXtOS7tlxuXHQgICAgICog4oCc5pqC5YGc4oCd5pyA5aSaMTBz77yM6Iul6LaF5pe25Lit6Ze05Lu25Lya5by65Yi257un57ut5omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24gKHN0YXRlLCBjYikge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICAvLyB2YXIgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICB2YXIgZXRhZ1RpbWVvdXQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXRhZy10aW1lb3V0Jyk7XG5cdCAgICAgIHZhciBkZWZhdWx0VGltZSA9IDIwMDtcblx0ICAgICAgdmFyIHRpbWUgPSBkZWZhdWx0VGltZTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB0aW1lID0gcGFyc2VJbnQoZXRhZ1RpbWVvdXQpO1xuXHQgICAgICAgIGlmIChpc05hTih0aW1lKSkge1xuXHQgICAgICAgICAgdGltZSA9IGRlZmF1bHRUaW1lO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9zeW5jRXRhZyhmdW5jdGlvbiAoY25hKSB7XG5cdCAgICAgICAgaWYgKF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnKSB7XG5cdCAgICAgICAgICBfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZy5jbmEgPSBjbmE7ICBcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHRpbWUgPj0gMjAwKSB7XG5cdCAgICAgICAgICBjYihjbmEpOyAgXG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgLy8g5ZGK6K+JY29tcG9zZeaaguWBnOaJp+ihjOS4remXtOS7tu+8jOebtOWIsGNi5Zue5Yiw5ZCO5YaN57un57utXG5cdCAgICAgIGlmICh0aW1lIDwgMjAwKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0aW1lO1xuXHQgICAgfSxcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpO1xuXHRcblx0Ly8g5LuF6ZmQ5by55YaF77yb5bCP57Gz56aB55SoZWcuanPlupTlr7nnrZbnlaXvvJrkvb/nlKjliqjmgIHlkI7nvIDlkI1cblx0Ly8g5ZCO57yA5ZCN55Sf5oiQ5pa55rOVOiDlvZPliY3ml7bpl7TmiLPovawxNui/m+WItu+8jOWPluWQjjjkvY3vvIxcblx0Ly8gZnVuY3Rpb24gZXRhZ1VybFN1ZmZpeChldGFnVXJsKSB7XG5cdC8vICAgdmFyIGR5bmFtaWNVcmwgPSBldGFnVXJsO1xuXHQvLyAgIHRyeSB7XG5cdC8vICAgICBpZihhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0Ly8gICAgICAgdHJ5IHtcblx0Ly8gICAgICAgICB2YXIgdGltZVN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdC8vICAgICAgICAgdmFyIGR5bmFtaWNTdWZmaXggPSB0aW1lU3RhbXAudG9TdHJpbmcoMTYpLnNsaWNlKC04KTtcblx0Ly8gICAgICAgICB3aGlsZShkeW5hbWljU3VmZml4Lmxlbmd0aCA8IDgpIHtcblx0Ly8gICAgICAgICAgIGR5bmFtaWNTdWZmaXggPSBkeW5hbWljU3VmZml4ICsgJ2YnO1xuXHQvLyAgICAgICAgIH1cblx0Ly8gICAgICAgICBkeW5hbWljVXJsID0gZXRhZ1VybC5yZXBsYWNlKC9lZy5qcy8sIGR5bmFtaWNTdWZmaXggKyAnLmpzJyk7XG5cdC8vICAgICAgIH0gY2F0Y2goZSkge1xuXHQvLyAgICAgICB9XG5cdC8vICAgICAgIHJldHVybiBkeW5hbWljVXJsO1xuXHQvLyAgICAgfVxuXHQvLyAgIH0gY2F0Y2goZSkge1xuXHRcblx0Ly8gICB9XG5cdC8vICAgcmV0dXJuIGR5bmFtaWNVcmw7XG5cdC8vIH1cblx0XG5cdGV4cG9ydHMuZ2V0VXJsID0gZnVuY3Rpb24gKGV0YWcpIHtcblx0ICB2YXIgdXJsID0gdXRpbERhdGEuZ2V0VXJsKGV0YWcgJiYgZXRhZy5lZ1VybCk7XG5cdCAgLy8gdXJsID0gZXRhZ1VybFN1ZmZpeCh1cmwpO1xuXHQgIC8vIOWmguaenGVnVXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0XG5cdCAgaWYgKHVybC5pbmRleE9mKCdodHRwJykgIT09IDApIHtcblx0ICAgIHZhciBwcm90b2NhbCA9ICdodHRwczonO1xuXHQgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG5cdCAgICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAgIH1cblx0ICAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuXHQgIH1cblx0ICByZXR1cm4gdXJsO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDY2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsVHJpbSA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXHR2YXIgdXRpbFN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICB0cnlUb0RlY29kZVVSSUNvbXBvbmVudDogZnVuY3Rpb24gKHZhbCwgZGVmYXVsdF92YWwpIHtcblx0ICAgIHZhciB2ID0gZGVmYXVsdF92YWwgfHwgJyc7XG5cdCAgICBpZiAodmFsKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWwpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB2O1xuXHQgIH0sXG5cdCAgXG5cdCAgLyoqXG5cdCAgICog5bCG5b2i5aaCIFwicGFnZUlkPTEyMzsgc2l0ZUlkPTQ1NlwiIOeahOWGheWuueino+aekOS4uiBPYmplY3Rcblx0ICAgKiBAcGFyYW0gcyB7U3RyaW5nfVxuXHQgICAqIEBwYXJhbSBbZGljdF0ge09iamVjdH1cblx0ICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICovXG5cdCAgcGFyc2VTZW1pY29sb25Db250ZW50OiBmdW5jdGlvbiAocywgZGljdCwgdW5kZWNvZGUpIHtcblx0ICAgIGRpY3QgPSBkaWN0IHx8IHt9O1xuXHQgICAgdmFyIGEgPSBzLnNwbGl0KCc7Jyk7XG5cdCAgICB2YXIgajtcblx0ICAgIHZhciBhX2xlbiA9IGEubGVuZ3RoO1xuXHQgICAgdmFyIGEyO1xuXHRcblx0ICAgIGZvciAoaiA9IDA7IGogPCBhX2xlbjsgaisrKSB7XG5cdCAgICAgIGEyID0gYVtqXS5zcGxpdCgnPScpO1xuXHQgICAgICB2YXIgX3ZhbHVlID0gdXRpbFRyaW0udHJpbShhMi5zbGljZSgxKS5qb2luKCc9JykpO1xuXHQgICAgICBkaWN0W3V0aWxUcmltLnRyaW0oYTJbMF0pIHx8ICcnXSA9IHVuZGVjb2RlID8gX3ZhbHVlIDogdGhpcy50cnlUb0RlY29kZVVSSUNvbXBvbmVudChfdmFsdWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBkaWN0O1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWwhuS4gOS4qiBub2RlIGxpc3Qg6L2s5Li65pWw57uEXG5cdCAgICogQHBhcmFtIG5vZGVzIHtOb2RlTGlzdH1cblx0ICAgKiDlj4Lop4HvvJpodHRwOi8vd3d3LnBsYW5hYmMubmV0LzIwMTAvMDEvMDYvYXJndW1lbnRzX3RvX2FycmF5L1xuXHQgICAqL1xuXHQgIG5vZGVMaXN0VG9BcnJheTogZnVuY3Rpb24gKG5vZGVzKSB7XG5cdCAgICB2YXIgYXJyO1xuXHQgICAgdmFyIGxlbmd0aDtcblx0XG5cdCAgICB0cnkge1xuXHQgICAgICAvLyB3b3JrcyBpbiBldmVyeSBicm93c2VyIGV4Y2VwdCBJRVxuXHQgICAgICBhcnIgPSBbXS5zbGljZS5jYWxsKG5vZGVzKTtcblx0ICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAvLyBzbG93ZXIsIGJ1dCB3b3JrcyBpbiBJRVxuXHQgICAgICBhcnIgPSBbXTtcblx0ICAgICAgbGVuZ3RoID0gbm9kZXMubGVuZ3RoO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGFyci5wdXNoKG5vZGVzW2ldKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBnZXRMc0NuYTogZnVuY3Rpb24gKEVUQUdfU1RPUkFHRV9LRVksIGRhdGUpIHtcblx0ICAgIGlmICh1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcblx0ICAgICAgdmFyIF9sc19jbmEgPSAnJztcblx0ICAgICAgdmFyIF92YWx1ZSA9IHV0aWxTdG9yZS5nZXQoRVRBR19TVE9SQUdFX0tFWSk7XG5cdCAgICAgIGlmIChfdmFsdWUpIHtcblx0ICAgICAgICB2YXIgX2FyciA9IF92YWx1ZS5zcGxpdCgnXycpIHx8IFtdO1xuXHQgICAgICAgIGlmIChkYXRlKSB7XG5cdCAgICAgICAgICBfbHNfY25hID0gX2Fyci5sZW5ndGggPiAxICYmIGRhdGUgPT09IF9hcnJbMF0gPyBfYXJyWzFdIDogJyc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIF9sc19jbmEgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoX2xzX2NuYSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJyc7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8gdXRpbFN0b3JlLnNldCh0aGlzLkVUQUdfU1RPUkFHRV9LRVksICB0aGlzLnRvZGF5ICsgJ18nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNuYSkpO1xuXHQgIHNldExzQ25hOiBmdW5jdGlvbiAoRVRBR19TVE9SQUdFX0tFWSwgdG9kYXksIGNuYSkge1xuXHQgICAgaWYgKGNuYSAmJiB1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcblx0ICAgICAgdXRpbFN0b3JlLnNldChFVEFHX1NUT1JBR0VfS0VZLCAgdG9kYXkgKyAnXycgKyBlbmNvZGVVUklDb21wb25lbnQoY25hKSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZ2V0VXJsOiBmdW5jdGlvbiAodXJsKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdCAgICB2YXIgZWdVcmwgPSB1cmwgfHwgJy8vbG9nLm1tc3RhdC5jb20vZWcuanMnO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIHJob3N0X3YgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pO1xuXHQgICAgICB2YXIgcmVnID0gL1tbYS16fFxcLXxcXF98MC05XFwuXStbYS16fFxcLXxcXF98MC05XSg6XFxkKik/Lztcblx0ICAgICAgdmFyIGN1c3RvbV9ob3N0ID0gcmhvc3Rfdi5tYXRjaChyZWcpO1xuXHQgICAgICBpZiAoY3VzdG9tX2hvc3QgJiYgY3VzdG9tX2hvc3RbMF0pIHtcblx0ICAgICAgICAvLyBlZ1VybCA9IGVnVXJsLnJlcGxhY2UocmVnLCBjdXN0b21faG9zdFswXSk7XG5cdCAgICAgICAgZWdVcmwgPSAnLy8nICsgY3VzdG9tX2hvc3RbMF0gKyAnL2VnLmpzJztcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGVnVXJsO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDY3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDlr7nlrZfnrKbkuLLov5vooYx0cmlt5aSE55CGXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIOWOu+aOieWtl+espuS4siBzIOWJjeWQjueahOepuuagvFxuXHQgKiBAcGFyYW0gcyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gdHJpbShzKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpID8gcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykgOiAnJztcblx0fTtcblx0ZXhwb3J0cy50cmltID0gdHJpbTtcblxuXG4vKioqLyB9KSxcbi8qIDY4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIHNldDogZnVuY3Rpb24gKGssIHYpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGssIHYpO1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgLy8g57uP6L+HdGVzdOS5i+WQjmdldOW6lOivpeS4jeS8muaciemXrumimFxuXHQgIGdldDogZnVuY3Rpb24gKGspIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgcmV0dXJuICcnO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgdGVzdDogZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHRlc3RLZXkgPSAnZ3JleV90ZXN0X2tleSc7XG5cdCAgICB0cnkge1xuXHQgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0S2V5LCAxKTtcblx0ICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdEtleSk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0ICByZW1vdmU6IGZ1bmN0aW9uIChrKSB7XG5cdCAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGVuX3RvX3NlbmQuanNcblx0ICpcblx0ICogICDkvZznlKjvvJog5L2V5pe25omn6KGMc2VuZHB25o+S5Lu2XG5cdCAqICAgZm46IGdldE1ldGFJbmZvIOe7p+aJv+iHs0Jhc2Vcblx0ICogICBmbjogcnVuICjmj5Lku7bmoIflh4bnmoTmiafooYzlhaXlj6MpXG5cdCAqICAgYXBsdXMtd2FpdGluZz1cIjFcIjog562J5b6FNuenkuWQjuWwneivleWPkemAgVBW5pel5b+XO1xuXHQgKiAgIGFwbHVzLXdhaXRpbmc9XCJNQU5cIjog5LiN6Ieq5Yqo5Y+R6YCBUFbml6Xlv5c7XG5cdCAqICAgYXBsdXMtd2FpdGluZz1cIm5cIjog5YW25LitbuS4uuWkp+S6jjHnmoTmraPmlbTmlbAsIGFwbHVz5Zyo562J5b6Fbuavq+enkuS5i+WQjuWwneivleWPkemAgVBW5pel5b+XO1xuXHQgKlxuXHQgKiAgIGRlcHPvvJog5pegXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6I635Y+WbWV0YV9pbmZvXG5cdCAgICAgKiBUT0RPIOiLpeS7iuWQjuacieWKqOaAgeS/ruaUuW1ldGFfaW5mb+eahOmcgOaxgu+8jFxuXHQgICAgICog5q2k5aSE6ZyA6KaB5Yqo5oCB5LuOIG1ldGFJbmZv5qih5Z2X5Lit5Y676LCD55SoZ2V0SW5mb+aWueazleadpeiOt+WPluebuOWFs+S/oeaBr++8jOi/meagt+WBmueahOWdj+WkhOaYr+a2iOiAl+aAp+iDvVxuXHQgICAgICovXG5cdCAgICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcblx0ICAgICAgcmV0dXJuIG1ldGFfaW5mbztcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0QXBsdXNXYWl0aW5nOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIG1ldGFfaW5mbyA9IHRoaXMuZ2V0TWV0YUluZm8oKSB8fCB7fTtcblx0ICAgICAgcmV0dXJuIG1ldGFfaW5mb1snYXBsdXMtd2FpdGluZyddO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo++8jOmFjee9ruS6hmFwbHVzV2FpdGluZyDlubbkuJQg5pivYXBsdXPoh6rliqjmiZPngrnmiY3otbDov5nmrrXpgLvovpFcblx0ICAgICAqIDxtZXRhIG5hbWU9XCJhcGx1cy13YWl0aW5nXCIgY29udGVudD1cInh4eFwiIC8+XG5cdCAgICAgKiAgIHh4eDogJ01BTicgLSDkuI3lj5HpgIFwdueahOagh+ivhlxuXHQgICAgICogICB4eHg6ICcxJyAtIOWwneivleetieW+hTbnp5LlkI7lj5FwdlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiKOe7iOatouS4remXtOS7tuaJp+ihjCkgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbihzdGF0ZSwgY2IpIHtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpO1xuXHQgICAgICBpZiAoYXBsdXNXYWl0aW5nICYmIGNvbmZpZy5pc19hdXRvKSB7XG5cdCAgICAgICAgYXBsdXNXYWl0aW5nID0gdGhpcy5nZXRBcGx1c1dhaXRpbmcoKSArICcnO1xuXHQgICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2ID0ge1xuXHQgICAgICAgICAgYXBsdXNXYWl0aW5nOiBhcGx1c1dhaXRpbmdcblx0ICAgICAgICB9O1xuXHQgICAgICAgIHN3aXRjaChhcGx1c1dhaXRpbmcpIHtcblx0ICAgICAgICBjYXNlIGFwbHVzU3RhdGljLl9VU0VSX0lEOlxuXHQgICAgICAgIGNhc2UgYXBsdXNTdGF0aWMuX0FOT05ZX0lEOlxuXHQgICAgICAgIGNhc2UgJ01BTic6XG5cdCAgICAgICAgICByZXR1cm4gJ2RvbmUnO1xuXHQgICAgICAgIGNhc2UgJzEnOlxuXHQgICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYuaXNXYWl0ID0gdHJ1ZTtcblx0ICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgY2IoKTtcblx0ICAgICAgICAgIH0sIDYwMDApO1xuXHQgICAgICAgICAgcmV0dXJuIDYwMDA7XG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgIHZhciBuID0gYXBsdXNXYWl0aW5nICogMTtcblx0ICAgICAgICAgIGlmICgobiArICcnKSAhPT0gJ05hTicpIHtcblx0ICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYuaXNXYWl0ID0gdHJ1ZTtcblx0ICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICAgIGNiKCk7XG5cdCAgICAgICAgICAgIH0sIG4pO1xuXHQgICAgICAgICAgICByZXR1cm4gbjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfSxcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB3aGVyZV90b19zZW5kX21pbmlfdW0uanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIOiOt+WPliBtZXRhX2luZm8gXG5cdCAgICAqL1xuXHQgICAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICByZXR1cm4gKF8kLm1ldGFfaW5mbyB8fCB7fSlba2V5XTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SG9zdFVybDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciByaG9zdCA9IHRoaXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcblx0ICAgICAgaWYgKCF1dGlsLmNoZWNrRG9tYWluKHJob3N0KSkge1xuXHQgICAgICAgIHJldHVybiAnJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGxvZ0RvbWFpbiA9IG1pbmkuZ2V0TG9nRG9tYWluKCk7XG5cdCAgICAgIGlmICghbG9nRG9tYWluKSB7XG5cdCAgICAgICAgdWxvZygpLnRpcF93KCflvZPliY3lsI/nqIvluo/moYbmnrbmnKrmlK/mjIHvvIzor7fogZTns7tRVOS6pOS7mOWQjOWtpuWvu+axguW4ruWKqe+8ge+8gScpO1xuXHQgICAgICAgIHJldHVybiAnJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXHQgICAgICB9XG5cdCAgICAgIHZhciB1cmwgPSBbJy8vJywgcmhvc3QsIGxvZ0RvbWFpbl07XG5cdCAgICAgIHJldHVybiB1cmwuam9pbignJyk7XG5cdCAgICB9LFxuXHRcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZCA9ICdQT1NUJztcblx0ICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0SG9zdFVybCgpO1xuXHQgICAgICBpZiAoIXVybCkge1xuXHQgICAgICAgIHJldHVybiAnZG9uZSc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuXHQgICAgICAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuXHQgICAgICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgICAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB1bG9nKCkudygn5LiK5oql5Z+f5ZCN5peg5pWIOiAnICsgdXJsKTtcblx0ICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7IFxuXHQgICAgICAgIC8vICAgbXNnOiAn5LiK5oql5Z+f5ZCN5peg5pWIOiAnICsgdXJsIFxuXHQgICAgICAgIC8vIH0pO1xuXHQgICAgICAgIHJldHVybiAnZG9uZSc7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlcmVfdG9fc2VuZC51cmwgPSB1cmw7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDcxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3doYXRfdG9fc2VuZC5qc1xuXHQgKlxuXHQgKiDkvZznlKjvvJrml6Xlv5flj5HpgIHln7rnoYDlj4LmlbDmlLbpm4bvvJpcblx0ICogICAgICDmjInpobrluo/lsIZhcGx1cy5wdl9kYXRhLmJhc2lj44CBZXhwYXJhbXPjgIFvbGRQYXJhbXPjgIFhcGx1cy5wdl9kYXRhLmV4dHJh5Zub5Lit57G75Z6L55qE5Y+C5pWwbWVyZ2XlnKjkuIDkuKrmlbDnu4TkuK1cblx0ICogZGVwczog5pegXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7ICBcblx0dmFyIGxvZ0lkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cdHZhciB1dGlsUGFyYW1zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciBDTlQgPSBhcGx1c1N0YXRpYy5TUE1fQ05UO1xuXHR2YXIgVVJMID0gYXBsdXNTdGF0aWMuU1BNX1VSTDtcblx0dmFyIFBSRSA9IGFwbHVzU3RhdGljLlNQTV9QUkU7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgZ2V0Q29tbW9uUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIGV0YWcgPSBjb250ZXh0LmV0YWcgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGEgfHwge307XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgcGxhdGZvcm1UeXBlID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BsYXRmb3JtVHlwZScpIHx8IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCk7XG5cdFxuXHQgICAgICB2YXIgdXNlckluZm8gPSB7XG5cdCAgICAgICAgX2Rldl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSxcblx0ICAgICAgICBfYW5vbnlfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCksXG5cdCAgICAgICAgX3VzZXJfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSxcblx0ICAgICAgICBfdXNlcl9uaWNrOiBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpLFxuXHQgICAgICAgIF9zZXNzaW9uX2lkOiBhcGx1cy5nZXRNZXRhSW5mbygnX3Nlc3Npb25faWQnKSxcblx0ICAgICAgICB1YWlkOiAoYXBsdXMuZ2V0TWV0YUluZm8oJ3VhaWQnKSArICcnKSA9PT0gJzEnID8gMSA6IDAsXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgY2xpZW50ID0gYXBsdXMuX2FwbHVzX2NsaWVudCB8fCB7fTtcblx0ICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcblx0XG5cdCAgICAgIHZhciB1cmwgPSAnLSc7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIHBhZ2VJbnN0YW5jZSA9IGdldEN1cnJlbnRQYWdlcygpWzBdO1xuXHQgICAgICAgIHVybCA9IHBhZ2VJbnN0YW5jZS5yb3V0ZSB8fCBwYWdlSW5zdGFuY2UuaXM7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgIFxuXHQgICAgICB2YXIgbG9nSWRLZXkgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHVybDtcblx0ICAgICAgdmFyIGxvZ0lkS2V5MiA9IGNsaWVudC5tb2RlbCArIGNsaWVudC5uZXR3b3JrVHlwZSArIGNvbmZpZy50aXRsZSArIGV0YWcuY25hO1xuXHQgICAgICB2YXIgY2FjaGUgPSAoZ2xvYmFsQ29uZmlnLmlzRGVjb2RlVXJsID8gJ0RDXycgOiAnJykgKyBsb2dJZC5nZXRMb2dJZChsb2dJZEtleSwgbG9nSWRLZXkyKTtcblx0XG5cdCAgICAgIHZhciBhcHBLZXkgPSB1dGlsLmdldEFwcEtleSgpO1xuXHQgICAgICBpZiAoIWFwcEtleSkge1xuXHQgICAgICAgIHVsb2coKS53KCdwbGVhc2Ugc2V0IGFwcEtleSBpbiBhcGx1cyBtZXRhSW5mbyBiZWZvcmUgc2VuZFBWIScpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjb21tb25QYXJhbXMgPSAgT2JqZWN0LmFzc2lnbih7fSwge1xuXHQgICAgICAgIGFwcEtleTogYXBwS2V5LFxuXHQgICAgICAgIGNhY2hlOiBjYWNoZSxcblx0ICAgICAgICBjbmE6IGV0YWcuY25hLFxuXHQgICAgICAgIGV0YWc6IGV0YWcsXG5cdCAgICAgICAgcHJlOiBfJC5wYWdlX3JlZmVycmVyIHx8ICctJyxcblx0ICAgICAgICBzZGtfaW5mbzoge1xuXHQgICAgICAgICAganN2ZXI6IGdsb2JhbENvbmZpZy5zY3JpcHRfbmFtZSxcblx0ICAgICAgICAgIGx2ZXI6IGdsb2JhbENvbmZpZy5sdmVyLFxuXHQgICAgICAgICAgY3VzdG9tU2RrSWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdjdXN0b21TZGtJZCcpIHx8ICcnLFxuXHQgICAgICAgICAgcGxhdGZvcm1UeXBlOiBwbGF0Zm9ybVR5cGUudG9Mb3dlckNhc2UoKSxcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRpdGxlOiBjb25maWcudGl0bGUgfHwgJycsXG5cdCAgICAgICAgdXJsOiB1cmwgfHwgJy0nLFxuXHQgICAgICAgIGNsaWVudDogY2xpZW50LFxuXHQgICAgICAgIHRpbWVab25lOiB1dGlsUGFyYW1zLmdldFRpbWVab25lKCksXG5cdCAgICAgICAgZ21rZXk6IHVzZXJkYXRhLmdta2V5IHx8ICcnLFxuXHQgICAgICAgIG1ldGhvZDogdGhpcy5vcHRpb25zLmNvbnRleHQud2hlcmVfdG9fc2VuZC5tZXRob2Rcblx0ICAgICAgfSwgdXNlckluZm8pO1xuXHQgICAgICBcblx0ICAgICAgdmFyIGdva2V5ID0gdXNlckluZm87XG5cdFxuXHQgICAgICBpZiAoc3BtLnNwbV91cmwpIHtcblx0ICAgICAgICBnb2tleVtVUkxdID0gc3BtLnNwbV91cmwgfHwgJyc7ICBcblx0ICAgICAgfVxuXHQgICAgICBpZiAoc3BtLnNwbV9wcmUpIHtcblx0ICAgICAgICBnb2tleVtQUkVdID0gc3BtLnNwbV9wcmUgfHwgJyc7ICBcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgaWYgKHNwbS5zcG1fY250KSB7XG5cdCAgICAgICAgZ29rZXlbQ05UXSA9IHNwbS5zcG1fY250IHx8ICcnO1xuXHQgICAgICB9XG5cdCAgICAgIGdva2V5W2FwbHVzU3RhdGljLlBWSURdID0gYXBsdXMucHZpZCB8fCAnJztcblx0ICAgICAgY29tbW9uUGFyYW1zLnNlc3Npb25BcmdzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXNlc3Npb24tYXJncycpO1xuXHQgICAgICBjb21tb25QYXJhbXMuZ2xvYmFsQXJncyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1nbG9iYWwtYXJncycpOyAgLy8gMjAyMS0wMS0xNEDkuZ3plKHpnIDmsYJcblx0ICAgICAgLy8g6ZyA6KaB5Yig6Zmk55qE5Luj56CBLS0tLWVuZFxuXHQgICAgICBjb21tb25QYXJhbXMuZ29rZXkgPSBnb2tleTtcblx0ICAgICAgcmV0dXJuIGNvbW1vblBhcmFtcztcblx0ICAgIH0sXG5cdFxuXHRcblx0ICAgIGdldFB2UGFyYW1zOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIGNvbW1vblBhcmFtcyA9IHRoaXMuZ2V0Q29tbW9uUGFyYW1zKCk7XG5cdCAgICAgIGlmICghdGhpcy5vcHRpb25zLmNvbmZpZy5pc19hdXRvKSB7XG5cdCAgICAgICAgY29tbW9uUGFyYW1zLnNka19pbmZvLm1hbnNuZGxvZyA9IDE7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblBhcmFtcywge1xuXHQgICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLlBWX0NPREUsXG5cdCAgICAgICAgbG9ndHlwZTogJzEnLFxuXHQgICAgICAgIGxvZ2tleTogJy92eC5naWYnLFxuXHQgICAgICAgIGV2ZW50X3RpbWVzdGFtcDogYXBsdXMuXyQuc2VuZF9wdl9jb3VudCA+IDAgPyBuZXcgRGF0ZSgpIDogYXBsdXMubG9nQ29uZmlnLnBhZ2VMb2FkVGltZSxcblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldEhqbGpQYXJhbXM6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSBjLnVzZXJkYXRhIHx8IHt9O1xuXHRcblx0ICAgICAgdmFyIGhqbGpQYXJhbXMgPSB7XG5cdCAgICAgICAgZXZlbnRfY29kZTogYXBsdXNTdGF0aWMuRVZFTlRfSURfTUFQW3VzZXJkYXRhLmdta2V5XSB8fCB1c2VyZGF0YS5nbWtleSwgLy8gYXBsdXNTdGF0aWMuT1RIRVJfQ09ERSxcblx0ICAgICAgICBsb2d0eXBlOiAnMicsXG5cdCAgICAgICAgbG9na2V5OiB1c2VyZGF0YS5sb2drZXksXG5cdCAgICAgICAgZXZlbnRfdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuXHQgICAgICAgIC8vIG1hbnNuZGxvZzogJzEnLFxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZ2V0Q29tbW9uUGFyYW1zKCksIGhqbGpQYXJhbXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcblx0ICAgICAqIDEuIGFwbHVz6buY6K6k6ZyA6KaB6YeH6ZuG55qE5Y+C5pWwOiBiYXNpY0xpc3Rcblx0ICAgICAqIDIuIGJlYWNvbuaJqeWxleWPguaVsDogZXhwYXJhbXNcblx0ICAgICAqIDMuIGFwbHVz6buY6K6k6ZyA6KaB6YeH6ZuG55qE5a6i5oi356uv5Y+C5pWwOiBleHRyYUxpc3Rcblx0ICAgICAqIOS4remAlOWkhOeQhl8k5YWo5bGA5Y+Y6YePOiBwcm9jZXNzTG9kYXNoRG9sbGFyXG5cdCAgICAgKiA0LiBsb2NhbFN0b3JhZ2XkuK3lrZjlgqjnmoTkuIrkuIDpobVzcG3kv6Hmga86IHNwbWFidGVzdFxuXHQgICAgICog5Lul5LiKNOmDqOWIhuaLvOijheaIkHB2ZGF0YVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgcGFyYW1zID0ge307XG5cdCAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29uZmlnLnJlY29yZFR5cGUgPT09IFwiUFZcIikge1xuXHQgICAgICAgIHBhcmFtcyA9IHRoaXMuZ2V0UHZQYXJhbXMoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwYXJhbXMgPSB0aGlzLmdldEhqbGpQYXJhbXMoKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IHBhcmFtcztcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogcHZpZFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsSGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpO1xuXHRcblx0dmFyIGdldFJhbmRvbUlkID0gZnVuY3Rpb24gKHNpemUpIHtcblx0ICAvKipcblx0ICAgKiDnlJ/miJDmnKzpobXnmoQgcHYgaWRcblx0ICAgKiBwdiBpZCDlj6rpnIDopoHlvZPliY3nlKjmiLfkvJror53llK/kuIDljbPlj6/vvIzov5nlhL/kvb/nlKjkuIDkuKogNiDkvY3nmoQgMTYg6L+b5Yi25pWw5a2XXG5cdCAgICovXG5cdCAgdmFyIHJuZF9zdHJzID0gJyc7XG5cdCAgdmFyIGNoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcblx0ICB2YXIgaGFuZGxlZCA9IGZhbHNlO1xuXHQgIHZhciBjaGFyO1xuXHRcblx0ICAvKipcblx0ICAgKiDop6PlhrPpg6jliIYgc3BtIOiiqyBHRlcg5aKZ5LqG55qE5oOF5Ya177yM5aaCIDIyLmdsXG5cdCAgICog5o6S6ZmkIHB2aWQg5LulIGdsIOW8gOWktOeahOaDheWGtVxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIGhhbmRsZVBWSWQgKGNoYXJQb3MpIHtcblx0ICAgIHZhciBjaGFyc1dpdGhvdXRHID0gJzAxMjM0NTY3ODlhYmNkZWZoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGSElKS0xNTk9QUVJTVFVWV1hZWic7XG5cdCAgICB2YXIgY2hhcnNXaXRob3V0TCA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamttbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTU5PUFFSU1RVVldYWVonO1xuXHRcblx0ICAgIGlmIChjaGFyUG9zID09IDEpIHtcblx0ICAgICAgcmV0dXJuIGNoYXJzV2l0aG91dEcuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYwKSwgMSk7XG5cdCAgICB9IGVsc2UgaWYgKGNoYXJQb3MgPT0gMikge1xuXHQgICAgICByZXR1cm4gY2hhcnNXaXRob3V0TC5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiAnMCc7XG5cdCAgfTtcblx0XG5cdCAgd2hpbGUgKHJuZF9zdHJzLmxlbmd0aCA8IHNpemUpIHtcblx0ICAgIGNoYXIgPSBjaGFycy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjIpLCAxKTtcblx0ICAgIC8vIOWkhOeQhuiiq+WimeeahOaDheWGte+8jOebruWJjeWPqumSiOWvuWds5byA5aS055qEXG5cdCAgICBpZiAoIWhhbmRsZWQgJiYgcm5kX3N0cnMubGVuZ3RoIDw9IDIgJiYgKGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnZycgfHwgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJykpIHtcblx0ICAgICAgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PT0gMCAmJiBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG5cdCAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjUpIHtcblx0ICAgICAgICAgIGNoYXIgPSBoYW5kbGVQVklkKDEpO1xuXHQgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PSAxICYmIGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnbCcgJiYgcm5kX3N0cnMuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG5cdCAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMik7XG5cdCAgICAgICAgaGFuZGxlZCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJuZF9zdHJzICs9IGNoYXI7XG5cdCAgfVxuXHQgIHJldHVybiBybmRfc3Rycztcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGdldENoYXJzIChhcmdzLCBzaXplLCBkZWZhdWx0VmFsKSB7XG5cdCAgaWYgKGFyZ3MpIHtcblx0ICAgIHJldHVybiB1dGlsSGFzaC5oYXNoKGVuY29kZVVSSUNvbXBvbmVudChhcmdzKSkuc3Vic3RyKDAsIHNpemUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZGVmYXVsdFZhbDtcblx0ICB9XG5cdH1cblx0XG5cdGV4cG9ydHMuZ2V0TG9nSWQgPSBmdW5jdGlvbiAocGFnZVVybCwgbG9nTmFtZSkge1xuXHQgIHZhciByYW5kb204Q2hhcnMgPSBnZXRSYW5kb21JZCg4KTtcblx0ICB2YXIgcmFuZG9tNENoYXJzID0gcmFuZG9tOENoYXJzLnN1YnN0cigwLCA0KTtcblx0ICB2YXIgcmFuZG9tNkNoYXJzID0gcmFuZG9tOENoYXJzLnN1YnN0cigwLCA2KTtcblx0ICByZXR1cm4gW1xuXHQgICAgZ2V0Q2hhcnMocGFnZVVybCwgNCwgcmFuZG9tNENoYXJzKSxcblx0ICAgIGdldENoYXJzKGxvZ05hbWUsIDQsIHJhbmRvbTRDaGFycyksXG5cdCAgICByYW5kb202Q2hhcnNcblx0ICBdLmpvaW4oJycpO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8g5qC55o2u5a+G6ZKlc+WvueWtl+espuS4snN0cui/m+ihjOi9rOS5iVxuXHRleHBvcnRzLmhhc2ggPSBmdW5jdGlvbihzdHIsIHMpIHtcblx0ICB2YXIgZGVmX3YgPSAxMzE1NDIzOTExO1xuXHQgIHZhciBoYXNoID0gcyB8fCBkZWZfdiwgaSwgY2g7XG5cdCAgZm9yIChpID0gc3RyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBjaCA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHQgICAgaGFzaCBePSAoKGhhc2ggPDwgNSkgKyBjaCArIChoYXNoID4+IDIpKTtcblx0ICB9XG5cdCAgdmFyIHJzID0gKGhhc2ggJiAweDdGRkZGRkZGKS50b1N0cmluZygxNik7XG5cdCAgcmV0dXJuIHJzO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICog6L+U5ZueR01U5qC85byP55qE5pe25Yy677yM5aaC77yaR01UKzA1OjQ1LCBHTVQtMDc6MDAsIEdNVCswODowMFxuXHQgKi9cblx0ZXhwb3J0cy5nZXRUaW1lWm9uZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX3RpbWVab25lID0gLW5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSAvIDYwO1xuXHQgIHZhciBfYW5kID0gJysnO1xuXHQgIGlmIChfdGltZVpvbmUgPCAwKSB7XG5cdCAgICBfYW5kID0gJy0nO1xuXHQgIH1cblx0ICB2YXIgem9uZSA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkpO1xuXHQgIHZhciByZW1haW5kZXIgPSBNYXRoLmFicyhwYXJzZUludChfdGltZVpvbmUpIC0gX3RpbWVab25lKTtcblx0ICB2YXIgcmVtYWluZGVyWm9uZSA9ICcwMCc7XG5cdCAgaWYgKHJlbWFpbmRlciA+IDApIHtcblx0ICAgIHJlbWFpbmRlclpvbmUgPSA2MCAqIHJlbWFpbmRlcjtcblx0ICB9XG5cdCAgcmV0dXJuICdHTVQnICsgX2FuZCArICh6b25lID4gOSA/IHpvbmUgOiAoJzAnICsgem9uZSkpICsgJzonICsgcmVtYWluZGVyWm9uZTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDc1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9taW5pYXBwX2RhdGEuanNcblx0ICpcblx0ICog5L2c55So77ya5pel5b+X5Y+R6YCB5Z+656GA5Y+C5pWw5pS26ZuG77yaXG5cdCAqICAgICAg5oyJ6aG65bqP5bCGYXBsdXMucHZfZGF0YS5iYXNpY+OAgWV4cGFyYW1z44CBb2xkUGFyYW1z44CBYXBsdXMucHZfZGF0YS5leHRyYeWbm+S4reexu+Wei+eahOWPguaVsG1lcmdl5Zyo5LiA5Liq5pWw57uE5LitXG5cdCAqIGRlcHM6IOaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcblx0ICAgICAqIDEuIGFwbHVz6buY6K6k6ZyA6KaB6YeH6ZuG55qE5Y+C5pWwOiBiYXNpY0xpc3Rcblx0ICAgICAqIDIuIGJlYWNvbuaJqeWxleWPguaVsDogZXhwYXJhbXNcblx0ICAgICAqIDMuIGFwbHVz6buY6K6k6ZyA6KaB6YeH6ZuG55qE5a6i5oi356uv5Y+C5pWwOiBleHRyYUxpc3Rcblx0ICAgICAqIOS4remAlOWkhOeQhl8k5YWo5bGA5Y+Y6YePOiBwcm9jZXNzTG9kYXNoRG9sbGFyXG5cdCAgICAgKiA0LiBsb2NhbFN0b3JhZ2XkuK3lrZjlgqjnmoTkuIrkuIDpobVzcG3kv6Hmga86IHNwbWFidGVzdFxuXHQgICAgICog5Lul5LiKNOmDqOWIhuaLvOijheaIkHB2ZGF0YVxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgaXNUQkVudiA9IG1pbmkuaXNUQigpO1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBsb2dkYXRhID0gdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgfHwge307XG5cdCAgICAgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuXHQgICAgICB2YXIgY3VycmVudFBhZ2UgID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0gfHwge307XG5cdCAgICAgIGlmIChjdXJyZW50UGFnZSAmJiAhbG9nZGF0YS50aXRsZSkge1xuXHQgICAgICAgIGxvZ2RhdGEudGl0bGUgPSBjdXJyZW50UGFnZS5yb3V0ZSB8fCAnJzsgIFxuXHQgICAgICB9XG5cdCAgICAgIGxvZ2RhdGEudXJsID0gKCFpc1RCRW52ICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA/ICdodHRwczovLycgOiAnJykgKyAoY3VycmVudFBhZ2Uucm91dGUgIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICctJyk7XG5cdFxuXHQgICAgICB2YXIgcHJlID0gJy0nO1xuXHQgICAgICBpZiAocGFnZXMubGVuZ3RoID4gMSkge1xuXHQgICAgICAgIHZhciBwcmVQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMl0gfHwge307XG5cdCAgICAgICAgcHJlID0gKCFpc1RCRW52ICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA/ICdodHRwczovLycgOiAnJykgKyAocHJlUGFnZS5yb3V0ZSB8fCBwcmVQYWdlLmlzIHx8ICctJyk7XG5cdCAgICAgIH1cblx0ICAgICAgbG9nZGF0YS5wcmUgPSBwcmU7XG5cdCAgICAgIGlmIChsb2dkYXRhLnNka19pbmZvKSB7XG5cdCAgICAgICAgbG9nZGF0YS5zZGtfaW5mby53aW5kbWlsbCA9ICcxJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBsb2dkYXRhO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDc2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3BsdWdpbnMvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGEuanNcblx0ICpcblx0ICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG5cdCAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBwdmRhdGHlkI7pnaLvvJpwdmRhdGEuY29uY2F0KHVzZXJkYXRhKVxuXHQgKiAgZGVwczogd2hhdF90b19zZW5kcHZcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDph4fpm4bkuKrmgKfljJblj4LmlbBcblx0ICAgICAqXG5cdCAgICAgKiBnb2tleTpcblx0ICAgICAqICAg6L+Z5Z2X5Li65a+55Y6G5Y+ydXNlcmRhdGHkvKDpgJLnmoTlhbzlrrnlgZrms5XvvIxUT0RP77ya5o6o5Yqo5bqU55So5pa55Y+Y5pu0XG5cdCAgICAgKiAgIOW6lOeUqOaWueS8oOmAkueahGdva2V55qC85byP5bqU55So5pa56Ieq6KGM5Yaz5a6a77yMXG5cdCAgICAgKiAgICAg5aaCIGdva2V5PVwiYT0xJmI9MlwiIOaIliB7XCJhXCI6W3tcImtleVwiOjIwMTYxMjI2MTU1MCxcInZhbHVlXCI6MC4xfSx7XCJrZXlcIjoyMDE2MTIyNjE2MDAsXCJ2YWx1ZVwiOjAuNX0se1wia2V5XCI6MjAxNjEyMjYxNjEwLFwidmFsdWVcIjoxfV19XG5cdCAgICAgKiAgIOi/meWdl+mAu+i+keaYr+mAoOaIkGV4dGVuZGFyZ3PlhoXpg6jlh7rnjrDlpJrkuKrmlpzmnaDnmoTlhYPlh7bvvIHvvIHvvIFcblx0ICAgICAqIHBhZ2VfaWQ6XG5cdCAgICAgKiAgIOaciXBhZ2VfaWTlsLHlnKhzcG1i5Lit5re75Yqg5a2Q5Y+C5pWwXG5cdCAgICAgKiAgIOaXoHBhZ2VfaWTlsLHmuIXpmaRzcG1i5Lit55qE5a2Q5Y+C5pWwXG5cdCAgICAgKiBzcG1fY250XG5cdCAgICAgKiAgIOabtOaUueWujHNwbWLkvY3ov5jpnIDopoHmm7TmlrBzcG1fY250IEDosIvlo6sgaW4gMjAxOC0wMy0yMCAg5Lul5YWNdG9VVOeahHNwbS1jbnTkuKLlpLHliIbmobblj7dcblx0ICAgICAqIOS4quaAp+WMluWPguaVsO+8mlxuXHQgICAgICogICAxLiAoYXBsdXPmpI3lhaUpOiA8bWV0YSBuYW1lPVwiYXBsdXMtY3B2ZGF0YVwiIGNvbnRlbnQ9XCJKU09Oc3RyaW5nXCI+XG5cdCAgICAgKiAgIDIuIOaWueazleS8oOWFpTogYXBsdXMuc2VuZFBWKHtDT05GSUd9LCB7VVNFUkRBVEV9KTtcblx0ICAgICAqIOWPjeS9nOW8iueahOaWh+aho+WuvemrmDogX3B3LF9waFxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4ge09iamVjdH0gey4uLn1cblx0ICAgICAqL1xuXHQgICAgZ2V0VXNlcmRhdGE6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBkID0ge307XG5cdFxuXHQgICAgICBpZiAoY29uZmlnICYmICFjb25maWcuaXNfYXV0bykge1xuXHQgICAgICAgIGlmIChjb25maWcuZ29rZXkpIHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmdva2V5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBkID0gZm9ybWF0LnBhcmFtMm9iaihjb25maWcuZ29rZXkpO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLmdva2V5ID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgICAgICBkID0gY29uZmlnLmdva2V5O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNvbWJvVXNlcmRhdGEgPSBmdW5jdGlvbihfZGF0YSkge1xuXHQgICAgICAgIGlmKGlzQXJyYXkoX2RhdGEpKXtcblx0ICAgICAgICAgIF9kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG5cdCAgICAgICAgICAgIGQgPSBPYmplY3QuYXNzaWduKHt9LCBkLCBpdGVtKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBkID0gT2JqZWN0LmFzc2lnbih7fSwgZCwgX2RhdGEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgICAgY29tYm9Vc2VyZGF0YShhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtY3B2ZGF0YScpKTtcblx0XG5cdCAgICAgIHZhciBjdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgdmFyIHBhZ2VOYW1lID0gY3VycmVudFBhZ2Uucm91dGUgfHwgY3VycmVudFBhZ2UuaXMgfHwgJ3BhZ2UnO1xuXHQgICAgICB2YXIgcGFnZVByb3BlcnRpZXMgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcGFnZS1wcm9wZXJ0aWVzJykgfHwge307XG5cdCAgICAgIHZhciBwYWdlUHJvcGVydHkgPSBwYWdlUHJvcGVydGllc1twYWdlTmFtZV07XG5cdCAgICAgIGlmICh0eXBlb2YgcGFnZVByb3BlcnR5ID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGNvbWJvVXNlcmRhdGEocGFnZVByb3BlcnR5KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcblx0ICAgICAgY29tYm9Vc2VyZGF0YSh1c2VyZGF0YSk7XG5cdFxuXHQgICAgICByZXR1cm4gZDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDmm7TmlrBwcmXvvIjlnKjov5nph4zlgZrnmoTljp/lm6DmmK/vvIxwcmXlj4LmlbDlsZ7kuo5iYXNpY+WPguaVsO+8jOS9huaYr3VzZXJkYXRh5Lit5aaC5Lyg6YCS5LqGcmVmZXJyZXLvvIzlj6/ku6Xopobnm5ZwcmXvvIlcblx0ICAgICAqL1xuXHQgICAgdXBkYXRlUHJlOiBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcucmVmZXJyZXIpIHtcblx0ICAgICAgICBfJC5wYWdlX3JlZmVycmVyID0gY29uZmlnLnJlZmVycmVyO1xuXHQgICAgICAgIGRhdGEucHJlID0gY29uZmlnLnJlZmVycmVyO1xuXHQgICAgICB9XG5cdCAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoJ18kJywgXyQpO1xuXHQgICAgICByZXR1cm4gZGF0YTtcblx0ICAgIH0sXG5cdCAgICAvKipcblx0ICAgICAqIOabtOaWsOmhtemdoueahFVybFxuXHQgICAgICovXG5cdCAgICB1cGRhdGVVcmw6ZnVuY3Rpb24oZGF0YSl7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICBpZihjb25maWcmJmNvbmZpZy5wYWdlVXJsKXtcblx0ICAgICAgICBkYXRhLnVybCA9IGNvbmZpZy5wYWdlVXJsO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBkYXRhO1xuXHQgICAgfSxcblx0ICAgIC8qKlxuXHQgICAgICog5pu05paw5p2l5rqQc3BtXG5cdCAgICAgKi9cblx0ICAgIHVwZGF0ZVNwbVVybDpmdW5jdGlvbihkYXRhKXtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBzcG1VcmwgPSBjb25maWdbYXBsdXNTdGF0aWMuU1BNX1VSTF18fGNvbmZpZy5zcG1Vcmw7XG5cdCAgICAgIGlmKHNwbVVybCl7XG5cdCAgICAgICAgZGF0YS5nb2tleVthcGx1c1N0YXRpYy5TUE1fVVJMXSA9IHNwbVVybDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZGF0YTtcblx0ICAgIH0sXG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGQgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXRVc2VyZGF0YSgpLCBkLnVzZXJkYXRhIHx8IHt9KTtcblx0ICAgICAgZC5nb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGQuZ29rZXksIHVzZXJkYXRhKTtcblx0ICAgICAgZCA9IHRoaXMudXBkYXRlUHJlKGQpO1xuXHQgICAgICBkID0gdGhpcy51cGRhdGVVcmwoZCk7XG5cdCAgICAgIGQgPSB0aGlzLnVwZGF0ZVNwbVVybChkKTtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBkO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC51c2VyZGF0YSA9IGQuZ29rZXk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNzcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvY2FuX3RvX3NlbmRwdi5qc1xuXHQgKlxuXHQgKiDkvZznlKjvvJrliKTmlq1wduiDveWQpuWPkemAge+8jOS4jeWPr+S7peWPkemAgeWImeS8muS4reaWreWQjue7reaJgOacieS4remXtOS7tuaJp+ihjFxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgLyoqXG5cdCAgICAgKiDmmK/lkKbopoHmiafooYxzZW5kcHbnmoTlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBjb3VudCA9IF8kLnNlbmRfcHZfY291bnQgfHwgMDtcblx0ICAgICAgXyQuc2VuZF9wdl9jb3VudCA9ICsrY291bnQ7XG5cdCAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoJ18kJywgXyQpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L3doYXRfdG9faGpsal91c2VyZGF0YS5qc1xuXHQgKlxuXHQgKiAg5o+S5Lu25L2c55So77ya5pS26ZuG5bqU55So5pa56Ieq5a6a5LmJcHblj4LmlbBcblx0ICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsGxvZ2RhdGHlkI7pnaLvvJpsb2dkYXRhLmNvbmNhdCh1c2VyZGF0YSlcblx0ICogIGRlcHM6IHdoYXRfdG9faGpsalxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0Ly8gdmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOmHh+mbhuS4quaAp+WMluWPguaVsFxuXHQgICAgICpcblx0ICAgICAqIHJlY29yZChsb2drZXksIGdta2V5LCBnb2tleSkgQVBJ5Lit55qEZ29rZXlcblx0ICAgICAqIG1ldGE6YXBsdXMtZXhpbmZv5L+h5oGvLCBtZXRhOmFwbHVzLWV4ZGF0YeS/oeaBr1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4ge09iamVjdH0gey4uLn1cblx0ICAgICAqL1xuXHQgICAgZ2V0VXNlckRhdGE6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGMudXNlcmRhdGEgfHwge307XG5cdCAgICAgIHZhciBnb2tleSA9IGMud2hhdF90b19zZW5kLmxvZ2RhdGEuZ29rZXk7XG5cdCAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGZvcm1hdC5wYXJhbTJvYmoodXNlcmRhdGEuZ29rZXkpKTtcblx0ICAgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBnb2tleSwgZm9ybWF0LnBhcmFtMm9iaihhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhpbmZvJyl8fHt9KSk7XG5cdCAgICAgIHZhciBleGRhdGEgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJyk7XG5cdCAgICAgIGlmIChpc0FycmF5KGV4ZGF0YSkpIHtcblx0ICAgICAgICBleGRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcblx0ICAgICAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGl0ZW0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGV4ZGF0YSB8fCB7fSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGdva2V5O1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueJ2RvbmUn57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuICdkb25lJyB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgbG9nZGF0YSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhO1xuXHQgICAgICB2YXIgZ29rZXkgPSB0aGlzLmdldFVzZXJEYXRhKCk7XG5cdCAgICAgIC8vIOW6lOeUqOmAgOWHuuS6i+S7tuavlOi+g+eJueauiu+8jGR1cmF0aW9u5Y2zYXJnMSBA5paH6Z2SXG5cdCAgICAgIGlmIChsb2dkYXRhLmdta2V5ID09PSAnMTAxMCcpIHtcblx0ICAgICAgICBsb2dkYXRhLmFyZzEgPSBnb2tleS5kdXJhdGlvbiB8fCBsb2dkYXRhLmxvZ2tleTtcblx0ICAgICAgfVxuXHQgICAgICBsb2dkYXRhLmdva2V5ID0gZ29rZXk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gbG9nZGF0YTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuXHQgKiBBUEnmj5Lku7Zcblx0ICpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4MCkodGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcblx0ICogQVBJ5o+S5Lu2XG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gbG9nQ29uZmlnIHtcblx0ICogICAgcHY6IHtcblx0ICogICAgICBwbHVnaW5zOiByZXF1aXJlKCcuL2xpYl9sb2cvcGx1Z2luc19wdicpLFxuXHQgKiAgICAgIGNvbnRleHQ6IHJlcXVpcmUoJy4vbGliX2xvZy9jb25maWcvY29uZmlnX3UnKVxuXHQgKiAgICB9LFxuXHQgKiAgICBoamxqOiB7XG5cdCAqICAgICAgcGx1Z2luczogcmVxdWlyZSgnLi9saWJfbG9nL3BsdWdpbnNfaGpsaicpLFxuXHQgKiAgICAgIGNvbnRleHQ6IHJlcXVpcmUoJy4vbGliX2xvZy9jb25maWcvY29uZmlnX2hqbGpfdScpXG5cdCAqICAgIH1cblx0ICogIH1cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxvZ0NvbmZpZykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICBpZiAoYXBsdXMuX2FwbHVzX2FwaSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBhcGx1cy5fYXBsdXNfYXBpID0ge1xuXHQgICAgICBzdGF0dXM6IGFwbHVzU3RhdGljLkNPTVBMRVRFXG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgdmFyIGFwbHVzT2JqID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MSkucnVuLmNyZWF0ZSh7XG5cdCAgICBsb2dDb25maWc6IGxvZ0NvbmZpZ1xuXHQgIH0pO1xuXHQgIGZvciAodmFyIGsgaW4gYXBsdXNPYmopIHtcblx0ICAgIGFwbHVzW2tdID0gYXBsdXNPYmpba107XG5cdCAgfVxuXHQgIHV0aWxHb2xkbG9nLnNldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLCBhcGx1cyk7XG5cdCAgdmFyIG1zZ0FyciA9IFthcGx1c1N0YXRpYy5BUExVUyArICdSZWFkeScsIGFwbHVzU3RhdGljLkNPTVBMRVRFXTtcblx0ICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ0Fycik7XG5cdCAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dBcnIpO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgY2xvbmVEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBSZWR1Y2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cdHZhciBtZXRhSW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgaXNUcml2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0dmFyIF9nZXRQYWdlU3BtID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgaWYgKG15ICYmIG15LmNhbGwgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBteS5jYWxsKCdoYW5kbGVMb2dnaW5nQWN0aW9uJywge1xuXHQgICAgICAndHlwZSc6ICdiZWhhdmlvcicsXG5cdCAgICAgICdzdWJUeXBlJzogb3B0cy5zdWJUeXBlXG5cdCAgICB9LCBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgIHZhciBycyA9IHt9O1xuXHQgICAgICByc1tvcHRzLnNwbVR5cGVdID0gcmVzW29wdHMuc3BtVHlwZV07XG5cdCAgICAgIGNhbGxiYWNrKHJzKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBydW4gPSBCYXNlLmV4dGVuZCh7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEdFVCDor7fmsYLkuIDkuKrlm77niYflnLDlnYDvvIzlkJHmnI3liqHlmajlj5HpgIHmiZPngrlcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB1cmwge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2RhdGFTdHJdIHtTdHJpbmcgfHwgT2JqZWN0fVxuXHQgICAqIEBwYXJhbSBbbWV0aG9kXSB7U3RyaW5nfSAgLy8gUE9TVCBPUiBHRVRcblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdCAgX3NlbmQ6IGZ1bmN0aW9uICh1cmwsIGRhdGEsIG1ldGhvZCwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcblx0ICAgIHVybCA9IHV0aWwuY2FuMmh0dHBzKHVybCk7XG5cdCAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG5cdCAgICAgIG1pbmkucmVxdWVzdCh1cmwsIHtcblx0ICAgICAgICBtZXRob2Q6IG1ldGhvZCxcblx0ICAgICAgICBkYXRhOiBkYXRhLFxuXHQgICAgICAgIGRhdGFUeXBlOiAnYmFzZTY0J1xuXHQgICAgICB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtaW5pLnJlcXVlc3QodXJsICsgJz8nICsgZGF0YSwge1xuXHQgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICAgIGRhdGFUeXBlOiAnYmFzZTY0J1xuXHQgICAgICB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIHJldHVybiB1cmw7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR0VUIOivt+axguS4gOS4quWPr+inhuWMlumFjee9ruS/oeaBr++8jOWQkeacjeWKoeWZqOWPkVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHVybCB7U3RyaW5nfVxuXHQgICAqL1xuXHQgIF9yZXF1ZXN0VlRDb25maWc6IGZ1bmN0aW9uKHVybCwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcblx0ICAgIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuXHQgICAgICAvLyB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcblx0ICAgICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG5cdCAgICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAgICAgfVxuXHQgICAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICAgIH1cblx0ICAgIG1pbmkucmVxdWVzdCh1cmwsIHsgbWV0aG9kOiAnR0VUJyB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIFtPYmplY3RdIGNvbmZpZzoge1xuXHQgICAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuXHQgICAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2Vcblx0ICAgKiAgIHBhZ2VfaWQ6IDEyMywgICAgICAgICAvLyDlsIbkvJrkvZPnjrDlnKhzcG1i5L2N5LiKXG5cdCAgICogICBnb2tleTogJycsICAgICAgICAgICAgLy8g55So5oi36Ieq5a6a5LmJ5Y+C5pWw77yI5ZCR5LiL5YW85a6577yMVE9ET+WQjue7reS4i+aOie+8iVxuXHQgICAqIH1cblx0ICAgKiBAcGFyYW0gW09iamVjdF0gdXNlcmRhdGE6IHtcblx0ICAgKiAgIHJlZmVycmVyOiAnaHR0cDovL3d3dy50YW9iYW8uY29tJyAgIC8vIOWwhuS8muabv+aNonB26K+35rGC55qEcHJl5Y+C5pWwXG5cdCAgICogICB4eHgxOiAndnZ2MScsXG5cdCAgICogICB4eHgyOiAndnZ2MicsXG5cdCAgICogICB4eHhOOiAndnZ2TicsXG5cdCAgICogfSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG5cdCAgICovXG5cdCAgX3NlbmRQVjogZnVuY3Rpb24gKGNvbmZpZywgdXNlcmRhdGEpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcblx0XG5cdCAgICBpZiAoY29uZmlnLnBhZ2VOYW1lKSB7XG5cdCAgICAgIGFwbHVzLl9zZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVUyArICctcGFnZW5hbWUnLCBjb25maWcucGFnZU5hbWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcblx0ICAgIGNvbmZpZy5yZWNvcmRUeXBlID0gJ1BWJzsgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG5cdCAgICBpZiAoIWNvbmZpZy5tZXRob2QpIHtcblx0ICAgICAgY29uZmlnLm1ldGhvZCA9ICdHRVQnO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBwdiA9IGFwbHVzLmxvZ0NvbmZpZy5wdjtcblx0ICAgIHJlZHVjZXIucnVuKHtcblx0ICAgICAgcGx1Z2luczogcHYucGx1Z2lucyxcblx0ICAgICAgY29udGV4dDogY2xvbmVEZWVwKHB2LmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgfSwge1xuXHQgICAgICBjb25maWc6IGNvbmZpZyxcblx0ICAgICAgdXNlcmRhdGE6IHVzZXJkYXRhIHx8IHt9LFxuXHQgICAgICBwdWJzdWJUeXBlOiAncHYnLFxuXHQgICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcHYsXG5cdCAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2J1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDogZrlkIjkuIrmiqXku6Tnrq3ml6Xlv5dcblx0ICAgKlxuXHQgICAqIEBwYXJhbXMge1N0cmluZ30gbG9na2V577yI5b+F5aGr77yJXG5cdCAgICogQHBhcmFtcyB7U3RyaW5nfSBnbWtlee+8iOW/heWhq++8iSDmnprkuL7lgLzvvJogQ0xLIOWSjCBFWFBcblx0ICAgKiBAcGFyYW1zIHtBcnJheU9iamVjdH0gZ29rZXlz77yI5b+F5aGr77yJ5YaF572u55qE5a+56LGh5Y+C5pWw5qC85byP5aaC77yaXG5cdCAgICogIFt7XG5cdCAgICogICAgXCJleGFyZ3NcIjogeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5oql55qE6Ieq5a6a5LmJ5Y+C5pWw77yM5YaF5a655Z2H5Li65Y+v6YCJ77yM5aaC5peg6Ieq5a6a5LmJ5Y+C5pWw5YiZ5Lyg56m65a+56LGhXG5cdCAgICogICAgICBcIl93XCI6IDM3NSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X5a695bqmXG5cdCAgICogICAgICBcIl9oXCI6IDE4OCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X6auY5bqmXG5cdCAgICogICAgICBcIl94XCI6IDAsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X5qiq5Z2Q5qCHXG5cdCAgICogICAgICBcIl95XCI6IDg3LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X57q15Z2Q5qCHXG5cdCAgICogICAgICBcIl9yYXRlXCI6IFwiMS4wMFwiLCAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnpnaLnp6/mr5Tkvotcblx0ICAgKiAgICAgIFwiX3ZpZXdhYmlsaXR5XCI6IFwiaW50ZXJzZWN0aW9uXCIsICAgICAgIC8vIOabneWFieaWueW8jyBpbnRlcnNlY3Rpb24g5oiWIGZpbGx3aW5kb3dcblx0ICAgKiAgICAgIC8vIOmZpOS6huS4iui/sOS/neeVmeWPguaVsOWklueahOWFtuS7luWPguaVsGtleS12YWx1ZeiHquihjOWumuS5ie+8mlxuXHQgICAqICAgICAgXCJ5b3VyS2V5MVwiOiBcInlvdXJWYWx1ZTFcIiwgICAgICAgIFxuXHQgICAqICAgICAgXCJ5b3VyS2V5MlwiOiBcIiVFNCVCOCVBRCVFNSU5QiVCRFwiICAgICAgLy8g5aaC5Li65Lit5paH77yM5YiZ6ZyA6Ieq6KGM57yW56CBXG5cdCAgICogICAgICAuLi4uLi5cblx0ICAgKiAgICB9LFxuXHQgICAqICAgIFwic2NtXCI6IFwiYS5iLmMuZFwiLCAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nt5Li65Y+v6YCJ5Y+C5pWw77yM5aaC5peg5YiZ5Lyg56m65YC8XG5cdCAgICogICAgXCJzcG1cIjogXCJzcG1hLnNwbWIuc3BtYy5zcG1kXCIsICAgICAgICAgICAvLyBzcG3kuLrlv4XpgInlj4LmlbDvvIzkvb/nlKjmoIflh4bnmoTlm5vmrrXlvI9cblx0ICAgKiAgICBcImFwbHVzQ29udGVudElkXCI6IFwiXCIgICAgICAgICAgICAgICAgICAgIC8vIOS/neeVmeWtl+aute+8jOaaguaXtuS4jemcgOimgeS8oFxuXHQgICAqICB9XVxuXHQgICAqIEBwYXJhbXMge1N0cmluZ30gbWV0aG9k77yI5Y+v6YCJ77yJICAgICAgICAgICAgICAvLyDmnprkuL7lgLzvvJogR0VU5ZKMUE9TVO+8jOm7mOiupOS9v+eUqFBPU1TmlrnlvI/kuIrmiqVcblx0ICAgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2IgICAgICAgICAgICAgICAgICAgICAgLy8g5L+d55WZ5bGe5oCn77yM5pqC5pe25LiN6ZyA6KaB5LygXG5cdCAgICovXG5cdCAgX2NvbWJpbmVSZWNvcmQ6IGZ1bmN0aW9uKGxvZ2tleSwgZ21rZXksIGdva2V5cywgbWV0aG9kKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICB2YXIgRVhQID0gJ0VYUCc7XG5cdCAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpICYmIChnbWtleSA9PT0gRVhQIHx8IGdta2V5ID09PSAnQ0xLJykpIHtcblx0ICAgICAgaWYgKGlzQXJyYXkoZ29rZXlzKSkge1xuXHQgICAgICAgIGlmICghbWV0aG9kKSB7XG5cdCAgICAgICAgICBtZXRob2QgPSAnUE9TVCc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB1c2VyZGF0YSA9IFtdO1xuXHQgICAgICAgIHZhciBzZW5kdG9teSA9ICd0cnVlJztcblx0ICAgICAgICBnb2tleXMuZm9yRWFjaChmdW5jdGlvbih2KXtcblx0ICAgICAgICAgIHVzZXJkYXRhLnB1c2goe1xuXHQgICAgICAgICAgICBleGFyZ3M6IHR5cGVvZiB2LmV4YXJncyA9PT0gJ29iamVjdCcgPyB2LmV4YXJncyA6IHt9LFxuXHQgICAgICAgICAgICBzY206IHYuc2NtLFxuXHQgICAgICAgICAgICBzcG06IHYuc3BtLFxuXHQgICAgICAgICAgICBhcGx1c0NvbnRlbnRJZDogdi5hcGx1c0NvbnRlbnRJZCxcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgaWYgKHYuX2FwbHVzX3NlbmR0b215ID09PSAnZmFsc2UnICYmIHNlbmR0b215ID09PSAndHJ1ZScpIHtcblx0ICAgICAgICAgICAgc2VuZHRvbXkgPSAnZmFsc2UnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHZhciBfZ29rZXlzID0gW107XG5cdCAgICAgICAgX2dva2V5cy5wdXNoKChnbWtleSA9PT0gRVhQID8gJ2V4cGRhdGE9JyA6ICdjbGtkYXRhPScpICsgSlNPTi5zdHJpbmdpZnkodXNlcmRhdGEpKTtcblx0ICAgICAgICBfZ29rZXlzLnB1c2goZ21rZXkgPT09IEVYUCA/ICdfaXNfYXV0b19leHA9MScgOiAnX2lzX2F1dG9fY2xrPTEnKTtcblx0ICAgICAgICBfZ29rZXlzLnB1c2goJ19ldmVudFR5cGU9Y3VzdG9tJyk7XG5cdCAgICAgICAgX2dva2V5cy5wdXNoKCdfbWV0aG9kPScgKyBtZXRob2QpO1xuXHQgICAgICAgIF9nb2tleXMucHVzaCgnX3BrZ1NpemU9JyArIGdva2V5cy5sZW5ndGgpO1xuXHQgICAgICAgIGlmIChzZW5kdG9teSA9PT0gJ2ZhbHNlJykge1xuXHQgICAgICAgICAgX2dva2V5cy5wdXNoKCdfYXBsdXNfc2VuZHRvbXk9ZmFsc2UnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYXBsdXMucmVjb3JkKGxvZ2tleSwgZ21rZXksIF9nb2tleXMuam9pbignJicpLCBtZXRob2QpOyAgXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY29uc29sZS53YXJuKCd0eXBlIG9mIGdva2V5cyBtdXN0IGJlIEFycmF5T2JqZWN0IScpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjb25zb2xlLndhcm4oJ29ubHkgc3VwcG9ydCBFWFAgb3IgQ0xLIGxvZyB0byBjb21iaWxlIHJlY29yZCEnKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlj5HpgIHpu4Tph5Hku6Tnrq3miZPngrlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbG9na2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGdta2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGdva2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCDor7fmsYLmlrnms5XkuLogUE9TVCBvciBHRVRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gY2Jcblx0ICAgKi9cblx0ICBfcmVjb3JkOiBmdW5jdGlvbiAobG9na2V5LCBnbWtleSwgZ29rZXksIG1ldGhvZCwgY2IpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIGxvZ2tleSA9IGxvZ2tleSArICcnO1xuXHQgICAgaWYgKGxvZ2tleSAmJiBsb2drZXkuaW5kZXhPZignLycpICE9PSAwICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICBsb2drZXkgPSAnLycgKyBsb2drZXk7XG5cdCAgICB9XG5cdCAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG5cdCAgICB2YXIgaGpsaiA9IGFwbHVzLmxvZ0NvbmZpZy5oamxqO1xuXHQgICAgcmVkdWNlci5ydW4oe1xuXHQgICAgICBwbHVnaW5zOiBoamxqLnBsdWdpbnMsXG5cdCAgICAgIGNvbnRleHQ6IGNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgfSwge1xuXHQgICAgICBjb25maWc6IHtcblx0ICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcblx0ICAgICAgICBtZXRob2Q6IG1ldGhvZCB8fCAnR0VUJ1xuXHQgICAgICB9LFxuXHQgICAgICB1c2VyZGF0YToge1xuXHQgICAgICAgIGxvZ2tleTogbG9na2V5LFxuXHQgICAgICAgIGdta2V5OiBnbWtleSxcblx0ICAgICAgICBnb2tleTogZ29rZXlcblx0ICAgICAgfSxcblx0ICAgICAgcHVic3ViVHlwZTogJ2hqbGonLFxuXHQgICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcmVjb3JkLFxuXHQgICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuXHQgICAgfSwgZnVuY3Rpb24oKXtcblx0ICAgICAgaWYgKGlzRnVuY3Rpb24oY2IpKSB7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9LFxuXHQgIFxuXHQgIGdldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuXHQgICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcblx0ICAgIHZhciBkYXRhID0gc3BtLmRhdGEgfHwge307XG5cdCAgICByZXR1cm4gW2RhdGEuYSwgZGF0YS5iXTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDmm7TmlrDpobXpnaLnmoQgYeOAgWIg5L2NXG5cdCAgICog6ZyA5rGC5Y+C6KeB77yaaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vYWxpbG9nL2tiL2lzc3Vlcy8xMzdcblx0ICAgKiBAcGFyYW0gYSB7U3RyaW5nfVxuXHQgICAqIEBwYXJhbSBbYl0ge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2NiXSB7RnVuY3Rpb259XG5cdCAgICovXG5cdCAgX3NldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvYmogPSB7fTtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgdmFyIGNiO1xuXHQgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBvYmogPSBhcmdzWzBdO1xuXHQgICAgICBjYiA9IGFyZ3NbMV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvYmouc3BtQ250ID0gW2FyZ3NbMF0sIGFyZ3NbMV0sICcwJywgJzAnXS5qb2luKCcuJyk7XG5cdCAgICAgIGNiID0gYXJnc1syXTtcblx0ICAgIH1cblx0ICAgIHZhciBtc2dzO1xuXHQgICAgaWYgKCFvYmouc3BtQ250ICYmICFvYmouc3BtVXJsICYmIG1ldGFJbmZvLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykpIHtcblx0ICAgICAgbXNncyA9IFsnY2xlYXJQYWdlU1BNJ107XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvKipcblx0ICAgICAgICogQHBhcmFtcyBvYmoge09iamVjdH0ge1xuXHQgICAgICAgKiAgIHNwbUNudDogJ2EuYi4wLjAnXG5cdCAgICAgICAqICAgc3BtVXJsOiAnYS5iLjAuMCdcblx0ICAgICAgICogICBzcG1QcmU6ICdhLmIuMC4wJ1xuXHQgICAgICAgKiB9XG5cdCAgICAgICAqL1xuXHQgICAgICBtc2dzID0gWydzZXRQYWdlU1BNJywgb2JqXTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICAgIH1cblx0ICAgIHZhciBjYWxsYmFjayA9IHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyA/IGNiIDogZnVuY3Rpb24gKCkge307XG5cdCAgICBjYWxsYmFjayhtc2dzKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDliqjmgIHphY3nva5tZXRhXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gdlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIHtcblx0ICAgKiAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcblx0ICAgKiB9XG5cdCAgICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICAgKi9cblx0ICBfc2V0TWV0YUluZm86IGZ1bmN0aW9uKGFyZzEsIHZhbHVlKSB7XG5cdCAgICByZXR1cm4gbWV0YUluZm8uX3NldE1ldGFJbmZvKGFyZzEsIHZhbHVlKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCMzMzJkZTYyY1xuXHQgICAqIOS4jeaUr+aMgXVwZGF0ZVBhZ2VQcm9wZXJ0aWVz77yM5pS555So5pu/5Luj5pa55qGIc2V0TWV0YUluZm9cblx0ICAgKiBAcGFyYW1zIHtTdHJpbmd9IOmAj+S8oGpzb27lrZfnrKbkuLLvvIzlv4XpobvmmK/lrZfnrKbkuLJcblx0ICAgKi9cblx0ICBfdXBkYXRlUGFnZVByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhcmFtcyl7XG5cdCAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgLy8g5paw5a655ZmoVHJpdmVy6YeH55SodXBkYXRlUGFnZVByb3BlcnRpZXNcblx0ICAgICAgaWYgKGlzVHJpdmVyKCkpIHtcblx0ICAgICAgICBteS5yZXBvcnRBbmFseXRpY3MoJ3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzJywgcGFyYW1zKTtcblx0ICAgICAgfSBlbHNlIGlmKG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCk9PT0nbXknKXtcblx0ICAgICAgICBteS5jYWxsKCdyZXBvcnREYXRhJyx7XG5cdCAgICAgICAgICBzcG1EZXRhaWw6cGFyYW1zLFxuXHQgICAgICAgICAgaWdub3JlRGVmYXVsdFBhZ2VNb25pdG9yOnRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICAvLyDlkJHkuIvlhbzlrrnvvIzkuI3nrqHmgI7kuYjmoLfpg73lvoBtZXRhSW5mb+iuvue9ruS4gOS7vVxuXHQgICAgICB2YXIgY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgIHZhciBwYWdlTmFtZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICdwYWdlJztcblx0ICAgICAgdmFyIGRhdGEgPSB7fTtcblx0ICAgICAgZGF0YVtwYWdlTmFtZV0gPSBwYXJhbXM7XG5cdCAgICAgIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1wYWdlLXByb3BlcnRpZXMnLCBkYXRhKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIGh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9wcm9qZWN0L2FwbHVzX2Nsb3VkIzYwMzRjMWRhXG5cdCAgICovXG5cdCAgX3VwZGF0ZU5leHRQYWdlUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgICAgaWYgKCFwYXJhbXMpIHtcblx0ICAgICAgcGFyYW1zID0ge307XG5cdCAgICB9XG5cdCAgICBpZiAobXkpIHtcblx0ICAgICAgdmFyIGRhdGEgPSB7XG5cdCAgICAgICAgdHlwZTogJ3VwZGF0ZU5leHRQcm9wJyxcblx0ICAgICAgICBldmVudElkOiAtMSxcblx0ICAgICAgICBldmVudGlkOiAtMSxcblx0ICAgICAgICBuYW1lOiAnJyxcblx0ICAgICAgICBwYWdlTmFtZTogJycsXG5cdCAgICAgICAgY29tTmFtZTogJycsXG5cdCAgICAgICAgYXJnMTogJycsXG5cdCAgICAgICAgYXJnMjogJycsXG5cdCAgICAgICAgYXJnMzogJycsXG5cdCAgICAgICAgcGFyYW06IHBhcmFtcyxcblx0ICAgICAgICBwYXJhbXM6IHBhcmFtc1xuXHQgICAgICB9O1xuXHQgICAgICBpZiAobXkuY2FsbFVzZXJUcmFjaykge1xuXHQgICAgICAgIG15LmNhbGxVc2VyVHJhY2soJ2NvbW1pdHV0JywgZGF0YSk7XG5cdCAgICAgIH0gZWxzZSBpZiAobXkucmVwb3J0QW5hbHl0aWNzKSB7XG5cdCAgICAgICAgbXkucmVwb3J0QW5hbHl0aWNzKCdlbnRlcicsIGRhdGEpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG5cdCAgICogT3RoZXJ3aXNlLCBtZXJnZSBjb250ZW50IGF0dHJpYnV0ZXM6XG5cdCAgICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG5cdCAgICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuXHQgICAqICBAcGFyYW0ga1xuXHQgICAqICBAcGFyYW0gdlxuXHQgICAqL1xuXHQgIF9hcHBlbmRNZXRhSW5mbzogbWV0YUluZm8uYXBwZW5kTWV0YUluZm8sXG5cdFxuXHQgIC8qKlxuXHQgICAqIGdldCBtZXRhSW5mbyBieSBrZXlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ31cblx0ICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICovXG5cdCAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uIChrKSB7XG5cdCAgICByZXR1cm4gbWV0YUluZm8uZ2V0TWV0YUluZm8oayk7XG5cdCAgfSxcblx0XG5cdCAgLy8g5rex5bqm5YWL6ZqG77yM5LuO5qC45b+D5bqT5pq06Zyy5Ye65Y675L6bYXBsdXNKU+aPkuS7tuS9v+eUqFxuXHQgIGNsb25lRGVlcDogY2xvbmVEZWVwLFxuXHQgIC8qKlxuXHQgICAqIOWmguaenOWuueWZqOWunueOsOS6hmFwcGVhcuOAgWRpc2FwcGVhcu+8jOS9huS4muWKoeWPiOaDs+aJi+WKqOaOp+WItuaJk+eCueeUn+WRveWRqOacn+aXtuS9v+eUqFxuXHQgICAqXG5cdCAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuXHQgICAqL1xuXHQgIF9za2lwUGFnZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKCkge1xuXHQgICAgLy8gVXNlclRyYWNrLnNraXBQYWdlKCk7XG5cdCAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuXHQgICAgICBteS5jYWxsVXNlclRyYWNrKCdza2lwUGFnZScpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgLyoqXG5cdCAgICog5aaC5p6c5a655Zmo5pyq5o+Q5L6bYXBwZWFy44CBZGlzYXBwZWFy5pe26ZyA6KaB5Lia5Yqh5omL5Yqo6LCD55SoXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG5cdCAgICovXG5cdCAgX3BhZ2VBcHBlYXI6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCl7XG5cdCAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjayAmJiB0aGlzLmlzUGFnZURpc0FwcGVhcikge1xuXHQgICAgICB0aGlzLmlzUGFnZURpc0FwcGVhciA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmlzUGFnZUFwcGVhciA9IHRydWU7XG5cdCAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3BhZ2VBcHBlYXInKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIOWmguaenOWuueWZqOacquaPkOS+m2FwcGVhcuOAgWRpc2FwcGVhcuaXtumcgOimgeS4muWKoeaJi+WKqOiwg+eUqFxuXHQgICAqXG5cdCAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuXHQgICAqL1xuXHQgIF9wYWdlRGlzYXBwZWFyOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbigpe1xuXHQgICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2sgJiYgdGhpcy5pc1BhZ2VBcHBlYXIpIHtcblx0ICAgICAgdGhpcy5pc1BhZ2VEaXNBcHBlYXIgPSB0cnVlO1xuXHQgICAgICB0aGlzLmlzUGFnZUFwcGVhciA9IGZhbHNlO1xuXHQgICAgICBteS5jYWxsVXNlclRyYWNrKCdwYWdlRGlzYXBwZWFyJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBfdXBkYXRlUGFnZVV0cGFyYW06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICAgIGlmICghcGFyYW1zKSB7XG5cdCAgICAgIHBhcmFtcyA9IHt9O1xuXHQgICAgfVxuXHQgICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2spIHtcblx0ICAgICAgbXkuY2FsbFVzZXJUcmFjaygndXBkYXRlUGFnZVV0cGFyYW0nLCB7XG5cdCAgICAgICAgJ3V0UGFyYW1Kc29uJzogSlNPTi5zdHJpbmdpZnkocGFyYW1zKVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBfdXBkYXRlTmV4dFBhZ2VVdHBhcmFtOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYXJhbXMpe1xuXHQgICAgaWYgKCFwYXJhbXMpIHtcblx0ICAgICAgcGFyYW1zID0ge307XG5cdCAgICB9XG5cdCAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuXHQgICAgICBteS5jYWxsVXNlclRyYWNrKCd1cGRhdGVOZXh0UGFnZVV0cGFyYW0nLCB7XG5cdCAgICAgICAgJ3V0UGFyYW1Kc29uJzogSlNPTi5zdHJpbmdpZnkocGFyYW1zKVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDku4XmiYvmt5jvvIhWOS4xMC4w77yJ5bCP56iL5bqP5pSv5oyBXG5cdCAgICogQHBhcmFtcyB7T2JqZWN0fSBwcm9wZXJ0aWVzXG5cdCAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuXHQgICAqL1xuXHQgIF91cGRhdGVTZXNzaW9uUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcblx0ICAgIC8vIGlmIChteSAmJiBteS5yZXBvcnRBbmFseXRpY3MgJiYgdHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICAvLyAgIG15LnJlcG9ydEFuYWx5dGljcygndXBkYXRlU2Vzc2lvblByb3BlcnRpZXMnLCBwcm9wZXJ0aWVzKTtcblx0ICAgIC8vIH1cblx0ICAgIGlmIChteSAmJiBteS5jYWxsICYmIHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBteS5jYWxsKCdoYW5kbGVMb2dnaW5nQWN0aW9uJywge1xuXHQgICAgICAgIHR5cGU6ICdiZWhhdmlvcicsXG5cdCAgICAgICAgc3ViVHlwZTogJ3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzJyxcblx0ICAgICAgICBleHREYXRhOiBwcm9wZXJ0aWVzLFxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIOS7heaJi+a3mO+8iFY5LjkuMO+8ieWwj+eoi+W6j+aUr+aMgVxuXHQgICAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjazoge3NwbVVybDogJyd9XG5cdCAgICovXG5cdCAgX2dldFBhZ2VTcG1Vcmw6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgX2dldFBhZ2VTcG0oe1xuXHQgICAgICBzdWJUeXBlOiAnZ2V0UGFnZVNwbVVybCcsXG5cdCAgICAgIHNwbVR5cGU6ICdzcG1VcmwnXG5cdCAgICB9LCBjYWxsYmFjayk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5LuF5omL5reY77yIVjkuOS4w77yJ5bCP56iL5bqP5pSv5oyBXG5cdCAgICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrIDoge3NwbVByZTogJyd9XG5cdCAgICovXG5cdCAgX2dldFBhZ2VTcG1QcmU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgX2dldFBhZ2VTcG0oe1xuXHQgICAgICBzdWJUeXBlOiAnZ2V0UGFnZVNwbVByZScsXG5cdCAgICAgIHNwbVR5cGU6ICdzcG1QcmUnXG5cdCAgICB9LCBjYWxsYmFjayk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog6K6+572uUGFnZU5hbWUgXG5cdCAgKi9cblx0ICBfc2V0UGFnZU5hbWU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhZ2VOYW1lLCBwYXRoKSB7XG5cdCAgICBpZiAoIXBhZ2VOYW1lKSB7XG5cdCAgICAgIHVsb2coKS53KCdzZXRQYWdlTmFtZSBmYWlsZWQ6ICcgKyAnIHBhZ2VOYW1lPScgKyBwYWdlTmFtZSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBjdXJQYXRoID0gcGF0aCB8fCBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcblx0ICAgIFxuXHQgICAgdmFyIHBhZ2VNZXRhID0gY2xvbmVEZWVwKG1ldGFJbmZvLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykgfHwge30pO1xuXHQgICAgcGFnZU1ldGFbY3VyUGF0aF0gPSBwYWdlTmFtZTtcblx0ICAgIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKCdwYWdlQ29uZmlnJywgcGFnZU1ldGEpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOiOt+WPllBhZ2VOYW1lXG5cdCAgKi9cblx0ICBnZXRQYWdlTmFtZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGF0aCkge1xuXHQgICAgcmV0dXJuIFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKHBhdGgpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOiOt+WPluWFg+e0oOeahHNwbVxuXHQgICAqICovIFxuXHQgIF9nZXRFbGVtZW50U1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbih0YXJnZXQsIGNhbGxiYWNrKSB7XG5cdCAgICBpZiAoIXRhcmdldCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIHZhciBzcG1CID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCAnJzsgXG5cdFxuXHQgICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHZhciB0cmFja2VyUGFyYW1zID0gdGFyZ2V0LmRhdGFzZXQgJiYgdGFyZ2V0LmRhdGFzZXQudHJhY2tlclBhcmFtcyB8fCAnJztcblx0ICAgICAgdmFyIHNwbUNEID0gdXRpbC5qc29uTGlrZVN0cjJKU09OKHRyYWNrZXJQYXJhbXMpO1xuXHQgICAgICByZXR1cm4gW3NwbUIsIHNwbUNELnNwbUMsIHNwbUNELnNwbURdLmpvaW4oJy4nKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgICAgdmFyIGF1dG9fY2xrX21ldGFpbmZvID0gbWV0YUluZm8uZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJykgfHwgW107XG5cdCAgICAgIHZhciBhdXRvX2V4cF9tZXRhaW5mbyA9IG1ldGFJbmZvLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpIHx8IFtdO1xuXHQgICAgICB2YXIgdGFyZ2V0U3BtO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBpO1xuXHQgICAgICAgIC8v6Ieq5Yqo54K55Ye75LyY5YWI57qn5pu06auYXG5cdCAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXV0b19jbGtfbWV0YWluZm8ubGVuZ3RoOyBpKyspe1xuXHQgICAgICAgICAgdmFyIGNsa19pbmZvID0gYXV0b19jbGtfbWV0YWluZm9baV07XG5cdCAgICAgICAgICBpZiAoY2xrX2luZm8uY3NzU2VsZWN0b3IgPT09IHRhcmdldCkge1xuXHQgICAgICAgICAgICB0YXJnZXRTcG0gPSBbc3BtQiwgY2xrX2luZm8uc3BtQywgY2xrX2luZm8uc3BtRF0uam9pbignLicpO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIFxuXHQgICAgICAgIGZvcihpID0gMDsgaSA8IGF1dG9fZXhwX21ldGFpbmZvLmxlbmd0aDsgaSsrKXtcblx0ICAgICAgICAgIHZhciBleHBfaW5mbyA9IGF1dG9fZXhwX21ldGFpbmZvW2ldO1xuXHQgICAgICAgICAgaWYgKGV4cF9pbmZvLmNzc1NlbGVjdG9yID09PSB0YXJnZXQpIHtcblx0ICAgICAgICAgICAgdGFyZ2V0U3BtID0gW3NwbUIsIGV4cF9pbmZvLnNwbUMsIGV4cF9pbmZvLnNwbURdLmpvaW4oJy4nKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTsgXG5cdFxuXHQgICAgICAgIHZhciBlbGVtZW50cyA9IGN0eC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKHRhcmdldCk7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50cy5maWVsZHMgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG5cdCAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG5cdCAgICAgICAgICAgIGlkOiB0cnVlLFxuXHQgICAgICAgICAgfSwgZnVuY3Rpb24ocmV0KSB7XG5cdCAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcblx0ICAgICAgICAgICAgaWYgKHJldCAmJiByZXQubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHJldC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGFyZ2V0U3BtICsgJ18nICsgaSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdCk7ICBcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pLmV4ZWMoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG5cdCAgICAgICAgdWxvZygpLncoJ+ivpeW5s+WPsOS4jeaUr+aMgWRvbeWFg+e0oOafpeivoiwgZXJyID0gJywgZXJyb3IpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5Lmd6ZSh6ZyA5rGC77yaaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9seGxuN2gvYnZ6eW1yL2FrYjQ5ZiNoUGFYTFxuXHQgICAqIGFwcOWUpOi1t+S6i+S7tuaOpeWPo++8jOWunumZheWwseaYr3JlY29yZFxuXHQgICAqL1xuXHQgIF9yZWNvcmRBcHBMaW5rOiBmdW5jdGlvbiAoZ29rZXksIG1ldGhvZCwgY2IpIHtcblx0ICAgIGlmKCFnb2tleS50YXJnZXRBcHBLZXkpIHtcblx0ICAgICAgdWxvZygpLncoJ3NlbmQgJCRfYXBwX2xpbmsgZmFpbGVkOiB0YXJnZXRBcHBLZXkgaXMgbnVsbCcpO1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICByZXR1cm4gYXBsdXMuX3JlY29yZCgnJCRfYXBwX2xpbmsnLCAnT1RIRVInLCBnb2tleSwgbWV0aG9kLCBjYik7XG5cdCAgfSxcblx0fSk7XG5cdFxuXHRleHBvcnRzLnJ1biA9IHJ1bjtcblxuXG4vKioqLyB9KSxcbi8qIDgyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIENvbXBvc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKTtcblx0dmFyIHBsdWdpbnNMb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KTtcblx0XG5cdC8qKlxuXHQgKiBzZW5wdlxuXHQgKiBAcGFyYW0gW09iamVjdF0gY29uZmlnOiB7XG5cdCAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuXHQgKiAgIGlzX2F1dG86IHRydWUvZmFsc2XvvIwgLy8g5qCH6K+G5piv5ZCm6Ieq5Yqo5omT54K577yM6buY6K6k5Li6dHJ1Ze+8jOWNlemhteW6lOeUqOmcgOimgeS8oGZhbHNlXG5cdCAqICAgcGFnZV9pZDogMTIzLCAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuXHQgKiAgIGdva2V5OiAnJywgICAgICAgICAgIC8vIOebruWJjeW3sue7j+WkseaViFxuXHQgKiAgIHJlZmVycmVyOiAnaHR0cDovL3d3dy50YW9iYW8uY29tJyAgIC8vIOWwhuS8muabv+aNonB26K+35rGC55qEcHJl5Y+C5pWwXG5cdCAqIH0gLy8g5ZCMIGFwbHVzLmxhdW5jaOesrOS6jOS4quWFpeWPguKAnG1hbnVhbOKAnVxuXHQgKlxuXHQgKiBAcGFyYW0gW09iamVjdF0gdXNlcmRhdGEgICAvLyDlkITnp43oh6rlrprkuYlwduWPguaVsFxuXHQgKlxuXHQgKiBAcGFyYW0gW09iamVjdF0gb2JqIC0ge2ZuX2FmdGVyX3B2OiBmbl9hZnRlcl9wdiwgeHh4OiB4eHh9XG5cdCAqXG5cdCAqIHN0ZXAxOiBsb2FkZXIgcGx1Z2lucyAgbWlkZGxld2FyZVxuXHQgKiBzdGVwMjogbG9hZGVyIGRvU2VuZFB2IG1pZGRsZXdhcmVcblx0ICogc3RlcDM6IHJ1biBtaWRkbGV3YXJlc1xuXHQgKi9cblx0XG5cdHZhciBSZWR1Y2VyID0gZnVuY3Rpb24oKSB7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyBPYmplY3QgQ09ORklHIHtcblx0ICogICBjb250ZXh0OiB4eHgsXG5cdCAqICAgcGx1Z2luczogeHh4IFxuXHQgKiB9XG5cdCAqIEBwYXJhbXMgT2JqZWN0IG9wdHMge1xuXHQgKiAgIGNvbmZpZzogY29uZmlnLFxuXHQgKiAgIHVzZXJkYXRhOiB1c2VyZGF0YSxcblx0ICogICBwdWJzdWJUeXBlOiAncHYnIHx8ICdoamxqJyB8fCAncHJlcHYnXG5cdCAqICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfcHYnIHx8ICdtd19jaGFuZ2VfaGpsaicgfHwgJ213X2NoYW5nZV9wcmVwdidcblx0ICogICBtZXNzYWdlRm5RdWV1ZTogW2ZuMSwgZm4yIC4uLl1cblx0ICogfVxuXHQgKi9cblx0UmVkdWNlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKENPTkZJRywgb3B0cywgY2FsbGJhY2spIHtcblx0ICAvLyAx44CBaW5pdCBwbHVnaW5zXG5cdCAgdmFyIHBsID0gbmV3IHBsdWdpbnNMb2FkZXIoKTtcblx0ICBwbC5pbml0KHtcblx0ICAgIG1pZGRsZXdhcmU6IFtdLFxuXHQgICAgY29uZmlnOiBvcHRzLmNvbmZpZyxcblx0ICAgIHBsdWdpbnM6IENPTkZJRy5wbHVnaW5zXG5cdCAgfSk7XG5cdCAgdmFyIG1pZGRsZXdhcmUgPSBwbC5ydW4oKTtcblx0XG5cdCAgLy8g5Yid5aeL5YyW5LiK5LiL5paH546v5aKD77yMY29udGV4dOWGheeahGRhdGHlsIbkvJrlnKjlkITkuKrmj5Lku7bkuK3ov5vooYzotYvlgLzmiJbogIXkv67mlLnvvIjph43opoHvvIlcblx0ICB2YXIgY29udGV4dCA9IGlzRnVuY3Rpb24oQ09ORklHLmNvbnRleHQpID8gbmV3IENPTkZJRy5jb250ZXh0KCkgOiBDT05GSUcuY29udGV4dDtcblx0ICBjb250ZXh0LnVzZXJkYXRhID0gb3B0cy51c2VyZGF0YTtcblx0ICBjb250ZXh0LmxvZ2dlciA9IHV0aWxMb2dnZXIubG9nZ2VyO1xuXHRcblx0ICB2YXIgYXBwID0ge1xuXHQgICAgY29udGV4dDogY29udGV4dCxcblx0ICAgIHB1YnN1YjogdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnYXBsdXNfcHVic3ViJyksXG5cdCAgICBwdWJzdWJUeXBlOiBvcHRzICYmIG9wdHMucHVic3ViVHlwZVxuXHQgIH07XG5cdFxuXHQgIHZhciBjb21wb3NlID0gbmV3IENvbXBvc2UoKTtcblx0ICBjb21wb3NlLmNyZWF0ZShhcHApO1xuXHQgIC8vIOaJp+ihjOS4remXtOS7tlxuXHQgIGNvbXBvc2Uud3JhcChtaWRkbGV3YXJlLCBmdW5jdGlvbigpIHtcblx0ICAgIGFwcC5jb250ZXh0LnN0YXR1cyA9IGFwbHVzU3RhdGljLkNPTVBMRVRFO1xuXHQgICAgaWYgKG9wdHMpIHtcblx0ICAgICAgaWYgKG9wdHMubWlkZGxld2FyZU1lc3NhZ2VLZXkpIHtcblx0ICAgICAgICB1dGlsUHVic3ViLmRvUHViTXNnKFtvcHRzLm1pZGRsZXdhcmVNZXNzYWdlS2V5LCBhcHAuY29udGV4dF0pOyAgXG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG9wdHMubWVzc2FnZUZuUXVldWUpIHtcblx0ICAgICAgICBlYWNoKG9wdHMubWVzc2FnZUZuUXVldWUsIGZ1bmN0aW9uIChmbikge1xuXHQgICAgICAgICAgZm4odXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpLCBDT05GSUcpO1xuXHQgICAgICAgIH0pOyAgXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuXHQgICAgICBjYWxsYmFjayhhcHAuY29udGV4dCk7XG5cdCAgICB9XG5cdCAgfSkoKTtcblx0XG5cdH07XG5cdG1vZHVsZS5leHBvcnRzID0gUmVkdWNlcjtcblxuXG4vKioqLyB9KSxcbi8qIDgzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9jb21wb3NlLmpzXG5cdCAqIOWHveaVsOmYn+WIl+WMheijheWZqCBFeHBvc2UgY29tcG9zaXRvclxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0ZnVuY3Rpb24gY29tcG9zZSAoKSB7fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgLyoqXG5cdCAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG5cdCAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG5cdCAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuXHQgICAqL1xuXHQgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgIGlmICh0eXBlb2YgdGhpc1tuYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgdGhpc1tuYW1lXSA9IHByb3BzW25hbWVdO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLmNhbGxlZExpc3QgPSBbXTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLnNldENhbGxlZExpc3QgPSBmdW5jdGlvbihpKSB7XG5cdCAgaWYgKHV0aWxBcnJheS5pbmRleG9mKHRoaXMuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG5cdCAgICB0aGlzLmNhbGxlZExpc3QucHVzaChpKTtcblx0ICB9XG5cdH07XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS5yZXNldENhbGxlZExpc3QgPSBmdW5jdGlvbigpIHtcblx0ICB0aGlzLmNhbGxlZExpc3QgPSBbXTtcblx0fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbihtdywgY2FsbGJhY2spIHtcblx0ICB2YXIgY29udGV4dCA9IHRoaXM7XG5cdCAgdmFyIGN0eCA9IHRoaXMuY29udGV4dCB8fCB7fTtcblx0ICB2YXIgY29tcG9zZSA9IGN0eC5jb21wb3NlIHx8IHt9O1xuXHQgIHZhciBtYXhUaW1lb3V0ID0gY29tcG9zZS5tYXhUaW1lb3V0IHx8IDEwICogMTAwMDtcblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgdmFyIHNpemUgPSBtdy5sZW5ndGg7IC8vIOS4remXtOS7tumYn+WIl+mVv+W6plxuXHQgICAgdmFyIGkgPSAwOyAvLyDkuK3pl7Tku7bntKLlvJVcblx0ICAgIHZhciBqID0gMDsgLy8g5LiA5Liq5qCH6K+G77yMMC3liJ3lp4vnirbmgIHvvIwxLeS4remXtOS7tuWbnuiwg+aJp+ihjOS6hlxuXHQgICAgdmFyIHNsZWVwSGFuZGVyMTtcblx0ICAgIHZhciBydW4gPSBmdW5jdGlvbihpbmRleCwgc3RhdHVzKSB7XG5cdCAgICAgIC8vIGNvbnRleHQucHVic3ViSW5mbyhjb250ZXh0LCBtd1tpXSk7XG5cdCAgICAgIC8vIOS4remXtOS7tumYn+WIl+aJp+ihjOWujOavleWQjui/lOWbnlxuXHQgICAgICBpZiAoaSA9PT0gc2l6ZSkge1xuXHQgICAgICAgIHN0YXRlID0gJ2RvbmUnO1xuXHQgICAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7IC8vIOmHjee9rmNhbGxlZExpc3Tlj5jph49cblx0ICAgICAgICAvLyBzdGF0dXPlpoLmnpznrYnkuo5kb25l77yM6K+05piO5piv5Lit6YCU6YCA5Ye655qE5Lit6Ze05Lu277yM5LiN6ZyA6KaB5omn6KGM5Zue6LCDXG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spICYmIHN0YXR1cyAhPT0gc3RhdGUpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgc3RhdGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjbGVhclRpbWVvdXQoc2xlZXBIYW5kZXIxKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgLy8gdmFyIGNiX3N0YXRlID0gbnVsbDtcblx0ICAgICAgLy8g5L+d6K+B5q+P5Liq5Lit6Ze05Lu25Y+q5Lya5omn6KGM5LiA5qyhXG5cdCAgICAgIGlmICh1dGlsQXJyYXkuaW5kZXhvZihjb250ZXh0LmNhbGxlZExpc3QsIGkpID09PSAtMSkge1xuXHQgICAgICAgIGNvbnRleHQuc2V0Q2FsbGVkTGlzdCAmJiBjb250ZXh0LnNldENhbGxlZExpc3QoaSk7XG5cdCAgICAgICAgaWYgKG13ICYmIG13W2ldICYmIGlzRnVuY3Rpb24obXdbaV1bMF0pKSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICogQHBhcmFtcyB7QXJyYXl9IG1pZGRsZXdhcmVcblx0ICAgICAgICAgICAgICogQHBhcmFtcyB7QXJyYXl9IG1zZ1xuXHQgICAgICAgICAgICAgKi9cblx0ICAgICAgICAgICAgc3RhdGUgPSBtd1tpXVswXS5jYWxsKGNvbnRleHQsIHN0YXRlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgICAgICAgIGogPSAxOyAgLy8gMS3kuK3pl7Tku7blm57osIPmiafooYzkuoZcblx0ICAgICAgICAgICAgICBydW4oaSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICB1bG9nKCkudyhlKTtcblx0ICAgICAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgICAgICAvLyAgIG1zZzogZVxuXHQgICAgICAgICAgICAvLyB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICAvLyDnirbmgIHkuLpwYXVzZeetieW+hTIwMG1z6L2u6K+i77yM54q25oCB5Li6bnVtYmVy57G75Z6L55qE5pWw5YC8562J5b6Fc3RhdGVtc+i9ruivolxuXHQgICAgICB2YXIgaXNOdW1iZXIgPSB0eXBlb2Ygc3RhdGUgPT09ICdudW1iZXInO1xuXHQgICAgICBpZiAoc3RhdGUgPT09ICdwYXVzZScgfHwgaXNOdW1iZXIpIHtcblx0ICAgICAgICBqID0gMDtcblx0ICAgICAgICAvLyDmnIDlpKfnrYnlvoXml7bplb9cblx0ICAgICAgICB2YXIgX3RpbWVfb3V0ID0gaXNOdW1iZXIgPyBzdGF0ZSA6IG1heFRpbWVvdXQ7XG5cdCAgICAgICAgdmFyIF9td19uYW1lID0gbXdbaV0gPyBtd1tpXVsxXSA6ICcnO1xuXHQgICAgICAgIHNsZWVwSGFuZGVyMSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBpZiAoaiA9PT0gMCkge1xuXHQgICAgICAgICAgICB1bG9nKCkudygnanVtcCB0aGUgbWlkZGxld2FyZSBhYm91dCAnICsgX213X25hbWUgKyAnLCBiZWNhdXNlIHdhaXRpbmcgdGltZW91dCBtYXhUaW1lb3V0ID0gJyArIF90aW1lX291dCk7XG5cdCAgICAgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgICAgLy8gICBtc2c6ICdqdW1wIHRoZSBtaWRkbGV3YXJlIGFib3V0ICcgKyBfbXdfbmFtZSArICcsIGJlY2F1c2Ugd2FpdGluZyB0aW1lb3V0IG1heFRpbWVvdXQgPSAnICsgX3RpbWVfb3V0XG5cdCAgICAgICAgICAgIC8vIH0pO1xuXHQgICAgICAgICAgICBzdGF0ZSA9IG51bGw7XG5cdCAgICAgICAgICAgIGkrKztcblx0ICAgICAgICAgICAgcnVuKGkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIF90aW1lX291dCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkb25lJykge1xuXHQgICAgICAgIC8vIOeKtuaAgeS4umRvbmXooajnpLrnu5PmnZ/vvIzkuI3nrqHlkI7pnaLov5jmnInmsqHmnInkuK3pl7Tku7bpg73nu5PmnZ9cblx0ICAgICAgICBpID0gc2l6ZTtcblx0ICAgICAgICBydW4oaSwgc3RhdGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIOm7mOiupOeKtuaAge+8jOWPqueuoeaJp+ihjOS4remXtOS7tumYn+WIl1xuXHQgICAgICAgIGkrKztcblx0ICAgICAgICBydW4oaSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBpZiAoY29udGV4dC5jYWxsZWRMaXN0ICYmIGNvbnRleHQuY2FsbGVkTGlzdC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcnVuKGkpO1xuXHQgIH07XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNvbXBvc2U7XG5cbi8qKiovIH0pLFxuLyogODQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvcGx1Z2luc0xvYWRlci5qc1xuXHQgKiDmj5Lku7bliqDovb3lmahcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtcyBvcHRzIHtcblx0ICAgICAqICAgbWlkZGxld2FyZTogW10sXG5cdCAgICAgKiAgIHBsdWdpbnM6IFtdLFxuXHQgICAgICogICBjb25maWc6IHt9XG5cdCAgICAgKiB9XG5cdCAgICAgKi9cblx0ICAgIGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcblx0ICAgICAgdGhpcy5vcHRzID0gb3B0cztcblx0ICAgICAgaWYgKG9wdHMgJiYgdHlwZW9mIG9wdHMubWlkZGxld2FyZSA9PT0gJ29iamVjdCcgJiYgb3B0cy5taWRkbGV3YXJlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBvcHRzLm1pZGRsZXdhcmU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gW107XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5wbHVnaW5zX25hbWUgPSBbXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDliIblj5HorqLpmIXlj5jljJZcblx0ICAgICAqIEBwYXJhbSBvIHtcblx0ICAgICAqICAgcHVic3ViOiB7Li4ufSxcblx0ICAgICAqICAgY29udGV4dDogey4uLn1cblx0ICAgICAqIH0sXG5cdCAgICAgKiBAcGFyYW0gbXcg5b2T5YmN5omn6KGM55qE5Lit6Ze05Lu2XG5cdCAgICAgKi9cblx0ICAgIHB1YnN1YkluZm86IGZ1bmN0aW9uKGN0eCwgbXcpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgcHVic3ViID0gY3R4LnB1YnN1Yjtcblx0ICAgICAgICBpZiAocHVic3ViKSB7XG5cdCAgICAgICAgICBwdWJzdWIucHVibGlzaCgncGx1Z2luc19jaGFuZ2VfJyArIGN0eC5wdWJzdWJUeXBlLCBtdyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdWxvZygpLncoZSk7XG5cdCAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgIC8vICAgbXNnOiBlXG5cdCAgICAgICAgLy8gfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoaW5kZXgpIHtcblx0ICAgICAgaWYoIWluZGV4KSBpbmRleCA9IDA7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIHZhciBtaWRkbGV3YXJlID0gdGhpcy5taWRkbGV3YXJlO1xuXHQgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0cyB8fCB7fTtcblx0ICAgICAgdmFyIHBsdWdpbnMgPSBvcHRzLnBsdWdpbnM7XG5cdCAgICAgIGlmIChwbHVnaW5zICYmIHR5cGVvZiBwbHVnaW5zID09PSAnb2JqZWN0JyAmJiBwbHVnaW5zLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICB2YXIgcGx1Z2luID0gcGx1Z2luc1tpbmRleF07XG5cdCAgICAgICAgdGhpcy5wbHVnaW5zX25hbWUucHVzaChwbHVnaW4ubmFtZSk7XG5cdCAgICAgICAgbWlkZGxld2FyZS5wdXNoKFtmdW5jdGlvbihzdGF0ZSwgY2Ipe1xuXHQgICAgICAgICAgX3NlbGYucHVic3ViSW5mbyh0aGlzLCBwbHVnaW4pO1xuXHQgICAgICAgICAgLy8g6I635Y+W5o+S5Lu25qih5Z2X6Lev5b6E5bm25Yid5aeL5YyWXG5cdCAgICAgICAgICB2YXIgbSA9IG5ldyBwbHVnaW4ucGF0aCgpO1xuXHRcblx0ICAgICAgICAgIC8vIOS4uuiKguecgeS7o+eggemHj++8jOm7mOiupOeahOWIneWni+WMluaWueazleWcqOWKoOi9veWZqOWGheWBmuWFnOW6leWkhOeQhu+8jOWNs+aPkuS7tuWGheaXoOeJueauiuaDheWGteaXoOmcgOWunueOsGluaXTmlrnms5Vcblx0ICAgICAgICAgIGlmICghbS5pbml0KSB7XG5cdCAgICAgICAgICAgIG0uaW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIOWwhuS4iuS4i+aWh+azqOWFpeWIsOaPkuS7tuWGhVxuXHQgICAgICAgICAgbS5pbml0KHtcblx0ICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuXHQgICAgICAgICAgICBjb25maWc6IGFzc2lnbihwbHVnaW4uY29uZmlnIHx8IHt9LCBvcHRzLmNvbmZpZylcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgcmV0dXJuIG0ucnVuKHN0YXRlLCBmdW5jdGlvbiAobXNnKSB7XG5cdCAgICAgICAgICAgIC8vIOi/memHjOS9v+eUqDHmr6vnp5Llu7bov5/miafooYzvvIzpmLLmraLkuK3pl7Tku7bkuLvkvZPlhoXnmoRjYWxsYmFja+WFiOaJp+ihjO+8jOWvvOiHtOahhuaetuaLv+S4jeWIsOS4remXtOS7tnJldHVybueahOetieW+heaXtumVv++8jOS7juiAjOWvvOiHtOebkeaOp+W8guW4uFxuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICBjYihwbHVnaW4sIG1zZyk7XG5cdCAgICAgICAgICAgIH0sIDEpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSwgcGx1Z2luLm5hbWVdKTtcblx0XG5cdCAgICAgICAgaW5kZXgrKztcblx0ICAgICAgICBpZihwbHVnaW5zW2luZGV4XSl7XG5cdCAgICAgICAgICByZXR1cm4gdGhpcy5ydW4oaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWlkZGxld2FyZTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDg1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0ZnVuY3Rpb24gaXNUcml2ZXIoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBVQSA9IG5hdmlnYXRvciA/IChuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci5zd3VzZXJBZ2VudCkgOiAnJztcblx0ICAgIHJldHVybiAvVHJpdmVyL2cudGVzdChVQSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNUcml2ZXI7XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogODYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuXHQgKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46ICBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1c19jb25maWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWc7XG5cdCAgICAgIHZhciBBUExVU19RVUVVRSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUU7XG5cdFxuXHQgICAgICB2YXIgY29udGV4dCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICAgICAgdmFyIHF1ZSA9IGNvbnRleHRbQVBMVVNfUVVFVUVdIHx8IFtdO1xuXHQgICAgICB2YXIgcnMgPSBhY3Rpb24uZ2V0Rm9ybWF0UXVldWUocXVlLCAnbWV0YVF1ZXVlJyk7XG5cdCAgICAgIGNvbnRleHRbQVBMVVNfUVVFVUVdID0gcnMucXVldWU7XG5cdCAgICAgIGFjdGlvbi5wcm9jZXNzR29sZGxvZ1F1ZXVlKHJzLmZvcm1hdFF1ZXVlLCB0aGlzLm9wdGlvbnMuY29uZmlnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApO1xuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7QXJyYXl9IFFVRVVFXG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG5cdCAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuXHQgKiB9XG5cdCAqL1xuXHR2YXIgcHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IGZ1bmN0aW9uIChRVUVVRSwgb3B0cykge1xuXHQgIGZ1bmN0aW9uIGYoKSB7XG5cdCAgICBpZiAoIVFVRVVFIHx8ICF1dGlsQXJyYXkuaXNBcnJheShRVUVVRSkgfHwgIVFVRVVFLmxlbmd0aCkgcmV0dXJuO1xuXHQgICAgLy8g5o6S5bqPXG5cdCAgICB2YXIgcXVlID0gZ2V0Rm9ybWF0UXVldWUoUVVFVUUpLnF1ZXVlO1xuXHQgICAgdmFyIHRhc2sgPSB7fTtcblx0ICAgIHZhciBkZWxheVRhc2tzID0gW107XG5cdCAgICB3aGlsZSAodGFzayA9IHF1ZS5zaGlmdCgpKSB7IC8vIOS+neasoeaJp+ihjCB3aW5kb3cuYXBsdXNfcXVldWUg5Lit55qE5Lu75YqhXG5cdCAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMsIGZ1bmN0aW9uICh0KSB7XG5cdCAgICAgICAgZGVsYXlUYXNrcy5wdXNoKHQpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIGlmIChkZWxheVRhc2tzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgd2hpbGUgKHRhc2sgPSBkZWxheVRhc2tzLnNoaWZ0KCkpIHtcblx0ICAgICAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgMTAwKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHRyeSB7XG5cdCAgICBmKCk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudyhlKTtcblx0ICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgIC8vICAgbXNnOiBlXG5cdCAgICAvLyB9KTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMucHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IHByb2Nlc3NHb2xkbG9nUXVldWU7XG5cdFxuXHRmdW5jdGlvbiBnZXRNZXRhSW5mbygpIHtcblx0ICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcblx0ICByZXR1cm4gbWV0YV9pbmZvO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRBcGx1c0hvbGRUeXBlICgpIHtcblx0ICB2YXIgbWV0YV9pbmZvID0gZ2V0TWV0YUluZm8oKSB8fCB7fTtcblx0ICB2YXIgdWFpZCA9IG1ldGFfaW5mby51YWlkICsgJyc7XG5cdCAgaWYgKHVhaWQgPT09ICcxJyAmJiAhbWV0YV9pbmZvLl9hbm9ueV9pZCkge1xuXHQgICAgcmV0dXJuICdCTE9DSyc7XG5cdCAgfVxuXHQgIHJldHVybiBtZXRhX2luZm9bJ19ob2xkJ10gfHwgbWV0YV9pbmZvWydhcGx1cy13YWl0aW5nJ107XG5cdH1cblx0XG5cdHZhciBBUExVU19IT0xEX1VTRVJJRF9RVUVVRSA9IFtdO1xuXHR2YXIgQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSA9IFtdO1xuXHR2YXIgQVBMVVNfSE9MRF9RVUVVRSA9IFtdO1xuXHRcblx0ZnVuY3Rpb24gZmlsdGVyVGFzayAodGFzaykge1xuXHQgIHZhciBob2xkVHlwZSA9IGdldEFwbHVzSG9sZFR5cGUoKTtcblx0ICAvLyBjb25zb2xlLmxvZygnaG9sZFR5cGUgPT09ICcsIGhvbGRUeXBlKTtcblx0ICB2YXIgbWV0YV9pbmZvID0gZ2V0TWV0YUluZm8oKSB8fCB7fTtcblx0ICB2YXIgZmxhZyA9IHRydWU7XG5cdFxuXHQgIC8vIDA6IFwiX2hvbGRcIlxuXHQgIC8vIDE6IFwiU1RBUlRcIlxuXHQgIHZhciBhcmdzID0gdGFzay5hcmd1bWVudHMgfHwgW107XG5cdCAgdmFyIG1ldGFLZXkgPSBhcmdzWzBdO1xuXHQgIHZhciBtZXRhVmFsdWUgPSBhcmdzWzFdO1xuXHQgIHZhciBTVEFSVCA9ICdTVEFSVCc7XG5cdCAgaWYgKG1ldGFLZXkgPT09ICdfaG9sZCcgJiYgbWV0YVZhbHVlID09PSBTVEFSVCkge1xuXHQgICAgcmV0dXJuIFNUQVJUO1xuXHQgIH1cblx0ICBpZiAobWV0YUtleSA9PT0gJ19hbm9ueV9pZCcgJiYgbWV0YVZhbHVlKSB7XG5cdCAgICByZXR1cm4gU1RBUlQ7XG5cdCAgfVxuXHQgIGlmICh0YXNrICYmIC9zZW5kUFZ8cmVjb3JkfHNldFBhZ2VTUE18c2V0TWV0YUluZm98YXBwZW5kTWV0YUluZm8kLy50ZXN0KHRhc2suYWN0aW9uKSkge1xuXHQgICAgc3dpdGNoIChob2xkVHlwZSkge1xuXHQgICAgY2FzZSAnQkxPQ0snOlxuXHQgICAgICBpZiAoIW1ldGFfaW5mb1tob2xkVHlwZV0pIHtcblx0ICAgICAgICBBUExVU19IT0xEX1FVRVVFLnB1c2godGFzayk7XG5cdCAgICAgICAgZmxhZyA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmbGFnO1xuXHR9XG5cdFxuXHRcblx0Ly8gdmFyIHByb2Nlc3NlZCA9IGZhbHNlO1xuXHRmdW5jdGlvbiBwcm9jZXNzSG9sZEdvbGRsb2dRdWV1ZSAob3B0cykge1xuXHQgIC8vIGlmICghcHJvY2Vzc2VkKSB7XG5cdCAgLy8gICBwcm9jZXNzZWQgPSB0cnVlO1xuXHQgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUsIG9wdHMpO1xuXHQgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSwgb3B0cyk7XG5cdCAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1FVRVVFLCBvcHRzKTsgIFxuXHQgIC8vIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gcXVldWVOYW1lOiBhcGx1c19xdWV1ZSB8fCBnb2xkbG9nX3F1ZXVlXG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG5cdCAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuXHQgKiB9XG5cdCAqL1xuXHRleHBvcnRzLnN1YnNjcmliZUFuZFByb2Nlc3NRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZU5hbWUsIG9wdHMpIHtcblx0ICB2YXIgcXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUocXVldWVOYW1lKTtcblx0ICBxdWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLlNFVF9NRVRBX0lORk8sIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9VU0VSX0lEICYmIHZhbHVlKSB7XG5cdCAgICAgICAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1VTRVJJRF9RVUVVRSwgb3B0cyk7XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBhcGx1c1N0YXRpYy5fQU5PTllfSUQgJiYgdmFsdWUpIHtcblx0ICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfQU5PTllfUVVFVUUsIG9wdHMpO1xuXHQgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ19ob2xkJyAmJiB2YWx1ZSA9PT0gJ1NUQVJUJykge1xuXHQgICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0TWV0aG9kTmFtZSAoa2V5LCBpc09wZW5BcGkpIHtcblx0ICBpZiAoaXNPcGVuQXBpICYmIGFwbHVzU3RhdGljLm9wZW5BUElzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG5cdCAgICBrZXkgPSAnXycgKyBrZXk7XG5cdCAgfVxuXHQgIHJldHVybiBrZXk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IHRhc2tcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcblx0ICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG5cdCAqIH1cblx0ICovXG5cdHZhciBwcm9jZXNzVGFzayA9IGZ1bmN0aW9uKHRhc2ssIG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgdmFyIGlzT3BlbkFwaSA9ICEhb3B0cy5pc09wZW5BcGk7XG5cdCAgdmFyIGFjdGlvbiA9IHRhc2sgPyB0YXNrLmFjdGlvbiA6ICcnO1xuXHQgIHZhciBhcmdzID0gdGFzayA/IHRhc2suYXJndW1lbnRzIDogJyc7XG5cdFxuXHQgIHZhciByZXN1bHQgPSBmaWx0ZXJUYXNrKHRhc2spO1xuXHQgIGlmICghcmVzdWx0KSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBjb250ZXh0ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7IC8vIOehruS/neafkOS4quS7u+WKoeaJp+ihjOWksei0peS4jeS8muW9seWTjeWFtuWug+S7u+WKoVxuXHQgICAgaWYgKGFjdGlvbiAmJiBhcmdzICYmIHV0aWxBcnJheS5pc0FycmF5KGFyZ3MpKSB7XG5cdCAgICAgIHZhciBhID0gYWN0aW9uLnNwbGl0KCcuJyk7XG5cdCAgICAgIHZhciBvYmogPSBjb250ZXh0O1xuXHQgICAgICB2YXIgX2ZuID0gY29udGV4dDtcblx0ICAgICAgdmFyIG1ldGhvZE5hbWU7XG5cdCAgICAgIGlmIChhLmxlbmd0aCA9PT0gMykge1xuXHQgICAgICAgIG9iaiA9IGNvbnRleHRbYVswXV1bYVsxXV0gfHwge307XG5cdCAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYVsyXSwgaXNPcGVuQXBpKTtcblx0ICAgICAgICBfZm4gPSBvYmpbbWV0aG9kTmFtZV0gPyBvYmpbbWV0aG9kTmFtZV0gOiAnJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB3aGlsZSAoYS5sZW5ndGgpIHtcblx0ICAgICAgICAgIG1ldGhvZE5hbWUgPSBnZXRNZXRob2ROYW1lKGEuc2hpZnQoKSwgaXNPcGVuQXBpKTtcblx0ICAgICAgICAgIF9mbiA9IG9iaiA9IG9ialttZXRob2ROYW1lXTtcblx0ICAgICAgICAgIGlmICghb2JqKSB7IC8vIOmdnuazlSBhY3Rpb25cblx0ICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG5cdCAgICAgICAgICAgICAgY2FsbGJhY2sodGFzayk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAoaXNGdW5jdGlvbihfZm4pKSB7XG5cdCAgICAgICAgX2ZuLmFwcGx5KG9iaiwgYXJncyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHJlc3VsdCA9PT0gJ1NUQVJUJykge1xuXHQgICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudyhlKTtcblx0ICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgIC8vICAgbXNnOiBlXG5cdCAgICAvLyB9KTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMucHJvY2Vzc1Rhc2sgPSBwcm9jZXNzVGFzaztcblx0XG5cdHZhciBnZXRGb3JtYXRRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZSwgdHlwZSkge1xuXHQgIHZhciBxdWV1ZU1hcCA9IHtcblx0ICAgIHN1YnNjcmliZU13Q2hhbmdlUXVldWU6IFtdLFxuXHQgICAgc3Vic2NyaWJlTWV0YVF1ZXVlOiBbXSxcblx0ICAgIHN1YnNjcmliZVF1ZXVlOiBbXSxcblx0ICAgIG1ldGFRdWV1ZTogW10sXG5cdCAgICBvdGhlcnNRdWV1ZTogW11cblx0ICB9O1xuXHRcblx0ICB2YXIgcSA9IFtdO1xuXHQgIHZhciB0YXNrID0ge307XG5cdCAgd2hpbGUgKHRhc2sgPSBxdWV1ZS5zaGlmdCgpKSB7IC8vIOS+neasoeaJp+ihjCB3aW5kb3cuYXBsdXNfcXVldWUg5Lit55qE5Lu75YqhXG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgYWMgPSB0YXNrLmFjdGlvbjtcblx0ICAgICAgdmFyIGtleSA9IHRhc2suYXJndW1lbnRzWzBdO1xuXHQgICAgICBpZiAoL3N1YnNjcmliZS8udGVzdChhYykpIHtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnc2V0TWV0YUluZm8nKSB7XG5cdCAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNZXRhUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWIHx8IGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEopIHtcblx0ICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoL01ldGFJbmZvLy50ZXN0KGFjKSkge1xuXHQgICAgICAgIHF1ZXVlTWFwLm1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdWxvZygpLncoZSk7XG5cdCAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgLy8gICBtc2c6IGVcblx0ICAgICAgLy8gfSk7XG5cdCAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBmb3JtYXRRdWV1ZTtcblx0ICBpZiAodHlwZSAmJiBxdWV1ZU1hcFt0eXBlXSkge1xuXHQgICAgZm9ybWF0UXVldWUgPSBxdWV1ZU1hcFt0eXBlXTtcblx0ICAgIHF1ZXVlTWFwW3R5cGVdID0gW107XG5cdCAgfVxuXHQgIHEgPSBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLmNvbmNhdChxdWV1ZU1hcC5tZXRhUXVldWUpO1xuXHQgIHEgPSBxLmNvbmNhdChxdWV1ZU1hcC5zdWJzY3JpYmVRdWV1ZSk7XG5cdCAgcSA9IHEuY29uY2F0KHF1ZXVlTWFwLnN1YnNjcmliZU1ldGFRdWV1ZSwgcXVldWVNYXAub3RoZXJzUXVldWUpO1xuXHQgIHJldHVybiB7XG5cdCAgICBxdWV1ZTogcSxcblx0ICAgIGZvcm1hdFF1ZXVlOiBmb3JtYXRRdWV1ZVxuXHQgIH07XG5cdH07XG5cdGV4cG9ydHMuZ2V0Rm9ybWF0UXVldWUgPSBnZXRGb3JtYXRRdWV1ZTtcblxuXG4vKioqLyB9KSxcbi8qIDg4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9pbml0L2luaXRMb2FkX2Jhc2UuanNcblx0ICog5Yid5aeL5YyW5Z+656GA5qih5Z2X77yM5LiN6IO955u05o6l5L2/55So77yM6ZyA6KaB6YCa6L+HaW5pdExvYWRfcGMuanPmiJZpbml0TG9hZF93YXAuanPnrYnlhbfkvZPnmoTlnLrmma/mqKHlnZfosIPnlKhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIEBhdXRob3Igaml6aGEud3lqIEBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nyk7XG5cdFxuXHR2YXIgUXVldWUgPSBCYXNlLmV4dGVuZCh7XG5cdCAgcHVzaDogZnVuY3Rpb24odGFzaykge1xuXHQgICAgdGhpcy5sZW5ndGgrKztcblx0ICAgIGFjdGlvbi5wcm9jZXNzVGFzayh0YXNrLCB0aGlzLm9wdHMpOyAgXG5cdCAgfSxcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcHJvY2Vzc0FwbHVzUXVldWU6IGZ1bmN0aW9uIChxdWV1ZU5hbWUpIHtcblx0ICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgcXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUocXVldWVOYW1lKTtcblx0ICAgICAgYWN0aW9uLnByb2Nlc3NHb2xkbG9nUXVldWUocXVlLCBvcHRzKTtcblx0ICAgICAgdXRpbEdvbGRsb2cuc2V0R2xvYmFsVmFsdWUocXVldWVOYW1lLCBRdWV1ZS5jcmVhdGUoe1xuXHQgICAgICAgIG9wdHM6IG9wdHMsIFxuXHQgICAgICAgIHN0YXJ0TGVuZ3RoOiBxdWUubGVuZ3RoLFxuXHQgICAgICAgIGxlbmd0aDogMFxuXHQgICAgICB9KSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtcyB7U3RyaW5nfSB0eXBlXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzX2NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZztcblx0ICAgICAgdmFyIEFQTFVTX1FVRVVFID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRTtcblx0XG5cdCAgICAgIHRoaXMucHJvY2Vzc0FwbHVzUXVldWUoQVBMVVNfUVVFVUUpO1xuXHRcblx0ICAgICAgaWYgKEFQTFVTX1FVRVVFID09PSAnYXBsdXNfcXVldWUnKSB7XG5cdCAgICAgICAgdGhpcy5wcm9jZXNzQXBsdXNRdWV1ZSgnZ29sZGxvZ19xdWV1ZScpO1xuXHQgICAgICB9XG5cdCAgICAgIGFjdGlvbi5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUoQVBMVVNfUVVFVUUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA4OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiDlj4vnm5/kupHmnaHku7bkuIvnmoToh6rliqjkuovku7bmj5Lku7YgICAgIFxuXHQgKiBcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICogXG5cdCAqIEF1dGhvcjogXG5cdCAqICAgIOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIEZldGNoQ29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCk7XG5cdHZhciB1dGlsR1EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTtcblx0dmFyIE1JTklfVlRfQ09ORklHX0ZPUk1BVCA9ICdNaW5pVnRDb25maWdGb3JtYXQnO1xuXHR2YXIgdXRpbFZUID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Myk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0ZnVuY3Rpb24gYXV0b1RyYWNrZXIgKCkge1xuXHQgIHZhciByYl9jb25maWcsIHBkcl9jb25maWcsIHNoYXJlX2NvbmZpZztcblx0ICAvLyB2YXIgcHJlZml4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgdmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVNfUVVFVUUpO1xuXHQgIHZhciBfaGFzVHJhY2tlZCA9IGZhbHNlO1xuXHQgIHZhciBfY3VycmVudFBhZ2UgPSBudWxsO1xuXHQgIHZhciBjb3VudCA9IHtcblx0ICAgICdvblB1bGxEb3duUmVmcmVzaCc6IDAsXG5cdCAgICAnb25TaGFyZVRpbWVsaW5lJzogMCxcblx0ICAgICdvblJlYWNoQm90dG9tJzogMCxcblx0ICAgICdvblNoYXJlQXBwTWVzc2FnZSc6IDAsXG5cdCAgICAnb25DbGljayc6IDBcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBldmVudEhhbmRsZSAoKSB7XG5cdCAgICB2YXIgZXZlbnROYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiAnJztcblx0ICAgIHZhciBwYWdlSW5zdGFuY2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICB2YXIgY3VycmVudFBhZ2UgPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuXHQgICAgLy8gdmFyIHA7XG5cdCAgICBcblx0ICAgIHN3aXRjaCAoZXZlbnROYW1lKSB7XG5cdCAgICBjYXNlICdvblB1bGxEb3duUmVmcmVzaCc6XG5cdCAgICAgIGNvdW50Lm9uUHVsbERvd25SZWZyZXNoICs9IDE7XG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbcGRyX2NvbmZpZy5sb2drZXkgfHwgJyQkX3B1bGxfZG93bl9yZWZyZXNoJywgJ0NMSycsIHtcblx0ICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG5cdCAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcblx0ICAgICAgICAgIGNvdW50OiBjb3VudC5vblB1bGxEb3duUmVmcmVzaFxuXHQgICAgICAgIH1dXG5cdCAgICAgIH0pO1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ29uUmVhY2hCb3R0b20nOlxuXHQgICAgICBjb3VudC5vblJlYWNoQm90dG9tICs9IDE7XG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbcmJfY29uZmlnLmxvZ2tleSB8fCAnJCRfcmVhY2hfYm90dG9tJywgJ0NMSycsIHtcblx0ICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG5cdCAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcblx0ICAgICAgICAgIGNvdW50OiBjb3VudC5vblJlYWNoQm90dG9tXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnb25TaGFyZUFwcE1lc3NhZ2UnOlxuXHQgICAgICBjb3VudC5vblNoYXJlQXBwTWVzc2FnZSArPSAxO1xuXHQgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuXHQgICAgICAgIGFyZ3VtZW50czogW3NoYXJlX2NvbmZpZy5sb2drZXkgfHwgJyQkX3NoYXJlJywgJ0NMSycsIHtcblx0ICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG5cdCAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcblx0ICAgICAgICAgIGNvdW50OiBjb3VudC5vblNoYXJlQXBwTWVzc2FnZSxcblx0ICAgICAgICAgIHNoYXJlX3R5cGU6IDFcblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdvblNoYXJlVGltZWxpbmUnOiBcblx0ICAgICAgY291bnQub25TaGFyZVRpbWVsaW5lICs9IDE7XG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbc2hhcmVfY29uZmlnLmxvZ2tleSB8fCAnJCRfc2hhcmUnLCAnQ0xLJywge1xuXHQgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcblx0ICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuXHQgICAgICAgICAgY291bnQ6IGNvdW50Lm9uU2hhcmVUaW1lbGluZSxcblx0ICAgICAgICAgIHNoYXJlX3R5cGU6IDBcblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdvblBhZ2VTaG93Jzpcblx0ICAgICAgaWYgKHBhZ2VJbnN0YW5jZS5yb3V0ZSAmJiAhX2hhc1RyYWNrZWQpIHtcblx0ICAgICAgICBfY3VycmVudFBhZ2UgPSB7XG5cdCAgICAgICAgICB0czogRGF0ZS5ub3coKSxcblx0ICAgICAgICAgIHBhdGg6IHBhZ2VJbnN0YW5jZS5yb3V0ZSxcblx0ICAgICAgICAgIHBhZ2VfbmFtZTogcGFnZUluc3RhbmNlLnJvdXRlLFxuXHQgICAgICAgIH07XG5cdCAgICAgICAgX2hhc1RyYWNrZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnb25QYWdlSGlkZSc6ICBcblx0ICAgICAgaWYgKF9oYXNUcmFja2VkKSB7XG5cdCAgICAgICAgdmFyIGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIF9jdXJyZW50UGFnZS50cztcblx0ICAgICAgICAvLyDliqDovb3ml7bmnLrnmoTpl67popjvvIzmlL7lnKjmraTlpITlj5ZyZWZlcnJlcuebuOavlOS6jm1pbmlhcHBfZGF0YeWHhuehrlxuXHQgICAgICAgIHZhciByZWZlcnJlciA9IG1pbmkuZ2V0UmVmZXJyZXJQYWdlKCkucm91dGUgfHwgbWluaS5nZXRSZWZlcnJlclBhZ2UoKS5pcyB8fCAnLSc7XG5cdCAgICAgICAgdmFyIGV4dHJhUGFyYW1zID0gKFBhZ2VNYW5hZ2VyLmdldFBhZ2VOYW1lKCkgfHwge30pLmV4dHJhUGFyYW1zO1xuXHQgICAgICAgIHZhciBwdmFyZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBleHRyYVBhcmFtcywge1xuXHQgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuXHQgICAgICAgICAgcGF0aDogX2N1cnJlbnRQYWdlLnBhdGgsXG5cdCAgICAgICAgICBwYWdlX25hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgX2N1cnJlbnRQYWdlLnBhZ2VfbmFtZSxcblx0ICAgICAgICAgIHBhZ2Vfc3RhcnQ6IF9jdXJyZW50UGFnZS50cyxcblx0ICAgICAgICAgIGlzTWluaTogdHJ1ZSxcblx0ICAgICAgICAgIF9wYWdlX2F1dG9faWQ6IGFwbHVzU3RhdGljLlBBR0VfRU5ELFxuXHQgICAgICAgICAgX3BhZ2VfYXV0b19wdjogdHJ1ZSxcblx0ICAgICAgICAgIHJlZmVycmVyOiByZWZlcnJlclxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGFwbHVzLnNlbmRQVih7IGlzX2F1dG86IHRydWUgfSwgcHZhcmdzKTtcblx0ICAgICAgICBfY3VycmVudFBhZ2UgPSBudWxsO1xuXHQgICAgICAgIF9oYXNUcmFja2VkID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWs7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBnZXRDb25maWcgKCkge1xuXHQgICAgcmJfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3JiX2NvbmZpZycpO1xuXHQgICAgcGRyX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdwZHJfY29uZmlnJyk7XG5cdCAgICBzaGFyZV9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnc2hhcmVfY29uZmlnJyk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmZXRjaFZlcmlmeUNvbmZpZyhjb2RlLCBhcHBJbmZvSWQpIHtcblx0ICAgIGlmICghY29kZSB8fCAhYXBwSW5mb0lkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB0cnkgeyBcblx0ICAgICAgdmFyIGFwaV9ob3N0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWFwaS1ob3N0Jyk7XG5cdCAgICAgIHZhciByZWcgPSAvW1thLXp8XFwtfFxcX3wwLTlcXC5dK1thLXp8XFwtfFxcX3wwLTldKDpcXGQqKT8vO1xuXHQgICAgICB2YXIgdmVyaWZ5X2hvc3QgPSBhcGlfaG9zdC5tYXRjaChyZWcpO1xuXHQgICAgICBcblx0ICAgICAgaWYgKHZlcmlmeV9ob3N0ICYmIHZlcmlmeV9ob3N0WzBdKSB7XG5cdCAgICAgICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG5cdCAgICAgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh2ZXJpZnlfaG9zdFswXSkpIHtcblx0ICAgICAgICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHZlcmlmeVVybCA9IHByb3RvY2FsICsgJy8vJyArIGFwaV9ob3N0KyAnL3Z0L2xvYWRUcmFuc2ZlckNvbmZpZz9jb2RlPScgKyBjb2RlICsgJyZhcHBJbmZvSWQ9JyArIGFwcEluZm9JZDtcblx0ICAgICAgICBtaW5pLnJlcXVlc3QodmVyaWZ5VXJsLCB7fSwgZnVuY3Rpb24ocmVzcCl7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgY2ZnRGF0YSA9IChyZXNwLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEuY29uZmlnKSB8fCAnJztcblx0ICAgICAgICAgICAgdmFyIGRlYnVnSWQgPSAocmVzcC5kYXRhICYmIHJlc3AuZGF0YS5kYXRhICYmIHJlc3AuZGF0YS5kYXRhLmRlYnVnSWQpIHx8ICcnO1xuXHQgICAgICAgICAgICBpZihkZWJ1Z0lkKXtcblx0ICAgICAgICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnLHtcblx0ICAgICAgICAgICAgICAgIGRlYnVnSWQ6ZGVidWdJZFxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBfYmVnaW5Mb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgIGFwbHVzLl9taW5pY2ZnX2xvYWQgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIF9iZWdpbkxvYWQ7XG5cdCAgICAgICAgICAgIGlmIChjZmdEYXRhKSB7XG5cdCAgICAgICAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IEpTT04ucGFyc2UoY2ZnRGF0YSkgfHwge307XG5cdCAgICAgICAgICAgICAgdXRpbFZULnZ0MmF1dG9FdmVudCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIHVsb2coKS53KCfmi4nlj5blrp7ml7blj6/op4bljJbln4vngrnpqozor4HlpLHotKUsIOmUmeivr+S/oeaBr++8micgKyBlKTtcblx0ICAgICAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgICAgICAvLyAgIGxldmVsOidlcnJvcicsXG5cdCAgICAgICAgICAgIC8vICAgbXNnOifmi4nlj5blrp7ml7blj6/op4bljJbln4vngrnpqozor4HlpLHotKUsIOmUmeivr+S/oeaBr++8micgKyBlXG5cdCAgICAgICAgICAgIC8vIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9IGNhdGNoIChlcnJvcikge1xuXHQgICAgICBcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcblx0ICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuXHQgICAgICAgIGdldENvbmZpZygpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvbkxvYWQnLCBmdW5jdGlvbihvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIGNvZGUgPSBQYWdlTWFuYWdlci5nZXRWVFJlYWx0aW1lQ29kZSgpO1xuXHQgICAgICAgIGlmIChjb2RlKSB7XG5cdCAgICAgICAgICB2YXIgYXBwSW5mb0lkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcEluZm9JZCcpO1xuXHQgICAgICAgICAgZmV0Y2hWZXJpZnlDb25maWcoY29kZSwgYXBwSW5mb0lkKTtcblx0ICAgICAgICB9IGVsc2UgeyAgICAgICAgICBcblx0ICAgICAgICAgICEhYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSAmJiB1dGlsVlQudnQyYXV0b0V2ZW50KCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICB1bG9nKCkudygn5ouJ5Y+W5a6e5pe25Y+v6KeG5YyW5Z+L54K56aqM6K+B5L+h5oGv5aSx6LSl77yMIOmUmeivr+WOn+WboO+8micgKyBlKTtcblx0ICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgLy8gICBsZXZlbDogJ2Vycm9yJyxcblx0ICAgICAgICAvLyAgIG1zZzogJ+aLieWPluWunuaXtuWPr+inhuWMluWfi+eCuemqjOivgeS/oeaBr+Wksei0pe+8jCDplJnor6/ljp/lm6DvvJonICsgZVxuXHQgICAgICAgIC8vIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hvdycsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIHZhciBpc0F1dG8gPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSAhPT0gJ01BTic7XG5cdCAgICAgIGlzQXV0byAmJiBldmVudEhhbmRsZSgnb25QYWdlU2hvdycpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvbkhpZGUnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICB2YXIgaXNBdXRvID0gY3R4LmFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy13YWl0aW5nJykgIT09ICdNQU4nO1xuXHQgICAgICBpc0F1dG8gJiYgZXZlbnRIYW5kbGUoJ29uUGFnZUhpZGUnKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25QdWxsRG93blJlZnJlc2gnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICBldmVudEhhbmRsZSgnb25QdWxsRG93blJlZnJlc2gnKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25SZWFjaEJvdHRvbScsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIGV2ZW50SGFuZGxlKCdvblJlYWNoQm90dG9tJyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hhcmVBcHBNZXNzYWdlJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgZXZlbnRIYW5kbGUoJ29uU2hhcmVBcHBNZXNzYWdlJyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hhcmVUaW1lbGluZScsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIGV2ZW50SGFuZGxlKCdvblNoYXJlVGltZWxpbmUnKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgaWYgKCEhYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuXHQgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKGFwbHVzU3RhdGljLlNVQlNDUklCRSwgW01JTklfVlRfQ09ORklHX0ZPUk1BVCwgZnVuY3Rpb24ob3B0aW9ucyl7XG5cdCAgICAgIHZhciBwYWdlQ29uZmlnID0gb3B0aW9ucy5wYWdlQ29uZmlnO1xuXHQgICAgICBpZiAocGFnZUNvbmZpZyAmJiBwYWdlQ29uZmlnLmVuYWJsZWQpIHtcblx0ICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0gcGFnZUNvbmZpZztcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIGF1dG9UcmFja2VyKCk7XG5cdCAgICAgIGlmICghYXBsdXMuX2FwbHVzX2FsZWFkeV9sb2FkX21pbml2dCl7XG5cdCAgICAgICAgYXBsdXMuX2FwbHVzX2FsZWFkeV9sb2FkX21pbml2dCA9IDE7XG5cdCAgICAgICAgdmFyIGZjID0gRmV0Y2hDb25maWcuY3JlYXRlKCk7XG5cdCAgICAgICAgZmMucnVuKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogOTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICog5Y+v6KeG5YyW5Z+L54K56YWN572u5L+h5oGv6K+35rGCIFxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQWFyb2586ZKw5pitIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXHR2YXIgdXRpbEdRID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7XG5cdHZhciB1dGlsQ2F0Y2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0dmFyIG1pbml2dFN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mik7XG5cdC8vIHZhciB1dGlsVXJsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxVcmwnKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBNSU5JX1ZUX0NPTkZJR19CQUNLID0gJ01pbmlWdENvbmZpZ0JhY2snO1xuXHR2YXIgTUlOSV9WVF9DT05GSUdfRk9STUFUID0gJ01pbmlWdENvbmZpZ0Zvcm1hdCc7XG5cdFxuXHR2YXIgR09MRExPR19QVUJMSVNIID0gYXBsdXNTdGF0aWMuUFVCTElTSDtcblx0Ly8gcHJvZDogaHR0cHM6Ly9hbGlkdC5hbGljZG4uY29tL2FsaWxvZy92dGRhaWx5LyR7Y29tcG9uZW50SUR9Lmpzb25cblx0Ly8gaHR0cHM6Ly9kLmFsaWNkbi5jb20vYWxpbG9nL3Z0L2ExejFkMV8xMjI3OTkxNC5qc29uXG5cdC8vIHZhciBIT1NUID0gJy8vZy5hbGljZG4uY29tL2FsaWxvZyc7XG5cdC8vIHZhciBIT1NUID0gJy8vZC5hbGljZG4uY29tL2FsaWxvZyc7XG5cdFxuXHQvLyBmdW5jdGlvbiBpc0RhaWx5ICgpIHtcblx0Ly8gICB2YXIgcnMgPSBmYWxzZTtcblx0Ly8gICBpZiAoYXBsdXMgJiYgYXBsdXMuYXBsdXNEZWJ1Zykge1xuXHQvLyAgICAgcmV0dXJuIHRydWU7XG5cdC8vICAgfVxuXHQvLyAgIHJldHVybiBycztcblx0Ly8gfVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh1dGlsRGFzaC5hc3NpZ24obWluaXZ0U3RvcmUsIHtcblx0XG5cdCAgcGF0aG5hbWU6ICcnLFxuXHRcblx0ICBwYWdlQ29uZmlnOiB7fSxcblx0XG5cdCAgb3JpZ2luU3BtOiB7XG5cdCAgICBzcG1BOiAnJyxcblx0ICAgIHNwbUI6ICcnXG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlQ2ZnTHM6IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgX3NlbGYuZmV0Y2hGcm9tQ2RuKCk7XG5cdCAgICB9LDEwMDApO1xuXHQgIH0sXG5cdFxuXHQgIGZldGNoRnJvbUNkbjogZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIHBhdGggPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpO1xuXHQgICAgaWYgKCFwYXRoKSByZXR1cm47XG5cdCAgICB2YXIgX2JlZ2luTG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpO1xuXHQgICAgYXBsdXMucmVxdWVzdFZUQ29uZmlnKHBhdGgsIGZ1bmN0aW9uKHJlc3ApIHtcblx0ICAgICAgdmFyIGNmZ0RhdGEgPSByZXNwLmRhdGE7XG5cdCAgICAgIGFwbHVzLl9taW5pY2ZnX2xvYWQgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIF9iZWdpbkxvYWQ7XG5cdCAgICAgIGlmIChjZmdEYXRhKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSB0eXBlb2YgY2ZnRGF0YSA9PT0gJ29iamVjdCcgPyBjZmdEYXRhIDogSlNPTi5wYXJzZShjZmdEYXRhKTtcblx0ICAgICAgICAgIGlmIChhcGx1cy5fYXBsdXNfdnRfY2ZnLnBvaW50cykge1xuXHQgICAgICAgICAgICBlYWNoKGFwbHVzLl9hcGx1c192dF9jZmcucG9pbnRzLCBmdW5jdGlvbiAodikge1xuXHQgICAgICAgICAgICAgIHYuc2VsZWN0b3IgPSBkZWNvZGVVUklDb21wb25lbnQodi5zZWxlY3Rvcik7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgX3NlbGYuc2V0Q29uZmlnSW50b0xzKGFwbHVzLl9hcGx1c192dF9jZmcpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSB7XG5cdCAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19QVUJMSVNILCBbTUlOSV9WVF9DT05GSUdfQkFDSywge3BhZ2VDb25maWc6YXBsdXMuX2FwbHVzX3Z0X2NmZywgZW5hYmxlOiAwfV0pO1xuXHQgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG5cdCAgICAgIGlmIChhcGx1cy5fYXBsdXNfdnRfY2ZnICYmIGFwbHVzLl9hcGx1c192dF9jZmcuZW5hYmxlZCkge1xuXHQgICAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzphcGx1cy5fYXBsdXNfdnRfY2ZnLCBlbmFibGU6IDB9XSk7ICBcblx0ICAgICAgfVxuXHQgICAgICB1dGlsQ2F0Y2guY2F0Y2hFeGNlcHRpb24oJ2dldFRyYWNrZXJDZmcnLCBlcnJvciwge1xuXHQgICAgICAgIG1zZzogcGF0aFxuXHQgICAgICB9KTtcblx0ICAgIH0sIHtcblx0ICAgICAgdGltZW91dDogNTAwMFxuXHQgICAgfSk7XG5cdCAgfSxcblx0XG5cdCAgZ2V0TWluaVZ0RGF0YTogZnVuY3Rpb24oY2RucGF0aCwgcHJlVXJsLCBmcm9tQ0ROKXtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IDA7XG5cdCAgICBpZiAoY2RucGF0aCkge1xuXHQgICAgICB2YXIgdnRDb25maWcgPSB0aGlzLmZldGNoRnJvbUxTKGNkbnBhdGgpO1xuXHQgICAgICBpZih0eXBlb2YgdnRDb25maWcgPT0gJ3N0cmluZycpIHtcblx0ICAgICAgICB0cnl7XG5cdCAgICAgICAgICB2dENvbmZpZyA9IEpTT04ucGFyc2UodnRDb25maWcpO1xuXHQgICAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgICAgdnRDb25maWcgPSB7fTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh2dENvbmZpZyAmJiB2dENvbmZpZy5lbmFibGVkKSB7XG5cdCAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHZ0Q29uZmlnO1xuXHQgICAgICB9XG5cdCAgICAgIGlmKCAhZnJvbUNETikge1xuXHQgICAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzp2dENvbmZpZywgZW5hYmxlOiAwfV0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuZmV0Y2hGcm9tQ2RuKGNkbnBhdGgsIHByZVVybCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvLyBodHRwczovL2QuYWxpY2RuLmNvbS9hbGlsb2cvdnRfZGFpbHkvYTF6MWQxXzEyMjc5OTE0Lmpzb25cblx0ICBzeW5jTWluaVZ0RGF0YTogZnVuY3Rpb24oKXtcblx0ICAgIC8vc3Vic2NyaWJlICB3cy5yZWFkeVxuXHQgICAgdmFyIGNkbnBhdGggPSB0aGlzLmdldFZ0Q29uZmlnUGF0aCgpO1xuXHQgICAgdGhpcy5nZXRNaW5pVnREYXRhKGNkbnBhdGgsICcnLCB0cnVlKTtcblx0ICB9LFxuXHRcblx0ICBpbml0OiBmdW5jdGlvbigpe1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIFxuXHQgICAgdmFyIEdPTERMT0dfU1VCU0NSSUJFID0gYXBsdXNTdGF0aWMuU1VCU0NSSUJFO1xuXHQgICAgLy90aGlzIGV2ZW50IGZyb20gTFMgb3IgZnJvbSBXUyB0byBnZXQgY29uZmlnXG5cdCAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19TVUJTQ1JJQkUsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcblx0ICAgICAgaWYoIW9yaURhdGFzLmVuYWJsZSkge1xuXHQgICAgICAgIF9zZWxmLnBhZ2VDb25maWcgPSBvcmlEYXRhcy5wYWdlQ29uZmlnO1xuXHQgICAgICB9XG5cdCAgICAgIC8vdGhpcyBldmVudCB0byB1c2U7XG5cdCAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19GT1JNQVQsIHtcblx0ICAgICAgICBwYWdlQ29uZmlnOiBfc2VsZi5wYWdlQ29uZmlnLFxuXHQgICAgICAgIG9yaWdpblNwbTogX3NlbGYub3JpZ2luU3BtXG5cdCAgICAgIH1dKTtcblx0ICAgICAgIW9yaURhdGFzLmVuYWJsZSAmJiBfc2VsZi5zZXRDb25maWdJbnRvTHMoX3NlbGYucGFnZUNvbmZpZyk7XG5cdCAgICB9XSk7XG5cdCAgICBfc2VsZi5zeW5jTWluaVZ0RGF0YSgpO1xuXHQgIH0sXG5cdFxuXHQgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5pbml0KCk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9XG5cdH0pKTtcblxuXG4vKioqLyB9KSxcbi8qIDkxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS91dGlscy91dGlsQXR0cmlidXRlLmpzXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHUSA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpO1xuXHRcblx0ZXhwb3J0cy5jYXRjaEV4Y2VwdGlvbiA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgZXJyb3IpIHtcblx0ICB2YXIgbWVzc2FnZSA9IGZpbGVuYW1lO1xuXHQgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yLm1lc3NhZ2UpIHtcblx0ICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJ18nICsgZXJyb3IubWVzc2FnZTtcblx0ICB9XG5cdCAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKCdhcGx1cy5fYXBsdXNfY3BsdWdpbl9tLmRvX3RyYWNrZXJfanNlcnJvcicsIFt7XG5cdCAgICBtZXNzYWdlOiBtZXNzYWdlLFxuXHQgICAgZXJyb3I6IEpTT04uc3RyaW5naWZ5KGVycm9yKSxcblx0ICAgIGZpbGVuYW1lOiBmaWxlbmFtZVxuXHQgIH1dKTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA5MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0KiBkZXNjcmlwdGlvblxuXHQqXG5cdCogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQqXG5cdCogQXV0aG9yczpcblx0KiAgIEFhcm9uIHwg6ZKw5pitIDxjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20+XG5cdCovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIGxzTWluaXZ0Q29uZmlnS2V5OiAnQVBMVVNfTUlOSV9DT05GSUcnLFxuXHRcblx0ICAvKipcblx0ICAgKiDlhazlhbHmqKHmnb/lnLrmma/vvIzlpoLmnpx0dXJub249PT0nMScg5ouJ5Y+WdmFsdWXlhoXnmoTlhoXlrrlcblx0ICAgKiBtZXRhSW5mbzoge1xuXHQgICAqICAnYXBsdXMtdHJhY2stY29uZmlnLWlkJzoge1xuXHQgICAqICAgICd2YWx1ZSc6ICdwYUN3WmxHMld2N2xsaGhtJyxcblx0ICAgKiAgICAndHVybm9uJzogJzAnIG9yICcxJyAgIFxuXHQgICAqICB9XG5cdCAgICogfVxuXHQgICAqL1xuXHQgIGdldE1pbmlWdFRwbENkblBhdGg6IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgYXBsdXNUcmFja0NvbmZpZ0lkSW5mbyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy10cmFjay1jb25maWctaWQnKTtcblx0ICAgIHZhciB0dXJub24gPSBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvICYmIGFwbHVzVHJhY2tDb25maWdJZEluZm8udHVybm9uO1xuXHQgICAgdmFyIHZhbHVlID0gYXBsdXNUcmFja0NvbmZpZ0lkSW5mbyAmJiBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvLnZhbHVlO1xuXHQgICAgaWYgKHR1cm5vbiA9PT0gJzEnICYmIHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiAnJztcblx0ICB9LFxuXHRcblx0ICBnZXRWdENvbmZpZ1BhdGg6IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHRlbXBsYXRlVmFsID0gdGhpcy5nZXRNaW5pVnRUcGxDZG5QYXRoKCk7XG5cdCAgICB2YXIgc3BtQUIgPSBbXTtcblx0ICAgIHZhciBzcG1JZDtcblx0ICAgIHZhciBhcHBrZXkgPSB1dGlsLmdldEFwcEtleSgpO1xuXHQgICAgaWYgKGFwcGtleSkge1xuXHQgICAgICBzcG1JZCA9IGFwcGtleTtcblx0ICAgIH1cblx0ICAgIFxuXHQgICAgaWYgKHNwbUlkKSB7XG5cdCAgICAgIHNwbUFCID0gc3BtSWQuc3BsaXQoJy4nKTtcblx0ICAgIH0gXG5cdCAgICAvLyByZW1vdmUgZWxzZSBsb2dpYyBpbnNpZGUgd2VidnRTdG9yZSwgYmVjYXVzZSBtaW5pX2Nsb3VkIGRvbnQgc3VwcG9ydCBzcG1cblx0ICAgIGlmIChzcG1BQi5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgdGhpcy5vcmlnaW5TcG0gPSB7XG5cdCAgICAgICAgc3BtQTogc3BtQUJbMF0sXG5cdCAgICAgICAgc3BtQjogc3BtQUJbMV1cblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSBpZiAoc3BtQUIubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIHRoaXMub3JpZ2luU3BtLnNwbUEgPSBzcG1BQlswXTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodGVtcGxhdGVWYWwpIHtcblx0ICAgICAgcmV0dXJuIHRlbXBsYXRlVmFsO1xuXHQgICAgfVxuXHQgICAgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMikge1xuXHQgICAgICByZXR1cm4gc3BtQUIuam9pbignXycpO1xuXHQgICAgfSBlbHNlIGlmIChzcG1BQi5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgcmV0dXJuIHNwbUFCWzBdO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGZldGNoRnJvbUxTOiBmdW5jdGlvbiAoY2RucGF0aCkge1xuXHQgICAgaWYgKCF0aGlzLmNkbnBhdGgpIHtcblx0ICAgICAgdGhpcy5jZG5wYXRoID0gY2RucGF0aCB8fCB0aGlzLmdldE1pbmlWdFRwbENkblBhdGgoKTtcblx0ICAgIH1cblx0ICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY3R4LmdldFN0b3JhZ2VTeW5jKHRoaXMubHNNaW5pdnRDb25maWdLZXkgKyAnLScgKyBjZG5wYXRoKSkgfHwge307XG5cdCAgfSxcblx0XG5cdCAgc2V0Q29uZmlnSW50b0xzOiBmdW5jdGlvbihjb25maWcpIHtcblx0ICAgIGlmICghdGhpcy5jZG5wYXRoKSB7XG5cdCAgICAgIHRoaXMuY2RucGF0aCA9IHRoaXMuZ2V0VnRDb25maWdQYXRoKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICBjdHguc2V0U3RvcmFnZVN5bmModGhpcy5sc01pbml2dENvbmZpZ0tleSArICctJyArIHRoaXMuY2RucGF0aCwgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNvbmZpZykpKTtcblx0ICAgIC8vIHV0aWxTdG9yZS5zZXQodGhpcy5sc01pbml2dENvbmZpZ0tleSArICctJyArIHRoaXMuY2RucGF0aCwgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNvbmZpZykpKTtcblx0ICB9XG5cdFxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDkzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogdXRpbFZULmpzXG5cdCAqIOWPr+inhuWMlumFjee9riDop6PmnpDphY3nva7kv6Hmga/kuLroh6rliqjngrnlh7vjgIHoh6rliqjmm53lhYnjgIHoh6rliqhwduWFrOWFseWHveaVsFxuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1dGlsQXJyYXkgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0ZXhwb3J0cy5nZXRDdXJyZW50UGFnZVZUQ2ZnID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHZ0Q2ZnID0gYXBsdXMuX2FwbHVzX3Z0X2NmZztcblx0ICBpZiAoIXZ0Q2ZnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBwYXRoID0gUGFnZU1hbmFnZXIuZ2V0Q3VycmVudFBhZ2VQYXRoKCk7XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgdnRDZmcucGFnZXMubGVuZ3RoOyBpKysgKXtcblx0ICAgIHZhciBwYWdlQ29uZmlnID0gdnRDZmcucGFnZXNbaV07XG5cdCAgICBpZiAocGFnZUNvbmZpZy5tYXRjaFVybCA9PT0gcGF0aCkge1xuXHQgICAgICByZXR1cm4gcGFnZUNvbmZpZztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybjtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIG1lcmdlQXV0b0NmZ3MgKGNmZzEsY2ZnMil7XG5cdCAgY2ZnMSA9IHV0aWxBcnJheS5pc0FycmF5KGNmZzEpP2NmZzEgOiBbXTtcblx0ICBjZmcyID0gdXRpbEFycmF5LmlzQXJyYXkoY2ZnMik/Y2ZnMiA6IFtdO1xuXHQgIHZhciB0b3RhbEF1dG9DZmdzID0gW10uY29uY2F0KGNmZzIsY2ZnMSk7XG5cdCAgZnVuY3Rpb24gZ2V0SW5kZXggKGl0ZW0sYXJyKXtcblx0ICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgZm9yKHZhciBpID0gMDsgaTxhcnIubGVuZ3RoOyBpKyspe1xuXHQgICAgICB2YXIgY3VycmVudCA9IGFycltpXTtcblx0ICAgICAgaWYoY3VycmVudC5jc3NTZWxlY3Rvcj09PWl0ZW0uY3NzU2VsZWN0b3ImJmN1cnJlbnQubG9na2V5PT09aXRlbS5sb2drZXkpe1xuXHQgICAgICAgIGluZGV4ID0gaTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGluZGV4O1xuXHQgIH1cblx0ICB2YXIgZmluYWxBdXRvQ2ZncyA9IHRvdGFsQXV0b0NmZ3MuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0saW5kZXgsYXJyYXkpe1xuXHQgICAgcmV0dXJuIGdldEluZGV4KGl0ZW0sYXJyYXkpID09PSBpbmRleDtcblx0ICB9KTtcblx0ICByZXR1cm4gZmluYWxBdXRvQ2Zncztcblx0fVxuXHRmdW5jdGlvbiByZW1vdmVBdXRvQ2Znc0Zyb21WdChjb25maWdzKXtcblx0ICBpZiggdXRpbEFycmF5LmlzQXJyYXkoY29uZmlncykpe1xuXHQgICAgcmV0dXJuIGNvbmZpZ3MuZmlsdGVyKGZ1bmN0aW9uKGNvbmZpZyl7XG5cdCAgICAgIHJldHVybiBjb25maWcuX3Z0ID09PSB2b2lkIDA7XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgcmV0dXJuIFtdO1xuXHR9XG5cdGZ1bmN0aW9uIGZvcm1hdFNlbGVjdG9yKHNlbGVjdG9yKXtcblx0ICBpZigvXlsuI10vLnRlc3Qoc2VsZWN0b3IpKXtcblx0ICAgIHJldHVybiBzZWxlY3Rvcjtcblx0ICB9ZWxzZXtcblx0ICAgIHJldHVybiBzZWxlY3RvciA/ICcuJyArIHNlbGVjdG9yIDogJyc7XG5cdCAgfVxuXHR9XG5cdGV4cG9ydHMudnQyYXV0b0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHZ0X2NmZyA9IGFwbHVzLl9hcGx1c192dF9jZmcgfHwgYXBsdXMuX2FwbHVzX3RyYWNraW5nX2NmZztcblx0ICBpZiAoIXZ0X2NmZykgcmV0dXJuO1xuXHQgIHZhciBwYWdlSW5zdGFuY2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgdmFyIGN1cnJlbnRQYWdlID0gcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcblx0ICB2YXIgYXV0b19leHBfYXJyID0gW10sIGF1dG9fY2xrX2FyciA9IFtdO1xuXHQgIGVhY2godnRfY2ZnLnBhZ2VzLCBmdW5jdGlvbihwYykge1xuXHQgICAgYXBsdXMuc2V0UGFnZU5hbWUoeyBwYWdlTmFtZTogcGMuc3BtQiwgZXh0cmFQYXJhbXM6IHBjLmV4dHJhUGFyYW1zIH0sIHBjLm1hdGNoVXJsKTtcblx0ICAgIGlmIChwYy5tYXRjaFVybCA9PT0gY3VycmVudFBhZ2UpIHtcblx0ICAgICAgZWFjaCh2dF9jZmcucG9pbnRzLCBmdW5jdGlvbihwKXtcblx0ICAgICAgICBpZiAocGMuc3BtQiA9PT0gcC5zcG1CKSB7XG5cdCAgICAgICAgICBpZiAocC50cmFja2VyVHlwZSA9PT0gXCJleHBvc3VyZVwiKSB7IFxuXHQgICAgICAgICAgICBhdXRvX2V4cF9hcnIucHVzaCh7XG5cdCAgICAgICAgICAgICAgJ2Nzc1NlbGVjdG9yJzogZm9ybWF0U2VsZWN0b3IocC5zZWxlY3RvciksXG5cdCAgICAgICAgICAgICAgJ3Bvc2l0aW9uU2VsZWN0b3InOiBwLnBvc2l0aW9uU2VsZWN0b3IsXG5cdCAgICAgICAgICAgICAgJ2xvZ2tleSc6IHAubG9na2V5LFxuXHQgICAgICAgICAgICAgICdwcm9wcyc6IHAucHJvcHMgfHwgW10sXG5cdCAgICAgICAgICAgICAgJ3NwbUInOiBwLnNwbUIsXG5cdCAgICAgICAgICAgICAgJ3NwbUMnOiBwLnNwbUMsXG5cdCAgICAgICAgICAgICAgJ3NwbUQnOiBwLnNwbUQsXG5cdCAgICAgICAgICAgICAgJ2N1c3RvbUFyZ3MnOiBwLmN1c3RvbUFyZ3MsXG5cdCAgICAgICAgICAgICAgJ192dCc6IHBjLnRlbXBsYXRlIHx8IHBjLnN0ZElkID8gMiA6IDFcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBhdXRvX2Nsa19hcnIucHVzaCh7XG5cdCAgICAgICAgICAgICAgJ2Nzc1NlbGVjdG9yJzogZm9ybWF0U2VsZWN0b3IocC5zZWxlY3RvciksXG5cdCAgICAgICAgICAgICAgJ2xvZ2tleSc6IHAubG9na2V5LFxuXHQgICAgICAgICAgICAgICdwcm9wcyc6IHAucHJvcHMgfHwgW10sIFxuXHQgICAgICAgICAgICAgICdzcG1CJzogcC5zcG1CLFxuXHQgICAgICAgICAgICAgICdzcG1DJzogcC5zcG1DLFxuXHQgICAgICAgICAgICAgICdzcG1EJzogcC5zcG1ELFxuXHQgICAgICAgICAgICAgICdjdXN0b21BcmdzJzogcC5jdXN0b21BcmdzLFxuXHQgICAgICAgICAgICAgICdfdnQnOiBwYy50ZW1wbGF0ZSB8fCBwYy5zdGRJZCA/IDIgOiAxXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBpZiAodnRfY2ZnLmNvbW1vbl9leGRhdGEgJiYgdHlwZW9mIHZ0X2NmZy5jb21tb25fZXhkYXRhID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGFwbHVzLnNldE1ldGFJbmZvKCdhcGx1cy1leGRhdGEnLCB2dF9jZmcuY29tbW9uX2V4ZGF0YSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh2dF9jZmcuY29tbW9uX3B2ZGF0YSAmJiB0eXBlb2YgdnRfY2ZnLmNvbW1vbl9wdmRhdGEgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnLCB2dF9jZmcuY29tbW9uX3B2ZGF0YSk7XG5cdCAgICAgIH1cblx0ICAgIH0gICAgICBcblx0ICB9KTtcblx0ICB2YXIgb2xkX2F1dG9fZXhwX2FyciA9IHJlbW92ZUF1dG9DZmdzRnJvbVZ0KGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpKTtcblx0ICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnLCBtZXJnZUF1dG9DZmdzKG9sZF9hdXRvX2V4cF9hcnIsYXV0b19leHBfYXJyKSk7XG5cdCAgdmFyIG9sZF9hdXRvX2Nsa19hcnIgPSByZW1vdmVBdXRvQ2Znc0Zyb21WdChhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnKSk7XG5cdCAgYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJywgbWVyZ2VBdXRvQ2ZncyhvbGRfYXV0b19jbGtfYXJyLGF1dG9fY2xrX2FycikpO1xuXHR9O1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDk0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFwbHVzX21pbmlfYmFzaWNcblx0ICog5bCP56iL5bqP5qih5Z2X5YyW55qEYXBsdXNKc+WFpeWPo1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwcENvbmZpZyxhcGx1c19jb25maWcpIHtcblx0ICB2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQgIC8vIHJlcXVpcmUoJ0B1dGlscy9kZWJ1ZycpLmlzRGVidWdBcGx1cyh0cnVlKTtcblx0XG5cdCAgdmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0ICAvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdCAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0ICB2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdCAgdmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQgIHZhciBhcGx1c2luaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTtcblx0ICBtaW5pLmluaXRJc1RCKCk7XG5cdFxuXHQgIGlmICh0eXBlb2YgYXBwQ29uZmlnID09PSAnb2JqZWN0Jykge1xuXHQgICAgaWYgKGFwcENvbmZpZy5zaXRlSWQpIHtcblx0ICAgICAgYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5zaXRlSWQgPSBhcHBDb25maWcuc2l0ZUlkO1xuXHQgICAgfVxuXHQgICAgYXBsdXNfY29uZmlnLm1ldGFJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgYXBsdXNfY29uZmlnLm1ldGFJbmZvLCBhcHBDb25maWcubWV0YUluZm8pO1xuXHQgIH1cblx0XG5cdCAgdmFyIFJVTk5JTkcgPSAncnVubmluZyc7XG5cdCAgdmFyIENPTVBMRVRFID0gJ2NvbXBsZXRlJztcblx0ICB2YXIgYXBsdXNTdGF0dXMgPSBbJ2FwbHVzUmVhZHknLCBSVU5OSU5HXTtcblx0XG5cdCAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhhcGx1c1N0YXR1cyk7XG5cdFxuXHQgIGFwbHVzaW5pdC5ydW4oe1xuXHQgICAgcGx1Z2luczogYXBsdXNfY29uZmlnLnBsdWdpbnMsXG5cdCAgICBjb250ZXh0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBjb25maWdfcHZfY29udGV4dCA9IHtcblx0ICAgICAgICBQQUdFX0xPQURfVElNRTogbmV3IERhdGUoKVxuXHQgICAgICB9O1xuXHQgICAgICB2YXIgUExVR0lOU19QViA9IFtdO1xuXHQgICAgICBlYWNoKGFwbHVzX2NvbmZpZy5wbHVnaW5zLCBmdW5jdGlvbiAodikge1xuXHQgICAgICAgIGNvbmZpZ19wdl9jb250ZXh0W3YubmFtZV0gPSB2LmNvbmZpZztcblx0ICAgICAgICBpZiAodi5uYW1lID09PSAnYXBsdXNfbG9nX2luamVjdCcgJiYgdi5jb25maWcgJiYgdi5jb25maWcucGx1Z2lucykge1xuXHQgICAgICAgICAgUExVR0lOU19QViA9IHYuY29uZmlnLnBsdWdpbnMucHY7XG5cdCAgICAgICAgICBlYWNoKFBMVUdJTlNfUFYsIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICAgIGNvbmZpZ19wdl9jb250ZXh0W3YubmFtZV0gPSB2LmNvbmZpZztcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb25maWdfcHZfY29udGV4dCwge1xuXHQgICAgICAgIGFwbHVzX2NvbmZpZzogYXBsdXNfY29uZmlnXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIGZ1bmN0aW9uICgpIHtcblx0ICAgIHVsb2coKS53KCdBUExVUyBJTklUIFNVQ0NFU1MnKTtcblx0ICAgIC8vIGFwbHVz5YeG5aSH5aW95LqG77yM5YiG5Y+R5LiA5LiqcmVhZHnkuovku7Zcblx0ICAgIGFwbHVzU3RhdHVzWzFdID0gQ09NUExFVEU7XG5cdCAgICB1dGlsUHVic3ViLmRvUHViTXNnKGFwbHVzU3RhdHVzKTtcblx0ICB9KTtcblx0XG5cdCAgLy8gcmV0dXJuIHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUUpO1xuXHQgIHJldHVybiB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogOTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGFwbHVzIEFQSVxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWR1Y2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHQvKipcblx0ICog5bCG5ZCO57ut55qEaW5pdOWKqOS9nOmDveWBmuaIkOaPkuS7tu+8jOebruWJjeWPquaciXdoZXJlX3RvX3NlbmRwduS4gOmhuVxuXHQgKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIHBsdWdpbnNcblx0ICogICBjb250ZXh0XG5cdCAqIH1cblx0ICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqXG5cdCAqL1xuXHRleHBvcnRzLnJ1biA9IGZ1bmN0aW9uIChvcHRzLCBjYWxsYmFjaykge1xuXHQgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcblx0ICByZWR1Y2VyLnJ1bih7XG5cdCAgICBwbHVnaW5zOiBvcHRzLnBsdWdpbnMsXG5cdCAgICBjb250ZXh0OiBvcHRzLmNvbnRleHRcblx0ICB9LCB7XG5cdCAgICBjb25maWc6IHt9LFxuXHQgICAgdXNlcmRhdGE6IHt9LFxuXHQgICAgcHVic3ViVHlwZTogJ2FwbHVzaW5pdCcsXG5cdCAgICBtZXNzYWdlRm5RdWV1ZTogW10sXG5cdCAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9hcGx1c2luaXQnXG5cdCAgfSwgZnVuY3Rpb24gKGN0eCkge1xuXHQgICAgdmFyIG1zZ3MgPSBbJ2FwbHVzSW5pdENvbnRleHQnLCBjdHhdO1xuXHQgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcblx0ICAgICAgY2FsbGJhY2soY3R4KTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwbHVzX21pbmlfY2xvdWRfdW0uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBiMzU3MTUxNDk0OTNiOWMyODQwMyIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG4vKipcbiAqIGFwbHVzX21pbmlfY2xvdWQuanNcbiAqIOS6keS4iuWwj+eoi+W6j+aooeWdl+WMlueahGFwbHVzSnPlhaXlj6NcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xucmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJykuaW5pdEdsb2JhbCgpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwQ29uZmlnKSB7XG4gIHZhciBhcGx1c19jb25maWcgPSByZXF1aXJlKCcuL2FwbHVzX21pbmlfY2xvdWRfdW1fY29uZmlnJyk7IFxuICByZXR1cm4gcmVxdWlyZSgnLi9hcGx1c19taW5pX2Jhc2ljJykoYXBwQ29uZmlnLGFwbHVzX2NvbmZpZyk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYXBsdXNfbWluaV9jbG91ZF91bS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pON5L2cYXBsdXPnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxudmFyIEFQTFVTID0gYXBsdXNTdGF0aWMuQVBMVVM7XG52YXIgQVBMVVNfUVVFVUUgPSBhcGx1c1N0YXRpYy5BUExVU19RVUVVRTtcblxudmFyIEdPTERMT0cgPSBhcGx1c1N0YXRpYy5HT0xETE9HO1xudmFyIEdPTERMT0dfUVVFVUUgPSBhcGx1c1N0YXRpYy5HT0xETE9HX1FVRVVFO1xuXG52YXIgX2FwbHVzX2NvbnRleHQ7XG52YXIgaXNXZWIgPSBmYWxzZTtcbnRyeSB7XG4gIF9hcGx1c19jb250ZXh0ID0gd2luZG93O1xuICBpc1dlYiA9IHRydWU7XG59IGNhdGNoIChlKSB7XG4gIF9hcGx1c19jb250ZXh0ID0ge307XG59XG5cbmV4cG9ydHMuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIF9hcGx1c19jb250ZXh0O1xufTtcblxuZXhwb3J0cy5pbml0R2xvYmFsID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgaWYgKGNvbnRleHQpIHtcbiAgICBfYXBsdXNfY29udGV4dCA9IGNvbnRleHQ7XG4gIH0gZWxzZSB7XG4gICAgX2FwbHVzX2NvbnRleHQgPSB7XG4gICAgICB2OiAxLFxuICAgICAgYXBsdXM6IHt9LFxuICAgICAgYXBsdXNfcXVldWU6IFtdXG4gICAgfTtcbiAgfVxuICB2YXIgX2FwbHVzRGVmYXVsdFZhbHVlO1xuICB2YXIgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWU7XG4gIGlmIChpc1dlYikge1xuICAgIHRyeSB7XG4gICAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSAoX2FwbHVzX2NvbnRleHQuYXBsdXMgfHwgX2FwbHVzX2NvbnRleHQuZ29sZGxvZyB8fCAoX2FwbHVzX2NvbnRleHQuYXBsdXMgPSB7fSkpO1xuICAgICAgdmFyIF9nb2xkbG9nX3F1ZXVlID0gKF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgfHwgKF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgPSBbXSkpO1xuICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgfHwgKF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gW10pKTtcbiAgICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gX2dvbGRsb2dfcXVldWUuY29uY2F0KF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlKTsgIFxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH0gZWxzZSB7XG4gICAgX2FwbHVzRGVmYXVsdFZhbHVlID0gX2FwbHVzX2NvbnRleHQuYXBsdXM7XG4gICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZTtcbiAgfVxuICBcbiAgX2FwbHVzX2NvbnRleHQuYXBsdXMgPSBfYXBsdXNfY29udGV4dC5nb2xkbG9nID0gX2FwbHVzRGVmYXVsdFZhbHVlO1xuICBfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgPSBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcbiAgXG4gIHJldHVybiBfYXBsdXNfY29udGV4dDtcbn07XG5cbnZhciBnZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgaWYgKGtleSA9PT0gQVBMVVMgfHwga2V5ID09PSBHT0xETE9HKSB7XG4gICAgdmFyIGcgPSBfYXBsdXNfY29udGV4dFtBUExVU10gfHwgX2FwbHVzX2NvbnRleHRbR09MRExPR107XG4gICAgaWYgKCFnKSB7XG4gICAgICBnID0gX2FwbHVzX2NvbnRleHRbQVBMVVNdID0gX2FwbHVzX2NvbnRleHRbR09MRExPR10gPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIGc7XG4gIH1cbiAgdmFyIGdvbGRsb2dfcXVldWUgPSBHT0xETE9HX1FVRVVFO1xuICB2YXIgYXBsdXNfcXVldWUgPSBBUExVU19RVUVVRTtcbiAgaWYgKGtleSA9PT0gYXBsdXNfcXVldWUgfHwga2V5ID09PSBnb2xkbG9nX3F1ZXVlKSB7XG4gICAgdmFyIHEgPSBfYXBsdXNfY29udGV4dFthcGx1c19xdWV1ZV0gfHwgX2FwbHVzX2NvbnRleHRbZ29sZGxvZ19xdWV1ZV07XG4gICAgaWYgKCFxKSB7XG4gICAgICBxID0gX2FwbHVzX2NvbnRleHRbYXBsdXNfcXVldWVdID0gX2FwbHVzX2NvbnRleHRbZ29sZGxvZ19xdWV1ZV0gPSBbXTtcbiAgICB9XG4gICAgcmV0dXJuIHE7XG4gIH1cbn07XG5leHBvcnRzLmdldEdsb2JhbFZhbHVlID0gZ2V0R2xvYmFsVmFsdWU7XG5cbmV4cG9ydHMuc2V0R2xvYmFsVmFsdWUgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICBfYXBsdXNfY29udGV4dFtrZXldID0gdmFsdWU7XG59O1xuXG4vKipcbiAqIOiOt+WPlmFwbHVz5YaF6YOo5Y+Y6YePXG4gKiBAcGFyYW1zIFtTdHJpbmddIGtleVxuICogQHJldHVybiBbT2JqZWN0fFN0cmluZ3xOdW1iZXJ8Qm9vbGVhbl1cbiAqL1xudmFyIGdldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXkpIHtcbiAgdmFyIHY7XG4gIHRyeSB7XG4gICAgdmFyIGFwbHVzID0gZ2V0R2xvYmFsVmFsdWUoQVBMVVMpO1xuICAgIHYgPSBhcGx1c1trZXldO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdiA9ICcnO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiB2O1xuICB9XG59O1xuZXhwb3J0cy5nZXRHb2xkbG9nVmFsID0gZ2V0R29sZGxvZ1ZhbDtcbi8qKlxuICog6K6+572uYXBsdXPlhoXpg6jlj5jph49cbiAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG4gKiBAcGFyYW1zIFtPYmplY3R8U3RyaW5nfE51bWJlcnxCb29sZWFuXSB2YWxcbiAqIEByZXR1cm4gW0Jvb2xlYW5dXG4gKi9cbnZhciBzZXRHb2xkbG9nVmFsID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgdmFyIGYgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG4gICAgaWYgKGtleSkge1xuICAgICAgYXBsdXNba2V5XSA9IHZhbDtcbiAgICAgIGYgPSB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGYgPSBmYWxzZTtcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gZjtcbiAgfVxufTtcbmV4cG9ydHMuc2V0R29sZGxvZ1ZhbCA9IHNldEdvbGRsb2dWYWw7XG5cbi8qKlxuICog6I635Y+WY2xpZW50SW5mbyjmtY/op4jlmajjgIHorr7lpIfnrYnkv6Hmga8pXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiAgIHZlcnNpb246IDIsXG4gKiAgIHVhX2luZm86IHtcbiAqICAgICBiOiBcImNocm9tZTU4XCJcbiAqICAgICBpc206IFwibWFjXCJcbiAqICAgICBteDogXCIzNjBlZVwiXG4gKiAgICAgbzogXCJtYWNcIlxuICogICAgIHA6IDFcbiAqICAgICBzOiBcIjE5MjB4MTA4MFwiXG4gKiAgICAgdzogXCJ3ZWJraXRcIlxuICogICB9XG4gKiB9XG4gKi9cbmV4cG9ydHMuZ2V0Q2xpZW50SW5mbyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2NsaWVudCcpIHx8IHt9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxHb2xkbG9nLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBBUExVUyA9ICdhcGx1cyc7XG52YXIgR09MRExPRyA9ICdnb2xkbG9nJztcbnZhciBBUExVU19RVUVVRSA9IEFQTFVTICsgJ19xdWV1ZSc7XG52YXIgR09MRExPR19RVUVVRSA9IEdPTERMT0cgKyAnX3F1ZXVlJztcbnZhciBNV19DSEFOR0UgPSAnbXdfY2hhbmdlJztcbnZhciBNRVRBX0lORk8gPSAnTWV0YUluZm8nO1xudmFyIEFQUEVORF9NRVRBX0lORk8gPSAnYXBwZW5kJyArIE1FVEFfSU5GTztcbnZhciBTRVRfTUVUQV9JTkZPID0gJ3NldCcgKyBNRVRBX0lORk87XG52YXIgSFRUUCA9ICdodHRwJztcbnZhciBfcHVic3ViID0gJ19wdWJzdWInO1xuXG52YXIgZGVmYXVsdENvZGUgPSAnb3RoZXInO1xudmFyIENMSyA9ICcyMTAxJztcbnZhciBFWFAgPSAnMjIwMSc7XG52YXIgSU1QRVhQID0gJzIyMDInO1xudmFyIE9USEVSID0gJzE5OTk5JztcbnZhciBBUFBfU0hPVyA9ICcxMDIzJztcbnZhciBBUFBfSElERV9PUl9VTkxPQUQgPSAnMTAxMCc7IFxudmFyIFNFU1NJT05fSU5URVJWQUwgPSAzMDAwMDsgLy8gc2Vzc2lvbklk6L+H5pyf5pe26Ze0IDMw56eSXG52YXIgU0hBUkVfQ0FDSEVfSU5URVJWQUwgPSAxMDAwICogNjAgKiAzMDtcbnZhciBFS1ZTID0gJ2VrdnMnO1xudmFyIEVWRU5UX01BWF9DT1VOVCA9IDEwMDAwOyAvLyDmnKzlnLDmnIDlpJrlrZjlgqjov5nkuYjlpJpla3bmlbDmja5cbnZhciBNRU1PUllfTUFYX0NPVU5UID0gMTsgLy8g5YaF5a2Y5Lit5a2Y5YKo55qE5pyA5aSn5pWw5o2u5pWw6YeP77yM6LaF6L+H5YiZ57yT5a2Y5Yiw5pys5ZywXG52YXIgRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMID0gMzAwMDsgLy8gZWt26buY6K6k5Y+R6YCB6Ze06ZqU5pe26Ze0OiAz56eSXG52YXIgUEFHRV9TVEFSVCA9ICckJF9wYWdlX3N0YXJ0JztcbnZhciBQQUdFX0VORCA9ICckJF9wYWdlX2VuZCc7XG52YXIgQVBQX1NUQVJUID0gJyQkX2FwcF9zdGFydCc7XG52YXIgQVBQX0VORCA9ICckJF9hcHBfZW5kJztcbnZhciBVU0VSX1BST0ZJTEVfS0VZID0gJ2FwbHVzX3VzZXJfcHJvZmlsZSc7XG52YXIgSU1QUklOVCA9ICdpbXByaW50JztcbnZhciBJRF9UWVBFID0gJ2FwbHVzLWlkdHlwZSc7XG52YXIgSlNCUklER0VfT05MWSA9ICdhcGx1cy1qc2JyaWRnZS1vbmx5JztcbnZhciBQQUdFX0NPTkZJRyA9ICdhcGx1cy1wYWdlLWNvbmZpZyc7IFxudmFyIEFQTFVTX1NLSVBfQVBWX1JVTEVTID0gJ2FwbHVzLXNraXAtYXB2LXJ1bGVzJztcbnZhciBBUExVU19QVl9ET01BSU4gPSAnYXBsdXMtcmhvc3Qtdic7XG52YXIgQVBMVVNfRUtWX0RPTUFJTiA9ICdhcGx1cy1yaG9zdC1nJztcbm1vZHVsZS5leHBvcnRzID0ge1xuICBQQUdFX0VOVEVSOiAnUEFHRV9FTlRFUicsXG4gIENVUlJFTlRfUEFHRV9DT05GSUc6ICdDVVJSRU5UX1BBR0VfQ09ORklHJyxcbiAgX0FOT05ZX0lEOiAnX2Fub255X2lkJyxcbiAgX1VTRVJfSUQ6ICdfdXNlcl9pZCcsXG4gIERFRkFVTFRfQ09ERTogZGVmYXVsdENvZGUsXG4gIE9USEVSOiBPVEhFUixcbiAgRVZFTlRfTUFQOiB7XG4gICAgJzIxMDEnOiAnY2xpY2snLFxuICAgICcyMjAxJzogJ2V4cG9zdXJlJyxcbiAgICAnMjIwMic6ICdleHBvc3VyZScsXG4gICAgJzE5OTk5JzogZGVmYXVsdENvZGUsXG4gICAgJzEwMjMnOiAnYXBwX3Nob3cnLFxuICAgICcxMDEwJzogJ2FwcF9oaWRlX29yX3VubG9hZCdcbiAgfSxcbiAgRVZFTlRfSURfTUFQOiB7XG4gICAgJ0VYUCc6IEVYUCxcbiAgICAnSU1QRVhQJzogSU1QRVhQLFxuICAgICdDTEsnOiBDTEssXG4gICAgJ09USEVSJzogT1RIRVIsXG4gICAgJ1NIT1cnOiBBUFBfU0hPVyxcbiAgICAnSF9PUl9VJzogQVBQX0hJREVfT1JfVU5MT0FEXG4gIH0sXG4gIEFQTFVTOiBBUExVUyxcbiAgR09MRExPRzogR09MRExPRyxcbiAgVU5TVUJTQ1JJQkU6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy51bnN1YnNjcmliZScsXG4gIFNVQlNDUklCRTogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnN1YnNjcmliZScsXG4gIFBVQkxJU0g6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5wdWJsaXNoJyxcbiAgQ0FDSEVfUFVCUzogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLmNhY2hlUHVicycsXG4gIEFQTFVTX1VOSVZFUlNBTDogQVBMVVMgKyAnX3VuaXZlcnNhbCcsXG4gIEFQTFVTX1FVRVVFOiBBUExVU19RVUVVRSxcbiAgR09MRExPR19RVUVVRTogR09MRExPR19RVUVVRSxcbiAgQ09NUExFVEU6ICdjb21wbGV0ZScsXG4gIFBWX0NPREU6ICcyMDAxJyxcbiAgRVhQX0NPREU6IEVYUCxcbiAgQ0xLX0NPREU6IENMSyxcbiAgT1RIRVJfQ09ERTogT1RIRVIsXG4gIENMSzogJ0NMSycsXG4gIEVYUDogJ0VYUCcsXG4gIC8vIE9USEVSOiAnT1RIRVInLFxuICBTUE1fQ05UOiAnc3BtLWNudCcsXG4gIFNQTV9VUkw6ICdzcG0tdXJsJyxcbiAgU1BNX1BSRTogJ3NwbS1wcmUnLFxuICBNV19DSEFOR0VfUFY6IE1XX0NIQU5HRSArICdfcHYnLFxuICBNV19DSEFOR0VfSEpMSjogTVdfQ0hBTkdFICsgJ19oamxqJyxcbiAgSFRUUDogSFRUUCArICc6JyxcbiAgSFRUUFM6ICdodHRwczonLFxuICBBUFBFTkRfTUVUQV9JTkZPOiBBUFBFTkRfTUVUQV9JTkZPLFxuICBTRVRfTUVUQV9JTkZPOiBTRVRfTUVUQV9JTkZPLFxuICBBUExVU19BUFBFTkRfTUVUQV9JTkZPOiBBUExVUyArICcuJyArIEFQUEVORF9NRVRBX0lORk8sXG4gIEFQTFVTX1NFVF9NRVRBX0lORk86IEFQTFVTICsgJy4nICsgU0VUX01FVEFfSU5GTyxcbiAgUFZJRDoncHZpZCcsXG4gIEFQTFVTX0xPR19QSVBFOidhcGx1cy1sb2ctcGlwZScsXG4gIG9wZW5BUElzOiBbXG4gICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsICdjb21iaW5lUmVjb3JkJywgJ3JlY29yZFVkYXRhJywgJ3JlcXVlc3RWVENvbmZpZycsXG4gICAgJ3NldFBhZ2VTUE0nLCAnc2V0TWV0YUluZm8nLCAnYXBwZW5kTWV0YUluZm8nLFxuICAgICd1cGRhdGVQYWdlUHJvcGVydGllcycsXG4gICAgJ3VwZGF0ZU5leHRQYWdlUHJvcGVydGllcycsXG4gICAgJ3VwZGF0ZVBhZ2VVdHBhcmFtJyxcbiAgICAndXBkYXRlTmV4dFBhZ2VVdHBhcmFtJyxcbiAgICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJywgJ3NraXBQYWdlJyxcbiAgICAndXBkYXRlU2Vzc2lvblByb3BlcnRpZXMnLCAnZ2V0UGFnZVNwbVVybCcsICdnZXRQYWdlU3BtUHJlJyxcbiAgICAnc2V0UGFnZU5hbWUnLCAnZ2V0RWxlbWVudFNQTScsICdyZWNvcmRBcHBMaW5rJ1xuICBdLFxuICBTRVNTSU9OX0lOVEVSVkFMOiBTRVNTSU9OX0lOVEVSVkFMLFxuICBTRVNTSU9OX1BBVVNFX1RJTUU6ICdzZXNzaW9uX3BhdXNlX3RpbWUnLFxuICBJTVBSSU5UOiAnaW1wcmludCcsXG4gIENVUlJFTlRfU0VTU0lPTjogJ2N1cnJlbnRfc2Vzc2lvbicsXG4gIE1BWF9FVkVOVElEX0xFTkdUSDogMTI4LFxuICBNQVhfUFJPUEVSVFlfS0VZX0xFTkdUSDogMjU2LFxuICBNQVhfUFJPUEVSVFlfS0VZU19DT1VOVDogMTAwLFxuICBSRVFVRVNUUzogJ3JlcXVlc3RzJyxcbiAgU0hBUkVTOiAnc2hhcmVzJyxcbiAgQVBMVVNfU1NSQzogJ19hcGx1c19zc3JjJyxcbiAgRUtWUzogRUtWUyxcbiAgRVZFTlRfTUFYX0NPVU5UOiBFVkVOVF9NQVhfQ09VTlQsXG4gIE1FTU9SWV9NQVhfQ09VTlQ6IE1FTU9SWV9NQVhfQ09VTlQsXG4gIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTDogRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMLFxuICBQQUdFX1NUQVJUOiBQQUdFX1NUQVJULFxuICBQQUdFX0VORDogUEFHRV9FTkQsXG4gIEFQUF9TVEFSVDogQVBQX1NUQVJULFxuICBBUFBfRU5EOiBBUFBfRU5ELFxuICBVU0VSX1BST0ZJTEVfS0VZOiBVU0VSX1BST0ZJTEVfS0VZLFxuICBTSEFSRV9DQUNIRV9JTlRFUlZBTDogU0hBUkVfQ0FDSEVfSU5URVJWQUwsXG4gIElNUFJJTlQ6IElNUFJJTlQsXG4gIElEX1RZUEU6IElEX1RZUEUsXG4gIEdMT0JBTF9QUk9QRVJUWTogJ2dsb2JhbHByb3BlcnR5JyxcbiAgLy8gVVRNX0tFWVM6IFsndXRtX3NvdXJjZScsICd1dG1fY29udGVudCcsICd1dG1fbWVkaXVtJywgJ3V0bV9jYW1wYWlnbicsICd1dG1fdGVybSddLFxuICBKU0JSSURHRV9PTkxZOiBKU0JSSURHRV9PTkxZLFxuICBQQUdFX0NPTkZJRzogUEFHRV9DT05GSUcsXG4gIEFQTFVTX1NLSVBfQVBWX1JVTEVTOiBBUExVU19TS0lQX0FQVl9SVUxFUyxcbiAgQVBMVVNfUFZfRE9NQUlOOiBBUExVU19QVl9ET01BSU4sXG4gIEFQTFVTX0VLVl9ET01BSU46IEFQTFVTX0VLVl9ET01BSU5cbn07XG5cbi8vIHZhciBvcGVuQVBJcyA9IFtcbi8vICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsXG4vLyAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcbi8vICAgVVBEQVRFICsgJ1BhZ2VQcm9wZXJ0aWVzJyxcbi8vICAgVVBEQVRFICsgJ05leHRQYWdlUHJvcGVydGllcycsXG4vLyAgIFVQREFURSArICdQYWdlVXRwYXJhbScsXG4vLyAgIFVQREFURSArICdOZXh0UGFnZVV0cGFyYW0nLFxuLy8gICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJyxcbi8vICAgJ3NraXBQYWdlJ1xuLy8gXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9hcGx1c1N0YXRpYy5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgXCJtZXRhSW5mb1wiOiB7XG4gICAgXCJhcGx1cy1yaG9zdC12XCI6IFwiXCIsXG4gICAgXCJhcGx1cy1yaG9zdC1nXCI6IFwiXCIsXG4gICAgXCJhcGx1cy1tbXN0YXQtdGltZW91dFwiOiBcIjEwMDAwXCIsXG4gICAgXCJzZGtJZFwiOiBcImFwbHVzX21pbmlfY2xvdWRfdW1cIlxuICB9LFxuICBcImdsb2JhbENvbmZpZ1wiOiB7XG4gICAgXCJpc0FsaVwiOiBmYWxzZSxcbiAgICBcImlzRGVjb2RlVXJsXCI6IHRydWUsXG4gICAgXCJBUExVU19RVUVVRVwiOiBcImFwbHVzX3F1ZXVlXCIsXG4gICAgXCJFVEFHX1NUT1JBR0VfS0VZXCI6IFwiX19FVEFHX19DTkFfX0lEX19cIixcbiAgICBcInNjcmlwdF9uYW1lXCI6IFwiYXBsdXNfbWluaS5qc1wiLFxuICAgIFwiYXBsdXMtZ2xvYmFsZGF0YVwiOiB7fSxcbiAgICBcImx2ZXJcIjogXCIxLjguMVwiXG4gIH0sXG4gIFwicGx1Z2luc1wiOiBbXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiaW5qZWN0X2FwcF91bVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL2luamVjdF9hcHBfdW0uanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiaW5qZWN0X3BhZ2VfdW1cIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfbWluaS9pbmplY3RfcGFnZV91bS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJvcGVuX2FwaVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL29wZW5fYXBpLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2NsaWVudFwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19jbGllbnRfbWluaS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJwdWJzdWJcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX21lc3NhZ2VyL3B1YnN1Yl9taW5pLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX21ldGFfaW5qZWN0XCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2FwbHVzX21ldGFfaW5qZWN0X21pbmkuanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYWNcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfY2xrLmpzJyksXG4gICAgICBcImRlcHNcIjogW1xuICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FlXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX2V4cC5qcycpLFxuICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgXCJpbmplY3RfcGFnZV91bVwiXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19taW5pX3NwbVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL21pbmlfc3BtLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX21pbmlfcmVwb3J0X3VtXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2FwbHVzX21pbmlfcmVwb3J0X3VtLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2xvZ19pbmplY3RcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfbG9nX2luamVjdC5qcycpLFxuICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgXCJhcGx1c19tZXRhX2luamVjdFwiXG4gICAgICBdLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcInBsdWdpbnNcIjoge1xuICAgICAgICAgIFwicHZcIjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9ldGFnX21pbmkuanMnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hlbl90b19zZW5kcHZcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hlbl90b19zZW5kcHYuanMnKSxcbiAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICAgICAgICAgIFwiYXBsdXNXYWl0aW5nXCI6IFwiXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hlcmVfdG9fc2VuZFwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hlcmVfdG9fc2VuZF9taW5pX3VtLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZFwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hhdF90b19zZW5kX21pbmlfY2xvdWQuanMnKSxcbiAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICAgICAgICAgIFwibG9nZGF0YVRvVXRcIjoge31cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWluaWFwcF9kYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9taW5pYXBwX2RhdGEuanMnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kcHZfdXNlcmRhdGFcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGFfbWluaS5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW1xuICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiY2FuX3RvX3NlbmRwdlwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9jYW5fdG9fc2VuZHB2X21pbmkuanMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgXCJoamxqXCI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ19taW5pLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfbWluaV91bS5qcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF9taW5pX2Nsb3VkLmpzJyksXG4gICAgICAgICAgICAgIFwiZGVwc1wiOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWluaWFwcF9kYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9taW5pYXBwX2RhdGEuanMnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19oamxqX3VzZXJkYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX21pbmkuanMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYXBpXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2FwbHVzX2FwaV9taW5pLmpzJyksXG4gICAgICBcImRlcHNcIjogW1xuICAgICAgICBcImFwbHVzX2xvZ19pbmplY3RcIixcbiAgICAgICAgXCJhcGx1c19tZXRhX2luamVjdFwiXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJtZXRhX3F1ZXVlXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9xdWV1ZS9tZXRhX3F1ZXVlLmpzJyksXG4gICAgICBcImNvbmZpZ1wiOiB7XG4gICAgICAgIFwiaXNPcGVuQXBpXCI6IHRydWVcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImV0YWdcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9ldGFnX21pbmkuanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfcXVldWVcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX3F1ZXVlL2FwbHVzX3F1ZXVlLmpzJyksXG4gICAgICBcImNvbmZpZ1wiOiB7XG4gICAgICAgIFwiaXNPcGVuQXBpXCI6IHRydWVcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImF1dG9fdHJhY2tlcl91bVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl91bS5qcycpLFxuICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgXCJpbmplY3RfcGFnZV91bVwiXG4gICAgICBdXG4gICAgfVxuICBdXG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2FwbHVzX21pbmlfY2xvdWRfdW1fY29uZmlnLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2luc19taW5pL2luamVjdF9hcHBfdW1fbmV3LmpzXG4gKiDmlrDniYjoh6rliqjph4fpm4blsI/nqIvluo/kv6Hmga/nmoTmj5Lku7YgLSBhcHDms6jlhaVcbiAqXG4gKiDpgJrov4fph43lhpl3eOeahGFwaeadpeaooeaLn+eUn+WRveWRqOacn++8jOS7peatpOe7lei/h+S4ieaWueahhuaetuWvueeUn+WRveWRqOacn+eahOmHjeWGmeacuuWItlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiChuWPgSA8c2lzYW4ucWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMvdXRpbHMnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBzZXNzaW9uTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vdW1fc2Vzc2lvbl9tYW5hZ2VyJyk7XG52YXIgZXZlbnRNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9ldmVudE1hbmFnZXInKTtcbnZhciByZXF1ZXN0UXVldWUgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3JlcXVlc3RRdWV1ZScpO1xudmFyIGNhY2hlID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9jYWNoZScpO1xudmFyIHVtVXRpbHMgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3V0aWxzJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcblxudmFyIEFQUF9MQVVOQ0hfVFlQRSA9IDA7XG5cbmZ1bmN0aW9uIGdldEdsb2JhbEFyZ3MocXVlcnksIHNjZW5lKSB7XG4gIHZhciBnbG9iYWxfYXJncyA9IHt9O1xuICBpZiAoc2NlbmUpIHtcbiAgICBnbG9iYWxfYXJncy5zY2VuZSA9IHNjZW5lO1xuICB9XG4gIGlmIChxdWVyeSAmJiBxdWVyeS5taW5pYXBwRGVidWdJZCkge1xuICAgIGdsb2JhbF9hcmdzLmRlYnVnSWQgPSBxdWVyeS5taW5pYXBwRGVidWdJZDtcbiAgfVxuICBmb3IgKHZhciBrIGluIHF1ZXJ5KSB7XG4gICAgaWYgKGsgPT09ICckJF9zaGFyZV91aWQnIHx8IGsuaW5kZXhPZignJCRfdXRtXycpID09PSAwKSB7XG4gICAgICBnbG9iYWxfYXJnc1trXSA9IHF1ZXJ5W2tdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ2xvYmFsX2FyZ3M7XG59XG5cbmZ1bmN0aW9uIHNlc3Npb25TdGFydChvcHRpb25zKSB7XG4gIGNhY2hlKCkubG9hZChmdW5jdGlvbigpe1xuICAgIHVsb2coKS53KCdjYWNoZSBpbml0IHN1Y2Nlc3MnKTtcbiAgfSk7XG5cbiAgdmFyIG5ld09wdGlvbnMgPSB7fTtcbiAgdmFyIGRlZXBDbG9uZSA9IGNsb25lRGVlcChvcHRpb25zKTtcbiAgZm9yICh2YXIgaSBpbiBkZWVwQ2xvbmUpIHtcbiAgICBpZiAodHlwZW9mIGRlZXBDbG9uZVtpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG5ld09wdGlvbnMgPSB1dGlsRGFzaC5hc3NpZ24oZGVlcENsb25lW2ldLCBuZXdPcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRlZXBDbG9uZVtpXSkge1xuICAgICAgICBuZXdPcHRpb25zW2ldID0gZGVlcENsb25lW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXF1ZXN0UXVldWUoKS5sb2FkKCk7XG4gIHZhciBpc05ld1Nlc3Npb24gPSBzZXNzaW9uTWFuYWdlcigpLnJlc3VtZShuZXdPcHRpb25zKTtcbiAgdmFyIHNlc3Npb25JZCA9IHNlc3Npb25NYW5hZ2VyKCkuZ2V0Q3VycmVudFNlc3Npb25JZCgpO1xuICBldmVudE1hbmFnZXIoKS5zZXRTZXNzaW9uSWQoc2Vzc2lvbklkKTtcbiAgaWYgKGlzTmV3U2Vzc2lvbikge1xuICAgIHJlcXVlc3RRdWV1ZSgpLmFkZCh1bVV0aWxzLkRhdGFUeXBlLkhBTEZfU0VTU0lPTiwge30sIGZ1bmN0aW9uKCkge1xuICAgICAgdWxvZygpLncoJ2JlZm9yZSBzZW5kIHNlc3Npb24nKTtcbiAgICAgIHJlcXVlc3RRdWV1ZSgpLnNlbmQoKTtcbiAgICB9KTtcbiAgfVxufTtcblxuZnVuY3Rpb24gc2Vzc2lvbkVuZCgpIHtcbiAgc2Vzc2lvbk1hbmFnZXIoKS5wYXVzZSgpO1xuICByZXF1ZXN0UXVldWUoKS5zZW5kKHVtVXRpbHMuRGF0YVR5cGUuQ0xPU0VfU0VTU0lPTiwge30sIGZ1bmN0aW9uKCl7XG4gICAgcmVxdWVzdFF1ZXVlKCkuc2F2ZSgpO1xuICAgIGNhY2hlKCkuc2F2ZSgpO1xuICAgIHVsb2coKS53KFwiYWZ0ZXIgc2VuZCBzZXNzaW9uXCIpO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGluamVjdEFwcCgpIHtcblxuICB2YXIgYXBwQmFrID0gQXBwO1xuICB2YXIgYWxyZWFkeVN0YXJ0ZWQgPSBmYWxzZTtcbiAgdmFyIGxhbnVjaGVkID0gZmFsc2U7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciBjb250ZXh0ID0gbWluaS5nZXRDb250ZXh0KCk7ICAgLy8g5bmz5Y+w5LiK5LiL5paH77yaIHd444CBZGTjgIFteeOAgXR044CBc3dhblxuICB2YXIgZm4gPSB7XG4gICAgb25MYXVuY2g6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBtaW5pLmluaXRJc1RCKCk7XG4gICAgICB2YXIgcXVlcnkgPSBvcHRpb25zID8gb3B0aW9ucy5xdWVyeSA6IHt9O1xuICAgICAgdmFyIHJlZmVycmVySW5mbyA9IG9wdGlvbnMgPyBvcHRpb25zLnJlZmVycmVySW5mbyA6IHt9O1xuICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS9iYXNlL2FwcC9saWZlLWN5Y2xlL3d4LmdldExhdW5jaE9wdGlvbnNTeW5jLmh0bWwjJUU4JUJGJTk0JUU1JTlCJTlFJUU2JTlDJTg5JUU2JTk1JTg4JTIwcmVmZXJyZXJJbmZvJTIwJUU3JTlBJTg0JUU1JTlDJUJBJUU2JTk5JUFGXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbXMge09iamVjdH0gcmVmZXJyZXJJbmZvIHtcbiAgICAgICAqICAgYXBwSWQgIHN0cmluZyAg5p2l5rqQ5bCP56iL5bqP44CB5YWs5LyX5Y+35oiWIEFwcCDnmoQgYXBwSWRcbiAgICAgICAqICAgZXh0cmFEYXRhICBPYmplY3QgIOadpea6kOWwj+eoi+W6j+S8oOi/h+adpeeahOaVsOaNru+8jHNjZW5lPTEwMzfmiJYxMDM45pe25pSv5oyBXG4gICAgICAgKiB9XG4gICAgICAgKi9cblxuICAgICAgQVBQX0xBVU5DSF9UWVBFICs9IDE7XG5cbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtc2Vzc2lvbi1hcmdzJywgdXRpbERhc2guYXNzaWduKHJlZmVycmVySW5mbywge1xuICAgICAgICAgIHNjZW5lOiBvcHRpb25zLnNjZW5lIHx8ICcnXG4gICAgICAgIH0pXVxuICAgICAgfSk7XG4gICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgdmFyIHF1ZXJ5RGF0YSA9IHt9OyAvLyBjbG9uZURlZXAocXVlcnkpO1xuICAgICAgICBpZiAocXVlcnkuc3BtKSB7XG4gICAgICAgICAgY3R4LmFwbHVzLnNwbV9vcmlnbiA9IHF1ZXJ5LnNwbTtcbiAgICAgICAgICAvLyBkZWxldGUgcXVlcnlEYXRhLnNwbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zY2VuZSkge1xuICAgICAgICAgIHF1ZXJ5RGF0YS5zY2VuZSA9IG9wdGlvbnMuc2NlbmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkKSB7XG4gICAgICAgICAgdmFyIGRlYnVnSWQgPSBxdWVyeS5taW5pYXBwRGVidWdJZC50cmltKCk7XG4gICAgICAgICAgdmFyIGRlYnVnSW5mb3MgPSBkZWJ1Z0lkLnNwbGl0KCdfJyk7XG4gICAgICAgICAgcXVlcnlEYXRhID0gdXRpbERhc2guYXNzaWduKHF1ZXJ5RGF0YSwge1xuICAgICAgICAgICAgYXBsdXNfd29ya19ubzogZGVidWdJbmZvcy5sZW5ndGggPiAyID8gZGVidWdJbmZvc1sxXSA6IGRlYnVnSWQsXG4gICAgICAgICAgICBhcGx1c190cmFja19kZWJ1Z19pZDogZGVidWdJZCxcbiAgICAgICAgICAgIGFwbHVzX2ZsYWc6ICdhcGx1c190ZXN0J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIGRlbGV0ZSBxdWVyeURhdGEubWluaWFwcERlYnVnSWQ7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZXhkYXRhJywgcXVlcnlEYXRhXVxuICAgICAgICB9KTtcbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtY3B2ZGF0YScsIHF1ZXJ5RGF0YV1cbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWdsb2JhbC1hcmdzJywgZ2V0R2xvYmFsQXJncyhxdWVyeSwgb3B0aW9ucy5zY2VuZSldXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgb25TaG93OiBmdW5jdGlvbiAob3B0cykge1xuXG4gICAgICBBUFBfTEFVTkNIX1RZUEUgKz0gMTtcbiAgICAgIHZhciBxdWVyeSA9IG9wdHMgPyBvcHRzLnF1ZXJ5IDoge307XG4gICAgICB2YXIgc2NlbmUgPSBvcHRzID8gb3B0cy5zY2VuZSA6ICcnO1xuICAgICAgdmFyIHN0YXJ0X3R5cGU7IC8v5bCP56iL5bqP5ZCv5Yqo57G75Z6LIFxuICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsICAvLyDmraTlpITpnIDopoHnlKhzZXRNZXRhSW5mb+WBmuimhuebluW8j+abtOaWsO+8jOWboOS4uuW+ruS/oeWwj+eoi+W6j+S8muaciee8k+WtmFxuICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZ2xvYmFsLWFyZ3MnLCBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBzY2VuZSldXG4gICAgICB9KTtcbiAgICAgIGlmIChzY2VuZSkge1xuICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1leGRhdGEnLCB7XG4gICAgICAgICAgICBzY2VuZTogc2NlbmVcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtY3B2ZGF0YScsIHtcbiAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1zZXNzaW9uLWFyZ3MnLCB7XG4gICAgICAgICAgICBzY2VuZTogc2NlbmVcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChBUFBfTEFVTkNIX1RZUEUgPT09IDIpIHtcbiAgICAgICAgc3RhcnRfdHlwZSA9IDE7XG4gICAgICB9IGVsc2UgaWYgKEFQUF9MQVVOQ0hfVFlQRSA9PT0gMSkge1xuICAgICAgICBzdGFydF90eXBlID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVsb2coKS53KCdBUFBfTEFVTkNIX1RZUEUgc2hvdWxkIG5vdCByZWFjaCB0aGlzLCB2YWx1ZSA9ICcgKyAgQVBQX0xBVU5DSF9UWVBFKTtcbiAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAvLyAgIG1zZzogJ0FQUF9MQVVOQ0hfVFlQRSBzaG91bGQgbm90IHJlYWNoIHRoaXMsIHZhbHVlID0gJyArICBBUFBfTEFVTkNIX1RZUEVcbiAgICAgICAgLy8gfSk7XG4gICAgICB9XG4gICAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFhbHJlYWR5U3RhcnRlZCkge1xuICAgICAgICAgIGFscmVhZHlTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICBzZXNzaW9uU3RhcnQob3B0cyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZ2xvYmFsQ29uZmlnID0gY3R4LmFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcbiAgICAgICAgaWYgKCFnbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgICB2YXIgcGFnZUNvZGUgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuICAgICAgICAgIGN0eC5vbkFwcFNob3dUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQUF9TVEFSVCwgJ1NIT1cnLCB7XG4gICAgICAgICAgICAgIC8vIHNjZW5lOiBzY2VuZSxcbiAgICAgICAgICAgICAgc3RhcnRfdHlwZTogc3RhcnRfdHlwZSxcbiAgICAgICAgICAgICAgcGFnZV9uYW1lOiBwYWdlQ29kZSB8fCBvcHRzLnBhdGggfHwgJy0nLFxuICAgICAgICAgICAgICB1cmw6IG9wdHMucGF0aCB8fCAnLSdcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgb25IaWRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGN0eC5hcGx1cy5nbG9iYWxDb25maWcgfHwge307XG4gICAgICAgIHZhciBwYWdlQ29kZSA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG4gICAgICAgIGlmICghZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4gICAgICAgICAgdmFyIHVybCA9IFBhZ2VNYW5hZ2VyLmdldEN1cnJlbnRQYWdlUGF0aCgpO1xuICAgICAgICAgIHZhciBkdXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gY3R4Lm9uQXBwU2hvd1RpbWU7XG4gICAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQUF9FTkQsICdIX09SX1UnLCB7XG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgZW5kX3R5cGU6IDAsXG4gICAgICAgICAgICAgIHBhZ2VfbmFtZTogcGFnZUNvZGUgfHwgdXJsIHx8ICctJyxcbiAgICAgICAgICAgICAgdXJsOiB1cmwgfHwgJy0nLFxuICAgICAgICAgICAgICBzdGFydF90aW1lOiBjdHgub25BcHBTaG93VGltZVxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KTsgICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBhbHJlYWR5U3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICBzZXNzaW9uRW5kKCk7XG4gICAgICB9KTtcbiAgICAgIEFQUF9MQVVOQ0hfVFlQRSA9IDA7XG4gICAgfVxuICB9O1xuXG4gIEFwcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgICBlLmFwbHVzID0gY3R4LCAvLyDms6jlhozlhajlsYDlj5jph49cbiAgICBhcHBCYWsoZSk7XG4gIH07XG5cbiAgY29udGV4dC5vbkFwcFNob3coZnVuY3Rpb24gKGUpIHtcbiAgICAvLyDpgJrov4d3eC5nZXRMYXVuY2hPcHRpb25zU3luY+aWueazle+8jOWunueOsOWvuW9uTGFudWNo55qE55uR5ZCsXG4gICAgaWYoIWxhbnVjaGVkKSB7XG4gICAgICAvLyDnmb7luqbkuI3mlK/mjIFnZXRMYXVuY2hPcHRpb25zU3luY++8jOeUqG9uU2hvd+eahG9wdGlvbnPku6Pmm79cbiAgICAgIHZhciBvcHRzID0ge307XG4gICAgICBpZihpc0Z1bmN0aW9uKGNvbnRleHQuZ2V0TGF1bmNoT3B0aW9uc1N5bmMpKSB7XG4gICAgICAgIG9wdHMgPSBjb250ZXh0LmdldExhdW5jaE9wdGlvbnNTeW5jKCkgfHwge307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRzID0gZTtcbiAgICAgIH1cbiAgICAgIGZuLm9uTGF1bmNoKG9wdHMpO1xuICAgICAgbGFudWNoZWQgPSB0cnVlO1xuICAgIH07XG4gICAgLy8gb25TaG93XG4gICAgZm4ub25TaG93KGUpO1xuICB9KSxcblxuICBjb250ZXh0Lm9uQXBwSGlkZShmdW5jdGlvbiAoKSB7XG4gICAgLy8gb25IaWRlXG4gICAgZm4ub25IaWRlKCk7XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoWydvYmplY3QnLCAnZnVuY3Rpb24nXS5pbmRleE9mKHR5cGVvZiBBcHApID4gLTEpIHtcbiAgICAgICAgaW5qZWN0QXBwKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvaW5qZWN0X2FwcF91bS5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmVzZXRGbjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogJycsXG4gICAgICBuID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMl0gPyBhcmd1bWVudHNbMl0gOiBmdW5jdGlvbiAoKSB7IH0sXG4gICAgICBpID0gZVt0XTtcbiAgICBlW3RdID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJzID0gaSAmJiBpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIGFwcOacrOi6q+eahGZ1bmN0aW9uXG4gICAgICBpZiAocnMpIHtcbiAgICAgICAgcmV0dXJuIG4uY2FsbCh0aGlzLCBycyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB0YXJvMXjjgIF0YXJvMngg5b+F6aG75Yqg5Liq6aKd5aSW55qE6K+t5Y+lbi5hcHBseeaJjeiDveaJp+ihjO+8jOavlOWmgnRyeWNhdGNo77yM5Y+Y6YeP5aOw5piO562J77yM5q2k5aSE5Yqg5LqGcmV0dXJuXG4gICAgICAgIHJldHVybiBuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcblxuICByZXdyaXRlRm46IGZ1bmN0aW9uKG9iaiwgbmFtZSwgbmV3Rm4pIHtcbiAgICB2YXIgb2xkRm4gPSBvYmpbbmFtZV07XG4gICAgb2JqW25hbWVdID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIG5ld0ZuLmNhbGwodGhpcywgZSk7XG4gICAgICBvbGRGbiAmJiBvbGRGbi5jYWxsKHRoaXMsIGUpO1xuICAgIH07XG4gIH0sXG5cbiAgb25BcGx1c1JlYWR5OiBmdW5jdGlvbiAoYXBsdXNfcXVldWUsIFNVQlNDUklCRSwgY2FsbGJhY2spIHtcbiAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgIGFjdGlvbjogU1VCU0NSSUJFLFxuICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfV1cbiAgICB9KTtcbiAgfSxcbiAgZ2V0SW5kZXhCeVJlY3Q6IGZ1bmN0aW9uKHNlbGVjdG9yLCB0YXJnZXRSZWN0LCBjYWxsYmFjayl7XG4gICAgdmFyIHRhcmdldEluZGV4ID0gLTE7XG4gICAgbWluaS5nZXRDb250ZXh0KCkuY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbChzZWxlY3RvcikuYm91bmRpbmdDbGllbnRSZWN0KCkuZXhlYyhmdW5jdGlvbihyZWN0KXtcbiAgICAgIGVhY2gocmVjdFswXSxmdW5jdGlvbihpdGVtLGluZGV4KXtcbiAgICAgICAgaWYoaXRlbS53aWR0aCA9PT0gdGFyZ2V0UmVjdC53aWR0aCAmJiBpdGVtLmhlaWdodCA9PT0gdGFyZ2V0UmVjdC5oZWlnaHQgJiYgaXRlbS5sZWZ0ID09PSB0YXJnZXRSZWN0LmxlZnQgJiYgaXRlbS50b3AgPT09IHRhcmdldFJlY3QudG9wICYmIGl0ZW0ucmlnaHQgPT09IHRhcmdldFJlY3QucmlnaHQgJiYgaXRlbS5ib3R0b20gPT09IHRhcmdldFJlY3QuYm90dG9tKXtcbiAgICAgICAgICB0YXJnZXRJbmRleCA9IGluZGV4O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNhbGxiYWNrKHRhcmdldEluZGV4KTtcbiAgICB9KTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS91dGlscy91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcbnZhciBpc1BsYWluT2JqZWN0ID0gcmVxdWlyZSgnLi9pc1BsYWluT2JqZWN0Jyk7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnIsIGZuKSB7XG4gIGlmKGlzUGxhaW5PYmplY3QoYXJyKSAmJiBhcnIubGVuZ3RoID09PSB2b2lkIDApe1xuICAgIGZvcih2YXIgYXR0ciBpbiBhcnIpe1xuICAgICAgaWYoYXJyLmhhc093blByb3BlcnR5KGF0dHIpKXtcbiAgICAgICAgZm4oYXR0cixhcnJbYXR0cl0sYXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1lbHNlIHtcbiAgICB2YXIgaTtcbiAgICB2YXIgbCA9IGFyci5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHJzID0gZm4oYXJyW2ldLCBpKTtcbiAgICAgIGlmIChycyA9PT0gJ2JyZWFrJykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZWFjaC5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iail7XG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgcHJvdG8gPSBvYmo7XG4gIHdoaWxlIChPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pICE9PSBudWxsKSB7XG4gICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopID09PSBwcm90bztcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvaXNQbGFpbk9iamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5bCP56iL5bqP5bel5YW3XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JzsgXG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuLy8gdmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljLmpzJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG5cbmV4cG9ydHMuZ2V0Q3VycmVudFBhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuICByZXR1cm4gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0gfHwge307XG59O1xuXG5leHBvcnRzLmdldFJlZmVycmVyUGFnZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcbiAgcmV0dXJuIHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDJdIHx8IHt9O1xufTtcblxudmFyIF9pc1RiO1xuLy8g5Y2V6aG15rWL6K+V6ZyA6KaBXG5leHBvcnRzLnJlc2V0SXNUQiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBfaXNUYiA9IHZhbHVlO1xufTtcblxuZnVuY3Rpb24gaW5pdElzVEIgKCkge1xuICBpZiAodHlwZW9mIF9pc1RiID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gX2lzVGI7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICB2YXIgVUEgPSBuYXZpZ2F0b3IgPyAobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3Iuc3d1c2VyQWdlbnQpIDogJyc7XG4gICAgICByZXN1bHQgPSAhIS9BbGlBcHAvaS50ZXN0KFVBKTtcbiAgICAgIGlmICgvQWxpQXBwXFwoQVAvaS50ZXN0KFVBKSB8fCAvQWxpQXBwXFwoRGluZ1RhbGsvaS50ZXN0KFVBKSB8fCAvQWxpQXBwXFwoQU1BUC9pLnRlc3QoVUEpKSB7XG4gICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKC9BbGlBcHBcXChLQi9pLnRlc3QoVUEpKSB7XG4gICAgICAgIHJlc3VsdCA9ICEhL01pc3QvLnRlc3QoVUEpO1xuICAgICAgfVxuICAgICAgLy9JREUt5reY5a6dLeWVhuWutuW6lOeUqOS4i+acn+acm+i/lOWbnnRydWVcbiAgICAgIGlmKC9BbGlwYXlJREUgVGFvYmFvLy50ZXN0KFVBKSl7XG4gICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICB9XG4gICAgICB2YXIgY3R4ID0gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuICAgICAgaWYgKHR5cGVvZiBjdHguY2FuSVVzZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXN1bHQgPSAhIWN0eC5jYW5JVXNlKCdjYWxsVXNlclRyYWNrJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICBfaXNUYiA9IHJlc3VsdDtcbiAgICByZXR1cm4gcmVzdWx0OyAgXG4gIH1cbn1cbmV4cG9ydHMuaW5pdElzVEIgPSBpbml0SXNUQjtcblxuZnVuY3Rpb24gaXNUQigpIHtcbiAgaWYgKHR5cGVvZiBfaXNUYiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuICEhX2lzVGI7ICBcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaW5pdElzVEIoKTtcbiAgfVxufVxuXG52YXIgZ2V0UGxhdGZvcm1UeXBlID0gZnVuY3Rpb24gKCkge1xuICB0cnkge1xuICAgIHJldHVybiB7XG4gICAgICBjdHg6IGRkLFxuICAgICAgcGxhdFR5cGU6ICdkZCcsXG4gICAgICBzZGtUeXBlOiAnZGRtcCcsXG4gICAgICBsb2dEb21haW46ICcvZGRtX2xvZ3MnXG4gICAgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjdHg6IG15LFxuICAgICAgICBwbGF0VHlwZTogbXkgJiYgbXkudGIgPyAndGFvYmFvJyA6ICdteScsXG4gICAgICAgIHNka1R5cGU6IG15ICYmIG15LnRiID8gJ3Rhb2Jhb21wJyA6ICdteW1wJyxcbiAgICAgICAgbG9nRG9tYWluOiAnL2FsaXBheW1fbG9ncydcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjdHg6IHR0LFxuICAgICAgICAgIHBsYXRUeXBlOiAndHQnLFxuICAgICAgICAgIHNka1R5cGU6ICd0dG1wJyxcbiAgICAgICAgICBsb2dEb21haW46ICcvYnl0ZWRhbmNlbV9sb2dzJ1xuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjdHg6IHN3YW4sXG4gICAgICAgICAgICBwbGF0VHlwZTogJ2JkJyxcbiAgICAgICAgICAgIHNka1R5cGU6ICdiZG1wJyxcbiAgICAgICAgICAgIGxvZ0RvbWFpbjogJy9iYWlkdW1fbG9ncydcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGN0eDogd3gsXG4gICAgICAgICAgICAgIHBsYXRUeXBlOiAnd3gnLFxuICAgICAgICAgICAgICBzZGtUeXBlOiAnd3htcCcsXG4gICAgICAgICAgICAgIGxvZ0RvbWFpbjogJy93eG1fbG9ncydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgY3R4OiB7fSxcbiAgICAgICAgICAgICAgcGxhdFR5cGU6ICdVTktOT1cnLFxuICAgICAgICAgICAgICBzZGtUeXBlOiAnVU5LTk9XJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5leHBvcnRzLmlzVEIgPSBpc1RCO1xuZXhwb3J0cy5nZXRQbGF0Zm9ybVR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5wbGF0VHlwZTtcbn07XG5leHBvcnRzLmdldFNka1R5cGUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5zZGtUeXBlO1xufTtcbmV4cG9ydHMuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcbn07XG5leHBvcnRzLmdldExvZ0RvbWFpbiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkubG9nRG9tYWluO1xufTtcblxuXG52YXIgSFRUUF9SRVFVRVNUID0gJ2h0dHBSZXF1ZXN0JztcbnZhciBSRVFVRVNUID0gJ3JlcXVlc3QnO1xudmFyIEZOID0gZnVuY3Rpb24gKCkge307XG5cbi8qKlxuICog5Y+R6YCBR0VU6K+35rGCXG4gKiBAcGFyYW1zIHtTdHJpbmd9IHVybFxuICogQHBhcmFtcyB7U3RyaW5nfSBvcHRzIHtcbiAqICAgdGltZW91dDogNTAwMFxuICogfVxuICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrIHtcbiAqICAgdGltZW91dDogNTAwMFxuICogfVxuICovXG5leHBvcnRzLnJlcXVlc3QgPSBmdW5jdGlvbiAodXJsLCBvcHRzLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICB2YXIgY3R4ID0gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuICBpZiAoIW9wdHMpIHtcbiAgICBvcHRzID0ge307XG4gIH1cbiAgaWYgKCFpc0Z1bmN0aW9uKGZhaWx1cmVDYWxsYmFjaykpIHtcbiAgICBmYWlsdXJlQ2FsbGJhY2sgPSBGTjtcbiAgfVxuICBpZiAoIWlzRnVuY3Rpb24oc3VjY2Vzc0NhbGxiYWNrKSkge1xuICAgIHN1Y2Nlc3NDYWxsYmFjayA9IEZOO1xuICB9XG4gIHZhciBtZXRob2ROYW1lID0gb3B0cy5yZXF1ZXN0TWV0aG9kTmFtZSB8fCBSRVFVRVNUO1xuICB2YXIgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuXG4gIGlmICghaXNGdW5jdGlvbihyZXEpKSB7XG4gICAgaWYgKG1ldGhvZE5hbWUgIT09IFJFUVVFU1QpIHtcbiAgICAgIG1ldGhvZE5hbWUgPSBSRVFVRVNUO1xuICAgIH0gZWxzZSBpZiAobWV0aG9kTmFtZSAhPT0gSFRUUF9SRVFVRVNUKSB7XG4gICAgICBtZXRob2ROYW1lID0gSFRUUF9SRVFVRVNUO1xuICAgIH1cbiAgICByZXEgPSBjdHhbbWV0aG9kTmFtZV07XG4gIH1cbiAgdmFyIGRhdGFUeXBlID0gb3B0cy5kYXRhVHlwZSB8fCAnanNvbic7XG4gIHZhciB0aW1lb3V0ID0gb3B0cy50aW1lb3V0IHx8IDUwMDA7XG4gIHZhciBtZXRob2QgPSBvcHRzLm1ldGhvZCB8fCAnR0VUJztcblxuICAvLyDlpoLmnpx1cmzmsqHmnInluKbljY/orq7vvIzov5nph4zooaXlhYXlrozmlbRcbiAgdXJsID0gdXRpbC5jYW4yaHR0cHModXJsKTtcbiAgLy8gaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG4gIC8vICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG4gIC8vICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG4gIC8vICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gIC8vICAgfVxuICAvLyAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuICAvLyB9XG4gIHZhciBtc2c7XG4gIGlmIChpc0Z1bmN0aW9uKHJlcSkpIHtcbiAgICB2YXIgcmVxT3B0aW9ucyA9IHtcbiAgICAgIHVybDogdXJsLFxuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICBkYXRhVHlwZTogZGF0YVR5cGUsXG4gICAgICB0aW1lb3V0OiB0aW1lb3V0LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAvLyBjb25zb2xlICYmIGNvbnNvbGUud2FybigncmVxdWVzdCAnICsgdXJsICsgJyBzdWNjZXNzLCB0aGUgbXNnIGlzICcsIHJlcyk7XG4gICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXMpO1xuICAgICAgfSxcbiAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgdWxvZygpLncoJ3JlcXVlc3QgJyArIHVybCArICcgZmFpbHVyZSwgdGhlIG1zZyBpcyAnLCByZXMpO1xuICAgICAgICAvLyBjb25zb2xlICYmIGNvbnNvbGUud2FybigncmVxdWVzdCAnICsgdXJsICsgJyBmYWlsdXJlLCB0aGUgbXNnIGlzICcsIHJlcyk7XG4gICAgICAgIGZhaWx1cmVDYWxsYmFjayhyZXMpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKHR5cGVvZiBvcHRzLmRhdGEgPT09ICdvYmplY3QnICYmIG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICByZXFPcHRpb25zLmRhdGEgPSBvcHRzLmRhdGE7XG4gICAgICByZXFPcHRpb25zLnVybCA9IHJlcU9wdGlvbnMudXJsLnNwbGl0KCc/JylbMF07XG4gICAgfVxuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHZhciBfZXh0SW5mbyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1yZXF1ZXN0LWV4dGluZm8nKTtcbiAgICBpZiAodHlwZW9mIF9leHRJbmZvID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVxT3B0aW9ucy5fZXh0SW5mbyA9IF9leHRJbmZvO1xuICAgIH1cbiAgICByZXEocmVxT3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgdWxvZygpLncoJ2NhbiBub3QgZmluZCBcIicgKyBtZXRob2ROYW1lICsgJ1wiIScpO1xuICAgIC8vIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCdjYW4gbm90IGZpbmQgXCInICsgbWV0aG9kTmFtZSArICdcIiEnKTtcbiAgICBmYWlsdXJlQ2FsbGJhY2sobXNnKTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gJ2Z1bmN0aW9uJztcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvaXNGdW5jdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOagh+WHhuW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCcuL3V0aWxBcnJheScpO1xuLy8gdmFyIGZvcm1hdCA9IHJlcXVpcmUoJy4vZm9ybWF0Jyk7XG5cbnZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5leHBvcnRzLm1rUGxhaW5LZXkgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBzX3BsYWluX29iaiArIE1hdGgucmFuZG9tKCk7XG59O1xuZXhwb3J0cy5zX3BsYWluX29iaiA9IHNfcGxhaW5fb2JqO1xuXG4vLyAyMDE2LTA4LTI0IOeQrOWtkOmcgOaxgu+8jGV4cGFyYW1z5Y2V54us5aSE55CG77yMd2luZHZhbmXph4zpnIDopoEgQOiwi+Wjq1xuZXhwb3J0cy5ta1BsYWluS2V5Rm9yRXhwYXJhbXMgPSBmdW5jdGlvbihrZXlfcHJlZml4KSB7XG4gIHZhciBfa2V5ID0ga2V5X3ByZWZpeCB8fCBzX3BsYWluX29iajtcbiAgcmV0dXJuIF9rZXkgKyAnZXhwYXJhbXMnO1xufTtcblxuLyoqXG4gKiBhcnJheSB0byBwYXJhbVxuICog5bCG5LiA5Liq566A5Y2V55qE5pWw57uE6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI/vvIxcbiAqIOWFtuS4reaVsOe7hOS4ulxuICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuICog55qE5b2i5byP44CCXG4gKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuICogQHBhcmFtIGFyciB7QXJyYXl9XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGFycjJwYXJhbShhcnIpIHtcbiAgdmFyIGEgPSBbXSxcbiAgICBrLFxuICAgIHYsXG4gICAgaSxcbiAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICBhLnB1c2goay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMCA/IHYgOiAoayArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2KSkpO1xuICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5leHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblxuXG4vKipcbiAqIHBhcmFtIHRvIGFycmF5XG4gKiAyMDE2LTA4LTI0IOaUvuW8gO+8jOeUqOadpeWkhOeQhmV4cGFyYW1zIEDosIvlo6tcbiAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgYXJyYXkg5qC85byP77yM5aaC77yaXG4gKiBbW1wiYVwiLCBcIjFcIl0sIFtcImJcIiwgXCIyXCJdLCBbXCJjXCIsIFwiM1wiXV1cbiAqXG4gKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMucGFyYW0yYXJyID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG4gICAgaSA9IDAsIGwgPSBhLmxlbmd0aCxcbiAgICBpdGVtLFxuICAgIGFyciA9IFtdO1xuICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBhW2ldLnNwbGl0KFwiPVwiKTtcbiAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG4gIH1cblxuICByZXR1cm4gYXJyO1xufTtcblxuZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuICB2YXIgcmV0ID0ge307XG4gIHZhciBrO1xuICB2YXIgdjtcbiAgdmFyIGk7XG4gIHZhciBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICByZXRba10gPSB2O1xuICB9XG4gIHJldHVybiByZXQ7XG59O1xuLy8g5LuF5pSv5oyB5LiA57qnanNvbue7k+aehFxuZXhwb3J0cy5qc29uTGlrZVN0cjJKU09OID0gZnVuY3Rpb24oanNvblN0cikge1xuICBpZiAoIWpzb25TdHIgfHwgdHlwZW9mIGpzb25TdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIHZhciBzdHIgPSBqc29uU3RyLnJlcGxhY2UoL1snXCJ7fV0rL2csICcnKTtcbiAgdmFyIGFycjEgPSBzdHIuc3BsaXQoJywnKTsgXG4gIHZhciBhcnIyID0gW107IFxuICBmb3IgKHZhciBpID0gMDsgaSA8IGFycjEubGVuZ3RoOyBpKyspIHtcbiAgICBhcnIyLnB1c2goYXJyMVtpXS5zcGxpdCgnOicpKTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gdGhpcy5hcnIyb2JqKGFycjIpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0cy5jYW4yaHR0cHMgPSBmdW5jdGlvbih1cmwpIHtcbiAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG4gICAgdmFyIHByb3RvY2FsID0gJ2h0dHBzOic7XG4gICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG4gICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgfVxuICAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuICB9XG4gIHJldHVybiB1cmw7XG59O1xuXG5leHBvcnRzLmdldEFwcEtleSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZShcImFwbHVzXCIpO1xuICByZXR1cm4gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcGtleScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJZCcpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBLZXknKTtcbn07XG5cbmV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydHMuY2hlY2tEb21haW4gPSBmdW5jdGlvbih1cmwpIHtcbiAgY29uc3QgcmVnID0gbmV3IFJlZ0V4cCgvXlthLXpBLVowLTldWy1hLXpBLVowLTldezAsNjJ9KFxcLlthLXpBLVowLTldWy1hLXpBLVowLTldezAsNjJ9KSsoOlswLTldezEsNX0pKiQvKTtcbiAgaWYgKCF1cmwgfHwgIXVybC5tYXRjaChyZWcpKSB7XG4gICAgdmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KFwiIVwiKSk7XG4gICAgdWxvZygpLnRpcF93KFwi5pS25pWw5Z+f5ZCN6YWN572u6ZSZ6K+vLOivt+ajgOafpWFwbHVzLXJob3N0LXblj5blgLznmoTlhoXlrrksIOato+ehruagvOW8jyBlZy4gdGVzdC1xdHJhY2tpbmcteHh4LmNvbTrnq6/lj6Plj7flj6/pgIkgXCIpO1xuICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KFwiIVwiKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IFxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmV4cG9ydHMuY2hlY2tPcGVuaWQgPSBmdW5jdGlvbihvZCkge1xuICBpZiAoIW9kKSB7XG4gICAgdmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KCchJykpO1xuICAgIHVsb2coKS50aXBfdyhcIlFU55qEVVborqHnrpfkvp3otZblsI/nqIvluo/nmoTnlKjmiLfllK/kuIDmoIfor4YsIOivt+ehruS/nemSiOWvueeUqOaIt+WUr+S4gOagh+ivhueahOS4iuaKpe+8ge+8gVwiKTtcbiAgICB1bG9nKCkudGlwX3coXCLphY3nva7lj4LogIPku6PnoIE6IGFwbHVzX3F1ZXVlLnB1c2goe2FjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJywgYXJndW1lbnRzOiBbJ19hbm9ueV9pZCcsIOW+hemFjee9ruWPluWAvF19KTtcIik7XG4gICAgdWxvZygpLnRpcF93KFwi6I635Y+W5bCP56iL5bqP5ZSv5LiA5qCH6K+G6K+35Y+C6ICD6ZO+5o6lOiBodHRwczovL3QudGIuY24vMWRUSGpUVFFGMFVqT1ROSGlDa2FDU1wiKTtcbiAgICB1bG9nKCkudGlwX3codWxvZygpLnJlcGVhdCgnIScpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbnZhciBMT0dfUFJFRklYID0gJ1tBUExVU10gLS0gJztcblxubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICB2YXIgX2luc3RhbmNlID0gbnVsbDtcbiAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIFVMb2coKSB7XG4gICAgdGhpcy5zZXREZWJ1ZyA9IGZ1bmN0aW9uIChkZWJ1Zykge1xuICAgICAgX2RlYnVnID0gZGVidWc7XG4gICAgfTtcblxuICAgIHRoaXMuaSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5pbmZvLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGVcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGVcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy52ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnRpcF93ID0gZnVuY3Rpb24gKG1zZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgJyVjICcgKyBMT0dfUFJFRklYICsgbXNnLFxuICAgICAgICAgICdiYWNrZ3JvdW5kOnJlZDsgcGFkZGluZzogNHB4OyBwYWRkaW5nLXJpZ2h0OiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY29sb3I6ICNmZmY7J1xuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBlXG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVwZWF0ID0gZnVuY3Rpb24oY2hhcikge1xuICAgICAgdmFyIHJlcyA9IGNoYXI7XG4gICAgICB3aGlsZSAocmVzLmxlbmd0aCA8IDg2KSB7XG4gICAgICAgIHJlcyA9IHJlcyArIGNoYXI7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChfaW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICAgIF9pbnN0YW5jZSA9IG5ldyBVTG9nKCk7XG4gICAgfVxuICAgIHJldHVybiBfaW5zdGFuY2U7XG4gIH07XG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3Vsb2cuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog5YWL6ZqG5LiA5Liqb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGNsb25lRGVlcCAob2JqKSB7XG4gIHZhciBzdHI7XG4gIHZhciBuZXdvYmogPSBBcnJheS5pc0FycmF5KG9iaikgPyBbXSA6IHt9OyAvL0ZpeCBvYmouY29udHJ1Y3RvciB0eXBlRXJyb3IgY29uc3RydWN0b3IgdW5kZWZpbmVkXG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIGlmIChKU09OICYmIEpTT04ucGFyc2UpIHtcbiAgICBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopOyAvL+ezu+WIl+WMluWvueixoVxuICAgIG5ld29iaiA9IEpTT04ucGFyc2Uoc3RyKTsgLy/ov5jljp9cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpIGluIG9iaikge1xuICAgICAgbmV3b2JqW2ldID0gdHlwZW9mIG9ialtpXSA9PT0gJ29iamVjdCcgPyBjbG9uZURlZXAob2JqW2ldKSA6IG9ialtpXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ld29iajtcbn1cbm1vZHVsZS5leHBvcnRzID0gY2xvbmVEZWVwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2Nsb25lRGVlcC5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGNhY2hlID0gcmVxdWlyZSgnLi9jYWNoZScpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX3Jlc3VtZVRpbWUgPSBudWxsO1xuICB2YXIgX2N1cnJlbnRTZXNzaW9uID0gbnVsbDsgLy8g5b2T5YmNc2Vzc2lvbuWvueixoVxuXG4gIGZ1bmN0aW9uIGluaXQoKXtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdW1lOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgbmV3U2Vzc2lvbiA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghX2N1cnJlbnRTZXNzaW9uKSB7XG4gICAgICAgICAgX2N1cnJlbnRTZXNzaW9uID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuQ1VSUkVOVF9TRVNTSU9OKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgX3Jlc3VtZVRpbWUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgaWYgKCFfY3VycmVudFNlc3Npb25cbiAgICAgICAgICB8fCAhX2N1cnJlbnRTZXNzaW9uLmVuZF90aW1lXG4gICAgICAgICAgfHwgX3Jlc3VtZVRpbWUgLSBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPiBhcGx1c1N0YXRpYy5TRVNTSU9OX0lOVEVSVkFMKSB7XG4gICAgICAgICAgbmV3U2Vzc2lvbiA9IHRydWU7XG4gICAgICAgICAgX2NyZWF0ZU5ld1Nlc3Npb24ob3B0aW9ucyk7XG4gICAgICAgICAgdWxvZygpLnYoJ+W8gOWni+aWsOeahHNlc3Npb24oJXMpOiAnLCBfY3VycmVudFNlc3Npb24uaWQsIF9jdXJyZW50U2Vzc2lvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWxvZygpLnYoJ+W7tue7reS4iuS4gOasoXNlc3Npb24oJXMpOiAlcyAnLCBfY3VycmVudFNlc3Npb24uaWQsIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCksIF9jdXJyZW50U2Vzc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1Nlc3Npb247XG4gICAgICB9LFxuXG4gICAgICAvLyDlnKhvbkhpZGXmlrnms5Xml7bpl63lkIhzZXNzaW9uXG4gICAgICBwYXVzZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBfZW5kU2Vzc2lvbigpO1xuICAgICAgfSxcblxuICAgICAgLy8g6I635Y+W5b2T5YmN55qEc2Vzc2lvbklk77yM5rKh5pyJ5YiZ6L+U5Zue56m6XG4gICAgICBnZXRDdXJyZW50U2Vzc2lvbklkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAoX2N1cnJlbnRTZXNzaW9uIHx8IHt9KS5pZDtcbiAgICAgIH0sXG5cbiAgICAgIGdldEN1cnJlbnRTZXNzaW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfY3VycmVudFNlc3Npb247XG4gICAgICB9LFxuXG4gICAgICBjbG9uZUN1cnJlbnRTZXNzaW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjbG9uZURlZXAoX2N1cnJlbnRTZXNzaW9uKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldFVtUGFyYW1zKHF1ZXJ5KSB7XG4gICAgdmFyIGFwbHVzX3F1ZXJ5ID0ge307XG4gICAgZm9yICh2YXIgaSBpbiBxdWVyeSkge1xuICAgICAgYXBsdXNfcXVlcnlbaV0gPSBxdWVyeVtpXTtcbiAgICB9XG5cbiAgICB1bG9nKCkudigncXVlcnk6ICcsIHF1ZXJ5KTtcbiAgICByZXR1cm4gYXBsdXNfcXVlcnk7XG4gIH1cblxuICAvLyDlvIDlp4vkuIDkuKrmlrBzZXNzaW9uXG4gIGZ1bmN0aW9uIF9jcmVhdGVOZXdTZXNzaW9uKG5ld09wdGlvbnMpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHByZXZPcHRpb25zID0gKF9jdXJyZW50U2Vzc2lvbiB8fCB7fSkub3B0aW9ucyB8fCB7fTtcbiAgICAgIFxuICAgICAgdmFyIGxhdW5jaE9wdGlvbnMgPSB1dGlscy5hc3NpZ24oe30sIF9nZXRVbVBhcmFtcyhuZXdPcHRpb25zLnF1ZXJ5KSk7XG4gICAgICBsYXVuY2hPcHRpb25zLnBhdGggPSBuZXdPcHRpb25zLnBhdGggfHwgcHJldk9wdGlvbnMucGF0aDtcbiAgICAgIGxhdW5jaE9wdGlvbnMuc2NlbmUgPSBuZXdPcHRpb25zLnNjZW5lXG4gICAgICAgID8gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKSArICdfJyArIG5ld09wdGlvbnMuc2NlbmVcbiAgICAgICAgOiBwcmV2T3B0aW9ucy5zY2VuZTtcblxuICAgICAgdmFyIHJlZmVycmVySW5mbyA9IG5ld09wdGlvbnMucmVmZXJyZXJJbmZvO1xuICAgICAgaWYgKHJlZmVycmVySW5mbykge1xuICAgICAgICBsYXVuY2hPcHRpb25zLnJlZmVycmVyQXBwSWQgPSByZWZlcnJlckluZm8uYXBwSWQ7XG4gICAgICB9XG5cbiAgICAgIHVsb2coKS52KCdzZXNzaW9uIG9wdGlvbnM6ICcsIGxhdW5jaE9wdGlvbnMpO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcbiAgICAgIHZhciB0cyA9IERhdGUubm93KCk7XG4gICAgICBfY3VycmVudFNlc3Npb24gPSB7XG4gICAgICAgIGlkOiB1dGlscy5nZXRSYW5kb21TdHIoMTApICsgdHMsXG4gICAgICAgIHN0YXJ0X3RpbWU6IHRzLFxuICAgICAgICBvcHRpb25zOiBsYXVuY2hPcHRpb25zLFxuICAgICAgICBzdGF0ZV9zOiAxXG4gICAgICB9OyBcbiAgICAgIGlmIChncCkge1xuICAgICAgICBfY3VycmVudFNlc3Npb25bJ2dwJ10gPSBncDtcbiAgICAgIH0gXG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB1bG9nKCkuZSgn55Sf5oiQ5pawc2Vzc2lvbuWksei0pTogJywgZSk7XG4gICAgfVxuICB9XG5cbiAgLy8g57uT5p2f5b2T5YmNc2Vzc2lvbu+8jOeUseS6jjMw56eS5py65Yi277yM5LiA5Liqc2Vzc2lvbuS8muiiq+e7k+adn+WkmuasoVxuICBmdW5jdGlvbiBfZW5kU2Vzc2lvbigpIHtcbiAgICBpZiAoX2N1cnJlbnRTZXNzaW9uKSB7XG4gICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgIGlmICh0eXBlb2YgX2N1cnJlbnRTZXNzaW9uLmR1cmF0aW9uICE9PSAnbnVtYmVyJykge1xuICAgICAgICBfY3VycmVudFNlc3Npb24uZHVyYXRpb24gPSAwO1xuICAgICAgfVxuICAgICAgX2N1cnJlbnRTZXNzaW9uLmR1cmF0aW9uID0gX2N1cnJlbnRTZXNzaW9uLmVuZF90aW1lIC0gX3Jlc3VtZVRpbWU7XG4gICAgICBfY3VycmVudFNlc3Npb24uc3RhdGVfcyA9IDA7XG4gICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5DVVJSRU5UX1NFU1NJT04sIF9jdXJyZW50U2Vzc2lvbik7XG5cbiAgICAgIHVsb2coKS52KCfpgIDlh7rkvJror50oJXMpOiAlcyAnLCBfY3VycmVudFNlc3Npb24uaWQsIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCksIF9jdXJyZW50U2Vzc2lvbik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIV9pbnN0YW5jZSkge1xuICAgICAgX2luc3RhbmNlID0gaW5pdCgpO1xuICAgIH1cbiAgICByZXR1cm4gX2luc3RhbmNlO1xuICB9O1xuXG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3VtX3Nlc3Npb25fbWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIGpzb25VdGlsID0gcmVxdWlyZSgnLi9qc29uVXRpbCcpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuICB2YXIgX2luc3RhbmNlID0gbnVsbDtcbiAgdmFyIF9uYW1lID0gJyc7XG4gIHZhciBfZGF0YSA9IG51bGw7XG4gIHZhciBfbG9hZGVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gQ2FjaGUoKSB7XG4gICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgaWYgKCFfZGF0YSkge1xuICAgICAgICBfbmFtZSA9ICdhcGx1c19jYWNoZV8nICsgdXRpbC5nZXRBcHBLZXkoKSB8fCAnJztcbiAgICAgICAgY3R4LmdldFN0b3JhZ2Uoe1xuICAgICAgICAgIGtleTogX25hbWUsXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkge1xuICAgICAgICAgICAgICBfZGF0YSA9IGpzb25VdGlsLnBhcnNlKHJlcy5kYXRhKSB8fCB7fTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIF9kYXRhID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGN0eC5yZW1vdmVTdG9yYWdlKHtcbiAgICAgICAgICAgICAga2V5OiBfbmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmFpbDogZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgdWxvZygpLnYoX25hbWUgKyAnOiAnICsgZS5lcnJNc2cpO1xuICAgICAgICAgICAgX2RhdGEgPSB7fTtcbiAgICAgICAgICAgIF9sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuICAgICAgICAgICAgICBrZXk6IF9uYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5yZW1vdmVTdG9yYWdlKHtcbiAgICAgICAgICBrZXk6IF9uYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX2RhdGEpIHtcbiAgICAgICAgY3R4LnNldFN0b3JhZ2Uoe1xuICAgICAgICAgIGtleTogX25hbWUsXG4gICAgICAgICAgZGF0YToganNvblV0aWwuc3RyaW5nZnkoX2RhdGEpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoX2RhdGEpIHtcbiAgICAgICAgX2RhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiAoX2RhdGEgfHwge30pW2tleV07XG4gICAgfTtcblxuICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKF9kYXRhICYmIF9kYXRhW2tleV0pIHtcbiAgICAgICAgZGVsZXRlIF9kYXRhW2tleV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9kYXRhO1xuICAgIH07XG5cbiAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgX2RhdGEgPSBudWxsO1xuICAgIH07XG5cbiAgICB0aGlzLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiAhIXRoaXMuZ2V0KGtleSk7XG4gICAgfTtcblxuICAgIHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX2xvYWRlZDtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIV9pbnN0YW5jZSkge1xuICAgICAgX2luc3RhbmNlID0gbmV3IENhY2hlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfTtcbn0pKCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vY2FjaGUuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuZXhwb3J0cy5zdHJpbmdmeSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgaWYgKGRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn07XG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbihqc29uKSB7XG4gIGlmIChqc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0cy5wYXJzZVRvQXJyYXkgPSBmdW5jdGlvbihqc29uKSB7XG4gIGlmIChqc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiBbXTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vanNvblV0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMuZ2V0UmFuZG9tU3RyID0gZnVuY3Rpb24obGVuKSB7XG4gIHZhciBzdHIgPSAnJztcbiAgdmFyIGFyciA9IFsnMCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnLCAnaScsICdqJywgJ2snLCAnbCcsICdtJywgJ24nLCAnbycsICdwJywgJ3EnLCAncicsICdzJywgJ3QnLCAndScsICd2JywgJ3cnLCAneCcsICd5JywgJ3onLCAnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLCAnWScsICdaJ107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgTnVtYmVyKGxlbik7IGkrKykge1xuICAgIHZhciBwb3MgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoYXJyLmxlbmd0aCAtIDEpKTtcbiAgICBzdHIgKz0gYXJyW3Bvc107XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cbmV4cG9ydHMuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uKHN0ciwgc2VhcmNoVmFsKSB7XG4gIGlmICghc3RyIHx8ICFzZWFyY2hWYWwgfHwgc2VhcmNoVmFsLmxlbmd0aCA9PT0gMCB8fCBzZWFyY2hWYWwubGVuZ3RoID4gc3RyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gc3RyLnN1YnN0cigwLCBzZWFyY2hWYWwubGVuZ3RoKSA9PT0gc2VhcmNoVmFsO1xufTtcblxuZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICB9XG5cbiAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufTtcblxuLy8gMS5la3bkuK3lrZjlnKjop4TliJnkuI3lkIjms5Xmg4XlhrXvvIzkuKLlvIPmlbTmnaHkuovku7Zcbi8vIDIuZXZlbnRpZOmVv+W6puS4jeiDvei2hei/hzEyOOS4quWtl+esplxuLy8gMy5rZXnplb/luqbkuI3og73otoXov4cyNTbkuKrlrZfnrKZcbi8vIDQu5q+P5LiqZXZlbnTmkLrluKZrZXnkuKrmlbDkuI3og73otoXov4cxMDDkuKpcbmV4cG9ydHMuY2hlY2tFdmVudCA9IGZ1bmN0aW9uKGV2ZW50SWQsIHByb3BlcnRpZXMpIHtcbiAgdmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4gIHZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbiAgaWYgKCEoZXZlbnRJZCAmJiB0eXBlb2YgZXZlbnRJZCA9PT0gJ3N0cmluZycpKSB7XG4gICAgdWxvZygpLmUoJ3BsZWFzZSBjaGVjayB0cmFja0V2ZW50IGlkLiBpZCBzaG91bGQgYmUgXCJzdHJpbmdcIiBhbmQgbm90IG51bGwnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyDkv53nlZnlhbPplK7lrZdcbiAgdmFyIHJlc2VydmVXb3JkcyA9IFsnaWQnLCAnZHUnXTtcbiAgdmFyIHJlc2VydmVXb3JkTWFwID0ge307XG5cbiAgcmVzZXJ2ZVdvcmRzLmZvckVhY2goZnVuY3Rpb24gKHdvcmQpIHtcbiAgICByZXNlcnZlV29yZE1hcFt3b3JkXSA9IDE7XG4gIH0pO1xuXG4gIC8vIOajgOafpWV2ZW50SWTmmK/lkKbkuI7kv53nlZnlhbPplK7lrZflhrLnqoFcbiAgaWYgKHJlc2VydmVXb3JkTWFwW2V2ZW50SWRdKSB7XG4gICAgdWxvZygpLmUoJ2V2ZW50SWTkuI3og73kuI7ku6XkuIvkv53nlZnlrZflhrLnqoE6ICcgKyByZXNlcnZlV29yZHMuam9pbignLCcpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZXZlbnRJZC5sZW5ndGggPiBhcGx1c1N0YXRpYy5NQVhfRVZFTlRJRF9MRU5HVEgpIHtcbiAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gbGVuZ3RoIG9mIGV2ZW50IGlkIHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gcHJvcGVydGllc+eahOWQiOazleexu+Wei+S4uiBzdHJpbmcgfCBvYmplY3Qobm90IGluY2x1ZGUgQXJyYXkpXG4gIGlmIChwcm9wZXJ0aWVzXG4gICAgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHByb3BlcnRpZXMpKVxuICAgICYmIHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnc3RyaW5nJykge1xuICAgIHVsb2coKS5lKCdwbGVhc2UgY2hlY2sgdHJhY2tFdmVudCBwcm9wZXJ0aWVzLiBwcm9wZXJ0aWVzIHNob3VsZCBiZSBzdHJpbmcgb3Igb2JqZWN0KG5vdCBpbmNsdWRlIEFycmF5KScpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG4gICAgICAgIGlmIChrZXkubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpIHtcbiAgICAgICAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gbGVuZ3RoIG9mIHByb3BlcnR5IGtleSBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvdW50ID49IGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UKSB7XG4gICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGNvdW50IG9mIHByb3BlcnRpZXMgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWVNfQ09VTlQpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNlcnZlV29yZE1hcFtrZXldKSB7XG4gICAgICAgICAgdWxvZygpLmUoJ+WxnuaAp+S4reeahGtleeS4jeiDveS4juS7peS4i+S/neeVmeWtl+WGsueqgTogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvdW50ICs9IDE7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcblxuZXhwb3J0cy5kZWxldGVJbmZvID0gZnVuY3Rpb24oZ29rZXksIGFycikge1xuICBlYWNoKGFyciwgZnVuY3Rpb24odikge1xuICAgIGRlbGV0ZSBnb2tleVt2XTtcbiAgfSk7XG4gIHJldHVybiBnb2tleTtcbn07XG5cbmV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cblxuZXhwb3J0cy5EYXRhVHlwZSA9IHtcbiAgSEFMRl9TRVNTSU9OOiAnaGFsZl9zZXNzaW9uJyxcbiAgQ0xPU0VfU0VTU0lPTjogJ2Nsb3NlX3Nlc3Npb24nLFxuICBFS1Y6ICdla3YnLFxuICBFTlRFUl9QQUdFOiAnZW50ZXJfcGFnZScsXG4gIExFQVZFX1BBR0U6ICdsZWF2ZV9wYWdlJ1xufTtcblxuZXhwb3J0cy5BY2Nlc3NUeXBlID0ge1xuICBNT0JJTEVfTkVUV09SS18yRzogJzJnJyxcbiAgTU9CSUxFX05FVFdPUktfM0c6ICczZycsXG4gIE1PQklMRV9ORVRXT1JLXzRHOiAnNGcnLFxuICBNT0JJTEVfTkVUV09SS19OT05FOiAnbm9uZSdcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vdXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBjYWNoZSA9IHJlcXVpcmUoJy4vY2FjaGUnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuICB2YXIgX2luc3RhbmNlO1xuICB2YXIgX3Nlc3Npb25JZDtcbiAgdmFyIF9tZW1vcnlFdmVudHMgPSBbXTtcblxuICAvLyDlnKjliJvlu7pzZXNzaW9uSWTliY3mt7vliqDnmoTkuovku7ZcbiAgdmFyIF9ub1Nlc3Npb25FdmVudHMgPSBbXTtcblxuICBmdW5jdGlvbiBfY2FjaGVFdmVudHMoKSB7XG4gICAgaWYgKF9tZW1vcnlFdmVudHMubGVuZ3RoKSB7XG4gICAgICB2YXIgZWt2cyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkVLVlMpO1xuICAgICAgXG4gICAgICAvLyDmnKzlnLDmnIDlpJrlrZjlgqggRVZFTlRfTUFYX0NPVU5UIOadoeaVsOaNru+8jOOAjOWkmuS9meaVsOaNruOAjeaaguaXtuWFiOaKm+W8g1xuICAgICAgaWYgKF9nZXRDYWNoZUV2ZW50c0xlbmd0aChla3ZzKSArIF9tZW1vcnlFdmVudHMubGVuZ3RoIDw9IGFwbHVzU3RhdGljLkVWRU5UX01BWF9DT1VOVCkge1xuICAgICAgICBla3ZzID0gX2J1aWxkRWt2cyhla3ZzLCBfbWVtb3J5RXZlbnRzKTtcbiAgICAgICAgXG4gICAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLkVLVlMsIGVrdnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9idWlsZEVrdnMoZWt2cywgbWVtb3J5RXZlbnRzKSB7XG4gICAgZWt2cyA9IGVrdnMgfHwge307XG4gICAgdmFyIGV2ZW50cyA9IGVrdnNbX3Nlc3Npb25JZF07XG4gICAgaWYgKGlzQXJyYXkoZXZlbnRzKSAmJiBldmVudHMubGVuZ3RoKSB7XG4gICAgICBla3ZzW19zZXNzaW9uSWRdID0gZXZlbnRzLmNvbmNhdChtZW1vcnlFdmVudHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBla3ZzW19zZXNzaW9uSWRdID0gW10uY29uY2F0KG1lbW9yeUV2ZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVrdnM7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0Q2FjaGVFdmVudHNMZW5ndGgoZXZlbnRzTWFwKSB7XG4gICAgdmFyIGxlbiA9IDA7XG4gICAgZm9yICh2YXIga2V5IGluIGV2ZW50c01hcCkge1xuICAgICAgaWYgKGlzQXJyYXkoZXZlbnRzTWFwW2tleV0pKSB7XG4gICAgICAgIGxlbiArPSBldmVudHNNYXBba2V5XS5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZW47XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHJldHVybiB7XG4gICAgICBhZGRFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICghZXZlbnQpIHJldHVybjtcbiAgICAgICAgaWYgKF9zZXNzaW9uSWQpIHtcbiAgICAgICAgICBfbWVtb3J5RXZlbnRzLnVuc2hpZnQoZXZlbnQpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChfbWVtb3J5RXZlbnRzLmxlbmd0aCA+IGFwbHVzU3RhdGljLk1FTU9SWV9NQVhfQ09VTlQpIHtcbiAgICAgICAgICAgIF9jYWNoZUV2ZW50cyhfc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWxvZygpLncoJ3Nlc3Npb24gaWQgaXMgbnVsbDogJywgX3Nlc3Npb25JZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy51bnNoaWZ0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgc2V0U2Vzc2lvbklkOiBmdW5jdGlvbiAoc2Vzc2lvbklkKSB7XG4gICAgICAgIF9zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cbiAgICAgICAgdWxvZygpLnYoJ3NldFNlc3Npb25JZDogJywgX3Nlc3Npb25JZCk7XG4gICAgICAgIGlmIChpc0FycmF5KF9ub1Nlc3Npb25FdmVudHMpICYmIF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoICYmIF9zZXNzaW9uSWQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnQoX25vU2Vzc2lvbkV2ZW50c1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBnZXRFa3ZzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBla3ZzID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuRUtWUyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoX21lbW9yeUV2ZW50cyAmJiBfbWVtb3J5RXZlbnRzLmxlbmd0aCkge1xuICAgICAgICAgIGVrdnMgPSBfYnVpbGRFa3ZzKGVrdnMsIF9tZW1vcnlFdmVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBla3ZzO1xuICAgICAgfSxcblxuICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FjaGUoKS5yZW1vdmUoYXBsdXNTdGF0aWMuRUtWUyk7XG4gICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBfaW5zdGFuY2UgPSBpbml0KCk7XG4gICAgfVxuICAgIHJldHVybiBfaW5zdGFuY2U7XG4gIH07XG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL2V2ZW50TWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvaXNBcnJheS5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIEhlYWRlciA9IHJlcXVpcmUoJy4vdW1faGVhZGVyJyk7XG52YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBidWlsZEJvZHkgPSByZXF1aXJlKCcuL2JvZHlCdWlsZGVyJyk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xudmFyIFF1ZXVlID0gcmVxdWlyZSgnLi9xdWV1ZScpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIE1BWF9RVUVVRV9DT1VOVCA9IDUwOyAvLyDkuLrpmLLmraLlm6DnvZHnu5zlvILluLjlr7zoh7TnvJPlrZjov4flpKfvvIzorr7nva7nvJPlrZjkuKrmlbDkuIrpmZBcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXsgXG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX3J1bm5pbmcgPSBmYWxzZTtcbiAgdmFyIF9mYWlsUmVxdWVzdHMgPSBbXTtcbiAgdmFyIF9xdWV1ZSA9IG5ldyBRdWV1ZShNQVhfUVVFVUVfQ09VTlQpO1xuXG4gIGZ1bmN0aW9uIF9lbnF1ZXVlUmVxdWVzdChkYXRhVHlwZSwgb3B0aW9ucywgY2IpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZGF0YSA9IGJ1aWxkQm9keShkYXRhVHlwZSk7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIGNsaWVudCA9IGFwbHVzLl9hcGx1c19jbGllbnQgfHwge307XG4gICAgICBkYXRhLmhlYWRlciA9IHV0aWxEYXNoLmFzc2lnbihkYXRhLmhlYWRlciwgSGVhZGVyLmdldE5ldEluZm8oY2xpZW50KSk7XG4gICAgICBkYXRhLm5vQ2FjaGUgPSBvcHRpb25zLm5vQ2FjaGU7XG4gICAgICBfcXVldWUuZW5xdWV1ZShkYXRhKTtcbiAgICB9XG4gICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcbiAgfVxuICBmdW5jdGlvbiBfc2VuZFF1ZXVlKGNvbXBsZXRlZENhbGxiYWNrKSB7XG4gICAgdmFyIGRhdGEgPSBfcXVldWUuZnJvbnQoKTtcbiAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9xdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICBfc2VuZFF1ZXVlKGNvbXBsZXRlZENhbGxiYWNrKTtcbiAgICB9O1xuXG4gICAgdmFyIGZhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyDlj5HpgIHlpLHotKXliJnlsIbor6XmnaHmlbDmja7mt7vliqDliLDpmJ/liJflsL7pg6jvvIzpmLLmraLlvbHlk43lkI7nu63mlbDmja7nmoTlj5HpgIFcbiAgICAgIHZhciBpdGVtID0gX3F1ZXVlLmRlcXVldWUoKTtcbiAgICAgIGl0ZW0gJiYgKCFpdGVtLm5vQ2FjaGUpICYmIF9mYWlsUmVxdWVzdHMucHVzaChpdGVtKTtcbiAgICAgIF9zZW5kUXVldWUoY29tcGxldGVkQ2FsbGJhY2spO1xuICAgIH07XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHJlcXVlc3QoZGF0YSwgc3VjY2VzcywgZmFpbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9wcm9jZXNzRmFpbFJlcXVlc3RzKCk7XG4gICAgICBjb21wbGV0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9wcm9jZXNzRmFpbFJlcXVlc3RzKCkge1xuICAgIC8vIOWPkemAgeWujOaIkOWQjuWwhuWksei0peeahOivt+axgumHjeaWsOa3u+WKoOWIsOmYn+WIl+S4rVxuICAgIF9mYWlsUmVxdWVzdHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgX3F1ZXVlLmVucXVldWUoaXRlbSk7XG4gICAgfSk7XG4gICAgX2ZhaWxSZXF1ZXN0cy5sZW5ndGggPSAwO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0U2VuZChjb21wbGV0ZWRDYWxsYmFjaykge1xuICAgIGlmIChfcnVubmluZykge1xuICAgICAgdWxvZygpLnYoJ+mYn+WIl+ato+WcqOWPkemAgeS4rScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfcnVubmluZyA9IHRydWU7XG4gICAgLy8g5ZyodGFybzF444CBdGFybzJ45qGG5p625Lit77yM5b+F6aG76YCa6L+H5Y+Y6YeP5aOw5piO55qE5pa55byP5Lyg5YWl77yM5ZCm5YiZX3NlbmRRdWV1ZemYu+Whnu+8jOWbnuiwg+aXoOazlemHjee9rl9ydW5uaW5n77yM5a+86Ie05pel5b+X5Y+R6YCB5LiN5Ye677yb5Y6f5Zug5LiN5piOXG4gICAgLy8g5aaC5p6c5Y675o6JX3J1bm5pbmfnmoTor53vvIzkvJrlr7zoh7Tph43lpI3kuIrmiqVzZXNzaW9u5pel5b+XXG4gICAgdmFyIGNiID0gZnVuY3Rpb24gKCkge1xuICAgICAgX3J1bm5pbmcgPSBmYWxzZTtcbiAgICAgIGlzRnVuY3Rpb24oY29tcGxldGVkQ2FsbGJhY2spICYmIGNvbXBsZXRlZENhbGxiYWNrKCk7XG4gICAgfTtcbiAgICBfc2VuZFF1ZXVlKGNiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3RRdWV1ZSgpIHtcbiAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAoZGF0YVR5cGUsIG9wdGlvbnMsIGNvbXBsZXRlZENhbGxiYWNrKSB7XG4gICAgICBpZiAoZGF0YVR5cGUpIHtcbiAgICAgICAgdGhpcy5hZGQoZGF0YVR5cGUsIG9wdGlvbnMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfc3RhcnRTZW5kKGNvbXBsZXRlZENhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfc3RhcnRTZW5kKGNvbXBsZXRlZENhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hZGQgPSBmdW5jdGlvbiAoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICBpZiAoIXV0aWwuY2hlY2tPcGVuaWQoYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgX2VucXVldWVSZXF1ZXN0KGRhdGFUeXBlLCBvcHRpb25zLCBjYik7XG4gICAgfTtcblxuICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpdGVtcyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLlJFUVVFU1RTKTtcbiAgICAgIGlmIChpdGVtcyAmJiBpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIF9xdWV1ZS5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNhY2hlKCkucmVtb3ZlKGFwbHVzU3RhdGljLlJFUVVFU1RTKTtcbiAgICB9O1xuXG4gICAgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgY2FjaGUoKS5zZXQoYXBsdXNTdGF0aWMuUkVRVUVTVFMsIGNsb25lRGVlcChfcXVldWUuaXRlbXMoKSkpO1xuICAgICAgX3F1ZXVlLmNsZWFyKCk7IC8vIOS4gOWumuimgeWFiOS/neWtmOWGjea4heepuu+8jOWQpuWImeS/neWtmOeahOawuOi/nOaYr+epuuaVsOaNrlxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBfaW5zdGFuY2UgPSBuZXcgUmVxdWVzdFF1ZXVlKCk7XG4gICAgfVxuICAgIHJldHVybiBfaW5zdGFuY2U7XG4gIH07XG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3JlcXVlc3RRdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcblxuZXhwb3J0cy5nZXROZXRJbmZvID0gZnVuY3Rpb24oY2xpZW50KXtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICB2YXIgYWNjZXNzID0gY2xpZW50Lm5ldHdvcmtUeXBlO1xuICBpZiAoYWNjZXNzID09PSAnbm9uZScpIHtcbiAgICBhY2Nlc3MgPSAndW5rbm93bic7XG4gIH1cblxuICBhY2Nlc3MgPSBhY2Nlc3MgPyBhY2Nlc3MudG9Mb3dlckNhc2UoKSA6ICcnO1xuICBzd2l0Y2ggKGFjY2Vzcykge1xuICBjYXNlIHV0aWxzLkFjY2Vzc1R5cGUuTU9CSUxFX05FVFdPUktfNEc6XG4gICAgcmVzdWx0LmFjY2Vzc19zdWJ0eXBlID0gJ0xURSc7XG4gICAgcmVzdWx0LmFjY2VzcyA9ICc0Ryc7XG4gICAgYnJlYWs7XG4gIGNhc2UgdXRpbHMuQWNjZXNzVHlwZS5NT0JJTEVfTkVUV09SS18zRzpcbiAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnQ0RNQSc7XG4gICAgcmVzdWx0LmFjY2VzcyA9ICczRyc7XG4gICAgYnJlYWs7XG4gIGNhc2UgdXRpbHMuQWNjZXNzVHlwZS5NT0JJTEVfTkVUV09SS18yRzpcbiAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnR1JQUyc7XG4gICAgcmVzdWx0LmFjY2VzcyA9ICcyRyc7XG4gICAgYnJlYWs7XG4gIGRlZmF1bHQ6XG4gICAgcmVzdWx0LmFjY2VzcyA9IGFjY2VzcztcbiAgICBkZWxldGUgcmVzdWx0LmFjY2Vzc19zdWJ0eXBlO1xuICAgIGJyZWFrO1xuICB9O1xuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnRzLmdldEhlYWRlckluZm8gPSBmdW5jdGlvbigpIHtcbiAgdmFyIGhlYWRlciA9IHt9O1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cbiAgdmFyIGdsb2JhbENvbmZpZyA9IGFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcbiAgdmFyIGNsaWVudCA9IGFwbHVzLl9hcGx1c19jbGllbnQgfHwge307XG5cbiAgdmFyIGRhdGEgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5JTVBSSU5UKTtcbiAgaWYgKGRhdGEpIHtcbiAgICBoZWFkZXIuaW1wcmludCA9IGRhdGE7XG4gIH1cblxuICBoZWFkZXIuZGV2aWNlX3R5cGUgPSAnUGhvbmUnO1xuICBoZWFkZXIuc2RrX3ZlcnNpb24gPSBnbG9iYWxDb25maWcubHZlcjtcbiAgaGVhZGVyLmFwcGtleSA9IHV0aWwuZ2V0QXBwS2V5KCk7XG4gIGhlYWRlci5kZXZpY2VfaW5mbyA9ICcnO1xuICBoZWFkZXIuYXBwaWQgPSBjbGllbnQuYXBwSWQ7XG4gIGhlYWRlci5hcHBfZW52ID0gY2xpZW50LmFwcEVudjtcbiAgaGVhZGVyLmFwcF92ZXJzaW9uID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcFZlcnNpb24nKSB8fCAnZGV2dG9vbHMnO1xuXG4gIHZhciBnbG9iYWxfYXJncyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1nbG9iYWwtYXJncycpO1xuICBpZiAoZ2xvYmFsX2FyZ3MgJiYgZ2xvYmFsX2FyZ3MuZGVidWdJZCkge1xuICAgIGhlYWRlci5taW5pYXBwRGVidWdJZCA9IGdsb2JhbF9hcmdzLmRlYnVnSWQ7XG4gIH1cblxuICB2YXIgc3lzdGVtSW5mbyA9IGNsaWVudCB8fCB7fTtcbiAgc3lzdGVtSW5mby5zYWZlQXJlYSA9IHN5c3RlbUluZm8uc2FmZUFyZWEgfHwge307XG5cbiAgdmFyIG1vZGVsID0gc3lzdGVtSW5mby5tb2RlbCB8fCAnJztcbiAgdmFyIHBsYXRmb3JtID0gc3lzdGVtSW5mby5wbGF0Zm9ybSB8fCAnJztcbiAgdmFyIGJyYW5kID0gc3lzdGVtSW5mby5icmFuZCB8fCAnJztcbiAgdmFyIGJyYW5kTCA9IGJyYW5kLnRvTG93ZXJDYXNlKCk7XG5cbiAgaGVhZGVyLnNka190eXBlID0gbWluaS5nZXRTZGtUeXBlKCk7XG4gIGhlYWRlci5wbGF0Zm9ybSA9IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCk7XG4gIGhlYWRlci5wbGF0Zm9ybV9zZGtfdmVyc2lvbiA9IHN5c3RlbUluZm8uU0RLVmVyc2lvbjtcbiAgaGVhZGVyLnBsYXRmb3JtX3ZlcnNpb24gPSBzeXN0ZW1JbmZvLnBsYXRmb3JtVmVyc2lvbjtcbiAgICBcbiAgdmFyIHcgPSBNYXRoLnJvdW5kKHN5c3RlbUluZm8uc2NyZWVuV2lkdGggKiBzeXN0ZW1JbmZvLnBpeGVsUmF0aW8pO1xuICB2YXIgaCA9IE1hdGgucm91bmQoc3lzdGVtSW5mby5zY3JlZW5IZWlnaHQgKiBzeXN0ZW1JbmZvLnBpeGVsUmF0aW8pO1xuICBoZWFkZXIucmVzb2x1dGlvbiA9IHcgPiBoID8gdyArICcqJyArIGggOiBoICsgJyonICsgdztcblxuICBoZWFkZXIucGl4ZWxfcmF0aW8gPSBzeXN0ZW1JbmZvLnBpeGVsUmF0aW87XG4gIGhlYWRlci5vcyA9IHBsYXRmb3JtO1xuICBoZWFkZXIuZm9udF9zaXplX3NldHRpbmcgPSBzeXN0ZW1JbmZvLmZvbnRTaXplU2V0dGluZztcbiAgaGVhZGVyLmRldmljZV9tb2RlbCA9IG1vZGVsOyAvLyDorr7lpIflnovlj7dcbiAgaGVhZGVyLmRldmljZV9icmFuZCA9IGJyYW5kOyAvLyDorr7lpIfnlJ/kuqfllYZcbiAgLy8gX2hlYWRlci5jaGFubmVsID0gYnJhbmRMOyAvLyDov5nph4zmuKDpgZPmmoLml7blhYjnlKgg55Sf5Lqn5ZWG55qE5ZCN5a2XXG4gIGhlYWRlci5kZXZpY2VfbWFudWZhY3R1cmVyID0gYnJhbmRMO1xuICBoZWFkZXIuZGV2aWNlX21hbnVpZCA9IG1vZGVsOyAvLyDorr7lpIflk4HniYwv5Z6L5Y+3XG4gIGhlYWRlci5kZXZpY2VfbmFtZSA9IG1vZGVsOyAvLyDlhoXpg6jkuqflk4Hku6Plj7dcbiAgaGVhZGVyLm9zX3ZlcnNpb24gPSBzeXN0ZW1JbmZvLm9zX3ZlcnNpb247IC8vIG9z54mI5pys5Y+3XG4gIGhlYWRlci5sYW5ndWFnZSA9IHN5c3RlbUluZm8ubGFuZ3VhZ2U7IC8vIOivreiogO+8jHpoXG5cbiAgdmFyIG5ldEluZm8gPSB0aGlzLmdldE5ldEluZm8oY2xpZW50KTtcbiAgaGVhZGVyLmFjY2VzcyA9IG5ldEluZm8uYWNjZXNzO1xuICBpZiAobmV0SW5mby5hY2Nlc3Nfc3VidHlwZSkge1xuICAgIGhlYWRlci5hY2Nlc3Nfc3VidHlwZSA9IG5ldEluZm8uYWNjZXNzX3N1YnR5cGU7XG4gIH1cblxuICByZXR1cm4gaGVhZGVyO1xufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vdW1faGVhZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgc2Vzc2lvbk1hbmFnZXIgPSByZXF1aXJlKCcuL3VtX3Nlc3Npb25fbWFuYWdlcicpO1xudmFyIGV2ZW50TWFuYWdlciA9IHJlcXVpcmUoJy4vZXZlbnRNYW5hZ2VyJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkYXRhVHlwZSkge1xuICB2YXIgZGF0YSA9IG51bGw7XG4gIHN3aXRjaCAoZGF0YVR5cGUpIHtcbiAgY2FzZSB1dGlscy5EYXRhVHlwZS5IQUxGX1NFU1NJT046XG4gICAgZGF0YSA9IF9idWlsZEhhbGZTZXNzaW9uKCk7XG4gICAgYnJlYWs7XG4gIGNhc2UgdXRpbHMuRGF0YVR5cGUuQ0xPU0VfU0VTU0lPTjpcbiAgICBkYXRhID0gX2J1aWxkQ2xvc2VTZXNzaW9uKCk7XG4gICAgYnJlYWs7XG4gIGNhc2UgdXRpbHMuRGF0YVR5cGUuRUtWOlxuICAgIGRhdGEgPSBfYnVpbGRFa3YoKTtcbiAgICBicmVhaztcbiAgZGVmYXVsdDpcbiAgICBicmVhaztcbiAgfVxuICByZXR1cm4gZGF0YTtcbn07XG5cbmZ1bmN0aW9uIF9idWlsZEhhbGZTZXNzaW9uKCkge1xuICB2YXIgZGF0YSA9IG51bGw7XG4gIHZhciBzZXNzaW9uID0gc2Vzc2lvbk1hbmFnZXIoKS5jbG9uZUN1cnJlbnRTZXNzaW9uKCk7XG4gIGlmIChzZXNzaW9uKSB7XG4gICAgZGF0YSA9IHtcbiAgICAgIGhlYWRlcjoge1xuICAgICAgICBzdDogJzEnXG4gICAgICB9LFxuICAgICAgYW5hbHl0aWNzOiB7XG4gICAgICAgIHNlc3Npb25zOiBbc2Vzc2lvbl1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRDbG9zZVNlc3Npb24oKSB7XG4gIHZhciBkYXRhID0gbnVsbDtcblxuICB2YXIgYW5hbHl0aWNzID0ge307XG5cbiAgdmFyIHNlc3Npb24gPSBzZXNzaW9uTWFuYWdlcigpLmNsb25lQ3VycmVudFNlc3Npb24oKTtcbiAgaWYgKHNlc3Npb24pIHtcbiAgICBhbmFseXRpY3Muc2Vzc2lvbnMgPSBbc2Vzc2lvbl07XG4gIH1cblxuICB2YXIgZWt2cyA9IGV2ZW50TWFuYWdlcigpLmdldEVrdnMoKTtcbiAgaWYgKGVrdnMpIHtcbiAgICBhbmFseXRpY3MuZWt2cyA9IGNsb25lRGVlcChla3ZzKTtcbiAgICBldmVudE1hbmFnZXIoKS5jbGVhcigpO1xuICB9XG5cbiAgaWYgKGFuYWx5dGljcy5zZXNzaW9ucyB8fCBhbmFseXRpY3MuZWt2cykge1xuICAgIGRhdGEgPSB7XG4gICAgICBhbmFseXRpY3M6IGFuYWx5dGljc1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gZGF0YTtcbn07XG5cbmZ1bmN0aW9uIF9idWlsZEVrdigpIHtcbiAgdmFyIGRhdGEgPSBudWxsO1xuXG4gIHZhciBla3ZzID0gZXZlbnRNYW5hZ2VyKCkuZ2V0RWt2cygpO1xuICBpZiAoZWt2cykge1xuICAgIGRhdGEgPSB7XG4gICAgICBhbmFseXRpY3M6IHtcbiAgICAgICAgZWt2czogY2xvbmVEZWVwKGVrdnMpXG4gICAgICB9XG4gICAgfTtcbiAgICBldmVudE1hbmFnZXIoKS5jbGVhcigpO1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vYm9keUJ1aWxkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBIZWFkZXIgPSByZXF1aXJlKCcuL3VtX2hlYWRlcicpO1xudmFyIG1hbmdsZSA9IHJlcXVpcmUoJy4vbWFuZ2xlX21pbmknKTtcbnZhciBpbXByaW50TWFuYWdlciA9IHJlcXVpcmUoJy4vaW1wcmludE1hbmFnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBqc29uVXRpbCA9IHJlcXVpcmUoJy4vanNvblV0aWwnKTtcbnZhciBiYXNlNjQgPSByZXF1aXJlKCcuL2Jhc2U2NCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcblxuZnVuY3Rpb24gZ2V0VXJsKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIHZhciByaG9zdCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG4gIHZhciBsb2dEb21haW4gPSBtaW5pLmdldExvZ0RvbWFpbigpO1xuICBpZiAoIXJob3N0IHx8ICFsb2dEb21haW4pIHsgXG4gICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgIC8vICAgbXNnOiAnY3VycmVudCByZXF1ZXN0IGRvbWFpbiBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91ciBhcGx1cy1yaG9zdC12IHZhbHVlIGluc2lkZSBtZXRhaW5mbyEnXG4gICAgLy8gfSk7XG4gICAgdWxvZygpLncoJ2N1cnJlbnQgcmVxdWVzdCBkb21haW4gaW52YWxpZCwgcGxlYXNlIGNoZWNrIHlvdXIgYXBsdXMtcmhvc3QtdiB2YWx1ZSBpbnNpZGUgbWV0YWluZm8hJyk7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHZhciB1cmwgPSBbJy8vJywgcmhvc3QsIGxvZ0RvbWFpbl0uam9pbignJyk7XG4gIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuICBpZiAoLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcbiAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gIH1cbiAgdXJsID0gcHJvdG9jYWwgKyB1cmw7XG4gIHJldHVybiB1cmw7XG59O1xuXG52YXIgTUFYX1JFUVVFU1RfVElNRU9VVCA9IDUwMDA7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVxdWVzdChkYXRhLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWxDYWxsYmFjaywgY29tcGxldGVkQ2FsbGJhY2spIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICB2YXIgcF9oZWFkZXIgPSBIZWFkZXIuZ2V0SGVhZGVySW5mbygpO1xuICAvLyBpZiAoIXV0aWwuY2hlY2tPcGVuaWQoYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSkpIHtcbiAgLy8gICByZXR1cm47XG4gIC8vIH1cblxuICBpZiAobWluaS5nZXRQbGF0Zm9ybVR5cGUoKSA9PT0gJ215JyB8fCBtaW5pLmdldFBsYXRmb3JtVHlwZSgpID09PSAndGFvYmFvJykge1xuICAgIHBfaGVhZGVyWydpZF90eXBlJ10gPSAnYWxpcGF5X2lkJztcbiAgICBwX2hlYWRlclsnaWRfdHJhY2tpbmcnXSA9IHtcbiAgICAgIGFsaXBheV9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSB8fCAnJyxcbiAgICAgIHVuaW9uaWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfZGV2X2lkJykgfHwgJycsXG4gICAgICB1c2VySWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSB8fCAnJyxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHBfaGVhZGVyWydpZF90eXBlJ10gPSAnb3BlbmlkJztcbiAgICBwX2hlYWRlclsnaWRfdHJhY2tpbmcnXSA9IHtcbiAgICAgIG9wZW5pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSB8fCAnJyxcbiAgICAgIHVuaW9uaWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfZGV2X2lkJykgfHwgJycsXG4gICAgICB1c2VySWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSB8fCAnJyxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGltcHJpbnRNYW5hZ2VyLmdldCgpKSB7XG4gICAgcF9oZWFkZXJbYXBsdXNTdGF0aWMuSU1QUklOVF0gPSBpbXByaW50TWFuYWdlci5nZXQoKTtcbiAgfVxuXG4gIGlmIChkYXRhLmFuYWx5dGljcykge1xuICAgIHZhciB1c2VySWQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCk7XG4gICAgdmFyIHVzZXJfbmljayA9IGFwbHVzLmdldE1ldGFJbmZvKCdfdXNlcl9uaWNrJyk7XG4gICAgZGF0YS5hbmFseXRpY3MuYWN0aXZlX3VzZXIgPSB7XG4gICAgICBwdWlkOiB1c2VySWQsXG4gICAgICBwcm92aWRlcjogdXNlcl9uaWNrXG4gICAgfTtcbiAgfVxuXG4gIGRhdGEuaGVhZGVyID0gdXRpbHMuYXNzaWduKHBfaGVhZGVyLCBkYXRhLmhlYWRlciwge1xuICAgIHRzOiBEYXRlLm5vdygpLFxuICAgIHRyYWNlSWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyBEYXRlLm5vdygpICsgdXRpbHMuZ2V0UmFuZG9tU3RyKDkpXG4gIH0pO1xuICB2YXIgbWFuZ2xlRGF0YSA9IG1hbmdsZShkYXRhKTtcbiAgdmFyIHJlcXVlc3REYXRhID0ganNvblV0aWwuc3RyaW5nZnkobWFuZ2xlRGF0YSk7XG4gIHZhciB1cmwgPSBnZXRVcmwoKTtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICB1cmw6IHVybCxcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBkYXRhOiBiYXNlNjQuZW5jb2RlKHJlcXVlc3REYXRhKSxcbiAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCkge1xuICAgICAgdmFyIHN0YXR1c0NvZGUgPSByZXNwLmNvZGUgfHwgcmVzcC5zdGF0dXMgfHwgcmVzcC5zdGF0dXNDb2RlO1xuICAgICAgaWYgKHN0YXR1c0NvZGUgPT09IDIwMCB8fCBzdGF0dXNDb2RlID09PSA0MTMpIHtcbiAgICAgICAgdWxvZygpLmkoJ+aVsOaNruWPkemAgeaIkOWKnzogJywgZGF0YSwgcmVxdWVzdERhdGEpO1xuXG4gICAgICAgIC8vIOWcqOatpOWkhOWwhmltcHJpbnTlhoXlrrnliqDlhaXliLDmnKzlnLDnvJPlrZjkuK1cbiAgICAgICAgc2F2ZUltcHJpbnQoKHJlc3AuZGF0YSB8fCB7fSkuaW1wcmludCk7XG4gICAgICAgIGlzRnVuY3Rpb24oc3VjY2Vzc0NhbGxiYWNrKSAmJiBzdWNjZXNzQ2FsbGJhY2socmVzcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bG9nKCkudygn5pWw5o2u5Y+R6YCB5aSx6LSlOiAnLCByZXF1ZXN0RGF0YSk7XG4gICAgICAgIGlzRnVuY3Rpb24oZmFpbENhbGxiYWNrKSAmJiBmYWlsQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZhaWw6IGZ1bmN0aW9uIChpc1RpbWVvdXQpIHtcbiAgICAgIHVsb2coKS53KCfmlbDmja7lj5HpgIEnICsgaXNUaW1lb3V0ID8gJ+i2heaXtjogJyA6ICflpLHotKU6ICcsIHJlcXVlc3REYXRhKTtcbiAgICAgIGlzRnVuY3Rpb24oZmFpbENhbGxiYWNrKSAmJiBmYWlsQ2FsbGJhY2soKTtcbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpc0Z1bmN0aW9uKGNvbXBsZXRlZENhbGxiYWNrKSAmJiBjb21wbGV0ZWRDYWxsYmFjaygpO1xuICAgIH1cbiAgfTtcblxuICBzZGtSZXF1ZXN0KHV0aWxzLmFzc2lnbihjb25maWcsIGJ1aWxkSHR0cEhlYWRlcigpKSk7XG59O1xuXG5mdW5jdGlvbiBzZGtSZXF1ZXN0KG9wdGlvbnMpIHtcbiAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICB2YXIgc3JjU3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgdmFyIHNyY0ZhaWwgPSBvcHRpb25zLmZhaWw7XG4gIHZhciBpc1RpbWVvdXQgPSBmYWxzZTtcbiAgdmFyIHN0ID0gbnVsbDtcblxuICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzcCkge1xuICAgIGlmICghaXNUaW1lb3V0KSB7XG4gICAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuICAgICAgaXNGdW5jdGlvbihzcmNTdWNjZXNzKSAmJiBzcmNTdWNjZXNzKHJlc3ApO1xuICAgIH1cbiAgfTtcblxuICBvcHRpb25zLmZhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFpc1RpbWVvdXQpIHtcbiAgICAgIHN0ICYmIGNsZWFyVGltZW91dChzdCk7XG4gICAgICBpc0Z1bmN0aW9uKHNyY0ZhaWwpICYmIHNyY0ZhaWwoZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICBjdHgucmVxdWVzdChvcHRpb25zKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGRkICYmIGRkLmh0dHBSZXF1ZXN0KG9wdGlvbnMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHVsb2coKS53KCfor7fmsYLlj5HpgIHlpLHotKU6ICcsIGUpO1xuICAgIH1cbiAgfVxuXG4gIHN0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgc3QgJiYgY2xlYXJUaW1lb3V0KHN0KTtcbiAgICBpc1RpbWVvdXQgPSB0cnVlO1xuXG4gICAgaXNGdW5jdGlvbihzcmNGYWlsKSAmJiBzcmNGYWlsKGlzVGltZW91dCk7XG4gIH0sIG9wdGlvbnMudGltZW91dCB8fCBNQVhfUkVRVUVTVF9USU1FT1VUKTtcbn1cblxuLy8g5pyN5Yqh56uv5LiL5Y+R5Y+R6YCB562W55WlXG5mdW5jdGlvbiBzYXZlSW1wcmludChpbXByaW50KSB7XG4gIGlmIChpbXByaW50KSB7XG4gICAgaW1wcmludE1hbmFnZXIuc2V0KGltcHJpbnQpO1xuICAgIGltcHJpbnRNYW5hZ2VyLnNhdmUoKTtcblxuICAgIHVsb2coKS52KCdpbXByaW50OiAnLCBpbXByaW50TWFuYWdlci5nZXRJbXBPYmooKSk7XG5cbiAgfVxufVxuXG5mdW5jdGlvbiBidWlsZEh0dHBIZWFkZXIoKSB7XG4gIHZhciBoZWFkZXJUeXBlID0gbWluaS5nZXRTZGtUeXBlKCkgKyAnL2pzb24nO1xuICB2YXIgaXNNeSA9IGZhbHNlO1xuICB0cnkge1xuICAgIGlmIChteSkge1xuICAgICAgaXNNeSA9IHRydWU7XG4gICAgfVxuICB9IGNhdGNoKGUpe307XG5cbiAgaWYgKGlzTXkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogaGVhZGVyVHlwZSxcbiAgICAgICAgJ01zZy1UeXBlJzogaGVhZGVyVHlwZVxuICAgICAgfVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhlYWRlcjoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogaGVhZGVyVHlwZSxcbiAgICAgICAgJ01zZy1UeXBlJzogaGVhZGVyVHlwZVxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9yZXF1ZXN0LmpzXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgYW5hbHl0aWNzTWFwID0ge1xuICBzZXNzaW9uczogJ3NuJyxcbiAgLy8gcGFnZXM6ICdwJyxcbiAgLy8gc2hhcmVzOiAnc3InLFxuICBla3ZzOiAnZScsXG4gIGFjdGl2ZV91c2VyOiAnYWN0aXZlX3VzZXInXG59O1xuXG52YXIgaGVhZGVyTWFwID0ge1xuICBzZGtfdHlwZTogJ3NkdCcsXG4gIGFjY2VzczogJ2FjJyxcbiAgYWNjZXNzX3N1YnR5cGU6ICdhY3MnLFxuICBkZXZpY2VfbW9kZWw6ICdkbScsXG4gIGxhbmd1YWdlOiAnbGFuZycsXG4gIGRldmljZV90eXBlOiAnZHQnLFxuICBkZXZpY2VfbWFudWZhY3R1cmVyOiAnZG1mJyxcbiAgZGV2aWNlX25hbWU6ICdkbicsXG4gIHBsYXRmb3JtX3ZlcnNpb246ICdwdicsXG4gIGlkX3R5cGU6ICdpdCcsXG4gIGZvbnRfc2l6ZV9zZXR0aW5nOiAnZnNzJyxcbiAgb3NfdmVyc2lvbjogJ292JyxcbiAgZGV2aWNlX21hbnVpZDogJ2RpZCcsXG4gIHBsYXRmb3JtX3Nka192ZXJzaW9uOiAncHN2JyxcbiAgZGV2aWNlX2JyYW5kOiAnZGInLFxuICBhcHBrZXk6ICdhaycsXG4gIF9pZDogJ2lkJyxcbiAgaWRfdHJhY2tpbmc6ICdpdHInLFxuICBpbXByaW50OiAnaW1wJyxcbiAgc2RrX3ZlcnNpb246ICdzdicsXG4gIHJlc29sdXRpb246ICdybCcsXG4gIHRlc3RUb2tlbjogJ3R0bicsXG4gIG1pbmlhcHBEZWJ1Z0lkOiAnZGsnLFxuICAvLyB0aGVtZTogJ3Q1JyxcbiAgLy8gYmVuY2htYXJrX2xldmVsOiAnYm1sJyxcbiAgLy8gc2NyZWVuX3dpZHRoOiAnc3cnLFxuICAvLyBzY3JlZW5faGVpZ2h0OiAnc2gnLFxuICAvLyBzdGF0dXNfYmFyX2hlaWdodDonc2JoJyxcbiAgLy8gc2FmZV9hcmVhX3RvcDogJ3NhdCcsXG4gIC8vIHNhZmVfYXJlYV9sZWZ0OiAnc2FsJyxcbiAgLy8gc2FmZV9hcmVhX3JpZ2h0OiAnc2FyJyxcbiAgLy8gc2FmZV9hcmVhX2JvdHRvbTogJ3NhYicsXG4gIC8vIHNhZmVfYXJlYV9oZWlnaHQ6ICdzYWgnLFxuICAvLyBzYWZlX2FyZWFfd2lkdGg6ICdzYXcnLFxuICBwaXhlbF9yYXRpbzogJ3ByJyxcbiAgLy8gc3RvcmFnZTogJ3M3JyxcbiAgLy8gaG9zdDogJ2hzJ1xufTtcblxudmFyIGlkTWFwID0ge1xuICB1dWlkOiAndWQnLFxuICB1bmlvbmlkOiAndW5kJyxcbiAgb3BlbmlkOiAnb2QnLFxuICBhbm9ueW1vdXNpZDogJ25kJyxcbiAgYWxpcGF5X2lkOiAnYWQnLFxuICBkZXZpY2VfaWQ6ICdkZCcsXG4gIHVzZXJpZDogJ3B1aWQnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgcmV0dXJuIHtcbiAgICBoOiBfbWFuZ2xlSGVhZGVyKGRhdGEuaGVhZGVyLCBoZWFkZXJNYXApLFxuICAgIGE6IF9tYW5nbGVBbmFseXRpY3MoZGF0YS5hbmFseXRpY3MsIGFuYWx5dGljc01hcClcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIF9tYW5nbGVIZWFkZXIoaGVhZGVyLCBtYXApIHtcbiAgdmFyIHJlc3VsdCA9IF9tYW5nbGVPYmooaGVhZGVyLCBtYXApO1xuXG4gIGlmIChoZWFkZXIgJiYgaGVhZGVyLmlkX3RyYWNraW5nKSB7XG4gICAgcmVzdWx0W21hcC5pZF90cmFja2luZyB8fCAnaWRfdHJhY2tpbmcnXSA9IF9tYW5nbGVPYmooaGVhZGVyLmlkX3RyYWNraW5nLCBpZE1hcCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZnVuY3Rpb24gX21hbmdsZU9iaihvYmosIG1hcCkge1xuICB2YXIgcmVzdWx0ID0ge307XG5cbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChtYXBba2V5XSkge1xuICAgICAgcmVzdWx0W21hcFtrZXldXSA9IG9ialtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IG9ialtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiBfbWFuZ2xlQW5hbHl0aWNzKGFuYWx5dGljcywgbWFwKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBpZiAoYW5hbHl0aWNzKSB7XG4gICAgZm9yICh2YXIgcHJvcCBpbiBhbmFseXRpY3MpIHtcbiAgICAgIGlmIChhbmFseXRpY3NbcHJvcF0pIHtcbiAgICAgICAgcmVzdWx0W21hcFtwcm9wXV0gPSBhbmFseXRpY3NbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9tYW5nbGVfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gMjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGNhY2hlID0gcmVxdWlyZSgnLi9jYWNoZScpO1xudmFyIGpzb25VdGlsID0gcmVxdWlyZSgnLi9qc29uVXRpbCcpO1xudmFyIGJhc2U2NCA9IHJlcXVpcmUoJy4vYmFzZTY0Jyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxuZnVuY3Rpb24gSW1wcmludE1hbmFnZXIoKSB7XG4gIHZhciBfaW1wcmludCA9ICcnO1xuICB2YXIgdCA9IHRoaXM7XG4gIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGltcHJpbnQpIHtcbiAgICBfaW1wcmludCA9IGltcHJpbnQ7XG4gIH07XG5cbiAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9pbXByaW50O1xuICB9O1xuICB0aGlzLmdldEltcE9iaiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ganNvblV0aWwucGFyc2UoYmFzZTY0LmRlY29kZShfaW1wcmludCkpO1xuICB9O1xuICB0aGlzLmdldEl0ZW0gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGltcG9iaiA9IHQuZ2V0SW1wT2JqKCk7XG4gICAgcmV0dXJuIGltcG9iaiA/IGltcG9ialtuYW1lXSB8fCBcIlwiIDogXCJcIjtcbiAgfTtcblxuICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgX2ltcHJpbnQgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5JTVBSSU5UKTtcbiAgfTtcblxuICB0aGlzLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKF9pbXByaW50KSB7XG4gICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5JTVBSSU5ULCBfaW1wcmludCk7XG4gICAgfVxuICB9O1xufVxudmFyIGltcHJpbnRNYW5hZ2VyID0gbmV3IEltcHJpbnRNYW5hZ2VyKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gaW1wcmludE1hbmFnZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vaW1wcmludE1hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG52YXIgYjY0Y2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG52YXIgYjY0dGFiID0gKGZ1bmN0aW9uIChiaW4pIHtcbiAgdmFyIHQgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBiaW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB0W2Jpbi5jaGFyQXQoaSldID0gaTtcbiAgcmV0dXJuIHQ7XG59KShiNjRjaGFycyk7XG52YXIgZnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcbnZhciBjYl91dG9iID0gZnVuY3Rpb24gKGMpIHtcbiAgdmFyIGNjO1xuICBpZiAoYy5sZW5ndGggPCAyKSB7XG4gICAgY2MgPSBjLmNoYXJDb2RlQXQoMCk7XG4gICAgcmV0dXJuIGNjIDwgMTI4ID8gYyA6IGNjIDwgMjA0OCA/IGZyb21DaGFyQ29kZSgxOTIgfCBjYyA+Pj4gNikgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgJiA2MykgOiBmcm9tQ2hhckNvZGUoMjI0IHwgY2MgPj4+IDEyICYgMTUpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiA2ICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpO1xuICB9IGVsc2Uge1xuICAgIGNjID0gNjU1MzYgKyAoYy5jaGFyQ29kZUF0KDApIC0gNTUyOTYpICogMTAyNCArIChjLmNoYXJDb2RlQXQoMSkgLSA1NjMyMCk7XG4gICAgcmV0dXJuIGZyb21DaGFyQ29kZSgyNDAgfCBjYyA+Pj4gMTggJiA3KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gMTIgJiA2MykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDYgJiA2MykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgJiA2Myk7XG4gIH1cbn07XG52YXIgcmVfdXRvYiA9IC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZGXXxbXlxceDAwLVxceDdGXS9nO1xudmFyIHV0b2IgPSBmdW5jdGlvbiAodSkge1xuICByZXR1cm4gdS5yZXBsYWNlKHJlX3V0b2IsIGNiX3V0b2IpO1xufTtcbnZhciBjYl9lbmNvZGUgPSBmdW5jdGlvbiAoY2NjKSB7XG4gIHZhciBwYWRsZW4gPSBbMCwgMiwgMV1bY2NjLmxlbmd0aCAlIDNdLFxuICAgIG9yZCA9IGNjYy5jaGFyQ29kZUF0KDApIDw8IDE2IHwgKGNjYy5sZW5ndGggPiAxID8gY2NjLmNoYXJDb2RlQXQoMSkgOiAwKSA8PCA4IHwgKGNjYy5sZW5ndGggPiAyID8gY2NjLmNoYXJDb2RlQXQoMikgOiAwKSxcbiAgICBjaGFycyA9IFtiNjRjaGFycy5jaGFyQXQob3JkID4+PiAxOCksIGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDEyICYgNjMpLCBwYWRsZW4gPj0gMiA/ICc9JyA6IGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDYgJiA2MyksIHBhZGxlbiA+PSAxID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCAmIDYzKV07XG4gIHJldHVybiBjaGFycy5qb2luKCcnKTtcbn07XG52YXIgYnRvYSA9IGZ1bmN0aW9uIChiKSB7XG4gIHJldHVybiBiLnJlcGxhY2UoL1tcXHNcXFNdezEsM30vZywgY2JfZW5jb2RlKTtcbn07XG52YXIgX2VuY29kZSA9IGZ1bmN0aW9uICh1KSB7XG4gIHJldHVybiBidG9hKHV0b2IodSkpO1xufTtcbnZhciBlbmNvZGUgPSBmdW5jdGlvbiAodSwgdXJpc2FmZSkge1xuICByZXR1cm4gIXVyaXNhZmUgPyBfZW5jb2RlKFN0cmluZyh1KSkgOiBfZW5jb2RlKFN0cmluZyh1KSkucmVwbGFjZSgvWytcXC9dL2csIGZ1bmN0aW9uIChtMCkge1xuICAgIHJldHVybiBtMCA9PSAnKycgPyAnLScgOiAnXyc7XG4gIH0pLnJlcGxhY2UoL1xcPS9nLCAnJyk7XG59O1xuLy8gdmFyIGVuY29kZVVSSSA9IGZ1bmN0aW9uICh1KSB7XG4vLyAgIHJldHVybiBlbmNvZGUodSwgdHJ1ZSk7XG4vLyB9O1xudmFyIHJlX2J0b3UgPSBuZXcgUmVnRXhwKFsnW8OALcOfXVvCgC3Cv10nLCAnW8OgLcOvXVvCgC3Cv117Mn0nLCAnW8OwLcO3XVvCgC3Cv117M30nXS5qb2luKCd8JyksICdnJyk7XG52YXIgY2JfYnRvdSA9IGZ1bmN0aW9uIChjY2NjKSB7XG4gIHN3aXRjaCAoY2NjYy5sZW5ndGgpIHtcbiAgY2FzZSA0OlxuICAgIHZhciBjcCA9ICg3ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxOCB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMikpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgzKSwgb2Zmc2V0ID0gY3AgLSA2NTUzNjtcbiAgICByZXR1cm4gZnJvbUNoYXJDb2RlKChvZmZzZXQgPj4+IDEwKSArIDU1Mjk2KSArIGZyb21DaGFyQ29kZSgob2Zmc2V0ICYgMTAyMykgKyA1NjMyMCk7XG4gIGNhc2UgMzpcbiAgICByZXR1cm4gZnJvbUNoYXJDb2RlKCgxNSAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSk7XG4gIGRlZmF1bHQ6XG4gICAgcmV0dXJuIGZyb21DaGFyQ29kZSgoMzEgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSk7XG4gIH1cbn07XG52YXIgYnRvdSA9IGZ1bmN0aW9uIChiKSB7XG4gIHJldHVybiBiLnJlcGxhY2UocmVfYnRvdSwgY2JfYnRvdSk7XG59O1xudmFyIGNiX2RlY29kZSA9IGZ1bmN0aW9uIChjY2NjKSB7XG4gIHZhciBsZW4gPSBjY2NjLmxlbmd0aCxcbiAgICBwYWRsZW4gPSBsZW4gJSA0LFxuICAgIG4gPSAobGVuID4gMCA/IGI2NHRhYltjY2NjLmNoYXJBdCgwKV0gPDwgMTggOiAwKSB8IChsZW4gPiAxID8gYjY0dGFiW2NjY2MuY2hhckF0KDEpXSA8PCAxMiA6IDApIHwgKGxlbiA+IDIgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMildIDw8IDYgOiAwKSB8IChsZW4gPiAzID8gYjY0dGFiW2NjY2MuY2hhckF0KDMpXSA6IDApLFxuICAgIGNoYXJzID0gW2Zyb21DaGFyQ29kZShuID4+PiAxNiksIGZyb21DaGFyQ29kZShuID4+PiA4ICYgMjU1KSwgZnJvbUNoYXJDb2RlKG4gJiAyNTUpXTtcbiAgY2hhcnMubGVuZ3RoIC09IFswLCAwLCAyLCAxXVtwYWRsZW5dO1xuICByZXR1cm4gY2hhcnMuam9pbignJyk7XG59O1xudmFyIGF0b2IgPSBmdW5jdGlvbiAoYSkge1xuICByZXR1cm4gYS5yZXBsYWNlKC9bXFxzXFxTXXsxLDR9L2csIGNiX2RlY29kZSk7XG59O1xudmFyIF9kZWNvZGUgPSBmdW5jdGlvbiAoYSkge1xuICByZXR1cm4gYnRvdShhdG9iKGEpKTtcbn07XG52YXIgZGVjb2RlID0gZnVuY3Rpb24gKGEpIHtcbiAgcmV0dXJuIF9kZWNvZGUoU3RyaW5nKGEpLnJlcGxhY2UoL1stX10vZywgZnVuY3Rpb24gKG0wKSB7XG4gICAgcmV0dXJuIG0wID09ICctJyA/ICcrJyA6ICcvJztcbiAgfSkucmVwbGFjZSgvW15BLVphLXowLTlcXCtcXC9dL2csICcnKSk7XG59O1xuXG5leHBvcnRzLmVuY29kZSA9IGVuY29kZTtcbmV4cG9ydHMuZGVjb2RlID0gZGVjb2RlO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL2Jhc2U2NC5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1heENvdW50KSB7XG4gIHZhciBfbWF4Q291bnQgPSBtYXhDb3VudDtcbiAgdmFyIF9pdGVtcyA9IFtdO1xuXG4gIHRoaXMuZW5xdWV1ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKHR5cGVvZiBfbWF4Q291bnQgPT09ICdudW1iZXInICYmIHRoaXMuc2l6ZSgpID49IF9tYXhDb3VudCkge1xuICAgICAgdGhpcy5kZXF1ZXVlKCk7XG4gICAgfVxuXG4gICAgX2l0ZW1zLnB1c2goaXRlbSk7XG4gIH07XG5cbiAgdGhpcy5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXMuc2hpZnQoKTtcbiAgfTtcblxuICB0aGlzLmZyb250ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXNbMF07XG4gIH07XG5cbiAgdGhpcy5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXMubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgX2l0ZW1zLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgdGhpcy5zaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXMubGVuZ3RoO1xuICB9O1xuXG4gIHRoaXMuaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9pdGVtcztcbiAgfTtcblxuICB0aGlzLnByaW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHVsb2coKS52KCctLS1xdWV1ZTogJywgX2l0ZW1zLnRvU3RyaW5nKCkpO1xuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9xdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5hc3NpZ24gPSByZXF1aXJlKCcuL2Fzc2lnbicpO1xuXG4vKipcbiAqIOeUn+aIkOS4gOS4queUqOS6jumBv+WFjee8k+WtmOeahOmaj+acuuaVsFxuICog5Li65LqG5YeP5bCRIHVybCDplb/luqbvvIzov5nkuKrpmo/mnLrmlbDmja7nmoTplb/luqblrprkuLogNyDkvY3vvIxcbiAqIOS4uuS6huWHj+WwkeeisOaSnu+8jOS9v+eUqCAxNiDov5vliLbmlbDlrZdcbiAqXG4gKiAyNjg0MzU0NTYgPSAyIF4gMjggPSAweGZmZmZmZmYgKyAxXG4gKi9cbmV4cG9ydHMubWFrZUNhY2hlTnVtID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjY4NDM1NDU2KS50b1N0cmluZygxNik7XG59O1xuXG4vKipcbiAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbku6XlrZfnrKbkuLIgczIg5byA5aS0XG4gKiBAcGFyYW0gczEge1N0cmluZ31cbiAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmlzU3RhcnRXaXRoID0gZnVuY3Rpb24oczEsIHMyKSB7XG4gIHJldHVybiBzMS5pbmRleE9mKHMyKSA9PT0gMDtcbn07XG4vKipcbiAqIOWIpOaWreWtl+espuS4siBzMSDmmK/mu57ku6XlrZfnrKbkuLIgczIg57uT5bC+XG4gKiBAcGFyYW0gczEge1N0cmluZ31cbiAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmlzRW5kV2l0aCA9IGZ1bmN0aW9uKHMxLCBzMikge1xuICB2YXIgbDEgPSBzMS5sZW5ndGgsIGwyID0gczIubGVuZ3RoO1xuICByZXR1cm4gbDEgPj0gbDIgJiYgczEuaW5kZXhPZihzMikgPT0gKGwxIC0gbDIpO1xufTtcblxuZXhwb3J0cy5hbnkgPSBmdW5jdGlvbihhcnIsIGZuKSB7XG4gIHZhciBpO1xuICB2YXIgbCA9IGFyci5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoZm4oYXJyW2ldKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydHMuaXNOdW1iZXIgPSBmdW5jdGlvbih2KSB7XG4gIHJldHVybiB0eXBlb2YgdiA9PT0gJ251bWJlcic7XG59O1xuXG5leHBvcnRzLmlzTmFOID0gZnVuY3Rpb24odikge1xuICBpZihpc05hTikge1xuICAgIHJldHVybiBpc05hTih2KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdiAhPT0gdjtcbiAgfVxufTtcblxuLyoqXG4gKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5ZCm5YyF5ZCr5a2X56ym5LiyIHMyXG4gKiBAcGFyYW0gczEge1N0cmluZ31cbiAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmlzQ29udGFpbiA9IGZ1bmN0aW9uIChzMSwgczIpIHtcbiAgcmV0dXJuIHMxLmluZGV4T2YoczIpID4gLTE7XG59O1xuXG4vKipcbiAqIOWFi+mahuS4gOS4qm9iamVjdFxuICovXG52YXIgY2xvbmVEZWVwID0gZnVuY3Rpb24ob2JqKSB7XG4gIHZhciBzdHI7XG4gIHZhciBuZXdvYmogPSBvYmouY29uc3RydWN0b3IgPT09IEFycmF5ID8gW10gOiB7fTtcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2UgaWYgKEpTT04gJiYgSlNPTi5wYXJzZSkge1xuICAgIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7IC8v57O75YiX5YyW5a+56LGhXG4gICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3b2JqO1xufTtcblxuZXhwb3J0cy5jbG9uZURlZXAgPSBjbG9uZURlZXA7XG5cbi8qKlxuICog6I635Y+WdXJs5Y+C5pWwLOS7hemZkHdlYuOAgWg1XG4gKi9cbnZhciBnZXRVcmxQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciByZWdleCA9IC9bPyZdKFtePSNdKyk9KFteJiNdKikvZztcbiAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICB2YXIgcGFyYW1zID0ge307XG4gIHZhciBtYXRjaDtcbiAgd2hpbGUgKG1hdGNoID0gcmVnZXguZXhlYyh1cmwpKSB7XG4gICAgcGFyYW1zW21hdGNoWzFdXSA9IG1hdGNoWzJdO1xuICB9XG4gIHJldHVybiBwYXJhbXM7XG59O1xuXG5leHBvcnRzLmdldFVybFBhcmFtcyA9IGdldFVybFBhcmFtcztcblxuLyoqXG4gKiDliKTmlq3nqbrlr7nosaFcbiAqL1xudmFyIGlzRW1wdHlPYmplY3QgPSBmdW5jdGlvbihvKSB7XG4gIGlmKCFvKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG4gIGZvciAodmFyIGsgaW4gbykge1xuICAgIGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5leHBvcnRzLmlzRW1wdHlPYmplY3QgPSBpc0VtcHR5T2JqZWN0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxEYXNoLmpzXG4vLyBtb2R1bGUgaWQgPSAyOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbi8qKlxuICog5a+56LGhbWVyZ2VcbiAqICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRhcmdldE9iaiwgYXJnc09iaikge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdmFyIG5leHRTb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICBpZiAobmV4dFNvdXJjZSAhPT0gbnVsbCkgeyAvLyBTa2lwIG92ZXIgaWYgdW5kZWZpbmVkIG9yIG51bGxcbiAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIG5leHRTb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobmV4dFNvdXJjZSwgbmV4dEtleSkpIHtcbiAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRvO1xuICAgIH0odGFyZ2V0T2JqLCBhcmdzT2JqKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGFyZ2V0T2JqLCBhcmdzT2JqKTtcbiAgfVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9hc3NpZ24uanNcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG52YXIgY3VycmVudFBhdGggPSBcIlwiO1xudmFyIHBhZ2VPcHRpb25NYXAgPSB7fTtcblxuZnVuY3Rpb24gYnVpbGRQYXRoKHBhdGgsIHF1ZXJ5KSB7XG4gIGlmICghcGF0aCkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIHZhciBxcyA9IFtdO1xuICBmb3IgKHZhciBxIGluIHF1ZXJ5KSB7XG4gICAgcXMucHVzaChxICsgJz0nICsgcXVlcnlbcV0pO1xuICB9XG4gIHZhciBxc3MgPSBxcy5qb2luKCcmJyk7XG4gIHJldHVybiBxc3MgPyBwYXRoICsgJz8nICsgcXNzIDogcGF0aDtcbn07XG5cbmV4cG9ydHMuZ2V0Q3VycmVudFBhZ2VQYXRoID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBjdXJyZW50UGF0aDtcbn07XG5cbmV4cG9ydHMuc2V0Q3VycmVudFBhdGggPSBmdW5jdGlvbihwYXRoKSB7XG4gIGlmIChwYXRoKSB7XG4gICAgY3VycmVudFBhdGggPSBwYXRoO1xuICB9XG59O1xuXG5leHBvcnRzLmdldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgaWYgKHBhdGgpIHtcbiAgICByZXR1cm4gcGFnZU9wdGlvbk1hcFtwYXRoXTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZXRQYWdlUXVlcnkgPSBmdW5jdGlvbihwYXRoLCBxdWVyeSkge1xuICBpZiAocGF0aCkge1xuICAgIHBhZ2VPcHRpb25NYXBbcGF0aF0gPSBxdWVyeTtcbiAgfVxufTtcblxuZXhwb3J0cy5nZXRGdWxsUGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIGJ1aWxkUGF0aChjdXJyZW50UGF0aCwgcGFnZU9wdGlvbk1hcFtwYXRoXSk7XG59O1xuXG5leHBvcnRzLmdldFBhZ2VOYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG1ldGEgPSBhcGx1cy5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpO1xuICB2YXIgcmVhbFBhdGggPSBwYXRoIHx8IGN1cnJlbnRQYXRoO1xuICB0cnkge1xuICAgIC8vIOWvueS6juWKqOaAgei3r+eUse+8jOaUr+aMgeeUqOaIt+S8oOWFpeato+WImei/m+ihjOWMuemFjVxuICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YSkge1xuICAgICAgICBpZiAoa2V5ID09PSByZWFsUGF0aCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2UgaWYgKG1ldGFba2V5XSAmJiBtZXRhW2tleV0ucmVnUnVsZSkge1xuICAgICAgICAgIHJlYWxQYXRoID0gbWV0YVtrZXldLnJlZ1J1bGUudGVzdChwYXRoKSA/IGtleSA6IHJlYWxQYXRoO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIC8vXG4gIH1cbiAgcmV0dXJuIG1ldGFbcmVhbFBhdGhdO1xuICAvLyBpZiAoIXBhdGgpIHtcbiAgLy8gICByZXR1cm4gbWV0YSAmJiBtZXRhW2N1cnJlbnRQYXRoXTtcbiAgLy8gfSBlbHNlIHtcbiAgLy8gICByZXR1cm4gbWV0YSAmJiBtZXRhW3BhdGhdO1xuICAvLyB9XG59O1xuXG5leHBvcnRzLmdldFBhZ2VDb2RlID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gKHRoaXMuZ2V0UGFnZU5hbWUocGF0aCkgfHwge30pLnBhZ2VOYW1lO1xufTtcblxuZXhwb3J0cy5nZXRWVFJlYWx0aW1lQ29kZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoY3VycmVudFBhdGgpIHtcbiAgICB2YXIgcXVlcnkgPSBwYWdlT3B0aW9uTWFwW2N1cnJlbnRQYXRoXSB8fCB7fTtcbiAgICB2YXIgcmVnRXhwID0gL15cXCR2dF8vO1xuICAgIHZhciBzY2VuZSA9IGRlY29kZVVSSUNvbXBvbmVudChxdWVyeS5zY2VuZSk7XG4gICAgcmV0dXJuIHNjZW5lICYmIHJlZ0V4cC50ZXN0KHNjZW5lKSAmJiBzY2VuZS5yZXBsYWNlKHJlZ0V4cCwgJycpO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2FwbHVzX3BsdWdpbl9taW5pL2xpYl9hdXRvX2NvbGxlY3QvaW5qZWN0X3BhZ2UuanNcbiAqIOiHquWKqOmHh+mbhuWwj+eoi+W6j+S/oeaBr+eahOaPkuS7tiAtIOmhtemdouazqOWFpVxuICpcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL3V0aWxzJyk7XG52YXIgZWFjaE1hcCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoTWFwJyk7XG52YXIgdW1VdGlscyA9IHJlcXVpcmUoJy4uL3BsdWdpbnMvbGliX3VtL3V0aWxzJyk7XG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuXG5mdW5jdGlvbiBnZXRVdG1QYXJhbXNPYmogKHEpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICB0cnkge1xuICAgIGVhY2hNYXAocSwgZnVuY3Rpb24gKGssIHYpIHtcbiAgICAgIC8vIOmBv+WFjeS4uuepuuaXtumHjeWGmWdsb2JhbHByb3BlcnR55YaF55qE5bGe5oCnXG4gICAgICBpZihrLmluZGV4T2YoJ3V0bV8nKSA9PT0gMCkge1xuICAgICAgICBvYmpba10gPSB2O1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7fVxuICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVyU2hhcmVBcHBNc2cgKG9wdCwgbmFtZSkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgcGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgdmFyIHJvdXRlID0gcGFnZS5yb3V0ZSB8fCBwYWdlLmlzIHx8ICcnO1xuICB2YXIgb3B0aW9ucyA9IHBhZ2Uub3B0aW9ucyB8fCB7fTtcbiAgdmFyIGxpbmtQYXJtYXMgPSBmb3JtYXQub2JqMnBhcmFtKG9wdGlvbnMsIHRydWUpO1xuICAvLyDmi7zmjqVjdXJyZW50UGFnZeeahHVybOS4jnF1ZXJ5XG4gIGlmKGxpbmtQYXJtYXMpIHtcbiAgICByb3V0ZSA9IHJvdXRlICsgJz8nICsgbGlua1Bhcm1hcztcbiAgfSBcbiAgaWYgKCFvcHQucXVlcnkpIHtcbiAgICBvcHQucXVlcnkgPSB7fTtcbiAgfVxuICBvcHQucXVlcnkuJCRfc2hhcmVfdWlkID0gY3R4LmFwbHVzLmdldE1ldGFJbmZvKCdfYW5vbnlfaWQnKSB8fCBjdHguYXBsdXMuX19FVEFHX19DTkFfX0lEX187XG4gIG9wdC5xdWVyeS4kJF91dG1fbWVkaXVtID0gMztcblxuICAvLyBvblNoYXJlQXBwTWVzc2FnZeayoeaciXJldHVybiDmiJYgb25TaGFyZVRpbWVsaW5l5pe277yM5YWl5Y+Cb3B055qEcGF0aOS4jnF1ZXJ55Li656m677yM5q2k5pe255SoY3VycmVudFBhZ2XnmoRwYXRo5ZKMb3B0aW9uc+WFnOW6lVxuICBvcHQucXVlcnkgPSB1bVV0aWxzLmFzc2lnbih7fSwgb3B0aW9ucywgb3B0LnF1ZXJ5KTtcbiAgdmFyIHBhdGggPSBvcHQucGF0aCB8fCByb3V0ZTtcblxuICB2YXIgYXBwZW5kUGFyYW1zID0gJyQkX3NoYXJlX3VpZD0nICsgb3B0LnF1ZXJ5LiQkX3NoYXJlX3VpZCArICcmJCRfdXRtX21lZGl1bT0zJztcbiBcbiAgaWYgKHBhdGguaW5kZXhPZignPycpID4gLTEpIHtcbiAgICBvcHQucGF0aCA9IHBhdGggKyAnJicgKyBhcHBlbmRQYXJhbXM7XG4gIH0gZWxzZSB7XG4gICAgb3B0LnBhdGggPSBwYXRoICsgJz8nICsgYXBwZW5kUGFyYW1zO1xuICB9XG4gIG9wdC5zdGF0dXMgPSAncmVhZHknO1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgIGFyZ3VtZW50czogW25hbWUsIG9wdF1cbiAgfSk7XG4gIHJldHVybiBvcHQ7XG59O1xuXG5mdW5jdGlvbiBvblB1bGxEb3duUmVmcmVzaCgpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIG9wdCA9IHtcbiAgICBzdGF0dXM6ICdyZWFkeSdcbiAgfTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICBhcmd1bWVudHM6IFsnb25QdWxsRG93blJlZnJlc2gnLCBvcHRdXG4gIH0pO1xufTtcblxuZnVuY3Rpb24gb25SZWFjaEJvdHRvbSgpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB2YXIgb3B0ID0ge1xuICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICBjb250ZXh0OiB0aGF0XG4gIH07XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgYXJndW1lbnRzOiBbJ29uUmVhY2hCb3R0b20nLCBvcHRdXG4gIH0pO1xufTtcblxuLy8g6aG16Z2i5Yqg6L29XG5mdW5jdGlvbiBvblBhZ2VMb2FkKHF1ZXJ5KSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgUGFnZU1hbmFnZXIuc2V0Q3VycmVudFBhdGgodGhpcy5yb3V0ZSk7XG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICBQYWdlTWFuYWdlci5zZXRQYWdlUXVlcnkodGhpcy5yb3V0ZSwgcXVlcnkpO1xuICAgIH1cbiAgICB1bG9nKCkuaSgnUGFnZSBvbkxvYWQ6ICcsIHRoaXMucm91dGUsIHF1ZXJ5KTtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdXRpbHMub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbigpe1xuICAgICAgLy8g5YWo5bGA5bGe5oCn6L+95YqgdXRt5Y+C5pWwXG4gICAgICBjdHguYXBsdXMuYXBwZW5kTWV0YUluZm8oYXBsdXNTdGF0aWMuR0xPQkFMX1BST1BFUlRZLCBnZXRVdG1QYXJhbXNPYmoocXVlcnkpKTtcbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgICBhcmd1bWVudHM6IFsnb25Mb2FkJywge1xuICAgICAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgICAgICBjb250ZXh0OiB0aGF0LFxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICAvLyDpobXpnaLliqDovb3lrozlkI7mt7flhaVzZXREYXRh77yM5pa55L6/6Ieq5Yqo5pud5YWJ44CB6Ieq5Yqo54K55Ye7562J5o+S5Lu25L2/55SoXG4gICAgICB2YXIgX2N1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgdXRpbHMucmVzZXRGbihfY3VycmVudFBhZ2UsICdzZXREYXRhJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnb25QYWdlRGF0YUNoYW5nZWQnLCB7XG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgY29udGV4dDogdGhhdFxuICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KCdvblBhZ2VMb2FkOiAnLCBlKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gb25QYWdlU2hvdygpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdHJ5IHtcbiAgICBQYWdlTWFuYWdlci5zZXRDdXJyZW50UGF0aCh0aGlzLnJvdXRlKTtcbiAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgICBhcmd1bWVudHM6IFsnb25TaG93Jywge1xuICAgICAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgICAgICBjb250ZXh0OiB0aGF0LFxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KCdvblBhZ2VTaG93OiAnLCBlKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gb25QYWdlUmVhZHkoKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICAgIGFyZ3VtZW50czogWydvblJlYWR5Jywge1xuICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG4gICAgICAgIGNvbnRleHQ6IHRoYXRcbiAgICAgIH1dXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB1bG9nKCkudygnb25QYWdlUmVhZHk6ICcsIGUpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBvblBhZ2VIaWRlKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB0cnkge1xuICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICAgIGFyZ3VtZW50czogWydvbkhpZGUnLCB7XG4gICAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgIH1dXG4gICAgfSk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KCdvblBhZ2VIaWRlOiAnLCBlKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gb25QYWdlVW5sb2FkKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB0cnkge1xuICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICAgIGFyZ3VtZW50czogWydvbkhpZGUnLCB7XG4gICAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgIH1dXG4gICAgfSk7XG4gIH0gY2F0Y2goZSl7XG4gICAgdWxvZygpLncoJ29uUGFnZVVubG9hZDogJywgZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG9uQXBsdXNDbGsoZSkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgIGFyZ3VtZW50czogWydvbkFwbHVzQ2xrJywge1xuICAgICAgc3RhdHVzOiAncmVhZHknLFxuICAgICAgZXZlbnQ6IGUsXG4gICAgICBjb250ZXh0OiB0aGlzXG4gICAgfV1cbiAgfSk7XG59O1xuXG4vL+inpuaRuOS6i+S7tlxuZnVuY3Rpb24gb25BcGx1c1RvdWNoKGUpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgIGFyZ3VtZW50czogWydvbkFwbHVzVG91Y2gnLCB7XG4gICAgICBzdGF0dXM6ICdyZWFkeScsXG4gICAgICBjb250ZXh0OiB0aGF0LFxuICAgICAgZXZlbnQ6IGUsXG4gICAgfV1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiByZXdyaXRlU2hhcmUob3B0KSB7XG4gIGlmIChvcHQub25TaGFyZUFwcE1lc3NhZ2UpIHtcbiAgICB2YXIgb2xkT25TaGFyZUFwcE1lc3NhZ2UgPSBvcHQub25TaGFyZUFwcE1lc3NhZ2U7XG4gICAgb3B0Lm9uU2hhcmVBcHBNZXNzYWdlID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgc2hhcmVSZXN1bHQgPSBvbGRPblNoYXJlQXBwTWVzc2FnZS5jYWxsKHRoaXMsIHJlcykgfHwge307XG4gICAgICByZXR1cm4gaGFuZGxlclNoYXJlQXBwTXNnKHNoYXJlUmVzdWx0LCAnb25TaGFyZUFwcE1lc3NhZ2UnKTtcbiAgICB9O1xuICB9XG59O1xuXG4vLyDliIbkuqvmnIvlj4vlnIhcbmZ1bmN0aW9uIHJld3JpdGVTaGFyZVRpbWVsaW5lKG9wdCkge1xuICBpZiAob3B0Lm9uU2hhcmVUaW1lbGluZSkge1xuICAgIHZhciBvbGRPblNoYXJlVGltZWxpbmUgPSBvcHQub25TaGFyZVRpbWVsaW5lO1xuICAgIG9wdC5vblNoYXJlVGltZWxpbmUgPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgIHZhciBzaGFyZVJlc3VsdCA9IG9sZE9uU2hhcmVUaW1lbGluZS5jYWxsKHRoaXMsIHJlcykgfHwge307XG4gICAgICByZXR1cm4gaGFuZGxlclNoYXJlQXBwTXNnKHNoYXJlUmVzdWx0LCAnb25TaGFyZVRpbWVsaW5lJyk7XG4gICAgfTtcbiAgfVxufTtcblxuZnVuY3Rpb24gaW5qZWN0UGFnZSgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgb2xkUGFnZSA9IFBhZ2U7XG4gICAgUGFnZSA9IGZ1bmN0aW9uKHBhZ2VPcHRpb25zKSB7XG4gICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblNob3cnLCBvblBhZ2VTaG93KTtcbiAgICAgIHV0aWxzLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uSGlkZScsIG9uUGFnZUhpZGUpO1xuICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25VbmxvYWQnLCBvblBhZ2VVbmxvYWQpO1xuICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25Mb2FkJywgb25QYWdlTG9hZCk7XG4gICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblJlYWR5Jywgb25QYWdlUmVhZHkpO1xuICAgICAgdXRpbHMucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25QdWxsRG93blJlZnJlc2gnLCBvblB1bGxEb3duUmVmcmVzaCk7XG4gICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblJlYWNoQm90dG9tJywgb25SZWFjaEJvdHRvbSk7XG4gICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkFwbHVzQ2xrJywgb25BcGx1c0Nsayk7XG4gICAgICB1dGlscy5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkFwbHVzVG91Y2gnLCBvbkFwbHVzVG91Y2gpO1xuICAgICAgcmV3cml0ZVNoYXJlKHBhZ2VPcHRpb25zKTtcbiAgICAgIHJld3JpdGVTaGFyZVRpbWVsaW5lKHBhZ2VPcHRpb25zKTtcbiAgICAgIG9sZFBhZ2UocGFnZU9wdGlvbnMpO1xuICAgIH07XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KCdQYWdlIOmHjeWGmeW8guW4uCcpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpbmplY3RDb21wb25lbnQoKSB7XG4gIHRyeSB7XG4gICAgdmFyIG9sZENvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICBDb21wb25lbnQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB0cnkge1xuICAgICAgICBvcHRpb25zLm1ldGhvZHMgPSBvcHRpb25zLm1ldGhvZHMgfHwge307XG4gICAgICAgIHZhciBtZXRob2RzID0gb3B0aW9ucy5tZXRob2RzO1xuICAgICAgICB1dGlscy5yZXdyaXRlRm4obWV0aG9kcywgJ29uU2hvdycsIG9uUGFnZVNob3cpO1xuICAgICAgICB1dGlscy5yZXdyaXRlRm4obWV0aG9kcywgJ29uSGlkZScsIG9uUGFnZUhpZGUpO1xuICAgICAgICB1dGlscy5yZXdyaXRlRm4obWV0aG9kcywgJ29uVW5sb2FkJywgb25QYWdlSGlkZSk7XG4gICAgICAgIHV0aWxzLnJld3JpdGVGbihtZXRob2RzLCAnb25Mb2FkJywgb25QYWdlTG9hZCk7XG4gICAgICAgIHJld3JpdGVTaGFyZShtZXRob2RzKTtcbiAgICAgICAgb2xkQ29tcG9uZW50KG9wdGlvbnMpO1xuICAgICAgfSBjYXRjaCh0KSB7XG4gICAgICAgIG9sZENvbXBvbmVudChvcHRpb25zKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ0NvbXBvbmVudCDph43lhpnlvILluLgnKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGluamVjdE1pZHdheSAobXBDdHgsIG5hbWUsIGNhbGxiYWNrKSB7XG4gIGlmIChbJ29iamVjdCcsICdmdW5jdGlvbiddLmluZGV4T2YodHlwZW9mIG1wQ3R4KSA+IC0xKSB7XG4gICAgY2FsbGJhY2soKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBjb25zb2xlLmxvZygndHlwZW9mICcgKyBuYW1lICsgJyBpcyBub3Qgb2JqZWN0IGNhbnQgd2F0Y2hFeHAuJyk7XG4gICAgdWxvZygpLncoJ3R5cGVvZiAnICsgbmFtZSArICcgaXMgbm90IG9iamVjdCBjYW50IHdhdGNoRXhwLicpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgaW5qZWN0TWlkd2F5KFBhZ2UsICdQYWdlJywgaW5qZWN0UGFnZSk7XG4gICAgICBpbmplY3RNaWR3YXkoQ29tcG9uZW50LCAnQ29tcG9uZW50JywgaW5qZWN0Q29tcG9uZW50KTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2luamVjdF9wYWdlX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSAzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5a+5bWFw6L+b6KGM6auY5oCn6IO955qE6YGN5Y6GXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWFwLCBjYWxsYmFjaykge1xuICBpZiAoT2JqZWN0ICYmIE9iamVjdC5rZXlzKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhtYXApO1xuICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgazEgPSBrZXlzW2ldO1xuICAgICAgY2FsbGJhY2soazEsIG1hcFtrMV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBrIGluIG1hcCkge1xuICAgICAgY2FsbGJhY2soaywgbWFwW2tdKTtcbiAgICB9XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9lYWNoTWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3V0aWwvZm9ybWF0LmpzXG4gKiDlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyB2YXIgdHJ5VG9EZWNvZGUgPSByZXF1aXJlKCcuL3RyeVRvRGVjb2RlJyk7XG5cbmV4cG9ydHMuYXJyMm9iaiA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIHJldCA9IHt9O1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBpO1xuICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBrID0gYXJyW2ldWzBdO1xuICAgIHYgPSBhcnJbaV1bMV07XG4gICAgcmV0W2tdID0gdjtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBwYXJhbSB0byBvYmplY3RcbiAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgb2JqZWN0IOagvOW8j++8jOWmgu+8mlxuICoge1xuICogICBhOiBcIjFcIixcbiAqICAgYjogXCIyXCIsXG4gKiAgIGM6IFwiM1wiXG4gKiB9XG4gKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMucGFyYW0yb2JqID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG4gIHZhciBvYmogPSB7fTtcbiAgaWYgKCFwYXJhbXMgfHwgdHlwZW9mIHBhcmFtcyAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIHZhciBhID0gcGFyYW1zLnNwbGl0KCcmJyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gYVtpXTtcbiAgICB2YXIgaW5kZXggPSBpdGVtLmluZGV4T2YoJz0nKTtcbiAgICB2YXIgZnJhZ21lbnQgPSBpdGVtLnNwbGl0KCc9Jyk7XG4gICAgdmFyIGxlbiA9IGl0ZW0ubGVuZ3RoO1xuICAgIGlmIChmcmFnbWVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgIG9ialtmcmFnbWVudFswXV0gPSBmcmFnbWVudFsxXSB8fCAnJzsgIFxuICAgIH0gZWxzZSBpZiAoaW5kZXggPiAwKSB7XG4gICAgICB2YXIga2V5ID0gaXRlbS5zbGljZSgwLCBpbmRleCk7XG4gICAgICB2YXIgdmFsdWUgPSBpdGVtLnNsaWNlKGluZGV4ICsgMSwgbGVuKSB8fCAnJztcbiAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtmcmFnbWVudFswXV0gPSAnJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5cbi8vIGNvbnNvbGUubG9nKCdUT0RPIGRlbGV0ZSBzX3BsYWluX29iaicpO1xudmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6JztcbmV4cG9ydHMuc19wbGFpbl9vYmogPSBzX3BsYWluX29iajtcblxuLyoqXG4gKiBhcnJheSB0byBwYXJhbVxuICog5bCG5LiA5Liq566A5Y2V55qE5pWw57uE6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI/vvIxcbiAqIOWFtuS4reaVsOe7hOS4ulxuICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuICog55qE5b2i5byP44CCXG4gKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuICogQHBhcmFtIGFyciB7QXJyYXl9XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGFycjJwYXJhbShhcnIsIHNraXBFbmNvZGUpIHtcbiAgdmFyIGEgPSBbXSxcbiAgICBrLFxuICAgIHYsXG4gICAgaSxcbiAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICB2YXIgaXNJblBsYW5PYmogPSBrLmluZGV4T2Yoc19wbGFpbl9vYmopID09PSAwO1xuICAgIHZhciBfdmFsdWUgPSBpc0luUGxhbk9iaiB8fCBza2lwRW5jb2RlID8gdiA6IGVuY29kZVVSSUNvbXBvbmVudCh2KTtcbiAgICBhLnB1c2goaXNJblBsYW5PYmogPyBfdmFsdWUgOiAoayArICc9JyArIF92YWx1ZSkpO1xuICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5leHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblxuLyoqXG4gKiBvYmplY3QgdG8gcGFyYW1cbiAqIOWwhuS4gOS4queugOWNleWvueixoei9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byPXG4gKiDlj4Lop4EgYXJyMnBhcmFtKCkg5pa55rOVXG4gKiBAcGFyYW0gb2JqIHtPYmplY3R9XG4gKiBAcGFyYW0gY29tbVRyYW5zbGF0ZSB7Qm9vbGVhbn0g5pmu6YCa6L2s5o2i5LiN5YGaaXNTdGFydFdpdGjmoKHpqoxcbiAqXG4gKi9cbmV4cG9ydHMub2JqMnBhcmFtID0gZnVuY3Rpb24gKG9iaiwgY29tbVRyYW5zbGF0ZSkge1xuICB2YXIgYSA9IFtdO1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBfdjtcbiAgZm9yIChrIGluIG9iailcbiAgLy8gVE9ETzog5a+55LqOZXhhcmdzIGtleSwgdmFsdWUg5Lmf5pivb2Jq57G75Z6L77yM6ZyA6KaB6YCS5b2S6Kej5p6QIEDpkrDmmK1cbiAgICBpZiAoayAmJiBvYmouaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqW2tdID09PSAnb2JqZWN0Jykge1xuICAgICAgICB2ID0gJycgKyB0aGlzLm9iajJwYXJhbShvYmpba10pO1xuICAgICAgICBfdiA9IHY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ID0gJycgKyBvYmpba107XG4gICAgICAgIF92ID0gayArICc9JyArIHY7XG4gICAgICB9XG4gICAgICBpZiAoIWNvbW1UcmFuc2xhdGUpIHtcbiAgICAgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogX3YpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYS5wdXNoKF92KTtcbiAgICAgIH1cbiAgICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5cbmV4cG9ydHMuZW5jb2RlR29rZXlWYWx1ZSA9IGZ1bmN0aW9uIChnb2tleSkge1xuICAvLyB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgLy8gLy8g5a+5Z29rZXnlhoXnmoR2YWx1Zee7n+S4gOWKoOS4gOWxgue8lueggVxuICAvLyBpZiAodHlwZW9mIGdva2V5ID09PSAnb2JqZWN0JyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgLy8gICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG4gIC8vICAgICBpZiAodHlwZW9mIGdva2V5W2tdID09PSAnc3RyaW5nJykge1xuICAvLyAgICAgICB0cnkge1xuICAvLyAgICAgICAgIGdva2V5W2tdID0gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChnb2tleVtrXSkpO1xuICAvLyAgICAgICB9IGNhdGNoIChlKSB7fVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gfVxuICByZXR1cm4gZ29rZXk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZm9ybWF0LmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xuLy8gdmFyIFVQREFURSA9ICd1cGRhdGUnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBwdXNoUXVldWU6ZnVuY3Rpb24obWV0aG9kTmFtZSwgYXJncyl7XG4gICAgICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXNfcXVldWUnKTtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy4nICsgbWV0aG9kTmFtZSxcbiAgICAgICAgYXJndW1lbnRzOiBhcmdzXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICAgIGVhY2goYXBsdXNTdGF0aWMub3BlbkFQSXMsIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGFwbHVzW3ZdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICAgIGVhY2goYXJndW1lbnRzLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IHYgPT09ICdlbnRlcicgPyAnX3NlbmRQVicgOiAnXycgKyB2O1xuXG4gICAgICAgICAgX3NlbGYucHVzaFF1ZXVlKG1ldGhvZE5hbWUsIGl0ZW1zKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvb3Blbl9hcGkuanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfbWluaS5qc1xuICpcbiAqIGNsaWVudEluZm8gZm9yIG1pbmlhcHBcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbWluaSA9IHJlcXVpcmUoJy4uL2xpYl91L3V0aWxzL21pbmknKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4uL2xpYl91L3V0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIOWIneWni+WMluaooeWdlywg5Liq5oCn5YyW6YOo5YiG5a2Q57G75Lit5a6e546wXG4gICAgICovXG4gICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyB9LFxuXG4gICAgX2dldE5ldHdvcmtUeXBlOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICAgIGlmIChjdHguZ2V0TmV0d29ya1R5cGUpIHtcbiAgICAgICAgY3R4LmdldE5ldHdvcmtUeXBlKHtcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhyZXMgPyByZXMubmV0d29ya1R5cGUgOiAnJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKCcnKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog6I635Y+W57O757uf5L+h5oGvIGh0dHBzOi8vZG9jcy5hbGlwYXkuY29tL21pbmkvYXBpL3N5c3RlbS1pbmZvXG4gICAgICog5omL5py65Z6L5Y+344CB5bGP5bmV5YiG6L6o546H44CB57O757uf54mI5pys562J5L+h5oGvXG4gICAgICovXG4gICAgX2dldFN5c3RlbUluZm86IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHZhciBlbXB0eU9iaiA9IHt9O1xuICAgICAgdmFyIHN5c0luZm8gPSBfc2VsZi5TWVNURU1fSU5GTyB8fCB7fTtcbiAgICAgIGlmIChzeXNJbmZvICYmIHN5c0luZm8udmVyc2lvbikge1xuICAgICAgICBjYWxsYmFjayhfc2VsZi5TWVNURU1fSU5GTyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG1pbmkuZ2V0Q29udGV4dCgpLmdldFN5c3RlbUluZm8oe1xuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMudmVyc2lvbikge1xuICAgICAgICAgICAgICAgIF9zZWxmLl9nZXROZXR3b3JrVHlwZShmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgcmVzLm5ldHdvcmtUeXBlID0gbjtcbiAgICAgICAgICAgICAgICAgIF9zZWxmLlNZU1RFTV9JTkZPID0gcmVzO1xuICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfc2VsZi5fZ2V0TmV0d29ya1R5cGUoZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgIGVtcHR5T2JqLm5ldHdvcmtUeXBlID0gbjtcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVtcHR5T2JqKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY2FsbGJhY2soZW1wdHlPYmopO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIF9nZXRBY2NvdW50SW5mb1N5bmM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBpbmZvID0ge307XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgICAgIGlmIChjdHguZ2V0QWNjb3VudEluZm9TeW5jICYmIGN0eC5jYW5JVXNlKCdnZXRBY2NvdW50SW5mb1N5bmMnKSkge1xuICAgICAgICAgIC8vIOW+ruS/oVxuICAgICAgICAgIHZhciBhY2NvdW50SW5mbyA9IGN0eC5nZXRBY2NvdW50SW5mb1N5bmMoKTtcbiAgICAgICAgICB2YXIgbWluaVByb2dyYW0gPSBhY2NvdW50SW5mby5taW5pUHJvZ3JhbSB8fCB7fTtcbiAgICAgICAgICB2YXIgcGx1Z2luID0gYWNjb3VudEluZm8ucGx1Z2luIHx8IHt9O1xuICAgICAgICAgIGluZm8uYXBwSWQgPSBtaW5pUHJvZ3JhbS5hcHBJZDsgIC8vIOWwj+eoi+W6jyBhcHBJZFxuICAgICAgICAgIGluZm8uYXBwVmVyc2lvbiA9IG1pbmlQcm9ncmFtLnZlcnNpb24gfHwgbWluaVByb2dyYW0uZW52VmVyc2lvbjsgIC8vIOWwj+eoi+W6jyBhcHBWZXJzaW9uXG4gICAgICAgICAgaW5mby5wbHVnaW5BcHBJZCA9IHBsdWdpbi5hcHBJZDsgLy8g5o+S5Lu2IGFwcElkXG4gICAgICAgICAgaW5mby5wbHVnaW5BcHBWZXJzaW9uID0gcGx1Z2luLnZlcnNpb247IC8vIOaPkuS7tiBhcHBWZXJzaW9uICBcbiAgICAgICAgfSBlbHNlIGlmIChjdHguZ2V0QXBwSWRTeW5jICYmIGN0eC5jYW5JVXNlKCdnZXRBcHBJZFN5bmMnKSkge1xuICAgICAgICAgIHZhciBhcHBJbmZvID0gY3R4LmdldEFwcElkU3luYygpIHx8IHt9O1xuICAgICAgICAgIGluZm8uYXBwSWQgPSBhcHBJbmZvLmFwcElkIHx8ICcnO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHdvcmtub1xuICAgICAqICAgMS4gY29va2llLmdldENvb2tpZSgnd29ya25vJylcbiAgICAgKiAgIDIuIGNvb2tpZS5nZXRDb29raWUoJ2VtcGxJZCcpXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8fCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uIChzdGF0ZSwgY2IpIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICAvLyBjb25zb2xlLmxvZygnVE9ETyBnZXRTeXN0ZW1JbmZvJyk7XG4gICAgICB0aGlzLl9nZXRTeXN0ZW1JbmZvKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgLy8g5pSv5LuY5a6d5bCP56iL5bqP5paH5qGjICBzeXN0ZW0t57O757uf54mI5pysIHBsYXRmb3JtLeezu+e7n+WQjVxuICAgICAgICByZXMudXNlckFnZW50ID0gJy0nO1xuICAgICAgICByZXMub3MgPSByZXMucGxhdGZvcm0gPyByZXMucGxhdGZvcm0udG9Mb2NhbGVVcHBlckNhc2UoKSA6ICcnO1xuICAgICAgICByZXMub3NfdmVyc2lvbiA9IHJlcy5zeXN0ZW0gPyByZXMuc3lzdGVtIDogJyc7XG4gICAgICAgIHJlcy5hY2Nlc3MgPSByZXMuYnJhbmQgPyByZXMuYnJhbmQgOiAnJztcbiAgICAgICAgdmFyIGhvc3QgPSAnJztcbiAgICAgICAgaWYocmVzLmhvc3QgJiYgKHR5cGVvZiByZXMuaG9zdC5lbnYgPT09ICdzdHJpbmcnKSl7XG4gICAgICAgICAgaG9zdCA9IHJlcy5ob3N0LmVudjtcbiAgICAgICAgfVxuICAgICAgICByZXMuaG9zdCA9IGhvc3Q7XG5cbiAgICAgICAgdmFyIGFjY291bnRJbmZvID0gX3NlbGYuX2dldEFjY291bnRJbmZvU3luYygpO1xuICAgICAgICB2YXIgcnMgPSBPYmplY3QuYXNzaWduKHt9LCByZXMsIGFjY291bnRJbmZvKTtcblxuICAgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgICAgYXBsdXMuX2FwbHVzX2NsaWVudCA9IHJzO1xuICAgICAgICBjYigpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gMjAwMDtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG52YXIgUHViU3ViID0gcmVxdWlyZSgnQGNvcmUvUHViU3ViJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgLy8g5L+d6K+B5Y+q5Lya5pyJ5LiA5LiqcHVic3Vi6L+Q6KGMXG4gICAgICBpZiAoYXBsdXMuYXBsdXNfcHVic3ViKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGFwbHVzLmFwbHVzX3B1YnN1YuaYr+S4gOS4quebkeWQrOiAhe+8jOWcqOaPkuS7tuWMluWGhemDqOS8mueUqOWIsOS7lu+8jOacieaVsOaNruWPmOWMluWwhuS8muWPkeWwhOebuOW6lOeahGRhdGFjaGFuZ2Xkuovku7ZcbiAgICAgIGFwbHVzLmFwbHVzX3B1YnN1YiA9IFB1YlN1Yi5jcmVhdGUoKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbWVzc2FnZXIvcHVic3ViX21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzXG4gKiDmtojmga/orqLpmIXmqKHlnotcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcblxudmFyIGdldEFyZ3MgPSBmdW5jdGlvbihhcmdzKSB7XG4gIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgdmFyIF9hcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuICBmb3IgKHZhciBqID0gMTsgaiA8IGxlbjsgaisrKSB7XG4gICAgX2FyZ3NbaiAtIDFdID0gYXJnc1tqXTtcbiAgfVxuICByZXR1cm4gX2FyZ3M7XG59O1xuXG52YXIgUHViU3ViID0gQmFzZS5leHRlbmQoe1xuICAvKipcbiAgICog5a+5Zm7ov5vooYzmlq3oqIDvvIzkuI3mmK/igJhmdW5jdGlvbuKAmeexu+Wei+aKpemUme+8jOWQpuWImei/lOWbnmZuXG4gICAqL1xuICBjYWxsYWJsZTogZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGZuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICByZXR1cm4gZm47XG4gIH0sXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBuZXcgdGhpcygpO1xuICAgIC8vIOe7keWumuivpeWunuS+i+eahOWxnuaAp1xuICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICAgIGluc3RhbmNlW25hbWVdID0gcHJvcHNbbmFtZV07XG4gICAgfVxuXG4gICAgaW5zdGFuY2UuaGFuZGxlcnMgPSBbXTtcbiAgICBpbnN0YW5jZS5wdWJzID0ge307XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9LFxuXG4gIHNldEhhbmRsZXJzOiBmdW5jdGlvbihoYW5kbGVycykge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBoYW5kbGVycztcbiAgfSxcblxuICAvKipcbiAgICog6K6i6ZiF5Y+l5p+E5Li64oCcZVR5cGXigJ3nmoTmtojmga/vvIzlvZPmnInmtojmga/ov4fmnaXmiafooYzlm57osIPlh73mlbDvvJrigJxo4oCdXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4RcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaCDorqLpmIXnmoTmtojmga/lm57osIPlh73mlbBcbiAgICogQHJldHVybiBjb250ZXh0XG4gICAqL1xuICBzdWJzY3JpYmU6IGZ1bmN0aW9uKGVUeXBlLCBoKXtcbiAgICAvLyDlr7nlm57osIPlh73mlbDov5vooYzmlq3oqIBcbiAgICB0aGlzLmNhbGxhYmxlKGgpO1xuXG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgcHVicyA9IF9zZWxmLnB1YnMgfHwge307XG5cbiAgICB2YXIgYXJyID0gcHVic1tlVHlwZV0gfHwgW107XG4gICAgaWYgKGFycikge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIF9hcmdzID0gYXJyW2ldKCk7XG4gICAgICAgIGguYXBwbHkoX3NlbGYsIF9hcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGhhbmRsZXJzID0gX3NlbGYuaGFuZGxlcnMgfHwgW107XG4gICAgaWYoIShlVHlwZSBpbiBoYW5kbGVycykpIHtcbiAgICAgIGhhbmRsZXJzW2VUeXBlXSA9IFtdO1xuICAgIH1cbiAgICBoYW5kbGVyc1tlVHlwZV0ucHVzaChoKTtcbiAgICBfc2VsZi5zZXRIYW5kbGVycyhoYW5kbGVycyk7XG4gICAgcmV0dXJuIF9zZWxmO1xuICB9LFxuXG4gIC8qKlxuICAgKiDlj5bmtojorqLpmIXvvIzlsIbkvJrlj5bmtojigJxlVHlwZeKAneWPpeafhOWvueW6lOeahOKAnGjigJ3lm57osIPlh73mlbDkuIvnmoTmiYDmnInorqLpmIVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuICAgKiBAcmV0dXJuIGNvbnRleHRcbiAgICovXG4gIHVuc3Vic2NyaWJlOiBmdW5jdGlvbihlVHlwZSwgaCkge1xuICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cbiAgICB0cnkge1xuICAgICAgdmFyIHMgPSB0aGlzLmhhbmRsZXJzW2VUeXBlXTtcbiAgICAgIGlmICghcykgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ29iamVjdCcgJiYgcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGhfc3RyID0gaC50b1N0cmluZygpO1xuICAgICAgICAgIHZhciBzX3N0ciA9IHNbaV0udG9TdHJpbmcoKTtcbiAgICAgICAgICBpZiAoaF9zdHIgPT09IHNfc3RyKSB7XG4gICAgICAgICAgICBzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVyc1tlVHlwZV0gPSBzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuaGFuZGxlcnNbZVR5cGVdO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOa2iOaBr+WIhuWPke+8jOWwhuS8muWIhuWPkeWIsOaJgOacieiuoumYhWVUeXBl5Y+l5p+E55qE6K6i6ZiF6ICFXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDliIblj5Hmtojmga/lj6Xmn4RcbiAgICovXG4gIHB1Ymxpc2g6IGZ1bmN0aW9uIChlVHlwZSkge1xuXG4gICAgdmFyIGFyZ3MgPSBnZXRBcmdzKGFyZ3VtZW50cyk7XG4gICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycyB8fCBbXTtcblxuICAgIHZhciBzaXplID0gaGFuZGxlcnNbZVR5cGVdID8gaGFuZGxlcnNbZVR5cGVdLmxlbmd0aCA6IDA7XG4gICAgaWYgKHNpemUgPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICB2YXIgZm4gPSBoYW5kbGVyc1tlVHlwZV1baV07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgY2FjaGVQdWJzOiBmdW5jdGlvbiAoZVR5cGUpIHtcbiAgICB2YXIgcHVicyA9IHRoaXMucHVicyB8fCB7fTtcbiAgICB2YXIgYXJncyA9IGdldEFyZ3MoYXJndW1lbnRzKTtcbiAgICBpZiAoIXB1YnNbZVR5cGVdKSB7XG4gICAgICBwdWJzW2VUeXBlXSA9IFtdO1xuICAgIH1cbiAgICBwdWJzW2VUeXBlXS5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBhcmdzO1xuICAgIH0pO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBQdWJTdWI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL1B1YlN1Yi5qc1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvY29yZS9CYXNlLmpzXG4gKiDln7rnsbvvvIzmj5DkvpvnsbvmiYDpnIDopoHnmoTln7rnoYDlsZ7mgKdcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG5cbi8vIOWfuuexu1xuZnVuY3Rpb24gQmFzZSgpIHt9XG5cbi8vIOWwhmV4dGVuZOWSjGNyZWF0Zee9ruS6jnByb3RvdHlwZeWvueixoeS4re+8jOS7peS+v+WtkOexu+e7p+aJv1xuQmFzZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24oKSB7fTtcbkJhc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge307XG5cbi8vIOS4uuS6huiDveWcqOWfuuexu+S4iuebtOaOpeS7pS5leHRlbmTnmoTmlrnlvI/ov5vooYzosIPnlKhcbkJhc2UuZXh0ZW5kID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgcmV0dXJuIHRoaXMucHJvdG90eXBlLmV4dGVuZC5jYWxsKHRoaXMsIHByb3BzKTtcbn07XG5cbkJhc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIC8qKlxuICAgKiBjcmVhdGXlrp7pmYXkuIrmmK/lr7luZXfnmoTlsIHoo4XvvJtcbiAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG4gICAqIHRoaXPljbPmjIflkJHosIPnlKjlvZPliY1jcmVhdGXnmoTmnoTpgKDlh73mlbDvvJtcbiAgICovXG4gIHZhciBpbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG4gIC8vIOe7keWumuivpeWunuS+i+eahOWxnuaAp1xuICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG4gICAgaW5zdGFuY2VbbmFtZV0gPSBwcm9wc1tuYW1lXTtcbiAgfVxuICByZXR1cm4gaW5zdGFuY2U7XG59O1xuXG5CYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbihwcm9wcykge1xuICAvLyDmtL7nlJ/lh7rmnaXnmoTmlrDnmoTlrZDnsbtcbiAgdmFyIFN1YkJhc2UgPSBmdW5jdGlvbigpIHt9O1xuICB0cnkge1xuICAgIC8qKlxuICAgICAqIOe7p+aJv+eItuexu+eahOWxnuaAp+WSjOaWueazle+8jFxuICAgICAqIOW9k+eEtuWJjeaPkOaYr+eItuexu+eahOWxnuaAp+mDveaUvuWcqHByb3RvdHlwZeS4rVxuICAgICAqIOiAjOmdnuS4iumdomNyZWF0ZeaWueazleeahOKAnOWunuS+i+WxnuaAp+KAneS4rVxuICAgICAqL1xuICAgIGlmICghaXNGdW5jdGlvbihPYmplY3QuY3JlYXRlKSkge1xuICAgICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIGZ1bmN0aW9uIEYoKSB7fVxuICAgICAgICBGLnByb3RvdHlwZSA9IG87XG4gICAgICAgIHJldHVybiBuZXcgRigpO1xuICAgICAgfTtcbiAgICB9XG4gICAgU3ViQmFzZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHRoaXMucHJvdG90eXBlKTtcblxuICAgIC8vIOW5tuS4lOa3u+WKoOiHquW3seeahOaWueazleWSjOWxnuaAp1xuICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICAgIFN1YkJhc2UucHJvdG90eXBlW25hbWVdID0gcHJvcHNbbmFtZV07XG4gICAgfVxuICAgIFN1YkJhc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViQmFzZTtcblxuICAgIC8vIOmcgOimgeS7pS5leHRlbmTnmoTmlrnlvI/lkowuY3JlYXRl55qE5pa55byP6LCD55So77yaXG4gICAgU3ViQmFzZS5leHRlbmQgPSBTdWJCYXNlLnByb3RvdHlwZS5leHRlbmQ7XG4gICAgU3ViQmFzZS5jcmVhdGUgPSBTdWJCYXNlLnByb3RvdHlwZS5jcmVhdGU7XG4gIH0gY2F0Y2goZXJyKSB7XG4gICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhlcnIpO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBTdWJCYXNlO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2U7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL0Jhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDojrflj5bpobXpnaLkuIrnmoQgPG1ldGE+IOS4reS4jiBhcGx1cyDmiZPngrnnm7jlhbPnmoTlgLxcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcXVpcmUoJy4vbGliX21ldGEvbWFpbl9taW5pJykodGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9hcGx1c19tZXRhX2luamVjdF9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluLmpzXG4gKiBtZXRh6YWN572u5o+S5Lu277yM6KKrYXBp5o+S5Lu25L6d6LWWXG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtZXRhSW5mbyA9IHJlcXVpcmUoJy4vbWV0YUluZm9NaW5pJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwbHVzX2NvbmZpZykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIHZhciBfJCA9IChhcGx1cy5fJCA9IGFwbHVzLl8kIHx8IHt9KTsgLy8g5YaF6YOo5L2/55So55qE5Y+Y6YePXG4gIF8kLmlzX3Rlcm1pbmFsID0gdHJ1ZTtcbiAgXyQuc2VuZF9wdl9jb3VudCA9IDA7XG4gIC8vIF8kLnN0YXR1cyA9IFNUQVRVUztcbiAgLy8gXyQuc2NyaXB0X25hbWUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLnNjcmlwdF9uYW1lO1xuICBfJC5zcG0gPSB7XG4gICAgZGF0YToge31cbiAgfTtcbiAgXyQubWV0YV9pbmZvID0gbWV0YUluZm8ucUdldCgpIHx8IHt9O1xuICBhcGx1cy5nbG9iYWxDb25maWcgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnO1xuXG4gIGZvciAodmFyIGsgaW4gYXBsdXNfY29uZmlnLm1ldGFJbmZvKSB7XG4gICAgbWV0YUluZm8uc2V0TWV0YUluZm8oaywgYXBsdXNfY29uZmlnLm1ldGFJbmZvW2tdKTtcbiAgfVxuICBhcGx1cy5fJCA9IF8kO1xuXG4gIGFwbHVzLmlzSW50ZXJuYXRpb25hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tYWluX21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDojrflj5bpobXpnaLkuIrnmoQgPG1ldGE+IOS4reS4jiBhcGx1cyDmiZPngrnnm7jlhbPnmoTlgLxcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyB2YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcbnZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbi8vIHZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXG52YXIgaW5mbyA9IHt9O1xuXG52YXIgT0JKRUNUID0gJ29iamVjdCc7XG52YXIgU1RSSU5HID0gJ3N0cmluZyc7XG5cbi8qKlxuICogQHJldHVybnMge3t9fVxuICovXG52YXIgbGFzdF9pbmZvO1xuZnVuY3Rpb24gZ2V0SW5mbygpIHtcbiAgbGFzdF9pbmZvID0gaW5mbyB8fCB7fTtcbiAgcmV0dXJuIGluZm87XG59O1xuZXhwb3J0cy5nZXRJbmZvID0gZ2V0SW5mbztcblxuLy8g5aaC5p6c5pyJ57yT5a2Y77yM5L2/55So57yT5a2Y55qE5YC877yM5rKh5pyJ57yT5a2Y5YiZ5LuOIERPTSDkuK3or7vlj5ZcbmZ1bmN0aW9uIHFHZXQgKCkge1xuICByZXR1cm4gbGFzdF9pbmZvIHx8IGdldEluZm8oKTtcbn07XG5leHBvcnRzLnFHZXQgPSBxR2V0O1xuXG4vKipcbiAqIOWKqOaAgemFjee9rm1ldGFcbiAqIOWuuemUmeagoemqjOenu+akjeWIsGFwbHVz5Y+v6KeG5YyW5Z+L54K56aqM6K+B5bel5YW35YaFIDIwMTgtMDEtMTAgQOiwi+Wjq1xuICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtcbiAqIEBwYXJhbSB7T2JqZWN0fSB2XG4gKi9cbmZ1bmN0aW9uIHNldE1ldGFJbmZvIChrLCB2KSB7XG4gIGlmICghbGFzdF9pbmZvKSB7XG4gICAgbGFzdF9pbmZvID0ge307XG4gIH1cbiAgbGFzdF9pbmZvW2tdID0gdjtcbiAgcmV0dXJuIHRydWU7XG59O1xuZXhwb3J0cy5zZXRNZXRhSW5mbyA9IHNldE1ldGFJbmZvO1xuXG4vKipcbiAqIGdldCBtZXRhSW5mbyBieSBrZXlcbiAqIOWuuemUmeagoemqjOenu+akjeWIsGFwbHVz5Y+v6KeG5YyW5Z+L54K56aqM6K+B5bel5YW35YaFIDIwMTgtMDEtMTAgQOiwi+Wjq1xuICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9XG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbnZhciBnZXRNZXRhSW5mbyA9IGZ1bmN0aW9uKGspIHtcbiAgaWYgKCFsYXN0X2luZm8pIHtcbiAgICBsYXN0X2luZm8gPSB7fTtcbiAgfVxuICByZXR1cm4gbGFzdF9pbmZvW2tdIHx8ICcnO1xufTtcbmV4cG9ydHMuZ2V0TWV0YUluZm8gPSBnZXRNZXRhSW5mbztcblxuLyoqXG4gKiBUbyBhcHBlbmQgYG1ldGFgIHRhZyBpZiB0aGVyZSdzIG5vbmUgYXBsdXMgbWV0YS5cbiAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG4gKiAgLSBgT2JqZWN0LmFzc2lnbmAgY2FsbGVkIG9uIE9iamVjdCB2YWx1ZXMuXG4gKiAgQHBhcmFtIGtcbiAqICBAcGFyYW0gdlxuICovXG52YXIgYXBwZW5kTWV0YUluZm8gPSBmdW5jdGlvbiAoaywgdikge1xuICAvLyBjb25zb2xlLmxvZyhrLCB2KTtcbiAgaWYgKGsgJiYgdikge1xuICAgIC8vIGFwbHVzLXV0cGFyYW0gfHwgYXBsdXMtbmV4dHBhZ2UtdXRwYXJhbSB8fCBhcGx1cy1leGRhdGFcbiAgICB2YXIgcHJvY2Vzc09iamVjdCA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBuZXdfdmFsdWUgPSB0eXBlb2YgdiA9PT0gU1RSSU5HID8gSlNPTi5wYXJzZSh2KSA6IHY7XG4gICAgICAgIHRvU2V0TWV0YUluZm8oaywgT2JqZWN0LmFzc2lnbih7fSwgb2xkX3ZhbHVlLCBuZXdfdmFsdWUpKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgfTtcbiAgICAvLyBhcGx1cy1hdXRvLWV4cCB8fCBhcGx1cy1hdXRvLWNsa1xuICAgIHZhciBwcm9jZXNzQXJyYXkgPSBmdW5jdGlvbiAob2xkX3ZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuICAgICAgICB0b1NldE1ldGFJbmZvKGssIG9sZF92YWx1ZS5jb25jYXQobmV3X3ZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH07XG5cbiAgICB2YXIgcHJvY2Vzc09iaiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgICBwcm9jZXNzQXJyYXkodmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzc09iamVjdCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgdG9TZXRNZXRhSW5mbyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICBfc2V0TWV0YUluZm8oa2V5LCB2YWx1ZSwge1xuICAgICAgICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGZsYWc7XG4gICAgdmFyIF9vbGRWYWx1ZSA9IGdldE1ldGFJbmZvKGspO1xuICAgIGlmIChrID09PSAnYXBsdXMtZXhpbmZvJykge1xuICAgICAgdG9TZXRNZXRhSW5mbyhrLCBPYmplY3QuYXNzaWduKHt9LCBfb2xkVmFsdWUsIGZvcm1hdC5wYXJhbTJvYmoodikpKTtcbiAgICAgIGZsYWcgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoayA9PT0gJ2FwbHVzLXBhZ2UtcHJvcGVydGllcycpIHtcbiAgICAgIHZhciBwYWdlUHJvcGVydGllcyA9IHY7XG4gICAgICBpZiAoX29sZFZhbHVlKSB7XG4gICAgICAgIGZvciAodmFyIF9rIGluIF9vbGRWYWx1ZSkge1xuICAgICAgICAgIGlmICh2W19rXSkge1xuICAgICAgICAgICAgcGFnZVByb3BlcnRpZXNbX2tdID0gT2JqZWN0LmFzc2lnbih7fSwgX29sZFZhbHVlW19rXSwgdltfa10pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYWdlUHJvcGVydGllc1tfa10gPSBfb2xkVmFsdWVbX2tdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdG9TZXRNZXRhSW5mbyhrLCBwYWdlUHJvcGVydGllcyk7XG4gICAgICBmbGFnID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKF9vbGRWYWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiBfb2xkVmFsdWUgPT09IE9CSkVDVCkge1xuICAgICAgICBwcm9jZXNzT2JqKF9vbGRWYWx1ZSk7XG4gICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgdG1wX3BhcnNlID0gSlNPTi5wYXJzZShfb2xkVmFsdWUpO1xuICAgICAgICAgIGlmICh0eXBlb2YgdG1wX3BhcnNlID09PSBPQkpFQ1QpIHtcbiAgICAgICAgICAgIHByb2Nlc3NPYmoodG1wX3BhcnNlKTtcbiAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghZmxhZykge1xuICAgICAgdG9TZXRNZXRhSW5mbyhrLCB2KTtcbiAgICB9XG4gIH1cbn07XG5leHBvcnRzLmFwcGVuZE1ldGFJbmZvID0gYXBwZW5kTWV0YUluZm87XG5cbnZhciBfc2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoYXJnMSwgdmFsdWUpIHtcbiAgdmFyIGs7XG4gIHZhciB2O1xuICB2YXIgZGVmYXVsdE1vZGUgPSAnT1ZFUldSSVRFJztcbiAgdmFyIG1vZGUgPSBkZWZhdWx0TW9kZTtcbiAgaWYgKHR5cGVvZiBhcmcxID09PSAnb2JqZWN0Jykge1xuICAgIGsgPSBhcmcxLm1ldGFOYW1lO1xuICAgIHYgPSBhcmcxLm1ldGFWYWx1ZTtcbiAgICBtb2RlID0gYXJnMS5tb2RlIHx8IGRlZmF1bHRNb2RlO1xuICB9IGVsc2Uge1xuICAgIGsgPSBhcmcxO1xuICAgIHYgPSB2YWx1ZTtcbiAgfVxuICBpZiAobW9kZSA9PT0gZGVmYXVsdE1vZGUpIHtcbiAgICBpZiAoc2V0TWV0YUluZm8oaywgdikpIHtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICBfJC5tZXRhX2luZm8gPSBxR2V0KCk7XG4gICAgICB2YXIgcnMgPSB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcblxuICAgICAgdmFyIG1zZ3MgPSBbJ3NldE1ldGFJbmZvJywgaywgdiwge31dO1xuICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcbiAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG4gICAgICByZXR1cm4gcnM7XG4gICAgfSBcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYXBwZW5kTWV0YUluZm8oaywgdik7XG4gIH1cbn07XG5leHBvcnRzLl9zZXRNZXRhSW5mbyA9IF9zZXRNZXRhSW5mbztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9tZXRhL21ldGFJbmZvTWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnLi91dGlsR29sZGxvZycpO1xuXG52YXIgRk4gPSAnZnVuY3Rpb24nO1xuXG52YXIgZ2V0UHVic3ViID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgcHVic3ViID0gYXBsdXMuYXBsdXNfcHVic3ViIHx8IHt9O1xuICB2YXIgZmxhZyA9IHR5cGVvZiBwdWJzdWIucHVibGlzaCA9PT0gRk47XG4gIHJldHVybiBmbGFnID8gcHVic3ViIDogJyc7XG59O1xuXG4vKipcbiAqIOWIhuWPkea2iOaBr+W3peWFt+WHveaVsFxuICogQHBhcmFtcyB7QXJyYXl9IGFyZ3MgW2tleSwgbXNnVmFsdWUxLCBtc2dWYWx1ZTIsIG1zZ1ZhbHVlMywgbXNnVmFsdWVOLCAuLi5dXG4gKi9cbmV4cG9ydHMuZG9QdWJNc2cgPSBmdW5jdGlvbihhcmdzKSB7XG4gIHZhciBwdWJzdWIgPSBnZXRQdWJzdWIoKTtcbiAgaWYgKHB1YnN1YiAmJiB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOKSB7XG4gICAgcHVic3ViLnB1Ymxpc2guYXBwbHkocHVic3ViLCBhcmdzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBjYWNoZeW9k+WJjeeahOWIhuWPkeWHveaVsOeahOW3peWFt+WHveaVsFxuICogQHBhcmFtcyB7QXJyYXl9IGFyZ3MgW2tleSwgbXNnVmFsdWUxLCBtc2dWYWx1ZTIsIG1zZ1ZhbHVlMywgbXNnVmFsdWVOLCAuLi5dXG4gKi9cbmV4cG9ydHMuZG9DYWNoZVB1YnMgPSBmdW5jdGlvbihhcmdzKSB7XG4gIHZhciBwdWJzdWIgPSBnZXRQdWJzdWIoKTtcbiAgaWYgKHB1YnN1YiAmJiB0eXBlb2YgcHVic3ViLmNhY2hlUHVicyA9PT0gRk4pIHtcbiAgICBwdWJzdWIuY2FjaGVQdWJzLmFwcGx5KHB1YnN1YiwgYXJncyk7XG4gIH1cbn07XG5cbi8qKlxuICog6K6i6ZiF5raI5oGv5bel5YW35Ye95pWwXG4gKiBAcGFyYW1zIHtTdHJpbmd9IGtleVxuICogQHBhcmFtcyB7RnVuY3Rpb259IGNiKFsgbXNnVmFsdWUxLCBtc2dWYWx1ZTIsIG1zZ1ZhbHVlMywgbXNnVmFsdWVOLCAuLi5dKVxuICovXG5leHBvcnRzLmRvU3ViTXNnID0gZnVuY3Rpb24oa2V5LCBjYikge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5zdWJzY3JpYmUgPT09IEZOKSB7XG4gICAgcHVic3ViLnN1YnNjcmliZShrZXksIGNiKTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxQdWJzdWIuanNcbi8vIG1vZHVsZSBpZCA9IDQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9hdXRvX2Nsay9tYWluJykoKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl9jbGsuanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNvbGxlY3RfY2xrID0gcmVxdWlyZSgnLi9jb2xsZWN0X2NsaycpO1xuLy8gdmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgdmFyIGFwbHVzQ3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIGNsa19jb25maWcgPSBbXTtcblxuICB2YXIgaW5pdENsayA9IGZ1bmN0aW9uIChvcHQpIHtcbiAgICBjbGtfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJyk7XG4gICAgdmFyIHNwbUIgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuICAgIHZhciBlbGVtZW50c0dyb3VwcyA9IFtdO1xuICAgIGZ1bmN0aW9uIGVsZW1lbnRzUXVlcnlSZXN1bHRDYWxsYmFjayhlbGVtZW50cyxjb25maWcpe1xuICAgICAgaWYodXRpbEFycmF5LmlzQXJyYXkoZWxlbWVudHMpKXtcbiAgICAgICAgZWxlbWVudHNHcm91cHMucHVzaCh7XG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgICAgZWxlbWVudHM6IGVsZW1lbnRzXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJz09PT4gZWxlbWVudHMnLCBlbGVtZW50cywgZWxlbWVudHNHcm91cHMpXG4gICAgICBpZihlbGVtZW50c0dyb3Vwcy5sZW5ndGg9PT1jbGtfY29uZmlnLmxlbmd0aCl7XG4gICAgICAgIGNvbGxlY3RfY2xrLndhdGNoX2NsaWNrKG9wdC5ldmVudCwgZWxlbWVudHNHcm91cHMpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodXRpbEFycmF5LmlzQXJyYXkoY2xrX2NvbmZpZykpIHtcbiAgICAgIGNsa19jb25maWcuZm9yRWFjaChmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIGlmICghdXRpbERhc2guaXNTdGFydFdpdGgoY29uZmlnLmNzc1NlbGVjdG9yLCAnLicpKSB7XG4gICAgICAgICAgY29uZmlnLmNzc1NlbGVjdG9yID0gJy4nICsgY29uZmlnLmNzc1NlbGVjdG9yO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29uZmlnLnNwbUIpIHtcbiAgICAgICAgICBjb25maWcuc3BtQiA9IHNwbUI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVsZW1lbnRzID0gbWluaS5nZXRDb250ZXh0KCkuY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbChjb25maWcuY3NzU2VsZWN0b3IpO1xuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRzLmZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG4gICAgICAgICAgICByZWN0OiB0cnVlLFxuICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0OiB0cnVlXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKHJldCkge1xuICAgICAgICAgICAgZWxlbWVudHNRdWVyeVJlc3VsdENhbGxiYWNrKHJldCxjb25maWcpO1xuICAgICAgICAgIH0pLmV4ZWMoKTsgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8g5LiN5pSv5oyBZmllbGRz5pa55rOV55qE5Zy65pmv77yI5pSv5LuY5a6d5LiL77yM5pS555So5Z2Q5qCH77yJXG4gICAgICAgICAgZWxlbWVudHMuYm91bmRpbmdDbGllbnRSZWN0KCkuZXhlYyhmdW5jdGlvbiAocmV0KSB7XG4gICAgICAgICAgICBlbGVtZW50c1F1ZXJ5UmVzdWx0Q2FsbGJhY2socmV0LGNvbmZpZyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgXG4gIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICBjbGtfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJyk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG4gIC8vIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAvLyAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAvLyAgIGFyZ3VtZW50czogWydvblNob3cnLCBmdW5jdGlvbiAoKSB7XG4gIC8vICAgICAvLyBUT0RPXG4gIC8vICAgfV1cbiAgLy8gfSk7XG4gIC8vIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAvLyAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAvLyAgIGFyZ3VtZW50czogWydvbkhpZGUnLCBmdW5jdGlvbiAoKSB7XG4gIC8vICAgICAvLyBUT0RPXG4gIC8vICAgfV1cbiAgLy8gfSk7XG5cbiAgYXBsdXNDdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uQXBsdXNDbGsnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICBpbml0Q2xrKG9wdCk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG5cbiAgLy8gYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25VbmxvYWQnLCBmdW5jdGlvbiAob3B0KSB7XG4gIC8vICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgLy8gICAgIC8vIFRPRE9cbiAgLy8gICB9XG4gIC8vIH0pO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbGliX2F1dG9fY2xrL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgd2F0Y2hUcmFja2VyID0gcmVxdWlyZSgnLi4vdXRpbHMvd2F0Y2hUcmFja2VyJyk7XG52YXIgZ2V0SGFzaEtleSA9IHJlcXVpcmUoJy4uL3V0aWxzL2dldEhhc2hLZXknKTtcbnZhciByYXhVdGlsID0gcmVxdWlyZSgnLi4vdXRpbHMvcmF4VXRpbCcpO1xuLyoqXG4gKiDmioroh6rliqjmm53lhYnnm7jlkIxjc3NTZWxlY3RvcueahOebuOWQjOS9jee9rueahGRhdGFzZXTmi7/liLDnu5noh6rliqjngrnlh7vkvb/nlKhcbiAqIOWboOS4uuWcqOaUr+S7mOWuneeOr+Wig+S4i+iHquWKqOeCueWHu+S6i+S7tuaLv+S4jeWIsGRhdGFzZXRcbiAqL1xuZnVuY3Rpb24gZ2V0RGF0YVNldCAoY29uZmlnLCBpbmRleCkge1xuICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuICBcbiAgZm9yICh2YXIgbG9na2V5IGluIF9oYXNoTWFwKSB7XG4gICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2ID0gZWxlX3NbaV0gfHwge307XG4gICAgICB2YXIgZXhwQ29uZmlnID0gdi5leHBDb25maWcgfHwge307XG4gICAgICAvLyDmm53lhYljc3NTZWxlY3RvcuS4jueCueWHu+eahGNzc1NlbGVjdG9y55u45ZCM5omN6K6k5Li65piv5ZCM57G75Z6L5YWD57SgXG4gICAgICBpZiAoY29uZmlnLmNzc1NlbGVjdG9yID09PSBleHBDb25maWcuY3NzU2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KHtcbiAgICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgICAgfSwgZXhwQ29uZmlnKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChoYXNoID09PSB2Lmhhc2hfdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gY2xvbmVEZWVwKHYuZGF0YXNldCk7XG4gICAgICAgIH0gIFxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0cy53YXRjaF9jbGljayA9IGZ1bmN0aW9uIChjbGtJbmZvLCBlbGVtZW50c0dyb3Vwcykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgZWFjaChlbGVtZW50c0dyb3VwcyxmdW5jdGlvbihncm91cCl7XG4gICAgdmFyIGVsZW1lbnRzID0gZ3JvdXAuZWxlbWVudHM7XG4gICAgdmFyIGNvbmZpZyA9IGdyb3VwLmNvbmZpZztcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgX3ZhbHVlID0gZWxlbWVudHNbal07XG4gICAgICBpZiAoaXNJbkFyZWEoY2xrSW5mbywgX3ZhbHVlKSkge1xuICAgICAgICB2YXIgaW5kZXggPSBqICsgMTtcbiAgICAgICAgdmFyIGRhdGFzZXQgPSBfdmFsdWUuZGF0YXNldCB8fCBnZXREYXRhU2V0KGNvbmZpZywgaW5kZXgpIHx8IHt9O1xuICAgICAgICB2YXIgc3BtRGF0YSA9IHt9O1xuICAgICAgICB2YXIgX3NwbURhdGEgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZGF0YXNldC50cmFja2VyUGFyYW1zKSB8fCB7fTtcbiAgICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAgICAgICAgIC8vIOWPlmRhdGEtdHJhY2tlciDmiJYgY3NzU2VsZWN0b3JcbiAgICAgICAgICBzcG1EYXRhID0gY2xvbmVEZWVwKGFwbHVzLl8kLnNwbS5kYXRhIHx8IHt9KTtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQgJiYgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuICAgICAgICAgICAgdmFyIGRvbURhdGFTZXQgPSByYXhVdGlsLmdldERhdGFTZXQoY29uZmlnLCBpbmRleC0xKTtcbiAgICAgICAgICAgIHZhciBjID0gZG9tRGF0YVNldC5zcG1DIHx8IGNvbmZpZy5zcG1DIHx8ICcwJztcbiAgICAgICAgICAgIHZhciBkID0gZG9tRGF0YVNldC5zcG1EIHx8IGNvbmZpZy5zcG1EIHx8ICcwJztcbiAgICAgICAgICAgIHNwbURhdGEuYyA9IGM7XG4gICAgICAgICAgICBzcG1EYXRhLmQgPSBkO1xuICAgICAgICAgICAgLy8g6KGl5YWFIHJheCBkYXRhLSog5bGe5oCnXG4gICAgICAgICAgICBkYXRhc2V0ID0gT2JqZWN0LmFzc2lnbihkYXRhc2V0LCBkb21EYXRhU2V0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNwbUMgPSBkYXRhc2V0LnRyYWNrZXIgfHwgY29uZmlnLmNzc1NlbGVjdG9yLnJlcGxhY2UoL1xcJ3xcXFwifFxcO3xcXDp8XFw9fFxcW3xcXF18XFwufFxcI3xcXC18XFwvfFxcfC9nLCAnJyk7IC8vIOWOu+aOieeJueauiuWtl+esplxuICAgICAgICAgICAgc3BtRGF0YS5jID0gc3BtQztcbiAgICAgICAgICAgIGlmIChzcG1EYXRhLmMgJiYgc3BtRGF0YS5jICE9PSAnMCcpIHtcbiAgICAgICAgICAgICAgdmFyIHNwbUQgPSAnZCcgKyBpbmRleDtcbiAgICAgICAgICAgICAgc3BtRGF0YS5kID0gc3BtRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BtRGF0YS5iID0gY29uZmlnLnNwbUI7XG4gICAgICAgICAgaWYgKGNvbmZpZy5zcG1DKSB7XG4gICAgICAgICAgICBzcG1EYXRhLmMgPSBjb25maWcuc3BtQztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3BtRGF0YS5jID0gX3NwbURhdGEuc3BtQyA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1DKSA6ICcnO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgaWYgKGNvbmZpZy5zcG1EKSB7XG4gICAgICAgICAgICBzcG1EYXRhLmQgPSBpbmRleCA/IGNvbmZpZy5zcG1EICsgJ18nICsgaW5kZXggOiBjb25maWcuc3BtRDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3BtRGF0YS5kID0gX3NwbURhdGEuc3BtRCA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1EKSA6ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgIGRhdGFzZXQ6IGRhdGFzZXQsXG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgICAgZWxlbWVudDogX3ZhbHVlLFxuICAgICAgICAgIHNwbURhdGE6IHNwbURhdGFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcbiAgaWYocmVzdWx0cy5sZW5ndGg9PT0xKXtcbiAgICByZXN1bHQgPSByZXN1bHRzWzBdO1xuICB9ZWxzZSBpZihyZXN1bHRzLmxlbmd0aD4xKXtcbiAgICByZXN1bHQgPSByZXN1bHRzLnJlZHVjZShmdW5jdGlvbihwcmV2aW91cyxjdXJyZW50KXtcbiAgICAgIHZhciBtYXRjaGVkUmVzdWx0ID0gcHJldmlvdXM7XG4gICAgICB2YXIgcHJldmlvdXNFbGVtZW50ID0gcHJldmlvdXMuZWxlbWVudDtcbiAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnQuZWxlbWVudDtcbiAgICAgIGlmKGN1cnJlbnRFbGVtZW50LnRvcCA+PSBwcmV2aW91c0VsZW1lbnQudG9wICYmIGN1cnJlbnRFbGVtZW50LnJpZ2h0IDw9IHByZXZpb3VzRWxlbWVudC5yaWdodCAmJiBjdXJyZW50RWxlbWVudC5ib3R0b20gPD0gcHJldmlvdXNFbGVtZW50LmJvdHRvbSAmJiBjdXJyZW50RWxlbWVudC5sZWZ0ID49IHByZXZpb3VzRWxlbWVudC5sZWZ0KXtcbiAgICAgICAgbWF0Y2hlZFJlc3VsdCA9IGN1cnJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2hlZFJlc3VsdDtcbiAgICB9KTtcbiAgfVxuICBpZihyZXN1bHQpe1xuICAgIHdhdGNoVHJhY2tlci5wdXNoRXZlbnQoJ0NMSycsIHJlc3VsdC5kYXRhc2V0LCByZXN1bHQuY29uZmlnLCByZXN1bHQuZWxlbWVudCwgcmVzdWx0LnNwbURhdGEpO1xuICB9XG4gIGZ1bmN0aW9uIGlzSW5BcmVhIChjbGtJbmZvLCBlbGVJbmZvKSB7XG4gICAgdmFyIGNoYW5nZWRUb3VjaCA9IHt9O1xuICAgIGNvbnNvbGUubG9nKCc9PT0+IGNsa0luZm8nLCBjbGtJbmZvKVxuICAgIGlmIChjbGtJbmZvKSB7XG4gICAgICBpZiAoY2xrSW5mby5jaGFuZ2VkVG91Y2hlcykge1xuICAgICAgICAvLyDlvq7kv6FcbiAgICAgICAgY2hhbmdlZFRvdWNoID0gY2xrSW5mby5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgIH0gZWxzZSBpZiAoY2xrSW5mby5kZXRhaWwpIHtcbiAgICAgICAgLy8g5pSv5LuY5a6dXG4gICAgICAgIGNoYW5nZWRUb3VjaCA9IGNsa0luZm8uZGV0YWlsO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgeCA9IGNoYW5nZWRUb3VjaC5jbGllbnRYIHx8IDA7XG4gICAgdmFyIHkgPSBjaGFuZ2VkVG91Y2guY2xpZW50WSB8fCAwO1xuXG4gICAgdmFyIF90b3AgPSBlbGVJbmZvLnRvcDtcbiAgICB2YXIgX2JvdHRvbSA9IGVsZUluZm8uYm90dG9tO1xuICAgIGlmIChlbGVJbmZvLnNjcm9sbFRvcCkge1xuICAgICAgX3RvcCArPSBlbGVJbmZvLnNjcm9sbFRvcDtcbiAgICAgIF9ib3R0b20gKz0gZWxlSW5mby5zY3JvbGxUb3A7XG4gICAgfVxuXG4gICAgaWYgKGVsZUluZm8ubGVmdCA8IHggJiYgeCA8IGVsZUluZm8ucmlnaHQgJiYgX3RvcCA8IHkgJiYgeSA8IF9ib3R0b20pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2Nsay9jb2xsZWN0X2Nsay5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIEJhc2UgPSByZXF1aXJlKCdAY29yZS9CYXNlJyk7XG52YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgcmVjb3JkRXhwTWFwUXVldWUgPSB7fTtcbnZhciBERUZBVUxUX1BLR19TSVpFID0gMztcbnZhciBQT1NUID0gJ1BPU1QnO1xudmFyIEVYUCA9ICdFWFAnO1xuXG4vKipcbiAqIOiOt+WPlueUqOaIt+azqOWFpeeahOWfi+eCueS/oeaBr++8mmh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9kb2NzL21ldGEjYjdkOGNjYzdcbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSB1c2VyRm5OYW1lXG4gKiBAcGFyYW1zIHtPYmplY3R9IGVsZW1lbnRcbiAqIEBwYXJhbXMge09iamVjdH0gc2VsZWN0b3JcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldFVzZXJJbmZvICh1c2VyRm5OYW1lLCBlbGVtZW50LCBzZWxlY3Rvciwgc3BtRGF0YSkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKSB8fCB7fTtcbiAgdmFyIGdldE1ldGFJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm87XG4gIGlmICh0eXBlb2YgZ2V0TWV0YUluZm8gPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgdXNlckZuID0gZ2V0TWV0YUluZm8odXNlckZuTmFtZSk7XG4gICAgdmFyIHVzZXJJbmZvID0ge307XG4gICAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHVzZXJJbmZvID0gdXNlckZuKGVsZW1lbnQgPyBjbG9uZURlZXAoZWxlbWVudCkgOiB7fSwgc2VsZWN0b3IsIHNwbURhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0LnBhcmFtMm9iaih1c2VySW5mbyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG59XG5cbi8vIOiBmuWQiOS4iuaKpeabneWFieaXpeW/l1xudmFyIEV2ZW50QXJyYXkgPSBCYXNlLmV4dGVuZCh7XG4gIHB1c2g6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgIHdoaWxlICh0aGlzLmJ1ZmZlci5sZW5ndGggPj0gdGhpcy5wa2dTaXplKSB7XG4gICAgICB2YXIgZ29rZXlzID0gdGhpcy5idWZmZXIuc3BsaWNlKDAsIHRoaXMucGtnU2l6ZSk7XG4gICAgICBpZiAoZ29rZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXBsdXMuY29tYmluZVJlY29yZCh0aGlzLmxvZ2tleSwgRVhQLCBnb2tleXMsIHRoaXMubWV0aG9kKTtcbiAgICAgIH1cbiAgICB9IFxuICB9XG59KTtcblxuZnVuY3Rpb24gZ2V0Rml4ZWROdW1iZXIgKHZhbHVlLCBsZW5ndGgpIHtcbiAgdmFyIF9yZXN1bHQgPSAnJztcbiAgdHJ5IHtcbiAgICB2YXIgX251bSA9IG5ldyBOdW1iZXIodmFsdWUpO1xuICAgIF9yZXN1bHQgPSBwYXJzZUZsb2F0KF9udW0udG9GaXhlZChsZW5ndGgpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZXN1bHQgPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gX3Jlc3VsdDtcbn1cblxuZXhwb3J0cy5wdXNoRXZlbnQgPSBmdW5jdGlvbiAoZ21rZXksIGRhdGEsIGNvbmZpZywgZWxlbWVudCwgc3BtRGF0YSkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgXG4gIHZhciBwcm9wcyA9IGNvbmZpZy5wcm9wcyB8fCBbXTtcbiAgdmFyIHBhcmFtcyA9IHt9O1xuICB2YXIgZGF0YXNldCA9IHt9O1xuXG4gIGlmIChkYXRhKSB7XG4gICAgZm9yICh2YXIgZGF0YWtleSBpbiBkYXRhKSB7XG4gICAgICBpZiAoISFkYXRha2V5LnRvTG93ZXJDYXNlKCkubWF0Y2goL15kYXRhLS8pKSB7XG4gICAgICAgIGRhdGFzZXRbZGF0YWtleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKS5yZXBsYWNlKC8tL2csICcnKV0gPSBkYXRhW2RhdGFrZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVE9ETzog5a+55LqO5reY5a6d5bCP56iL5bqPLGRhdGFrZXnlt7Lnu4/lnKhkYXRh5YaF5LqG77yM5bm25LiU5LiN5ZCrZGF0YS3liY3nvIAs6ZyA5Y2V54us5Yqg5YWlQOmSsOaYrVxuICAgICAgICBwYXJhbXNbZGF0YWtleV0gPSBkYXRhW2RhdGFrZXldO1xuICAgICAgfVxuICAgIH0gIFxuICB9XG4gIGlmIChwcm9wcyAmJiBpc0FycmF5KHByb3BzKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBwcm9wc1tpXS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKS5yZXBsYWNlKC8tL2csICcnKTtcbiAgICAgIHBhcmFtc1twcm9wc1tpXV0gPSBkYXRhc2V0W2tleV07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIGRhdGFzZXQpO1xuICB9XG4gIFxuICBpZiAoZWxlbWVudCAmJiBnbWtleSA9PT0gRVhQKSB7XG4gICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zLCB7XG4gICAgICAnX3cnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LndpZHRoLCAyKSxcbiAgICAgICdfaCc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQuaGVpZ2h0LCAyKSxcbiAgICAgICdfeCc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQueCwgMiksXG4gICAgICAnX3knOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LnksIDIpLFxuICAgICAgLy8gJ19oYXNoJzogZWxlbWVudC5oYXNoX3ZhbHVlIHx8ICcnLFxuICAgICAgJ19yYXRlJzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC52aWV3YWJpbGl0eVJhdGUgfHwgZWxlbWVudC5pbnRlcnNlY3Rpb25SYXRpbywgMiksXG4gICAgICAnX3ZpZXdhYmlsaXR5JzogJ2ludGVyc2VjdGlvbidcbiAgICB9KTtcbiAgfSAgXG4gIGlmIChjb25maWcuX3Z0KSB7XG4gICAgcGFyYW1zLl92dCA9IGNvbmZpZy5fdnQ7XG4gIH1cblxuICAvLyBpZiAoZG9jdW1lbnQgJiYgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuICAvLyAgIHZhciBzcG1EYXRhID0gXG4gIC8vIH1cblxuICB2YXIgdXNlckZuTmFtZSA9IGdta2V5ID09PSBFWFAgPyAnYXBsdXMtYXV0by1leHAtdXNlcmZuJyA6ICdhcGx1cy1hdXRvLWNsay11c2VyZm4nO1xuICB2YXIgdXNlckluZm8gPSBnZXRVc2VySW5mbyh1c2VyRm5OYW1lLCBlbGVtZW50LCBjb25maWcuY3NzU2VsZWN0b3IsIHNwbURhdGEpO1xuXG4gIGlmICghdXNlckluZm8uc3BtKSB7XG4gICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSAmJiBzcG1EYXRhICYmIHNwbURhdGEuYSAmJiBzcG1EYXRhLmIpIHtcbiAgICAgIHVzZXJJbmZvLnNwbSA9IFtzcG1EYXRhLmEsIHNwbURhdGEuYiwgc3BtRGF0YS5jIHx8ICcwJywgc3BtRGF0YS5kIHx8ICcwJ10uam9pbignLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1c2VySW5mby5zcG0gPSBzcG1EYXRhICYmIHNwbURhdGEuYiA/IHNwbURhdGEgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgdmFyIGdva2V5ID0ge307XG5cbiAgdmFyIHRyYWNrZXJQYXJhbXMgPSBkYXRhLnRyYWNrZXJQYXJhbXMgfHwgZGF0YVsndHJhY2tlci1wYXJhbXMnXTtcbiAgaWYgKHRyYWNrZXJQYXJhbXMpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIF90cmFja2VyUGFyYW1zID0gSlNPTi5wYXJzZSh0cmFja2VyUGFyYW1zKTtcbiAgICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24ocGFyYW1zLCBfdHJhY2tlclBhcmFtcyk7XG4gICAgICBkZWxldGUgcGFyYW1zLnRyYWNrZXJQYXJhbXM7XG4gICAgICBkZWxldGUgcGFyYW1zLnRyYWNrZXJwYXJhbXM7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICBcbiAgaWYgKGdta2V5ID09PSAnRVhQJyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgcmVjb3JkRXhwTWFwUXVldWVbY29uZmlnLmxvZ2tleV0pIHtcbiAgICB2YXIgZXhkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zLCB1c2VySW5mbyk7XG4gICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICBleGFyZ3M6IGV4ZGF0YVxuICAgIH0pO1xuICAgIHV0aWxMb2dnZXIubG9nKCfoh6rliqjmm53lhYknLGNvbmZpZy5sb2drZXksZXhkYXRhKTtcbiAgICByZWNvcmRFeHBNYXBRdWV1ZVtjb25maWcubG9na2V5XS5wdXNoKGNsb25lRGVlcChnb2tleSkpO1xuICB9IGVsc2UgeyAgICBcbiAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcywgdXNlckluZm8sIGNvbmZpZy5jdXN0b21BcmdzKTtcbiAgICB1dGlsTG9nZ2VyLmxvZygn6Ieq5Yqo54K55Ye7Jyxjb25maWcubG9na2V5LGdva2V5KTtcbiAgICBhcGx1cy5yZWNvcmQoY29uZmlnLmxvZ2tleSwgZ21rZXksIGdva2V5LCBQT1NUKTsgIFxuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbXMge0FycmF5T2JqZWN0fSBjb25maWcgOiBbe1xuICogICAgJ3Bvc2l0aW9uU2VsZWN0b3InOiAnLnNjcm9sbC12aWV3JyxcbiAqICAgICdjc3NTZWxlY3Rvcic6Jy5iYWxsJyxcbiAqICAgICdsb2drZXknOicvdGVzdC5iYWxsLjEnLFxuICogICAgJ3Byb3BzJzogWydkYXRhLXRyYWNrZXInXSxcbiAqICB9LCB7XG4gKiAgICAnY3NzU2VsZWN0b3InOicubXlidXR0b24nLFxuICogICAgJ2xvZ2tleSc6Jy90ZXN0Lm15YnV0dG9uLjEnLFxuICogICAgJ3Byb3BzJzogWydkYXRhLXRyYWNrZXInXSxcbiAqICB9XVxuICovXG5leHBvcnRzLndhdGNoUmVjb3JkID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgXG4gIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgY29uZmlnKSB7XG4gICAgY29uZmlnLmZvckVhY2goZnVuY3Rpb24gKGNmZykge1xuICAgICAgaWYgKCFyZWNvcmRFeHBNYXBRdWV1ZS5oYXNPd25Qcm9wZXJ0eShjZmcubG9na2V5KSkge1xuICAgICAgICByZWNvcmRFeHBNYXBRdWV1ZVtjZmcubG9na2V5XSA9IEV2ZW50QXJyYXkuY3JlYXRlKHtcbiAgICAgICAgICBsZW5ndGg6IDAsXG4gICAgICAgICAgYnVmZmVyOiBbXSxcbiAgICAgICAgICBsb2drZXk6IGNmZy5sb2drZXksXG4gICAgICAgICAgcGtnU2l6ZTogdHlwZW9mIGNmZy5wa2dTaXplID09PSAnbnVtYmVyJyAmJiBjZmcucGtnU2l6ZSB8fCBERUZBVUxUX1BLR19TSVpFLFxuICAgICAgICAgIG1ldGhvZDogY2ZnLm1ldGhvZCB8fCBQT1NUXG4gICAgICAgIH0pO1xuICAgICAgfSBcbiAgICB9KTsgICAgXG4gIH1cbn07XG5cbmV4cG9ydHMuY2xlYXJSZWNvcmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4gICAgZm9yICh2YXIgbG9na2V5IGluIHJlY29yZEV4cE1hcFF1ZXVlKSB7XG4gICAgICB2YXIgZ29rZXlzID0gcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgfHwgW107XG4gICAgICBpZiAoZ29rZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXBsdXMuY29tYmluZVJlY29yZChsb2drZXksIEVYUCwgZ29rZXlzLCBQT1NUKTtcbiAgICAgICAgcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgPSBbXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS91dGlscy93YXRjaFRyYWNrZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDml6Xlv5fnsbvlt6Xlhbfpm4blkIhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBwYXJhbXMge09iamVjdH0gbyA6e1xuICogICBsZXZlbDogJ3dhcm4vaW5mby9sb2cnIGRlZmF1bHQgaXMgd2FyblxuICogICBtc2c6ICdtc2cnXG4gKiB9XG4gKi9cbnZhciBtZXRhSW5mbyA9IHJlcXVpcmUoJ0BwL2xpYl9tZXRhL21ldGFJbmZvTWluaScpO1xudmFyIHByZWZpeCA9ICdbQVBMVVNdIC0tICc7XG5leHBvcnRzLmxvZ2dlciA9IGZ1bmN0aW9uIChvKSB7XG4gIGlmICghbykge1xuICAgIG8gPSB7fTtcbiAgfVxuICB2YXIgbGV2ZWwgPSBvLmxldmVsIHx8ICd3YXJuJztcbiAgY29uc29sZSAmJiBjb25zb2xlW2xldmVsXSAmJiBjb25zb2xlW2xldmVsXShwcmVmaXgrby5tc2cpO1xufTtcbmV4cG9ydHMubG9nID0gZnVuY3Rpb24oKXtcbiAgY29uc3QgZGVidWcgPSBtZXRhSW5mby5nZXRNZXRhSW5mbygnZGVidWcnKTtcbiAgZGVidWcgJiYgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxbcHJlZml4XS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpKTtcbn07XG5cbmV4cG9ydHMuZGVidWdMb2cgPSBmdW5jdGlvbihvKSB7XG4gIHZhciBhcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoYXBsdXMgJiYgYXBsdXMuYXBsdXNEZWJ1Zykge1xuICAgIHRoaXMubG9nZ2VyKG8pO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbExvZ2dlci5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDmoLnmja7lhYPntKDlsZ7mgKflkozln4vngrnphY3nva7nsr7noa7ojrflj5bkuIDkuKrlhYPntKDnmoRoYXNoS2V5XG4gKiBAcGFyYW1zIHtPYmplY3R9IGVsZW1lbnRBdHRyIHtcbiAqICAgaWRcbiAqIH1cbiAqIEBwYXJhbXMge09iamVjdH0gY29uZmlnIHtcbiAqICAgbG9na2V5LCBjc3NTZWxlY3RvciwgcG9zaXRpb25TZWxlY3RvclxuICogfVxuICogQHJldHVybiB7U3RyaW5nfSBoYXNoS2V5XG4gKi9cblxuLy8gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZWxlbWVudEF0dHIsIGNvbmZpZykge1xuLy8gICB2YXIgaGFzaEtleSA9IFtcbi8vICAgICBjb25maWcubG9na2V5LFxuLy8gICAgIGNvbmZpZy5jc3NTZWxlY3Rvcixcbi8vICAgICBjb25maWcucG9zaXRpb25TZWxlY3Rvcixcbi8vICAgICBlbGVtZW50QXR0ci5pbmRleFxuLy8gICBdLmpvaW4oJ18nKTtcbi8vICAgcmV0dXJuIGhhc2hLZXk7XG4vLyB9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbGVtZW50QXR0ciwgY29uZmlnKSB7XG4gIHZhciBoYXNoS2V5ID0gW1xuICAgIGNvbmZpZy5sb2drZXksXG4gICAgY29uZmlnLmNzc1NlbGVjdG9yLFxuICAgIC8vIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yIHx8ICcnLFxuICAgIC8vIGVsZW1lbnRBdHRyLmluZGV4IC8v5reY5a6d5bCP56iL5bqP5Yik5pataGFzaEtleVxuICBdO1xuXG4gIGlmIChjb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuICAgIGhhc2hLZXkucHVzaChjb25maWcucG9zaXRpb25TZWxlY3Rvcik7XG4gIH1cbiAgXG4gIGlmIChlbGVtZW50QXR0ci5pZCkge1xuICAgIGhhc2hLZXkucHVzaChlbGVtZW50QXR0ci5pZCk7XG4gIH1cblxuICBpZiAoZWxlbWVudEF0dHIuaW5kZXggPj0gMCkge1xuICAgIGhhc2hLZXkucHVzaChlbGVtZW50QXR0ci5pbmRleCk7XG4gIH1cbiAgLy8gUmF45qGG5p626L+Q6KGM5pe26I635b6X55qEZGF0YXNldOWJjeWQjuS4jeS4gOiHtO+8jOWIoOmZpOaXoOaViOWxnuaApyBA6ZKw5pitIDIwMjEtMDktMTggMDk6MTc6NTJcbiAgaWYgKGVsZW1lbnRBdHRyLmRhdGFzZXQgJiYgZWxlbWVudEF0dHIuZGF0YXNldFsncHJpdmF0ZU5vZGVJZCddKSB7XG4gICAgZGVsZXRlIGVsZW1lbnRBdHRyLmRhdGFzZXRbJ3ByaXZhdGVOb2RlSWQnXTtcbiAgfVxuICBpZiAoZWxlbWVudEF0dHIuZGF0YXNldCkge1xuICAgIGhhc2hLZXkucHVzaChKU09OLnN0cmluZ2lmeShlbGVtZW50QXR0ci5kYXRhc2V0KSk7XG4gIH1cbiAgaGFzaEtleSA9IGhhc2hLZXkuam9pbignXycpO1xuICByZXR1cm4gaGFzaEtleTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL2dldEhhc2hLZXkuanNcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiByYXhVdGlsLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcblxuZXhwb3J0cy5nZXREYXRhU2V0ID0gZnVuY3Rpb24gKGNvbmZpZyxpbmRleCkge1xuICB2YXIgZCA9IHt9O1xuICB2YXIgY2x4O1xuICBpZiAodXRpbERhc2guaXNTdGFydFdpdGgoY29uZmlnLmNzc1NlbGVjdG9yLCAnLicpKSB7XG4gICAgY2x4ID0gY29uZmlnLmNzc1NlbGVjdG9yLnNsaWNlKDEsIGNvbmZpZy5jc3NTZWxlY3Rvci5sZW5ndGgpO1xuICB9IGVsc2Uge1xuICAgIGNseCA9IGNvbmZpZy5jc3NTZWxlY3RvcjtcbiAgfVxuICB2YXIgZG9tcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2x4KTtcbiAgaWYgKGRvbXMgJiYgZG9tcy5sZW5ndGggPiAwKXtcbiAgICB2YXIgZG9tRGF0YVNldCA9IGRvbXNbaW5kZXhdLmRhdGFzZXQgfHwge307XG4gICAgZm9yICh2YXIga2V5IGluIGRvbURhdGFTZXQpIHtcbiAgICAgIHZhciB0ID0gZG9tRGF0YVNldFtrZXldO1xuICAgICAgc3dpdGNoKHR5cGVvZiB0KXtcbiAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgZFtrZXldID0gdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgIGQgPSBPYmplY3QuYXNzaWduKGQsIHQpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIGlmIChrZXkgPT09ICd0cmFja2VyUGFyYW1zJykge1xuICAgICAgICAgIHZhciB0cCA9IHV0aWwuanNvbkxpa2VTdHIySlNPTihkb21EYXRhU2V0LnRyYWNrZXJQYXJhbXMpO1xuICAgICAgICAgIGQgPSBPYmplY3QuYXNzaWduKGQsIHRwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkW2tleV0gPSB0O1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICBkW2tleV0gPSB0O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZDtcbn07XG5cbmV4cG9ydHMuaXNSYXggPSBmdW5jdGlvbigpe1xuICByZXR1cm4gZG9jdW1lbnQgPyB0cnVlIDogZmFsc2U7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS91dGlscy9yYXhVdGlsLmpzXG4vLyBtb2R1bGUgaWQgPSA0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pWw57uE5bel5YW3XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBJRTjkuI3mlK/mjIHmlbDnu4Tljp/nlJ/nmoRpbmRleE9m77yM5pWF6Ieq6KGM5a6e546w5LiA5LiqaW5kZXhvZlxuICogQHBhcmFtIFtBcnJheV0gYXJyXG4gKiBAcGFyYW0gW09iamVjdF0gaXRlbVxuICogQHJldHVybiBbTnVtYmVyXSBpbmRleFxuICovXG5leHBvcnRzLmluZGV4b2YgPSBmdW5jdGlvbihhcnIsIGl0ZW0pIHtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIHRyeSB7XG4gICAgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXJyLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAoYXJyW2pdID09PSBpdGVtKSB7XG4gICAgICAgIGluZGV4ID0gajtcbiAgICAgIH1cbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG59O1xuZXhwb3J0cy5pdGVtTWF0Y2ggPSBmdW5jdGlvbihhcnIsIGl0ZW0pIHtcbiAgdmFyIG1hdGNoZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBpZiAoIXRoaXMuaXNBcnJheShhcnIpKSB7XG4gICAgICByZXR1cm4gbWF0Y2hlZDtcbiAgICB9XG4gICAgbWF0Y2hlZCA9IGFyci5zb21lKGZ1bmN0aW9uKHMpIHtcbiAgICAgIHJldHVybiAocyAmJiBzLmxlbmd0aCA+IDApICYmIGl0ZW0uaW5kZXhPZihzKSAhPT0gLTE7XG4gICAgfSk7XG4gIH0gY2F0Y2goZSkge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXJyLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAoaXRlbS5pbmRleE9mKGFycltqXSkgIT09IC0xKSB7XG4gICAgICAgIG1hdGNoZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5mdW5jdGlvbiBpc0FycmF5KG8pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG4gIH1cbn07XG5cbmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cbmZ1bmN0aW9uIGZsYXQoYXJyKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgaWYgKGlzQXJyYXkoYXJyKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdiA9IGFycltpXTtcbiAgICAgIGlmIChpc0FycmF5KHYpKSB7XG4gICAgICAgIC8v6YCS5b2S5omB5bmz5YyW5pWw57uEXG4gICAgICAgIGFycltpXSA9IGZsYXQodik7XG4gICAgICAgIC8vIOmAkuW9kuWQjiDov57mjqXmlbDnu4RcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChhcnJbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnB1c2godik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydHMuZmxhdCA9IGZsYXQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEFycmF5LmpzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcblxuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgcmVxdWlyZSgnLi9saWJfYXV0b19leHAvbWFpbicpKCk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfZXhwLmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGNvbGxlY3RfZXhwID0gcmVxdWlyZSgnLi9jb2xsZWN0X2V4cCcpO1xudmFyIGNvbmZpZyA9IHJlcXVpcmUoJ0BwX3dlYi9saWJfY29tbW9uL2NvbmZpZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG4vLyB2YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xuXG4vLyDnlKjkuo7nm5HlkKxcbnZhciBQQUdFX0RBVEFfTUFQID0ge307XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgaXNTdGFydCA9IDA7XG4gIHZhciBpc0ZpcnN0VG91Y2ggPSAwO1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgaWYgKGFwbHVzLl9hcGx1c19hdXRvX2V4cCkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBhcGx1cy5fYXBsdXNfYXV0b19leHAgPSB7XG4gICAgICBoYXNoTWFwOiB7fVxuICAgIH07XG4gIH1cblxuICB2YXIgX2NvbmZpZyA9IFtdO1xuXG4gIGZ1bmN0aW9uIHdhdGNoTWV0YUluZm8oY29udGV4dCwgaXNGaXJzdCwgd2F0Y2hUeXBlKSB7XG4gICAgdmFyIGhhbmRsZXJNZXRhSW5mbyA9IGZ1bmN0aW9uIChtZXRhS2V5LCBtZXRhVmFsdWUpIHsgICBcbiAgICAgIGlmIChtZXRhS2V5ID09PSAnYXBsdXMtYXV0by1leHAnKSB7XG4gICAgICAgIHZhciBfY29uZmlnMiA9IGNvbmZpZy5nZXRBdXRvRXhwQ29uZmlnKG1ldGFWYWx1ZSk7XG4gICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShfY29uZmlnMikgPT09IEpTT04uc3RyaW5naWZ5KF9jb25maWcpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9jb25maWcgPSBfY29uZmlnMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0YVZhbHVlICYmIF9jb25maWcgJiYgX2NvbmZpZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29sbGVjdF9leHAud2F0Y2hfZXhwb3N1cmUoY29udGV4dCwgX2NvbmZpZywgaXNGaXJzdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgIGFjdGlvbjogd2F0Y2hUeXBlLCAvLyBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICBhcmd1bWVudHM6IFsnc2V0TWV0YUluZm8nLCBoYW5kbGVyTWV0YUluZm9dXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0RXhwIChjb250ZXh0LCBpc0ZpcnN0KSB7XG4gICAgX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpO1xuICAgIC8vIFRhcm/moYbmnrbln7rkuo7ov5DooYzml7bvvIzoh6rliqjmm53lhYnkvJrlh7rnjrDojrflj5bkuI3liLDmm53lhYnlhYPntKDnmoTmg4XlhrVcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgY29sbGVjdF9leHAud2F0Y2hfZXhwb3N1cmUoY29udGV4dCwgX2NvbmZpZywgaXNGaXJzdCk7XG4gICAgfSwgMCk7XG4gIH1cblxuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uU2hvdycsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICAgIHdhdGNoTWV0YUluZm8ob3B0LmNvbnRleHQsIDEsIGFwbHVzU3RhdGljLlNVQlNDUklCRSk7XG4gICAgICAgIGlmIChpc1N0YXJ0ID09PSAwKSB7XG4gICAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMSk7XG4gICAgICAgICAgaXNTdGFydCA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgX2N1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgICAgIHZhciBfcGF0aCA9IF9jdXJyZW50UGFnZS5yb3V0ZSB8fCBfY3VycmVudFBhZ2UuaXM7XG4gICAgICAgICAgUEFHRV9EQVRBX01BUFtfcGF0aF0gPSBfcGF0aDsgLy8gSlNPTi5zdHJpbmdpZnkoX2N1cnJlbnRQYWdlLmRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHJlc2V0QXV0b0V4cCAob3B0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBfY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICB2YXIgX3BhdGggPSBfY3VycmVudFBhZ2Uucm91dGUgfHwgX2N1cnJlbnRQYWdlLmlzO1xuICAgICAgdmFyIF9kYXRhID0gUEFHRV9EQVRBX01BUFtfcGF0aF07XG4gICAgICBcbiAgICAgIHZhciBfY3VycmVudERhdGEgPSBKU09OLnN0cmluZ2lmeShvcHQuZGF0YSk7XG4gICAgICBpZiAoX2RhdGEgIT09IF9jdXJyZW50RGF0YSkge1xuICAgICAgICBQQUdFX0RBVEFfTUFQW19wYXRoXSA9IF9jdXJyZW50RGF0YTtcbiAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMCk7XG4gICAgICB9ICBcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG5cbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvbkFwbHVzVG91Y2gnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICBpZiAoaXNGaXJzdFRvdWNoID09PSAwKSB7XG4gICAgICAgICAgaXNGaXJzdFRvdWNoID0gMTtcbiAgICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNldEF1dG9FeHAob3B0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uUGFnZURhdGFDaGFuZ2VkJywgZnVuY3Rpb24gKG9wdCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICByZXNldEF1dG9FeHAob3B0KTtcbiAgICAgIH0sIDIwMCk7XG4gICAgfV1cbiAgfSk7XG5cbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvbkhpZGUnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICBQQUdFX0RBVEFfTUFQID0ge307XG4gICAgICAgIGlzU3RhcnQgPSAwO1xuICAgICAgICBpc0ZpcnN0VG91Y2ggPSAwO1xuICAgICAgICB3YXRjaE1ldGFJbmZvKG9wdC5jb250ZXh0LCAxLCBhcGx1c1N0YXRpYy5VTlNVQlNDUklCRSk7XG4gICAgICAgIGNvbGxlY3RfZXhwLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG5cbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvblVubG9hZCcsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICAgIFBBR0VfREFUQV9NQVAgPSB7fTtcbiAgICAgICAgY29sbGVjdF9leHAuY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9XVxuICB9KTtcblxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19leHAvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIF9jb25maWcgPSByZXF1aXJlKCdAcF93ZWIvbGliX2NvbW1vbi9jb25maWcnKTtcbnZhciBjbG9uZURlZXAgPSByZXF1aXJlKCdAdXRpbHMvY2xvbmVEZWVwJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG52YXIgd2F0Y2hUcmFja2VyID0gcmVxdWlyZSgnLi4vdXRpbHMvd2F0Y2hUcmFja2VyJyk7XG52YXIgZ2V0SGFzaEtleSA9IHJlcXVpcmUoJy4uL3V0aWxzL2dldEhhc2hLZXknKTtcbnZhciByYXhVdGlsID0gcmVxdWlyZSgnLi4vdXRpbHMvcmF4VXRpbCcpO1xudmFyIG1pbmlVdGlsID0gcmVxdWlyZSgnLi4vdXRpbHMvdXRpbHMnKTtcbnZhciBvYnNlcnZlcnMgPSBbXTtcbnZhciBjdHg7XG5cbi8vIHJlbG9hZEN0eCDnlKjkuo7ljZXlhYPmtYvor5XvvIzljZXmtYvkuK3pnIDopoHliIfmjaLmlK/ku5jlrp3jgIHlvq7kv6Hnjq/looPvvIzlrp7pmYXnlJ/kuqfnjq/looPnlKjkuI3liLBcbmV4cG9ydHMud2F0Y2hfZXhwb3N1cmUgPSBmdW5jdGlvbiAoY29udGV4dCwgY29uZiwgaXNGaXJzdCwgcmVsb2FkQ3R4KSB7XG4gIGlmICghY3R4IHx8IHJlbG9hZEN0eCkge1xuICAgIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICB9XG4gIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcbiAgdmFyIF9oYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLmhhc2hNYXAgfHwge307XG4gIHZhciBkdXA7XG4gIFxuICB3YXRjaFRyYWNrZXIud2F0Y2hSZWNvcmQoY29uZik7XG4gIFxuICBmdW5jdGlvbiB3YWl0IChjb3VudCkge1xuICAgIGlmIChjb3VudCA8IGNvbmYubGVuZ3RoKSB7XG4gICAgICB2YXIgY29uZmlnID0gY29uZltjb3VudF07XG4gICAgICBkdXAgPSAwO1xuICAgICAgb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuc3ViamVjdFswXSA9PT0gY29uZmlnLmNzc1NlbGVjdG9yICYmXG4gICAgICAgICAgZWxlbWVudC5zdWJqZWN0WzFdID09PSBjb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuICAgICAgICAgIGR1cCA9IDE7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdmFyIHN1YmplY3QgPSBbY29uZmlnLmNzc1NlbGVjdG9yLCBjb25maWcucG9zaXRpb25TZWxlY3Rvcl07XG4gICAgICBmdW5jdGlvbiBoYXNoaW5nIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgY3NzU2VsZWN0b3IgPSBzdWJqZWN0WzBdO1xuICAgICAgICBpZiAoY3NzU2VsZWN0b3IgJiYgIXV0aWxEYXNoLmlzU3RhcnRXaXRoKHN1YmplY3RbMF0sICcuJykpIHtcbiAgICAgICAgICBjc3NTZWxlY3RvciA9ICcuJyArIGNzc1NlbGVjdG9yO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIGVsZW1lbnRzID0gY3R4LmNyZWF0ZVNlbGVjdG9yUXVlcnkoKS5zZWxlY3RBbGwoY3NzU2VsZWN0b3IpOyAgICAgICAgICBcbiAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRzLmZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgZWxlbWVudHMuZmllbGRzKHtcbiAgICAgICAgICAgICAgZGF0YXNldDogdHJ1ZSxcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihyZXQpIHtcbiAgICAgICAgICAgICAgLy8g6YWN572u5YyW5Z+L54K55YW85a6554K55L2N5peg5pWI5pe25LiN6Zi75aGe5pud5YWJ6Kej5p6QXG4gICAgICAgICAgICAgIGlmICh1dGlsQXJyYXkuaXNBcnJheShyZXQpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgZWxlbWVudHM6IHJldCxcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdDT01NT04nXG4gICAgICAgICAgICAgICAgfSk7ICBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuZXhlYygpOyAgXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybign6K+l5bmz5Y+w5LiN5pSv5oyB6Ieq5Yqo5pud5YWJJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIH1cblxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ+ivpeW5s+WPsOS4jeaUr+aMgeiHquWKqOabneWFiSwgZXJyID0gJywgZXJyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaGFzaGluZyhmdW5jdGlvbiAob3B0cykge1xuICAgICAgICAvLyB2YXIgdHlwZSA9IG9wdHMudHlwZTtcbiAgICAgICAgaWYgKGR1cCA9PT0gMCB8fCBpc0ZpcnN0ID09PSAwKSB7XG4gICAgICAgICAgdmFyIG5ld09ic2VydmVyID0gaW5pdE9ic2VydmVyKGNvbnRleHQpO1xuICAgICAgICAgIG5ld09ic2VydmVyLnN1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgICAgIG9ic2VydmVycy5wdXNoKG5ld09ic2VydmVyKTtcbiAgICAgICAgICAvLyDmm7TmlrBoYXNobWFwXG4gICAgICAgICAgZWFjaChvcHRzLmVsZW1lbnRzLGZ1bmN0aW9uKGl0ZW0saW5kZXgpe1xuICAgICAgICAgICAgaXRlbS5pbmRleCA9IChpbmRleCsxKSArICcnO1xuICAgICAgICAgICAgaWYgKCFjaGVja0lzSW5IYXNoTWFwKGl0ZW0sIGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgdXBkYXRlSGFzaE1hcChpdGVtLCBjb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFkZE9ic2VydmUobmV3T2JzZXJ2ZXIsIGNvbmZpZywgZnVuY3Rpb24gKGVudHJ5LCBfY29uZmlnKSB7XG4gICAgICAgICAgICBtaW5pVXRpbC5nZXRJbmRleEJ5UmVjdChfY29uZmlnLmNzc1NlbGVjdG9yLGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdCxmdW5jdGlvbihpbmRleCl7XG4gICAgICAgICAgICAgIHZhciBfaW5kZXggPSBpbmRleCArIDE7XG4gICAgICAgICAgICAgIGlmIChfaW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2VudHJ5ID0gY2xvbmVEZWVwKGVudHJ5KTtcbiAgICAgICAgICAgICAgICBfZW50cnkuaW5kZXggPSAnJyArIF9pbmRleDtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YXNldCA9IGNsb25lRGVlcChfZW50cnkuZGF0YXNldCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlSGFzaE1hcCh7XG4gICAgICAgICAgICAgICAgICBpZDogX2VudHJ5LmlkLFxuICAgICAgICAgICAgICAgICAgaW5kZXg6IF9lbnRyeS5pbmRleCxcbiAgICAgICAgICAgICAgICAgIGRhdGFzZXQ6IGRhdGFzZXQsXG4gICAgICAgICAgICAgICAgfSwgX2NvbmZpZyk7XG4gICAgICAgICAgICAgICAgZXhwb3N1cmVIYW5kbGUoX2VudHJ5LCBkYXRhc2V0LCBjb25maWcpOyAgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHdhaXQoKytjb3VudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgd2FpdCgwKTtcblxuICBmdW5jdGlvbiBjaGVja0lzSW5IYXNoTWFwIChlbGVtZW50LCBjb25maWcpIHtcbiAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZWxlbWVudCwgY29uZmlnKTtcbiAgICB2YXIgaW5kZXggPSBlbGVtZW50LmluZGV4O1xuICAgIGlmIChfaGFzaE1hcFtjb25maWcubG9na2V5XSkge1xuICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0uZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50Lmhhc2hfdmFsdWUgPT09IGhhc2ggJiYgZWxlbWVudC5pbmRleCA9PT0gaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtcyB7T2JqZWN0fSBlIHtcbiAgICogICBpZCwgZGF0YXNldCwgcG9zaXRpb25cbiAgICogfVxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlSGFzaE1hcChlLCBjb25maWcpIHtcbiAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZSwgY29uZmlnKTtcbiAgICB0cnkge1xuICAgICAgdmFyIGluZGV4ID0gZS5pbmRleDtcbiAgICAgIGlmIChfaGFzaE1hcFtjb25maWcubG9na2V5XSkge1xuICAgICAgICB2YXIgZXhpc3QgPSAwO1xuICAgICAgICBfaGFzaE1hcFtjb25maWcubG9na2V5XS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICBpZiAoZWxlbWVudC5oYXNoX3ZhbHVlID09PSBoYXNoKSB7XG4gICAgICAgICAgICBleGlzdCA9IDE7XG4gICAgICAgICAgICBpZiAoZS5pZCkgZWxlbWVudC5pZCA9IGUuaWQ7XG4gICAgICAgICAgICBpZiAoZS5kYXRhc2V0KSBlbGVtZW50LmRhdGFzZXQgPSBlLmRhdGFzZXQ7XG4gICAgICAgICAgICBpZiAoZS5zdGF0dXMpIGVsZW1lbnQuc3RhdHVzID0gZS5zdGF0dXM7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFleGlzdCkge1xuICAgICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGUuaWQsXG4gICAgICAgICAgICBoYXNoX3ZhbHVlOiBoYXNoLFxuICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgZXhwQ29uZmlnOiBjb25maWcsXG4gICAgICAgICAgICBkYXRhc2V0OiBlLmRhdGFzZXQsXG4gICAgICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0gPSBbe1xuICAgICAgICAgIGlkOiBlLmlkLFxuICAgICAgICAgIGhhc2hfdmFsdWU6IGhhc2gsXG4gICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgIGV4cENvbmZpZzogY29uZmlnLFxuICAgICAgICAgIGRhdGFzZXQ6IGUuZGF0YXNldCxcbiAgICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgICAgfV07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5sb2coJ2Vycm9yID09PSAnLCBlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpbml0T2JzZXJ2ZXIoY29udGV4dCkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgdGhyZXNob2xkczogW19jb25maWcuQVVUT19BVF9WSUVXX1JBVEVdLFxuICAgICAgaW5pdGlhbFJhdGlvOiAwXG4gICAgfTtcbiAgICB2YXIgaXNNWSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBpZiAobXkpIHtcbiAgICAgICAgaXNNWSA9IHRydWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICBpZiAoaXNNWSkge1xuICAgICAgLy8g6JqC6JqB55qE5pud5YWJ55uR5ZCs5ZKM5b6u5L+h5LiN5LiA6Ie077yMaHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS93eG1sL3d4LmNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyLmh0bWxcbiAgICAgIC8vIGh0dHBzOi8vb3BlbmRvY3MuYWxpcGF5LmNvbS9taW5pL2FwaS9pbnRlcnNlY3Rpb25vYnNlcnZlclxuICAgICAgb3B0aW9ucy5zZWxlY3RBbGwgPSB0cnVlO1xuICAgICAgcmV0dXJuIGN0eC5jcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlcihvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucy5vYnNlcnZlQWxsID0gdHJ1ZTtcbiAgICAgIHJldHVybiBjdHguY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoY29udGV4dCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkT2JzZXJ2ZShvYnNlcnZlciwgY29uZmlnLCBjYWxsYmFjaykge1xuICAgIHZhciBjc3MgPSBjb25maWcuY3NzU2VsZWN0b3I7XG4gICAgaWYgKGNzcyAmJiAhdXRpbERhc2guaXNTdGFydFdpdGgoY3NzLCAnLicpKSB7XG4gICAgICBjc3MgPSAnLicgKyBjc3M7XG4gICAgfVxuICAgIGlmIChjb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuICAgICAgb2JzZXJ2ZXIucmVsYXRpdmVUbyhjb25maWcucG9zaXRpb25TZWxlY3Rvcikub2JzZXJ2ZShjc3MsIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjYWxsYmFjayhyZXMsIGNvbmZpZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3JNZXNzYWdlOiAnLCBlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ic2VydmVyLnJlbGF0aXZlVG9WaWV3cG9ydCgpLm9ic2VydmUoY3NzLCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY2FsbGJhY2socmVzLCBjb25maWcpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yTWVzc2FnZTogJywgZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGV4cG9zdXJlSGFuZGxlIChlbnRyeSwgZGF0YXNldCwgY29uZmlnKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIGV4cG9zdXJlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHZhciBleHBFbGVtZW50cyA9IGNoZWNrU3RhcnQoZXhwb3N1cmVUaW1lLCBlbnRyeSwgY29uZmlnKTtcblxuICAgIGlmIChleHBFbGVtZW50cyAmJiBleHBFbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgZWxlbWVudCA9IGV4cEVsZW1lbnRzWzBdO1xuXG4gICAgICB2YXIgc3BtRGF0YSA9IHt9O1xuICAgICAgdmFyIF9zcG1EYXRhID0gdXRpbC5qc29uTGlrZVN0cjJKU09OKGRhdGFzZXQudHJhY2tlclBhcmFtcyB8fCB7fSkgfHwge307XG4gICAgICB2YXIgX2luZGV4ID0gZWxlbWVudC5pbmRleDtcbiAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgc3BtRGF0YSA9IGNsb25lRGVlcChhcGx1cy5fJC5zcG0uZGF0YSB8fCB7fSk7XG4gICAgICAgIGlmIChyYXhVdGlsLmlzUmF4KCkpIHtcbiAgICAgICAgICB2YXIgZG9tRGF0YVNldCA9IHJheFV0aWwuZ2V0RGF0YVNldChjb25maWcsX2luZGV4LTEpO1xuICAgICAgICAgIHZhciBjID0gZG9tRGF0YVNldC5zcG1DIHx8IGNvbmZpZy5zcG1DIHx8ICcwJztcbiAgICAgICAgICB2YXIgZCA9IGRvbURhdGFTZXQuc3BtRCB8fCBjb25maWcuc3BtRCB8fCAnMCc7XG4gICAgICAgICAgc3BtRGF0YS5jID0gYztcbiAgICAgICAgICBzcG1EYXRhLmQgPSBkO1xuICAgICAgICAgIC8vIOihpeWFhSByYXggZGF0YS0qIOWxnuaAp1xuICAgICAgICAgIGRhdGFzZXQgPSBPYmplY3QuYXNzaWduKGRhdGFzZXQsIGRvbURhdGFTZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOWPlmRhdGEtdHJhY2tlciDmiJYgY3NzU2VsZWN0b3JcbiAgICAgICAgICB2YXIgc3BtQyA9IGRhdGFzZXQudHJhY2tlciB8fCBjb25maWcuY3NzU2VsZWN0b3IucmVwbGFjZSgvXFwnfFxcXCJ8XFw7fFxcOnxcXD18XFxbfFxcXXxcXC58XFwjfFxcLXxcXC98XFx8L2csICcnKTsgLy8g5Y675o6J54m55q6K5a2X56ymXG4gICAgICAgICAgLy8g5pud5YWJ6Kem5Y+R55qEc3Bt5LiN5rGh5p+T5YWo5bGAYXBsdXMuXyQuc3BtLmRhdGHvvIzmlYXov5nph4zlgZrmt7Hmi7fotJ1cbiAgICAgICAgICBzcG1EYXRhLmMgPSBzcG1DO1xuICAgICAgICAgIGlmIChzcG1EYXRhLmMgJiYgc3BtRGF0YS5jICE9PSAnMCcpIHtcbiAgICAgICAgICAgIHZhciBzcG1EID0gJ2QnICsgX2luZGV4O1xuICAgICAgICAgICAgc3BtRGF0YS5kID0gc3BtRDtcbiAgICAgICAgICB9ICBcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkpIHtcbiAgICAgICAgICBzcG1EYXRhLmIgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoY29uZmlnLnNwbUMpIHtcbiAgICAgICAgICBzcG1EYXRhLmMgPSBjb25maWcuc3BtQztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzcG1EYXRhLmMgPSBfc3BtRGF0YS5zcG1DID8gZW5jb2RlVVJJQ29tcG9uZW50KF9zcG1EYXRhLnNwbUMpIDogJyc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnLnNwbUQpIHtcbiAgICAgICAgICBzcG1EYXRhLmQgPSBfaW5kZXggPyBjb25maWcuc3BtRCArICdfJyArIF9pbmRleCA6IGNvbmZpZy5zcG1EO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNwbURhdGEuZCA9IF9zcG1EYXRhLnNwbUQgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtRCkgOiAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2F0Y2hUcmFja2VyLnB1c2hFdmVudCgnRVhQJywgZGF0YXNldCwgY29uZmlnLCBPYmplY3QuYXNzaWduKHt9LCBlbnRyeSwge1xuICAgICAgICB4OiBlbGVtZW50LngsXG4gICAgICAgIHk6IGVsZW1lbnQueSxcbiAgICAgICAgd2lkdGg6IGVsZW1lbnQud2lkdGgsXG4gICAgICAgIGhlaWdodDogZWxlbWVudC5oZWlnaHQsXG4gICAgICAgIGhhc2hfdmFsdWU6IGVsZW1lbnQuaGFzaF92YWx1ZVxuICAgICAgfSksIHNwbURhdGEpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrU3RhcnQgKGV4cG9zdXJlVGltZSwgZW50cnksIGNvbmZpZykge1xuICAgIC8vIHZhciBzaXplID0gMDtcbiAgICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gICAgdmFyIF9oYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLmhhc2hNYXAgfHwge307ICAgIFxuICAgIHZhciB0ZW1wcyA9IFtdO1xuICAgIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuICAgICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gdmFyIHN0cmluZyA9IGNvbmZpZy5sb2drZXkgKyAnXycgKyBjb25maWcuY3NzU2VsZWN0b3IgKyAnXydcbiAgICAgICAgLy8gICAgICAgICAgICAgICsgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IgKyAnXycgKyBvcHRzLmlkICsgSlNPTi5zdHJpbmdpZnkob3B0cy5kYXRhc2V0KTtcbiAgICAgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGVudHJ5LCBjb25maWcpO1xuICAgICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuICAgICAgICBpZiAodi5zdGF0dXMgPT09IDAgJiYgdi5leHBDb25maWcgJiYgaGFzaCA9PT0gdi5oYXNoX3ZhbHVlKSB7XG4gICAgICAgICAgdmFyIF9lbGVQb3MgPSBlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QgfHwge307XG4gICAgICAgICAgaWYgKF9lbGVQb3Mud2lkdGggJiYgX2VsZVBvcy5oZWlnaHQpIHtcbiAgICAgICAgICAgIHYuZGF0YXNldCA9IGVudHJ5LmRhdGFzZXQ7XG4gICAgICAgICAgICB2LnggPSBfZWxlUG9zLmxlZnQ7XG4gICAgICAgICAgICB2LnkgPSBfZWxlUG9zLnRvcDtcbiAgICAgICAgICAgIHYud2lkdGggPSBfZWxlUG9zLndpZHRoO1xuICAgICAgICAgICAgdi5oZWlnaHQgPSBfZWxlUG9zLmhlaWdodDtcbiAgICAgICAgICAgIHYuc2l6ZSA9IF9lbGVQb3Mud2lkdGggKiBfZWxlUG9zLmhlaWdodDtcbiAgICAgICAgICAgIC8vIFJheOahhuaetuWGhe+8jOa3mOWuneWwj+eoi+W6jyDpgJrov4cgdGhyZXNob2xkcywgb2JzZXJ2ZXIub2JzZXJ2ZSDmsqHmnIljYWxsYmFja+i/lOWbnu+8jOWboOatpOaUueaIkOm7mOiupOWAvOS4ujBcbiAgICAgICAgICAgIHZhciBkZWZhdWx0UmF0aW8gPSBfY29uZmlnLkFVVE9fQVRfVklFV19SQVRFO1xuICAgICAgICAgICAgaWYgKGVudHJ5LmludGVyc2VjdGlvblJhdGlvID49IGRlZmF1bHRSYXRpbykge1xuICAgICAgICAgICAgICB2LmV4cG9zdXJlVGltZSA9IGV4cG9zdXJlVGltZTtcbiAgICAgICAgICAgICAgdi5zdGF0dXMgPSAxOyAvLyDmm53lhYnnirbmgIFcbiAgICAgICAgICAgICAgdGVtcHMucHVzaCh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRlbXBzO1xuICB9XG59O1xuXG5leHBvcnRzLnJlc2V0ID0gZnVuY3Rpb24gKCkge307XG5cbmV4cG9ydHMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB3YXRjaFRyYWNrZXIuY2xlYXJSZWNvcmQoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICBvYnNlcnZlcnNbaV0uZGlzY29ubmVjdCgpO1xuICB9XG4gIG9ic2VydmVycyA9IFtdO1xuICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuICBmb3IgKHZhciBsb2drZXkgaW4gX2hhc2hNYXApIHtcbiAgICBkZWxldGUgX2hhc2hNYXBbbG9na2V5XTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19leHAvY29sbGVjdF9leHAuanNcbi8vIG1vZHVsZSBpZCA9IDUzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG52YXIgdXRpbE1ldGEgPSByZXF1aXJlKCdAdXRpbHMvdXRpbE1ldGEnKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbmV4cG9ydHMuREFUQV9BUExVU19BRV9LRVkgPSAnZGF0YS1hcGx1cy1hZSc7XG5leHBvcnRzLkRBVEFfQVBMVVNfQUNfS0VZID0gJ2RhdGEtYXBsdXMtY2xrJztcbmV4cG9ydHMuREFUQV9BUExVU19TUE1fQU5DSE9SX0lEX0tFWSA9ICdkYXRhLXNwbS1hbmNob3ItaWQnO1xuZXhwb3J0cy5EQVRBX0FQTFVTX1ZUX0lURU1fSU5ERVhfS0VZID0gJ2RhdGEtYXBsdXMtdnQtcG9zJztcblxuLy8g5LiN5pSv5oyBb2JzZXJ2ZXLnmoTmg4XlhrXkuIvvvIzova7or6Lpl7TpmpTvvIhtcylcbmV4cG9ydHMuTE9PUF9USU1FID0gMTAwMDtcblxuZXhwb3J0cy5nZXREZWZhdWx0UmVxdWVzdENmZyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBwa2dTaXplOiAxMFxuICB9O1xufTtcblxuZnVuY3Rpb24gZ2V0TWV0YVZhbHVlIChrZXkpIHtcbiAgaWYgKGFwbHVzICYmIGFwbHVzLmdldE1ldGFJbmZvKSB7XG4gICAgcmV0dXJuIGFwbHVzLmdldE1ldGFJbmZvKGtleSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHV0aWxNZXRhLmdldE1ldGFDbnQoa2V5KTtcbiAgfVxufVxuXG4vLyDoh6rliqjmm53lhYnmiZPngrkgLSDliKTlrprlj6/op4bnmoTmr5TkvovnjodcbnZhciBnZXRBdXRvRXhwVmlld1JhdGUgPSBmdW5jdGlvbihkZWZhdWx0X3ZhbHVlKSB7XG4gIHZhciByYXRlID0gZGVmYXVsdF92YWx1ZTtcbiAgdHJ5IHtcbiAgICB2YXIgdmlzaWJsZV9yYXRlID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC12aXNpYmxlJyk7XG4gICAgaWYgKHZpc2libGVfcmF0ZSkge1xuICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQodmlzaWJsZV9yYXRlKTtcbiAgICB9XG4gICAgaWYgKHJhdGUgPD0gMCkge1xuICAgICAgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgICByYXRlID0gZGVmYXVsdF92YWx1ZTtcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gcmF0ZTtcbiAgfVxufTtcbmV4cG9ydHMuQVVUT19BVF9WSUVXX1JBVEUgPSBnZXRBdXRvRXhwVmlld1JhdGUoMC4zKTtcblxuLy8gdmFyIEVYUF9ERUJPVU5DRV9EVVJBVElPTiA9IDEwMDsgLy8gZGVib3VjZSBkdXJhdGlvbiAxMDBtc1xuXG4vKipcbiAqIOacieaViOabneWFieaXtumVv+W6lee6vyAtIOavq+enkuaVsChtcylcbiAqIEBwYXJhbXMge051bWJlcn0gZGVmYXVsdF92YWx1ZSBpcyAzMDBtc1xuICogQHJldHVybiB7TnVtYmVyfSBkdXJhdGlvblxuICovXG52YXIgZ2V0QXV0b0V4cER1cmF0aW9uID0gZnVuY3Rpb24oZGVmYXVsdF92YWx1ZSkge1xuICB2YXIgZHVyYXRpb24gPSBkZWZhdWx0X3ZhbHVlO1xuICB0cnkge1xuICAgIHZhciB0bXBfZHVyYXRpb24gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLWR1cmF0aW9uJyk7XG4gICAgdmFyIGR1cmF0aW9uX24gPSBwYXJzZUludCh0bXBfZHVyYXRpb24pO1xuICAgIGlmICgoZHVyYXRpb25fbiArICcnKSAhPT0gJ05hTicpIHtcbiAgICAgIGR1cmF0aW9uID0gZHVyYXRpb25fbjtcbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBkdXJhdGlvbjtcbiAgfVxufTtcbmV4cG9ydHMuRVhQX0RVUkFUSU9OID0gZ2V0QXV0b0V4cER1cmF0aW9uKDMwMCk7IC8v6buY6K6kMzAwbXNcblxuLy8gZGVib3VjZSBkdXJhdGlvbiAxMDBtc1xuLy8gZXhwb3J0cy5nZXREZWJvdW5jZUR1cmF0aW9uID0gZnVuY3Rpb24gKCkge1xuLy8gICByZXR1cm4gRVhQX0RFQk9VTkNFX0RVUkFUSU9OO1xuLy8gfTtcblxuLyoqXG4gKiDojrflj5boh6rliqjmm53lhYnphY3nva7pobnvvIzlubblsIZmaWx0ZXLjgIF0YWflkoxjc3NTZWxlY3RvcuWQiOW5tuS4umVsZW1lbnRTZWxlY3RvclxuICogVE9ETyBKU09OLnBhcnNlIOS7heaUr+aMgUlFOOWPiuS7peS4iua1j+iniOWZqCA9PiBqcyBhcGlcbiAqIEBwYXJhbXMga2V5IHtTdHJpbmd9ICdhcGx1cy1hdXRvLWV4cCcvJ2FwbHVzLWF1dG8tY2xrJ1xuICogQHJldHVybiB7QXJyYXl9IFt7XG4gKiAgICBsb2drZXk6IC9hLmIuYzEsXG4gKiAgICBlbGVtZW50U2VsZWN0b3I6ICdkaXZbc2NtPTEyMzRdJyxcbiAqICAgIHRhZzogZGl2LFxuICogICAgZmlsdGVyOiBzY209MTIzNFxuICogICAgcG9zaXRpb25TZWxlY3RvcjogdHJ1ZS8ucGFyZW50Q2xhc3NuYW1lIC8vIOebuOWvueWumuS9jeS4muWKoeWfi+eCuVxuICogfSwge1xuICogICAgbG9na2V5OiAvYS5iLmMyLFxuICogICAgZWxlbWVudFNlbGVjdG9yOiAncFtzY209MjM0NV0ub25lJyxcbiAqICAgIHRhZzogcCxcbiAqICAgIGZpbHRlcjogc2NtPTIzNDUsXG4gKiAgICBjc3NTZWxlY3RvcjogLm9uZVxuICogfSwge1xuICogICAgbG9na2V5OiAvYS5iLmMzLFxuICogICAgZWxlbWVudFNlbGVjdG9yOiAncFtkYXRhLXNwbS1jbGlja10nLFxuICogICAgdGFnOiBwLFxuICogICAgZmlsdGVyOiBkYXRhLXNwbS1jbGlja1xuICogfV1cbiAqL1xudmFyIGdldEF1dG9Db25maWcgPSBmdW5jdGlvbihjb25maWdLZXksIG1ldGFPYmopIHtcbiAgdmFyIGNvbmZpZ3MgPSBbXTtcbiAgLy8gdmFyIHRtcF9sb2drZXlzID0gW107XG4gIHZhciB0bXBfdGFnX2ZpbHRlciA9IFtdO1xuICB2YXIgYXBsdXNBdXRvRXhwO1xuICB0cnkge1xuICAgIGFwbHVzQXV0b0V4cCA9IG1ldGFPYmogfHwgZ2V0TWV0YVZhbHVlKGNvbmZpZ0tleSk7XG4gICAgdmFyIHRlbXBzID0gW107XG4gICAgaWYgKGFwbHVzQXV0b0V4cCAmJiB0eXBlb2YgYXBsdXNBdXRvRXhwID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGVtcHMgPSBKU09OLnBhcnNlKGFwbHVzQXV0b0V4cCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRlbXBzID0gSlNPTi5wYXJzZShhcGx1c0F1dG9FeHAucmVwbGFjZSgvJy9nLCAnXCInKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXBsdXNBdXRvRXhwID09PSAnb2JqZWN0JyAmJiBhcGx1c0F1dG9FeHAuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICB0ZW1wcyA9IGFwbHVzQXV0b0V4cDtcbiAgICB9XG4gICAgaWYgKHRlbXBzICYmIHRlbXBzLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG1wID0gdGVtcHNbaV0gfHwge307XG4gICAgICAgIHZhciBsb2drZXkgPSB0bXAubG9na2V5IHx8ICcnO1xuICAgICAgICB2YXIgdGFnID0gdG1wLnRhZyA/IHRtcC50YWcgOiAnJztcbiAgICAgICAgdmFyIGZpbHRlciA9IHRtcC5maWx0ZXI7XG4gICAgICAgIHZhciBjc3NTZWxlY3RvciA9IHRtcC5jc3NTZWxlY3RvcjtcbiAgICAgICAgdmFyIHdob2xlU2VsZWN0b3IgPSBjc3NTZWxlY3RvciB8fCAodGFnICYmIGZpbHRlcik7XG4gICAgICAgIGlmICghbG9na2V5IHx8ICF3aG9sZVNlbGVjdG9yKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgJyArIEpTT04uc3RyaW5naWZ5KHRtcCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDIwMTctMTEtMjMg5omL5reY5o6l5YWl5ZKMbGF6YWRh5Lia5Yqh6ZyA5rGC77yM5YWB6K64bG9na2V56YeN5aSNXG4gICAgICAgIC8vIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0bXBfbG9na2V5cywgbG9na2V5KSA+IC0xKSB7XG4gICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgbG9na2V5ICcgKyBsb2drZXkgKyAnIHJlcGVhdGVkJyk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgZmlsdGVyID0gdHlwZW9mIGZpbHRlciA9PT0gJ3N0cmluZycgPyBmaWx0ZXIuc3BsaXQoXCI9XCIpIDogW107XG4gICAgICAgIHZhciB0YWdfZmlsdGVyID0gdGFnO1xuICAgICAgICBpZiAoZmlsdGVyLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgdGFnX2ZpbHRlciArPSAnWycgKyBmaWx0ZXIuc2hpZnQoKSArICc9XCInICsgZGVjb2RlVVJJQ29tcG9uZW50KGZpbHRlci5qb2luKCcnKSkgKyAnXCJdJztcbiAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXIubGVuZ3RoID09IDEgJiYgZmlsdGVyWzBdKSB7XG4gICAgICAgICAgdGFnX2ZpbHRlciArPSAnWycgKyBkZWNvZGVVUklDb21wb25lbnQoZmlsdGVyWzBdKSArICddJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3NzU2VsZWN0b3IpIHtcbiAgICAgICAgICB0YWdfZmlsdGVyICs9IGNzc1NlbGVjdG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgdG1wLmVsZW1lbnRTZWxlY3RvciA9IHRhZ19maWx0ZXI7XG4gICAgICAgIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0bXBfdGFnX2ZpbHRlciwgdGFnX2ZpbHRlcikgPiAtMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsIHRhZ19maWx0ZXJfY3NzU2VsZWN0b3IgJyArIHRhZ19maWx0ZXIgKyAnIHJlcGVhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdG1wX2xvZ2tleXMucHVzaChsb2drZXkpO1xuICAgICAgICB0bXBfdGFnX2ZpbHRlci5wdXNoKHRhZ19maWx0ZXIpO1xuICAgICAgICBjb25maWdzLnB1c2godG1wKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIC8vIFRPRE8g55uR5o6n6L+Z5Z2X5YaF5a65XG4gICAgdWxvZygpLncoZXJyKTtcbiAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgLy8gICBtc2c6IGVyclxuICAgIC8vIH0pO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBjb25maWdzO1xuICB9XG59O1xuXG4vKipcbiAqIOiOt+WPluabneWFieiHquWKqOmHh+mbhueahOmFjee9rumhuVxuICovXG5leHBvcnRzLmdldEF1dG9FeHBDb25maWcgPSBmdW5jdGlvbihtZXRhT2JqKSB7XG4gIHJldHVybiBnZXRBdXRvQ29uZmlnKCdhcGx1cy1hdXRvLWV4cCcsIG1ldGFPYmopIHx8IFtdO1xufTtcbi8qKlxuICog6I635Y+W5pud5YWJ6Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG4gKi9cbmV4cG9ydHMuZ2V0QXV0b0V4cFVzZXJGbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYWVBdXRvVXNlckZuID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC11c2VyZm4nKTtcbiAgaWYgKGFlQXV0b1VzZXJGbikge1xuICAgIHZhciBmbiA9IHdpbmRvd1thZUF1dG9Vc2VyRm5dIHx8IGFlQXV0b1VzZXJGbjtcbiAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gZm47XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gPG1ldGEgbmFtZT1cImFwbHVzLWF1dG8tZXhwLXdhdGNoZG9tXCIgY29udGVudD1cInRocm90dGxlXCIgLz5cbmV4cG9ydHMuaXNUaHJvdHRsZVdhdGNoRG9tID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcnMgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBycyA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtd2F0Y2hkb20nKSA9PT0gJ3Rocm90dGxlJztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBycztcbn07XG4vKipcbiAqIOiOt+WPlueCueWHu+iHquWKqOmHh+mbhueahOmFjee9rumhuVxuICovXG5leHBvcnRzLmdldEF1dG9DbGtDb25maWcgPSBmdW5jdGlvbihtZXRhT2JqKSB7XG4gIHJldHVybiBnZXRBdXRvQ29uZmlnKCdhcGx1cy1hdXRvLWNsaycsIG1ldGFPYmopIHx8IFtdO1xufTtcbi8qKlxuICog6I635Y+W54K55Ye76Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG4gKi9cbmV4cG9ydHMuZ2V0QXV0b0Nsa1VzZXJGbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYWNBdXRvVXNlckZuID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWNsay11c2VyZm4nKTtcbiAgaWYoIGFjQXV0b1VzZXJGbiApe1xuICAgIHZhciBmbiA9IHdpbmRvd1thY0F1dG9Vc2VyRm5dIHx8IGFjQXV0b1VzZXJGbjtcbiAgICBpZiggdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICl7XG4gICAgICByZXR1cm4gZm47XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9jb21tb24vY29uZmlnLmpzXG4vLyBtb2R1bGUgaWQgPSA1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pON5L2cbWV0YeeahOW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfaGVhZF9ub2RlO1xudmFyIF9tZXRhX25vZGVzO1xuXG52YXIgdXRpbEF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4vdXRpbEF0dHJpYnV0ZScpO1xuLyoqXG4gKiDlj5blvpfpobXpnaLkuIogaGVhZCDkuK3nmoTmiYDmnIkgbWV0YSDlhYPntKBcbiAqIEBwYXJhbSBbZm9yY2VdIHtib29sZWFufSDmmK/lkKblvLrliLbojrflj5bmlrDlhoXlrrlcbiAqL1xuZnVuY3Rpb24gZ2V0TWV0YVRhZ3MoZm9yY2UpIHtcbiAgX2hlYWRfbm9kZSA9IF9oZWFkX25vZGUgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcblxuICBpZiAoX21ldGFfbm9kZXMgJiYgIWZvcmNlKSB7XG4gICAgcmV0dXJuIF9tZXRhX25vZGVzO1xuICB9XG5cbiAgcmV0dXJuIF9oZWFkX25vZGUgPyAoX21ldGFfbm9kZXMgPSBfaGVhZF9ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdtZXRhJykpIDogW107XG59O1xuZXhwb3J0cy5nZXRNZXRhVGFncyA9IGdldE1ldGFUYWdzO1xuXG4vKipcbiAqIOWPluW+lyBoZWFkIC8gbWV0YSDkuK3mjIflrpogbWV0YSDnmoQgKGF0dHIgfHwgY29udGVudCkg5YC8XG4gKiA8bWV0YSBuYW1lPVwiYXBsdXMtdGVybWluYWxcIiBjb250ZW50PVwiMVwiPlxuICovXG5mdW5jdGlvbiBnZXRNZXRhQ250KG5hbWUsIGF0dHIpIHtcbiAgdmFyIGk7XG4gIHZhciBtZXRhO1xuICB2YXIgbWV0YV9ub2RlcyA9IGdldE1ldGFUYWdzKCk7XG4gIHZhciBsID0gbWV0YV9ub2Rlcy5sZW5ndGg7XG4gIHZhciBjb250ZW50O1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBtZXRhID0gbWV0YV9ub2Rlc1tpXTtcbiAgICBpZiAodXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCAnbmFtZScpID09PSBuYW1lKSB7XG4gICAgICBjb250ZW50ID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCBhdHRyIHx8ICdjb250ZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvbnRlbnQgfHwgJyc7XG59O1xuZXhwb3J0cy5nZXRNZXRhQ250ID0gZ2V0TWV0YUNudDtcblxuXG4vKipcbiAqIOehruWumiBoZWFkIC8gbWV0YSDkuK3nmoQgaXNvbmVwYWdlIOeahOaVsOaNrlxuICog5b2i5aaC77yaXG4gKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjBcIiAvPiDooajnpLrkuI3mmK9vbmVwYWdlXG4gKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjF8aHR0cDovL2g1Lm0udGFvYmFvLmNvbS93ZS9pbmRleC5odG0jZGV0YWlsXCIgLz4g6KGo56S65pivb25lcGFnZVxuICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gZ2V0T25lUGFnZUluZm8obWV0YUluZm8pIHtcbiAgdmFyIG9iaiA9IHtcbiAgICBpc29uZXBhZ2U6ICctMScsXG4gICAgdXJscGFnZW5hbWU6ICcnXG4gIH07XG4gIHZhciBtZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCk7XG4gIGlmIChtZXRhX2luZm8gJiYgbWV0YV9pbmZvLmhhc093blByb3BlcnR5KCdpc29uZXBhZ2VfZGF0YScpKSB7XG4gICAgb2JqLmlzb25lcGFnZSA9IG1ldGFfaW5mby5pc29uZXBhZ2VfZGF0YS5pc29uZXBhZ2U7XG4gICAgb2JqLnVybHBhZ2VuYW1lID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLnVybHBhZ2VuYW1lO1xuICB9IGVsc2Uge1xuICAgIHZhciBjb250ZW50ID0gZ2V0TWV0YUNudCgnaXNvbmVwYWdlJykgfHwgJy0xJztcbiAgICB2YXIgYXJyX2NvbnRlbnQgPSBjb250ZW50LnNwbGl0KFwifFwiKTtcbiAgICBvYmouaXNvbmVwYWdlID0gYXJyX2NvbnRlbnRbMF07XG4gICAgb2JqLnVybHBhZ2VuYW1lID0gYXJyX2NvbnRlbnRbMV0gPyBhcnJfY29udGVudFsxXSA6IFwiXCI7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5leHBvcnRzLmdldE9uZVBhZ2VJbmZvID0gZ2V0T25lUGFnZUluZm87XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsTWV0YS5qc1xuLy8gbW9kdWxlIGlkID0gNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMudHJ5VG9HZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyX25hbWUpIHtcbiAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUgPyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cl9uYW1lKSB8fCAnJykgOiAnJztcbn07XG5cbnZhciB0cnlUb1NldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyX25hbWUsIGF0dHJfdmFsdWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcbiAgICB0cnkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cl9uYW1lLCBhdHRyX3ZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy50cnlUb1NldEF0dHJpYnV0ZSA9IHRyeVRvU2V0QXR0cmlidXRlO1xuXG5leHBvcnRzLnRyeVRvUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSkge1xuICAgIHRyeSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyX25hbWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRyeVRvU2V0QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJfbmFtZSwgJycpO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanNcbi8vIG1vZHVsZSBpZCA9IDU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog5bCP56iL5bqP5LiL6Z2i55qEc3Bt5L2T57O7XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOm+mempuSA8Y2hlbmdwaW5nLnJjcEBhbGliYWJhLWluYy5jb20+XG4gKi9cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGlzQXJyYXkgID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcbnZhciBhcGx1c1N0YXRpYyAgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzZXRMYXN0UGFnZVNwbTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMsIHt9KTsgXG4gICAgICB2YXIgc3BtID0gYXBsdXMuXyQuc3BtIHx8IHt9O1xuICAgICAgc3BtLnNwbV9jbnQgPSAnJztcbiAgICB9LFxuICAgIGxpc3RlbjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTX1FVRVVFLFtdKTsgIFxuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICAgIGFyZ3VtZW50czpbJ29uU2hvdycsZnVuY3Rpb24ob3B0KXtcbiAgICAgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMse30pOyBcbiAgICAgICAgICAgIHZhciBwYWdlcyA9IGFwbHVzLmdldE1ldGFJbmZvKCdwYWdlcycpO1xuICAgICAgICAgICAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZVBhdGggPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkocGFnZXMpKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IHBhZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmKGN1cnJlbnQubWF0Y2hVcmwgPT09IGN1cnJlbnRQYWdlUGF0aCl7XG4gICAgICAgICAgICAgICAgICBhcGx1cy5zZXRQYWdlU1BNKGN1cnJlbnQuc3BtQSwgY3VycmVudC5zcG1CKTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICAgIGFyZ3VtZW50czpbJ2NsZWFyUGFnZVNQTScsZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9zZWxmLnJlc2V0TGFzdFBhZ2VTcG0oKTtcbiAgICAgICAgfV0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW1zIGRhdGEge09iamVjdH0ge1xuICAgICAgICogICBzcG1DbnQ6ICdhLmIuMC4wJ1xuICAgICAgICogICBzcG1Vcmw6ICdhLmIuMC4wJ1xuICAgICAgICogICBzcG1QcmU6ICdhLmIuMC4wJ1xuICAgICAgICogfVxuICAgICAgICovXG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOmFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICAgICAgYXJndW1lbnRzOlsnc2V0UGFnZVNQTScsZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMsIHt9KTsgXG4gICAgICAgICAgICB2YXIgc3BtID0gYXBsdXMuXyQuc3BtIHx8IHt9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKSB8fCBbXTtcbiAgICAgICAgICAgIHZhciBzcG1hYiA9IGRhdGEuc3BtQ250ID8gZGF0YS5zcG1DbnQuc3BsaXQoJy4nKSA6IFtzcG0uZGF0YS5hIHx8ICcwJywgc3BtLmRhdGEuYiB8fCAnMCddO1xuICAgICAgICAgICAgaWYgKHNwbWFiLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICBzcG1hYiA9IHNwbWFiLmNvbmNhdChbJzAnLCAnMCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzcG1hYnN0ciA9IHNwbWFiLmpvaW4oJy4nKTtcblxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB2YXIgcHJlUGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDJdIHx8IHt9O1xuICAgICAgICAgICAgdmFyIHByZVByZVBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAzXSB8fCB7fTtcblxuICAgICAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDAgJiYgY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICAgICAgcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0uc3BtID0gc3BtYWJzdHI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZVNwbSA9IHNwbS5kYXRhICYmIHNwbS5kYXRhLmEgPyBbc3BtLmRhdGEuYSwgc3BtLmRhdGEuYiwgc3BtLmRhdGEuYyB8fCAnMCcsIHNwbS5kYXRhLmQgfHwgJzAnXS5qb2luKCcuJykgOiAnJztcbiAgICAgICAgICAgIHNwbS5kYXRhLmEgPSBzcG1hYlswXSA/ICcnICsgc3BtYWJbMF0gOiAnMCc7XG4gICAgICAgICAgICBzcG0uZGF0YS5iID0gc3BtYWJbMV0gPyAnJyArIHNwbWFiWzFdIDogJzAnO1xuICAgICAgICAgICAgc3BtLmRhdGEuYyA9ICcwJztcbiAgICAgICAgICAgIHNwbS5kYXRhLmQgPSAnMCc7XG4gICAgICAgICAgICBzcG0ucGFnZV9yZWZlcnJlciA9IHBhZ2VzLmxlbmd0aCA+IDEgJiYgY3VycmVudFBhZ2UgPyAoY3VycmVudFBhZ2Uucm91dGUgfHwgY3VycmVudFBhZ2UuaXMpIDogJyc7XG4gICAgICAgICAgICBzcG0uc3BtX2NudCA9IHNwbWFic3RyO1xuXG4gICAgICAgICAgICAvLyDku6XnlKjmiLflnKhVUkzkuIrmi7zmjqXnmoRzcG3kuLrlh4bvvIxhcGx1cy5zcG1fb3JpZ27mnaXmupDkuo5hdXRvX2luaXQvaW5qZWN0X2FwcC5qc1xuICAgICAgICAgICAgdmFyIHNwbV9vcmlnbiA9IGFwbHVzLnNwbV9vcmlnbiB8fCBzcG0uc3BtX29yaWduO1xuICAgICAgICAgICAgc3BtLnNwbV9wcmUgPSBkYXRhLnNwbVByZSB8fCBzcG0uc3BtX3VybCB8fCBwcmVQcmVQYWdlLnNwbSB8fCAnJztcbiAgICAgICAgICAgIHNwbS5zcG1fdXJsID0gZGF0YS5zcG1VcmwgfHwgY3VycmVudFBhZ2VTcG0gfHwgcHJlUGFnZS5zcG0gfHwgc3BtX29yaWduIHx8ICAnJztcbiAgICAgICAgICAgIGFwbHVzLl8kLnNwbSA9IHNwbTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2V0UGFnZVNQTSBlcnJvciwgdGhlIGVycm9ySW5mbyBpcyAnLCBlKTtcbiAgICAgICAgICAgIHVsb2coKS53KCdzZXRQYWdlU1BNIGVycm9yLCB0aGUgZXJyb3JJbmZvIGlzICcsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgfV0sXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmxpc3RlbigpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbWluaV9zcG0uanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiBhcGx1c19taW5pX3JlcG9ydF91bS5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgTWFpbiA9IHJlcXVpcmUoJy4vbGliX2Nvbm5lY3Rpb24vbWFpbl9taW5pX3VtX2h0dHAuanMnKTtcbiAgICAgIHZhciBtYWluID0gTWFpbi5jcmVhdGUoKTtcbiAgICAgIG1haW4ucnVuKHRoaXMub3B0aW9ucyk7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX21pbmlfcmVwb3J0X3VtLmpzXG4vLyBtb2R1bGUgaWQgPSA1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogbWFpbl9taW5pX3VtX2h0dHAuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuLy8gdmFyIGxvZ19jbG91ZCA9IHJlcXVpcmUoJy4vbG9nX2Nsb3VkJyk7XG52YXIgbWFpbl9iYXNlX2h0dHAgPSByZXF1aXJlKCcuL21haW5fYmFzZV9odHRwJyk7XG52YXIgZXZlbnRNYW5hZ2VyID0gcmVxdWlyZSgnLi4vbGliX3VtL2V2ZW50TWFuYWdlcicpO1xudmFyIHJlcXVlc3RRdWV1ZSA9IHJlcXVpcmUoJy4uL2xpYl91bS9yZXF1ZXN0UXVldWUnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL2xpYl91bS91dGlscycpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xuXG5mdW5jdGlvbiBoYW5kbGVFdmVudChpZCwgb3B0aW9ucykge1xuICB1bG9nKCkudignZXZlbnQ6ICcsIGlkLCBvcHRpb25zKTtcbiAgXG4gIGlmICh1dGlscy5jaGVja0V2ZW50KGlkLCBvcHRpb25zKSkge1xuICAgIHZhciBldmVudCA9IHJlcXVpcmUoJy4uL2xpYl91bS9ldmVudC5qcycpKGlkLCBvcHRpb25zKTtcbiAgICBldmVudE1hbmFnZXIoKS5hZGRFdmVudChldmVudCk7XG5cbiAgICByZXF1ZXN0UXVldWUoKS5zZW5kKHV0aWxzLkRhdGFUeXBlLkVLViwgeyBub0NhY2hlOiBmYWxzZSB9LCBmdW5jdGlvbigpe1xuICAgICAgdWxvZygpLmkoJ2V2ZW50IHNlbmQgc3VjY2VzczogJywgaWQsIGV2ZW50KTtcbiAgICB9KTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBtYWluX2Jhc2VfaHR0cC5leHRlbmQoe1xuXG4gIGhhbmRsZXJNaWRkbGV3YXJlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHVsb2coKS5zZXREZWJ1ZyghIWFwbHVzLmdldE1ldGFJbmZvKCdERUJVRycpKTtcbiAgICB2YXIgdXNlckV2ZW50QXJncywgZ29rZXk7XG4gICAgdmFyIGxvZ2tleSA9IGRhdGEgJiYgZGF0YS51c2VyZGF0YSAmJiBkYXRhLnVzZXJkYXRhLmxvZ2tleTtcbiAgICB2YXIgZ21rZXkgPSBkYXRhICYmIGRhdGEudXNlcmRhdGEgJiYgZGF0YS51c2VyZGF0YS5nbWtleTtcbiAgICB2YXIgbG9nZGF0YSA9IGRhdGEgJiYgZGF0YS53aGF0X3RvX3NlbmQgJiYgZGF0YS53aGF0X3RvX3NlbmQubG9nZGF0YSAmJiBkYXRhLndoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuICAgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuICAgIHZhciBwYWdlX25hbWU7XG4gICAgaWYgKGdta2V5ID09PSAnQ0xLJyB8fCBnbWtleSA9PT0gJ0VYUCcgfHwgZ21rZXkgPT09ICdPVEhFUicgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfU1RBUlQgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG4gICAgICB1c2VyRXZlbnRBcmdzID0gY2xvbmVEZWVwKGRhdGEgJiYgZGF0YS51c2VyZGF0YSAmJiBkYXRhLnVzZXJkYXRhLmdva2V5KSB8fCB7fTtcbiAgICAgIGdva2V5ID0gbG9nZGF0YS5nb2tleSB8fCB7fTtcbiAgICAgIHZhciBldmVudF9hcmdzO1xuICAgICAgdmFyIHNka0FyZ3MgPSB7fTtcbiAgICAgIGlmIChsb2drZXkgPT09ICckJF9zaGFyZScpIHtcbiAgICAgICAgc2RrQXJncy5yZWZlcl9wYWdlID0gbG9nZGF0YS51cmw7XG4gICAgICAgIHNka0FyZ3Muc2hhcmVfdHlwZSA9IHVzZXJFdmVudEFyZ3Muc2hhcmVfdHlwZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdva2V5LnNjZW5lKSB7XG4gICAgICAgIHNka0FyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG4gICAgICB9XG5cbiAgICAgIC8vICQkX2FwcF9saW5r5LqL5Lu255qEdGFyZ2V0QXBwS2V5XG4gICAgICBpZihnb2tleS50YXJnZXRBcHBLZXkpIHtcbiAgICAgICAgc2RrQXJncy50YXJnZXRBcHBLZXkgPSB1c2VyRXZlbnRBcmdzLnRhcmdldEFwcEtleTtcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MudGFyZ2V0QXBwS2V5O1xuICAgICAgfVxuICAgICAgXG4gICAgICBwYWdlX25hbWUgPSB1c2VyRXZlbnRBcmdzWydkYXRhLXBhZ2VuYW1lJ10gfHwgdXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgKHVzZXJFdmVudEFyZ3Muc3BtICYmIHVzZXJFdmVudEFyZ3Muc3BtLmIpIHx8IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgbG9nZGF0YS51cmwgfHwgJyc7XG4gICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcbiAgICAgIFxuICAgICAgc2RrQXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG4gICAgICBpZiAodXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddKSB7XG4gICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzLnBhZ2VfbmFtZTtcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3NbJ2RhdGEtcGFnZW5hbWUnXTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSkge1xuICAgICAgICBzZGtBcmdzLmdwID0gZ3A7XG4gICAgICB9XG5cbiAgICAgIGlmICh1c2VyRXZlbnRBcmdzLnNwbSkge1xuICAgICAgICBzZGtBcmdzWydzcG0tY250J10gPSBbZW5jb2RlVVJJQ29tcG9uZW50KHBhZ2VfbmFtZSksIHVzZXJFdmVudEFyZ3Muc3BtLmMsIHVzZXJFdmVudEFyZ3Muc3BtLmRdLmZpbHRlcihmdW5jdGlvbih2KXtcbiAgICAgICAgICByZXR1cm4gISF2O1xuICAgICAgICB9KS5qb2luKCcuJyk7XG4gICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzLnNwbTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNsb25lUCA9IGNsb25lRGVlcCh1c2VyRXZlbnRBcmdzKTtcbiAgICAgIGZvciAodmFyIGsgaW4gY2xvbmVQKSB7XG4gICAgICAgIGlmICh0eXBlb2YgayA9PT0gJ3N0cmluZycgJiYgdXRpbHMuc3RhcnRzV2l0aChrLCAnXycpKSB7XG4gICAgICAgICAgc2RrQXJnc1trXSA9IGNsb25lUFtrXTtcbiAgICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJnc1trXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX1NUQVJUIHx8IGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX0VORCkge1xuICAgICAgICBldmVudF9hcmdzID0gdXRpbERhc2guYXNzaWduKHNka0FyZ3MsIHVzZXJFdmVudEFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnRfYXJncyA9IHV0aWxEYXNoLmFzc2lnbihzZGtBcmdzLCB7IGN1c3A6IHVzZXJFdmVudEFyZ3MgfSk7XG4gICAgICB9XG4gICAgICBoYW5kbGVFdmVudChsb2drZXksIGV2ZW50X2FyZ3MpO1xuICAgIH0gZWxzZSBpZiAobG9nZGF0YS5ldmVudF9jb2RlID09PSAnMjAwMScpIHsgXG4gICAgICB2YXIgcHZhcmdzID0ge307XG4gICAgICB2YXIgcGFnZV9pZCA9IGFwbHVzU3RhdGljLlBBR0VfU1RBUlQ7XG4gICAgICBnb2tleSA9IGNsb25lRGVlcChsb2dkYXRhLmdva2V5KSB8fCB7fTtcbiAgICAgIFxuICAgICAgcGFnZV9uYW1lID0gZ29rZXkucGFnZV9uYW1lIHx8IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUobG9nZGF0YS51cmwpIHx8IGxvZ2RhdGEudXJsIHx8ICcnO1xuICAgICAgcHZhcmdzLnIgPSBsb2dkYXRhLmFyZzEgfHwgbG9nZGF0YS5sb2drZXkgfHwgJy0nO1xuICAgICAgcHZhcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcbiAgICAgIGlmIChnb2tleS5fcGFnZV9hdXRvX3B2KSB7XG4gICAgICAgIHB2YXJncy5pc19hdXRvID0gMTtcbiAgICAgICAgcHZhcmdzLnVybCA9IGdva2V5LnBhdGggfHwgJy0nO1xuICAgICAgICBwdmFyZ3MucmVmX3VybCA9IGdva2V5LnJlZmVycmVyO1xuICAgICAgICBkZWxldGUgZ29rZXkuX3BhZ2VfYXV0b19wdjtcbiAgICAgICAgZGVsZXRlIGdva2V5LnJlZmVycmVyO1xuICAgICAgICBkZWxldGUgZ29rZXkucGF0aDtcbiAgICAgICAgZGVsZXRlIGdva2V5LnBhZ2VfbmFtZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHB2YXJncy5pc19hdXRvID0gMDtcbiAgICAgICAgcHZhcmdzLnVybCA9IGxvZ2RhdGEudXJsIHx8ICctJztcbiAgICAgICAgcHZhcmdzLnJlZl91cmwgPSBsb2dkYXRhLnByZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGdva2V5LmR1cmF0aW9uKSB7XG4gICAgICAgIHB2YXJncy5kdXJhdGlvbiA9IGdva2V5LmR1cmF0aW9uO1xuICAgICAgICBkZWxldGUgZ29rZXkuZHVyYXRpb247XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICghdXRpbERhc2guaXNFbXB0eU9iamVjdChncCkpIHtcbiAgICAgICAgcHZhcmdzLmdwID0gZ3A7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChnb2tleS5zY2VuZSkge1xuICAgICAgICBwdmFyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG4gICAgICB9XG4gICAgICBnb2tleSA9IHV0aWxzLmRlbGV0ZUluZm8oZ29rZXksIFsnX2Fub255X2lkJywgJ19kZXZfaWQnLCAnX3Nlc3Npb25faWQnLCAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaycsICd1YWlkJywgJ3B2aWQnLCAnc2NlbmUnXSk7XG4gICAgICBwdmFyZ3NbJ3NwbS1jbnQnXSA9IGVuY29kZVVSSUNvbXBvbmVudChwYWdlX25hbWUpO1xuICAgICAgaWYgKGdva2V5Ll9wYWdlX2F1dG9faWQpIHtcbiAgICAgICAgcGFnZV9pZCA9IGdva2V5Ll9wYWdlX2F1dG9faWQ7XG4gICAgICAgIGRlbGV0ZSBnb2tleS5fcGFnZV9hdXRvX2lkO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ29rZXkucGFnZV9zdGFydCkge1xuICAgICAgICBwdmFyZ3MucGFnZV9zdGFydCA9IGdva2V5LnBhZ2Vfc3RhcnQ7XG4gICAgICAgIGRlbGV0ZSBnb2tleS5wYWdlX3N0YXJ0O1xuICAgICAgfVxuXG4gICAgICAvLyBpZiAoZ29rZXkucGFnZV9uYW1lKSB7XG4gICAgICAvLyBkZWxldGUgZ29rZXkucGFnZV9uYW1lO1xuICAgICAgLy8gfVxuICAgICAgXG4gICAgICBoYW5kbGVFdmVudChwYWdlX2lkLCB1dGlsRGFzaC5hc3NpZ24ocHZhcmdzLCB7IGN1c3A6IGdva2V5fSApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coMjIyMiwgZGF0YSk7XG4gICAgfVxuICB9LFxuXG4gIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy53YXRjaExPRygpO1xuICB9XG4gIFxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfY29ubmVjdGlvbi9tYWluX21pbmlfdW1faHR0cC5qc1xuLy8gbW9kdWxlIGlkID0gNTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDmi6bmiKrlubbmjIlodHRw5Y2P6K6u5Y+R6YCB5pel5b+XXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbi8vIHZhciBsb2dfY2xvdWQgPSByZXF1aXJlKCcuL2xvZ19jbG91ZCcpO1xudmFyIHV0aWxHUSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR1EnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh7XG5cbiAgc3Vic2NyaWJlTG9nczogZnVuY3Rpb24gKGFjdGlvbiwgY2FsbGJhY2spIHtcbiAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBbYWN0aW9uLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcbiAgICAgIGlmIChvcmlEYXRhcy5zdGF0dXMgPT09IGFwbHVzU3RhdGljLkNPTVBMRVRFKSB7XG4gICAgICAgIGNhbGxiYWNrKG9yaURhdGFzKTtcbiAgICAgIH1cbiAgICB9XSk7XG4gIH0sXG5cbiAgZ2V0TG9naWNTeW1ib2w6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXQgPT09ICdBTEknID8gJyYnIDogJ3x8JztcbiAgfSxcblxuICAvKipcbiAgICog5Zyo5a2Q57G75Lit5a6e546wXG4gICAqIEBwYXJhbXMge09iamVjdH0gZGF0YVxuICAgKi9cbiAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uICgpIHt9LFxuICBcblxuICB3YXRjaExPRzogZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgXG4gICAgLy8g6K6i6ZiFcHbkuovku7ZcbiAgICBfc2VsZi5zdWJzY3JpYmVMb2dzKGFwbHVzU3RhdGljLk1XX0NIQU5HRV9QViwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsICdwdicpO1xuICAgIH0pO1xuXG4gICAgLy8g6K6i6ZiFaGpsai9hcGx1c+S6i+S7tlxuICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEosIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBfc2VsZi5oYW5kbGVyTWlkZGxld2FyZShkYXRhLCBhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy53YXRjaExPRygpO1xuICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbWFpbl9iYXNlX2h0dHAuanNcbi8vIG1vZHVsZSBpZCA9IDYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qc1xuICog5pON5L2cYXBsdXNfcXVldWXnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuL3V0aWxHb2xkbG9nJyk7XG5cbmV4cG9ydHMucHVzaEludG9Hb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoYWN0aW9uLCBhcmdzKSB7XG4gIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG5hbWVzID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gIHZhciBhcGx1c18xID0gYXBsdXNbbmFtZXNbMV1dO1xuICB2YXIgYXBsdXNfMiA9IGFwbHVzXzEgPyBhcGx1c18xW25hbWVzWzJdXSA6IG51bGw7XG5cbiAgaWYgKGFwbHVzICYmIG5hbWVzLmxlbmd0aCA9PT0gMiAmJiBhcGx1c18xKSB7XG4gICAgYXBsdXNfMS5hcHBseShhcGx1cywgYXJncyk7XG4gIH0gZWxzZSBpZiAobmFtZXMubGVuZ3RoID09PSAzICYmIGFwbHVzXzIpIHtcbiAgICBhcGx1c18yLmFwcGx5KGFwbHVzXzEsIGFyZ3MpOyAgXG4gIH0gZWxzZSB7XG4gICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGFyZ3VtZW50czogYXJnc1xuICAgIH0pO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdRLmpzXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogZXZlbnQuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaWQsIHByb3BlcnRpZXMpIHtcbiAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgZXZlbnQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBldmVudC5pZCA9IGlkO1xuICBpZiAoIXByb3BlcnRpZXMgfHwgIXByb3BlcnRpZXMudHMpIHtcbiAgICBldmVudC50cyA9IERhdGUubm93KCk7XG4gIH1cbiAgdmFyIHByb3BzVHlwZSA9IHR5cGVvZiBwcm9wZXJ0aWVzO1xuICBpZiAocHJvcHNUeXBlID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG4gICAgICAgIGV2ZW50W2tleV0gPSBwcm9wZXJ0aWVzW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcbiAgaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSkge1xuICAgIGV2ZW50WydncCddID0gZ3A7IFxuICB9XG4gIHJldHVybiBldmVudDtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vZXZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDms6jlhaVsb2dDb25maWcs5L6b5ZCO57ut5o+S5Lu25L2/55SoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGVhY2ggPSByZXF1aXJlKCcuLi9saWJfdS91dGlscy9lYWNoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIGdldExvZ0NvbmZpZzogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGxvZ0NvbmZpZyA9IHt9O1xuICAgICAgdmFyIHBsdWdpbnMgPSB0aGlzLm9wdGlvbnMuY29uZmlnLnBsdWdpbnM7XG5cbiAgICAgIGZvciAodmFyIGsgaW4gcGx1Z2lucykge1xuICAgICAgICBsb2dDb25maWdba10gPSB7XG4gICAgICAgICAgcGx1Z2luczogcGx1Z2luc1trXSxcbiAgICAgICAgICBjb250ZXh0OiB7fVxuICAgICAgICB9O1xuICAgICAgICBlYWNoKHBsdWdpbnNba10sIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgbG9nQ29uZmlnW2tdLmNvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnIHx8IHt9O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsb2dDb25maWc7XG4gICAgfSxcblxuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnID0gdGhpcy5nZXRMb2dDb25maWcoKTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5QQUdFX0xPQURfVElNRTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9hcGx1c19sb2dfaW5qZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSA2M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL2V0YWcuanNcbiAqXG4gKiDkvZznlKjvvJrlkIzmraVhcGx1c19pbml05bel5L2c5rWB55qE5L+h5oGvXG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxFdGFnID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdGFnJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgRU1QVFlfQ05BID0gJ0VNUFRZX0NOQSc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgX3N5bmNFdGFnOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgY2hlY2sgPSBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgY25hID0gbyAmJiBvLmRhdGEgPyBvLmRhdGEuY25hIDogJyc7XG4gICAgICAgIGlmICghY25hKSB7XG4gICAgICAgICAgaWYgKGFwbHVzLmZldGNoRXRhZ1N0YXR1cyA9PT0gJ1knKSB7XG4gICAgICAgICAgICAvLyDkuLrkuobop6PlhrPlubblj5Hpl67popjvvIzku45hcGx1c19xdWV1ZeaUueaIkOebtOaOpeeUqGFwbHVzLmFwbHVzX3B1YnN1YiBA6LCL5aOrIDIwMDIxLTAxLTE5XG4gICAgICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdldGFnJywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b1N5bmNFdGFnKCk7ICBcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbChldGFnU3RvcmFnZUtleSwgY25hKTtcbiAgICAgICAgICBjYWxsYmFjayhjbmEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICB2YXIgYXBsdXNfcmhvc3RfdiA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG4gICAgICB2YXIgdXJsO1xuXG4gICAgICBpZiAoYXBsdXNfcmhvc3Rfdikge1xuICAgICAgICB1cmwgPSB1dGlsRXRhZy5nZXRVcmwoe1xuICAgICAgICAgIGVnVXJsOiAoYXBsdXNfcmhvc3Rfdi5pbmRleE9mKCcvLycpID09PSAtMSA/ICcvLycgKyBhcGx1c19yaG9zdF92IDogYXBsdXNfcmhvc3RfdikgKyAnL2VnLmpzJ1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnKSB7XG4gICAgICAgICAgX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcuZWdVcmwgPSB1cmw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICAgIHZhciBldGFnU3RvcmFnZUtleSA9IGFwbHVzLmdsb2JhbENvbmZpZy5FVEFHX1NUT1JBR0VfS0VZO1xuICAgICAgdmFyIHRvU3luY0V0YWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICBhcGx1cy5mZXRjaEV0YWdTdGF0dXMgPSAnWSc7XG4gICAgICAgICAgbWluaS5yZXF1ZXN0KHVybCwge1xuICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHJlcXVlc3RNZXRob2ROYW1lOiAncmVxdWVzdCdcbiAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBhcGx1cy5mZXRjaEV0YWdTdGF0dXMgPSAnTic7XG4gICAgICAgICAgICB2YXIgZXRhZyA9ICcnO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YSB8fCAnJztcbiAgICAgICAgICAgICAgdmFyIGFyciA9IGRhdGEuc3BsaXQoJzsnKTtcbiAgICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV0YWdLZXlWYWx1ZSA9IGFyclsxXTtcbiAgICAgICAgICAgICAgICB2YXIgZXRhZ3MgPSBldGFnS2V5VmFsdWUuc3BsaXQoJz0nKTtcbiAgICAgICAgICAgICAgICBldGFnID0gZXRhZ3NbMV0gfHwgJyc7XG4gICAgICAgICAgICAgICAgZXRhZyA9IGV0YWcucmVwbGFjZSgvXFxcIi9nLCAnJyk7XG4gICAgICAgICAgICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbChldGFnU3RvcmFnZUtleSwgZXRhZyk7XG4gICAgICAgICAgICAgICAgY3R4LnNldFN0b3JhZ2Uoe1xuICAgICAgICAgICAgICAgICAga2V5OiBldGFnU3RvcmFnZUtleSxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY25hOiBldGFnXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8g5Li65LqG6Kej5Yaz5bm25Y+R6Zeu6aKY77yM5LuOYXBsdXNfcXVldWXmlLnmiJDnm7TmjqXnlKhhcGx1cy5hcGx1c19wdWJzdWJcbiAgICAgICAgICAgICAgICAvLyDlubZjYWNoZeS9j+S4iuS4gOasoeeahOe7k+aenCBA6LCL5aOrIDIwMDIxLTAxLTE5XG4gICAgICAgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnB1Ymxpc2goJ2V0YWcnLCBldGFnKTtcbiAgICAgICAgICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIuY2FjaGVQdWJzKCdldGFnJywgZXRhZyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgdWxvZygpLncoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWV0YWcpIHtcbiAgICAgICAgICAgICAgZXRhZyA9IEVNUFRZX0NOQTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKGV0YWcpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMyKSB7XG4gICAgICAgICAgICB1bG9nKCkudyhyZXMyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHZhciBDTkEgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKGV0YWdTdG9yYWdlS2V5KTtcbiAgICAgIGlmIChDTkEpIHtcbiAgICAgICAgY2FsbGJhY2soQ05BKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5nZXRTdG9yYWdlKHtcbiAgICAgICAgICBrZXk6IGV0YWdTdG9yYWdlS2V5LFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGNoZWNrKHJlcyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBjaGVjayhyZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHB25Y+R6YCB5Yiw5ZOq6YeM5Y67XG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYzvvIzov5Tlm57igJxwYXVzZeKAneaaguWBnOS4remXtOS7tuaJp+ihjO+8jOi/lOWbnuS4gOS4quaVtOaVsOKAnG7igJ3lkYror4nkuK3pl7Tku7bigJxu4oCd5q+r56eS5ZCO57un57ut5omn6KGM5Lit6Ze05Lu2XG4gICAgICog4oCc5pqC5YGc4oCd5pyA5aSaMTBz77yM6Iul6LaF5pe25Lit6Ze05Lu25Lya5by65Yi257un57ut5omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoc3RhdGUsIGNiKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgLy8gdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICB2YXIgZXRhZ1RpbWVvdXQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXRhZy10aW1lb3V0Jyk7XG4gICAgICB2YXIgZGVmYXVsdFRpbWUgPSAyMDA7XG4gICAgICB2YXIgdGltZSA9IGRlZmF1bHRUaW1lO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGltZSA9IHBhcnNlSW50KGV0YWdUaW1lb3V0KTtcbiAgICAgICAgaWYgKGlzTmFOKHRpbWUpKSB7XG4gICAgICAgICAgdGltZSA9IGRlZmF1bHRUaW1lO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3N5bmNFdGFnKGZ1bmN0aW9uIChjbmEpIHtcbiAgICAgICAgaWYgKF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnKSB7XG4gICAgICAgICAgX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcuY25hID0gY25hOyAgXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbWUgPj0gMjAwKSB7XG4gICAgICAgICAgY2IoY25hKTsgIFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIOWRiuiviWNvbXBvc2XmmoLlgZzmiafooYzkuK3pl7Tku7bvvIznm7TliLBjYuWbnuWIsOWQjuWGjee7p+e7rVxuICAgICAgaWYgKHRpbWUgPCAyMDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRpbWU7XG4gICAgfSxcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ19taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxEYXRhID0gcmVxdWlyZSgnLi91dGlsRGF0YScpO1xuXG4vLyDku4XpmZDlvLnlhoXvvJvlsI/nsbPnpoHnlKhlZy5qc+W6lOWvueetlueVpe+8muS9v+eUqOWKqOaAgeWQjue8gOWQjVxuLy8g5ZCO57yA5ZCN55Sf5oiQ5pa55rOVOiDlvZPliY3ml7bpl7TmiLPovawxNui/m+WItu+8jOWPluWQjjjkvY3vvIxcbi8vIGZ1bmN0aW9uIGV0YWdVcmxTdWZmaXgoZXRhZ1VybCkge1xuLy8gICB2YXIgZHluYW1pY1VybCA9IGV0YWdVcmw7XG4vLyAgIHRyeSB7XG4vLyAgICAgaWYoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4vLyAgICAgICB0cnkge1xuLy8gICAgICAgICB2YXIgdGltZVN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4vLyAgICAgICAgIHZhciBkeW5hbWljU3VmZml4ID0gdGltZVN0YW1wLnRvU3RyaW5nKDE2KS5zbGljZSgtOCk7XG4vLyAgICAgICAgIHdoaWxlKGR5bmFtaWNTdWZmaXgubGVuZ3RoIDwgOCkge1xuLy8gICAgICAgICAgIGR5bmFtaWNTdWZmaXggPSBkeW5hbWljU3VmZml4ICsgJ2YnO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGR5bmFtaWNVcmwgPSBldGFnVXJsLnJlcGxhY2UoL2VnLmpzLywgZHluYW1pY1N1ZmZpeCArICcuanMnKTtcbi8vICAgICAgIH0gY2F0Y2goZSkge1xuLy8gICAgICAgfVxuLy8gICAgICAgcmV0dXJuIGR5bmFtaWNVcmw7XG4vLyAgICAgfVxuLy8gICB9IGNhdGNoKGUpIHtcblxuLy8gICB9XG4vLyAgIHJldHVybiBkeW5hbWljVXJsO1xuLy8gfVxuXG5leHBvcnRzLmdldFVybCA9IGZ1bmN0aW9uIChldGFnKSB7XG4gIHZhciB1cmwgPSB1dGlsRGF0YS5nZXRVcmwoZXRhZyAmJiBldGFnLmVnVXJsKTtcbiAgLy8gdXJsID0gZXRhZ1VybFN1ZmZpeCh1cmwpO1xuICAvLyDlpoLmnpxlZ1VybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuICBpZiAodXJsLmluZGV4T2YoJ2h0dHAnKSAhPT0gMCkge1xuICAgIHZhciBwcm90b2NhbCA9ICdodHRwczonO1xuICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuICAgIH1cbiAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgfVxuICByZXR1cm4gdXJsO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRXRhZy5qc1xuLy8gbW9kdWxlIGlkID0gNjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxUcmltID0gcmVxdWlyZSgnLi91dGlsVHJpbScpO1xudmFyIHV0aWxTdG9yZSA9IHJlcXVpcmUoJy4vdXRpbFN0b3JlJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHRyeVRvRGVjb2RlVVJJQ29tcG9uZW50OiBmdW5jdGlvbiAodmFsLCBkZWZhdWx0X3ZhbCkge1xuICAgIHZhciB2ID0gZGVmYXVsdF92YWwgfHwgJyc7XG4gICAgaWYgKHZhbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWwpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdjtcbiAgfSxcbiAgXG4gIC8qKlxuICAgKiDlsIblvaLlpoIgXCJwYWdlSWQ9MTIzOyBzaXRlSWQ9NDU2XCIg55qE5YaF5a656Kej5p6Q5Li6IE9iamVjdFxuICAgKiBAcGFyYW0gcyB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW2RpY3RdIHtPYmplY3R9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHBhcnNlU2VtaWNvbG9uQ29udGVudDogZnVuY3Rpb24gKHMsIGRpY3QsIHVuZGVjb2RlKSB7XG4gICAgZGljdCA9IGRpY3QgfHwge307XG4gICAgdmFyIGEgPSBzLnNwbGl0KCc7Jyk7XG4gICAgdmFyIGo7XG4gICAgdmFyIGFfbGVuID0gYS5sZW5ndGg7XG4gICAgdmFyIGEyO1xuXG4gICAgZm9yIChqID0gMDsgaiA8IGFfbGVuOyBqKyspIHtcbiAgICAgIGEyID0gYVtqXS5zcGxpdCgnPScpO1xuICAgICAgdmFyIF92YWx1ZSA9IHV0aWxUcmltLnRyaW0oYTIuc2xpY2UoMSkuam9pbignPScpKTtcbiAgICAgIGRpY3RbdXRpbFRyaW0udHJpbShhMlswXSkgfHwgJyddID0gdW5kZWNvZGUgPyBfdmFsdWUgOiB0aGlzLnRyeVRvRGVjb2RlVVJJQ29tcG9uZW50KF92YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpY3Q7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWwhuS4gOS4qiBub2RlIGxpc3Qg6L2s5Li65pWw57uEXG4gICAqIEBwYXJhbSBub2RlcyB7Tm9kZUxpc3R9XG4gICAqIOWPguinge+8mmh0dHA6Ly93d3cucGxhbmFiYy5uZXQvMjAxMC8wMS8wNi9hcmd1bWVudHNfdG9fYXJyYXkvXG4gICAqL1xuICBub2RlTGlzdFRvQXJyYXk6IGZ1bmN0aW9uIChub2Rlcykge1xuICAgIHZhciBhcnI7XG4gICAgdmFyIGxlbmd0aDtcblxuICAgIHRyeSB7XG4gICAgICAvLyB3b3JrcyBpbiBldmVyeSBicm93c2VyIGV4Y2VwdCBJRVxuICAgICAgYXJyID0gW10uc2xpY2UuY2FsbChub2Rlcyk7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gc2xvd2VyLCBidXQgd29ya3MgaW4gSUVcbiAgICAgIGFyciA9IFtdO1xuICAgICAgbGVuZ3RoID0gbm9kZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyci5wdXNoKG5vZGVzW2ldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCBkYXRlKSB7XG4gICAgaWYgKHV0aWxTdG9yZS5zZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuICAgICAgdmFyIF9sc19jbmEgPSAnJztcbiAgICAgIHZhciBfdmFsdWUgPSB1dGlsU3RvcmUuZ2V0KEVUQUdfU1RPUkFHRV9LRVkpO1xuICAgICAgaWYgKF92YWx1ZSkge1xuICAgICAgICB2YXIgX2FyciA9IF92YWx1ZS5zcGxpdCgnXycpIHx8IFtdO1xuICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgIF9sc19jbmEgPSBfYXJyLmxlbmd0aCA+IDEgJiYgZGF0ZSA9PT0gX2FyclswXSA/IF9hcnJbMV0gOiAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfbHNfY25hID0gX2Fyci5sZW5ndGggPiAxID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KF9sc19jbmEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuXG4gIC8vIHV0aWxTdG9yZS5zZXQodGhpcy5FVEFHX1NUT1JBR0VfS0VZLCAgdGhpcy50b2RheSArICdfJyArIGVuY29kZVVSSUNvbXBvbmVudChjbmEpKTtcbiAgc2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCB0b2RheSwgY25hKSB7XG4gICAgaWYgKGNuYSAmJiB1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHV0aWxTdG9yZS5zZXQoRVRBR19TVE9SQUdFX0tFWSwgIHRvZGF5ICsgJ18nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNuYSkpO1xuICAgIH1cbiAgfSxcblxuICBnZXRVcmw6IGZ1bmN0aW9uICh1cmwpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbiAgICB2YXIgZWdVcmwgPSB1cmwgfHwgJy8vbG9nLm1tc3RhdC5jb20vZWcuanMnO1xuICAgIHRyeSB7XG4gICAgICB2YXIgcmhvc3RfdiA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG4gICAgICB2YXIgcmVnID0gL1tbYS16fFxcLXxcXF98MC05XFwuXStbYS16fFxcLXxcXF98MC05XSg6XFxkKik/LztcbiAgICAgIHZhciBjdXN0b21faG9zdCA9IHJob3N0X3YubWF0Y2gocmVnKTtcbiAgICAgIGlmIChjdXN0b21faG9zdCAmJiBjdXN0b21faG9zdFswXSkge1xuICAgICAgICAvLyBlZ1VybCA9IGVnVXJsLnJlcGxhY2UocmVnLCBjdXN0b21faG9zdFswXSk7XG4gICAgICAgIGVnVXJsID0gJy8vJyArIGN1c3RvbV9ob3N0WzBdICsgJy9lZy5qcyc7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgIH1cbiAgICByZXR1cm4gZWdVcmw7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOWvueWtl+espuS4sui/m+ihjHRyaW3lpITnkIZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIOWOu+aOieWtl+espuS4siBzIOWJjeWQjueahOepuuagvFxuICogQHBhcmFtIHMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdHJpbShzKSB7XG4gIHJldHVybiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSA/IHMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpIDogJyc7XG59O1xuZXhwb3J0cy50cmltID0gdHJpbTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxUcmltLmpzXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0OiBmdW5jdGlvbiAoaywgdikge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrLCB2KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sXG4gIC8vIOe7j+i/h3Rlc3TkuYvlkI5nZXTlupTor6XkuI3kvJrmnInpl67pophcbiAgZ2V0OiBmdW5jdGlvbiAoaykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oayk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSxcbiAgdGVzdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ZXN0S2V5ID0gJ2dyZXlfdGVzdF9rZXknO1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0S2V5LCAxKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRlc3RLZXkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcbiAgcmVtb3ZlOiBmdW5jdGlvbiAoaykge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGspO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbFN0b3JlLmpzXG4vLyBtb2R1bGUgaWQgPSA2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3doZW5fdG9fc2VuZC5qc1xuICpcbiAqICAg5L2c55So77yaIOS9leaXtuaJp+ihjHNlbmRwduaPkuS7tlxuICogICBmbjogZ2V0TWV0YUluZm8g57un5om/6IezQmFzZVxuICogICBmbjogcnVuICjmj5Lku7bmoIflh4bnmoTmiafooYzlhaXlj6MpXG4gKiAgIGFwbHVzLXdhaXRpbmc9XCIxXCI6IOetieW+hTbnp5LlkI7lsJ3or5Xlj5HpgIFQVuaXpeW/lztcbiAqICAgYXBsdXMtd2FpdGluZz1cIk1BTlwiOiDkuI3oh6rliqjlj5HpgIFQVuaXpeW/lztcbiAqICAgYXBsdXMtd2FpdGluZz1cIm5cIjog5YW25LitbuS4uuWkp+S6jjHnmoTmraPmlbTmlbAsIGFwbHVz5Zyo562J5b6Fbuavq+enkuS5i+WQjuWwneivleWPkemAgVBW5pel5b+XO1xuICpcbiAqICAgZGVwc++8miDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPlm1ldGFfaW5mb1xuICAgICAqIFRPRE8g6Iul5LuK5ZCO5pyJ5Yqo5oCB5L+u5pS5bWV0YV9pbmZv55qE6ZyA5rGC77yMXG4gICAgICog5q2k5aSE6ZyA6KaB5Yqo5oCB5LuOIG1ldGFJbmZv5qih5Z2X5Lit5Y676LCD55SoZ2V0SW5mb+aWueazleadpeiOt+WPluebuOWFs+S/oeaBr++8jOi/meagt+WBmueahOWdj+WkhOaYr+a2iOiAl+aAp+iDvVxuICAgICAqL1xuICAgIGdldE1ldGFJbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvOyAvLyB8fCBtZXRhSW5mby5nZXRJbmZvKCk7XG4gICAgICByZXR1cm4gbWV0YV9pbmZvO1xuICAgIH0sXG5cbiAgICBnZXRBcGx1c1dhaXRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1ldGFfaW5mbyA9IHRoaXMuZ2V0TWV0YUluZm8oKSB8fCB7fTtcbiAgICAgIHJldHVybiBtZXRhX2luZm9bJ2FwbHVzLXdhaXRpbmcnXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+j77yM6YWN572u5LqGYXBsdXNXYWl0aW5nIOW5tuS4lCDmmK9hcGx1c+iHquWKqOaJk+eCueaJjei1sOi/meautemAu+i+kVxuICAgICAqIDxtZXRhIG5hbWU9XCJhcGx1cy13YWl0aW5nXCIgY29udGVudD1cInh4eFwiIC8+XG4gICAgICogICB4eHg6ICdNQU4nIC0g5LiN5Y+R6YCBcHbnmoTmoIfor4ZcbiAgICAgKiAgIHh4eDogJzEnIC0g5bCd6K+V562J5b6FNuenkuWQjuWPkXB2XG4gICAgICpcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqXG4gICAgICogQHJldHVybiBcImRvbmVcIijnu4jmraLkuK3pl7Tku7bmiafooYwpIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbihzdGF0ZSwgY2IpIHtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgdmFyIGFwbHVzV2FpdGluZyA9IHRoaXMuZ2V0QXBsdXNXYWl0aW5nKCk7XG4gICAgICBpZiAoYXBsdXNXYWl0aW5nICYmIGNvbmZpZy5pc19hdXRvKSB7XG4gICAgICAgIGFwbHVzV2FpdGluZyA9IHRoaXMuZ2V0QXBsdXNXYWl0aW5nKCkgKyAnJztcbiAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYgPSB7XG4gICAgICAgICAgYXBsdXNXYWl0aW5nOiBhcGx1c1dhaXRpbmdcbiAgICAgICAgfTtcbiAgICAgICAgc3dpdGNoKGFwbHVzV2FpdGluZykge1xuICAgICAgICBjYXNlIGFwbHVzU3RhdGljLl9VU0VSX0lEOlxuICAgICAgICBjYXNlIGFwbHVzU3RhdGljLl9BTk9OWV9JRDpcbiAgICAgICAgY2FzZSAnTUFOJzpcbiAgICAgICAgICByZXR1cm4gJ2RvbmUnO1xuICAgICAgICBjYXNlICcxJzpcbiAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgfSwgNjAwMCk7XG4gICAgICAgICAgcmV0dXJuIDYwMDA7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdmFyIG4gPSBhcGx1c1dhaXRpbmcgKiAxO1xuICAgICAgICAgIGlmICgobiArICcnKSAhPT0gJ05hTicpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2LmlzV2FpdCA9IHRydWU7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9LCBuKTtcbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hlbl90b19zZW5kcHYuanNcbi8vIG1vZHVsZSBpZCA9IDY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiB3aGVyZV90b19zZW5kX21pbmlfdW0uanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiDojrflj5YgbWV0YV9pbmZvIFxuICAgICovXG4gICAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIHJldHVybiAoXyQubWV0YV9pbmZvIHx8IHt9KVtrZXldO1xuICAgIH0sXG5cbiAgICBnZXRIb3N0VXJsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByaG9zdCA9IHRoaXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcbiAgICAgIGlmICghdXRpbC5jaGVja0RvbWFpbihyaG9zdCkpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICB2YXIgbG9nRG9tYWluID0gbWluaS5nZXRMb2dEb21haW4oKTtcbiAgICAgIGlmICghbG9nRG9tYWluKSB7XG4gICAgICAgIHVsb2coKS50aXBfdygn5b2T5YmN5bCP56iL5bqP5qGG5p625pyq5pSv5oyB77yM6K+36IGU57O7UVTkuqTku5jlkIzlrablr7vmsYLluK7liqnvvIHvvIEnKTtcbiAgICAgICAgcmV0dXJuICcnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICB9XG4gICAgICB2YXIgdXJsID0gWycvLycsIHJob3N0LCBsb2dEb21haW5dO1xuICAgICAgcmV0dXJuIHVybC5qb2luKCcnKTtcbiAgICB9LFxuXG5cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlcmVfdG9fc2VuZC5tZXRob2QgPSAnUE9TVCc7XG4gICAgICB2YXIgdXJsID0gdGhpcy5nZXRIb3N0VXJsKCk7XG4gICAgICBpZiAoIXVybCkge1xuICAgICAgICByZXR1cm4gJ2RvbmUnO1xuICAgICAgfVxuXG4gICAgICBpZiAodXJsLmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICAgICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG4gICAgICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAgICAgICAgIHByb3RvY2FsID0gJ2h0dHA6JztcbiAgICAgICAgfVxuICAgICAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVsb2coKS53KCfkuIrmiqXln5/lkI3ml6DmlYg6ICcgKyB1cmwpO1xuICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7IFxuICAgICAgICAvLyAgIG1zZzogJ+S4iuaKpeWfn+WQjeaXoOaViDogJyArIHVybCBcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIHJldHVybiAnZG9uZSc7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLnVybCA9IHVybDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX21pbmlfdW0uanNcbi8vIG1vZHVsZSBpZCA9IDcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hhdF90b19zZW5kLmpzXG4gKlxuICog5L2c55So77ya5pel5b+X5Y+R6YCB5Z+656GA5Y+C5pWw5pS26ZuG77yaXG4gKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuICogZGVwczog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTsgIFxudmFyIGxvZ0lkID0gcmVxdWlyZSgnQHV0aWxzL2xvZ0lkJyk7XG52YXIgdXRpbFBhcmFtcyA9IHJlcXVpcmUoJy4vdXRpbFBhcmFtcycpO1xudmFyIHV0aWwgPSByZXF1aXJlKFwiQHV0aWxzL3V0aWxcIik7XG52YXIgQ05UID0gYXBsdXNTdGF0aWMuU1BNX0NOVDtcbnZhciBVUkwgPSBhcGx1c1N0YXRpYy5TUE1fVVJMO1xudmFyIFBSRSA9IGFwbHVzU3RhdGljLlNQTV9QUkU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIGdldENvbW1vblBhcmFtczogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICB2YXIgc3BtID0gXyQuc3BtIHx8IHt9O1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgcGxhdGZvcm1UeXBlID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BsYXRmb3JtVHlwZScpIHx8IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCk7XG5cbiAgICAgIHZhciB1c2VySW5mbyA9IHtcbiAgICAgICAgX2Rldl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSxcbiAgICAgICAgX2Fub255X2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpLFxuICAgICAgICBfdXNlcl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpLFxuICAgICAgICBfdXNlcl9uaWNrOiBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpLFxuICAgICAgICBfc2Vzc2lvbl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19zZXNzaW9uX2lkJyksXG4gICAgICAgIHVhaWQ6IChhcGx1cy5nZXRNZXRhSW5mbygndWFpZCcpICsgJycpID09PSAnMScgPyAxIDogMCxcbiAgICAgIH07XG5cbiAgICAgIHZhciBjbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcblxuICAgICAgdmFyIHVybCA9ICctJztcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwYWdlSW5zdGFuY2UgPSBnZXRDdXJyZW50UGFnZXMoKVswXTtcbiAgICAgICAgdXJsID0gcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICBcbiAgICAgIHZhciBsb2dJZEtleSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgdXJsO1xuICAgICAgdmFyIGxvZ0lkS2V5MiA9IGNsaWVudC5tb2RlbCArIGNsaWVudC5uZXR3b3JrVHlwZSArIGNvbmZpZy50aXRsZSArIGV0YWcuY25hO1xuICAgICAgdmFyIGNhY2hlID0gKGdsb2JhbENvbmZpZy5pc0RlY29kZVVybCA/ICdEQ18nIDogJycpICsgbG9nSWQuZ2V0TG9nSWQobG9nSWRLZXksIGxvZ0lkS2V5Mik7XG5cbiAgICAgIHZhciBhcHBLZXkgPSB1dGlsLmdldEFwcEtleSgpO1xuICAgICAgaWYgKCFhcHBLZXkpIHtcbiAgICAgICAgdWxvZygpLncoJ3BsZWFzZSBzZXQgYXBwS2V5IGluIGFwbHVzIG1ldGFJbmZvIGJlZm9yZSBzZW5kUFYhJyk7XG4gICAgICB9XG4gICAgICB2YXIgY29tbW9uUGFyYW1zID0gIE9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgICAgYXBwS2V5OiBhcHBLZXksXG4gICAgICAgIGNhY2hlOiBjYWNoZSxcbiAgICAgICAgY25hOiBldGFnLmNuYSxcbiAgICAgICAgZXRhZzogZXRhZyxcbiAgICAgICAgcHJlOiBfJC5wYWdlX3JlZmVycmVyIHx8ICctJyxcbiAgICAgICAgc2RrX2luZm86IHtcbiAgICAgICAgICBqc3ZlcjogZ2xvYmFsQ29uZmlnLnNjcmlwdF9uYW1lLFxuICAgICAgICAgIGx2ZXI6IGdsb2JhbENvbmZpZy5sdmVyLFxuICAgICAgICAgIGN1c3RvbVNka0lkOiBhcGx1cy5nZXRNZXRhSW5mbygnY3VzdG9tU2RrSWQnKSB8fCAnJyxcbiAgICAgICAgICBwbGF0Zm9ybVR5cGU6IHBsYXRmb3JtVHlwZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICB9LFxuICAgICAgICB0aXRsZTogY29uZmlnLnRpdGxlIHx8ICcnLFxuICAgICAgICB1cmw6IHVybCB8fCAnLScsXG4gICAgICAgIGNsaWVudDogY2xpZW50LFxuICAgICAgICB0aW1lWm9uZTogdXRpbFBhcmFtcy5nZXRUaW1lWm9uZSgpLFxuICAgICAgICBnbWtleTogdXNlcmRhdGEuZ21rZXkgfHwgJycsXG4gICAgICAgIG1ldGhvZDogdGhpcy5vcHRpb25zLmNvbnRleHQud2hlcmVfdG9fc2VuZC5tZXRob2RcbiAgICAgIH0sIHVzZXJJbmZvKTtcbiAgICAgIFxuICAgICAgdmFyIGdva2V5ID0gdXNlckluZm87XG5cbiAgICAgIGlmIChzcG0uc3BtX3VybCkge1xuICAgICAgICBnb2tleVtVUkxdID0gc3BtLnNwbV91cmwgfHwgJyc7ICBcbiAgICAgIH1cbiAgICAgIGlmIChzcG0uc3BtX3ByZSkge1xuICAgICAgICBnb2tleVtQUkVdID0gc3BtLnNwbV9wcmUgfHwgJyc7ICBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHNwbS5zcG1fY250KSB7XG4gICAgICAgIGdva2V5W0NOVF0gPSBzcG0uc3BtX2NudCB8fCAnJztcbiAgICAgIH1cbiAgICAgIGdva2V5W2FwbHVzU3RhdGljLlBWSURdID0gYXBsdXMucHZpZCB8fCAnJztcbiAgICAgIGNvbW1vblBhcmFtcy5zZXNzaW9uQXJncyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1zZXNzaW9uLWFyZ3MnKTtcbiAgICAgIGNvbW1vblBhcmFtcy5nbG9iYWxBcmdzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbC1hcmdzJyk7ICAvLyAyMDIxLTAxLTE0QOS5nemUoemcgOaxglxuICAgICAgLy8g6ZyA6KaB5Yig6Zmk55qE5Luj56CBLS0tLWVuZFxuICAgICAgY29tbW9uUGFyYW1zLmdva2V5ID0gZ29rZXk7XG4gICAgICByZXR1cm4gY29tbW9uUGFyYW1zO1xuICAgIH0sXG5cblxuICAgIGdldFB2UGFyYW1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgY29tbW9uUGFyYW1zID0gdGhpcy5nZXRDb21tb25QYXJhbXMoKTtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmNvbmZpZy5pc19hdXRvKSB7XG4gICAgICAgIGNvbW1vblBhcmFtcy5zZGtfaW5mby5tYW5zbmRsb2cgPSAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblBhcmFtcywge1xuICAgICAgICBldmVudF9jb2RlOiBhcGx1c1N0YXRpYy5QVl9DT0RFLFxuICAgICAgICBsb2d0eXBlOiAnMScsXG4gICAgICAgIGxvZ2tleTogJy92eC5naWYnLFxuICAgICAgICBldmVudF90aW1lc3RhbXA6IGFwbHVzLl8kLnNlbmRfcHZfY291bnQgPiAwID8gbmV3IERhdGUoKSA6IGFwbHVzLmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUsXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgZ2V0SGpsalBhcmFtczogZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB1c2VyZGF0YSA9IGMudXNlcmRhdGEgfHwge307XG5cbiAgICAgIHZhciBoamxqUGFyYW1zID0ge1xuICAgICAgICBldmVudF9jb2RlOiBhcGx1c1N0YXRpYy5FVkVOVF9JRF9NQVBbdXNlcmRhdGEuZ21rZXldIHx8IHVzZXJkYXRhLmdta2V5LCAvLyBhcGx1c1N0YXRpYy5PVEhFUl9DT0RFLFxuICAgICAgICBsb2d0eXBlOiAnMicsXG4gICAgICAgIGxvZ2tleTogdXNlcmRhdGEubG9na2V5LFxuICAgICAgICBldmVudF90aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIC8vIG1hbnNuZGxvZzogJzEnLFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZ2V0Q29tbW9uUGFyYW1zKCksIGhqbGpQYXJhbXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6NcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIDEuIGFwbHVz6buY6K6k6ZyA6KaB6YeH6ZuG55qE5Y+C5pWwOiBiYXNpY0xpc3RcbiAgICAgKiAyLiBiZWFjb27mianlsZXlj4LmlbA6IGV4cGFyYW1zXG4gICAgICogMy4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlrqLmiLfnq6/lj4LmlbA6IGV4dHJhTGlzdFxuICAgICAqIOS4remAlOWkhOeQhl8k5YWo5bGA5Y+Y6YePOiBwcm9jZXNzTG9kYXNoRG9sbGFyXG4gICAgICogNC4gbG9jYWxTdG9yYWdl5Lit5a2Y5YKo55qE5LiK5LiA6aG1c3Bt5L+h5oGvOiBzcG1hYnRlc3RcbiAgICAgKiDku6XkuIo06YOo5YiG5ou86KOF5oiQcHZkYXRhXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHt9O1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb25maWcucmVjb3JkVHlwZSA9PT0gXCJQVlwiKSB7XG4gICAgICAgIHBhcmFtcyA9IHRoaXMuZ2V0UHZQYXJhbXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcyA9IHRoaXMuZ2V0SGpsalBhcmFtcygpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBwYXJhbXM7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGF0X3RvX3NlbmRfbWluaV9jbG91ZC5qc1xuLy8gbW9kdWxlIGlkID0gNzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIHB2aWRcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEhhc2ggPSByZXF1aXJlKCcuL3V0aWxIYXNoJyk7XG5cbnZhciBnZXRSYW5kb21JZCA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIC8qKlxuICAgKiDnlJ/miJDmnKzpobXnmoQgcHYgaWRcbiAgICogcHYgaWQg5Y+q6ZyA6KaB5b2T5YmN55So5oi35Lya6K+d5ZSv5LiA5Y2z5Y+v77yM6L+Z5YS/5L2/55So5LiA5LiqIDYg5L2N55qEIDE2IOi/m+WItuaVsOWtl1xuICAgKi9cbiAgdmFyIHJuZF9zdHJzID0gJyc7XG4gIHZhciBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XG4gIHZhciBoYW5kbGVkID0gZmFsc2U7XG4gIHZhciBjaGFyO1xuXG4gIC8qKlxuICAgKiDop6PlhrPpg6jliIYgc3BtIOiiqyBHRlcg5aKZ5LqG55qE5oOF5Ya177yM5aaCIDIyLmdsXG4gICAqIOaOkumZpCBwdmlkIOS7pSBnbCDlvIDlpLTnmoTmg4XlhrVcbiAgICovXG4gIGZ1bmN0aW9uIGhhbmRsZVBWSWQgKGNoYXJQb3MpIHtcbiAgICB2YXIgY2hhcnNXaXRob3V0RyA9ICcwMTIzNDU2Nzg5YWJjZGVmaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkhJSktMTU5PUFFSU1RVVldYWVonO1xuICAgIHZhciBjaGFyc1dpdGhvdXRMID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa21ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktNTk9QUVJTVFVWV1hZWic7XG5cbiAgICBpZiAoY2hhclBvcyA9PSAxKSB7XG4gICAgICByZXR1cm4gY2hhcnNXaXRob3V0Ry5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcbiAgICB9IGVsc2UgaWYgKGNoYXJQb3MgPT0gMikge1xuICAgICAgcmV0dXJuIGNoYXJzV2l0aG91dEwuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYwKSwgMSk7XG4gICAgfVxuICAgIHJldHVybiAnMCc7XG4gIH07XG5cbiAgd2hpbGUgKHJuZF9zdHJzLmxlbmd0aCA8IHNpemUpIHtcbiAgICBjaGFyID0gY2hhcnMuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYyKSwgMSk7XG4gICAgLy8g5aSE55CG6KKr5aKZ55qE5oOF5Ya177yM55uu5YmN5Y+q6ZKI5a+5Z2zlvIDlpLTnmoRcbiAgICBpZiAoIWhhbmRsZWQgJiYgcm5kX3N0cnMubGVuZ3RoIDw9IDIgJiYgKGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnZycgfHwgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJykpIHtcbiAgICAgIGlmIChybmRfc3Rycy5sZW5ndGggPT09IDAgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJykge1xuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkge1xuICAgICAgICAgIGNoYXIgPSBoYW5kbGVQVklkKDEpO1xuICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PSAxICYmIGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnbCcgJiYgcm5kX3N0cnMuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG4gICAgICAgIGNoYXIgPSBoYW5kbGVQVklkKDIpO1xuICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcm5kX3N0cnMgKz0gY2hhcjtcbiAgfVxuICByZXR1cm4gcm5kX3N0cnM7XG59O1xuXG5mdW5jdGlvbiBnZXRDaGFycyAoYXJncywgc2l6ZSwgZGVmYXVsdFZhbCkge1xuICBpZiAoYXJncykge1xuICAgIHJldHVybiB1dGlsSGFzaC5oYXNoKGVuY29kZVVSSUNvbXBvbmVudChhcmdzKSkuc3Vic3RyKDAsIHNpemUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkZWZhdWx0VmFsO1xuICB9XG59XG5cbmV4cG9ydHMuZ2V0TG9nSWQgPSBmdW5jdGlvbiAocGFnZVVybCwgbG9nTmFtZSkge1xuICB2YXIgcmFuZG9tOENoYXJzID0gZ2V0UmFuZG9tSWQoOCk7XG4gIHZhciByYW5kb200Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDQpO1xuICB2YXIgcmFuZG9tNkNoYXJzID0gcmFuZG9tOENoYXJzLnN1YnN0cigwLCA2KTtcbiAgcmV0dXJuIFtcbiAgICBnZXRDaGFycyhwYWdlVXJsLCA0LCByYW5kb200Q2hhcnMpLFxuICAgIGdldENoYXJzKGxvZ05hbWUsIDQsIHJhbmRvbTRDaGFycyksXG4gICAgcmFuZG9tNkNoYXJzXG4gIF0uam9pbignJyk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvbG9nSWQuanNcbi8vIG1vZHVsZSBpZCA9IDcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIOagueaNruWvhumSpXPlr7nlrZfnrKbkuLJzdHLov5vooYzovazkuYlcbmV4cG9ydHMuaGFzaCA9IGZ1bmN0aW9uKHN0ciwgcykge1xuICB2YXIgZGVmX3YgPSAxMzE1NDIzOTExO1xuICB2YXIgaGFzaCA9IHMgfHwgZGVmX3YsIGksIGNoO1xuICBmb3IgKGkgPSBzdHIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjaCA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGhhc2ggXj0gKChoYXNoIDw8IDUpICsgY2ggKyAoaGFzaCA+PiAyKSk7XG4gIH1cbiAgdmFyIHJzID0gKGhhc2ggJiAweDdGRkZGRkZGKS50b1N0cmluZygxNik7XG4gIHJldHVybiBycztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsSGFzaC5qc1xuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDov5Tlm55HTVTmoLzlvI/nmoTml7bljLrvvIzlpoLvvJpHTVQrMDU6NDUsIEdNVC0wNzowMCwgR01UKzA4OjAwXG4gKi9cbmV4cG9ydHMuZ2V0VGltZVpvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGltZVpvbmUgPSAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjA7XG4gIHZhciBfYW5kID0gJysnO1xuICBpZiAoX3RpbWVab25lIDwgMCkge1xuICAgIF9hbmQgPSAnLSc7XG4gIH1cbiAgdmFyIHpvbmUgPSBNYXRoLmFicyhwYXJzZUludChfdGltZVpvbmUpKTtcbiAgdmFyIHJlbWFpbmRlciA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkgLSBfdGltZVpvbmUpO1xuICB2YXIgcmVtYWluZGVyWm9uZSA9ICcwMCc7XG4gIGlmIChyZW1haW5kZXIgPiAwKSB7XG4gICAgcmVtYWluZGVyWm9uZSA9IDYwICogcmVtYWluZGVyO1xuICB9XG4gIHJldHVybiAnR01UJyArIF9hbmQgKyAoem9uZSA+IDkgPyB6b25lIDogKCcwJyArIHpvbmUpKSArICc6JyArIHJlbWFpbmRlclpvbmU7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3V0aWxQYXJhbXMuanNcbi8vIG1vZHVsZSBpZCA9IDc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL21pbmlhcHBfZGF0YS5qc1xuICpcbiAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeWfuuehgOWPguaVsOaUtumbhu+8mlxuICogICAgICDmjInpobrluo/lsIZhcGx1cy5wdl9kYXRhLmJhc2lj44CBZXhwYXJhbXPjgIFvbGRQYXJhbXPjgIFhcGx1cy5wdl9kYXRhLmV4dHJh5Zub5Lit57G75Z6L55qE5Y+C5pWwbWVyZ2XlnKjkuIDkuKrmlbDnu4TkuK1cbiAqIGRlcHM6IOaXoFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuICAgICAqIDIuIGJlYWNvbuaJqeWxleWPguaVsDogZXhwYXJhbXNcbiAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG4gICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcbiAgICAgKiA0LiBsb2NhbFN0b3JhZ2XkuK3lrZjlgqjnmoTkuIrkuIDpobVzcG3kv6Hmga86IHNwbWFidGVzdFxuICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaXNUQkVudiA9IG1pbmkuaXNUQigpO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIGxvZ2RhdGEgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSB8fCB7fTtcbiAgICAgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuICAgICAgdmFyIGN1cnJlbnRQYWdlICA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdIHx8IHt9O1xuICAgICAgaWYgKGN1cnJlbnRQYWdlICYmICFsb2dkYXRhLnRpdGxlKSB7XG4gICAgICAgIGxvZ2RhdGEudGl0bGUgPSBjdXJyZW50UGFnZS5yb3V0ZSB8fCAnJzsgIFxuICAgICAgfVxuICAgICAgbG9nZGF0YS51cmwgPSAoIWlzVEJFbnYgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpID8gJ2h0dHBzOi8vJyA6ICcnKSArIChjdXJyZW50UGFnZS5yb3V0ZSAgfHwgY3VycmVudFBhZ2UuaXMgfHwgJy0nKTtcblxuICAgICAgdmFyIHByZSA9ICctJztcbiAgICAgIGlmIChwYWdlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHZhciBwcmVQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMl0gfHwge307XG4gICAgICAgIHByZSA9ICghaXNUQkVudiAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgPyAnaHR0cHM6Ly8nIDogJycpICsgKHByZVBhZ2Uucm91dGUgfHwgcHJlUGFnZS5pcyB8fCAnLScpO1xuICAgICAgfVxuICAgICAgbG9nZGF0YS5wcmUgPSBwcmU7XG4gICAgICBpZiAobG9nZGF0YS5zZGtfaW5mbykge1xuICAgICAgICBsb2dkYXRhLnNka19pbmZvLndpbmRtaWxsID0gJzEnO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IGxvZ2RhdGE7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9taW5pYXBwX2RhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YS5qc1xuICpcbiAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsHB2ZGF0YeWQjumdou+8mnB2ZGF0YS5jb25jYXQodXNlcmRhdGEpXG4gKiAgZGVwczogd2hhdF90b19zZW5kcHZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuXG4gICAgLyoqXG4gICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG4gICAgICpcbiAgICAgKiBnb2tleTpcbiAgICAgKiAgIOi/meWdl+S4uuWvueWOhuWPsnVzZXJkYXRh5Lyg6YCS55qE5YW85a655YGa5rOV77yMVE9ET++8muaOqOWKqOW6lOeUqOaWueWPmOabtFxuICAgICAqICAg5bqU55So5pa55Lyg6YCS55qEZ29rZXnmoLzlvI/lupTnlKjmlrnoh6rooYzlhrPlrprvvIxcbiAgICAgKiAgICAg5aaCIGdva2V5PVwiYT0xJmI9MlwiIOaIliB7XCJhXCI6W3tcImtleVwiOjIwMTYxMjI2MTU1MCxcInZhbHVlXCI6MC4xfSx7XCJrZXlcIjoyMDE2MTIyNjE2MDAsXCJ2YWx1ZVwiOjAuNX0se1wia2V5XCI6MjAxNjEyMjYxNjEwLFwidmFsdWVcIjoxfV19XG4gICAgICogICDov5nlnZfpgLvovpHmmK/pgKDmiJBleHRlbmRhcmdz5YaF6YOo5Ye6546w5aSa5Liq5pac5p2g55qE5YWD5Ye277yB77yB77yBXG4gICAgICogcGFnZV9pZDpcbiAgICAgKiAgIOaciXBhZ2VfaWTlsLHlnKhzcG1i5Lit5re75Yqg5a2Q5Y+C5pWwXG4gICAgICogICDml6BwYWdlX2lk5bCx5riF6Zmkc3BtYuS4reeahOWtkOWPguaVsFxuICAgICAqIHNwbV9jbnRcbiAgICAgKiAgIOabtOaUueWujHNwbWLkvY3ov5jpnIDopoHmm7TmlrBzcG1fY250IEDosIvlo6sgaW4gMjAxOC0wMy0yMCAg5Lul5YWNdG9VVOeahHNwbS1jbnTkuKLlpLHliIbmobblj7dcbiAgICAgKiDkuKrmgKfljJblj4LmlbDvvJpcbiAgICAgKiAgIDEuIChhcGx1c+akjeWFpSk6IDxtZXRhIG5hbWU9XCJhcGx1cy1jcHZkYXRhXCIgY29udGVudD1cIkpTT05zdHJpbmdcIj5cbiAgICAgKiAgIDIuIOaWueazleS8oOWFpTogYXBsdXMuc2VuZFBWKHtDT05GSUd9LCB7VVNFUkRBVEV9KTtcbiAgICAgKiDlj43kvZzlvIrnmoTmlofmoaPlrr3pq5g6IF9wdyxfcGhcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gey4uLn1cbiAgICAgKi9cbiAgICBnZXRVc2VyZGF0YTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgdmFyIGQgPSB7fTtcblxuICAgICAgaWYgKGNvbmZpZyAmJiAhY29uZmlnLmlzX2F1dG8pIHtcbiAgICAgICAgaWYgKGNvbmZpZy5nb2tleSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmdva2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgZCA9IGZvcm1hdC5wYXJhbTJvYmooY29uZmlnLmdva2V5KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcuZ29rZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBkID0gY29uZmlnLmdva2V5O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgY29tYm9Vc2VyZGF0YSA9IGZ1bmN0aW9uKF9kYXRhKSB7XG4gICAgICAgIGlmKGlzQXJyYXkoX2RhdGEpKXtcbiAgICAgICAgICBfZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oe30sIGQsIGl0ZW0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGQgPSBPYmplY3QuYXNzaWduKHt9LCBkLCBfZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb21ib1VzZXJkYXRhKGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1jcHZkYXRhJykpO1xuXG4gICAgICB2YXIgY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICB2YXIgcGFnZU5hbWUgPSBjdXJyZW50UGFnZS5yb3V0ZSB8fCBjdXJyZW50UGFnZS5pcyB8fCAncGFnZSc7XG4gICAgICB2YXIgcGFnZVByb3BlcnRpZXMgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcGFnZS1wcm9wZXJ0aWVzJykgfHwge307XG4gICAgICB2YXIgcGFnZVByb3BlcnR5ID0gcGFnZVByb3BlcnRpZXNbcGFnZU5hbWVdO1xuICAgICAgaWYgKHR5cGVvZiBwYWdlUHJvcGVydHkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbWJvVXNlcmRhdGEocGFnZVByb3BlcnR5KTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGEgfHwge307XG4gICAgICBjb21ib1VzZXJkYXRhKHVzZXJkYXRhKTtcblxuICAgICAgcmV0dXJuIGQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOabtOaWsHByZe+8iOWcqOi/memHjOWBmueahOWOn+WboOaYr++8jHByZeWPguaVsOWxnuS6jmJhc2lj5Y+C5pWw77yM5L2G5pivdXNlcmRhdGHkuK3lpoLkvKDpgJLkuoZyZWZlcnJlcu+8jOWPr+S7peimhueblnByZe+8iVxuICAgICAqL1xuICAgIHVwZGF0ZVByZTogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLnJlZmVycmVyKSB7XG4gICAgICAgIF8kLnBhZ2VfcmVmZXJyZXIgPSBjb25maWcucmVmZXJyZXI7XG4gICAgICAgIGRhdGEucHJlID0gY29uZmlnLnJlZmVycmVyO1xuICAgICAgfVxuICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOabtOaWsOmhtemdoueahFVybFxuICAgICAqL1xuICAgIHVwZGF0ZVVybDpmdW5jdGlvbihkYXRhKXtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgaWYoY29uZmlnJiZjb25maWcucGFnZVVybCl7XG4gICAgICAgIGRhdGEudXJsID0gY29uZmlnLnBhZ2VVcmw7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOabtOaWsOadpea6kHNwbVxuICAgICAqL1xuICAgIHVwZGF0ZVNwbVVybDpmdW5jdGlvbihkYXRhKXtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgdmFyIHNwbVVybCA9IGNvbmZpZ1thcGx1c1N0YXRpYy5TUE1fVVJMXXx8Y29uZmlnLnNwbVVybDtcbiAgICAgIGlmKHNwbVVybCl7XG4gICAgICAgIGRhdGEuZ29rZXlbYXBsdXNTdGF0aWMuU1BNX1VSTF0gPSBzcG1Vcmw7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkID0gdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGE7XG4gICAgICB2YXIgdXNlcmRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmdldFVzZXJkYXRhKCksIGQudXNlcmRhdGEgfHwge30pO1xuICAgICAgZC5nb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGQuZ29rZXksIHVzZXJkYXRhKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVByZShkKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVVybChkKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVNwbVVybChkKTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gZDtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LnVzZXJkYXRhID0gZC5nb2tleTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGFfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9jYW5fdG9fc2VuZHB2LmpzXG4gKlxuICog5L2c55So77ya5Yik5patcHbog73lkKblj5HpgIHvvIzkuI3lj6/ku6Xlj5HpgIHliJnkvJrkuK3mlq3lkI7nu63miYDmnInkuK3pl7Tku7bmiafooYxcbiAqIGRlcHM6IOaXoFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIOaYr+WQpuimgeaJp+ihjHNlbmRwdueahOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICB2YXIgY291bnQgPSBfJC5zZW5kX3B2X2NvdW50IHx8IDA7XG4gICAgICBfJC5zZW5kX3B2X2NvdW50ID0gKytjb3VudDtcbiAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoJ18kJywgXyQpO1xuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvY2FuX3RvX3NlbmRwdl9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA3N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3BsdWdpbnMvcHYvd2hhdF90b19oamxqX3VzZXJkYXRhLmpzXG4gKlxuICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG4gKiAgICAgICAgICAg5bm25bCG5pS26ZuG5Yiw55qE6Ieq5a6a5LmJ5Y+C5pWw5Lul5pWw57uE5qC85byP6L+95Yqg5YiwbG9nZGF0YeWQjumdou+8mmxvZ2RhdGEuY29uY2F0KHVzZXJkYXRhKVxuICogIGRlcHM6IHdoYXRfdG9faGpsalxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy9pc0FycmF5Jyk7XG4vLyB2YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcblxuICAgIC8qKlxuICAgICAqIOmHh+mbhuS4quaAp+WMluWPguaVsFxuICAgICAqXG4gICAgICogcmVjb3JkKGxvZ2tleSwgZ21rZXksIGdva2V5KSBBUEnkuK3nmoRnb2tleVxuICAgICAqIG1ldGE6YXBsdXMtZXhpbmZv5L+h5oGvLCBtZXRhOmFwbHVzLWV4ZGF0YeS/oeaBr1xuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fSB7Li4ufVxuICAgICAqL1xuICAgIGdldFVzZXJEYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB2YXIgdXNlcmRhdGEgPSBjLnVzZXJkYXRhIHx8IHt9O1xuICAgICAgdmFyIGdva2V5ID0gYy53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleTtcbiAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGZvcm1hdC5wYXJhbTJvYmoodXNlcmRhdGEuZ29rZXkpKTtcbiAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGZvcm1hdC5wYXJhbTJvYmooYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4aW5mbycpfHx7fSkpO1xuICAgICAgdmFyIGV4ZGF0YSA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1leGRhdGEnKTtcbiAgICAgIGlmIChpc0FycmF5KGV4ZGF0YSkpIHtcbiAgICAgICAgZXhkYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBnb2tleSwgaXRlbSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBnb2tleSwgZXhkYXRhIHx8IHt9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnb2tleTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG4gICAgICog6L+U5ZueJ2RvbmUn57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuICdkb25lJyB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbG9nZGF0YSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhO1xuICAgICAgdmFyIGdva2V5ID0gdGhpcy5nZXRVc2VyRGF0YSgpO1xuICAgICAgLy8g5bqU55So6YCA5Ye65LqL5Lu25q+U6L6D54m55q6K77yMZHVyYXRpb27ljbNhcmcxIEDmlofpnZJcbiAgICAgIGlmIChsb2dkYXRhLmdta2V5ID09PSAnMTAxMCcpIHtcbiAgICAgICAgbG9nZGF0YS5hcmcxID0gZ29rZXkuZHVyYXRpb24gfHwgbG9nZGF0YS5sb2drZXk7XG4gICAgICB9XG4gICAgICBsb2dkYXRhLmdva2V5ID0gZ29rZXk7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IGxvZ2RhdGE7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDc4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcbiAqIEFQSeaPkuS7tlxuICpcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgcmVxdWlyZSgnLi9saWJfYXBpL21haW5fbWluaScpKHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfYXBpX21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcbiAqIEFQSeaPkuS7tlxuICpcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSBsb2dDb25maWcge1xuICogICAgcHY6IHtcbiAqICAgICAgcGx1Z2luczogcmVxdWlyZSgnLi9saWJfbG9nL3BsdWdpbnNfcHYnKSxcbiAqICAgICAgY29udGV4dDogcmVxdWlyZSgnLi9saWJfbG9nL2NvbmZpZy9jb25maWdfdScpXG4gKiAgICB9LFxuICogICAgaGpsajoge1xuICogICAgICBwbHVnaW5zOiByZXF1aXJlKCcuL2xpYl9sb2cvcGx1Z2luc19oamxqJyksXG4gKiAgICAgIGNvbnRleHQ6IHJlcXVpcmUoJy4vbGliX2xvZy9jb25maWcvY29uZmlnX2hqbGpfdScpXG4gKiAgICB9XG4gKiAgfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsb2dDb25maWcpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICBpZiAoYXBsdXMuX2FwbHVzX2FwaSkge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIHtcbiAgICBhcGx1cy5fYXBsdXNfYXBpID0ge1xuICAgICAgc3RhdHVzOiBhcGx1c1N0YXRpYy5DT01QTEVURVxuICAgIH07XG4gIH1cblxuICB2YXIgYXBsdXNPYmogPSByZXF1aXJlKCcuL2FwbHVzX21pbmknKS5ydW4uY3JlYXRlKHtcbiAgICBsb2dDb25maWc6IGxvZ0NvbmZpZ1xuICB9KTtcbiAgZm9yICh2YXIgayBpbiBhcGx1c09iaikge1xuICAgIGFwbHVzW2tdID0gYXBsdXNPYmpba107XG4gIH1cbiAgdXRpbEdvbGRsb2cuc2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMsIGFwbHVzKTtcbiAgdmFyIG1zZ0FyciA9IFthcGx1c1N0YXRpYy5BUExVUyArICdSZWFkeScsIGFwbHVzU3RhdGljLkNPTVBMRVRFXTtcbiAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dBcnIpO1xuICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ0Fycik7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfYXBpL21haW5fbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIEJhc2UgPSByZXF1aXJlKCdAY29yZS9CYXNlJyk7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy9pc0FycmF5Jyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcbnZhciBjbG9uZURlZXAgPSByZXF1aXJlKCdAdXRpbHMvY2xvbmVEZWVwJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBSZWR1Y2VyID0gcmVxdWlyZSgnQGNvcmUvUmVkdWNlcicpO1xudmFyIG1ldGFJbmZvID0gcmVxdWlyZSgnLi4vbGliX21ldGEvbWV0YUluZm9NaW5pJyk7XG52YXIgaXNUcml2ZXIgPSByZXF1aXJlKCdAdXRpbHMvaXNUcml2ZXInKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcblxuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xudmFyIF9nZXRQYWdlU3BtID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG4gIGlmIChteSAmJiBteS5jYWxsICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG15LmNhbGwoJ2hhbmRsZUxvZ2dpbmdBY3Rpb24nLCB7XG4gICAgICAndHlwZSc6ICdiZWhhdmlvcicsXG4gICAgICAnc3ViVHlwZSc6IG9wdHMuc3ViVHlwZVxuICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgIHZhciBycyA9IHt9O1xuICAgICAgcnNbb3B0cy5zcG1UeXBlXSA9IHJlc1tvcHRzLnNwbVR5cGVdO1xuICAgICAgY2FsbGJhY2socnMpO1xuICAgIH0pO1xuICB9XG59O1xuXG52YXIgcnVuID0gQmFzZS5leHRlbmQoe1xuXG4gIC8qKlxuICAgKiBHRVQg6K+35rGC5LiA5Liq5Zu+54mH5Zyw5Z2A77yM5ZCR5pyN5Yqh5Zmo5Y+R6YCB5omT54K5XG4gICAqXG4gICAqIEBwYXJhbSB1cmwge1N0cmluZ31cbiAgICogQHBhcmFtIFtkYXRhU3RyXSB7U3RyaW5nIHx8IE9iamVjdH1cbiAgICogQHBhcmFtIFttZXRob2RdIHtTdHJpbmd9ICAvLyBQT1NUIE9SIEdFVFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICBfc2VuZDogZnVuY3Rpb24gKHVybCwgZGF0YSwgbWV0aG9kLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgIHVybCA9IHV0aWwuY2FuMmh0dHBzKHVybCk7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBtZXRob2QgPT09ICdQT1NUJykge1xuICAgICAgbWluaS5yZXF1ZXN0KHVybCwge1xuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgZGF0YVR5cGU6ICdiYXNlNjQnXG4gICAgICB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pbmkucmVxdWVzdCh1cmwgKyAnPycgKyBkYXRhLCB7XG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICBkYXRhVHlwZTogJ2Jhc2U2NCdcbiAgICAgIH0sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHVybDtcbiAgfSxcblxuICAvKipcbiAgICogR0VUIOivt+axguS4gOS4quWPr+inhuWMlumFjee9ruS/oeaBr++8jOWQkeacjeWKoeWZqOWPkVxuICAgKlxuICAgKiBAcGFyYW0gdXJsIHtTdHJpbmd9XG4gICAqL1xuICBfcmVxdWVzdFZUQ29uZmlnOiBmdW5jdGlvbih1cmwsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG4gICAgICAvLyB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcbiAgICAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuICAgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG4gICAgICAgIHByb3RvY2FsID0gJ2h0dHA6JztcbiAgICAgIH1cbiAgICAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuICAgIH1cbiAgICBtaW5pLnJlcXVlc3QodXJsLCB7IG1ldGhvZDogJ0dFVCcgfSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0gW09iamVjdF0gY29uZmlnOiB7XG4gICAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuICAgKiAgIGlzX2F1dG86IHRydWUvZmFsc2XvvIwgLy8g5qCH6K+G5piv5ZCm6Ieq5Yqo5omT54K577yM6buY6K6k5Li6dHJ1Ze+8jOWNlemhteW6lOeUqOmcgOimgeS8oGZhbHNlXG4gICAqICAgcGFnZV9pZDogMTIzLCAgICAgICAgIC8vIOWwhuS8muS9k+eOsOWcqHNwbWLkvY3kuIpcbiAgICogICBnb2tleTogJycsICAgICAgICAgICAgLy8g55So5oi36Ieq5a6a5LmJ5Y+C5pWw77yI5ZCR5LiL5YW85a6577yMVE9ET+WQjue7reS4i+aOie+8iVxuICAgKiB9XG4gICAqIEBwYXJhbSBbT2JqZWN0XSB1c2VyZGF0YToge1xuICAgKiAgIHJlZmVycmVyOiAnaHR0cDovL3d3dy50YW9iYW8uY29tJyAgIC8vIOWwhuS8muabv+aNonB26K+35rGC55qEcHJl5Y+C5pWwXG4gICAqICAgeHh4MTogJ3Z2djEnLFxuICAgKiAgIHh4eDI6ICd2dnYyJyxcbiAgICogICB4eHhOOiAndnZ2TicsXG4gICAqIH0gICAvLyDlkITnp43oh6rlrprkuYlwduWPguaVsFxuICAgKi9cbiAgX3NlbmRQVjogZnVuY3Rpb24gKGNvbmZpZywgdXNlcmRhdGEpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuXG4gICAgaWYgKGNvbmZpZy5wYWdlTmFtZSkge1xuICAgICAgYXBsdXMuX3NldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTICsgJy1wYWdlbmFtZScsIGNvbmZpZy5wYWdlTmFtZSk7XG4gICAgfVxuXG4gICAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICAgIGNvbmZpZy5yZWNvcmRUeXBlID0gJ1BWJzsgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG4gICAgaWYgKCFjb25maWcubWV0aG9kKSB7XG4gICAgICBjb25maWcubWV0aG9kID0gJ0dFVCc7XG4gICAgfVxuXG4gICAgdmFyIHB2ID0gYXBsdXMubG9nQ29uZmlnLnB2O1xuICAgIHJlZHVjZXIucnVuKHtcbiAgICAgIHBsdWdpbnM6IHB2LnBsdWdpbnMsXG4gICAgICBjb250ZXh0OiBjbG9uZURlZXAocHYuY29udGV4dCkgLy8g6Ziy5q2i5rqQ6YWN572u6KKr5rGh5p+TXG4gICAgfSwge1xuICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICB1c2VyZGF0YTogdXNlcmRhdGEgfHwge30sXG4gICAgICBwdWJzdWJUeXBlOiAncHYnLFxuICAgICAgLy8gbWVzc2FnZUZuUXVldWU6IGZuX2FmdGVyX3B2LFxuICAgICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfcHYnXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiBmuWQiOS4iuaKpeS7pOeureaXpeW/l1xuICAgKlxuICAgKiBAcGFyYW1zIHtTdHJpbmd9IGxvZ2tlee+8iOW/heWhq++8iVxuICAgKiBAcGFyYW1zIHtTdHJpbmd9IGdta2V577yI5b+F5aGr77yJIOaemuS4vuWAvO+8miBDTEsg5ZKMIEVYUFxuICAgKiBAcGFyYW1zIHtBcnJheU9iamVjdH0gZ29rZXlz77yI5b+F5aGr77yJ5YaF572u55qE5a+56LGh5Y+C5pWw5qC85byP5aaC77yaXG4gICAqICBbe1xuICAgKiAgICBcImV4YXJnc1wiOiB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIrmiqXnmoToh6rlrprkuYnlj4LmlbDvvIzlhoXlrrnlnYfkuLrlj6/pgInvvIzlpoLml6Doh6rlrprkuYnlj4LmlbDliJnkvKDnqbrlr7nosaFcbiAgICogICAgICBcIl93XCI6IDM3NSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X5a695bqmXG4gICAqICAgICAgXCJfaFwiOiAxODgsICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOabneWFieaooeWdl+mrmOW6plxuICAgKiAgICAgIFwiX3hcIjogMCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnmqKHlnZfmqKrlnZDmoIdcbiAgICogICAgICBcIl95XCI6IDg3LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X57q15Z2Q5qCHXG4gICAqICAgICAgXCJfcmF0ZVwiOiBcIjEuMDBcIiwgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ6Z2i56ev5q+U5L6LXG4gICAqICAgICAgXCJfdmlld2FiaWxpdHlcIjogXCJpbnRlcnNlY3Rpb25cIiwgICAgICAgLy8g5pud5YWJ5pa55byPIGludGVyc2VjdGlvbiDmiJYgZmlsbHdpbmRvd1xuICAgKiAgICAgIC8vIOmZpOS6huS4iui/sOS/neeVmeWPguaVsOWklueahOWFtuS7luWPguaVsGtleS12YWx1ZeiHquihjOWumuS5ie+8mlxuICAgKiAgICAgIFwieW91cktleTFcIjogXCJ5b3VyVmFsdWUxXCIsICAgICAgICBcbiAgICogICAgICBcInlvdXJLZXkyXCI6IFwiJUU0JUI4JUFEJUU1JTlCJUJEXCIgICAgICAvLyDlpoLkuLrkuK3mlofvvIzliJnpnIDoh6rooYznvJbnoIFcbiAgICogICAgICAuLi4uLi5cbiAgICogICAgfSxcbiAgICogICAgXCJzY21cIjogXCJhLmIuYy5kXCIsICAgICAgICAgICAgICAgICAgICAgICAvLyBzY23kuLrlj6/pgInlj4LmlbDvvIzlpoLml6DliJnkvKDnqbrlgLxcbiAgICogICAgXCJzcG1cIjogXCJzcG1hLnNwbWIuc3BtYy5zcG1kXCIsICAgICAgICAgICAvLyBzcG3kuLrlv4XpgInlj4LmlbDvvIzkvb/nlKjmoIflh4bnmoTlm5vmrrXlvI9cbiAgICogICAgXCJhcGx1c0NvbnRlbnRJZFwiOiBcIlwiICAgICAgICAgICAgICAgICAgICAvLyDkv53nlZnlrZfmrrXvvIzmmoLml7bkuI3pnIDopoHkvKBcbiAgICogIH1dXG4gICAqIEBwYXJhbXMge1N0cmluZ30gbWV0aG9k77yI5Y+v6YCJ77yJICAgICAgICAgICAgICAvLyDmnprkuL7lgLzvvJogR0VU5ZKMUE9TVO+8jOm7mOiupOS9v+eUqFBPU1TmlrnlvI/kuIrmiqVcbiAgICogQHBhcmFtcyB7RnVuY3Rpb259IGNiICAgICAgICAgICAgICAgICAgICAgIC8vIOS/neeVmeWxnuaAp++8jOaaguaXtuS4jemcgOimgeS8oFxuICAgKi9cbiAgX2NvbWJpbmVSZWNvcmQ6IGZ1bmN0aW9uKGxvZ2tleSwgZ21rZXksIGdva2V5cywgbWV0aG9kKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgIHZhciBFWFAgPSAnRVhQJztcbiAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpICYmIChnbWtleSA9PT0gRVhQIHx8IGdta2V5ID09PSAnQ0xLJykpIHtcbiAgICAgIGlmIChpc0FycmF5KGdva2V5cykpIHtcbiAgICAgICAgaWYgKCFtZXRob2QpIHtcbiAgICAgICAgICBtZXRob2QgPSAnUE9TVCc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVzZXJkYXRhID0gW107XG4gICAgICAgIHZhciBzZW5kdG9teSA9ICd0cnVlJztcbiAgICAgICAgZ29rZXlzLmZvckVhY2goZnVuY3Rpb24odil7XG4gICAgICAgICAgdXNlcmRhdGEucHVzaCh7XG4gICAgICAgICAgICBleGFyZ3M6IHR5cGVvZiB2LmV4YXJncyA9PT0gJ29iamVjdCcgPyB2LmV4YXJncyA6IHt9LFxuICAgICAgICAgICAgc2NtOiB2LnNjbSxcbiAgICAgICAgICAgIHNwbTogdi5zcG0sXG4gICAgICAgICAgICBhcGx1c0NvbnRlbnRJZDogdi5hcGx1c0NvbnRlbnRJZCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAodi5fYXBsdXNfc2VuZHRvbXkgPT09ICdmYWxzZScgJiYgc2VuZHRvbXkgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgc2VuZHRvbXkgPSAnZmFsc2UnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBfZ29rZXlzID0gW107XG4gICAgICAgIF9nb2tleXMucHVzaCgoZ21rZXkgPT09IEVYUCA/ICdleHBkYXRhPScgOiAnY2xrZGF0YT0nKSArIEpTT04uc3RyaW5naWZ5KHVzZXJkYXRhKSk7XG4gICAgICAgIF9nb2tleXMucHVzaChnbWtleSA9PT0gRVhQID8gJ19pc19hdXRvX2V4cD0xJyA6ICdfaXNfYXV0b19jbGs9MScpO1xuICAgICAgICBfZ29rZXlzLnB1c2goJ19ldmVudFR5cGU9Y3VzdG9tJyk7XG4gICAgICAgIF9nb2tleXMucHVzaCgnX21ldGhvZD0nICsgbWV0aG9kKTtcbiAgICAgICAgX2dva2V5cy5wdXNoKCdfcGtnU2l6ZT0nICsgZ29rZXlzLmxlbmd0aCk7XG4gICAgICAgIGlmIChzZW5kdG9teSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgIF9nb2tleXMucHVzaCgnX2FwbHVzX3NlbmR0b215PWZhbHNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXBsdXMucmVjb3JkKGxvZ2tleSwgZ21rZXksIF9nb2tleXMuam9pbignJicpLCBtZXRob2QpOyAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3R5cGUgb2YgZ29rZXlzIG11c3QgYmUgQXJyYXlPYmplY3QhJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2Fybignb25seSBzdXBwb3J0IEVYUCBvciBDTEsgbG9nIHRvIGNvbWJpbGUgcmVjb3JkIScpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICog5Y+R6YCB6buE6YeR5Luk566t5omT54K5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsb2drZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGdta2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBnb2tleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIOivt+axguaWueazleS4uiBQT1NUIG9yIEdFVFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2JcbiAgICovXG4gIF9yZWNvcmQ6IGZ1bmN0aW9uIChsb2drZXksIGdta2V5LCBnb2tleSwgbWV0aG9kLCBjYikge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICBsb2drZXkgPSBsb2drZXkgKyAnJztcbiAgICBpZiAobG9na2V5ICYmIGxvZ2tleS5pbmRleE9mKCcvJykgIT09IDAgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4gICAgICBsb2drZXkgPSAnLycgKyBsb2drZXk7XG4gICAgfVxuICAgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcbiAgICB2YXIgaGpsaiA9IGFwbHVzLmxvZ0NvbmZpZy5oamxqO1xuICAgIHJlZHVjZXIucnVuKHtcbiAgICAgIHBsdWdpbnM6IGhqbGoucGx1Z2lucyxcbiAgICAgIGNvbnRleHQ6IGNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuICAgIH0sIHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcbiAgICAgICAgbWV0aG9kOiBtZXRob2QgfHwgJ0dFVCdcbiAgICAgIH0sXG4gICAgICB1c2VyZGF0YToge1xuICAgICAgICBsb2drZXk6IGxvZ2tleSxcbiAgICAgICAgZ21rZXk6IGdta2V5LFxuICAgICAgICBnb2tleTogZ29rZXlcbiAgICAgIH0sXG4gICAgICBwdWJzdWJUeXBlOiAnaGpsaicsXG4gICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcmVjb3JkLFxuICAgICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfaGpsaidcbiAgICB9LCBmdW5jdGlvbigpe1xuICAgICAgaWYgKGlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIFxuICBnZXRQYWdlU1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuICAgIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG4gICAgdmFyIGRhdGEgPSBzcG0uZGF0YSB8fCB7fTtcbiAgICByZXR1cm4gW2RhdGEuYSwgZGF0YS5iXTtcbiAgfSxcblxuICAvKipcbiAgICog5pu05paw6aG16Z2i55qEIGHjgIFiIOS9jVxuICAgKiDpnIDmsYLlj4Lop4HvvJpodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS9hbGlsb2cva2IvaXNzdWVzLzEzN1xuICAgKiBAcGFyYW0gYSB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW2JdIHtTdHJpbmd9XG4gICAqIEBwYXJhbSBbY2JdIHtGdW5jdGlvbn1cbiAgICovXG4gIF9zZXRQYWdlU1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9iaiA9IHt9O1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBjYjtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICBvYmogPSBhcmdzWzBdO1xuICAgICAgY2IgPSBhcmdzWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmouc3BtQ250ID0gW2FyZ3NbMF0sIGFyZ3NbMV0sICcwJywgJzAnXS5qb2luKCcuJyk7XG4gICAgICBjYiA9IGFyZ3NbMl07XG4gICAgfVxuICAgIHZhciBtc2dzO1xuICAgIGlmICghb2JqLnNwbUNudCAmJiAhb2JqLnNwbVVybCAmJiBtZXRhSW5mby5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpKSB7XG4gICAgICBtc2dzID0gWydjbGVhclBhZ2VTUE0nXTtcbiAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbXMgb2JqIHtPYmplY3R9IHtcbiAgICAgICAqICAgc3BtQ250OiAnYS5iLjAuMCdcbiAgICAgICAqICAgc3BtVXJsOiAnYS5iLjAuMCdcbiAgICAgICAqICAgc3BtUHJlOiAnYS5iLjAuMCdcbiAgICAgICAqIH1cbiAgICAgICAqL1xuICAgICAgbXNncyA9IFsnc2V0UGFnZVNQTScsIG9ial07XG4gICAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuICAgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcbiAgICB9XG4gICAgdmFyIGNhbGxiYWNrID0gdHlwZW9mIGNiID09PSAnZnVuY3Rpb24nID8gY2IgOiBmdW5jdGlvbiAoKSB7fTtcbiAgICBjYWxsYmFjayhtc2dzKTtcbiAgfSxcblxuICAvKipcbiAgICog5Yqo5oCB6YWN572ubWV0YVxuICAgKiBAcGFyYW0ge1N0cmluZ30ga1xuICAgKiBAcGFyYW0ge09iamVjdH0gdlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyB7XG4gICAqICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuICAgKiB9XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBfc2V0TWV0YUluZm86IGZ1bmN0aW9uKGFyZzEsIHZhbHVlKSB7XG4gICAgcmV0dXJuIG1ldGFJbmZvLl9zZXRNZXRhSW5mbyhhcmcxLCB2YWx1ZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9wcm9qZWN0L2FwbHVzX2Nsb3VkIzMzMmRlNjJjXG4gICAqIOS4jeaUr+aMgXVwZGF0ZVBhZ2VQcm9wZXJ0aWVz77yM5pS555So5pu/5Luj5pa55qGIc2V0TWV0YUluZm9cbiAgICogQHBhcmFtcyB7U3RyaW5nfSDpgI/kvKBqc29u5a2X56ym5Liy77yM5b+F6aG75piv5a2X56ym5LiyXG4gICAqL1xuICBfdXBkYXRlUGFnZVByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhcmFtcyl7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyDmlrDlrrnlmahUcml2ZXLph4fnlKh1cGRhdGVQYWdlUHJvcGVydGllc1xuICAgICAgaWYgKGlzVHJpdmVyKCkpIHtcbiAgICAgICAgbXkucmVwb3J0QW5hbHl0aWNzKCd1cGRhdGVQYWdlUHJvcGVydGllcycsIHBhcmFtcyk7XG4gICAgICB9IGVsc2UgaWYobWluaS5nZXRQbGF0Zm9ybVR5cGUoKT09PSdteScpe1xuICAgICAgICBteS5jYWxsKCdyZXBvcnREYXRhJyx7XG4gICAgICAgICAgc3BtRGV0YWlsOnBhcmFtcyxcbiAgICAgICAgICBpZ25vcmVEZWZhdWx0UGFnZU1vbml0b3I6dHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIOWQkeS4i+WFvOWuue+8jOS4jeeuoeaAjuS5iOagt+mDveW+gG1ldGFJbmZv6K6+572u5LiA5Lu9XG4gICAgICB2YXIgY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICB2YXIgcGFnZU5hbWUgPSBjdXJyZW50UGFnZS5yb3V0ZSB8fCBjdXJyZW50UGFnZS5pcyB8fCAncGFnZSc7XG4gICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgZGF0YVtwYWdlTmFtZV0gPSBwYXJhbXM7XG4gICAgICBtZXRhSW5mby5hcHBlbmRNZXRhSW5mbygnYXBsdXMtcGFnZS1wcm9wZXJ0aWVzJywgZGF0YSk7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICogaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9hcGx1c2pzL3Byb2plY3QvYXBsdXNfY2xvdWQjNjAzNGMxZGFcbiAgICovXG4gIF91cGRhdGVOZXh0UGFnZVByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcykge1xuICAgICAgcGFyYW1zID0ge307XG4gICAgfVxuICAgIGlmIChteSkge1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHR5cGU6ICd1cGRhdGVOZXh0UHJvcCcsXG4gICAgICAgIGV2ZW50SWQ6IC0xLFxuICAgICAgICBldmVudGlkOiAtMSxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIHBhZ2VOYW1lOiAnJyxcbiAgICAgICAgY29tTmFtZTogJycsXG4gICAgICAgIGFyZzE6ICcnLFxuICAgICAgICBhcmcyOiAnJyxcbiAgICAgICAgYXJnMzogJycsXG4gICAgICAgIHBhcmFtOiBwYXJhbXMsXG4gICAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgICB9O1xuICAgICAgaWYgKG15LmNhbGxVc2VyVHJhY2spIHtcbiAgICAgICAgbXkuY2FsbFVzZXJUcmFjaygnY29tbWl0dXQnLCBkYXRhKTtcbiAgICAgIH0gZWxzZSBpZiAobXkucmVwb3J0QW5hbHl0aWNzKSB7XG4gICAgICAgIG15LnJlcG9ydEFuYWx5dGljcygnZW50ZXInLCBkYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRvIGFwcGVuZCBgbWV0YWAgdGFnIGlmIHRoZXJlJ3Mgbm9uZSBhcGx1cyBtZXRhLlxuICAgKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcbiAgICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG4gICAqICAtIGBPYmplY3QuYXNzaWduYCBjYWxsZWQgb24gT2JqZWN0IHZhbHVlcy5cbiAgICogIEBwYXJhbSBrXG4gICAqICBAcGFyYW0gdlxuICAgKi9cbiAgX2FwcGVuZE1ldGFJbmZvOiBtZXRhSW5mby5hcHBlbmRNZXRhSW5mbyxcblxuICAvKipcbiAgICogZ2V0IG1ldGFJbmZvIGJ5IGtleVxuICAgKiBAcGFyYW0ge1N0cmluZ31cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uIChrKSB7XG4gICAgcmV0dXJuIG1ldGFJbmZvLmdldE1ldGFJbmZvKGspO1xuICB9LFxuXG4gIC8vIOa3seW6puWFi+mahu+8jOS7juaguOW/g+W6k+aatOmcsuWHuuWOu+S+m2FwbHVzSlPmj5Lku7bkvb/nlKhcbiAgY2xvbmVEZWVwOiBjbG9uZURlZXAsXG4gIC8qKlxuICAgKiDlpoLmnpzlrrnlmajlrp7njrDkuoZhcHBlYXLjgIFkaXNhcHBlYXLvvIzkvYbkuJrliqHlj4jmg7PmiYvliqjmjqfliLbmiZPngrnnlJ/lkb3lkajmnJ/ml7bkvb/nlKhcbiAgICpcbiAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuICAgKi9cbiAgX3NraXBQYWdlOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG4gICAgLy8gVXNlclRyYWNrLnNraXBQYWdlKCk7XG4gICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2spIHtcbiAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3NraXBQYWdlJyk7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICog5aaC5p6c5a655Zmo5pyq5o+Q5L6bYXBwZWFy44CBZGlzYXBwZWFy5pe26ZyA6KaB5Lia5Yqh5omL5Yqo6LCD55SoXG4gICAqXG4gICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cbiAgICovXG4gIF9wYWdlQXBwZWFyOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbigpe1xuICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrICYmIHRoaXMuaXNQYWdlRGlzQXBwZWFyKSB7XG4gICAgICB0aGlzLmlzUGFnZURpc0FwcGVhciA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1BhZ2VBcHBlYXIgPSB0cnVlO1xuICAgICAgbXkuY2FsbFVzZXJUcmFjaygncGFnZUFwcGVhcicpO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIOWmguaenOWuueWZqOacquaPkOS+m2FwcGVhcuOAgWRpc2FwcGVhcuaXtumcgOimgeS4muWKoeaJi+WKqOiwg+eUqFxuICAgKlxuICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG4gICAqL1xuICBfcGFnZURpc2FwcGVhcjogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oKXtcbiAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjayAmJiB0aGlzLmlzUGFnZUFwcGVhcikge1xuICAgICAgdGhpcy5pc1BhZ2VEaXNBcHBlYXIgPSB0cnVlO1xuICAgICAgdGhpcy5pc1BhZ2VBcHBlYXIgPSBmYWxzZTtcbiAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3BhZ2VEaXNhcHBlYXInKTtcbiAgICB9XG4gIH0sXG4gIF91cGRhdGVQYWdlVXRwYXJhbTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICBwYXJhbXMgPSB7fTtcbiAgICB9XG4gICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2spIHtcbiAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3VwZGF0ZVBhZ2VVdHBhcmFtJywge1xuICAgICAgICAndXRQYXJhbUpzb24nOiBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgX3VwZGF0ZU5leHRQYWdlVXRwYXJhbTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFyYW1zKXtcbiAgICBpZiAoIXBhcmFtcykge1xuICAgICAgcGFyYW1zID0ge307XG4gICAgfVxuICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrKSB7XG4gICAgICBteS5jYWxsVXNlclRyYWNrKCd1cGRhdGVOZXh0UGFnZVV0cGFyYW0nLCB7XG4gICAgICAgICd1dFBhcmFtSnNvbic6IEpTT04uc3RyaW5naWZ5KHBhcmFtcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICog5LuF5omL5reY77yIVjkuMTAuMO+8ieWwj+eoi+W6j+aUr+aMgVxuICAgKiBAcGFyYW1zIHtPYmplY3R9IHByb3BlcnRpZXNcbiAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuICAgKi9cbiAgX3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocHJvcGVydGllcykge1xuICAgIC8vIGlmIChteSAmJiBteS5yZXBvcnRBbmFseXRpY3MgJiYgdHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gICBteS5yZXBvcnRBbmFseXRpY3MoJ3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzJywgcHJvcGVydGllcyk7XG4gICAgLy8gfVxuICAgIGlmIChteSAmJiBteS5jYWxsICYmIHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgbXkuY2FsbCgnaGFuZGxlTG9nZ2luZ0FjdGlvbicsIHtcbiAgICAgICAgdHlwZTogJ2JlaGF2aW9yJyxcbiAgICAgICAgc3ViVHlwZTogJ3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzJyxcbiAgICAgICAgZXh0RGF0YTogcHJvcGVydGllcyxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIOS7heaJi+a3mO+8iFY5LjkuMO+8ieWwj+eoi+W6j+aUr+aMgVxuICAgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2s6IHtzcG1Vcmw6ICcnfVxuICAgKi9cbiAgX2dldFBhZ2VTcG1Vcmw6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIF9nZXRQYWdlU3BtKHtcbiAgICAgIHN1YlR5cGU6ICdnZXRQYWdlU3BtVXJsJyxcbiAgICAgIHNwbVR5cGU6ICdzcG1VcmwnXG4gICAgfSwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiDku4XmiYvmt5jvvIhWOS45LjDvvInlsI/nqIvluo/mlK/mjIFcbiAgICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrIDoge3NwbVByZTogJyd9XG4gICAqL1xuICBfZ2V0UGFnZVNwbVByZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgX2dldFBhZ2VTcG0oe1xuICAgICAgc3ViVHlwZTogJ2dldFBhZ2VTcG1QcmUnLFxuICAgICAgc3BtVHlwZTogJ3NwbVByZSdcbiAgICB9LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiuvue9rlBhZ2VOYW1lIFxuICAqL1xuICBfc2V0UGFnZU5hbWU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhZ2VOYW1lLCBwYXRoKSB7XG4gICAgaWYgKCFwYWdlTmFtZSkge1xuICAgICAgdWxvZygpLncoJ3NldFBhZ2VOYW1lIGZhaWxlZDogJyArICcgcGFnZU5hbWU9JyArIHBhZ2VOYW1lKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGN1clBhdGggPSBwYXRoIHx8IFBhZ2VNYW5hZ2VyLmdldEN1cnJlbnRQYWdlUGF0aCgpO1xuICAgIFxuICAgIHZhciBwYWdlTWV0YSA9IGNsb25lRGVlcChtZXRhSW5mby5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpIHx8IHt9KTtcbiAgICBwYWdlTWV0YVtjdXJQYXRoXSA9IHBhZ2VOYW1lO1xuICAgIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKCdwYWdlQ29uZmlnJywgcGFnZU1ldGEpO1xuICB9LFxuXG4gIC8qKlxuICAgKiDojrflj5ZQYWdlTmFtZVxuICAqL1xuICBnZXRQYWdlTmFtZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGF0aCkge1xuICAgIHJldHVybiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZShwYXRoKTtcbiAgfSxcblxuICAvKipcbiAgICog6I635Y+W5YWD57Sg55qEc3BtXG4gICAqICovIFxuICBfZ2V0RWxlbWVudFNQTTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24odGFyZ2V0LCBjYWxsYmFjaykge1xuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHZhciBzcG1CID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCAnJzsgXG5cbiAgICBpZiAodHlwZW9mIHRhcmdldCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHZhciB0cmFja2VyUGFyYW1zID0gdGFyZ2V0LmRhdGFzZXQgJiYgdGFyZ2V0LmRhdGFzZXQudHJhY2tlclBhcmFtcyB8fCAnJztcbiAgICAgIHZhciBzcG1DRCA9IHV0aWwuanNvbkxpa2VTdHIySlNPTih0cmFja2VyUGFyYW1zKTtcbiAgICAgIHJldHVybiBbc3BtQiwgc3BtQ0Quc3BtQywgc3BtQ0Quc3BtRF0uam9pbignLicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgICB2YXIgYXV0b19jbGtfbWV0YWluZm8gPSBtZXRhSW5mby5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnKSB8fCBbXTtcbiAgICAgIHZhciBhdXRvX2V4cF9tZXRhaW5mbyA9IG1ldGFJbmZvLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpIHx8IFtdO1xuICAgICAgdmFyIHRhcmdldFNwbTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICAvL+iHquWKqOeCueWHu+S8mOWFiOe6p+abtOmrmFxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBhdXRvX2Nsa19tZXRhaW5mby5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgdmFyIGNsa19pbmZvID0gYXV0b19jbGtfbWV0YWluZm9baV07XG4gICAgICAgICAgaWYgKGNsa19pbmZvLmNzc1NlbGVjdG9yID09PSB0YXJnZXQpIHtcbiAgICAgICAgICAgIHRhcmdldFNwbSA9IFtzcG1CLCBjbGtfaW5mby5zcG1DLCBjbGtfaW5mby5zcG1EXS5qb2luKCcuJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBhdXRvX2V4cF9tZXRhaW5mby5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgdmFyIGV4cF9pbmZvID0gYXV0b19leHBfbWV0YWluZm9baV07XG4gICAgICAgICAgaWYgKGV4cF9pbmZvLmNzc1NlbGVjdG9yID09PSB0YXJnZXQpIHtcbiAgICAgICAgICAgIHRhcmdldFNwbSA9IFtzcG1CLCBleHBfaW5mby5zcG1DLCBleHBfaW5mby5zcG1EXS5qb2luKCcuJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH07IFxuXG4gICAgICAgIHZhciBlbGVtZW50cyA9IGN0eC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKHRhcmdldCk7XG4gICAgICAgIGlmICh0eXBlb2YgZWxlbWVudHMuZmllbGRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZWxlbWVudHMuZmllbGRzKHtcbiAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICB9LCBmdW5jdGlvbihyZXQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIGlmIChyZXQgJiYgcmV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcmV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGFyZ2V0U3BtICsgJ18nICsgaSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdCk7ICBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmV4ZWMoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdWxvZygpLncoJ+ivpeW5s+WPsOS4jeaUr+aMgWRvbeWFg+e0oOafpeivoiwgZXJyID0gJywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICog5Lmd6ZSh6ZyA5rGC77yaaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9seGxuN2gvYnZ6eW1yL2FrYjQ5ZiNoUGFYTFxuICAgKiBhcHDllKTotbfkuovku7bmjqXlj6PvvIzlrp7pmYXlsLHmmK9yZWNvcmRcbiAgICovXG4gIF9yZWNvcmRBcHBMaW5rOiBmdW5jdGlvbiAoZ29rZXksIG1ldGhvZCwgY2IpIHtcbiAgICBpZighZ29rZXkudGFyZ2V0QXBwS2V5KSB7XG4gICAgICB1bG9nKCkudygnc2VuZCAkJF9hcHBfbGluayBmYWlsZWQ6IHRhcmdldEFwcEtleSBpcyBudWxsJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICByZXR1cm4gYXBsdXMuX3JlY29yZCgnJCRfYXBwX2xpbmsnLCAnT1RIRVInLCBnb2tleSwgbWV0aG9kLCBjYik7XG4gIH0sXG59KTtcblxuZXhwb3J0cy5ydW4gPSBydW47XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9hcGkvYXBsdXNfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gODFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG52YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBDb21wb3NlID0gcmVxdWlyZSgnQGNvcmUvY29tcG9zZScpO1xudmFyIHBsdWdpbnNMb2FkZXIgPSByZXF1aXJlKCdAY29yZS9wbHVnaW5zTG9hZGVyJyk7XG5cbi8qKlxuICogc2VucHZcbiAqIEBwYXJhbSBbT2JqZWN0XSBjb25maWc6IHtcbiAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuICogICBpc19hdXRvOiB0cnVlL2ZhbHNl77yMIC8vIOagh+ivhuaYr+WQpuiHquWKqOaJk+eCue+8jOm7mOiupOS4unRydWXvvIzljZXpobXlupTnlKjpnIDopoHkvKBmYWxzZVxuICogICBwYWdlX2lkOiAxMjMsICAgICAgICAvLyDlsIbkvJrkvZPnjrDlnKhzcG1i5L2N5LiKXG4gKiAgIGdva2V5OiAnJywgICAgICAgICAgIC8vIOebruWJjeW3sue7j+WkseaViFxuICogICByZWZlcnJlcjogJ2h0dHA6Ly93d3cudGFvYmFvLmNvbScgICAvLyDlsIbkvJrmm7/mjaJwduivt+axgueahHByZeWPguaVsFxuICogfSAvLyDlkIwgYXBsdXMubGF1bmNo56ys5LqM5Liq5YWl5Y+C4oCcbWFudWFs4oCdXG4gKlxuICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhICAgLy8g5ZCE56eN6Ieq5a6a5LmJcHblj4LmlbBcbiAqXG4gKiBAcGFyYW0gW09iamVjdF0gb2JqIC0ge2ZuX2FmdGVyX3B2OiBmbl9hZnRlcl9wdiwgeHh4OiB4eHh9XG4gKlxuICogc3RlcDE6IGxvYWRlciBwbHVnaW5zICBtaWRkbGV3YXJlXG4gKiBzdGVwMjogbG9hZGVyIGRvU2VuZFB2IG1pZGRsZXdhcmVcbiAqIHN0ZXAzOiBydW4gbWlkZGxld2FyZXNcbiAqL1xuXG52YXIgUmVkdWNlciA9IGZ1bmN0aW9uKCkge1xufTtcblxuLyoqXG4gKiBAcGFyYW1zIE9iamVjdCBDT05GSUcge1xuICogICBjb250ZXh0OiB4eHgsXG4gKiAgIHBsdWdpbnM6IHh4eCBcbiAqIH1cbiAqIEBwYXJhbXMgT2JqZWN0IG9wdHMge1xuICogICBjb25maWc6IGNvbmZpZyxcbiAqICAgdXNlcmRhdGE6IHVzZXJkYXRhLFxuICogICBwdWJzdWJUeXBlOiAncHYnIHx8ICdoamxqJyB8fCAncHJlcHYnXG4gKiAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2JyB8fCAnbXdfY2hhbmdlX2hqbGonIHx8ICdtd19jaGFuZ2VfcHJlcHYnXG4gKiAgIG1lc3NhZ2VGblF1ZXVlOiBbZm4xLCBmbjIgLi4uXVxuICogfVxuICovXG5SZWR1Y2VyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoQ09ORklHLCBvcHRzLCBjYWxsYmFjaykge1xuICAvLyAx44CBaW5pdCBwbHVnaW5zXG4gIHZhciBwbCA9IG5ldyBwbHVnaW5zTG9hZGVyKCk7XG4gIHBsLmluaXQoe1xuICAgIG1pZGRsZXdhcmU6IFtdLFxuICAgIGNvbmZpZzogb3B0cy5jb25maWcsXG4gICAgcGx1Z2luczogQ09ORklHLnBsdWdpbnNcbiAgfSk7XG4gIHZhciBtaWRkbGV3YXJlID0gcGwucnVuKCk7XG5cbiAgLy8g5Yid5aeL5YyW5LiK5LiL5paH546v5aKD77yMY29udGV4dOWGheeahGRhdGHlsIbkvJrlnKjlkITkuKrmj5Lku7bkuK3ov5vooYzotYvlgLzmiJbogIXkv67mlLnvvIjph43opoHvvIlcbiAgdmFyIGNvbnRleHQgPSBpc0Z1bmN0aW9uKENPTkZJRy5jb250ZXh0KSA/IG5ldyBDT05GSUcuY29udGV4dCgpIDogQ09ORklHLmNvbnRleHQ7XG4gIGNvbnRleHQudXNlcmRhdGEgPSBvcHRzLnVzZXJkYXRhO1xuICBjb250ZXh0LmxvZ2dlciA9IHV0aWxMb2dnZXIubG9nZ2VyO1xuXG4gIHZhciBhcHAgPSB7XG4gICAgY29udGV4dDogY29udGV4dCxcbiAgICBwdWJzdWI6IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ2FwbHVzX3B1YnN1YicpLFxuICAgIHB1YnN1YlR5cGU6IG9wdHMgJiYgb3B0cy5wdWJzdWJUeXBlXG4gIH07XG5cbiAgdmFyIGNvbXBvc2UgPSBuZXcgQ29tcG9zZSgpO1xuICBjb21wb3NlLmNyZWF0ZShhcHApO1xuICAvLyDmiafooYzkuK3pl7Tku7ZcbiAgY29tcG9zZS53cmFwKG1pZGRsZXdhcmUsIGZ1bmN0aW9uKCkge1xuICAgIGFwcC5jb250ZXh0LnN0YXR1cyA9IGFwbHVzU3RhdGljLkNPTVBMRVRFO1xuICAgIGlmIChvcHRzKSB7XG4gICAgICBpZiAob3B0cy5taWRkbGV3YXJlTWVzc2FnZUtleSkge1xuICAgICAgICB1dGlsUHVic3ViLmRvUHViTXNnKFtvcHRzLm1pZGRsZXdhcmVNZXNzYWdlS2V5LCBhcHAuY29udGV4dF0pOyAgXG4gICAgICB9XG4gICAgICBpZiAob3B0cy5tZXNzYWdlRm5RdWV1ZSkge1xuICAgICAgICBlYWNoKG9wdHMubWVzc2FnZUZuUXVldWUsIGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgIGZuKHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKSwgQ09ORklHKTtcbiAgICAgICAgfSk7ICBcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICBjYWxsYmFjayhhcHAuY29udGV4dCk7XG4gICAgfVxuICB9KSgpO1xuXG59O1xubW9kdWxlLmV4cG9ydHMgPSBSZWR1Y2VyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9SZWR1Y2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA4MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9jb21wb3NlLmpzXG4gKiDlh73mlbDpmJ/liJfljIXoo4XlmaggRXhwb3NlIGNvbXBvc2l0b3JcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuXG5mdW5jdGlvbiBjb21wb3NlICgpIHt9O1xuXG5jb21wb3NlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihwcm9wcykge1xuICAvKipcbiAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG4gICAqIGNyZWF0Zei/lOWbnueahOWunuS+i+WunumZheS4iuWwseaYr25ld+aehOmAoOWHuueahOWunuS+i++8m1xuICAgKiB0aGlz5Y2z5oyH5ZCR6LCD55So5b2T5YmNY3JlYXRl55qE5p6E6YCg5Ye95pWw77ybXG4gICAqL1xuICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzW25hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpc1tuYW1lXSA9IHByb3BzW25hbWVdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmNvbXBvc2UucHJvdG90eXBlLmNhbGxlZExpc3QgPSBbXTtcblxuY29tcG9zZS5wcm90b3R5cGUuc2V0Q2FsbGVkTGlzdCA9IGZ1bmN0aW9uKGkpIHtcbiAgaWYgKHV0aWxBcnJheS5pbmRleG9mKHRoaXMuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG4gICAgdGhpcy5jYWxsZWRMaXN0LnB1c2goaSk7XG4gIH1cbn07XG5cbmNvbXBvc2UucHJvdG90eXBlLnJlc2V0Q2FsbGVkTGlzdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNhbGxlZExpc3QgPSBbXTtcbn07XG5cbmNvbXBvc2UucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbihtdywgY2FsbGJhY2spIHtcbiAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICB2YXIgY3R4ID0gdGhpcy5jb250ZXh0IHx8IHt9O1xuICB2YXIgY29tcG9zZSA9IGN0eC5jb21wb3NlIHx8IHt9O1xuICB2YXIgbWF4VGltZW91dCA9IGNvbXBvc2UubWF4VGltZW91dCB8fCAxMCAqIDEwMDA7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHZhciBzaXplID0gbXcubGVuZ3RoOyAvLyDkuK3pl7Tku7bpmJ/liJfplb/luqZcbiAgICB2YXIgaSA9IDA7IC8vIOS4remXtOS7tue0ouW8lVxuICAgIHZhciBqID0gMDsgLy8g5LiA5Liq5qCH6K+G77yMMC3liJ3lp4vnirbmgIHvvIwxLeS4remXtOS7tuWbnuiwg+aJp+ihjOS6hlxuICAgIHZhciBzbGVlcEhhbmRlcjE7XG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uKGluZGV4LCBzdGF0dXMpIHtcbiAgICAgIC8vIGNvbnRleHQucHVic3ViSW5mbyhjb250ZXh0LCBtd1tpXSk7XG4gICAgICAvLyDkuK3pl7Tku7bpmJ/liJfmiafooYzlrozmr5XlkI7ov5Tlm55cbiAgICAgIGlmIChpID09PSBzaXplKSB7XG4gICAgICAgIHN0YXRlID0gJ2RvbmUnO1xuICAgICAgICBjb250ZXh0LnJlc2V0Q2FsbGVkTGlzdCgpOyAvLyDph43nva5jYWxsZWRMaXN05Y+Y6YePXG4gICAgICAgIC8vIHN0YXR1c+WmguaenOetieS6jmRvbmXvvIzor7TmmI7mmK/kuK3pgJTpgIDlh7rnmoTkuK3pl7Tku7bvvIzkuI3pnIDopoHmiafooYzlm57osINcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spICYmIHN0YXR1cyAhPT0gc3RhdGUpIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBjbGVhclRpbWVvdXQoc2xlZXBIYW5kZXIxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gdmFyIGNiX3N0YXRlID0gbnVsbDtcbiAgICAgIC8vIOS/neivgeavj+S4quS4remXtOS7tuWPquS8muaJp+ihjOS4gOasoVxuICAgICAgaWYgKHV0aWxBcnJheS5pbmRleG9mKGNvbnRleHQuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG4gICAgICAgIGNvbnRleHQuc2V0Q2FsbGVkTGlzdCAmJiBjb250ZXh0LnNldENhbGxlZExpc3QoaSk7XG4gICAgICAgIGlmIChtdyAmJiBtd1tpXSAmJiBpc0Z1bmN0aW9uKG13W2ldWzBdKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwYXJhbXMge0FycmF5fSBtaWRkbGV3YXJlXG4gICAgICAgICAgICAgKiBAcGFyYW1zIHtBcnJheX0gbXNnXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHN0YXRlID0gbXdbaV1bMF0uY2FsbChjb250ZXh0LCBzdGF0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgIGogPSAxOyAgLy8gMS3kuK3pl7Tku7blm57osIPmiafooYzkuoZcbiAgICAgICAgICAgICAgcnVuKGkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdWxvZygpLncoZSk7XG4gICAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgICAvLyAgIG1zZzogZVxuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8g54q25oCB5Li6cGF1c2XnrYnlvoUyMDBtc+i9ruivou+8jOeKtuaAgeS4um51bWJlcuexu+Wei+eahOaVsOWAvOetieW+hXN0YXRlbXPova7or6JcbiAgICAgIHZhciBpc051bWJlciA9IHR5cGVvZiBzdGF0ZSA9PT0gJ251bWJlcic7XG4gICAgICBpZiAoc3RhdGUgPT09ICdwYXVzZScgfHwgaXNOdW1iZXIpIHtcbiAgICAgICAgaiA9IDA7XG4gICAgICAgIC8vIOacgOWkp+etieW+heaXtumVv1xuICAgICAgICB2YXIgX3RpbWVfb3V0ID0gaXNOdW1iZXIgPyBzdGF0ZSA6IG1heFRpbWVvdXQ7XG4gICAgICAgIHZhciBfbXdfbmFtZSA9IG13W2ldID8gbXdbaV1bMV0gOiAnJztcbiAgICAgICAgc2xlZXBIYW5kZXIxID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoaiA9PT0gMCkge1xuICAgICAgICAgICAgdWxvZygpLncoJ2p1bXAgdGhlIG1pZGRsZXdhcmUgYWJvdXQgJyArIF9td19uYW1lICsgJywgYmVjYXVzZSB3YWl0aW5nIHRpbWVvdXQgbWF4VGltZW91dCA9ICcgKyBfdGltZV9vdXQpO1xuICAgICAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgICAgLy8gICBtc2c6ICdqdW1wIHRoZSBtaWRkbGV3YXJlIGFib3V0ICcgKyBfbXdfbmFtZSArICcsIGJlY2F1c2Ugd2FpdGluZyB0aW1lb3V0IG1heFRpbWVvdXQgPSAnICsgX3RpbWVfb3V0XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIHN0YXRlID0gbnVsbDtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIHJ1bihpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIF90aW1lX291dCk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnZG9uZScpIHtcbiAgICAgICAgLy8g54q25oCB5Li6ZG9uZeihqOekuue7k+adn++8jOS4jeeuoeWQjumdoui/mOacieayoeacieS4remXtOS7tumDvee7k+adn1xuICAgICAgICBpID0gc2l6ZTtcbiAgICAgICAgcnVuKGksIHN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOm7mOiupOeKtuaAge+8jOWPqueuoeaJp+ihjOS4remXtOS7tumYn+WIl1xuICAgICAgICBpKys7XG4gICAgICAgIHJ1bihpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChjb250ZXh0LmNhbGxlZExpc3QgJiYgY29udGV4dC5jYWxsZWRMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7XG4gICAgfVxuICAgIHJldHVybiBydW4oaSk7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbXBvc2U7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9jb21wb3NlLmpzXG4vLyBtb2R1bGUgaWQgPSA4M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3BsdWdpbnNMb2FkZXIuanNcbiAqIOaPkuS7tuWKoOi9veWZqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCdAdXRpbHMvYXNzaWduJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtcyBvcHRzIHtcbiAgICAgKiAgIG1pZGRsZXdhcmU6IFtdLFxuICAgICAqICAgcGx1Z2luczogW10sXG4gICAgICogICBjb25maWc6IHt9XG4gICAgICogfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgICBpZiAob3B0cyAmJiB0eXBlb2Ygb3B0cy5taWRkbGV3YXJlID09PSAnb2JqZWN0JyAmJiBvcHRzLm1pZGRsZXdhcmUubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBvcHRzLm1pZGRsZXdhcmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBbXTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGx1Z2luc19uYW1lID0gW107XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOWIhuWPkeiuoumYheWPmOWMllxuICAgICAqIEBwYXJhbSBvIHtcbiAgICAgKiAgIHB1YnN1Yjogey4uLn0sXG4gICAgICogICBjb250ZXh0OiB7Li4ufVxuICAgICAqIH0sXG4gICAgICogQHBhcmFtIG13IOW9k+WJjeaJp+ihjOeahOS4remXtOS7tlxuICAgICAqL1xuICAgIHB1YnN1YkluZm86IGZ1bmN0aW9uKGN0eCwgbXcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwdWJzdWIgPSBjdHgucHVic3ViO1xuICAgICAgICBpZiAocHVic3ViKSB7XG4gICAgICAgICAgcHVic3ViLnB1Ymxpc2goJ3BsdWdpbnNfY2hhbmdlXycgKyBjdHgucHVic3ViVHlwZSwgbXcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHVsb2coKS53KGUpO1xuICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgIC8vICAgbXNnOiBlXG4gICAgICAgIC8vIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgaWYoIWluZGV4KSBpbmRleCA9IDA7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIG1pZGRsZXdhcmUgPSB0aGlzLm1pZGRsZXdhcmU7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0cyB8fCB7fTtcbiAgICAgIHZhciBwbHVnaW5zID0gb3B0cy5wbHVnaW5zO1xuICAgICAgaWYgKHBsdWdpbnMgJiYgdHlwZW9mIHBsdWdpbnMgPT09ICdvYmplY3QnICYmIHBsdWdpbnMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgcGx1Z2luID0gcGx1Z2luc1tpbmRleF07XG4gICAgICAgIHRoaXMucGx1Z2luc19uYW1lLnB1c2gocGx1Z2luLm5hbWUpO1xuICAgICAgICBtaWRkbGV3YXJlLnB1c2goW2Z1bmN0aW9uKHN0YXRlLCBjYil7XG4gICAgICAgICAgX3NlbGYucHVic3ViSW5mbyh0aGlzLCBwbHVnaW4pO1xuICAgICAgICAgIC8vIOiOt+WPluaPkuS7tuaooeWdl+i3r+W+hOW5tuWIneWni+WMllxuICAgICAgICAgIHZhciBtID0gbmV3IHBsdWdpbi5wYXRoKCk7XG5cbiAgICAgICAgICAvLyDkuLroioLnnIHku6PnoIHph4/vvIzpu5jorqTnmoTliJ3lp4vljJbmlrnms5XlnKjliqDovb3lmajlhoXlgZrlhZzlupXlpITnkIbvvIzljbPmj5Lku7blhoXml6Dnibnmrormg4XlhrXml6DpnIDlrp7njrBpbml05pa55rOVXG4gICAgICAgICAgaWYgKCFtLmluaXQpIHtcbiAgICAgICAgICAgIG0uaW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDlsIbkuIrkuIvmlofms6jlhaXliLDmj5Lku7blhoVcbiAgICAgICAgICBtLmluaXQoe1xuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgICAgICAgY29uZmlnOiBhc3NpZ24ocGx1Z2luLmNvbmZpZyB8fCB7fSwgb3B0cy5jb25maWcpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIG0ucnVuKHN0YXRlLCBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICAvLyDov5nph4zkvb/nlKgx5q+r56eS5bu26L+f5omn6KGM77yM6Ziy5q2i5Lit6Ze05Lu25Li75L2T5YaF55qEY2FsbGJhY2vlhYjmiafooYzvvIzlr7zoh7TmoYbmnrbmi7/kuI3liLDkuK3pl7Tku7ZyZXR1cm7nmoTnrYnlvoXml7bplb/vvIzku47ogIzlr7zoh7Tnm5HmjqflvILluLhcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjYihwbHVnaW4sIG1zZyk7XG4gICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgcGx1Z2luLm5hbWVdKTtcblxuICAgICAgICBpbmRleCsrO1xuICAgICAgICBpZihwbHVnaW5zW2luZGV4XSl7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucnVuKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1pZGRsZXdhcmU7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL3BsdWdpbnNMb2FkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDg0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImZ1bmN0aW9uIGlzVHJpdmVyKCkge1xuICB0cnkge1xuICAgIHZhciBVQSA9IG5hdmlnYXRvciA/IChuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci5zd3VzZXJBZ2VudCkgOiAnJztcbiAgICByZXR1cm4gL1RyaXZlci9nLnRlc3QoVUEpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVHJpdmVyO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9pc1RyaXZlci5qc1xuLy8gbW9kdWxlIGlkID0gODVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvaW5pdC9pbml0TG9hZF9iYXNlLmpzXG4gKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBAYXV0aG9yIGppemhhLnd5aiBAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWN0aW9uID0gcmVxdWlyZSgnLi9hY3Rpb24nKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46ICBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuICAgICAgdmFyIEFQTFVTX1FVRVVFID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRTtcblxuICAgICAgdmFyIGNvbnRleHQgPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gICAgICB2YXIgcXVlID0gY29udGV4dFtBUExVU19RVUVVRV0gfHwgW107XG4gICAgICB2YXIgcnMgPSBhY3Rpb24uZ2V0Rm9ybWF0UXVldWUocXVlLCAnbWV0YVF1ZXVlJyk7XG4gICAgICBjb250ZXh0W0FQTFVTX1FVRVVFXSA9IHJzLnF1ZXVlO1xuICAgICAgYWN0aW9uLnByb2Nlc3NHb2xkbG9nUXVldWUocnMuZm9ybWF0UXVldWUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9tZXRhX3F1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSA4NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG4vKipcbiAqIEBwYXJhbXMge0FycmF5fSBRVUVVRVxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuICogfVxuICovXG52YXIgcHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IGZ1bmN0aW9uIChRVUVVRSwgb3B0cykge1xuICBmdW5jdGlvbiBmKCkge1xuICAgIGlmICghUVVFVUUgfHwgIXV0aWxBcnJheS5pc0FycmF5KFFVRVVFKSB8fCAhUVVFVUUubGVuZ3RoKSByZXR1cm47XG4gICAgLy8g5o6S5bqPXG4gICAgdmFyIHF1ZSA9IGdldEZvcm1hdFF1ZXVlKFFVRVVFKS5xdWV1ZTtcbiAgICB2YXIgdGFzayA9IHt9O1xuICAgIHZhciBkZWxheVRhc2tzID0gW107XG4gICAgd2hpbGUgKHRhc2sgPSBxdWUuc2hpZnQoKSkgeyAvLyDkvp3mrKHmiafooYwgd2luZG93LmFwbHVzX3F1ZXVlIOS4reeahOS7u+WKoVxuICAgICAgcHJvY2Vzc1Rhc2sodGFzaywgb3B0cywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgZGVsYXlUYXNrcy5wdXNoKHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChkZWxheVRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGFzayA9IGRlbGF5VGFza3Muc2hpZnQoKSkge1xuICAgICAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDApO1xuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICBmKCk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KGUpO1xuICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAvLyAgIG1zZzogZVxuICAgIC8vIH0pO1xuICB9XG59O1xuZXhwb3J0cy5wcm9jZXNzR29sZGxvZ1F1ZXVlID0gcHJvY2Vzc0dvbGRsb2dRdWV1ZTtcblxuZnVuY3Rpb24gZ2V0TWV0YUluZm8oKSB7XG4gIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcbiAgcmV0dXJuIG1ldGFfaW5mbztcbn1cblxuZnVuY3Rpb24gZ2V0QXBsdXNIb2xkVHlwZSAoKSB7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgdWFpZCA9IG1ldGFfaW5mby51YWlkICsgJyc7XG4gIGlmICh1YWlkID09PSAnMScgJiYgIW1ldGFfaW5mby5fYW5vbnlfaWQpIHtcbiAgICByZXR1cm4gJ0JMT0NLJztcbiAgfVxuICByZXR1cm4gbWV0YV9pbmZvWydfaG9sZCddIHx8IG1ldGFfaW5mb1snYXBsdXMtd2FpdGluZyddO1xufVxuXG52YXIgQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUgPSBbXTtcbnZhciBBUExVU19IT0xEX0FOT05ZX1FVRVVFID0gW107XG52YXIgQVBMVVNfSE9MRF9RVUVVRSA9IFtdO1xuXG5mdW5jdGlvbiBmaWx0ZXJUYXNrICh0YXNrKSB7XG4gIHZhciBob2xkVHlwZSA9IGdldEFwbHVzSG9sZFR5cGUoKTtcbiAgLy8gY29uc29sZS5sb2coJ2hvbGRUeXBlID09PSAnLCBob2xkVHlwZSk7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgZmxhZyA9IHRydWU7XG5cbiAgLy8gMDogXCJfaG9sZFwiXG4gIC8vIDE6IFwiU1RBUlRcIlxuICB2YXIgYXJncyA9IHRhc2suYXJndW1lbnRzIHx8IFtdO1xuICB2YXIgbWV0YUtleSA9IGFyZ3NbMF07XG4gIHZhciBtZXRhVmFsdWUgPSBhcmdzWzFdO1xuICB2YXIgU1RBUlQgPSAnU1RBUlQnO1xuICBpZiAobWV0YUtleSA9PT0gJ19ob2xkJyAmJiBtZXRhVmFsdWUgPT09IFNUQVJUKSB7XG4gICAgcmV0dXJuIFNUQVJUO1xuICB9XG4gIGlmIChtZXRhS2V5ID09PSAnX2Fub255X2lkJyAmJiBtZXRhVmFsdWUpIHtcbiAgICByZXR1cm4gU1RBUlQ7XG4gIH1cbiAgaWYgKHRhc2sgJiYgL3NlbmRQVnxyZWNvcmR8c2V0UGFnZVNQTXxzZXRNZXRhSW5mb3xhcHBlbmRNZXRhSW5mbyQvLnRlc3QodGFzay5hY3Rpb24pKSB7XG4gICAgc3dpdGNoIChob2xkVHlwZSkge1xuICAgIGNhc2UgJ0JMT0NLJzpcbiAgICAgIGlmICghbWV0YV9pbmZvW2hvbGRUeXBlXSkge1xuICAgICAgICBBUExVU19IT0xEX1FVRVVFLnB1c2godGFzayk7XG4gICAgICAgIGZsYWcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZsYWc7XG59XG5cblxuLy8gdmFyIHByb2Nlc3NlZCA9IGZhbHNlO1xuZnVuY3Rpb24gcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUgKG9wdHMpIHtcbiAgLy8gaWYgKCFwcm9jZXNzZWQpIHtcbiAgLy8gICBwcm9jZXNzZWQgPSB0cnVlO1xuICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1FVRVVFLCBvcHRzKTsgIFxuICAvLyB9XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSBxdWV1ZU5hbWU6IGFwbHVzX3F1ZXVlIHx8IGdvbGRsb2dfcXVldWVcbiAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG4gKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcbiAqIH1cbiAqL1xuZXhwb3J0cy5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUgPSBmdW5jdGlvbiAocXVldWVOYW1lLCBvcHRzKSB7XG4gIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuICBxdWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuU0VUX01FVEFfSU5GTywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9VU0VSX0lEICYmIHZhbHVlKSB7XG4gICAgICAgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9BTk9OWV9JRCAmJiB2YWx1ZSkge1xuICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfQU5PTllfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdfaG9sZCcgJiYgdmFsdWUgPT09ICdTVEFSVCcpIHtcbiAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXRNZXRob2ROYW1lIChrZXksIGlzT3BlbkFwaSkge1xuICBpZiAoaXNPcGVuQXBpICYmIGFwbHVzU3RhdGljLm9wZW5BUElzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAga2V5ID0gJ18nICsga2V5O1xuICB9XG4gIHJldHVybiBrZXk7XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSB0YXNrXG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG4gKiB9XG4gKi9cbnZhciBwcm9jZXNzVGFzayA9IGZ1bmN0aW9uKHRhc2ssIG9wdHMsIGNhbGxiYWNrKSB7XG4gIHZhciBpc09wZW5BcGkgPSAhIW9wdHMuaXNPcGVuQXBpO1xuICB2YXIgYWN0aW9uID0gdGFzayA/IHRhc2suYWN0aW9uIDogJyc7XG4gIHZhciBhcmdzID0gdGFzayA/IHRhc2suYXJndW1lbnRzIDogJyc7XG5cbiAgdmFyIHJlc3VsdCA9IGZpbHRlclRhc2sodGFzayk7XG4gIGlmICghcmVzdWx0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZXh0ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB0cnkgeyAvLyDnoa7kv53mn5DkuKrku7vliqHmiafooYzlpLHotKXkuI3kvJrlvbHlk43lhbblroPku7vliqFcbiAgICBpZiAoYWN0aW9uICYmIGFyZ3MgJiYgdXRpbEFycmF5LmlzQXJyYXkoYXJncykpIHtcbiAgICAgIHZhciBhID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gICAgICB2YXIgb2JqID0gY29udGV4dDtcbiAgICAgIHZhciBfZm4gPSBjb250ZXh0O1xuICAgICAgdmFyIG1ldGhvZE5hbWU7XG4gICAgICBpZiAoYS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgb2JqID0gY29udGV4dFthWzBdXVthWzFdXSB8fCB7fTtcbiAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYVsyXSwgaXNPcGVuQXBpKTtcbiAgICAgICAgX2ZuID0gb2JqW21ldGhvZE5hbWVdID8gb2JqW21ldGhvZE5hbWVdIDogJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAoYS5sZW5ndGgpIHtcbiAgICAgICAgICBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShhLnNoaWZ0KCksIGlzT3BlbkFwaSk7XG4gICAgICAgICAgX2ZuID0gb2JqID0gb2JqW21ldGhvZE5hbWVdO1xuICAgICAgICAgIGlmICghb2JqKSB7IC8vIOmdnuazlSBhY3Rpb25cbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc0Z1bmN0aW9uKF9mbikpIHtcbiAgICAgICAgX2ZuLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0ID09PSAnU1RBUlQnKSB7XG4gICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoZSk7XG4gICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgIC8vICAgbXNnOiBlXG4gICAgLy8gfSk7XG4gIH1cbn07XG5leHBvcnRzLnByb2Nlc3NUYXNrID0gcHJvY2Vzc1Rhc2s7XG5cbnZhciBnZXRGb3JtYXRRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZSwgdHlwZSkge1xuICB2YXIgcXVldWVNYXAgPSB7XG4gICAgc3Vic2NyaWJlTXdDaGFuZ2VRdWV1ZTogW10sXG4gICAgc3Vic2NyaWJlTWV0YVF1ZXVlOiBbXSxcbiAgICBzdWJzY3JpYmVRdWV1ZTogW10sXG4gICAgbWV0YVF1ZXVlOiBbXSxcbiAgICBvdGhlcnNRdWV1ZTogW11cbiAgfTtcblxuICB2YXIgcSA9IFtdO1xuICB2YXIgdGFzayA9IHt9O1xuICB3aGlsZSAodGFzayA9IHF1ZXVlLnNoaWZ0KCkpIHsgLy8g5L6d5qyh5omn6KGMIHdpbmRvdy5hcGx1c19xdWV1ZSDkuK3nmoTku7vliqFcbiAgICB0cnkge1xuICAgICAgdmFyIGFjID0gdGFzay5hY3Rpb247XG4gICAgICB2YXIga2V5ID0gdGFzay5hcmd1bWVudHNbMF07XG4gICAgICBpZiAoL3N1YnNjcmliZS8udGVzdChhYykpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3NldE1ldGFJbmZvJykge1xuICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWIHx8IGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEopIHtcbiAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgvTWV0YUluZm8vLnRlc3QoYWMpKSB7XG4gICAgICAgIHF1ZXVlTWFwLm1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVNYXAub3RoZXJzUXVldWUucHVzaCh0YXNrKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB1bG9nKCkudyhlKTtcbiAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIC8vICAgbXNnOiBlXG4gICAgICAvLyB9KTtcbiAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG4gICAgfVxuICB9XG4gIHZhciBmb3JtYXRRdWV1ZTtcbiAgaWYgKHR5cGUgJiYgcXVldWVNYXBbdHlwZV0pIHtcbiAgICBmb3JtYXRRdWV1ZSA9IHF1ZXVlTWFwW3R5cGVdO1xuICAgIHF1ZXVlTWFwW3R5cGVdID0gW107XG4gIH1cbiAgcSA9IHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUuY29uY2F0KHF1ZXVlTWFwLm1ldGFRdWV1ZSk7XG4gIHEgPSBxLmNvbmNhdChxdWV1ZU1hcC5zdWJzY3JpYmVRdWV1ZSk7XG4gIHEgPSBxLmNvbmNhdChxdWV1ZU1hcC5zdWJzY3JpYmVNZXRhUXVldWUsIHF1ZXVlTWFwLm90aGVyc1F1ZXVlKTtcbiAgcmV0dXJuIHtcbiAgICBxdWV1ZTogcSxcbiAgICBmb3JtYXRRdWV1ZTogZm9ybWF0UXVldWVcbiAgfTtcbn07XG5leHBvcnRzLmdldEZvcm1hdFF1ZXVlID0gZ2V0Rm9ybWF0UXVldWU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hY3Rpb24uanNcbi8vIG1vZHVsZSBpZCA9IDg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuICog5Yid5aeL5YyW5Z+656GA5qih5Z2X77yM5LiN6IO955u05o6l5L2/55So77yM6ZyA6KaB6YCa6L+HaW5pdExvYWRfcGMuanPmiJZpbml0TG9hZF93YXAuanPnrYnlhbfkvZPnmoTlnLrmma/mqKHlnZfosIPnlKhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIEJhc2UgPSByZXF1aXJlKCdAY29yZS9CYXNlJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhY3Rpb24gPSByZXF1aXJlKCcuL2FjdGlvbicpO1xuXG52YXIgUXVldWUgPSBCYXNlLmV4dGVuZCh7XG4gIHB1c2g6IGZ1bmN0aW9uKHRhc2spIHtcbiAgICB0aGlzLmxlbmd0aCsrO1xuICAgIGFjdGlvbi5wcm9jZXNzVGFzayh0YXNrLCB0aGlzLm9wdHMpOyAgXG4gIH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcHJvY2Vzc0FwbHVzUXVldWU6IGZ1bmN0aW9uIChxdWV1ZU5hbWUpIHtcbiAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuICAgICAgYWN0aW9uLnByb2Nlc3NHb2xkbG9nUXVldWUocXVlLCBvcHRzKTtcbiAgICAgIHV0aWxHb2xkbG9nLnNldEdsb2JhbFZhbHVlKHF1ZXVlTmFtZSwgUXVldWUuY3JlYXRlKHtcbiAgICAgICAgb3B0czogb3B0cywgXG4gICAgICAgIHN0YXJ0TGVuZ3RoOiBxdWUubGVuZ3RoLFxuICAgICAgICBsZW5ndGg6IDBcbiAgICAgIH0pKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtcyB7U3RyaW5nfSB0eXBlXG4gICAgICovXG4gICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzX2NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZztcbiAgICAgIHZhciBBUExVU19RVUVVRSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUU7XG5cbiAgICAgIHRoaXMucHJvY2Vzc0FwbHVzUXVldWUoQVBMVVNfUVVFVUUpO1xuXG4gICAgICBpZiAoQVBMVVNfUVVFVUUgPT09ICdhcGx1c19xdWV1ZScpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzQXBsdXNRdWV1ZSgnZ29sZGxvZ19xdWV1ZScpO1xuICAgICAgfVxuICAgICAgYWN0aW9uLnN1YnNjcmliZUFuZFByb2Nlc3NRdWV1ZShBUExVU19RVUVVRSwgdGhpcy5vcHRpb25zLmNvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3F1ZXVlL2FwbHVzX3F1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSA4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOWPi+ebn+S6keadoeS7tuS4i+eahOiHquWKqOS6i+S7tuaPkuS7tiAgICAgXG4gKiBcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICogXG4gKiBBdXRob3I6IFxuICogICAg6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIEZldGNoQ29uZmlnID0gcmVxdWlyZSgnLi9saWJfbWluaXZ0L2ZldGNoQ29uZmlnJyk7XG52YXIgdXRpbEdRID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHUScpO1xudmFyIE1JTklfVlRfQ09ORklHX0ZPUk1BVCA9ICdNaW5pVnRDb25maWdGb3JtYXQnO1xudmFyIHV0aWxWVCA9IHJlcXVpcmUoJy4vbGliX21pbml2dC91dGlsVlQnKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcblxuZnVuY3Rpb24gYXV0b1RyYWNrZXIgKCkge1xuICB2YXIgcmJfY29uZmlnLCBwZHJfY29uZmlnLCBzaGFyZV9jb25maWc7XG4gIC8vIHZhciBwcmVmaXggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVU19RVUVVRSk7XG4gIHZhciBfaGFzVHJhY2tlZCA9IGZhbHNlO1xuICB2YXIgX2N1cnJlbnRQYWdlID0gbnVsbDtcbiAgdmFyIGNvdW50ID0ge1xuICAgICdvblB1bGxEb3duUmVmcmVzaCc6IDAsXG4gICAgJ29uU2hhcmVUaW1lbGluZSc6IDAsXG4gICAgJ29uUmVhY2hCb3R0b20nOiAwLFxuICAgICdvblNoYXJlQXBwTWVzc2FnZSc6IDAsXG4gICAgJ29uQ2xpY2snOiAwXG4gIH07XG5cbiAgZnVuY3Rpb24gZXZlbnRIYW5kbGUgKCkge1xuICAgIHZhciBldmVudE5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6ICcnO1xuICAgIHZhciBwYWdlSW5zdGFuY2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgdmFyIGN1cnJlbnRQYWdlID0gcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcbiAgICAvLyB2YXIgcDtcbiAgICBcbiAgICBzd2l0Y2ggKGV2ZW50TmFtZSkge1xuICAgIGNhc2UgJ29uUHVsbERvd25SZWZyZXNoJzpcbiAgICAgIGNvdW50Lm9uUHVsbERvd25SZWZyZXNoICs9IDE7XG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgYXJndW1lbnRzOiBbcGRyX2NvbmZpZy5sb2drZXkgfHwgJyQkX3B1bGxfZG93bl9yZWZyZXNoJywgJ0NMSycsIHtcbiAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuICAgICAgICAgIGNvdW50OiBjb3VudC5vblB1bGxEb3duUmVmcmVzaFxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvblJlYWNoQm90dG9tJzpcbiAgICAgIGNvdW50Lm9uUmVhY2hCb3R0b20gKz0gMTtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuICAgICAgICBhcmd1bWVudHM6IFtyYl9jb25maWcubG9na2V5IHx8ICckJF9yZWFjaF9ib3R0b20nLCAnQ0xLJywge1xuICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG4gICAgICAgICAgcGFnZW5hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgY3VycmVudFBhZ2UsXG4gICAgICAgICAgY291bnQ6IGNvdW50Lm9uUmVhY2hCb3R0b21cbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnb25TaGFyZUFwcE1lc3NhZ2UnOlxuICAgICAgY291bnQub25TaGFyZUFwcE1lc3NhZ2UgKz0gMTtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuICAgICAgICBhcmd1bWVudHM6IFtzaGFyZV9jb25maWcubG9na2V5IHx8ICckJF9zaGFyZScsICdDTEsnLCB7XG4gICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcbiAgICAgICAgICBjb3VudDogY291bnQub25TaGFyZUFwcE1lc3NhZ2UsXG4gICAgICAgICAgc2hhcmVfdHlwZTogMVxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvblNoYXJlVGltZWxpbmUnOiBcbiAgICAgIGNvdW50Lm9uU2hhcmVUaW1lbGluZSArPSAxO1xuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG4gICAgICAgIGFyZ3VtZW50czogW3NoYXJlX2NvbmZpZy5sb2drZXkgfHwgJyQkX3NoYXJlJywgJ0NMSycsIHtcbiAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuICAgICAgICAgIGNvdW50OiBjb3VudC5vblNoYXJlVGltZWxpbmUsXG4gICAgICAgICAgc2hhcmVfdHlwZTogMFxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvblBhZ2VTaG93JzpcbiAgICAgIGlmIChwYWdlSW5zdGFuY2Uucm91dGUgJiYgIV9oYXNUcmFja2VkKSB7XG4gICAgICAgIF9jdXJyZW50UGFnZSA9IHtcbiAgICAgICAgICB0czogRGF0ZS5ub3coKSxcbiAgICAgICAgICBwYXRoOiBwYWdlSW5zdGFuY2Uucm91dGUsXG4gICAgICAgICAgcGFnZV9uYW1lOiBwYWdlSW5zdGFuY2Uucm91dGUsXG4gICAgICAgIH07XG4gICAgICAgIF9oYXNUcmFja2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ29uUGFnZUhpZGUnOiAgXG4gICAgICBpZiAoX2hhc1RyYWNrZWQpIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIF9jdXJyZW50UGFnZS50cztcbiAgICAgICAgLy8g5Yqg6L295pe25py655qE6Zeu6aKY77yM5pS+5Zyo5q2k5aSE5Y+WcmVmZXJyZXLnm7jmr5Tkuo5taW5pYXBwX2RhdGHlh4bnoa5cbiAgICAgICAgdmFyIHJlZmVycmVyID0gbWluaS5nZXRSZWZlcnJlclBhZ2UoKS5yb3V0ZSB8fCBtaW5pLmdldFJlZmVycmVyUGFnZSgpLmlzIHx8ICctJztcbiAgICAgICAgdmFyIGV4dHJhUGFyYW1zID0gKFBhZ2VNYW5hZ2VyLmdldFBhZ2VOYW1lKCkgfHwge30pLmV4dHJhUGFyYW1zO1xuICAgICAgICB2YXIgcHZhcmdzID0gT2JqZWN0LmFzc2lnbih7fSwgZXh0cmFQYXJhbXMsIHtcbiAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgcGF0aDogX2N1cnJlbnRQYWdlLnBhdGgsXG4gICAgICAgICAgcGFnZV9uYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IF9jdXJyZW50UGFnZS5wYWdlX25hbWUsXG4gICAgICAgICAgcGFnZV9zdGFydDogX2N1cnJlbnRQYWdlLnRzLFxuICAgICAgICAgIGlzTWluaTogdHJ1ZSxcbiAgICAgICAgICBfcGFnZV9hdXRvX2lkOiBhcGx1c1N0YXRpYy5QQUdFX0VORCxcbiAgICAgICAgICBfcGFnZV9hdXRvX3B2OiB0cnVlLFxuICAgICAgICAgIHJlZmVycmVyOiByZWZlcnJlclxuICAgICAgICB9KTtcbiAgICAgICAgYXBsdXMuc2VuZFBWKHsgaXNfYXV0bzogdHJ1ZSB9LCBwdmFyZ3MpO1xuICAgICAgICBfY3VycmVudFBhZ2UgPSBudWxsO1xuICAgICAgICBfaGFzVHJhY2tlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBnZXRDb25maWcgKCkge1xuICAgIHJiX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdyYl9jb25maWcnKTtcbiAgICBwZHJfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3Bkcl9jb25maWcnKTtcbiAgICBzaGFyZV9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnc2hhcmVfY29uZmlnJyk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaFZlcmlmeUNvbmZpZyhjb2RlLCBhcHBJbmZvSWQpIHtcbiAgICBpZiAoIWNvZGUgfHwgIWFwcEluZm9JZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7IFxuICAgICAgdmFyIGFwaV9ob3N0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWFwaS1ob3N0Jyk7XG4gICAgICB2YXIgcmVnID0gL1tbYS16fFxcLXxcXF98MC05XFwuXStbYS16fFxcLXxcXF98MC05XSg6XFxkKik/LztcbiAgICAgIHZhciB2ZXJpZnlfaG9zdCA9IGFwaV9ob3N0Lm1hdGNoKHJlZyk7XG4gICAgICBcbiAgICAgIGlmICh2ZXJpZnlfaG9zdCAmJiB2ZXJpZnlfaG9zdFswXSkge1xuICAgICAgICB2YXIgcHJvdG9jYWwgPSBhcGx1c1N0YXRpYy5IVFRQUztcbiAgICAgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh2ZXJpZnlfaG9zdFswXSkpIHtcbiAgICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZlcmlmeVVybCA9IHByb3RvY2FsICsgJy8vJyArIGFwaV9ob3N0KyAnL3Z0L2xvYWRUcmFuc2ZlckNvbmZpZz9jb2RlPScgKyBjb2RlICsgJyZhcHBJbmZvSWQ9JyArIGFwcEluZm9JZDtcbiAgICAgICAgbWluaS5yZXF1ZXN0KHZlcmlmeVVybCwge30sIGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgY2ZnRGF0YSA9IChyZXNwLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEuY29uZmlnKSB8fCAnJztcbiAgICAgICAgICAgIHZhciBkZWJ1Z0lkID0gKHJlc3AuZGF0YSAmJiByZXNwLmRhdGEuZGF0YSAmJiByZXNwLmRhdGEuZGF0YS5kZWJ1Z0lkKSB8fCAnJztcbiAgICAgICAgICAgIGlmKGRlYnVnSWQpe1xuICAgICAgICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnLHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0lkOmRlYnVnSWRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2JlZ2luTG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gX2JlZ2luTG9hZDtcbiAgICAgICAgICAgIGlmIChjZmdEYXRhKSB7XG4gICAgICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSBKU09OLnBhcnNlKGNmZ0RhdGEpIHx8IHt9O1xuICAgICAgICAgICAgICB1dGlsVlQudnQyYXV0b0V2ZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdWxvZygpLncoJ+aLieWPluWunuaXtuWPr+inhuWMluWfi+eCuemqjOivgeWksei0pSwg6ZSZ6K+v5L+h5oGv77yaJyArIGUpO1xuICAgICAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgICAgLy8gICBsZXZlbDonZXJyb3InLFxuICAgICAgICAgICAgLy8gICBtc2c6J+aLieWPluWunuaXtuWPr+inhuWMluWfi+eCuemqjOivgeWksei0pSwg6ZSZ6K+v5L+h5oGv77yaJyArIGVcbiAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIFxuICAgIH1cbiAgfVxuXG4gIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICBnZXRDb25maWcoKTtcbiAgICAgIH1cbiAgICB9XVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvbkxvYWQnLCBmdW5jdGlvbihvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGNvZGUgPSBQYWdlTWFuYWdlci5nZXRWVFJlYWx0aW1lQ29kZSgpO1xuICAgICAgICBpZiAoY29kZSkge1xuICAgICAgICAgIHZhciBhcHBJbmZvSWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwSW5mb0lkJyk7XG4gICAgICAgICAgZmV0Y2hWZXJpZnlDb25maWcoY29kZSwgYXBwSW5mb0lkKTtcbiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgXG4gICAgICAgICAgISFhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpICYmIHV0aWxWVC52dDJhdXRvRXZlbnQoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHVsb2coKS53KCfmi4nlj5blrp7ml7blj6/op4bljJbln4vngrnpqozor4Hkv6Hmga/lpLHotKXvvIwg6ZSZ6K+v5Y6f5Zug77yaJyArIGUpO1xuICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgIC8vICAgbGV2ZWw6ICdlcnJvcicsXG4gICAgICAgIC8vICAgbXNnOiAn5ouJ5Y+W5a6e5pe25Y+v6KeG5YyW5Z+L54K56aqM6K+B5L+h5oGv5aSx6LSl77yMIOmUmeivr+WOn+WboO+8micgKyBlXG4gICAgICAgIC8vIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25TaG93JywgZnVuY3Rpb24gKG9wdCkge1xuICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICB2YXIgaXNBdXRvID0gY3R4LmFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy13YWl0aW5nJykgIT09ICdNQU4nO1xuICAgICAgaXNBdXRvICYmIGV2ZW50SGFuZGxlKCdvblBhZ2VTaG93Jyk7XG4gICAgfVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvbkhpZGUnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIHZhciBpc0F1dG8gPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSAhPT0gJ01BTic7XG4gICAgICBpc0F1dG8gJiYgZXZlbnRIYW5kbGUoJ29uUGFnZUhpZGUnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uUHVsbERvd25SZWZyZXNoJywgZnVuY3Rpb24gKG9wdCkge1xuICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICBldmVudEhhbmRsZSgnb25QdWxsRG93blJlZnJlc2gnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uUmVhY2hCb3R0b20nLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIGV2ZW50SGFuZGxlKCdvblJlYWNoQm90dG9tJyk7XG4gICAgfVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblNoYXJlQXBwTWVzc2FnZScsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgZXZlbnRIYW5kbGUoJ29uU2hhcmVBcHBNZXNzYWdlJyk7XG4gICAgfVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblNoYXJlVGltZWxpbmUnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIGV2ZW50SGFuZGxlKCdvblNoYXJlVGltZWxpbmUnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmICghIWFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJykpIHtcbiAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBbTUlOSV9WVF9DT05GSUdfRk9STUFULCBmdW5jdGlvbihvcHRpb25zKXtcbiAgICAgIHZhciBwYWdlQ29uZmlnID0gb3B0aW9ucy5wYWdlQ29uZmlnO1xuICAgICAgaWYgKHBhZ2VDb25maWcgJiYgcGFnZUNvbmZpZy5lbmFibGVkKSB7XG4gICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSBwYWdlQ29uZmlnO1xuICAgICAgfVxuICAgIH1dKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIGF1dG9UcmFja2VyKCk7XG4gICAgICBpZiAoIWFwbHVzLl9hcGx1c19hbGVhZHlfbG9hZF9taW5pdnQpe1xuICAgICAgICBhcGx1cy5fYXBsdXNfYWxlYWR5X2xvYWRfbWluaXZ0ID0gMTtcbiAgICAgICAgdmFyIGZjID0gRmV0Y2hDb25maWcuY3JlYXRlKCk7XG4gICAgICAgIGZjLnJ1bigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSA4OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOWPr+inhuWMluWfi+eCuemFjee9ruS/oeaBr+ivt+axgiBcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBBYXJvbnzpkrDmmK0gPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEJhc2UgPSByZXF1aXJlKCdAY29yZS9CYXNlJyk7XG52YXIgdXRpbEdRID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHUScpO1xudmFyIHV0aWxDYXRjaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQ2F0Y2gnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIG1pbml2dFN0b3JlID0gcmVxdWlyZSgnQHV0aWxzL21pbml2dFN0b3JlJyk7XG4vLyB2YXIgdXRpbFVybCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsVXJsJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG52YXIgTUlOSV9WVF9DT05GSUdfQkFDSyA9ICdNaW5pVnRDb25maWdCYWNrJztcbnZhciBNSU5JX1ZUX0NPTkZJR19GT1JNQVQgPSAnTWluaVZ0Q29uZmlnRm9ybWF0JztcblxudmFyIEdPTERMT0dfUFVCTElTSCA9IGFwbHVzU3RhdGljLlBVQkxJU0g7XG4vLyBwcm9kOiBodHRwczovL2FsaWR0LmFsaWNkbi5jb20vYWxpbG9nL3Z0ZGFpbHkvJHtjb21wb25lbnRJRH0uanNvblxuLy8gaHR0cHM6Ly9kLmFsaWNkbi5jb20vYWxpbG9nL3Z0L2ExejFkMV8xMjI3OTkxNC5qc29uXG4vLyB2YXIgSE9TVCA9ICcvL2cuYWxpY2RuLmNvbS9hbGlsb2cnO1xuLy8gdmFyIEhPU1QgPSAnLy9kLmFsaWNkbi5jb20vYWxpbG9nJztcblxuLy8gZnVuY3Rpb24gaXNEYWlseSAoKSB7XG4vLyAgIHZhciBycyA9IGZhbHNlO1xuLy8gICBpZiAoYXBsdXMgJiYgYXBsdXMuYXBsdXNEZWJ1Zykge1xuLy8gICAgIHJldHVybiB0cnVlO1xuLy8gICB9XG4vLyAgIHJldHVybiBycztcbi8vIH1cblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh1dGlsRGFzaC5hc3NpZ24obWluaXZ0U3RvcmUsIHtcblxuICBwYXRobmFtZTogJycsXG5cbiAgcGFnZUNvbmZpZzoge30sXG5cbiAgb3JpZ2luU3BtOiB7XG4gICAgc3BtQTogJycsXG4gICAgc3BtQjogJydcbiAgfSxcblxuICB1cGRhdGVDZmdMczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICBfc2VsZi5mZXRjaEZyb21DZG4oKTtcbiAgICB9LDEwMDApO1xuICB9LFxuXG4gIGZldGNoRnJvbUNkbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIHBhdGggPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpO1xuICAgIGlmICghcGF0aCkgcmV0dXJuO1xuICAgIHZhciBfYmVnaW5Mb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG4gICAgYXBsdXMucmVxdWVzdFZUQ29uZmlnKHBhdGgsIGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgIHZhciBjZmdEYXRhID0gcmVzcC5kYXRhO1xuICAgICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gX2JlZ2luTG9hZDtcbiAgICAgIGlmIChjZmdEYXRhKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHR5cGVvZiBjZmdEYXRhID09PSAnb2JqZWN0JyA/IGNmZ0RhdGEgOiBKU09OLnBhcnNlKGNmZ0RhdGEpO1xuICAgICAgICAgIGlmIChhcGx1cy5fYXBsdXNfdnRfY2ZnLnBvaW50cykge1xuICAgICAgICAgICAgZWFjaChhcGx1cy5fYXBsdXNfdnRfY2ZnLnBvaW50cywgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgdi5zZWxlY3RvciA9IGRlY29kZVVSSUNvbXBvbmVudCh2LnNlbGVjdG9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfc2VsZi5zZXRDb25maWdJbnRvTHMoYXBsdXMuX2FwbHVzX3Z0X2NmZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0ge1xuICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19QVUJMSVNILCBbTUlOSV9WVF9DT05GSUdfQkFDSywge3BhZ2VDb25maWc6YXBsdXMuX2FwbHVzX3Z0X2NmZywgZW5hYmxlOiAwfV0pO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKGFwbHVzLl9hcGx1c192dF9jZmcgJiYgYXBsdXMuX2FwbHVzX3Z0X2NmZy5lbmFibGVkKSB7XG4gICAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzphcGx1cy5fYXBsdXNfdnRfY2ZnLCBlbmFibGU6IDB9XSk7ICBcbiAgICAgIH1cbiAgICAgIHV0aWxDYXRjaC5jYXRjaEV4Y2VwdGlvbignZ2V0VHJhY2tlckNmZycsIGVycm9yLCB7XG4gICAgICAgIG1zZzogcGF0aFxuICAgICAgfSk7XG4gICAgfSwge1xuICAgICAgdGltZW91dDogNTAwMFxuICAgIH0pO1xuICB9LFxuXG4gIGdldE1pbmlWdERhdGE6IGZ1bmN0aW9uKGNkbnBhdGgsIHByZVVybCwgZnJvbUNETil7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IDA7XG4gICAgaWYgKGNkbnBhdGgpIHtcbiAgICAgIHZhciB2dENvbmZpZyA9IHRoaXMuZmV0Y2hGcm9tTFMoY2RucGF0aCk7XG4gICAgICBpZih0eXBlb2YgdnRDb25maWcgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgIHZ0Q29uZmlnID0gSlNPTi5wYXJzZSh2dENvbmZpZyk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgIHZ0Q29uZmlnID0ge307XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHZ0Q29uZmlnICYmIHZ0Q29uZmlnLmVuYWJsZWQpIHtcbiAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHZ0Q29uZmlnO1xuICAgICAgfVxuICAgICAgaWYoICFmcm9tQ0ROKSB7XG4gICAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzp2dENvbmZpZywgZW5hYmxlOiAwfV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mZXRjaEZyb21DZG4oY2RucGF0aCwgcHJlVXJsKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLy8gaHR0cHM6Ly9kLmFsaWNkbi5jb20vYWxpbG9nL3Z0X2RhaWx5L2ExejFkMV8xMjI3OTkxNC5qc29uXG4gIHN5bmNNaW5pVnREYXRhOiBmdW5jdGlvbigpe1xuICAgIC8vc3Vic2NyaWJlICB3cy5yZWFkeVxuICAgIHZhciBjZG5wYXRoID0gdGhpcy5nZXRWdENvbmZpZ1BhdGgoKTtcbiAgICB0aGlzLmdldE1pbmlWdERhdGEoY2RucGF0aCwgJycsIHRydWUpO1xuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uKCl7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICBcbiAgICB2YXIgR09MRExPR19TVUJTQ1JJQkUgPSBhcGx1c1N0YXRpYy5TVUJTQ1JJQkU7XG4gICAgLy90aGlzIGV2ZW50IGZyb20gTFMgb3IgZnJvbSBXUyB0byBnZXQgY29uZmlnXG4gICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfU1VCU0NSSUJFLCBbTUlOSV9WVF9DT05GSUdfQkFDSywgZnVuY3Rpb24gKG9yaURhdGFzKSB7XG4gICAgICBpZighb3JpRGF0YXMuZW5hYmxlKSB7XG4gICAgICAgIF9zZWxmLnBhZ2VDb25maWcgPSBvcmlEYXRhcy5wYWdlQ29uZmlnO1xuICAgICAgfVxuICAgICAgLy90aGlzIGV2ZW50IHRvIHVzZTtcbiAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19GT1JNQVQsIHtcbiAgICAgICAgcGFnZUNvbmZpZzogX3NlbGYucGFnZUNvbmZpZyxcbiAgICAgICAgb3JpZ2luU3BtOiBfc2VsZi5vcmlnaW5TcG1cbiAgICAgIH1dKTtcbiAgICAgICFvcmlEYXRhcy5lbmFibGUgJiYgX3NlbGYuc2V0Q29uZmlnSW50b0xzKF9zZWxmLnBhZ2VDb25maWcpO1xuICAgIH1dKTtcbiAgICBfc2VsZi5zeW5jTWluaVZ0RGF0YSgpO1xuICB9LFxuXG4gIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaW5pdCgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59KSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbGliX21pbml2dC9mZXRjaENvbmZpZy5qc1xuLy8gbW9kdWxlIGlkID0gOTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanNcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdRID0gcmVxdWlyZSgnLi91dGlsR1EnKTtcblxuZXhwb3J0cy5jYXRjaEV4Y2VwdGlvbiA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgZXJyb3IpIHtcbiAgdmFyIG1lc3NhZ2UgPSBmaWxlbmFtZTtcbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IubWVzc2FnZSkge1xuICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJ18nICsgZXJyb3IubWVzc2FnZTtcbiAgfVxuICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoJ2FwbHVzLl9hcGx1c19jcGx1Z2luX20uZG9fdHJhY2tlcl9qc2Vycm9yJywgW3tcbiAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgIGVycm9yOiBKU09OLnN0cmluZ2lmeShlcnJvciksXG4gICAgZmlsZW5hbWU6IGZpbGVuYW1lXG4gIH1dKTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbENhdGNoLmpzXG4vLyBtb2R1bGUgaWQgPSA5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiogZGVzY3JpcHRpb25cbipcbiogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuKlxuKiBBdXRob3JzOlxuKiAgIEFhcm9uIHwg6ZKw5pitIDxjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20+XG4qL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIHV0aWwgPSByZXF1aXJlKCcuLi91dGlscy91dGlsJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbHNNaW5pdnRDb25maWdLZXk6ICdBUExVU19NSU5JX0NPTkZJRycsXG5cbiAgLyoqXG4gICAqIOWFrOWFseaooeadv+WcuuaZr++8jOWmguaenHR1cm5vbj09PScxJyDmi4nlj5Z2YWx1ZeWGheeahOWGheWuuVxuICAgKiBtZXRhSW5mbzoge1xuICAgKiAgJ2FwbHVzLXRyYWNrLWNvbmZpZy1pZCc6IHtcbiAgICogICAgJ3ZhbHVlJzogJ3BhQ3dabEcyV3Y3bGxoaG0nLFxuICAgKiAgICAndHVybm9uJzogJzAnIG9yICcxJyAgIFxuICAgKiAgfVxuICAgKiB9XG4gICAqL1xuICBnZXRNaW5pVnRUcGxDZG5QYXRoOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgYXBsdXNUcmFja0NvbmZpZ0lkSW5mbyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy10cmFjay1jb25maWctaWQnKTtcbiAgICB2YXIgdHVybm9uID0gYXBsdXNUcmFja0NvbmZpZ0lkSW5mbyAmJiBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvLnR1cm5vbjtcbiAgICB2YXIgdmFsdWUgPSBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvICYmIGFwbHVzVHJhY2tDb25maWdJZEluZm8udmFsdWU7XG4gICAgaWYgKHR1cm5vbiA9PT0gJzEnICYmIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfSxcblxuICBnZXRWdENvbmZpZ1BhdGg6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ZW1wbGF0ZVZhbCA9IHRoaXMuZ2V0TWluaVZ0VHBsQ2RuUGF0aCgpO1xuICAgIHZhciBzcG1BQiA9IFtdO1xuICAgIHZhciBzcG1JZDtcbiAgICB2YXIgYXBwa2V5ID0gdXRpbC5nZXRBcHBLZXkoKTtcbiAgICBpZiAoYXBwa2V5KSB7XG4gICAgICBzcG1JZCA9IGFwcGtleTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHNwbUlkKSB7XG4gICAgICBzcG1BQiA9IHNwbUlkLnNwbGl0KCcuJyk7XG4gICAgfSBcbiAgICAvLyByZW1vdmUgZWxzZSBsb2dpYyBpbnNpZGUgd2VidnRTdG9yZSwgYmVjYXVzZSBtaW5pX2Nsb3VkIGRvbnQgc3VwcG9ydCBzcG1cbiAgICBpZiAoc3BtQUIubGVuZ3RoID09PSAyKSB7XG4gICAgICB0aGlzLm9yaWdpblNwbSA9IHtcbiAgICAgICAgc3BtQTogc3BtQUJbMF0sXG4gICAgICAgIHNwbUI6IHNwbUFCWzFdXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoc3BtQUIubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLm9yaWdpblNwbS5zcG1BID0gc3BtQUJbMF07XG4gICAgfVxuXG4gICAgaWYgKHRlbXBsYXRlVmFsKSB7XG4gICAgICByZXR1cm4gdGVtcGxhdGVWYWw7XG4gICAgfVxuICAgIGlmIChzcG1BQi5sZW5ndGggPT09IDIpIHtcbiAgICAgIHJldHVybiBzcG1BQi5qb2luKCdfJyk7XG4gICAgfSBlbHNlIGlmIChzcG1BQi5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiBzcG1BQlswXTtcbiAgICB9XG4gIH0sXG5cbiAgZmV0Y2hGcm9tTFM6IGZ1bmN0aW9uIChjZG5wYXRoKSB7XG4gICAgaWYgKCF0aGlzLmNkbnBhdGgpIHtcbiAgICAgIHRoaXMuY2RucGF0aCA9IGNkbnBhdGggfHwgdGhpcy5nZXRNaW5pVnRUcGxDZG5QYXRoKCk7XG4gICAgfVxuICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGN0eC5nZXRTdG9yYWdlU3luYyh0aGlzLmxzTWluaXZ0Q29uZmlnS2V5ICsgJy0nICsgY2RucGF0aCkpIHx8IHt9O1xuICB9LFxuXG4gIHNldENvbmZpZ0ludG9MczogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgaWYgKCF0aGlzLmNkbnBhdGgpIHtcbiAgICAgIHRoaXMuY2RucGF0aCA9IHRoaXMuZ2V0VnRDb25maWdQYXRoKCk7XG4gICAgfVxuICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICBjdHguc2V0U3RvcmFnZVN5bmModGhpcy5sc01pbml2dENvbmZpZ0tleSArICctJyArIHRoaXMuY2RucGF0aCwgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNvbmZpZykpKTtcbiAgICAvLyB1dGlsU3RvcmUuc2V0KHRoaXMubHNNaW5pdnRDb25maWdLZXkgKyAnLScgKyB0aGlzLmNkbnBhdGgsIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjb25maWcpKSk7XG4gIH1cblxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9taW5pdnRTdG9yZS5qc1xuLy8gbW9kdWxlIGlkID0gOTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHV0aWxWVC5qc1xuICog5Y+v6KeG5YyW6YWN572uIOino+aekOmFjee9ruS/oeaBr+S4uuiHquWKqOeCueWHu+OAgeiHquWKqOabneWFieOAgeiHquWKqHB25YWs5YWx5Ye95pWwXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1dGlsQXJyYXkgID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcblxuZXhwb3J0cy5nZXRDdXJyZW50UGFnZVZUQ2ZnID0gZnVuY3Rpb24oKSB7XG4gIHZhciB2dENmZyA9IGFwbHVzLl9hcGx1c192dF9jZmc7XG4gIGlmICghdnRDZmcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHBhdGggPSBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHZ0Q2ZnLnBhZ2VzLmxlbmd0aDsgaSsrICl7XG4gICAgdmFyIHBhZ2VDb25maWcgPSB2dENmZy5wYWdlc1tpXTtcbiAgICBpZiAocGFnZUNvbmZpZy5tYXRjaFVybCA9PT0gcGF0aCkge1xuICAgICAgcmV0dXJuIHBhZ2VDb25maWc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuO1xufTtcblxuZnVuY3Rpb24gbWVyZ2VBdXRvQ2ZncyAoY2ZnMSxjZmcyKXtcbiAgY2ZnMSA9IHV0aWxBcnJheS5pc0FycmF5KGNmZzEpP2NmZzEgOiBbXTtcbiAgY2ZnMiA9IHV0aWxBcnJheS5pc0FycmF5KGNmZzIpP2NmZzIgOiBbXTtcbiAgdmFyIHRvdGFsQXV0b0NmZ3MgPSBbXS5jb25jYXQoY2ZnMixjZmcxKTtcbiAgZnVuY3Rpb24gZ2V0SW5kZXggKGl0ZW0sYXJyKXtcbiAgICB2YXIgaW5kZXggPSAtMTtcbiAgICBmb3IodmFyIGkgPSAwOyBpPGFyci5sZW5ndGg7IGkrKyl7XG4gICAgICB2YXIgY3VycmVudCA9IGFycltpXTtcbiAgICAgIGlmKGN1cnJlbnQuY3NzU2VsZWN0b3I9PT1pdGVtLmNzc1NlbGVjdG9yJiZjdXJyZW50LmxvZ2tleT09PWl0ZW0ubG9na2V5KXtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG4gIHZhciBmaW5hbEF1dG9DZmdzID0gdG90YWxBdXRvQ2Zncy5maWx0ZXIoZnVuY3Rpb24oaXRlbSxpbmRleCxhcnJheSl7XG4gICAgcmV0dXJuIGdldEluZGV4KGl0ZW0sYXJyYXkpID09PSBpbmRleDtcbiAgfSk7XG4gIHJldHVybiBmaW5hbEF1dG9DZmdzO1xufVxuZnVuY3Rpb24gcmVtb3ZlQXV0b0NmZ3NGcm9tVnQoY29uZmlncyl7XG4gIGlmKCB1dGlsQXJyYXkuaXNBcnJheShjb25maWdzKSl7XG4gICAgcmV0dXJuIGNvbmZpZ3MuZmlsdGVyKGZ1bmN0aW9uKGNvbmZpZyl7XG4gICAgICByZXR1cm4gY29uZmlnLl92dCA9PT0gdm9pZCAwO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBbXTtcbn1cbmZ1bmN0aW9uIGZvcm1hdFNlbGVjdG9yKHNlbGVjdG9yKXtcbiAgaWYoL15bLiNdLy50ZXN0KHNlbGVjdG9yKSl7XG4gICAgcmV0dXJuIHNlbGVjdG9yO1xuICB9ZWxzZXtcbiAgICByZXR1cm4gc2VsZWN0b3IgPyAnLicgKyBzZWxlY3RvciA6ICcnO1xuICB9XG59XG5leHBvcnRzLnZ0MmF1dG9FdmVudCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdnRfY2ZnID0gYXBsdXMuX2FwbHVzX3Z0X2NmZyB8fCBhcGx1cy5fYXBsdXNfdHJhY2tpbmdfY2ZnO1xuICBpZiAoIXZ0X2NmZykgcmV0dXJuO1xuICB2YXIgcGFnZUluc3RhbmNlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICB2YXIgY3VycmVudFBhZ2UgPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuICB2YXIgYXV0b19leHBfYXJyID0gW10sIGF1dG9fY2xrX2FyciA9IFtdO1xuICBlYWNoKHZ0X2NmZy5wYWdlcywgZnVuY3Rpb24ocGMpIHtcbiAgICBhcGx1cy5zZXRQYWdlTmFtZSh7IHBhZ2VOYW1lOiBwYy5zcG1CLCBleHRyYVBhcmFtczogcGMuZXh0cmFQYXJhbXMgfSwgcGMubWF0Y2hVcmwpO1xuICAgIGlmIChwYy5tYXRjaFVybCA9PT0gY3VycmVudFBhZ2UpIHtcbiAgICAgIGVhY2godnRfY2ZnLnBvaW50cywgZnVuY3Rpb24ocCl7XG4gICAgICAgIGlmIChwYy5zcG1CID09PSBwLnNwbUIpIHtcbiAgICAgICAgICBpZiAocC50cmFja2VyVHlwZSA9PT0gXCJleHBvc3VyZVwiKSB7IFxuICAgICAgICAgICAgYXV0b19leHBfYXJyLnB1c2goe1xuICAgICAgICAgICAgICAnY3NzU2VsZWN0b3InOiBmb3JtYXRTZWxlY3RvcihwLnNlbGVjdG9yKSxcbiAgICAgICAgICAgICAgJ3Bvc2l0aW9uU2VsZWN0b3InOiBwLnBvc2l0aW9uU2VsZWN0b3IsXG4gICAgICAgICAgICAgICdsb2drZXknOiBwLmxvZ2tleSxcbiAgICAgICAgICAgICAgJ3Byb3BzJzogcC5wcm9wcyB8fCBbXSxcbiAgICAgICAgICAgICAgJ3NwbUInOiBwLnNwbUIsXG4gICAgICAgICAgICAgICdzcG1DJzogcC5zcG1DLFxuICAgICAgICAgICAgICAnc3BtRCc6IHAuc3BtRCxcbiAgICAgICAgICAgICAgJ2N1c3RvbUFyZ3MnOiBwLmN1c3RvbUFyZ3MsXG4gICAgICAgICAgICAgICdfdnQnOiBwYy50ZW1wbGF0ZSB8fCBwYy5zdGRJZCA/IDIgOiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXV0b19jbGtfYXJyLnB1c2goe1xuICAgICAgICAgICAgICAnY3NzU2VsZWN0b3InOiBmb3JtYXRTZWxlY3RvcihwLnNlbGVjdG9yKSxcbiAgICAgICAgICAgICAgJ2xvZ2tleSc6IHAubG9na2V5LFxuICAgICAgICAgICAgICAncHJvcHMnOiBwLnByb3BzIHx8IFtdLCBcbiAgICAgICAgICAgICAgJ3NwbUInOiBwLnNwbUIsXG4gICAgICAgICAgICAgICdzcG1DJzogcC5zcG1DLFxuICAgICAgICAgICAgICAnc3BtRCc6IHAuc3BtRCxcbiAgICAgICAgICAgICAgJ2N1c3RvbUFyZ3MnOiBwLmN1c3RvbUFyZ3MsXG4gICAgICAgICAgICAgICdfdnQnOiBwYy50ZW1wbGF0ZSB8fCBwYy5zdGRJZCA/IDIgOiAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAodnRfY2ZnLmNvbW1vbl9leGRhdGEgJiYgdHlwZW9mIHZ0X2NmZy5jb21tb25fZXhkYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJywgdnRfY2ZnLmNvbW1vbl9leGRhdGEpO1xuICAgICAgfVxuXG4gICAgICBpZiAodnRfY2ZnLmNvbW1vbl9wdmRhdGEgJiYgdHlwZW9mIHZ0X2NmZy5jb21tb25fcHZkYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtY3B2ZGF0YScsIHZ0X2NmZy5jb21tb25fcHZkYXRhKTtcbiAgICAgIH1cbiAgICB9ICAgICAgXG4gIH0pO1xuICB2YXIgb2xkX2F1dG9fZXhwX2FyciA9IHJlbW92ZUF1dG9DZmdzRnJvbVZ0KGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpKTtcbiAgYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tZXhwJywgbWVyZ2VBdXRvQ2ZncyhvbGRfYXV0b19leHBfYXJyLGF1dG9fZXhwX2FycikpO1xuICB2YXIgb2xkX2F1dG9fY2xrX2FyciA9IHJlbW92ZUF1dG9DZmdzRnJvbVZ0KGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpKTtcbiAgYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJywgbWVyZ2VBdXRvQ2ZncyhvbGRfYXV0b19jbGtfYXJyLGF1dG9fY2xrX2FycikpO1xufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2xpYl9taW5pdnQvdXRpbFZULmpzXG4vLyBtb2R1bGUgaWQgPSA5M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhcGx1c19taW5pX2Jhc2ljXG4gKiDlsI/nqIvluo/mqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOm+mempuSA8Y2hlbmdwaW5nLnJjcEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwQ29uZmlnLGFwbHVzX2NvbmZpZykge1xuICB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbiAgLy8gcmVxdWlyZSgnQHV0aWxzL2RlYnVnJykuaXNEZWJ1Z0FwbHVzKHRydWUpO1xuXG4gIHZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcbiAgLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuICB2YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG4gIHZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbiAgdmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuICB2YXIgYXBsdXNpbml0ID0gcmVxdWlyZSgnQGNvcmUvYXBsdXNpbml0Jyk7XG4gIG1pbmkuaW5pdElzVEIoKTtcblxuICBpZiAodHlwZW9mIGFwcENvbmZpZyA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoYXBwQ29uZmlnLnNpdGVJZCkge1xuICAgICAgYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5zaXRlSWQgPSBhcHBDb25maWcuc2l0ZUlkO1xuICAgIH1cbiAgICBhcGx1c19jb25maWcubWV0YUluZm8gPSBPYmplY3QuYXNzaWduKHt9LCBhcGx1c19jb25maWcubWV0YUluZm8sIGFwcENvbmZpZy5tZXRhSW5mbyk7XG4gIH1cblxuICB2YXIgUlVOTklORyA9ICdydW5uaW5nJztcbiAgdmFyIENPTVBMRVRFID0gJ2NvbXBsZXRlJztcbiAgdmFyIGFwbHVzU3RhdHVzID0gWydhcGx1c1JlYWR5JywgUlVOTklOR107XG5cbiAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhhcGx1c1N0YXR1cyk7XG5cbiAgYXBsdXNpbml0LnJ1bih7XG4gICAgcGx1Z2luczogYXBsdXNfY29uZmlnLnBsdWdpbnMsXG4gICAgY29udGV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbmZpZ19wdl9jb250ZXh0ID0ge1xuICAgICAgICBQQUdFX0xPQURfVElNRTogbmV3IERhdGUoKVxuICAgICAgfTtcbiAgICAgIHZhciBQTFVHSU5TX1BWID0gW107XG4gICAgICBlYWNoKGFwbHVzX2NvbmZpZy5wbHVnaW5zLCBmdW5jdGlvbiAodikge1xuICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWc7XG4gICAgICAgIGlmICh2Lm5hbWUgPT09ICdhcGx1c19sb2dfaW5qZWN0JyAmJiB2LmNvbmZpZyAmJiB2LmNvbmZpZy5wbHVnaW5zKSB7XG4gICAgICAgICAgUExVR0lOU19QViA9IHYuY29uZmlnLnBsdWdpbnMucHY7XG4gICAgICAgICAgZWFjaChQTFVHSU5TX1BWLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgY29uZmlnX3B2X2NvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb25maWdfcHZfY29udGV4dCwge1xuICAgICAgICBhcGx1c19jb25maWc6IGFwbHVzX2NvbmZpZ1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgdWxvZygpLncoJ0FQTFVTIElOSVQgU1VDQ0VTUycpO1xuICAgIC8vIGFwbHVz5YeG5aSH5aW95LqG77yM5YiG5Y+R5LiA5LiqcmVhZHnkuovku7ZcbiAgICBhcGx1c1N0YXR1c1sxXSA9IENPTVBMRVRFO1xuICAgIHV0aWxQdWJzdWIuZG9QdWJNc2coYXBsdXNTdGF0dXMpO1xuICB9KTtcblxuICAvLyByZXR1cm4gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRSk7XG4gIHJldHVybiB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c19taW5pX2Jhc2ljLmpzXG4vLyBtb2R1bGUgaWQgPSA5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogYXBsdXMgQVBJXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlZHVjZXIgPSByZXF1aXJlKCdAY29yZS9SZWR1Y2VyJyk7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG5cbi8qKlxuICog5bCG5ZCO57ut55qEaW5pdOWKqOS9nOmDveWBmuaIkOaPkuS7tu+8jOebruWJjeWPquaciXdoZXJlX3RvX3NlbmRwduS4gOmhuVxuICpcbiAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG4gKiAgIHBsdWdpbnNcbiAqICAgY29udGV4dFxuICogfVxuICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKlxuICovXG5leHBvcnRzLnJ1biA9IGZ1bmN0aW9uIChvcHRzLCBjYWxsYmFjaykge1xuICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG4gIHJlZHVjZXIucnVuKHtcbiAgICBwbHVnaW5zOiBvcHRzLnBsdWdpbnMsXG4gICAgY29udGV4dDogb3B0cy5jb250ZXh0XG4gIH0sIHtcbiAgICBjb25maWc6IHt9LFxuICAgIHVzZXJkYXRhOiB7fSxcbiAgICBwdWJzdWJUeXBlOiAnYXBsdXNpbml0JyxcbiAgICBtZXNzYWdlRm5RdWV1ZTogW10sXG4gICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfYXBsdXNpbml0J1xuICB9LCBmdW5jdGlvbiAoY3R4KSB7XG4gICAgdmFyIG1zZ3MgPSBbJ2FwbHVzSW5pdENvbnRleHQnLCBjdHhdO1xuICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcbiAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgIGNhbGxiYWNrKGN0eCk7XG4gICAgfVxuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL2FwbHVzaW5pdC5qc1xuLy8gbW9kdWxlIGlkID0gOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==