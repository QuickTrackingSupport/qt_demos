/*! 2021-12-20 14:20:33 */
!function(t) {
    function e(a) {
        if (n[a]) return n[a].exports;
        var o = n[a] = {
            exports: {},
            id: a,
            loaded: !1
        };
        return t[a].call(o.exports, o, o.exports, e), o.loaded = !0, o.exports;
    }
    var n = {};
    return e.m = t, e.c = n, e.p = "", e(0);
}([ function(t, e, n) {
    t.exports = n(1);
}, function(t, e, n) {
    "use strict";
    n(2).initGlobal(window), function() {
        var t = n(4);
        n(94)(t);
    }();
}, function(t, e, n) {
    "use strict";
    var a, o = n(3), r = o.APLUS, i = o.APLUS_QUEUE, s = o.GOLDLOG, u = o.GOLDLOG_QUEUE, c = !1;
    try {
        a = window, c = !0;
    } catch (t) {
        a = {};
    }
    e.getContext = function() {
        return a;
    }, e.initGlobal = function(t) {
        a = t ? t : {
            v: 1,
            aplus: {},
            aplus_queue: []
        };
        var e, n;
        if (c) try {
            e = a.aplus || (a.aplus = {});
            var o = a.goldlog_queue || (a.goldlog_queue = []);
            n = a.aplus_queue || (a.aplus_queue = []), n = o.concat(n);
        } catch (t) {} else e = a.aplus, n = a.aplus_queue;
        return a.aplus = a.goldlog = e, a.aplus_queue = a.goldlog_queue = n, a;
    };
    var l = function(t) {
        if (t === r || t === s) {
            var e = a[r] || a[s];
            return e || (e = a[r] = a[s] = {}), e;
        }
        var n = u, o = i;
        if (t === o || t === n) {
            var c = a[o] || a[n];
            return c || (c = a[o] = a[n] = []), c;
        }
    };
    e.getGlobalValue = l, e.setGlobalValue = function(t, e) {
        a[t] = e;
    };
    var p = function(t) {
        var e;
        try {
            var n = l(r);
            e = n[t];
        } catch (t) {
            e = "";
        } finally {
            return e;
        }
    };
    e.getGoldlogVal = p;
    var g = function(t, e) {
        var n = !1;
        try {
            var a = l(r);
            t && (a[t] = e, n = !0);
        } catch (t) {
            n = !1;
        } finally {
            return n;
        }
    };
    e.setGoldlogVal = g, e.getClientInfo = function() {
        return p("_aplus_client") || {};
    };
}, function(t, e) {
    var n = "aplus", a = "goldlog", o = n + "_queue", r = a + "_queue", i = "mw_change", s = "MetaInfo", u = "append" + s, c = "set" + s, l = "http", p = "_pubsub", g = "other", f = "2101", d = "2201", _ = "2202", h = "19999", m = "1023", v = "1010", y = 3e4, b = 18e5, E = "ekvs", I = 1e4, P = 1, w = 3e3, S = "$$_page_start", x = "$$_page_end", T = "$$_app_start", A = "$$_app_end", C = "aplus_user_profile", M = "imprint", k = "aplus-idtype", O = "aplus-jsbridge-only", N = "aplus-page-config", R = "aplus-skip-apv-rules";
    t.exports = {
        PAGE_ENTER: "PAGE_ENTER",
        CURRENT_PAGE_CONFIG: "CURRENT_PAGE_CONFIG",
        _ANONY_ID: "_anony_id",
        _USER_ID: "_user_id",
        DEFAULT_CODE: g,
        OTHER: h,
        EVENT_MAP: {
            "2101": "click",
            "2201": "exposure",
            "2202": "exposure",
            "19999": g,
            "1023": "app_show",
            "1010": "app_hide_or_unload"
        },
        EVENT_ID_MAP: {
            EXP: d,
            IMPEXP: _,
            CLK: f,
            OTHER: h,
            SHOW: m,
            H_OR_U: v
        },
        APLUS: n,
        GOLDLOG: a,
        UNSUBSCRIBE: n + "." + n + p + ".unsubscribe",
        SUBSCRIBE: n + "." + n + p + ".subscribe",
        PUBLISH: n + "." + n + p + ".publish",
        CACHE_PUBS: n + "." + n + p + ".cachePubs",
        APLUS_UNIVERSAL: n + "_universal",
        APLUS_QUEUE: o,
        GOLDLOG_QUEUE: r,
        COMPLETE: "complete",
        PV_CODE: "2001",
        EXP_CODE: d,
        CLK_CODE: f,
        OTHER_CODE: h,
        CLK: "CLK",
        EXP: "EXP",
        SPM_CNT: "spm-cnt",
        SPM_URL: "spm-url",
        SPM_PRE: "spm-pre",
        MW_CHANGE_PV: i + "_pv",
        MW_CHANGE_HJLJ: i + "_hjlj",
        HTTP: l + ":",
        HTTPS: "https:",
        APPEND_META_INFO: u,
        SET_META_INFO: c,
        APLUS_APPEND_META_INFO: n + "." + u,
        APLUS_SET_META_INFO: n + "." + c,
        PVID: "pvid",
        APLUS_LOG_PIPE: "aplus-log-pipe",
        openAPIs: [ "send", "enter", "sendPV", "record", "combineRecord", "recordUdata", "requestVTConfig", "setPageSPM", "setMetaInfo", "appendMetaInfo", "updatePageProperties", "updateNextPageProperties", "updatePageUtparam", "updateNextPageUtparam", "pageAppear", "pageDisappear", "skipPage", "updateSessionProperties", "getPageSpmUrl", "getPageSpmPre", "setPageName", "getElementSPM" ],
        SESSION_INTERVAL: y,
        SESSION_PAUSE_TIME: "session_pause_time",
        IMPRINT: "imprint",
        CURRENT_SESSION: "current_session",
        MAX_EVENTID_LENGTH: 128,
        MAX_PROPERTY_KEY_LENGTH: 256,
        MAX_PROPERTY_KEYS_COUNT: 100,
        REQUESTS: "requests",
        SHARES: "shares",
        APLUS_SSRC: "_aplus_ssrc",
        EKVS: E,
        EVENT_MAX_COUNT: I,
        MEMORY_MAX_COUNT: P,
        EVENT_SEND_DEFAULT_INTERVAL: w,
        PAGE_START: S,
        PAGE_END: x,
        APP_START: T,
        APP_END: A,
        USER_PROFILE_KEY: C,
        SHARE_CACHE_INTERVAL: b,
        IMPRINT: M,
        ID_TYPE: k,
        JSBRIDGE_ONLY: O,
        PAGE_CONFIG: N,
        APLUS_SKIP_APV_RULES: R
    };
}, function(t, e, n) {
    t.exports = {
        metaInfo: {
            "aplus-ifr-pv": "1",
            "aplus-rhost-v": "",
            "aplus-rhost-g": "",
            "aplus-channel": "",
            appId: "",
            sdkId: "aplus_cloud_um",
            "aplus-cpvdata": {},
            "aplus-exdata": {},
            "aplus-globaldata": {},
            "aplus-mmstat-timeout": "10000",
            "aplus-etag-timeout": "1500",
            "aplus-toUT": ""
        },
        globalConfig: {
            isDecodeUrl: !0,
            isAli: !1,
            isUM: !0,
            APLUS_QUEUE: "aplus_queue",
            ETAG_STORAGE_KEY: "__ETAG__CNA__ID__",
            script_name: "aplus.js",
            lver: "1.7.10",
            NAME_STORAGE_KEYS: {
                REFERRER: "wm_referrer",
                REFERRER_PV_ID: "refer_pv_id",
                LOST_PV_PAGE_DURATION: "lost_pv_page_duration",
                LOST_PV_PAGE_SPMAB: "lost_pv_page_spmab",
                LOST_PV_PAGE: "lost_pv_page",
                LOST_PV_PAGE_MSG: "lost_pv_page_msg"
            }
        },
        plugins: [ {
            name: "aplus_track_debug",
            path: n(5)
        }, {
            name: "aplus_body_ready",
            path: n(6)
        }, {
            name: "pubsub",
            path: n(7)
        }, {
            name: "aplus_client",
            path: n(12)
        }, {
            name: "aplus_meta_inject",
            path: n(14)
        }, {
            name: "name_storage",
            path: n(31)
        }, {
            name: "aplus_web_http_um",
            path: n(35)
        }, {
            name: "aplus_log_inject",
            path: n(51),
            deps: [ "aplus_meta_inject" ],
            config: {
                plugins: {
                    pv: [ {
                        name: "etag",
                        path: n(52)
                    }, {
                        name: "when_to_sendpv",
                        path: n(59),
                        config: {
                            aplusWaiting: ""
                        }
                    }, {
                        name: "where_to_send",
                        path: n(60)
                    }, {
                        name: "what_to_send",
                        path: n(62),
                        config: {
                            pvdataToUt: {}
                        }
                    }, {
                        name: "what_to_sendpv_userdata",
                        path: n(66),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "what_to_sendpv_userdata_web",
                        path: n(68),
                        deps: [ "what_to_send", "what_to_sendpv_userdata" ]
                    }, {
                        name: "what_to_sendpv_ut2",
                        path: n(71),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "what_to_sendpv_um2native",
                        path: n(73),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "can_to_sendpv",
                        path: n(74),
                        config: {
                            flag: "NO"
                        }
                    }, {
                        name: "after_pv",
                        path: n(75)
                    } ],
                    hjlj: [ {
                        name: "etag",
                        path: n(52)
                    }, {
                        name: "where_to_send",
                        path: n(60),
                        deps: []
                    }, {
                        name: "what_to_send",
                        path: n(62),
                        deps: []
                    }, {
                        name: "what_to_hjlj_userdata",
                        path: n(77),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "what_to_hjlj_userdata_web",
                        path: n(78),
                        deps: [ "what_to_send", "what_to_hjlj_userdata" ]
                    }, {
                        name: "what_to_hjlj_ut2",
                        path: n(79),
                        deps: [ "what_to_send" ]
                    }, {
                        name: "what_to_hjlj_um2native",
                        path: n(80),
                        deps: [ "what_to_send" ]
                    } ]
                }
            }
        }, {
            name: "aplus_api",
            path: n(81)
        }, {
            name: "meta_queue",
            path: n(89)
        }, {
            name: "etag",
            path: n(52)
        }, {
            name: "etag_web_sync",
            path: n(91)
        }, {
            name: "aplus_queue",
            path: n(92)
        }, {
            name: "hot_loader",
            path: n(93),
            config: {
                urlRules: [ {
                    rule: "aplus_webvt_messager",
                    cdnPath: [ "https://d.alicdn.com/alilog/mlog/aplus_webvt_messager.js" ]
                } ]
            }
        } ]
    };
}, function(t, e) {
    "use strict";
    t.exports = function() {
        return {
            run: function() {
                var t = document, e = window.aplus || (window.aplus = {});
                if (!e._aplus_cplugin_track_deb) {
                    e._aplus_cplugin_track_deb = {
                        status: "init"
                    };
                    var n = window, a = function() {
                        try {
                            var e = n.localStorage, a = "aplus_track_debug_id", o = new RegExp("[?|&]" + a + "=(\\w*)"), r = location.href.match(o);
                            if (r && r.length > 0) e.setItem(a, r[1]); else {
                                var i = t.referrer || "", s = i.match(o);
                                if (s && s.length > 0) e.setItem(a, s[1]); else {
                                    var u = n.name || "", c = u.match(o);
                                    c && c.length > 0 && e.setItem(a, c[1]);
                                }
                            }
                            var l = e.getItem(a) || "";
                            if (!(l && l.length > 50)) return !1;
                            var p, g = l.split("_");
                            if (g && g.length > 0) {
                                p = g[g.length - 1].replace(/log/, "");
                                var f = new Date(), d = f.getTime(), _ = new Date(), h = _.getTime();
                                f.setFullYear(parseInt(p.substr(0, 4))), f.setMonth(parseInt(p.substr(4, 2) - 1)), 
                                f.setDate(parseInt(p.substr(6, 2))), f.setHours(parseInt(p.substr(8, 2))), f.setMinutes(parseInt(p.substr(10, 2))), 
                                f.setSeconds(parseInt(p.substr(12, 2))), f.setMilliseconds(0), d = f.getTime(), 
                                h = _.getTime();
                                var m = h - d;
                                return m <= 36e5 && (l || r[1]);
                            }
                        } catch (t) {
                            return !1;
                        }
                    }, o = a();
                    if (o) {
                        e._aplus_cplugin_track_deb.status = "start";
                        var r = {
                            aplus_track_debug_id: o
                        }, i = window.aplus_queue || (window.aplus_queue = []);
                        i.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-exdata", r ]
                        }), i.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-cpvdata", r ]
                        }), e._aplus_cplugin_track_deb.status = "complete";
                    }
                }
            }
        };
    };
}, function(t, e) {
    "use strict";
    t.exports = function() {
        return {
            run: function(t, e) {
                var n = setInterval(function() {
                    document.getElementsByTagName("body").length && (clearInterval(n), n = null, e());
                }, 50);
                return setTimeout(function() {
                    n && clearInterval(n);
                }, 1e3), 1e3;
            }
        };
    };
}, function(t, e, n) {
    var a = n(8), o = n(2);
    t.exports = function() {
        return {
            run: function() {
                var t = o.getGlobalValue("aplus");
                t.aplus_pubsub || (t.aplus_pubsub = a.create());
            }
        };
    };
}, function(t, e, n) {
    var a = n(9);
    t.exports = a.extend({
        subscribeOnce: function(t, e) {
            this.callable(e);
            var n, a = this;
            return this.subscribe.call(this, t, n = function() {
                a.unsubscribe.call(a, t, n);
                var o = Array.prototype.slice.call(arguments);
                e.apply(a, o);
            }), this;
        }
    });
}, function(t, e, n) {
    "use strict";
    var a = n(10), o = n(11), r = function(t) {
        for (var e = t.length, n = new Array(e - 1), a = 1; a < e; a++) n[a - 1] = t[a];
        return n;
    }, i = o.extend({
        callable: function(t) {
            if (!a(t)) throw new TypeError(t + " is not a function");
            return t;
        },
        create: function(t) {
            var e = new this();
            for (var n in t) e[n] = t[n];
            return e.handlers = [], e.pubs = {}, e;
        },
        setHandlers: function(t) {
            this.handlers = t;
        },
        subscribe: function(t, e) {
            this.callable(e);
            var n = this, a = n.pubs || {}, o = a[t] || [];
            if (o) for (var r = 0; r < o.length; r++) {
                var i = o[r]();
                e.apply(n, i);
            }
            var s = n.handlers || [];
            return t in s || (s[t] = []), s[t].push(e), n.setHandlers(s), n;
        },
        unsubscribe: function(t, e) {
            this.callable(e);
            try {
                var n = this.handlers[t];
                if (!n) return this;
                if ("object" == typeof n && n.length > 0) {
                    for (var a = 0; a < n.length; a++) {
                        var o = e.toString(), r = n[a].toString();
                        o === r && n.splice(a, 1);
                    }
                    this.handlers[t] = n;
                } else delete this.handlers[t];
            } catch (t) {}
            return this;
        },
        publish: function(t) {
            var e = r(arguments), n = this.handlers || [], o = n[t] ? n[t].length : 0;
            if (o > 0) for (var i = 0; i < o; i++) {
                var s = n[t][i];
                a(s) && s.apply(this, e);
            }
            return this;
        },
        cachePubs: function(t) {
            var e = this.pubs || {}, n = r(arguments);
            e[t] || (e[t] = []), e[t].push(function() {
                return n;
            });
        }
    });
    t.exports = i;
}, function(t, e) {
    "use strict";
    t.exports = function(t) {
        return "function" == typeof t;
    };
}, function(t, e, n) {
    "use strict";
    function a() {}
    var o = n(10);
    a.prototype.extend = function() {}, a.prototype.create = function() {}, a.extend = function(t) {
        return this.prototype.extend.call(this, t);
    }, a.prototype.create = function(t) {
        var e = new this();
        for (var n in t) e[n] = t[n];
        return e;
    }, a.prototype.extend = function(t) {
        var e = function() {};
        try {
            o(Object.create) || (Object.create = function(t) {
                function e() {}
                return e.prototype = t, new e();
            }), e.prototype = Object.create(this.prototype);
            for (var n in t) e.prototype[n] = t[n];
            e.prototype.constructor = e, e.extend = e.prototype.extend, e.create = e.prototype.create;
        } catch (t) {
            console && console.log(t);
        } finally {
            return e;
        }
    }, t.exports = a;
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        return {
            run: function() {
                var t = window.aplus || (window.aplus = {});
                t._aplus_client = n(13)();
            }
        };
    };
}, function(t, e) {
    "use strict";
    function n(t) {
        for (var e = [ [ "Windows NT 5.1", "winXP" ], [ "Windows NT 6.1", "win7" ], [ "Windows NT 6.0", "winVista" ], [ "Windows NT 6.2", "win8" ], [ "Windows NT 6.3", "win8.1" ], [ "Windows NT 10.0", "win10" ], [ "Ubuntu", "ubuntu" ], [ "Linux", "linux" ], [ "Windows NT 5.2", "win2003" ], [ "Windows NT 5.0", "win2000" ], [ "Windows", "winOther" ], [ "rhino", "rhino" ] ], n = 0, a = e.length; n < a; ++n) {
            var o = e[n][0];
            if (t.indexOf(o) !== -1) {
                var r = o.split(" ")[0];
                return {
                    device_model: r,
                    os: r,
                    os_version: e[n][1]
                };
            }
        }
        var i = "other";
        return {
            device_model: i,
            os: i,
            os_version: i
        };
    }
    function a(t, e) {
        var n = t.substring(t.indexOf("(") + 1, t.indexOf(")")), a = {
            device_model: e
        }, o = e.toLowerCase();
        switch (o) {
          case "ipad":
          case "iphone":
          case "ipod":
          case "macintosh":
            "macintosh" === o ? /Mac OS X/.test(n) ? a.os = "Mac OS X" : a.os = "Mac OS" : a.os = "IOS", 
            a.os_version = n.match(/[0-9_.]+/)[0];
            break;

          case "android":
            a.os = "Android", a.os_version = n.match(/[0-9.]+/)[0];
        }
        return a.os_version = a.os_version.replace(/_/g, "."), a;
    }
    t.exports = function() {
        var t = navigator.userAgent, e = {}, o = t.match(/iphone|ipad|android|macintosh/i), r = t.match(/Darwin/i);
        if (o) e = a(t, o[0]); else if (r) {
            var i = t.split(" ")[2];
            e = {
                os: "Darwin",
                os_version: i.match(/[0-9.]+/)[0],
                device_model: "Darwin"
            };
        } else e = n(t);
        var s = screen || {};
        return e.screenWidth = s.width, e.screenHeight = s.height, navigator && (e.userAgent = navigator.userAgent || "-", 
        e.language = navigator.language || navigator.userLanguage || "-"), e;
    };
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        return {
            run: function() {
                n(15)(this.options.context.aplus_config);
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    function a() {
        var t = document, e = "//g.alicdn.com";
        if (t) {
            var n = t.getElementById("beacon-aplus") || t.getElementById("tb-beacon-aplus"), a = [ "//assets.alicdn.com/g", "//g-assets.daily.taobao.net", "//alidt.oss-cn-hangzhou.aliyuncs.com" ];
            if (n) for (var o = 0; o < a.length; o++) {
                var r = new RegExp(a[o]);
                if (r.test(n.src)) {
                    e = a[o];
                    break;
                }
            }
        }
        return e;
    }
    function o() {
        s || (s = a());
        var t = "//assets.alicdn.com/g" === s || "//laz-g-cdn.alicdn.com" === s;
        return t || "int" === g.getMetaInfo("aplus-env");
    }
    function r() {
        if (navigator && navigator.userAgent) {
            var t = /iphone|android/i.test(navigator.userAgent), e = t || /TB\-PD/i.test(navigator.userAgent);
            return e;
        }
        return !0;
    }
    function i() {
        var t, e = c.getParamFromUrl("utparamcnt", location.href);
        if (e) try {
            t = e = JSON.parse(decodeURIComponent(e));
        } catch (t) {}
        return t;
    }
    var s, u = n(2), c = n(16), l = n(17), p = n(18), g = n(19);
    t.exports = function(t) {
        var e = u.getGlobalValue("aplus"), s = t.globalConfig.NAME_STORAGE_KEYS, c = n(30).getRefer(s);
        e.nameStorage = p.nameStorage, l.haveNativeFlagInUA();
        var f = e._$ = e._$ || {};
        f.is_terminal = r(), f.send_pv_count = 0, f.page_referrer = c, f.spm = {
            data: {},
            page_referrer: c
        }, e.globalConfig = t.globalConfig;
        var d = i();
        f.meta_info = g.qGet() || {};
        for (var _ in t.metaInfo) if (!f.meta_info.hasOwnProperty(_)) {
            var h = t.metaInfo[_];
            "aplus-utparam" === _ ? (d && g.appendMetaInfo(_, d), g.appendMetaInfo(_, h)) : g.setMetaInfo(_, h);
        }
        e._$ = f, e.isInternational = o, e.getCdnPath = a;
    };
}, function(t, e) {
    "use strict";
    function n(t, e) {
        if (!t || !e) return "";
        var n, a = "";
        try {
            var o = new RegExp(t + "=([^&|#|?|/]+)");
            if ("spm" === t || "scm" === t) {
                var r = new RegExp("\\?.*" + t + "=([\\w\\.\\-\\*/]+)"), i = e.match(o), s = e.match(r), u = i && 2 === i.length ? i[1] : "", c = s && 2 === s.length ? s[1] : "";
                a = u > c ? u : c, a = decodeURIComponent(a);
            } else n = e.match(o), a = n && 2 === n.length ? n[1] : "";
        } catch (t) {} finally {
            return a;
        }
    }
    e.getParamFromUrl = n, e.getSPMFromUrl = function(t) {
        return n("spm", t);
    };
}, function(t, e, n) {
    "use strict";
    var a = n(2), o = "UT4Aplus", r = "Umeng4Aplus";
    e.isNative4Aplus = function() {
        var t = a.getGlobalValue("aplus"), e = t.getMetaInfo("aplus-toUT"), n = t.aplusBridgeName;
        return n === o && e === o || n === r;
    }, e.haveNativeFlagInUA = function() {
        var t = a.getGlobalValue("aplus"), e = t.aplusBridgeName;
        if (!e && "boolean" != typeof e && navigator && navigator.userAgent) {
            var n = new RegExp([ o, r ].join("|"), "i"), i = navigator.userAgent.match(n);
            e = !!i && i[0], t.aplusBridgeName = e;
        }
        return !!e;
    };
}, function(t, e, n) {
    "use strict";
    var a = n(2), o = function() {
        function t() {
            var t, e = [], n = !0;
            for (var a in g) g.hasOwnProperty(a) && (n = !1, t = g[a] || "", e.push(l(a) + u + l(t)));
            window.name = n ? o : r + l(o) + s + e.join(c);
        }
        function e(t, e, n) {
            t && (t.addEventListener ? t.addEventListener(e, n, !1) : t.attachEvent && t.attachEvent("on" + e, function(e) {
                n.call(t, e);
            }));
        }
        var n = a.getGlobalValue("nameStorage");
        if (n) return n;
        var o, r = "nameStorage:", i = /^([^=]+)(?:=(.*))?$/, s = "?", u = "=", c = "&", l = encodeURIComponent, p = decodeURIComponent, g = {}, f = {};
        return function(t) {
            if (t && 0 === t.indexOf(r)) {
                var e = t.split(/[:?]/);
                e.shift(), o = p(e.shift()) || "";
                for (var n, a, s, u = e.join(""), l = u.split(c), f = 0, d = l.length; f < d; f++) n = l[f].match(i), 
                n && n[1] && (a = p(n[1]), s = p(n[2]) || "", g[a] = s);
            } else o = t || "";
        }(window.name), f.setItem = function(e, n) {
            e && "undefined" != typeof n && (g[e] = String(n), t());
        }, f.getItem = function(t) {
            return g.hasOwnProperty(t) ? g[t] : null;
        }, f.removeItem = function(e) {
            g.hasOwnProperty(e) && (g[e] = null, delete g[e], t());
        }, f.clear = function() {
            g = {}, t();
        }, f.valueOf = function() {
            return g;
        }, f.toString = function() {
            var t = window.name;
            return 0 === t.indexOf(r) ? t : r + t;
        }, e(window, "beforeunload", function() {
            t();
        }), f;
    }();
    e.nameStorage = o;
}, function(t, e, n) {
    "use strict";
    function a(t) {
        var e, n, a, o = t.length, r = {};
        for (v._microscope_data = r, e = 0; e < o; e++) n = t[e], "microscope-data" === _.tryToGetAttribute(n, "name") && (a = _.tryToGetAttribute(n, "content"), 
        g.parseSemicolonContent(a, r), v.is_head_has_meta_microscope_data = !0);
        v._microscope_data_params = l.obj2param(r), v.ms_data_page_id = r.pageId, v.ms_data_shop_id = r.shopId, 
        v.ms_data_instance_id = r.siteInstanceId, v.ms_data_siteCategoryId = r.siteCategory, 
        v.ms_prototype_id = r.prototypeId, v.site_instance_id_or_shop_id = v.ms_data_instance_id || v.ms_data_shop_id, 
        v._atp_beacon_data = {}, v._atp_beacon_data_params = "";
    }
    function o(t) {
        var e, n = function() {
            var e;
            return document.querySelector && (e = document.querySelector("meta[name=data-spm]")), 
            d(t, function(t) {
                "data-spm" === _.tryToGetAttribute(t, "name") && (e = t);
            }), e;
        }, a = n();
        return a && (e = _.tryToGetAttribute(a, "data-spm-protocol")), e;
    }
    function r(t) {
        var e = t.isonepage || "-1", n = e.split("|"), a = n[0], o = n[1] ? n[1] : "";
        t.isonepage_data = {
            isonepage: a,
            urlpagename: o
        };
    }
    function i() {
        if (document) {
            var t = h.getMetaTags();
            a(t), d(t, function(t) {
                var e = _.tryToGetAttribute(t, "name");
                if (/^aplus/.test(e) && (v[e] = h.getMetaCnt(e), e === y)) try {
                    u = v[e] = JSON.parse(h.getMetaCnt(e));
                } catch (t) {}
            }), d(b, function(t) {
                v[t] = h.getMetaCnt(t);
            }), v.spm_protocol = o(t), u && (v = p.assign(v, u));
            var e, n, i = [ "aplus-rate-ahot" ], s = i.length;
            for (e = 0; e < s; e++) n = i[e], v[n] = parseFloat(v[n]);
            r(v);
        }
        return c = v || {}, v;
    }
    function s(t) {
        f.logger({
            msg: "please do not repeat setPriorityMetaInfo " + t
        });
    }
    var u, c, l = n(20), p = n(21), g = n(23), f = n(26), d = n(27), _ = n(28), h = n(29), m = n(2), v = {}, y = "aplus-x-settings", b = [ "ahot-aplus", "isonepage", "spm-id", "data-spm", "microscope-data" ];
    e.getInfo = i, e.qGet = function() {
        return c || i();
    }, e.setMetaInfo = function(t, e) {
        if (c || (c = {}), "object" == typeof u && u[t]) return s(t), !0;
        if (t === y) {
            if (u) s(t); else try {
                u = "object" == typeof e ? e : JSON.parse(e), c = p.assign(c, u);
            } catch (t) {
                console && console.log(t);
            }
            return !0;
        }
        return "aplus-exinfo" === t ? c[t] = "object" == typeof e ? e : l.param2obj(e) : c[t] = e, 
        !0;
    };
    var E = function(t) {
        return c || (c = {}), c[t] || "";
    };
    e.getMetaInfo = E, e.appendMetaInfo = function(t, e) {
        var n = m.getGlobalValue("aplus");
        if (t && e) {
            var a, o = function(n) {
                try {
                    var a = "string" == typeof e ? JSON.parse(e) : e;
                    s(t, p.assign(n, a));
                } catch (t) {}
            }, r = function(n) {
                try {
                    var a = "string" == typeof e ? JSON.parse(e) : e;
                    s(t, n.concat(a));
                } catch (t) {}
            }, i = function(t) {
                t.constructor === Array ? r(t) : o(t);
            }, s = function(t, e) {
                n.setMetaInfo(t, e, {
                    from: "appendMetaInfo"
                });
            }, u = function(n) {
                var a = l.param2obj(e);
                s(t, p.assign(n, a));
            }, c = n.getMetaInfo(t);
            if ("aplus-exinfo" === t && (u(c), a = !0), c) if ("object" == typeof c) i(c), a = !0; else try {
                var g = JSON.parse(c);
                "object" == typeof g && (i(g), a = !0);
            } catch (t) {}
            a || s(t, e);
        }
    };
}, function(t, e) {
    "use strict";
    function n(t, e) {
        var n, o, r, i = [], s = t.length;
        for (r = 0; r < s; r++) {
            n = t[r][0], o = t[r][1];
            var u = 0 === n.indexOf(a), c = u || e ? o : encodeURIComponent(o);
            i.push(u ? c : n + "=" + c);
        }
        return i.join("&");
    }
    e.arr2obj = function(t) {
        var e, n, a, o = {}, r = t.length;
        for (a = 0; a < r; a++) e = t[a][0], n = t[a][1], o[e] = n;
        return o;
    }, e.param2obj = function(t) {
        if ("object" == typeof t) return t;
        t || (t = "");
        for (var e = {}, n = t.split("&"), a = 0; a < n.length; a++) {
            var o = n[a], r = o.indexOf("="), i = o.split("="), s = o.length;
            if (2 === i.length) e[i[0]] = i[1] || ""; else if (r > 0) {
                var u = o.slice(0, r), c = o.slice(r + 1, s) || "";
                e[u] = c;
            } else e[i[0]] = "";
        }
        return e;
    };
    var a = "::-plain-::";
    e.s_plain_obj = a, e.arr2param = n, e.obj2param = function(t, e) {
        var n, o, r, i = [];
        for (n in t) n && t.hasOwnProperty(n) && (o = "" + t[n], r = n + "=" + o, e ? i.push(r) : i.push(0 === n.indexOf(a) ? o : r));
        return i.join("&");
    }, e.encodeGokeyValue = function(t) {
        return t;
    };
}, function(t, e, n) {
    "use strict";
    e.assign = n(22), e.makeCacheNum = function() {
        return Math.floor(268435456 * Math.random()).toString(16);
    }, e.isStartWith = function(t, e) {
        return 0 === t.indexOf(e);
    }, e.isEndWith = function(t, e) {
        var n = t.length, a = e.length;
        return n >= a && t.indexOf(e) == n - a;
    }, e.any = function(t, e) {
        var n, a = t.length;
        for (n = 0; n < a; n++) if (e(t[n])) return !0;
        return !1;
    }, e.isNumber = function(t) {
        return "number" == typeof t;
    }, e.isNaN = function(t) {
        return isNaN ? isNaN(t) : t !== t;
    }, e.isContain = function(t, e) {
        return t.indexOf(e) > -1;
    };
    var a = function(t) {
        var e, n = t.constructor === Array ? [] : {};
        if ("object" == typeof t) {
            if (JSON && JSON.parse) e = JSON.stringify(t), n = JSON.parse(e); else for (var o in t) n[o] = "object" == typeof t[o] ? a(t[o]) : t[o];
            return n;
        }
    };
    e.cloneDeep = a;
}, function(t, e) {
    t.exports = function(t, e) {
        return "function" != typeof Object.assign ? function(t) {
            for (var e = Object(t), n = 1; n < arguments.length; n++) {
                var a = arguments[n];
                if (null !== a) for (var o in a) Object.prototype.hasOwnProperty.call(a, o) && (e[o] = a[o]);
            }
            return e;
        }(t, e) : Object.assign({}, t, e);
    };
}, function(t, e, n) {
    "use strict";
    var a = n(24), o = n(25), r = n(2);
    t.exports = {
        tryToDecodeURIComponent: function(t, e) {
            var n = e || "";
            if (t) try {
                n = decodeURIComponent(t);
            } catch (t) {}
            return n;
        },
        parseSemicolonContent: function(t, e, n) {
            e = e || {};
            var o, r, i = t.split(";"), s = i.length;
            for (o = 0; o < s; o++) {
                r = i[o].split("=");
                var u = a.trim(r.slice(1).join("="));
                e[a.trim(r[0]) || ""] = n ? u : this.tryToDecodeURIComponent(u);
            }
            return e;
        },
        nodeListToArray: function(t) {
            var e, n;
            try {
                return e = [].slice.call(t);
            } catch (o) {
                e = [], n = t.length;
                for (var a = 0; a < n; a++) e.push(t[a]);
                return e;
            }
        },
        getLsCna: function(t, e) {
            if (o.set && o.test()) {
                var n = "", a = o.get(t);
                if (a) {
                    var r = a.split("_") || [];
                    n = e ? r.length > 1 && e === r[0] ? r[1] : "" : r.length > 1 ? r[1] : "";
                }
                return decodeURIComponent(n);
            }
            return "";
        },
        setLsCna: function(t, e, n) {
            n && o.set && o.test() && o.set(t, e + "_" + encodeURIComponent(n));
        },
        getUrl: function(t) {
            var e = r.getGlobalValue("aplus"), n = t || "//log.mmstat.com/eg.js";
            try {
                var a = e.getMetaInfo("aplus-rhost-v"), o = /[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/, i = a.match(o);
                i && i[0] && (n = "//" + i[0] + "/eg.js");
            } catch (t) {}
            return n;
        }
    };
}, function(t, e) {
    "use strict";
    function n(t) {
        return "string" == typeof t ? t.replace(/^\s+|\s+$/g, "") : "";
    }
    e.trim = n;
}, function(t, e) {
    "use strict";
    t.exports = {
        set: function(t, e) {
            try {
                return localStorage.setItem(t, e), !0;
            } catch (t) {
                return !1;
            }
        },
        get: function(t) {
            try {
                return localStorage.getItem(t);
            } catch (t) {
                return "";
            }
        },
        test: function() {
            var t = "grey_test_key";
            try {
                return localStorage.setItem(t, 1), localStorage.removeItem(t), !0;
            } catch (t) {
                return !1;
            }
        },
        remove: function(t) {
            localStorage.removeItem(t);
        }
    };
}, function(t, e, n) {
    "use strict";
    var a = "[aplus log]: ";
    e.logger = function(t) {
        t || (t = {});
        var e = t.level || "warn";
        console && console[e] && console[e](a + t.msg);
    }, e.debugLog = function(t) {
        var e = n(2).getGlobalValue("aplus");
        e && e.aplusDebug && this.logger(t);
    };
}, function(t, e) {
    "use strict";
    t.exports = function(t, e) {
        var n, a = t.length;
        for (n = 0; n < a; n++) {
            var o = e(t[n], n);
            if ("break" === o) break;
        }
    };
}, function(t, e) {
    "use strict";
    e.tryToGetAttribute = function(t, e) {
        return t && t.getAttribute ? t.getAttribute(e) || "" : "";
    };
    var n = function(t, e, n) {
        if (t && t.setAttribute) try {
            t.setAttribute(e, n);
        } catch (t) {}
    };
    e.tryToSetAttribute = n, e.tryToRemoveAttribute = function(t, e) {
        if (t && t.removeAttribute) try {
            t.removeAttribute(e);
        } catch (a) {
            n(t, e, "");
        }
    };
}, function(t, e, n) {
    "use strict";
    function a(t) {
        return i = i || document.getElementsByTagName("head")[0], s && !t ? s : i ? s = i.getElementsByTagName("meta") : [];
    }
    function o(t, e) {
        var n, o, r, i = a(), s = i.length;
        for (n = 0; n < s; n++) o = i[n], u.tryToGetAttribute(o, "name") === t && (r = u.tryToGetAttribute(o, e || "content"));
        return r || "";
    }
    function r(t) {
        var e = {
            isonepage: "-1",
            urlpagename: ""
        }, n = t.qGet();
        if (n && n.hasOwnProperty("isonepage_data")) e.isonepage = n.isonepage_data.isonepage, 
        e.urlpagename = n.isonepage_data.urlpagename; else {
            var a = o("isonepage") || "-1", r = a.split("|");
            e.isonepage = r[0], e.urlpagename = r[1] ? r[1] : "";
        }
        return e;
    }
    var i, s, u = n(28);
    e.getMetaTags = a, e.getMetaCnt = o, e.getOnePageInfo = r;
}, function(t, e, n) {
    "use strict";
    var a = n(18).nameStorage;
    e.getRefer = function(t) {
        return document.referrer || a.getItem(t.REFERRER) || "";
    };
}, function(t, e, n) {
    "use strict";
    var a = n(32), o = n(3), r = n(18).nameStorage, i = n(30);
    t.exports = function() {
        return {
            recordValInWindowName: function() {
                var t, e, n = o.HTTPS == location.protocol, a = aplus.globalConfig.NAMESTORAGE_KEYS || {}, s = parent !== self;
                if (!s && n) {
                    var u = location.href, c = n && (u.indexOf("login.taobao.com") >= 0 || u.indexOf("login.tmall.com") >= 0), l = i.getRefer(a);
                    c && l ? (t = l, e = r.getItem(a.REFERRER_PV_ID)) : (t = u, e = aplus.pvid), r.setItem(a.REFERRER, t), 
                    r.setItem(a.REFERRER_PV_ID, e);
                }
            },
            run: function() {
                var t = this;
                a.on(window, "beforeunload", function() {
                    t.recordValInWindowName();
                });
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    function a(t, e, n) {
        var a = aplus._$ || {}, o = a.meta_info || {}, r = o.aplus_ctap || {}, i = o["aplus-touch"];
        if (r && "function" == typeof r.on) r.on(t, e); else {
            var u = "ontouchend" in document.createElement("div");
            !u || "tap" !== i && "tapSpm" !== n && "tap" !== n ? s(t, u ? "touchstart" : "mousedown", e) : c.on(t, e);
        }
    }
    function o(t) {
        try {
            document.documentElement.doScroll("left");
        } catch (e) {
            return void setTimeout(function() {
                o(t);
            }, 1);
        }
        t();
    }
    function r(t) {
        var e = 0, n = function() {
            0 === e && t(), e++;
        };
        "complete" === document.readyState && n();
        var a;
        if (document.addEventListener) a = function() {
            document.removeEventListener("DOMContentLoaded", a, !1), n();
        }, document.addEventListener("DOMContentLoaded", a, !1), window.addEventListener("load", n, !1); else if (document.attachEvent) {
            a = function() {
                "complete" === document.readyState && (document.detachEvent("onreadystatechange", a), 
                n());
            }, document.attachEvent("onreadystatechange", a), window.attachEvent("onload", n);
            var r = !1;
            try {
                r = null === window.frameElement;
            } catch (t) {}
            document.documentElement.doScroll && r && o(n);
        }
    }
    function i(t) {
        "complete" === document.readyState ? t() : s(window, "load", t);
    }
    function s() {
        var t = window, e = arguments;
        if (2 === e.length) "DOMReady" === e[0] && r(e[1]), "onload" === e[0] && i(e[1]); else if (3 === e.length) {
            var n = e[0], o = e[1], s = e[2];
            if ("tap" === o || "tapSpm" === o) a(n, s, o); else {
                var c = document.attachEvent ? "attachEvent" : "addEventListener", l = !!document.attachEvent;
                n[c]((l ? "on" : "") + o, function(e) {
                    e = e || t.event;
                    var n = e.target || e.srcElement;
                    "function" == typeof s && s(e, n);
                }, !!u(o) && {
                    passive: !0
                });
            }
        }
    }
    var u = n(33), c = n(34);
    e.DOMReady = r, e.onload = i, e.on = s;
}, function(t, e) {
    var n;
    t.exports = function(t) {
        if ("boolean" == typeof n) return n;
        if (!/touch|mouse|scroll|wheel/i.test(t)) return !1;
        n = !1;
        try {
            var e = Object.defineProperty({}, "passive", {
                get: function() {
                    n = !0;
                }
            });
            window.addEventListener("test", null, e);
        } catch (t) {}
        return n;
    };
}, function(t, e) {
    "use strict";
    function n(t, e) {
        return t + Math.floor(Math.random() * (e - t + 1));
    }
    function a(t, e, n) {
        var a = document.createEvent("HTMLEvents");
        if (a.initEvent(e, !0, !0), "object" == typeof n) for (var o in n) a[o] = n[o];
        t.dispatchEvent(a);
    }
    function o(t) {
        var e = document.documentElement;
        0 === Object.keys(l).length && (e.addEventListener(f, r, !1), e.addEventListener(g, i, !1), 
        e.addEventListener(_, i, !1));
        for (var n = 0; n < t.changedTouches.length; n++) {
            var a = t.changedTouches[n], o = {};
            for (var s in a) o[s] = a[s];
            var u = {
                startTouch: o,
                startTime: Date.now(),
                status: d,
                element: t.srcElement || t.target
            };
            l[a.identifier] = u;
        }
    }
    function r(t) {
        for (var e = 0; e < t.changedTouches.length; e++) {
            var n = t.changedTouches[e], a = l[n.identifier];
            if (!a) return;
            var o = n.clientX - a.startTouch.clientX, r = n.clientY - a.startTouch.clientY, i = Math.sqrt(Math.pow(o, 2) + Math.pow(r, 2));
            (a.status === d || "pressing" === a.status) && i > 10 && (a.status = "panning");
        }
    }
    function i(t) {
        for (var e = 0; e < t.changedTouches.length; e++) {
            var n = t.changedTouches[e], o = n.identifier, s = l[o];
            s && (s.status === d && t.type === g && (s.timestamp = Date.now(), a(s.element, h, {
                touch: n,
                touchEvent: t
            })), delete l[o]);
        }
        var u = document.documentElement;
        0 === Object.keys(l).length && (u.removeEventListener(f, r, !1), u.removeEventListener(g, i, !1), 
        u.removeEventListener(_, i, !1));
    }
    function s(t) {
        t.__fixTouchEvent || (t.addEventListener(p, function() {}, !1), t.__fixTouchEvent = !0);
    }
    function u() {
        if (!c) {
            var t = document.documentElement;
            t.addEventListener(p, o, !1), c = !0;
        }
    }
    var c = !1, l = {}, p = "touchstart", g = "touchend", f = "touchmove", d = "tapping", _ = "touchcancel", h = "aplus_tap" + n(1, 1e5);
    t.exports = {
        on: function(t, e) {
            u(), t && t.addEventListener && e && (s(t), t.addEventListener(h, e._aplus_tap_callback = function(t) {
                e(t, t.target);
            }, !1));
        },
        un: function(t, e) {
            t && t.removeEventListener && e && e._aplus_tap_callback && t.removeEventListener(h, e._aplus_tap_callback, !1);
        }
    };
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        return {
            run: function() {
                var t = n(36), e = t.create({
                    WS: null,
                    CTX: window,
                    CTX_TYPE: "WEB"
                });
                e.run(this.options);
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a, o = n(37), r = n(2), i = n(38), s = n(40), u = n(44), c = n(3), l = n(25), p = n(50), g = n(26);
    t.exports = i.extend({
        handlerMiddleware: function(t) {
            var e = r.getGlobalValue("aplus");
            if (!e.getMetaInfo(c.JSBRIDGE_ONLY)) {
                var n = o.changeToObj(t.what_to_send.logdata);
                u().setDebug(!!e.getMetaInfo("DEBUG"));
                var i, f = s(n, t.userdata);
                e._h5_share_enable ? i = "POST" : (i = t.where_to_send.method, "POST" === i && navigator && navigator.sendBeacon || (f = "d=" + encodeURIComponent(f))), 
                u().i("event before send to: ", t.where_to_send.url), a || (a = new Date().getTime()), 
                a && a - new Date().getTime() > c.SHARE_CACHE_INTERVAL && e._h5_share_enable && (l.remove("__sharefrom"), 
                l.remove("__fromappkey"), l.remove("_um_ssrc"), l.remove("_um_channel"), l.remove("_um_campaign")), 
                e._h5_share_enable ? p.request4um({
                    url: t.where_to_send.url,
                    method: i,
                    data: f,
                    success: function(t) {
                        t && t.imprint && l.set(c.IMPRINT, t.imprint);
                    },
                    error: function(t) {
                        g.logger({
                            msg: "aplus weblogs error: " + t
                        });
                    }
                }) : e.send(t.where_to_send.url, f, i);
            }
        }
    });
}, function(t, e, n) {
    "use strict";
    var a = n(2);
    e.getKeyIndex = function(t) {
        var e = {
            protocol: 1,
            event_args: 25
        };
        return e[t];
    };
    var o = "-";
    e.changeToArray = function(t, e) {
        var n = a.getGlobalValue("aplus"), r = e.event_timestamp.getTime().toString(), i = e.client || {}, s = i.screenWidth || "", u = i.screenHeight || "", c = s + "*" + u, l = s && u ? c : o, p = i.language || o, g = e.gokey || {}, f = JSON.stringify(g), d = JSON.stringify({
            customSdkId: e.sdk_info.customSdkId || "",
            platform_type: e.sdk_info.platformType || ""
        }), _ = e.appKey || e.appId || o, h = JSON.stringify({
            appId: i.appId || n.getMetaInfo("miniAppId") || ""
        }), m = JSON.stringify(e.sessionArgs || {}), v = JSON.stringify(e.globalArgs || {}), y = e.arg1 || e.logkey || o;
        0 === y.indexOf("/$$_") && (y = y.substring(1, y.length)), "2001" === e.event_code && e.trackerEventCode && (y = e.trackerEventCode);
        var b = [ e.cache, e.method || "GET", o, l, _, h, e._dev_id || o, "{}", e._user_nick || o, e._user_id || o, e._anony_id || o, "{}", p, e.timeZone || o, i.os || o, i.os_version || o, d, e._session_id || o, e.cna || o, r, encodeURIComponent(e.url) || o, e.event_code || o, encodeURIComponent(e.pre) || o, v, m, f, y, e.sdk_info.jsver, e.sdk_info.lver, i.appVersion || "devtools" || o, i.brand || o, o, i.networkType || o ];
        return b;
    }, e.changeToObj = function(t) {
        var e = a.getGlobalValue("aplus"), n = t.event_timestamp.getTime().toString(), r = t.client || {}, i = r.language || o, s = t.gokey || {}, u = JSON.stringify(s), c = JSON.stringify({
            customSdkId: t.sdk_info.customSdkId || "",
            platform_type: t.sdk_info.platformType || ""
        }), l = t.appKey || t.appId || o, p = JSON.stringify({
            appId: r.appId || e.getMetaInfo("miniAppId") || ""
        }), g = JSON.stringify(t.sessionArgs || {}), f = JSON.stringify(t.globalArgs || {}), d = t.arg1 || t.logkey || o;
        0 === d.indexOf("/$$_") && (d = d.substring(1, d.length)), "2001" === t.event_code && t.trackerEventCode && (d = t.trackerEventCode);
        var _ = {};
        _.platform = t.sdk_info.platformType || "", _.sdk_type = _.platform ? _.platform + "mp" : "", 
        _.appkey = l, _.sdk_version = t.sdk_info.lver, _.device_type = r.device_model || "", 
        _.os = r.os || "", _.os_version = r.os_version || "", _.jsver = t.sdk_info.jsver, 
        _.pixel_ratio = window.devicePixelRatio || "";
        var h = Math.round(r.screenWidth * (window.devicePixelRatio || 1)), m = Math.round(r.screenHeight * (window.devicePixelRatio || 1));
        _.resolution = h > m ? h + "*" + m : m + "*" + h, _.language = i, _.app_version = e.getMetaInfo("appVersion") || "devtools", 
        _.arg1 = d, _.event_args = u, _.event_code = t.event_code || "", _.sessionArgs = g, 
        _.global_args = f, _.app_ext_info = p, _.time = n, _.cna = t.cna || "", _.url = t.url || "", 
        _.pre = t.pre || "", _.method = t.method || "GET", _.log_id = t.cache || "", _.sdk_info = c, 
        _.is_auto = t.is_auto;
        var v = e.getMetaInfo("aplus-exdata");
        return v && v.aplus_track_debug_id && (_.track_debug_id = v.aplus_track_debug_id), 
        _;
    };
}, function(t, e, n) {
    "use strict";
    var a = n(11), o = n(39), r = n(3);
    t.exports = a.extend({
        subscribeLogs: function(t, e) {
            o.pushIntoGoldlogQueue(r.SUBSCRIBE, [ t, function(t) {
                t.status === r.COMPLETE && e(t);
            } ]);
        },
        getLogicSymbol: function() {
            return "ALI" === this.format ? "&" : "||";
        },
        handlerMiddleware: function() {},
        watchLOG: function() {
            var t = this;
            t.subscribeLogs(r.MW_CHANGE_PV, function(e) {
                t.handlerMiddleware(e, "pv");
            }), t.subscribeLogs(r.MW_CHANGE_HJLJ, function(e) {
                t.handlerMiddleware(e, r.APLUS);
            });
        },
        run: function() {
            this.watchLOG();
        }
    });
}, function(t, e, n) {
    "use strict";
    var a = n(2);
    e.pushIntoGoldlogQueue = function(t, e) {
        var n = a.getGlobalValue("aplus_queue"), o = a.getGlobalValue("aplus"), r = t.split("."), i = o[r[1]], s = i ? i[r[2]] : null;
        o && 2 === r.length && i ? i.apply(o, e) : 3 === r.length && s ? s.apply(i, e) : n.push({
            action: t,
            arguments: e
        });
    };
}, function(t, e, n) {
    function a() {
        var t = u.getGlobalValue("aplus");
        if (t._h5_share_enable) {
            var e = {}, n = m.get("__sharefrom"), a = m.get("__fromappkey"), o = m.get("_um_ssrc"), r = m.get("_um_channel"), i = m.get("_um_campaign");
            return n && (e.sharefrom = n), a && (e.fromappkey = a), o && (e._um_ssrc = o), r && (e._um_channel = r), 
            i && (e._um_campaign = i), e;
        }
    }
    function o(t, e) {
        var n = u.getGlobalValue("aplus");
        try {
            var o = {}, r = n.getMetaInfo("globalproperty");
            r && (o.gp = r);
            var s, l = e.gokey;
            s = "string" == typeof l ? JSON.parse('{"' + l.replace(/\&/g, '","').replace(/\=/g, '":"') + '"}', function(t, e) {
                return "" === t ? e : decodeURIComponent(e);
            }) : "object" == typeof l ? i(l) : {};
            var p = v.getPageCode(location.pathname);
            t.url && (o.page_name = s.spmB || s["data-pagename"] || s.page_name || p || t.url || "-", 
            o.url = t.url || "-", o.page_name && s.spmC && (o["spm-cnt"] = [ encodeURIComponent(o.page_name), encodeURIComponent(s.spmC), encodeURIComponent(s.spmD) ].filter(function(t) {
                return !!t;
            }).join("."), delete s.spmC, delete s.spmD, delete s.spmB));
            var g = i(s);
            for (var f in g) "string" == typeof f && c.startsWith(f, "_") && (o[f] = g[f], delete s[f]);
            o = h.assign(o, a() || {}), o.is_auto = e.gokey && "string" == typeof e.gokey && e.gokey.match("is_auto") ? 1 : 0;
            var _ = d(e.logkey, h.assign(o, {
                cusp: s
            }));
            return _;
        } catch (t) {
            return console.warn("JSON parse failed", t), {};
        }
    }
    function r(t, e) {
        var n = u.getGlobalValue("aplus"), o = n.getMetaInfo("globalproperty"), r = {};
        r.r = t.arg1, o && (r.gp = o), r.is_auto = t.is_auto ? 1 : 0;
        var s = e, l = i(c.deleteInfo(s, [ "_anony_id", "_dev_id", "_session_id", "_user_id", "_user_nick", "_src_pos_id" ]));
        l.duration && (r.duration = l.duration, delete l.duration);
        var p = v.getPageCode(location.pathname);
        if (t.url && (r.page_name = l.spmB || l.page_name || document.body.dataset && document.body.dataset.pagename || p || t.url || "-", 
        r.url = t.url, r["spm-cnt"] = encodeURIComponent(r.page_name)), t.pre && (r.ref_url = t.pre || "-", 
        n._h5_share_enable && r.ref_url.length > 1)) {
            var f = r.ref_url.match(/(\w|-)+\.(\w|-)+\.(\w|-)+/);
            f && f.length > 0 && (r._um_referer_domain = f[0]);
        }
        return r = h.assign(r, a() || {}), d(g.PAGE_START, h.assign(r, {
            cusp: l
        }));
    }
    var i = n(41), s = n(42), u = n(2), c = n(43), l = n(45), p = n(46), g = n(3), f = n(47), d = n(48), _ = n(44), h = n(21), m = n(25), v = n(49);
    t.exports = function(t, e) {
        var n = u.getGlobalValue("aplus");
        if (!t || !e || c.checkEmptyObj(t) || c.checkEmptyObj(e)) return {};
        var a = {}, d = i(s(t)), h = n.getMetaInfo(g._ANONY_ID) || t.cna;
        h && (d.anony_id = h, d.id_tracking.anony_id = h);
        var v = n.getMetaInfo("_dev_id") || t.cna;
        if (v && (d.dev_id = v, d.id_tracking.dev_id = v), n._h5_share_enable) {
            var y = n.getMetaInfo("uuid");
            y && (d.id_tracking.ud = y);
            var b = n.getMetaInfo("openid");
            b && (d.id_tracking.openid = b);
            var E = n.getMetaInfo("unionid");
            E && (d.id_tracking.unionid = E);
            var I = n.getMetaInfo("anouymousopenid");
            I && (d.id_tracking.anonymousid = I);
            var P = n.getMetaInfo("alipayid");
            P && (d.id_tracking.alipay_id = P);
            var w = n.getMetaInfo("swanid");
            w && (d.id_tracking.anonymousid = w);
            var S = n.getMetaInfo(g.USER_PROFILE_KEY);
            S && (d.user_info = S);
            var x = m.get(g.IMPRINT);
            x && (d.imprint = x);
            var T = n.getMetaInfo(g.ID_TYPE) || "cnaid";
            d.id_type = T;
        }
        var A = null;
        A = "2001" === t.event_code ? r(t, e) : o(t, e), A && (a = {
            analytics: {
                ekvs: {
                    sessionid: [ i(A) ]
                }
            }
        });
        var C = n.getMetaInfo(g._USER_ID);
        C && a.analytics && (a.analytics.active_user = {
            puid: C,
            provider: n.getMetaInfo("_user_nick")
        }), a.header = c.assign(d, a.header, {
            ts: Date.now(),
            traceId: c.getRandomStr(10) + Date.now() + c.getRandomStr(9)
        });
        var M = l(a), k = f.stringfy(M);
        return _().i("event data: ", M), p.encode(k);
    };
}, function(t, e) {
    function n(t) {
        var e, a = Array.isArray(t) ? [] : {};
        if ("object" == typeof t) {
            if (JSON && JSON.parse) e = JSON.stringify(t), a = JSON.parse(e); else for (var o in t) a[o] = "object" == typeof t[o] ? n(t[o]) : t[o];
            return a;
        }
    }
    t.exports = n;
}, function(t, e) {
    t.exports = function(t) {
        var e = {};
        return e.sdk_type = t.sdk_type, e.appkey = t.appkey, e.sdk_version = t.sdk_version, 
        e.device_type = t.device_type, e.os = t.os, e.os_version = t.os_version, e.platform = t.platform, 
        e.pixel_ratio = t.pixel_ratio, e.resolution = t.resolution, e.language = t.language, 
        e.app_version = t.app_version, e.jsver = t.jsver, e.pre = t.pre, e.url = t.url, 
        e.debugId = t.track_debug_id, e.id_tracking = {}, e;
    };
}, function(t, e, n) {
    e.getRandomStr = function(t) {
        for (var e = "", n = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z" ], a = 0; a < Number(t); a++) {
            var o = Math.round(Math.random() * (n.length - 1));
            e += n[o];
        }
        return e;
    }, e.startsWith = function(t, e) {
        return !(!t || !e || 0 === e.length || e.length > t.length) && t.substr(0, e.length) === e;
    }, e.assign = function(t) {
        if (void 0 === t || null === t) throw new TypeError("Cannot convert undefined or null to object");
        for (var e = Object(t), n = 1; n < arguments.length; n++) {
            var a = arguments[n];
            if (a) for (var o in a) Object.prototype.hasOwnProperty.call(a, o) && (e[o] = a[o]);
        }
        return e;
    }, e.checkEvent = function(t, e) {
        var a = n(3), o = n(44);
        if (!t || "string" != typeof t) return o().e('please check trackEvent id. id should be "string" and not null'), 
        !1;
        var r = [ "id", "du" ], i = {};
        if (r.forEach(function(t) {
            i[t] = 1;
        }), i[t]) return o().e("eventId: " + r.join(",")), !1;
        if (t.length > a.MAX_EVENTID_LENGTH) return o().e("The maximum length of event id shall not exceed " + a.MAX_EVENTID_LENGTH), 
        !1;
        if (e && ("object" != typeof e || Array.isArray(e)) && "string" != typeof e) return o().e("please check trackEvent properties. properties should be string or object(not include Array)"), 
        !1;
        if ("object" == typeof e) {
            var s = 0;
            for (var u in e) if ({}.hasOwnProperty.call(e, u)) {
                if (u.length > a.MAX_PROPERTY_KEY_LENGTH) return o().e("The maximum length of property key shall not exceed " + a.MAX_PROPERTY_KEY_LENGTH), 
                !1;
                if (s >= a.MAX_PROPERTY_KEYS_COUNT) return o().e("The maximum count of properties shall not exceed " + a.MAX_PROPERTY_KEYS_COUNT), 
                !1;
                if (i[u]) return o().e("key: " + r.join(",")), !1;
                s += 1;
            }
        }
        return !0;
    };
    var a = n(27);
    e.deleteInfo = function(t, e) {
        return a(e, function(e) {
            delete t[e];
        }), t;
    }, e.checkEmptyObj = function(t) {
        return "object" != typeof t || 0 === Object.keys(t).length;
    }, e.DataType = {
        HALF_SESSION: "half_session",
        CLOSE_SESSION: "close_session",
        EKV: "ekv",
        ENTER_PAGE: "enter_page",
        LEAVE_PAGE: "leave_page"
    }, e.AccessType = {
        MOBILE_NETWORK_2G: "2g",
        MOBILE_NETWORK_3G: "3g",
        MOBILE_NETWORK_4G: "4g",
        MOBILE_NETWORK_NONE: "none"
    };
}, function(t, e) {
    var n = "[APLUS] -- ";
    t.exports = function() {
        function t() {
            this.setDebug = function(t) {
                a = t;
            }, this.d = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.debug.apply(console, arguments);
                } catch (t) {}
            }, this.i = function() {
                try {
                    if (a) try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.info.apply(console, arguments);
                    } catch (t) {}
                } catch (t) {}
            }, this.e = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.error.apply(console, arguments);
                } catch (t) {}
            }, this.w = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.warn.apply(console, arguments);
                } catch (t) {}
            }, this.v = function() {
                if (a) try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.log.apply(console, arguments);
                } catch (t) {}
            }, this.t = function() {
                if (a) try {
                    console.table.apply(console, arguments);
                } catch (t) {}
            }, this.tip = function() {
                try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.log.apply(console, arguments);
                } catch (t) {}
            }, this.tip_w = function(t) {
                try {
                    console.log("%c " + n + t, "background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;");
                } catch (t) {}
            }, this.err = function() {
                try {
                    "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.error.apply(console, arguments);
                } catch (t) {}
            }, this.repeat = function(t) {
                for (var e = t; e.length < 86; ) e += t;
                return e;
            };
        }
        var e = null, a = !1;
        return function() {
            return null === e && (e = new t()), e;
        };
    }();
}, function(t, e) {
    function n(t, e) {
        var n = a(t, e);
        return t && t.id_tracking && (n[e.id_tracking || "id_tracking"] = a(t.id_tracking, s)), 
        n;
    }
    function a(t, e) {
        var n = {};
        for (var a in t) e[a] ? n[e[a]] = t[a] : n[a] = t[a];
        return n;
    }
    function o(t, e) {
        var n = {};
        if (t) for (var a in t) t[a] && (n[e[a]] = t[a]);
        return n;
    }
    var r = {
        ekvs: "e",
        active_user: "active_user"
    }, i = {
        sdk_type: "sdt",
        device_model: "dm",
        language: "lang",
        device_type: "dt",
        os_version: "ov",
        appkey: "ak",
        sdk_version: "sv",
        resolution: "rl",
        testToken: "ttn",
        pixel_ratio: "pr",
        _id: "id",
        id_type: "it",
        id_tracking: "itr",
        imprint: "imp",
        debugId: "dk"
    }, s = {
        uuid: "ud",
        unionid: "und",
        openid: "od",
        anonymousid: "nd",
        alipay_id: "ad",
        device_id: "dd",
        userid: "puid"
    };
    t.exports = function(t) {
        return {
            h: n(t.header, i),
            a: o(t.analytics, r)
        };
    };
}, function(t, e) {
    var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = function(t) {
        for (var e = {}, n = 0, a = t.length; n < a; n++) e[t.charAt(n)] = n;
        return e;
    }(n), o = String.fromCharCode, r = function(t) {
        var e;
        return t.length < 2 ? (e = t.charCodeAt(0), e < 128 ? t : e < 2048 ? o(192 | e >>> 6) + o(128 | 63 & e) : o(224 | e >>> 12 & 15) + o(128 | e >>> 6 & 63) + o(128 | 63 & e)) : (e = 65536 + 1024 * (t.charCodeAt(0) - 55296) + (t.charCodeAt(1) - 56320), 
        o(240 | e >>> 18 & 7) + o(128 | e >>> 12 & 63) + o(128 | e >>> 6 & 63) + o(128 | 63 & e));
    }, i = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, s = function(t) {
        return t.replace(i, r);
    }, u = function(t) {
        var e = [ 0, 2, 1 ][t.length % 3], a = t.charCodeAt(0) << 16 | (t.length > 1 ? t.charCodeAt(1) : 0) << 8 | (t.length > 2 ? t.charCodeAt(2) : 0), o = [ n.charAt(a >>> 18), n.charAt(a >>> 12 & 63), e >= 2 ? "=" : n.charAt(a >>> 6 & 63), e >= 1 ? "=" : n.charAt(63 & a) ];
        return o.join("");
    }, c = function(t) {
        return t.replace(/[\s\S]{1,3}/g, u);
    }, l = function(t) {
        return c(s(t));
    }, p = function(t, e) {
        return e ? l(String(t)).replace(/[+\/]/g, function(t) {
            return "+" == t ? "-" : "_";
        }).replace(/\=/g, "") : l(String(t));
    }, g = new RegExp([ "[-][-]", "[-][-]{2}", "[-][-]{3}" ].join("|"), "g"), f = function(t) {
        switch (t.length) {
          case 4:
            var e = (7 & t.charCodeAt(0)) << 18 | (63 & t.charCodeAt(1)) << 12 | (63 & t.charCodeAt(2)) << 6 | 63 & t.charCodeAt(3), n = e - 65536;
            return o((n >>> 10) + 55296) + o((1023 & n) + 56320);

          case 3:
            return o((15 & t.charCodeAt(0)) << 12 | (63 & t.charCodeAt(1)) << 6 | 63 & t.charCodeAt(2));

          default:
            return o((31 & t.charCodeAt(0)) << 6 | 63 & t.charCodeAt(1));
        }
    }, d = function(t) {
        return t.replace(g, f);
    }, _ = function(t) {
        var e = t.length, n = e % 4, r = (e > 0 ? a[t.charAt(0)] << 18 : 0) | (e > 1 ? a[t.charAt(1)] << 12 : 0) | (e > 2 ? a[t.charAt(2)] << 6 : 0) | (e > 3 ? a[t.charAt(3)] : 0), i = [ o(r >>> 16), o(r >>> 8 & 255), o(255 & r) ];
        return i.length -= [ 0, 0, 2, 1 ][n], i.join("");
    }, h = function(t) {
        return t.replace(/[\s\S]{1,4}/g, _);
    }, m = function(t) {
        return d(h(t));
    }, v = function(t) {
        return m(String(t).replace(/[-_]/g, function(t) {
            return "-" == t ? "+" : "/";
        }).replace(/[^A-Za-z0-9\+\/]/g, ""));
    };
    e.encode = p, e.decode = v;
}, function(t, e) {
    e.stringfy = function(t) {
        if (t) try {
            return JSON.stringify(t);
        } catch (t) {}
        return "";
    }, e.parse = function(t) {
        if (t) try {
            return JSON.parse(t);
        } catch (t) {}
        return null;
    }, e.parseToArray = function(t) {
        if (t) try {
            return JSON.parse(t);
        } catch (t) {}
        return [];
    };
}, function(t, e, n) {
    var a = n(2);
    t.exports = function(t, e) {
        if ("string" != typeof t) return null;
        var n = Object.create(null);
        n.id = t, e && e.ts || (n.ts = Date.now());
        var o = typeof e;
        if ("object" === o) for (var r in e) ({}).hasOwnProperty.call(e, r) && (n[r] = e[r]);
        var i = a.getGlobalValue("aplus"), s = i.getMetaInfo("globalproperty");
        return s && (n.gp = s), n;
    };
}, function(t, e, n) {
    function a(t, e) {
        if (!t) return "";
        var n = [];
        for (var a in e) n.push(a + "=" + e[a]);
        var o = n.join("&");
        return o ? t + "?" + o : t;
    }
    var o = n(2), r = "", i = {};
    e.getCurrentPagePath = function() {
        return r;
    }, e.setCurrentPath = function(t) {
        t && (r = t);
    }, e.getPageQuery = function(t) {
        if (t) return i[t];
    }, e.setPageQuery = function(t, e) {
        t && (i[t] = e);
    }, e.getFullPath = function(t) {
        return a(r, i[t]);
    }, e.getPageName = function(t) {
        var e = o.getGlobalValue("aplus"), n = e.getMetaInfo("pageConfig"), a = t || r;
        try {
            if (n && "object" == typeof n) for (var i in n) {
                if (i === a) break;
                if (n[i] && n[i].regRule) {
                    a = n[i].regRule.test(t) ? i : a;
                    break;
                }
            }
        } catch (t) {}
        return n[a];
    }, e.getPageCode = function(t) {
        return (this.getPageName(t) || {}).pageName;
    }, e.getVTRealtimeCode = function() {
        if (r) {
            var t = i[r] || {}, e = /^\$vt_/, n = decodeURIComponent(t.scene);
            return n && e.test(n) && n.replace(e, "");
        }
    };
}, function(t, e, n) {
    "use strict";
    var a = n(3), o = {
        base: 1e4,
        timeout: 1e4
    }, r = function(t, e, n, r) {
        /^\/\//.test(t) && (t = a.HTTPS + t);
        var i = !0, s = r && r.timeout ? r.timeout : o.timeout;
        setTimeout(function() {
            i && (i = !1, n({
                timeout: s
            }));
        }, s), window.fetch(t).then(function(t) {
            return /application\/json/.test(t.headers.get("content-type")) ? t.json() : t.text();
        }).then(function(t) {
            i && (e(t), i = !1);
        }).catch(function(t) {
            i && n(t);
        });
    }, i = function(t, e, n, a) {
        var r, i = "GET", s = function() {
            r.responseText ? e(r.responseText) : n();
        }, u = window.XMLHttpRequest && "withCredentials" in new XMLHttpRequest();
        u ? (r = new XMLHttpRequest(), r.open(i, t, !0)) : (r = new window.XDomainRequest(), 
        r.open(i, t));
        var c = a && a.timeout ? a.timeout : o.timeout;
        r.timeout = c, r.onload = s, r.onerror = n, r.ontimeout = n, r.send();
    }, s = function(t, e, n, a) {
        window.fetch ? r(t, e, n, a) : i(t, e, n, a);
    }, u = function(t, e) {
        t = t || {}, t.method = (t.method || "POST").toUpperCase(), t.url = t.url || "", 
        t.data = t.data || null, t.success = t.success || function() {}, t.error = t.error || function() {};
        var n = new XMLHttpRequest(), a = [];
        for (var o in t.data) a.push(o + "=" + encodeURIComponent(t.data[o]));
        var r = a.join("&"), i = JSON.stringify(t.data || {});
        "POST" === t.method ? (n.open(t.method, t.url, !0), n.setRequestHeader("Content-Type", e || "application/json")) : "GET" === t.method && n.open(t.method, t.url + "?" + r, !0), 
        n.withCredentials = !0, n.timeout = 3e3, n.onreadystatechange = function() {
            if (4 == n.readyState && 200 == n.status) {
                var e = {};
                try {
                    e = JSON.parse(n.responseText);
                } catch (t) {}
                t.success(e);
            } else 4 == n.readyState && t.error(n.staus);
        }, "POST" === t.method ? n.send(i) : n.send();
    };
    e.request = s, e.request4um = u;
}, function(t, e, n) {
    "use strict";
    var a = n(27);
    t.exports = function() {
        return {
            getLogConfig: function() {
                var t = {}, e = this.options.config.plugins;
                for (var n in e) t[n] = {
                    plugins: e[n],
                    context: {}
                }, a(e[n], function(e) {
                    t[n].context[e.name] = e.config || {};
                });
                return t;
            },
            run: function() {
                this.options.context.logConfig = this.getLogConfig(), this.options.context.logConfig.pageLoadTime = this.options.context.PAGE_LOAD_TIME;
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(53), o = n(23), r = n(56), i = n(57), s = n(2), u = n(21);
    t.exports = function() {
        var t = n(58);
        return {
            init: function(t) {
                this.options = t;
                var e = this.options.context.etag || {};
                this.cna = e.cna || a.getCookieCna("cna"), this.setTag(0), this.setStag(-1), this.setLsTag("-1"), 
                this.setEtag(this.cna || ""), this.requesting = !1, this.today = r.getFormatDate();
            },
            setLsTag: function(t) {
                this.lstag = t, this.options.context.etag.lstag = t;
            },
            setTag: function(t) {
                this.tag = t, this.options.context.etag.tag = t;
            },
            setStag: function(t) {
                this.stag = t, this.options.context.etag.stag = t;
            },
            setEtag: function(t) {
                this.etag = t, this.options.context.etag.cna = t, a.getCookieCna("cna") !== t && a.setCookieCna("cna", t, {
                    SameSite: "none"
                });
            },
            setLscnaStatus: function(t) {
                this.options.context.etag.lscnastatus = t;
            },
            run: function(e, n) {
                var a = this, r = s.getGlobalValue("aplus");
                if (a.cna) return void a.setTag(1);
                var c = null, l = r._$.meta_info["aplus-rhost-v"];
                if (l) {
                    this.options.context.etag.egUrl = l + "/eg.js";
                    var p = i.getUrl(this.options.context.etag || {});
                    a.requesting = !0;
                    var g = function() {
                        setTimeout(function() {
                            n();
                        }, 20), clearTimeout(c);
                    }, f = this.options.context.etag.unittest, d = f || t.loadScript;
                    d(p, function(t) {
                        var e, n;
                        if (t && "error" === t.type ? a.setStag(-3) : (e = s.getGoldlogVal("Etag"), e && a.setEtag(e), 
                        n = s.getGoldlogVal("stag"), "undefined" != typeof n && a.setStag(n)), a.requesting) {
                            var i = r.globalConfig || {};
                            if (2 === n || 4 === n) {
                                var u = o.getLsCna(i.ETAG_STORAGE_KEY);
                                u ? (a.setLsTag(1), a.setEtag(u)) : (a.setLsTag(0), o.setLsCna(i.ETAG_STORAGE_KEY, a.today, e));
                            }
                            g();
                        }
                    });
                    var _ = r.getMetaInfo("aplus-etag-timeout"), h = 200, m = h;
                    try {
                        m = parseInt(_), (u.isNaN(m) || m < 200) && (m = h);
                    } catch (t) {}
                    return c = setTimeout(function() {
                        a.requesting = !1, a.setStag(-2), n();
                    }, m), m;
                }
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    function a(t) {
        if (!document) return "";
        var e = document.cookie.match(new RegExp("(?:^|;)\\s*" + t + "=([^;]+)"));
        return e ? e[1] : "";
    }
    function o(t) {
        var e = new Date(), n = "";
        if ("session" === t.expires) ; else if (t.expires && ("number" == typeof t.expires || t.expires.toUTCString)) "number" == typeof t.expires ? e.setTime(e.getTime() + 24 * t.expires * 60 * 60 * 1e3) : e = t.expires, 
        n = "expires=" + e.toUTCString(); else {
            var a = 20;
            c.indexof([ "v.youku.com", "www.youku.com", "player.youku.com" ], location.hostname) > -1 && (a = 1), 
            e.setTime(e.getTime() + 365 * a * 24 * 60 * 60 * 1e3), n = "expires=" + e.toUTCString();
        }
        return n;
    }
    function r(t, e, n) {
        if (document) {
            n || (n = {}), e += ";" + (n.expires || o(n)), e += "; path=" + (n.path ? n.path : "/"), 
            e += "; domain=" + n.domain, document.cookie = t + "=" + e;
            var r = 0;
            try {
                var i = navigator.userAgent.match(/Chrome\/\d/);
                i && i[0] && (r = i[0].split("/")[1], r && (r = parseInt(r)));
            } catch (t) {}
            return n.SameSite && r >= 8 && (e += "; SameSite=" + n.SameSite, e += "; Secure", 
            document.cookie = t + "=" + e), a(t);
        }
    }
    function i(t, e, n) {
        try {
            if (!document) return "";
            if (n || (n = {}), n.domain) r(t, e, n); else for (var a = u.getDomains(), o = 0; o < a.length; ) n.domain = a[o], 
            r(t, e, n) ? o = a.length : o++;
        } catch (t) {}
    }
    var s = n(27), u = n(54), c = n(55);
    e.getCookie = a, e.trySetCookie = r, e.setCookie = i;
    var l = [ "tracknick", "thw", "cna" ];
    e.getData = function() {
        var t = {};
        if (s(l, function(e) {
            t[e] = a(e);
        }), location) {
            var e = location.hostname;
            t.cnaui = /\btanx\.com$/.test(e) ? a("cnaui") : "";
        }
        return t;
    }, e.getHng = function() {
        return encodeURIComponent(a("hng") || "");
    }, e.getCookieCna = function(t) {
        return a(t) || a("_" + t);
    }, e.setCookieCna = function(t, e, n) {
        for (var a = u.getDomains(), i = 0; i < a.length; ) if (n.domain = a[i], r(t, e, n)) i = a.length; else {
            if (i === a.length - 1) {
                var s = e + ";" + o(n);
                s += "; path=/", document.cookie = "_" + t + "=" + s;
            }
            i++;
        }
    };
}, function(t, e) {
    "use strict";
    e.getDomains = function() {
        var t = [];
        try {
            for (var e = location.hostname, n = e.split("."), a = 2; a <= n.length; ) t.push(n.slice(n.length - a).join(".")), 
            a++;
        } catch (t) {}
        return t;
    };
}, function(t, e) {
    "use strict";
    e.indexof = function(t, e) {
        var n = -1;
        try {
            n = t.indexOf(e);
        } catch (o) {
            for (var a = 0; a < t.length; a++) t[a] === e && (n = a);
        } finally {
            return n;
        }
    }, e.itemMatch = function(t, e) {
        var n = !1;
        try {
            if (!this.isArray(t)) return n;
            n = t.some(function(t) {
                return t && t.length > 0 && e.indexOf(t) !== -1;
            });
        } catch (o) {
            for (var a = 0; a < t.length; a++) if (e.indexOf(t[a]) !== -1) {
                n = !0;
                break;
            }
        }
        return n;
    }, e.isArray = function(t) {
        return Array.isArray ? Array.isArray(t) : /Array/.test(Object.prototype.toString.call(t));
    };
}, function(t, e) {
    "use strict";
    function n(t, e, n) {
        var a = "" + Math.abs(t), o = e - a.length, r = t >= 0;
        return (r ? n ? "+" : "" : "-") + Math.pow(10, Math.max(0, o)).toString().substr(1) + a;
    }
    e.getFormatDate = function(t) {
        var e = new Date();
        try {
            return [ e.getFullYear(), n(e.getMonth() + 1, 2, 0), n(e.getDate(), 2, 0) ].join(t || "");
        } catch (t) {
            return "";
        }
    };
}, function(t, e, n) {
    "use strict";
    var a = n(23);
    e.getUrl = function(t) {
        var e = a.getUrl(t && t.egUrl);
        if (0 !== e.indexOf("http")) {
            var n = "https:";
            /(\d+\.){3,}\d+/.test(e) && (n = "http:"), e = n + e;
        }
        return e;
    };
}, function(t, e, n) {
    "use strict";
    function a() {
        return i || (i = document.getElementById("beacon-aplus") || document.getElementById("tb-beacon-aplus")), 
        i;
    }
    function o(t) {
        var e = a(), n = s.tryToGetAttribute(e, "cspx");
        t && n && (t.nonce = n);
    }
    var r, i, s = n(28), u = n(3);
    e.getCurrentNode = a, e.addScript = function(t, e, n) {
        var i = "script", s = document.createElement(i);
        s.type = "text/javascript", s.async = !0;
        var c = a(), l = c && c.hasAttribute("crossorigin");
        l && (s.crossOrigin = "anonymous");
        var p = u.HTTPS === location.protocol ? e || t : t;
        0 === p.indexOf("//") && (p = u.HTTPS + p), s.src = p, n && (s.id = n), o(s);
        var g = document.getElementsByTagName(i)[0];
        r = r || document.getElementsByTagName("head")[0], g ? g.parentNode.insertBefore(s, g) : r && r.appendChild(s);
    }, e.loadScript = function(t, e) {
        function n(t) {
            a.onreadystatechange = a.onload = a.onerror = null, a = null, e(t);
        }
        var a = document.createElement("script");
        if (r = r || document.getElementsByTagName("head")[0], a.async = !0, "onload" in a) a.onload = n; else {
            var i = function() {
                /loaded|complete/.test(a.readyState) && n();
            };
            a.onreadystatechange = i, i();
        }
        a.onerror = function(t) {
            n(t);
        }, a.src = t, o(a), r.appendChild(a);
    }, e.isTouch = function() {
        return "ontouchend" in document.createElement("div");
    };
}, function(t, e, n) {
    "use strict";
    var a = n(2), o = n(3);
    t.exports = function() {
        return {
            getMetaInfo: function() {
                var t = a.getGoldlogVal("_$") || {}, e = t.meta_info;
                return e;
            },
            getAplusWaiting: function() {
                var t = this.getMetaInfo() || {};
                return t["aplus-waiting"];
            },
            run: function(t, e) {
                var n = this.options.config || {}, a = this.getAplusWaiting();
                if (a && n.is_auto) switch (a = this.getAplusWaiting() + "", this.options.context.when_to_sendpv = {
                    aplusWaiting: a
                }, a) {
                  case o._USER_ID:
                  case o._ANONY_ID:
                  case "MAN":
                    return "done";

                  case "1":
                    return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                        e();
                    }, 6e3), 6e3;

                  default:
                    var r = 1 * a;
                    if (r + "" != "NaN") return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                        e();
                    }, r), r;
                }
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(61), o = n(2), r = n(26), i = "POST", s = "GET";
    t.exports = function() {
        return {
            getMetaInfo: function() {
                var t = o.getGoldlogVal("_$") || {}, e = t.meta_info;
                return e;
            },
            getAplusMetaByKey: function(t) {
                var e = this.getMetaInfo() || {};
                return e[t];
            },
            getRhost: function() {
                var t = this.getAplusMetaByKey("aplus-rhost-v");
                return t;
            },
            getHjljHostUrl: function(t) {
                var e = /^\/\//.test(t) ? "" : "//", n = "/web_logs", a = e + t + n;
                return a;
            },
            getPvHostUrl: function(t) {
                var e = /^\/\//.test(t) ? "" : "//", n = /\/$/.test(t) ? "" : "/", o = "v.gif";
                return a.isMobile() && (o = "m.gif"), e + t + n + o;
            },
            getHostUrl: function(t) {
                var e = /^\/\//.test(t) ? "" : "//", n = "/web_logs", a = e + t + n;
                return a;
            },
            getChannel: function(t) {
                var e, n = this.getAplusMetaByKey("aplus-channel"), a = [ "WS", "WS-ONLY", s, i ];
                return a.indexOf(t) > -1 && (e = t), !e && a.indexOf(n) > -1 && (e = n), e;
            },
            run: function() {
                var t = o.getGlobalValue("aplus"), e = !!this.options.context.is_single;
                if (!e) {
                    var n = this.options.config.recordType, a = this.getRhost(n);
                    if (!a) return r.logger({
                        msg: "current request domain invalid, please check your aplus-rhost-v value inside metainfo!"
                    }), "done";
                    var u;
                    u = "PV" !== n || t._h5_share_enable ? this.getHjljHostUrl(a) : this.getPvHostUrl(a);
                    var c = this.options.config || {}, l = this.getChannel(c.method) || i;
                    l !== i || navigator && navigator.sendBeacon || (l = s), this.options.context.where_to_send.method = c.method, 
                    this.options.context.where_to_send.url = u;
                }
            }
        };
    };
}, function(t, e) {
    "use strict";
    e.isMobile = function() {
        var t = navigator ? navigator.userAgent : "", e = /AliApp|Yunos|cyclone/i.test(t), n = /iPhone|iPad|iPod/i.test(t), a = /Android/i.test(t), o = /Windows Phone/i.test(t) || /IEMobile/i.test(t) || /WPDesktop/i.test(t), r = /BlackBerry/i.test(t), i = /Opera Mini/i.test(t);
        return e || n || a || o || r || i;
    };
}, function(t, e, n) {
    "use strict";
    var a = n(53), o = n(26), r = n(63), i = n(21), s = n(61), u = n(2), c = n(3), l = n(65);
    t.exports = function() {
        return {
            getCommonParams: function() {
                var t = u.getGlobalValue("aplus"), e = this.options.context || {}, n = e.etag || {}, p = e.userdata || {}, g = u.getGoldlogVal("_$") || {}, f = this.options.config || {}, d = s.isMobile() ? "WAP" : "PC", _ = {
                    _dev_id: t.getMetaInfo("_dev_id"),
                    _anony_id: t.getMetaInfo(c._ANONY_ID),
                    _user_id: t.getMetaInfo(c._USER_ID),
                    _user_nick: t.getMetaInfo("_user_nick") || a.getCookie("tracknick"),
                    _session_id: t.getMetaInfo("_session_id")
                }, h = f.pageUrl || (location ? location.href : "-"), m = f.title || document && document.title, v = (t.globalConfig.isDecodeUrl ? "DC_" : "") + r.getLogId(h, m), y = t.getMetaInfo("appKey") || t.getMetaInfo("appId");
                y || o.logger({
                    msg: "please set appId in aplus metaInfo before sendPV!"
                });
                var b = i.assign({
                    appId: y,
                    cache: v,
                    cna: n.cna || a.getCookieCna("cna"),
                    etag: n,
                    pre: g.page_referrer || "-",
                    sdk_info: {
                        jsver: t.globalConfig.script_name,
                        lver: t.globalConfig.lver,
                        customSdkId: t.getMetaInfo("customSdkId") || "",
                        platformType: d.toLowerCase()
                    },
                    trackerEventCode: f.trackerEventCode,
                    title: m,
                    url: h,
                    client: t._aplus_client || {},
                    timeZone: l.getTimeZone(),
                    gokey: _,
                    gmkey: p.gmkey || "",
                    method: this.options.context.where_to_send.method
                }, _);
                return b;
            },
            getPvParams: function() {
                var t = this.getCommonParams(), e = u.getGlobalValue("aplus");
                return this.options.config.is_auto || (t.sdk_info.mansndlog = 1), i.assign(t, {
                    event_code: "2001",
                    logtype: "1",
                    logkey: s.isMobile() ? "/m.gif" : "/v.gif",
                    event_timestamp: e._$.send_pv_count > 0 ? new Date() : e.logConfig.pageLoadTime,
                    is_auto: this.options.config.is_auto
                });
            },
            getHjljParams: function() {
                var t = this.options.context || {}, e = t.userdata || {}, n = {
                    event_code: c.EVENT_ID_MAP[e.gmkey] || c.OTHER,
                    logtype: "2",
                    logkey: e.logkey,
                    event_timestamp: new Date()
                };
                return i.assign(this.getCommonParams(), n);
            },
            run: function() {
                var t = {};
                t = "PV" === this.options.config.recordType ? this.getPvParams() : this.getHjljParams(), 
                this.options.context.what_to_send.logdata = t;
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    function a(t, e, n) {
        return t ? o.hash(encodeURIComponent(t)).substr(0, e) : n;
    }
    var o = n(64), r = function(t) {
        function e(t) {
            var e = "0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ", n = "0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ";
            return 1 == t ? e.substr(Math.floor(60 * Math.random()), 1) : 2 == t ? n.substr(Math.floor(60 * Math.random()), 1) : "0";
        }
        for (var n, a = "", o = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", r = !1; a.length < t; ) n = o.substr(Math.floor(62 * Math.random()), 1), 
        !r && a.length <= 2 && ("g" == n.toLowerCase() || "l" == n.toLowerCase()) && (0 === a.length && "g" == n.toLowerCase() ? Math.random() < .5 && (n = e(1), 
        r = !0) : 1 == a.length && "l" == n.toLowerCase() && "g" == a.charAt(0).toLowerCase() && (n = e(2), 
        r = !0)), a += n;
        return a;
    };
    e.getLogId = function(t, e) {
        var n = r(8), o = n.substr(0, 4), i = n.substr(0, 6);
        return [ a(t, 4, o), a(e, 4, o), i ].join("");
    };
}, function(t, e) {
    "use strict";
    e.hash = function(t, e) {
        var n, a, o = 1315423911, r = e || o;
        for (n = t.length - 1; n >= 0; n--) a = t.charCodeAt(n), r ^= (r << 5) + a + (r >> 2);
        var i = (2147483647 & r).toString(16);
        return i;
    };
}, function(t, e) {
    e.getTimeZone = function() {
        var t = -new Date().getTimezoneOffset() / 60, e = "+";
        t < 0 && (e = "-");
        var n = Math.abs(parseInt(t)), a = Math.abs(parseInt(t) - t), o = "00";
        return a > 0 && (o = 60 * a), "GMT" + e + (n > 9 ? n : "0" + n) + ":" + o;
    };
}, function(t, e, n) {
    "use strict";
    var a = n(20), o = n(67), r = n(21), i = n(2);
    t.exports = function() {
        return {
            getUserdata: function() {
                var t = i.getGlobalValue("aplus"), e = this.options.config || {}, n = {};
                e && !e.is_auto && e.gokey && ("string" == typeof e.gokey ? n = a.param2obj(e.gokey) : "object" == typeof e.gokey && (n = e.gokey));
                var s = function(t) {
                    o(t) ? t.forEach(function(t) {
                        n = r.assign(n, t);
                    }) : n = r.assign(n, t);
                };
                s(t.getMetaInfo("aplus-globaldata")), s(t.getMetaInfo("aplus-cpvdata"));
                var u = this.options.context || {}, c = u.userdata || {};
                return s(c), n;
            },
            processLodashDollar: function() {
                var t = this.options.config || {}, e = i.getGoldlogVal("_$") || {};
                t && t.referrer && (e.page_referrer = t.referrer), i.setGoldlogVal("_$", e);
            },
            updatePre: function(t) {
                var e = i.getGoldlogVal("_$") || {};
                return e.page_referrer && (t.pre = e.page_referrer), t;
            },
            run: function() {
                var t = this.options.context.what_to_send.logdata, e = r.assign(this.getUserdata(), t.userdata || {});
                this.processLodashDollar(), t.gokey = r.assign(t.gokey, e), t = this.updatePre(t), 
                this.options.context.what_to_send.logdata = t, this.options.context.userdata = t.gokey;
            }
        };
    };
}, function(t, e) {
    "use strict";
    t.exports = function(t) {
        return Array.isArray ? Array.isArray(t) : /Array/.test(Object.prototype.toString.call(t));
    };
}, function(t, e, n) {
    "use strict";
    var a = n(69), o = n(70), r = n(2), i = n(22);
    t.exports = function() {
        return {
            getPageId: function() {
                var t = this.options.config || {}, e = this.options.context || {}, n = e.userdata || {};
                return t.page_id || t.pageid || t.pageId || n.page_id;
            },
            resetSpmB: function() {
                var t = r.getGlobalValue("aplus");
                if (t.spmAPI) {
                    var e = r.getGoldlogVal("_$") || {}, n = e.spm || {}, a = n.data.b;
                    if (a) {
                        var o = this.getPageId();
                        a = o ? a.split("/")[0] + "/" + o : a.split("/")[0], t.spmAPI && t.spmAPI.setB(a);
                        var i = n.spm_cnt.split(".");
                        i && i.length > 2 && (i[1] = a, n.spm_cnt = i.join("."));
                    }
                }
            },
            getExParamsInfo: function() {
                var t = a.getExParams();
                return this.options.context.what_to_send.logdata.exparams = t, o(t);
            },
            run: function() {
                this.resetSpmB();
                var t = this.options.context.what_to_send.logdata.gokey;
                t = i(this.getExParamsInfo(), t), this.options.context.what_to_send.logdata.gokey = t;
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    function a(t) {
        for (var e, n = t.split("&"), a = 0, o = n.length, r = []; a < o; a++) e = n[a].split("="), 
        r.push([ e.shift(), e.join("=") ]);
        return r;
    }
    function o(t, e) {
        var n = "aplus&sidx=aplusSidex&ckx=aplusCkx", a = t || n;
        try {
            if (e) {
                var o = u.param2obj(e), r = [ d.APLUS, "cna", d.SPM_CNT, d.SPM_URL, d.SPM_PRE, "logtype", "pre", "uidaplus", "asid", "sidx", "trid", "gokey" ];
                s(r, function(t) {
                    o.hasOwnProperty(t) && (f.logger({
                        msg: "Can not inject keywords: " + t
                    }), delete o[t]);
                }), delete o[""];
                var i = "";
                if (t) {
                    var l = t.match(/aplus&/).index, p = l > 0 ? u.param2obj(t.substring(0, l)) : {};
                    delete p[""], i = u.obj2param(c.assign(p, o)) + "&" + t.substring(l, t.length);
                } else i = u.obj2param(o) + "&" + n;
                return i;
            }
            return a;
        } catch (t) {
            return a;
        }
    }
    function r() {
        var t = aplus && aplus._$ ? aplus._$ : {}, e = t.meta_info || {};
        return e["aplus-exparams"] || "";
    }
    function i() {
        var t = l.getCurrentNode(), e = p.tryToGetAttribute(t, "exparams"), n = o(e, r()) || "";
        return n && n.replace(/&amp;/g, "&").replace(/\buser(i|I)d=/, "uidaplus=");
    }
    var s = n(27), u = n(20), c = n(21), l = n(58), p = n(28), g = n(55), f = n(26), d = n(3);
    e.mergeExparams = o, e.getExParams = i, e.getExparamsInfos = function(t, e) {
        var n = {}, o = t || [ "uidaplus", "pc_i", "pu_i" ], r = i() || "";
        r = r.replace(/&aplus&/, "&");
        for (var s = a(r) || [], u = function(t) {
            return g.indexof(o, t) > -1;
        }, c = 0; c < s.length; c++) {
            var l = s[c], p = l[0] || "", f = l[1] || "";
            p && f && ("EXPARAMS" === e || u(p)) && (n[p] = f);
        }
        return n;
    };
}, function(t, e, n) {
    var a = n(20);
    t.exports = function(t) {
        var e = {};
        try {
            var n = a.param2obj(t.replace(/&amp;/g, "&").replace(/\buser(i|I)d=/, "uidaplus=").replace(/&aplus&/, "&"));
            n.uidaplus && (e.uidaplus = n.uidaplus), e.pc_i = n.pc_i, e.pu_i = n.pu_i;
        } catch (t) {
            console && console.log(t);
        }
        return e;
    };
}, function(t, e, n) {
    "use strict";
    function a(t) {
        var e, n, a, o, i = [], s = {};
        for (e = t.length - 1; e >= 0; e--) n = t[e], a = n[0], a && a.indexOf(r.s_plain_obj) == -1 && s.hasOwnProperty(a) || (o = n[1], 
        ("aplus" == a || o) && (i.unshift([ a, o ]), s[a] = 1));
        return i;
    }
    function o(t) {
        var e, n, a, o, i = [], u = {
            logtype: !0,
            cache: !0,
            scr: !0,
            "spm-cnt": !0
        };
        for (e = t.length - 1; e >= 0; e--) if (n = t[e], a = n[0], o = n[1], !(s.isStartWith(a, r.s_plain_obj) && !s.isStartWith(a, r.mkPlainKeyForExparams()) || u[a])) if (s.isStartWith(a, r.mkPlainKeyForExparams())) {
            var c = r.param2arr(o);
            if ("object" == typeof c && c.length > 0) for (var l = c.length - 1; l >= 0; l--) {
                var p = c[l];
                p && p[1] && i.unshift([ p[0], p[1] ]);
            }
        } else i.unshift([ a, o ]);
        return i;
    }
    var r = n(72), i = n(55), s = n(21), u = n(2), c = n(53), l = n(16), p = n(3);
    t.exports = function() {
        return {
            keyIsAvailable: function(t) {
                var e = [ "functype", "funcId", "spm-cnt", "spm-url", "spm-pre", "_ish5", "_is_g2u", "_h5url", "cna", "isonepage", "lver", "jsver" ];
                return i.indexof(e, t) === -1;
            },
            valIsAvailable: function(t) {
                return "object" != typeof t && "function" != typeof t;
            },
            upUtData: function(t, e) {
                var n = this;
                if (t = t ? t : {}, e && "object" == typeof e) for (var a in e) {
                    var o = e[a];
                    a && n.valIsAvailable(o) && n.keyIsAvailable(a) && (t[a] = o);
                }
                return t;
            },
            getToUtData: function() {
                var t = u.getGoldlogVal("_$") || {}, e = u.getGlobalValue(p.APLUS), n = t.spm || {}, i = this.options.context || {}, s = i.what_to_send || {}, g = s.logdata || {}, f = g.sdk_info || {}, d = this.options.context.etag || {}, _ = o(a(g.exparams || []));
                _ = r.arr2obj(_);
                var h = i.userdata, m = location.href, v = {}, y = l.getParamFromUrl("scm", m) || "";
                y && (v.scm = y);
                var b = l.getParamFromUrl("pg1stepk", m) || "";
                b && (v.pg1stepk = b);
                var E = l.getParamFromUrl("point", m) || "";
                E && (v.issb = 1), f && f.mansndlog && (v.mansndlog = f.mansndlog), v = this.upUtData(v, _), 
                v = this.upUtData(v, g.gokey), v = this.upUtData(v, h), v.functype = "page", v.funcId = "2001", 
                e && e.globalConfig && e.globalConfig.isAli ? v.url = (location.protocol || "https:") + "//" + location.host + location.pathname : v.url = location.href, 
                v._ish5 = "1", v._h5url = m, v._toUT = 2, v._bridgeName = "WindVane", v._bridgeVersion = "3.0.4", 
                n.spm_cnt && (v[p.SPM_CNT] = n.spm_cnt || ""), n.spm_url && (v[p.SPM_URL] = n.spm_url || ""), 
                n.spm_pre && (v[p.SPM_PRE] = n.spm_pre || ""), v.cna = d.cna || c.getCookieCna("cna"), 
                v.lver = f.lver, v.jsver = f.jsver, v.pver = "1.0.0", v.isonepage = -1;
                var I = e.getMetaInfo("aplus-utparam");
                return I && (v["utparam-cnt"] = JSON.stringify(I)), v._is_g2u_ = 1, v._slog = 1, 
                v;
            },
            run: function() {
                var t = this.options.context || {}, e = t.what_to_send || {};
                e.pvdataToUt = this.getToUtData(), this.options.context.what_to_send = e;
            }
        };
    };
}, function(t, e) {
    "use strict";
    function n(t) {
        var e, n, o, r = [], i = t.length;
        for (o = 0; o < i; o++) e = t[o][0], n = t[o][1], r.push(0 === e.indexOf(a) ? n : e + "=" + encodeURIComponent(n));
        return r.join("&");
    }
    var a = "::-plain-::";
    e.mkPlainKey = function() {
        return a + Math.random();
    }, e.s_plain_obj = a, e.mkPlainKeyForExparams = function(t) {
        var e = t || a;
        return e + "exparams";
    }, e.arr2param = n, e.param2arr = function(t) {
        for (var e, n = t.split("&"), a = 0, o = n.length, r = []; a < o; a++) e = n[a].split("="), 
        r.push([ e.shift(), e.join("=") ]);
        return r;
    }, e.arr2obj = function(t) {
        var e, n, a, o = {}, r = t.length;
        for (a = 0; a < r; a++) e = t[a][0], n = t[a][1], o[e] = n;
        return o;
    }, e.jsonLikeStr2JSON = function(t) {
        if (!t || "string" != typeof t) return {};
        for (var e = t.replace(/['"{}]+/g, ""), n = e.split(","), a = [], o = 0; o < n.length; o++) a.push(n[o].split(":"));
        var r = this.arr2obj(a);
        return r;
    }, e.can2https = function(t) {
        if (0 === t.indexOf("//")) {
            var e = "https:";
            /(\d+\.){3,}\d+/.test(t) && (e = "http:"), t = e + t;
        }
        return t;
    }, e.checkEmptyObj = function(t) {
        return "object" != typeof t || 0 === Object.keys(t).length;
    };
}, function(t, e, n) {
    "use strict";
    var a = n(21), o = n(43), r = n(3), i = n(2);
    t.exports = function() {
        return {
            getToNativeData: function() {
                var t = i.getGlobalValue(r.APLUS), e = this.options.context || {}, n = a.cloneDeep(e.userdata) || {}, s = e.what_to_send || {}, u = s.logdata || {}, c = u.sdk_info || {}, l = this.options.context.etag || {}, p = {}, g = {}, f = {};
                return g.cna = l.cna, g.lver = c.lver, g.jsver = c.jsver, g.id = r.PAGE_START, g.ts = Date.now(), 
                g.r = u.arg1 || u.logkey || "-", g.is_h5 = "1", n.hasOwnProperty("autosend") ? g.is_auto = 1 : g.is_auto = 0, 
                f = a.cloneDeep(o.deleteInfo(n, [ "_anony_id", "_dev_id", "_session_id", "_src_pos_id", "_user_id", "_user_nick" ])), 
                f.duration && (g.duration = f.duration, delete f.duration), f.page_start && (g.page_start = f.page_start, 
                delete f.page_start), u.url && (g.page_name = t.getPageName() || f.spmB || f.page_name || u.url || "-", 
                g.url = u.url || "-", g["spm-cnt"] = encodeURIComponent(g.page_name)), u.pre && (g.ref_url = u.pre || "-"), 
                f.ts && delete f.ts, p.sdkArgs = a.cloneDeep(g), p.cusp = f, p;
            },
            run: function() {
                var t = this.options.context || {}, e = t.what_to_send || {};
                e.pvdataToUmNative = this.getToNativeData(), this.options.context.what_to_send = e;
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(2);
    t.exports = function() {
        return {
            run: function() {
                var t = a.getGoldlogVal("_$") || {}, e = this.options.context.can_to_sendpv || {}, n = t.send_pv_count || 0, o = this.options.config || {};
                return o.is_auto && n > 0 ? "done" : (e.flag = "YES", this.options.context.can_to_sendpv = e, 
                t.send_pv_count = ++n, void a.setGoldlogVal("_$", t));
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(76), o = n(2);
    t.exports = function() {
        return {
            run: function() {
                var t = o.getGlobalValue("aplus"), e = t._$ || {}, n = this.options.context || {};
                o.setGoldlogVal("pv_context", n);
                var r = t.spm_ab || [], i = r.join("."), s = e.send_pv_count, u = {
                    cna: n.etag.cna,
                    count: s,
                    spmab_pre: t.spmab_pre
                };
                a.doPubMsg([ "sendPV", "complete", i, u ]), a.doCachePubs([ "sendPV", "complete", i, u ]);
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(2), o = "function", r = function() {
        var t = a.getGlobalValue("aplus"), e = t.aplus_pubsub || {}, n = typeof e.publish === o;
        return n ? e : "";
    };
    e.doPubMsg = function(t) {
        var e = r();
        e && typeof e.publish === o && e.publish.apply(e, t);
    }, e.doCachePubs = function(t) {
        var e = r();
        e && typeof e.cachePubs === o && e.cachePubs.apply(e, t);
    }, e.doSubMsg = function(t, e) {
        var n = r();
        n && typeof n.subscribe === o && n.subscribe(t, e);
    };
}, function(t, e, n) {
    "use strict";
    var a = n(20), o = n(67), r = n(21), i = n(2);
    t.exports = function() {
        return {
            getUserData: function() {
                var t = i.getGlobalValue("aplus"), e = this.options.context || {}, n = e.userdata || {}, s = e.what_to_send.logdata.gokey;
                s = r.assign(s, t.getMetaInfo("aplus-globaldata")), s = r.assign(s, a.param2obj(n.gokey));
                var u = t.getMetaInfo("aplus-exinfo");
                u && (s = r.assign(s, a.param2obj(u)));
                var c = t.getMetaInfo("aplus-exdata");
                return o(c) ? c.forEach(function(t) {
                    s = r.assign(s, t);
                }) : s = r.assign(s, t.getMetaInfo("aplus-exdata")), s;
            },
            run: function() {
                this.options.context.what_to_send.logdata.gokey = this.getUserData();
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(69), o = n(70), r = n(21);
    t.exports = function() {
        return {
            getExParamsInfo: function() {
                var t = a.getExParams();
                return this.options.context.what_to_send.logdata.exparams = t, o(t);
            },
            run: function() {
                var t = this.options.context.what_to_send.logdata.gokey;
                t = r.assign(this.getExParamsInfo(), t), this.options.context.what_to_send.logdata.gokey = t;
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(2), o = n(3);
    t.exports = function() {
        return {
            getToUtData: function() {
                var t = a.getGoldlogVal("_$") || {}, e = a.getGlobalValue(o.APLUS), n = t.spm || {}, r = this.options.context || {}, i = r.userdata || {}, s = r.etag || {}, u = r.what_to_send || {}, c = u.logdata || {}, l = c.sdk_info || {}, p = c.gokey || {}, g = [], f = "";
                for (var d in p) if ([ o.SPM_CNT, o.SPM_URL, o.SPM_PRE ].indexOf(d) === -1) {
                    var _ = p[d];
                    "undefined" !== p[d] && void 0 !== p[d] || (_ = ""), g.push(d + "=" + _);
                }
                g.length > 0 && (f = g.join("&"));
                var h = location.href, m = {};
                m.functype = "ctrl", m.funcId = c.event_code, e && e.globalConfig && e.globalConfig.isAli ? m.url = (location.protocol || "https:") + "//" + location.host + location.pathname : m.url = location.href, 
                m.logkey = c.logkey, m.gokey = encodeURIComponent(f), m.gmkey = c.gmkey, m._ish5 = "1", 
                m._h5url = h, m._is_g2u_ = 1, m._slog = 1, m._toUT = 2, m._bridgeName = "WindVane", 
                m._bridgeVersion = "3.0.4", n.spm_cnt && (m[o.SPM_CNT] = n.spm_cnt || ""), n.spm_url && (m[o.SPM_URL] = n.spm_url || ""), 
                n.spm_pre && (m[o.SPM_PRE] = n.spm_pre || ""), m.cna = s.cna, m.lver = l.lver, m.jsver = l.jsver, 
                i.hasOwnProperty("autosend") && (m.autosend = i.autosend);
                var v = e.getMetaInfo("aplus-utparam");
                return v && (m["utparam-cnt"] = JSON.stringify(v)), m;
            },
            run: function() {
                var t = this.options.context || {}, e = t.what_to_send || {};
                e.pvdataToUt = this.getToUtData(), this.options.context.what_to_send = e;
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(21), o = n(43), r = n(72), i = n(2), s = n(3);
    t.exports = function() {
        return {
            getToNativeData: function() {
                var t = i.getGlobalValue(s.APLUS), e = this.options.context || {}, n = e.userdata || {}, u = e.etag || {}, c = e.what_to_send || {}, l = c.logdata || {}, p = l.sdk_info || {}, g = {}, f = {}, d = {};
                f.cna = u.cna, f.lver = p.lver, f.jsver = p.jsver, f.id = n.logkey || "-", f.ts = Date.now(), 
                f.is_h5 = "1", f.funcId = l.event_code, n.gokey && "string" == typeof n.gokey && n.gokey.match("is_auto") ? f.is_auto = 1 : f.is_auto = 0, 
                d = "string" == typeof n.gokey ? r.arr2obj(r.param2arr(n.gokey || "")) : a.cloneDeep(o.deleteInfo(n.gokey, [ "_anony_id", "_dev_id", "_session_id", "_src_pos_id", "_user_id", "_user_nick" ])), 
                l.url && (f.page_name = t.getPageName() || d.spmB || d["data-pagename"] || d.page_name || l.url || "-", 
                f.url = l.url || "-", f.page_name && d.spmC && (f["spm-cnt"] = [ encodeURIComponent(f.page_name), encodeURIComponent(d.spmC), encodeURIComponent(d.spmD) ].filter(function(t) {
                    return !!t;
                }).join("."), delete d.spmC, delete d.spmB, delete d.spmD)), d.ts && delete d.ts;
                var _ = a.cloneDeep(d);
                for (var h in _) "string" == typeof h && o.startsWith(h, "_") && (f[h] = _[h], delete d[h]);
                return g.sdkArgs = a.cloneDeep(f), g.cusp = d, g;
            },
            run: function() {
                var t = this.options.context || {}, e = t.what_to_send || {};
                e.hjljdataToUmNative = this.getToNativeData(), this.options.context.what_to_send = e;
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    t.exports = function() {
        return {
            run: function() {
                n(82)(this.options.context.logConfig);
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(76), o = n(2);
    t.exports = function(t) {
        var e = o.getGlobalValue("aplus");
        if (!e._aplus_api) {
            e._aplus_api = {
                status: "complete"
            };
            var r = n(83).run.create({
                logConfig: t
            });
            for (var i in r) e[i] = r[i];
            n(88).makePVId();
            var s = [ "aplusReady", "complete" ];
            a.doPubMsg(s), a.doCachePubs(s);
        }
    };
}, function(t, e, n) {
    "use strict";
    function a() {
        var t = 5e3;
        try {
            var e = p.getGlobalValue("aplus"), n = e.getMetaInfo("aplus-mmstat-timeout");
            if (n) {
                var a = parseInt(n);
                a >= 1e3 && a <= 1e4 && (t = a);
            }
        } catch (t) {}
        return t;
    }
    var o = document, r = n(11), i = n(53), s = n(32), u = n(26), c = n(76), l = n(21), p = n(2), g = n(10), f = n(3), d = n(39), _ = n(84), h = n(55), m = n(19), v = n(87), y = [], b = [], E = [], I = [], P = function() {};
    e.run = r.extend({
        beforeSendPV: function(t) {
            y.push(t);
        },
        send: function(t, e, n) {
            var o, r = p.getGlobalValue("aplus");
            if (0 === t.indexOf("//")) {
                var i = f.HTTPS;
                /(\d+\.){3,}\d+/.test(t) && (i = "http:"), t = i + t;
            }
            return o = "POST" === n && navigator && navigator.sendBeacon ? v.postData(t, e) : v.sendImg(t + "?" + e, a()), 
            r.req = o, o;
        },
        sendPV: function(t, e) {
            if (t = t || {}, l.any(y, function(e) {
                return e(n, t) === !1;
            })) return !1;
            var n = p.getGlobalValue("aplus"), a = n.getMetaInfo(f.APLUS_SKIP_APV_RULES) || [];
            if (!h.itemMatch(a, location.href) || !t.is_auto) {
                var o = new _();
                t.recordType = "PV";
                var r = n.globalConfig.isUM, i = n.globalConfig.isAli;
                (i || r) && (t.method = "POST");
                var s = n.logConfig.pv;
                return o.run({
                    plugins: s.plugins,
                    context: l.cloneDeep(s.context)
                }, {
                    config: t,
                    userdata: e,
                    pubsubType: "pv",
                    messageFnQueue: b,
                    middlewareMessageKey: "mw_change_pv"
                }), !0;
            }
        },
        pageEnter: function(t) {
            d.pushIntoGoldlogQueue(f.PUBLISH, [ f.PAGE_ENTER, t ]), d.pushIntoGoldlogQueue(f.CACHE_PUBS, [ f.PAGE_ENTER, t ]);
        },
        getParam: function(t) {
            var e = window.WindVane || {}, n = e && "function" == typeof e.getParam ? e.getParam(t) : "";
            return n;
        },
        beforeRecord: function(t) {
            E.push(t);
        },
        afterRecord: function(t) {
            I.push(t);
        },
        record: function(t, e, n, a, o) {
            var r = p.getGlobalValue("aplus"), i = r.globalConfig.isAli, s = r.globalConfig.isUM;
            if (t && 0 !== t.indexOf("/") && i && (t = "/" + t), l.any(E, function(t) {
                return t(r) === !1;
            })) return !1;
            var u = new _(), c = r.logConfig.hjlj;
            return u.run({
                plugins: c.plugins,
                context: l.cloneDeep(c.context)
            }, {
                config: {
                    recordType: "COMMON_HJLJ",
                    method: s ? a || "POST" : a
                },
                userdata: {
                    logkey: t,
                    gmkey: e,
                    gokey: n || {}
                },
                pubsubType: "hjlj",
                messageFnQueue: I,
                middlewareMessageKey: "mw_change_hjlj"
            }, function() {
                g(o) && o();
            }), !0;
        },
        recordUdata: function(t, e, n, a, o) {
            var r = p.getGlobalValue("aplus"), i = new _(), s = r.logConfig.hjlj, u = r.globalConfig.isAli;
            return i.run({
                plugins: s.plugins,
                context: l.cloneDeep(s.context)
            }, {
                config: {
                    recordType: "DATACLICK_HJLJ",
                    method: u ? a : a || "POST"
                },
                userdata: {
                    logkey: t,
                    gmkey: e,
                    gokey: n || {}
                },
                pubsubType: "hjlj",
                messageFnQueue: I,
                middlewareMessageKey: "mw_change_hjlj"
            }, function() {
                g(o) && o();
            }), !0;
        },
        setPageSPM: function(t, e, n) {
            var a = p.getGlobalValue("aplus"), o = a.getMetaInfo("aplus-spm-fixed"), r = "function" == typeof n ? n : function() {};
            a.spm_ab = a.spm_ab || [];
            var i = l.cloneDeep(a.spm_ab);
            t && (a.spm_ab[0] = "" + t, a._$.spm.data.a = "" + t), e && (a.spm_ab[1] = "" + e, 
            a._$.spm.data.b = "" + e);
            var s = m.qGet();
            if (a.spmAPI && a.spmAPI.spaInit(a, s, i), "1" !== o) {
                var u = i.join(".");
                a.spmab_pre = u;
            }
            var g = [ "setPageSPM", {
                spmab_pre: a.spmab_pre,
                spmab: a.spm_ab.join(".")
            } ];
            c.doPubMsg(g), c.doCachePubs(g), r();
        },
        setMetaInfo: function(t, e, n) {
            var a, o, r = "OVERWRITE", i = r;
            if ("object" == typeof t ? (a = t.metaName, o = t.metaValue, i = t.mode || r) : (a = t, 
            o = e), i !== r) return this.appendMetaInfo(a, o);
            if (m.setMetaInfo(a, o, n)) {
                var s = p.getGoldlogVal("_$") || {};
                s.meta_info = m.qGet();
                var u = p.setGoldlogVal("_$", s), l = [ "setMetaInfo", a, o, n ];
                return c.doPubMsg(l), c.doCachePubs(l), u;
            }
        },
        appendMetaInfo: m.appendMetaInfo,
        updatePageProperties: function(t) {
            var e = p.getGlobalValue("aplus");
            t && "object" == typeof t ? (t._page && (t.pageName = t._page, e.setMetaInfo("aplus-pagename", t.pageName), 
            delete t._page), e.appendMetaInfo("aplus-cpvdata", t)) : u.logger({
                msg: "warning: typeof updatePageProperties's params must be object"
            });
        },
        updateNextPageProperties: function(t) {
            var e = p.getGlobalValue("aplus");
            "object" == typeof t ? e.appendMetaInfo("aplus-nextpage-properties", t) : u.logger({
                msg: "warning: typeof updateNextPageProperties's params must be object"
            });
        },
        getMetaInfo: function(t) {
            return m.getMetaInfo(t);
        },
        on: s.on,
        cloneDeep: l.cloneDeep,
        setCookie: i.setCookie,
        getCookie: i.getCookie,
        pageAppear: P,
        pageDisappear: P,
        updatePageUtparam: P,
        updateNextPageUtparam: P,
        updateSessionProperties: function(t) {
            var e = p.getGlobalValue("aplus");
            "object" == typeof t && e.setMetaInfo("_session_args", t);
        },
        setPageName: function(t) {
            if (!t || "string" != typeof t) return void u.logger({
                msg: "setPageName failed:  pagename=" + t
            });
            var e = o.querySelector("body");
            try {
                e.setAttribute("data-pagename", t);
            } catch (t) {
                u.logger({
                    msg: "setPageName failed:  err=" + t
                });
            }
        },
        getPageName: function() {
            return window.document.body && window.document.body.dataset && window.document.body.dataset.pagename ? window.document.body.dataset.pagename : "";
        },
        getElementSPM: function(t) {
            if (t && t.dataset) return t.getAttribute("data-spm-anchor-id");
        }
    });
}, function(t, e, n) {
    "use strict";
    var a = n(27), o = n(2), r = n(10), i = n(76), s = n(26), u = n(3), c = n(85), l = n(86), p = function() {};
    p.prototype.run = function(t, e, n) {
        var p = new l();
        p.init({
            middleware: [],
            config: e.config,
            plugins: t.plugins
        });
        var g = p.run(), f = r(t.context) ? new t.context() : t.context;
        f.userdata = e.userdata, f.logger = s.logger;
        var d = {
            context: f,
            pubsub: o.getGoldlogVal("aplus_pubsub"),
            pubsubType: e && e.pubsubType
        }, _ = new c();
        _.create(d), _.wrap(g, function() {
            d.context.status = u.COMPLETE, e && (e.middlewareMessageKey && i.doPubMsg([ e.middlewareMessageKey, d.context ]), 
            e.messageFnQueue && a(e.messageFnQueue, function(e) {
                e(o.getGlobalValue(u.APLUS), t);
            })), r(n) && n(d.context);
        })();
    }, t.exports = p;
}, function(t, e, n) {
    "use strict";
    function a() {}
    var o = n(10), r = n(55), i = n(26);
    a.prototype.create = function(t) {
        for (var e in t) "undefined" == typeof this[e] && (this[e] = t[e]);
        return this;
    }, a.prototype.calledList = [], a.prototype.setCalledList = function(t) {
        r.indexof(this.calledList, t) === -1 && this.calledList.push(t);
    }, a.prototype.resetCalledList = function() {
        this.calledList = [];
    }, a.prototype.wrap = function(t, e) {
        var n = this, a = this.context || {}, s = a.compose || {}, u = s.maxTimeout || 1e4;
        return function(a) {
            var s, c = t.length, l = 0, p = 0, g = function(f, d) {
                if (l === c) return a = "done", n.resetCalledList(), o(e) && d !== a && e.call(n, a), 
                void clearTimeout(s);
                if (r.indexof(n.calledList, l) === -1) {
                    if (n.setCalledList && n.setCalledList(l), !(t && t[l] && o(t[l][0]))) return;
                    try {
                        a = t[l][0].call(n, a, function() {
                            l++, p = 1, g(l);
                        });
                    } catch (t) {
                        i.logger({
                            msg: t
                        });
                    }
                }
                var _ = "number" == typeof a;
                if ("pause" === a || _) {
                    p = 0;
                    var h = _ ? a : u, m = t[l] ? t[l][1] : "";
                    s = setTimeout(function() {
                        0 === p && (i.logger({
                            msg: "jump the middleware about " + m + ", because waiting timeout maxTimeout = " + h
                        }), a = null, l++, g(l));
                    }, h);
                } else "done" === a ? (l = c, g(l, a)) : (l++, g(l));
            };
            return n.calledList && n.calledList.length > 0 && n.resetCalledList(), g(l);
        };
    }, t.exports = a;
}, function(t, e, n) {
    "use strict";
    var a = n(22), o = n(26);
    t.exports = function() {
        return {
            init: function(t) {
                this.opts = t, t && "object" == typeof t.middleware && t.middleware.length > 0 ? this.middleware = t.middleware : this.middleware = [], 
                this.plugins_name = [];
            },
            pubsubInfo: function(t, e) {
                try {
                    var n = t.pubsub;
                    n && n.publish("plugins_change_" + t.pubsubType, e);
                } catch (t) {
                    o.logger({
                        msg: t
                    });
                }
            },
            run: function(t) {
                t || (t = 0);
                var e = this, n = this.middleware, o = this.opts || {}, r = o.plugins;
                if (r && "object" == typeof r && r.length > 0) {
                    var i = r[t];
                    if (this.plugins_name.push(i.name), n.push([ function(t, n) {
                        e.pubsubInfo(this, i);
                        var r = new i.path();
                        return r.init || (r.init = function(t) {
                            this.options = t;
                        }), r.init({
                            context: this.context,
                            config: a(i.config || {}, o.config)
                        }), r.run(t, function(t) {
                            setTimeout(function() {
                                n(i, t);
                            }, 1);
                        });
                    }, i.name ]), t++, r[t]) return this.run(t);
                }
                return n;
            }
        };
    };
}, function(t, e) {
    "use strict";
    e.sendImg = function(t, e) {
        var n = window || {}, a = new Image(), o = "_img_" + Math.random();
        n[o] = a;
        var r = function() {
            if (n[o]) try {
                delete n[o];
            } catch (t) {
                n[o] = void 0;
            }
        };
        return a.onload = function() {
            r();
        }, a.onerror = function() {
            r();
        }, setTimeout(function() {
            window[o] && (window[o].src = "", r());
        }, e || 5e3), a.src = t, a = null, t;
    }, e.postData = function(t, e) {
        return navigator.sendBeacon(t, e), t;
    };
}, function(t, e, n) {
    "use strict";
    function a() {
        var t, e = r.getGlobalValue("aplus");
        try {
            var n = e.getMetaInfo("aplus-disable-pvid") + "";
            "true" === n ? t = !0 : "false" === n && (t = !1);
        } catch (t) {}
        return t;
    }
    var o = n(76), r = n(2), i = n(63);
    e.isDisablePvid = a, e.makePVId = function() {
        var t = r.getGlobalValue("aplus"), e = t.pvid, n = location && location.href, s = document && document.title;
        t.pvid = i.getLogId(n, s);
        var u = [ "pvidChange", {
            pre_pvid: e,
            pvid: t.pvid
        } ];
        return o.doPubMsg(u), o.doCachePubs(u), a() ? "" : t.pvid;
    }, e.getPvId = function() {
        var t = r.getGlobalValue("aplus");
        return a() ? "" : t.pvid;
    };
}, function(t, e, n) {
    "use strict";
    var a = n(90), o = n(2);
    t.exports = function() {
        return {
            run: function() {
                var t = this.options.context.aplus_config, e = t.globalConfig.APLUS_QUEUE, n = o.getContext(), r = n[e] || [], i = a.getFormatQueue(r, "metaQueue");
                n[e] = i.queue, a.processGoldlogQueue(i.formatQueue, this.options.config);
            }
        };
    };
}, function(t, e, n) {
    function a() {
        var t = u.getGoldlogVal("_$") || {}, e = t.meta_info;
        return e;
    }
    function o() {
        var t = a() || {}, e = t.uaid + "";
        return "1" !== e || t._anony_id ? t._hold || t["aplus-waiting"] : "BLOCK";
    }
    function r(t) {
        var e = o(), n = a() || {}, r = !0, i = t.arguments || [], s = i[0], u = i[1], c = "START";
        if ("_hold" === s && u === c) return c;
        if ("_anony_id" === s && u) return c;
        if (t && /sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo$/.test(t.action)) switch (e) {
          case "BLOCK":
            n[e] || (h.push(t), r = !1);
        }
        return r;
    }
    function i(t) {
        f(d, t), f(_, t), f(h, t);
    }
    function s(t, e) {
        return e && g.openAPIs.indexOf(t) > -1 && (t = "_" + t), t;
    }
    var u = n(2), c = n(55), l = n(10), p = n(26), g = n(3), f = function(t, e) {
        function n() {
            if (t && c.isArray(t) && t.length) {
                for (var n = v(t).queue, a = {}, o = []; a = n.shift(); ) m(a, e, function(t) {
                    o.push(t);
                });
                o.length > 0 && setTimeout(function() {
                    for (;a = o.shift(); ) m(a, e);
                }, 100);
            }
        }
        try {
            n();
        } catch (t) {
            p.logger({
                msg: t
            });
        }
    };
    e.processGoldlogQueue = f;
    var d = [], _ = [], h = [];
    e.subscribeAndProcessQueue = function(t, e) {
        var n = u.getGlobalValue(t);
        n.push({
            action: g.SUBSCRIBE,
            arguments: [ g.SET_META_INFO, function(t, n) {
                t === g._USER_ID && n ? f(d, e) : t === g._ANONY_ID && n ? f(_, e) : "_hold" === t && "START" === n && i(e);
            } ]
        });
    };
    var m = function(t, e, n) {
        var a = !!e.isOpenApi, o = t ? t.action : "", g = t ? t.arguments : "", f = r(t);
        if (f) {
            var d = u.getContext();
            try {
                if (o && g && c.isArray(g)) {
                    var _, h = o.split("."), m = d, v = d;
                    if (3 === h.length) m = d[h[0]][h[1]] || {}, _ = s(h[2], a), v = m[_] ? m[_] : ""; else for (;h.length; ) if (_ = s(h.shift(), a), 
                    v = m = m[_], !m) return void (l(n) && n(t));
                    l(v) && v.apply(m, g), "START" === f && i(e);
                }
            } catch (t) {
                p.logger({
                    msg: t
                });
            }
        }
    };
    e.processTask = m;
    var v = function(t, e) {
        for (var n = {
            subscribeMwChangeQueue: [],
            subscribeMetaQueue: [],
            subscribeQueue: [],
            metaQueue: [],
            othersQueue: []
        }, a = [], o = {}; o = t.shift(); ) try {
            var r = o.action, i = o.arguments[0];
            /subscribe/.test(r) ? "setMetaInfo" === i ? n.subscribeMetaQueue.push(o) : i === g.MW_CHANGE_PV || i === g.MW_CHANGE_HJLJ ? n.subscribeMwChangeQueue.push(o) : n.subscribeQueue.push(o) : /MetaInfo/.test(r) ? n.metaQueue.push(o) : n.othersQueue.push(o);
        } catch (t) {
            p.logger({
                msg: t
            }), n.othersQueue.push(o);
        }
        var s;
        return e && n[e] && (s = n[e], n[e] = []), a = n.subscribeMwChangeQueue.concat(n.metaQueue), 
        a = a.concat(n.subscribeQueue), a = a.concat(n.subscribeMetaQueue, n.othersQueue), 
        {
            queue: a,
            formatQueue: s
        };
    };
    e.getFormatQueue = v;
}, function(t, e, n) {
    "use strict";
    var a = n(23), o = n(58), r = n(57), i = n(25);
    t.exports = function() {
        return {
            run: function() {
                var t = this, e = this.options.context.aplus_config;
                if (i.test()) {
                    var n = a.getLsCna(e.globalConfig.ETAG_STORAGE_KEY, t.today);
                    n || setTimeout(function() {
                        var n = aplus._$.meta_info["aplus-rhost-v"];
                        if (n) {
                            t.options.context.etag.egUrl = n + "/eg.js";
                            var i = r.getUrl(t.options.context.etag || {});
                            o.loadScript(i, function(n) {
                                n && "error" !== n.type && a.setLsCna(e.globalConfig.ETAG_STORAGE_KEY, t.today, aplus.Etag);
                            });
                        }
                    }, 1e3);
                }
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(11), o = n(2), r = n(90), i = a.extend({
        push: function(t) {
            this.length++, r.processTask(t, this.opts);
        }
    });
    t.exports = function() {
        return {
            processAplusQueue: function(t) {
                var e = this.options.config || {}, n = o.getGlobalValue(t);
                r.processGoldlogQueue(n, e), o.setGlobalValue(t, i.create({
                    opts: e,
                    startLength: n.length,
                    length: 0
                }));
            },
            run: function() {
                var t = this.options.context.aplus_config, e = t.globalConfig.APLUS_QUEUE;
                this.processAplusQueue(e), "aplus_queue" === e && this.processAplusQueue("goldlog_queue"), 
                r.subscribeAndProcessQueue(e, this.options.config);
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    var a = n(27), o = n(58), r = n(55);
    t.exports = function() {
        return {
            init: function(t) {
                this.options = t;
            },
            addStyle: function(t, e) {
                var n = t + "_style", a = document.getElementById(n);
                a || (a = document.createElement("link"), a.id = n, a.href = e, a.rel = "stylesheet", 
                a.type = "text/css", document.getElementsByTagName("head").item(0).appendChild(a));
            },
            run: function() {
                var t = this, e = parent !== self, n = this.options.config || {};
                !e && n.urlRules && a(n.urlRules, function(e) {
                    var n, i = new RegExp(e.rule);
                    try {
                        n = e.id ? window.sessionStorage.getItem(e.id) : "";
                    } catch (t) {}
                    if (i.test(location.href) || n) {
                        try {
                            window.sessionStorage.setItem(e.id, !0);
                        } catch (t) {}
                        r.isArray(e.cdnPath) ? a(e.cdnPath, function(n) {
                            /\.css$/.test(n) ? t.addStyle(e.id, n) : /\.js/.test(n) && o.addScript(n);
                        }) : o.addScript(e.cdnPath);
                    }
                });
            }
        };
    };
}, function(t, e, n) {
    "use strict";
    t.exports = function(t) {
        try {
            var e = window, a = "g_tb_aplus_loaded";
            if (e[a]) return;
            e[a] = 1, n(95).isDebugAplus();
            var o = n(26), r = n(76), i = n(21), s = n(27), u = n(96), c = "running", l = [ "aplusReady", c ];
            r.doPubMsg(l), u.run({
                plugins: t.plugins,
                context: function() {
                    var e = {
                        PAGE_LOAD_TIME: new Date()
                    }, n = [];
                    return s(t.plugins, function(t) {
                        e[t.name] = t.config || {}, "aplus_log_inject" === t.name && t.config && t.config.plugins && (n = t.config.plugins.pv, 
                        s(n, function(t) {
                            e[t.name] = t.config;
                        }));
                    }), i.assign(e, {
                        aplus_config: t
                    });
                }
            }, function() {
                o.logger({
                    msg: "APLUS INIT SUCCESS"
                });
            });
        } catch (t) {}
    };
}, function(t, e, n) {
    "use strict";
    var a, o = n(2);
    e.isDebugAplus = function(t) {
        if ("boolean" == typeof a) return a;
        if ("boolean" == typeof t && (a = t), localStorage && location) {
            var e = location.href.match(/aplusDebug=(true|false)/);
            e && e.length > 0 && localStorage.setItem("aplusDebug", e[1]), a = "true" === localStorage.getItem("aplusDebug");
        } else a = !1;
        return o.setGoldlogVal("aplusDebug", a), a;
    };
}, function(t, e, n) {
    "use strict";
    var a = n(84), o = n(10), r = n(76);
    e.run = function(t, e) {
        var n = new a();
        n.run({
            plugins: t.plugins,
            context: t.context
        }, {
            config: {},
            userdata: {},
            pubsubType: "aplusinit",
            messageFnQueue: [],
            middlewareMessageKey: "mw_change_aplusinit"
        }, function(t) {
            var n = [ "aplusInitContext", t ];
            r.doPubMsg(n), r.doCachePubs(n), o(e) && e(t);
        });
    };
} ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBsdXNfY2xvdWRfdW0uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDcwNTNmYmIxYzY0NTI3YjlkN2NkIiwid2VicGFjazovLy8uL3NyYy9hcGx1c19jbG91ZF91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdvbGRsb2cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2FwbHVzU3RhdGljLmpzIiwid2VicGFjazovLy8uL3NyYy9hcGx1c19jbG91ZF91bV9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfd2ViL2FwbHVzX3RyYWNrX2RlYnVnX2Nsb3VkLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9hcGx1c19ib2R5X3JlYWR5LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9tZXNzYWdlci9wdWJzdWJfd2ViLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1B1YlN1YldlYi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9QdWJTdWIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvQmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfd2ViLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9jbGllbnQvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9hcGx1c19tZXRhX2luamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsVXJsLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsTmF0aXZlNEFwbHVzLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsTmFtZVN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21ldGEvbWV0YUluZm9BbGkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2Zvcm1hdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbERhc2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2Fzc2lnbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbERhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxUcmltLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsU3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxMb2dnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2VhY2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxNZXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsUmVmZXJyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21vbml0b3IvbmFtZV9zdG9yYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3Bhc3NpdmVTdXBwb3J0ZWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2FwbHVzVGFwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX3dlYl9odHRwX3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9jb25uZWN0aW9uL21haW5fd2ViX2h0dHBfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbG9nX2Nsb3VkLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9jb25uZWN0aW9uL21haW5fYmFzZV9odHRwLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsR1EuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2JvZHlfYnVpbGRlcl93ZWJfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2Nsb25lRGVlcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vaGVhZGVyX2J1aWxkZXJfd2ViX3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vdWxvZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vbWFuZ2xlX3dlYi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vYmFzZTY0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9qc29uVXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vZXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9mZXRjaERhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfbG9nX2luamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfd2ViLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9jb29raWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3RsZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEFycmF5LmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9kYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRXRhZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbERvbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hlbl90b19zZW5kcHYuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX3dlYl9jbG91ZF91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFVBLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hhdF90b19zZW5kX3dlYl9jbG91ZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvbG9nSWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxIYXNoLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vdXRpbFBhcmFtcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2lzQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3VzZXJkYXRhX3dlYi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEV4aW5mby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvZ2V0RXhwYXJhbXNPYmouanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3V0Mi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdW0ybmF0aXZlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9jYW5fdG9fc2VuZHB2LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9hZnRlcl9wdi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFB1YnN1Yi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvaGpsai93aGF0X3RvX2hqbGpfdXNlcmRhdGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX3dlYi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvaGpsai93aGF0X3RvX2hqbGpfdXQyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91bTJuYXRpdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfYXBpLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfYXBpL2FwbHVzLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1JlZHVjZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvY29tcG9zZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9wbHVnaW5zTG9hZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9hcGkvcmVxdWVzdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFB2aWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3F1ZXVlL21ldGFfcXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3F1ZXVlL2FjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfd2ViX3N5bmMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3F1ZXVlL2FwbHVzX3F1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfaG90L2hvdF9sb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwbHVzX3dlYl9iYXNpYy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvZGVidWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvYXBsdXNpbml0LmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsImluaXRHbG9iYWwiLCJ3aW5kb3ciLCJhcGx1c19jb25maWciLCJfYXBsdXNfY29udGV4dCIsImFwbHVzU3RhdGljIiwiQVBMVVMiLCJBUExVU19RVUVVRSIsIkdPTERMT0ciLCJHT0xETE9HX1FVRVVFIiwiaXNXZWIiLCJlIiwiZ2V0Q29udGV4dCIsImNvbnRleHQiLCJ2IiwiYXBsdXMiLCJhcGx1c19xdWV1ZSIsIl9hcGx1c0RlZmF1bHRWYWx1ZSIsIl9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlIiwiX2dvbGRsb2dfcXVldWUiLCJnb2xkbG9nX3F1ZXVlIiwiY29uY2F0IiwiZ29sZGxvZyIsImdldEdsb2JhbFZhbHVlIiwia2V5IiwiZyIsInEiLCJzZXRHbG9iYWxWYWx1ZSIsInZhbHVlIiwiZ2V0R29sZGxvZ1ZhbCIsInNldEdvbGRsb2dWYWwiLCJ2YWwiLCJmIiwiZ2V0Q2xpZW50SW5mbyIsIk1XX0NIQU5HRSIsIk1FVEFfSU5GTyIsIkFQUEVORF9NRVRBX0lORk8iLCJTRVRfTUVUQV9JTkZPIiwiSFRUUCIsIl9wdWJzdWIiLCJkZWZhdWx0Q29kZSIsIkNMSyIsIkVYUCIsIklNUEVYUCIsIk9USEVSIiwiQVBQX1NIT1ciLCJBUFBfSElERV9PUl9VTkxPQUQiLCJTRVNTSU9OX0lOVEVSVkFMIiwiU0hBUkVfQ0FDSEVfSU5URVJWQUwiLCJFS1ZTIiwiRVZFTlRfTUFYX0NPVU5UIiwiTUVNT1JZX01BWF9DT1VOVCIsIkVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCIsIlBBR0VfU1RBUlQiLCJQQUdFX0VORCIsIkFQUF9TVEFSVCIsIkFQUF9FTkQiLCJVU0VSX1BST0ZJTEVfS0VZIiwiSU1QUklOVCIsIklEX1RZUEUiLCJKU0JSSURHRV9PTkxZIiwiUEFHRV9DT05GSUciLCJBUExVU19TS0lQX0FQVl9SVUxFUyIsIlBBR0VfRU5URVIiLCJDVVJSRU5UX1BBR0VfQ09ORklHIiwiX0FOT05ZX0lEIiwiX1VTRVJfSUQiLCJERUZBVUxUX0NPREUiLCJFVkVOVF9NQVAiLCIyMTAxIiwiMjIwMSIsIjIyMDIiLCIxOTk5OSIsIjEwMjMiLCIxMDEwIiwiRVZFTlRfSURfTUFQIiwiU0hPVyIsIkhfT1JfVSIsIlVOU1VCU0NSSUJFIiwiU1VCU0NSSUJFIiwiUFVCTElTSCIsIkNBQ0hFX1BVQlMiLCJBUExVU19VTklWRVJTQUwiLCJDT01QTEVURSIsIlBWX0NPREUiLCJFWFBfQ09ERSIsIkNMS19DT0RFIiwiT1RIRVJfQ09ERSIsIlNQTV9DTlQiLCJTUE1fVVJMIiwiU1BNX1BSRSIsIk1XX0NIQU5HRV9QViIsIk1XX0NIQU5HRV9ISkxKIiwiSFRUUFMiLCJBUExVU19BUFBFTkRfTUVUQV9JTkZPIiwiQVBMVVNfU0VUX01FVEFfSU5GTyIsIlBWSUQiLCJBUExVU19MT0dfUElQRSIsIm9wZW5BUElzIiwiU0VTU0lPTl9QQVVTRV9USU1FIiwiQ1VSUkVOVF9TRVNTSU9OIiwiTUFYX0VWRU5USURfTEVOR1RIIiwiTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgiLCJNQVhfUFJPUEVSVFlfS0VZU19DT1VOVCIsIlJFUVVFU1RTIiwiU0hBUkVTIiwiQVBMVVNfU1NSQyIsIm1ldGFJbmZvIiwiYXBsdXMtaWZyLXB2IiwiYXBsdXMtcmhvc3QtdiIsImFwbHVzLXJob3N0LWciLCJhcGx1cy1jaGFubmVsIiwiYXBwSWQiLCJzZGtJZCIsImFwbHVzLWNwdmRhdGEiLCJhcGx1cy1leGRhdGEiLCJhcGx1cy1nbG9iYWxkYXRhIiwiYXBsdXMtbW1zdGF0LXRpbWVvdXQiLCJhcGx1cy1ldGFnLXRpbWVvdXQiLCJhcGx1cy10b1VUIiwiZ2xvYmFsQ29uZmlnIiwiaXNEZWNvZGVVcmwiLCJpc0FsaSIsImlzVU0iLCJFVEFHX1NUT1JBR0VfS0VZIiwic2NyaXB0X25hbWUiLCJsdmVyIiwiTkFNRV9TVE9SQUdFX0tFWVMiLCJSRUZFUlJFUiIsIlJFRkVSUkVSX1BWX0lEIiwiTE9TVF9QVl9QQUdFX0RVUkFUSU9OIiwiTE9TVF9QVl9QQUdFX1NQTUFCIiwiTE9TVF9QVl9QQUdFIiwiTE9TVF9QVl9QQUdFX01TRyIsInBsdWdpbnMiLCJuYW1lIiwicGF0aCIsImRlcHMiLCJjb25maWciLCJwdiIsImFwbHVzV2FpdGluZyIsInB2ZGF0YVRvVXQiLCJmbGFnIiwiaGpsaiIsInVybFJ1bGVzIiwicnVsZSIsImNkblBhdGgiLCJydW4iLCJkb2MiLCJkb2N1bWVudCIsIl9hcGx1c19jcGx1Z2luX3RyYWNrX2RlYiIsInN0YXR1cyIsIndpbiIsImlzVHJhY2tEZWJ1ZyIsIkxTIiwibG9jYWxTdG9yYWdlIiwiX3RyYWNraWQiLCJyZWciLCJSZWdFeHAiLCJtYXRjaF92YWx1ZSIsImxvY2F0aW9uIiwiaHJlZiIsIm1hdGNoIiwibGVuZ3RoIiwic2V0SXRlbSIsIl9yIiwicmVmZXJyZXIiLCJtYXRjaF9yZWZlciIsIl9uIiwibWF0Y2hfbmFtZSIsIl90cmFja2lkVmFsdWUiLCJnZXRJdGVtIiwiZGF0ZSIsInZhbHVlcyIsInNwbGl0IiwicmVwbGFjZSIsImxvZ2RhdGUiLCJEYXRlIiwibG9nZGF0ZVRpbWUiLCJnZXRUaW1lIiwibm93Iiwibm93VGltZSIsInNldEZ1bGxZZWFyIiwicGFyc2VJbnQiLCJzdWJzdHIiLCJzZXRNb250aCIsInNldERhdGUiLCJzZXRIb3VycyIsInNldE1pbnV0ZXMiLCJzZXRTZWNvbmRzIiwic2V0TWlsbGlzZWNvbmRzIiwibGltaXQiLCJhcGx1c190cmFja19kZWJ1Z19pZCIsIm9iaiIsInB1c2giLCJhY3Rpb24iLCJhcmd1bWVudHMiLCJzdGF0ZSIsImNiIiwiaGFuZGxlciIsInNldEludGVydmFsIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjbGVhckludGVydmFsIiwic2V0VGltZW91dCIsIlB1YlN1YldlYiIsInV0aWxHb2xkbG9nIiwiYXBsdXNfcHVic3ViIiwiY3JlYXRlIiwiUHViU3ViIiwiZXh0ZW5kIiwic3Vic2NyaWJlT25jZSIsImVUeXBlIiwiaCIsInRoaXMiLCJjYWxsYWJsZSIsIm9uY2UiLCJfc2VsZiIsInN1YnNjcmliZSIsInVuc3Vic2NyaWJlIiwiYXJncyIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJhcHBseSIsImlzRnVuY3Rpb24iLCJCYXNlIiwiZ2V0QXJncyIsImxlbiIsIl9hcmdzIiwiaiIsImZuIiwiVHlwZUVycm9yIiwicHJvcHMiLCJpbnN0YW5jZSIsImhhbmRsZXJzIiwicHVicyIsInNldEhhbmRsZXJzIiwiYXJyIiwiaSIsInMiLCJoX3N0ciIsInRvU3RyaW5nIiwic19zdHIiLCJzcGxpY2UiLCJwdWJsaXNoIiwic2l6ZSIsImNhY2hlUHVicyIsIm8iLCJTdWJCYXNlIiwiT2JqZWN0IiwiRiIsImNvbnN0cnVjdG9yIiwiZXJyIiwiY29uc29sZSIsImxvZyIsIl9hcGx1c19jbGllbnQiLCJnZXRPbGRGYXNoaW9uT3NJbmZvIiwidWEiLCJ0b2tlbiIsInRva2VuMCIsImluZGV4T2YiLCJvcyIsImRldmljZV9tb2RlbCIsIm9zX3ZlcnNpb24iLCJnZXRNb2Rlcm5PU0luZm8iLCJvc0luZm8iLCJzdWJzdHJpbmciLCJycyIsImQiLCJ0b0xvd2VyQ2FzZSIsInRlc3QiLCJVQSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZm8iLCJtb2Rlcm5PUyIsIkRhcndpbk9TIiwiX29zIiwic2NyIiwic2NyZWVuIiwic2NyZWVuV2lkdGgiLCJ3aWR0aCIsInNjcmVlbkhlaWdodCIsImhlaWdodCIsImxhbmd1YWdlIiwidXNlckxhbmd1YWdlIiwib3B0aW9ucyIsImdldENkblBhdGgiLCJjdXJyZW50X25vZGUiLCJnZXRFbGVtZW50QnlJZCIsInBhdGhfb3RoZXJzIiwic3JjIiwiaXNJbnRlcm5hdGlvbmFsIiwiaXNJbnQiLCJnZXRNZXRhSW5mbyIsImlzTW9iaWxlIiwiaXNQaG9uZSIsImdldFV0UGFyYW1Gcm9tVXJsIiwidXRwYXJhbWNudCIsInV0aWxVcmwiLCJnZXRQYXJhbUZyb21VcmwiLCJKU09OIiwicGFyc2UiLCJkZWNvZGVVUklDb21wb25lbnQiLCJ1dGlsTmF0aXZlNEFwbHVzIiwidXRpbE5hbWVTdG9yYWdlIiwicmVmZXIiLCJnZXRSZWZlciIsIm5hbWVTdG9yYWdlIiwiaGF2ZU5hdGl2ZUZsYWdJblVBIiwiXyQiLCJpc190ZXJtaW5hbCIsInNlbmRfcHZfY291bnQiLCJwYWdlX3JlZmVycmVyIiwic3BtIiwiZGF0YSIsIm1ldGFfaW5mbyIsInFHZXQiLCJrIiwiaGFzT3duUHJvcGVydHkiLCJtZXRhVmFsdWUiLCJhcHBlbmRNZXRhSW5mbyIsInNldE1ldGFJbmZvIiwidXJsIiwicGFyYW0iLCJyZWcxIiwicmVnMiIsInRtcF8xIiwidG1wXzIiLCJwYXJhbV8xIiwicGFyYW1fMiIsImdldFNQTUZyb21VcmwiLCJVVEZMQUciLCJVTUZMQUciLCJpc05hdGl2ZTRBcGx1cyIsImNoYW5uZWwiLCJicmlkZ2VOYW1lIiwiYXBsdXNCcmlkZ2VOYW1lIiwiam9pbiIsIm1hdGNoUmVzdWx0Iiwic2F2ZSIsInBhaXJzIiwiZW1wdHkiLCJTVE9SQUdFIiwiZW5jb2RlIiwiRVEiLCJPUklHSU5fTkFNRSIsIlNDSEVNRSIsIlEiLCJBTkQiLCJhZGRFdmVudExpc3RlbmVyIiwiZWxlbWVudCIsImV2ZW50TmFtZSIsImF0dGFjaEV2ZW50IiwiZXZ0IiwiX25hbWVTdG9yYWdlIiwiUkVfUEFJUiIsImVuY29kZVVSSUNvbXBvbmVudCIsImRlY29kZSIsInNoaWZ0IiwicGFpciIsInBhcmFtcyIsImwiLCJTdHJpbmciLCJyZW1vdmVJdGVtIiwiY2xlYXIiLCJ2YWx1ZU9mIiwiZ2V0TWV0YU1pY3Jvc2NvcGVEYXRhIiwibWV0YV9ub2RlcyIsIm1ldGEiLCJjb250ZW50IiwiX21pY3Jvc2NvcGVfZGF0YSIsInV0aWxBdHRyaWJ1dGUiLCJ0cnlUb0dldEF0dHJpYnV0ZSIsInV0aWxEYXRhIiwicGFyc2VTZW1pY29sb25Db250ZW50IiwiaXNfaGVhZF9oYXNfbWV0YV9taWNyb3Njb3BlX2RhdGEiLCJfbWljcm9zY29wZV9kYXRhX3BhcmFtcyIsImZvcm1hdCIsIm9iajJwYXJhbSIsIm1zX2RhdGFfcGFnZV9pZCIsIm1zX2RhdGFfc2hvcF9pZCIsIm1zX2RhdGFfaW5zdGFuY2VfaWQiLCJtc19kYXRhX3NpdGVDYXRlZ29yeUlkIiwibXNfcHJvdG90eXBlX2lkIiwic2l0ZV9pbnN0YW5jZV9pZF9vcl9zaG9wX2lkIiwiX2F0cF9iZWFjb25fZGF0YSIsIl9hdHBfYmVhY29uX2RhdGFfcGFyYW1zIiwiZ2V0U1BNUHJvdG9jb2xGcm9tTWV0YSIsIm1ldGFfc3BtX3Byb3RvY29sIiwiZ2V0TWV0YUJ5RGF0YXNwbSIsIl9tZXRhIiwicXVlcnlTZWxlY3RvciIsImVhY2giLCJwYXJzZU9uZVBhZ2UiLCJpc29uZXBhZ2UiLCJhcnJfY29udGVudCIsInVybHBhZ2VuYW1lIiwiaXNvbmVwYWdlX2RhdGEiLCJnZXRJbmZvIiwidXRpbE1ldGEiLCJnZXRNZXRhVGFncyIsIm1ldGFOYW1lIiwiZ2V0TWV0YUNudCIsIkFQTFVTX1hfU0VUVElOR1MiLCJwcmlvcml0eU1ldGFJbmZvIiwia2V5cyIsInNwbV9wcm90b2NvbCIsInV0aWxEYXNoIiwiYXNzaWduIiwiZmxvYXRfa2V5cyIsInBhcnNlRmxvYXQiLCJsYXN0X2luZm8iLCJsb2dnZXJQcmlvcml0eUluZm8iLCJ1dGlsTG9nZ2VyIiwibG9nZ2VyIiwibXNnIiwicGFyYW0yb2JqIiwicHJvY2Vzc09iamVjdCIsIm9sZF92YWx1ZSIsIm5ld192YWx1ZSIsInRvU2V0TWV0YUluZm8iLCJwcm9jZXNzQXJyYXkiLCJwcm9jZXNzT2JqIiwiZnJvbSIsInByb2Nlc3NBcGx1c0V4aW5mbyIsImV4aW5mb3NfbmV3IiwiX29sZFZhbHVlIiwidG1wX3BhcnNlIiwiYXJyMnBhcmFtIiwic2tpcEVuY29kZSIsImEiLCJpc0luUGxhbk9iaiIsInNfcGxhaW5fb2JqIiwiX3ZhbHVlIiwiYXJyMm9iaiIsInJldCIsIml0ZW0iLCJpbmRleCIsImZyYWdtZW50IiwiY29tbVRyYW5zbGF0ZSIsIl92IiwiZW5jb2RlR29rZXlWYWx1ZSIsImdva2V5IiwibWFrZUNhY2hlTnVtIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaXNTdGFydFdpdGgiLCJzMSIsInMyIiwiaXNFbmRXaXRoIiwibDEiLCJsMiIsImFueSIsImlzTnVtYmVyIiwiaXNOYU4iLCJpc0NvbnRhaW4iLCJjbG9uZURlZXAiLCJzdHIiLCJuZXdvYmoiLCJzdHJpbmdpZnkiLCJ0YXJnZXRPYmoiLCJhcmdzT2JqIiwidGFyZ2V0IiwidG8iLCJuZXh0U291cmNlIiwibmV4dEtleSIsInV0aWxUcmltIiwidXRpbFN0b3JlIiwidHJ5VG9EZWNvZGVVUklDb21wb25lbnQiLCJkZWZhdWx0X3ZhbCIsImRpY3QiLCJ1bmRlY29kZSIsImEyIiwiYV9sZW4iLCJ0cmltIiwibm9kZUxpc3RUb0FycmF5Iiwibm9kZXMiLCJnZXRMc0NuYSIsInNldCIsIl9sc19jbmEiLCJnZXQiLCJfYXJyIiwic2V0THNDbmEiLCJ0b2RheSIsImNuYSIsImdldFVybCIsImVnVXJsIiwicmhvc3RfdiIsImN1c3RvbV9ob3N0IiwidGVzdEtleSIsInJlbW92ZSIsInByZWZpeCIsImxldmVsIiwiZGVidWdMb2ciLCJhcGx1c0RlYnVnIiwiYXR0cl9uYW1lIiwiZ2V0QXR0cmlidXRlIiwidHJ5VG9TZXRBdHRyaWJ1dGUiLCJhdHRyX3ZhbHVlIiwic2V0QXR0cmlidXRlIiwidHJ5VG9SZW1vdmVBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JjZSIsIl9oZWFkX25vZGUiLCJfbWV0YV9ub2RlcyIsImF0dHIiLCJnZXRPbmVQYWdlSW5mbyIsInV0aWxFdmVudCIsInV0aWxSZWZlcnJlciIsInJlY29yZFZhbEluV2luZG93TmFtZSIsInJlZmVycmVyX3B2X2lkIiwiaXNfaHR0cHMiLCJwcm90b2NvbCIsIk5BTUVTVE9SQUdFX0tFWVMiLCJpc19pbl9pZnJhbWUiLCJwYXJlbnQiLCJzZWxmIiwicGFnZV91cmwiLCJpc19sb2dpbl9wYWdlIiwicHZpZCIsIm9uIiwidGFwRXZlbnRCaW5kIiwiZXZlbnRfdHlwZSIsImFwbHVzX2N0YXAiLCJhcGx1c1RvdWNoIiwiaXNUb3VjaCIsImNyZWF0ZUVsZW1lbnQiLCJhcGx1c1RhcCIsImRvU2Nyb2xsQ2hlY2siLCJkb2N1bWVudEVsZW1lbnQiLCJkb1Njcm9sbCIsIkRPTVJlYWR5IiwiY2FsbGJhY2siLCJyZWFkeVN0YXRlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwidG9wbGV2ZWwiLCJmcmFtZUVsZW1lbnQiLCJvbmxvYWQiLCJvbmV2ZW50IiwiYXR0YSIsImV2ZW50IiwiZWwiLCJzcmNFbGVtZW50IiwicGFzc2l2ZVN1cHBvcnRlZCIsInBhc3NpdmUiLCJzdXBwb3J0ZWQiLCJkZWZpbmVQcm9wZXJ0eSIsImdldFJhbmRvbSIsIm1pbiIsIm1heCIsImZpcmVFdmVudCIsInR5cGUiLCJleHRyYSIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInRvdWNoc3RhcnRIYW5kbGVyIiwiZG9jRWwiLCJnZXN0dXJlcyIsIlRPVVJDSF9NT1ZFIiwidG91Y2htb3ZlSGFuZGxlciIsIlRPVUNIX0VORCIsInRvdWNoZW5kSGFuZGxlciIsIlRPVUNIX0NBTkNFTCIsImNoYW5nZWRUb3VjaGVzIiwidG91Y2giLCJ0b3VjaFJlY29yZCIsImdlc3R1cmUiLCJzdGFydFRvdWNoIiwic3RhcnRUaW1lIiwiVEFQUElORyIsImlkZW50aWZpZXIiLCJkaXNwbGFjZW1lbnRYIiwiY2xpZW50WCIsImRpc3BsYWNlbWVudFkiLCJjbGllbnRZIiwiZGlzdGFuY2UiLCJzcXJ0IiwicG93IiwidGltZXN0YW1wIiwiQVBMVVNfVEFQIiwidG91Y2hFdmVudCIsImZpeElPU1RvdWNoQnVnIiwiX19maXhUb3VjaEV2ZW50IiwiVE9VQ0hfU1RBUlQiLCJpbml0IiwiaXNJbml0aWFsaXplZCIsIl9hcGx1c190YXBfY2FsbGJhY2siLCJ1biIsIk1haW4iLCJtYWluIiwiV1MiLCJDVFgiLCJDVFhfVFlQRSIsImluaXRUaW1lc3RhbXAiLCJsb2dfY2xvdWQiLCJtYWluX2Jhc2VfaHR0cCIsImJvZHlCdWlsZCIsInVsb2ciLCJmZXRjaERhdGEiLCJoYW5kbGVyTWlkZGxld2FyZSIsImNoYW5nZVRvT2JqIiwid2hhdF90b19zZW5kIiwibG9nZGF0YSIsInNldERlYnVnIiwibWV0aG9kIiwicG9zdERhdGEiLCJ1c2VyZGF0YSIsIl9oNV9zaGFyZV9lbmFibGUiLCJ3aGVyZV90b19zZW5kIiwic2VuZEJlYWNvbiIsInJlcXVlc3Q0dW0iLCJzdWNjZXNzIiwicmVzIiwiaW1wcmludCIsImVycm9yIiwic2VuZCIsImdldEtleUluZGV4IiwibWFwIiwiZXZlbnRfYXJncyIsIkhMIiwiY2hhbmdlVG9BcnJheSIsInRpbWUiLCJldmVudF90aW1lc3RhbXAiLCJjbGllbnQiLCJfcmVzb2x1dGlvbiIsInJlc29sdXRpb24iLCJMQU5HIiwic2RrX2luZm8iLCJjdXN0b21TZGtJZCIsInBsYXRmb3JtX3R5cGUiLCJwbGF0Zm9ybVR5cGUiLCJhcHBLZXkiLCJhcHBfZXh0X2luZm8iLCJzZXNzaW9uX2FyZ3MiLCJzZXNzaW9uQXJncyIsImdsb2JhbF9hcmdzIiwiZ2xvYmFsQXJncyIsImFyZzEiLCJsb2drZXkiLCJldmVudF9jb2RlIiwidHJhY2tlckV2ZW50Q29kZSIsIm1vZGVsIiwiY2FjaGUiLCJfZGV2X2lkIiwiX3VzZXJfbmljayIsIl91c2VyX2lkIiwiX2Fub255X2lkIiwidGltZVpvbmUiLCJfc2Vzc2lvbl9pZCIsInByZSIsImpzdmVyIiwiYXBwVmVyc2lvbiIsImJyYW5kIiwibmV0d29ya1R5cGUiLCJPYmoiLCJwbGF0Zm9ybSIsInNka190eXBlIiwiYXBwa2V5Iiwic2RrX3ZlcnNpb24iLCJkZXZpY2VfdHlwZSIsInBpeGVsX3JhdGlvIiwiZGV2aWNlUGl4ZWxSYXRpbyIsInciLCJyb3VuZCIsImFwcF92ZXJzaW9uIiwibG9nX2lkIiwiaXNfYXV0byIsImV4ZGF0YSIsInRyYWNrX2RlYnVnX2lkIiwidXRpbEdRIiwic3Vic2NyaWJlTG9ncyIsInB1c2hJbnRvR29sZGxvZ1F1ZXVlIiwib3JpRGF0YXMiLCJnZXRMb2dpY1N5bWJvbCIsIndhdGNoTE9HIiwibmFtZXMiLCJhcGx1c18xIiwiYXBsdXNfMiIsIl9idWlsZFNoYXJlSW5mbyIsInNoYXJlSW5mbyIsInNoYXJlZnJvbSIsImZyb21hcHBrZXkiLCJfdW1fc3NyYyIsIl91bV9jaGFubmVsIiwiX3VtX2NhbXBhaWduIiwiX2J1aWxkSEpMSkV2ZW50IiwiZXZlbnRBcmdzIiwiZ3AiLCJwcm9wZXJ0aWVzIiwicGFnZU1hbmFnZXJQYWdlTmFtZSIsInBhZ2VNYW5hZ2VyIiwiZ2V0UGFnZUNvZGUiLCJwYXRobmFtZSIsInBhZ2VfbmFtZSIsInNwbUIiLCJzcG1DIiwic3BtRCIsImZpbHRlciIsImNsb25lUCIsInV0aWxzIiwic3RhcnRzV2l0aCIsImN1c3AiLCJ3YXJuIiwiX2J1aWxkUFZFdmVudCIsInB2YXJncyIsInIiLCJkZWxldGVJbmZvIiwiZHVyYXRpb24iLCJib2R5IiwiZGF0YXNldCIsInBhZ2VuYW1lIiwicmVmX3VybCIsIl91bV9yZWZlcmVyX2RvbWFpbiIsImJ1aWxkSGVhZGVyIiwibWFuZ2xlIiwiYmFzZTY0IiwianNvblV0aWwiLCJjaGVja0VtcHR5T2JqIiwiaGVhZGVyIiwiYV9hbm9ueV9pZCIsImFub255X2lkIiwiaWRfdHJhY2tpbmciLCJhX2Rldl9pZCIsImRldl9pZCIsInV1aWQiLCJ1ZCIsIm9wZW5pZCIsInVuaW9uaWQiLCJhbm91eW1vdXNvcGVuaWQiLCJhbm9ueW1vdXNpZCIsImFsaXBheV9pZCIsInN3YW5pZCIsInVzZXJQcm9maWxlIiwidXNlcl9pbmZvIiwiaW1wIiwiaWRfdHlwZSIsImVrdiIsImFuYWx5dGljcyIsImVrdnMiLCJzZXNzaW9uaWQiLCJ1c2VySWQiLCJhY3RpdmVfdXNlciIsInB1aWQiLCJwcm92aWRlciIsInRzIiwidHJhY2VJZCIsImdldFJhbmRvbVN0ciIsIm1hbmdsZURhdGEiLCJyZXF1ZXN0RGF0YSIsInN0cmluZ2Z5IiwiaXNBcnJheSIsImRlYnVnSWQiLCJOdW1iZXIiLCJwb3MiLCJzZWFyY2hWYWwiLCJ1bmRlZmluZWQiLCJvdXRwdXQiLCJzb3VyY2UiLCJjaGVja0V2ZW50IiwiZXZlbnRJZCIsInJlc2VydmVXb3JkcyIsInJlc2VydmVXb3JkTWFwIiwiZm9yRWFjaCIsIndvcmQiLCJjb3VudCIsIkRhdGFUeXBlIiwiSEFMRl9TRVNTSU9OIiwiQ0xPU0VfU0VTU0lPTiIsIkVLViIsIkVOVEVSX1BBR0UiLCJMRUFWRV9QQUdFIiwiQWNjZXNzVHlwZSIsIk1PQklMRV9ORVRXT1JLXzJHIiwiTU9CSUxFX05FVFdPUktfM0ciLCJNT0JJTEVfTkVUV09SS180RyIsIk1PQklMRV9ORVRXT1JLX05PTkUiLCJMT0dfUFJFRklYIiwiVUxvZyIsImRlYnVnIiwiX2RlYnVnIiwidCIsInRhYmxlIiwidGlwIiwidGlwX3ciLCJyZXBlYXQiLCJjaGFyIiwiX2luc3RhbmNlIiwiX21hbmdsZUhlYWRlciIsInJlc3VsdCIsIl9tYW5nbGVPYmoiLCJpZE1hcCIsIl9tYW5nbGVBbmFseXRpY3MiLCJwcm9wIiwiYW5hbHl0aWNzTWFwIiwiaGVhZGVyTWFwIiwidGVzdFRva2VuIiwiX2lkIiwiZGV2aWNlX2lkIiwidXNlcmlkIiwiYjY0Y2hhcnMiLCJiNjR0YWIiLCJiaW4iLCJjaGFyQXQiLCJmcm9tQ2hhckNvZGUiLCJjYl91dG9iIiwiY2MiLCJjaGFyQ29kZUF0IiwicmVfdXRvYiIsInV0b2IiLCJ1IiwiY2JfZW5jb2RlIiwiY2NjIiwicGFkbGVuIiwib3JkIiwiY2hhcnMiLCJidG9hIiwiYiIsIl9lbmNvZGUiLCJ1cmlzYWZlIiwibTAiLCJyZV9idG91IiwiY2JfYnRvdSIsImNjY2MiLCJjcCIsIm9mZnNldCIsImJ0b3UiLCJjYl9kZWNvZGUiLCJuIiwiYXRvYiIsIl9kZWNvZGUiLCJqc29uIiwicGFyc2VUb0FycmF5IiwicHJvcHNUeXBlIiwiYnVpbGRQYXRoIiwicXVlcnkiLCJxcyIsInFzcyIsImN1cnJlbnRQYXRoIiwicGFnZU9wdGlvbk1hcCIsImdldEN1cnJlbnRQYWdlUGF0aCIsInNldEN1cnJlbnRQYXRoIiwiZ2V0UGFnZVF1ZXJ5Iiwic2V0UGFnZVF1ZXJ5IiwiZ2V0RnVsbFBhdGgiLCJnZXRQYWdlTmFtZSIsInJlYWxQYXRoIiwicmVnUnVsZSIsInBhZ2VOYW1lIiwiZ2V0VlRSZWFsdGltZUNvZGUiLCJyZWdFeHAiLCJzY2VuZSIsIl9jb25maWciLCJiYXNlIiwidGltZW91dCIsImZldGNoIiwicmVzb2x2ZSIsInJlamVjdCIsIm9wdHMiLCJwZW5kaW5nIiwidGhlbiIsInJlc3BvbnNlIiwiaGVhZGVycyIsInRleHQiLCJjYXRjaCIsImFqYXgiLCJ4aHIiLCJyZXNwb25zZVRleHQiLCJDT1JTIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwiWERvbWFpblJlcXVlc3QiLCJvbmVycm9yIiwib250aW1lb3V0IiwicmVxdWVzdCIsIm9wdCIsImNvbnRlbnRUeXBlIiwidG9VcHBlckNhc2UiLCJnZXREYXRhIiwic2V0UmVxdWVzdEhlYWRlciIsIndpdGhDcmVkZW50aWFscyIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsImV4Iiwic3RhdXMiLCJnZXRMb2dDb25maWciLCJsb2dDb25maWciLCJwYWdlTG9hZFRpbWUiLCJQQUdFX0xPQURfVElNRSIsImNvb2tpZSIsInV0aWxFdGFnIiwidXRpbERvbSIsInBsdWdpbl9ldGFnIiwiZXRhZyIsImdldENvb2tpZUNuYSIsInNldFRhZyIsInNldFN0YWciLCJzZXRMc1RhZyIsInNldEV0YWciLCJyZXF1ZXN0aW5nIiwiZ2V0Rm9ybWF0RGF0ZSIsImxzdGFnIiwidGFnIiwic3RhZyIsInNldENvb2tpZUNuYSIsIlNhbWVTaXRlIiwic2V0THNjbmFTdGF0dXMiLCJsc2NuYXN0YXR1cyIsInRpbWVyIiwiYXBsdXNfcmhvc3RfdiIsImRvX2JhY2siLCJjbGVhclRpbWVvdXQiLCJ1bml0dGVzdCIsIl9mbiIsImxvYWRTY3JpcHQiLCJFdGFnIiwiX2xzY25hIiwiZXRhZ1RpbWVvdXQiLCJkZWZhdWx0VGltZSIsImdldENvb2tpZSIsImNvb2tpZV92YWwiLCJnZXRFeHBpcmVzVGltZSIsImRhdGVTdHIiLCJleHBpcmVzIiwidG9VVENTdHJpbmciLCJzZXRUaW1lIiwieWVhcnMiLCJ1dGlsQXJyYXkiLCJpbmRleG9mIiwiaG9zdG5hbWUiLCJ0cnlTZXRDb29raWUiLCJkb21haW4iLCJjaHJvbWVWZXJzaW9uIiwiY2hyb21lSW5mb3MiLCJzZXRDb29raWUiLCJkb21haW5zIiwidGxkIiwiZ2V0RG9tYWlucyIsImNuYXVpIiwiZ2V0SG5nIiwidG9wcyIsImZ1bGxfZG9tYWluIiwiaXRlbU1hdGNoIiwibWF0Y2hlZCIsInNvbWUiLCJ6ZXJvRmlsbCIsIm51bWJlciIsInRhcmdldExlbmd0aCIsImZvcmNlU2lnbiIsImFic051bWJlciIsImFicyIsInplcm9zVG9GaWxsIiwic2lnbiIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwicHJvdG9jYWwiLCJnZXRDdXJyZW50Tm9kZSIsIl9jdXJyZW50Tm9kZSIsInNldE5vbmNlIiwibm9kZSIsIm5vbmNlIiwiYWRkU2NyaXB0IiwiaHR0cHNfc3JjIiwiYXN5bmMiLCJoYXNDcm9zc09yaWdpbiIsImhhc0F0dHJpYnV0ZSIsImNyb3NzT3JpZ2luIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsImFwcGVuZENoaWxkIiwiZ2V0QXBsdXNXYWl0aW5nIiwid2hlbl90b19zZW5kcHYiLCJpc1dhaXQiLCJ1dGlsVUEiLCJQT1NUIiwiR0VUIiwiZ2V0QXBsdXNNZXRhQnlLZXkiLCJnZXRSaG9zdCIsImdldEhqbGpIb3N0VXJsIiwicmhvc3QiLCJlbmRmaXgiLCJnZXRQdkhvc3RVcmwiLCJnaWYiLCJnZXRIb3N0VXJsIiwiZ2V0Q2hhbm5lbCIsImFwbHVzQ2hhbm5lbCIsImNoYW5uZWxzIiwiaXNfc2luZ2xlIiwicmVjb3JkVHlwZSIsImlzQWxpQXBwIiwiaXNJT1MiLCJpc0FuZHJvaWQiLCJpc1dpbmRvd3NQaG9uZSIsImlzQmxhY2tCZXJyeSIsImlzT3BlcmFNb2JpbGUiLCJsb2dJZCIsInV0aWxQYXJhbXMiLCJnZXRDb21tb25QYXJhbXMiLCJ1c2VySW5mbyIsInBhZ2VVcmwiLCJ0aXRsZSIsImdldExvZ0lkIiwiY29tbW9uUGFyYW1zIiwiZ2V0VGltZVpvbmUiLCJnbWtleSIsImdldFB2UGFyYW1zIiwibWFuc25kbG9nIiwibG9ndHlwZSIsImdldEhqbGpQYXJhbXMiLCJoamxqUGFyYW1zIiwiZ2V0Q2hhcnMiLCJkZWZhdWx0VmFsIiwidXRpbEhhc2giLCJoYXNoIiwiZ2V0UmFuZG9tSWQiLCJoYW5kbGVQVklkIiwiY2hhclBvcyIsImNoYXJzV2l0aG91dEciLCJjaGFyc1dpdGhvdXRMIiwicm5kX3N0cnMiLCJoYW5kbGVkIiwibG9nTmFtZSIsInJhbmRvbThDaGFycyIsInJhbmRvbTRDaGFycyIsInJhbmRvbTZDaGFycyIsImNoIiwiZGVmX3YiLCJfdGltZVpvbmUiLCJnZXRUaW1lem9uZU9mZnNldCIsIl9hbmQiLCJ6b25lIiwicmVtYWluZGVyIiwicmVtYWluZGVyWm9uZSIsImdldFVzZXJkYXRhIiwiY29tYm9Vc2VyZGF0YSIsIl9kYXRhIiwicHJvY2Vzc0xvZGFzaERvbGxhciIsInVwZGF0ZVByZSIsInV0aWxFeGluZm8iLCJnZXRFeFBhcmFtc09iaiIsImdldFBhZ2VJZCIsInBhZ2VfaWQiLCJwYWdlaWQiLCJwYWdlSWQiLCJyZXNldFNwbUIiLCJzcG1BUEkiLCJfc3BtIiwic3BtYiIsInNldEIiLCJjbnRzIiwic3BtX2NudCIsImdldEV4UGFyYW1zSW5mbyIsImdldEV4UGFyYW1zIiwiZXhwYXJhbXMiLCJwYXJhbTJhcnIiLCJtZXJnZUV4cGFyYW1zIiwiYmVhY29uRXhwYXJhbXMiLCJtZXRhRXhwYXJhbXMiLCJiZXhwYXJhbXMiLCJkZWZhdWx0RXhwYXJhbXMiLCJtZXRhT2JqIiwiYmxhY2tzIiwidG1wUGFyYW0iLCJiZWFjb25PYmoiLCJnZXRFeFBhcmFtc0Zyb21NZXRhIiwiYl9leHBhcmFtcyIsImdldEV4cGFyYW1zSW5mb3MiLCJleHBhcmFtc19rZXlfbmFtZXMiLCJtZXRhX2V4aW5mbyIsInRtcF9pbmZvIiwidG1wX2FyciIsImNvbmYiLCJ0bXBfb2JqIiwidG1wT2JqIiwidWlkYXBsdXMiLCJwY19pIiwicHVfaSIsImNsZWFuUGFyYW1zIiwibmV3X3BhcmFtcyIsInV0aWwiLCJ1bnNoaWZ0IiwiY2xlYW5QYXJhbXNGb3JUb1VUIiwiZXhjbHVkZVBhcm1zIiwic3BtLWNudCIsIm1rUGxhaW5LZXlGb3JFeHBhcmFtcyIsImV4cGFyYW1zQXJyIiwiZUl0ZW0iLCJrZXlJc0F2YWlsYWJsZSIsInZhbElzQXZhaWxhYmxlIiwidXBVdERhdGEiLCJnZXRUb1V0RGF0YSIsInBhZ2V1cmwiLCJzY20iLCJwZzFzdGVwayIsInBvaW50IiwiZnVuY3R5cGUiLCJmdW5jSWQiLCJob3N0IiwiX2lzaDUiLCJfaDV1cmwiLCJfdG9VVCIsIl9icmlkZ2VOYW1lIiwiX2JyaWRnZVZlcnNpb24iLCJzcG1fdXJsIiwic3BtX3ByZSIsInB2ZXIiLCJ1dHBhcmFtQ250IiwiX2lzX2cydV8iLCJfc2xvZyIsIm1rUGxhaW5LZXkiLCJrZXlfcHJlZml4IiwiX2tleSIsImpzb25MaWtlU3RyMkpTT04iLCJqc29uU3RyIiwiYXJyMSIsImFycjIiLCJjYW4yaHR0cHMiLCJnZXRUb05hdGl2ZURhdGEiLCJzZGtBcmdzIiwiY3VzdG9tQXJncyIsImlzX2g1IiwicGFnZV9zdGFydCIsInB2ZGF0YVRvVW1OYXRpdmUiLCJjYW5fdG9fc2VuZHB2IiwidXRpbFB1YnN1YiIsInNwbV9hYiIsIl9zcG1hYiIsIl9jb3VudCIsInB1Yk9iaiIsInNwbWFiX3ByZSIsImRvUHViTXNnIiwiZG9DYWNoZVB1YnMiLCJGTiIsImdldFB1YnN1YiIsInB1YnN1YiIsImRvU3ViTXNnIiwiZ2V0VXNlckRhdGEiLCJhcGx1c0V4aW5mbyIsImdva2V5QXJyIiwiZ29rZXlTdHIiLCJfdG1wVmFsdWUiLCJhdXRvc2VuZCIsImFwbHVzVXRpbHMiLCJoamxqZGF0YVRvVW1OYXRpdmUiLCJfYXBsdXNfYXBpIiwiYXBsdXNPYmoiLCJtYWtlUFZJZCIsIm1zZ0FyciIsImdldE1tc3RhdFRpbWVvdXQiLCJsb25ndGltZSIsInRpbWVJbnQiLCJSZWR1Y2VyIiwiZm5fYmVmb3JlX3B2IiwiZm5fYWZ0ZXJfcHYiLCJmbl9iZWZvcmVfcmVjb3JkIiwiZm5fYWZ0ZXJfcmVjb3JkIiwiRU1QVFlfRk4iLCJiZWZvcmVTZW5kUFYiLCJkYXRhU3RyIiwic2VuZEltZyIsInJlcSIsInNlbmRQViIsInNraXBSdWxlcyIsInJlZHVjZXIiLCJwdWJzdWJUeXBlIiwibWVzc2FnZUZuUXVldWUiLCJtaWRkbGV3YXJlTWVzc2FnZUtleSIsInBhZ2VFbnRlciIsImdldFBhcmFtIiwic2lkIiwid3YiLCJXaW5kVmFuZSIsImJlZm9yZVJlY29yZCIsImFmdGVyUmVjb3JkIiwicmVjb3JkIiwicmVjb3JkVWRhdGEiLCJzZXRQYWdlU1BNIiwic3BtRmxhZyIsIm9sZF9zcG1hYiIsInNwYUluaXQiLCJfc3BtYWJfcHJlIiwibXNncyIsInNwbWFiIiwiZGVmYXVsdE1vZGUiLCJtb2RlIiwidXBkYXRlUGFnZVByb3BlcnRpZXMiLCJfcGFnZSIsInVwZGF0ZU5leHRQYWdlUHJvcGVydGllcyIsInBhZ2VBcHBlYXIiLCJwYWdlRGlzYXBwZWFyIiwidXBkYXRlUGFnZVV0cGFyYW0iLCJ1cGRhdGVOZXh0UGFnZVV0cGFyYW0iLCJ1cGRhdGVTZXNzaW9uUHJvcGVydGllcyIsInNldFBhZ2VOYW1lIiwiZ2V0RWxlbWVudFNQTSIsIkNvbXBvc2UiLCJwbHVnaW5zTG9hZGVyIiwiQ09ORklHIiwicGwiLCJtaWRkbGV3YXJlIiwiYXBwIiwiY29tcG9zZSIsIndyYXAiLCJjYWxsZWRMaXN0Iiwic2V0Q2FsbGVkTGlzdCIsInJlc2V0Q2FsbGVkTGlzdCIsIm13IiwiY3R4IiwibWF4VGltZW91dCIsInNsZWVwSGFuZGVyMSIsIl90aW1lX291dCIsIl9td19uYW1lIiwicGx1Z2luc19uYW1lIiwicHVic3ViSW5mbyIsInBsdWdpbiIsImltZyIsIkltYWdlIiwicm5kX2lkIiwicmVtb3ZlUm5kSWQiLCJpc0Rpc2FibGVQdmlkIiwiZGlzYWJsZVB2aWQiLCJtZXRhX3ZhbHVlIiwicHJlX3B2aWQiLCJnZXRQdklkIiwicXVlIiwiZ2V0Rm9ybWF0UXVldWUiLCJxdWV1ZSIsInByb2Nlc3NHb2xkbG9nUXVldWUiLCJmb3JtYXRRdWV1ZSIsImdldEFwbHVzSG9sZFR5cGUiLCJ1YWlkIiwiZmlsdGVyVGFzayIsInRhc2siLCJob2xkVHlwZSIsIm1ldGFLZXkiLCJTVEFSVCIsIkFQTFVTX0hPTERfUVVFVUUiLCJwcm9jZXNzSG9sZEdvbGRsb2dRdWV1ZSIsIkFQTFVTX0hPTERfVVNFUklEX1FVRVVFIiwiQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSIsImdldE1ldGhvZE5hbWUiLCJpc09wZW5BcGkiLCJRVUVVRSIsImRlbGF5VGFza3MiLCJwcm9jZXNzVGFzayIsInN1YnNjcmliZUFuZFByb2Nlc3NRdWV1ZSIsInF1ZXVlTmFtZSIsIm1ldGhvZE5hbWUiLCJxdWV1ZU1hcCIsInN1YnNjcmliZU13Q2hhbmdlUXVldWUiLCJzdWJzY3JpYmVNZXRhUXVldWUiLCJzdWJzY3JpYmVRdWV1ZSIsIm1ldGFRdWV1ZSIsIm90aGVyc1F1ZXVlIiwiYWMiLCJfY25hIiwiUXVldWUiLCJwcm9jZXNzQXBsdXNRdWV1ZSIsInN0YXJ0TGVuZ3RoIiwiYWRkU3R5bGUiLCJzdHlsZVVybCIsInN0eWxlSWQiLCJzdHlsZU5vZGUiLCJyZWwiLCJtYXRjaGVkSW5MUyIsInNlc3Npb25TdG9yYWdlIiwiX2siLCJpc0RlYnVnQXBsdXMiLCJhcGx1c2luaXQiLCJSVU5OSU5HIiwiYXBsdXNTdGF0dXMiLCJjb25maWdfcHZfY29udGV4dCIsIlBMVUdJTlNfUFYiLCJpc0RlYnVnIl0sIm1hcHBpbmdzIjoiO0NBQVMsU0FBVUE7SUNJbkIsU0FBQUMsRUFBQUM7UUFHQSxJQUFBQyxFQUFBRCxJQUNBLE9BQUFDLEVBQUFELEdBQUFFO1FBR0EsSUFBQUMsSUFBQUYsRUFBQUQ7WUFDQUU7WUFDQUUsSUFBQUo7WUFDQUssU0FBQTs7UUFVQSxPQU5BUCxFQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxTQUFBQyxLQUFBRCxTQUFBSCxJQUdBSSxFQUFBRSxVQUFBLEdBR0FGLEVBQUFEOztJQXZCQSxJQUFBRDtJQXFDQSxPQVRBRixFQUFBUSxJQUFBVCxHQUdBQyxFQUFBUyxJQUFBUCxHQUdBRixFQUFBVSxJQUFBLElBR0FWLEVBQUE7SURNTSxTQUFVSSxHQUFRRCxHQUFTSDtJQUVoQ0ksRUFBT0QsVUFBVUgsRUFBb0I7R0FLaEMsU0FBVUksR0FBUUQsR0FBU0g7SUV6Q2pDO0lBRUFBLEVBQUEsR0FBQVcsV0FBQUMsU0FDQTtRQUNBLElBQUFDLElBQUFiLEVBQUE7UUFDQUEsRUFBQSxJQUFBYTs7R0YyRE0sU0FBVVQsR0FBUUQsR0FBU0g7SUdqRWpDO0lBRUEsSUFRQWMsR0FSQUMsSUFBQWYsRUFBQSxJQUVBZ0IsSUFBQUQsRUFBQUMsT0FDQUMsSUFBQUYsRUFBQUUsYUFFQUMsSUFBQUgsRUFBQUcsU0FDQUMsSUFBQUosRUFBQUksZUFHQUMs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QUFBTCxFQUFBLEtBRUE2bEMsSUFBQSxXQUFBam1DLGFBQUFnQixRQUFBO2VBRUFpbEMsS0FBQTtRQUdBLE9BREEvaUMsRUFBQS9LLGNBQUEsY0FBQTh0QyxJQUNBQTs7R2hHd2lSTSxTQUFVbHdDLEdBQVFELEdBQVNIO0lpR25rUmpDO0lBRUEsSUFBQTRvQyxJQUFBNW9DLEVBQUEsS0FDQTBPLElBQUExTyxFQUFBLEtBQ0FpbkMsSUFBQWpuQyxFQUFBO0lBWUFHLEVBQUEwSixNQUFBLFNBQUEwc0IsR0FBQXZVO1FBQ0EsSUFBQXduQixJQUFBLElBQUFaO1FBQ0FZLEVBQUEzL0I7WUFDQWIsU0FBQXV0QixFQUFBdnRCO1lBQ0F6SCxTQUFBZzFCLEVBQUFoMUI7O1lBRUE2SDtZQUNBd2Q7WUFDQTZpQixZQUFBO1lBQ0FDO1lBQ0FDLHNCQUFBO1dBQ0csU0FBQXlDO1lBQ0gsSUFBQTFCLE1BQUEsb0JBQUEwQjtZQUNBbkYsRUFBQU0sU0FBQW1ELElBQ0F6RCxFQUFBTyxZQUFBa0QsSUFDQWg4QixFQUFBc1QsTUFDQUEsRUFBQW9xQiIsImZpbGUiOiJhcGx1c19jbG91ZF91bS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHQvKipcblx0ICogYWxpbG9nL2FwbHVzL3NyYy9hcGx1cy5qc1xuXHQgKiDmqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHQvLyByZXF1aXJlKCcuLi9idWlsZF9hbGkvYXBsdXNfc3BhX2F1dG9fcHYuanMnKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyKS5pbml0R2xvYmFsKHdpbmRvdyk7XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGFwbHVzX2NvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg5NCkoYXBsdXNfY29uZmlnKTtcblx0fSkoKTtcblxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOaTjeS9nGFwbHVz55qE5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBBUExVUyA9IGFwbHVzU3RhdGljLkFQTFVTO1xuXHR2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c1N0YXRpYy5BUExVU19RVUVVRTtcblx0XG5cdHZhciBHT0xETE9HID0gYXBsdXNTdGF0aWMuR09MRExPRztcblx0dmFyIEdPTERMT0dfUVVFVUUgPSBhcGx1c1N0YXRpYy5HT0xETE9HX1FVRVVFO1xuXHRcblx0dmFyIF9hcGx1c19jb250ZXh0O1xuXHR2YXIgaXNXZWIgPSBmYWxzZTtcblx0dHJ5IHtcblx0ICBfYXBsdXNfY29udGV4dCA9IHdpbmRvdztcblx0ICBpc1dlYiA9IHRydWU7XG5cdH0gY2F0Y2ggKGUpIHtcblx0ICBfYXBsdXNfY29udGV4dCA9IHt9O1xuXHR9XG5cdFxuXHRleHBvcnRzLmdldENvbnRleHQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIF9hcGx1c19jb250ZXh0O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pbml0R2xvYmFsID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcblx0ICBpZiAoY29udGV4dCkge1xuXHQgICAgX2FwbHVzX2NvbnRleHQgPSBjb250ZXh0O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBfYXBsdXNfY29udGV4dCA9IHtcblx0ICAgICAgdjogMSxcblx0ICAgICAgYXBsdXM6IHt9LFxuXHQgICAgICBhcGx1c19xdWV1ZTogW11cblx0ICAgIH07XG5cdCAgfVxuXHQgIHZhciBfYXBsdXNEZWZhdWx0VmFsdWU7XG5cdCAgdmFyIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlO1xuXHQgIGlmIChpc1dlYikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgX2FwbHVzRGVmYXVsdFZhbHVlID0gKF9hcGx1c19jb250ZXh0LmFwbHVzIHx8IChfYXBsdXNfY29udGV4dC5hcGx1cyA9IHt9KSk7XG5cdCAgICAgIHZhciBfZ29sZGxvZ19xdWV1ZSA9IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlIHx8IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlID0gW10pKTtcblx0ICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgfHwgKF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gW10pKTtcblx0ICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfZ29sZGxvZ19xdWV1ZS5jb25jYXQoX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUpOyAgXG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH0gZWxzZSB7XG5cdCAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1cztcblx0ICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWU7XG5cdCAgfVxuXHQgIFxuXHQgIF9hcGx1c19jb250ZXh0LmFwbHVzID0gX2FwbHVzX2NvbnRleHQuZ29sZGxvZyA9IF9hcGx1c0RlZmF1bHRWYWx1ZTtcblx0ICBfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgPSBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcblx0ICBcblx0ICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG5cdH07XG5cdFxuXHR2YXIgZ2V0R2xvYmFsVmFsdWUgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgaWYgKGtleSA9PT0gQVBMVVMgfHwga2V5ID09PSBHT0xETE9HKSB7XG5cdCAgICB2YXIgZyA9IF9hcGx1c19jb250ZXh0W0FQTFVTXSB8fCBfYXBsdXNfY29udGV4dFtHT0xETE9HXTtcblx0ICAgIGlmICghZykge1xuXHQgICAgICBnID0gX2FwbHVzX2NvbnRleHRbQVBMVVNdID0gX2FwbHVzX2NvbnRleHRbR09MRExPR10gPSB7fTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBnO1xuXHQgIH1cblx0ICB2YXIgZ29sZGxvZ19xdWV1ZSA9IEdPTERMT0dfUVVFVUU7XG5cdCAgdmFyIGFwbHVzX3F1ZXVlID0gQVBMVVNfUVVFVUU7XG5cdCAgaWYgKGtleSA9PT0gYXBsdXNfcXVldWUgfHwga2V5ID09PSBnb2xkbG9nX3F1ZXVlKSB7XG5cdCAgICB2YXIgcSA9IF9hcGx1c19jb250ZXh0W2FwbHVzX3F1ZXVlXSB8fCBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXTtcblx0ICAgIGlmICghcSkge1xuXHQgICAgICBxID0gX2FwbHVzX2NvbnRleHRbYXBsdXNfcXVldWVdID0gX2FwbHVzX2NvbnRleHRbZ29sZGxvZ19xdWV1ZV0gPSBbXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBxO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRHbG9iYWxWYWx1ZSA9IGdldEdsb2JhbFZhbHVlO1xuXHRcblx0ZXhwb3J0cy5zZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgX2FwbHVzX2NvbnRleHRba2V5XSA9IHZhbHVlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPlmFwbHVz5YaF6YOo5Y+Y6YePXG5cdCAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG5cdCAqIEByZXR1cm4gW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dXG5cdCAqL1xuXHR2YXIgZ2V0R29sZGxvZ1ZhbCA9IGZ1bmN0aW9uKGtleSkge1xuXHQgIHZhciB2O1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG5cdCAgICB2ID0gYXBsdXNba2V5XTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB2ID0gJyc7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiB2O1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRHb2xkbG9nVmFsID0gZ2V0R29sZGxvZ1ZhbDtcblx0LyoqXG5cdCAqIOiuvue9rmFwbHVz5YaF6YOo5Y+Y6YePXG5cdCAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG5cdCAqIEBwYXJhbXMgW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dIHZhbFxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXVxuXHQgKi9cblx0dmFyIHNldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuXHQgIHZhciBmID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBhcGx1cyA9IGdldEdsb2JhbFZhbHVlKEFQTFVTKTtcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgYXBsdXNba2V5XSA9IHZhbDtcblx0ICAgICAgZiA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgZiA9IGZhbHNlO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gZjtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuc2V0R29sZGxvZ1ZhbCA9IHNldEdvbGRsb2dWYWw7XG5cdFxuXHQvKipcblx0ICog6I635Y+WY2xpZW50SW5mbyjmtY/op4jlmajjgIHorr7lpIfnrYnkv6Hmga8pXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICogICB2ZXJzaW9uOiAyLFxuXHQgKiAgIHVhX2luZm86IHtcblx0ICogICAgIGI6IFwiY2hyb21lNThcIlxuXHQgKiAgICAgaXNtOiBcIm1hY1wiXG5cdCAqICAgICBteDogXCIzNjBlZVwiXG5cdCAqICAgICBvOiBcIm1hY1wiXG5cdCAqICAgICBwOiAxXG5cdCAqICAgICBzOiBcIjE5MjB4MTA4MFwiXG5cdCAqICAgICB3OiBcIndlYmtpdFwiXG5cdCAqICAgfVxuXHQgKiB9XG5cdCAqL1xuXHRleHBvcnRzLmdldENsaWVudEluZm8gPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2NsaWVudCcpIHx8IHt9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBBUExVUyA9ICdhcGx1cyc7XG5cdHZhciBHT0xETE9HID0gJ2dvbGRsb2cnO1xuXHR2YXIgQVBMVVNfUVVFVUUgPSBBUExVUyArICdfcXVldWUnO1xuXHR2YXIgR09MRExPR19RVUVVRSA9IEdPTERMT0cgKyAnX3F1ZXVlJztcblx0dmFyIE1XX0NIQU5HRSA9ICdtd19jaGFuZ2UnO1xuXHR2YXIgTUVUQV9JTkZPID0gJ01ldGFJbmZvJztcblx0dmFyIEFQUEVORF9NRVRBX0lORk8gPSAnYXBwZW5kJyArIE1FVEFfSU5GTztcblx0dmFyIFNFVF9NRVRBX0lORk8gPSAnc2V0JyArIE1FVEFfSU5GTztcblx0dmFyIEhUVFAgPSAnaHR0cCc7XG5cdHZhciBfcHVic3ViID0gJ19wdWJzdWInO1xuXHRcblx0dmFyIGRlZmF1bHRDb2RlID0gJ290aGVyJztcblx0dmFyIENMSyA9ICcyMTAxJztcblx0dmFyIEVYUCA9ICcyMjAxJztcblx0dmFyIElNUEVYUCA9ICcyMjAyJztcblx0dmFyIE9USEVSID0gJzE5OTk5Jztcblx0dmFyIEFQUF9TSE9XID0gJzEwMjMnO1xuXHR2YXIgQVBQX0hJREVfT1JfVU5MT0FEID0gJzEwMTAnOyBcblx0dmFyIFNFU1NJT05fSU5URVJWQUwgPSAzMDAwMDsgLy8gc2Vzc2lvbklk6L+H5pyf5pe26Ze0IDMw56eSXG5cdHZhciBTSEFSRV9DQUNIRV9JTlRFUlZBTCA9IDEwMDAgKiA2MCAqIDMwO1xuXHR2YXIgRUtWUyA9ICdla3ZzJztcblx0dmFyIEVWRU5UX01BWF9DT1VOVCA9IDEwMDAwOyAvLyDmnKzlnLDmnIDlpJrlrZjlgqjov5nkuYjlpJpla3bmlbDmja5cblx0dmFyIE1FTU9SWV9NQVhfQ09VTlQgPSAxOyAvLyDlhoXlrZjkuK3lrZjlgqjnmoTmnIDlpKfmlbDmja7mlbDph4/vvIzotoXov4fliJnnvJPlrZjliLDmnKzlnLBcblx0dmFyIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCA9IDMwMDA7IC8vIGVrdum7mOiupOWPkemAgemXtOmalOaXtumXtDogM+enklxuXHR2YXIgUEFHRV9TVEFSVCA9ICckJF9wYWdlX3N0YXJ0Jztcblx0dmFyIFBBR0VfRU5EID0gJyQkX3BhZ2VfZW5kJztcblx0dmFyIEFQUF9TVEFSVCA9ICckJF9hcHBfc3RhcnQnO1xuXHR2YXIgQVBQX0VORCA9ICckJF9hcHBfZW5kJztcblx0dmFyIFVTRVJfUFJPRklMRV9LRVkgPSAnYXBsdXNfdXNlcl9wcm9maWxlJztcblx0dmFyIElNUFJJTlQgPSAnaW1wcmludCc7XG5cdHZhciBJRF9UWVBFID0gJ2FwbHVzLWlkdHlwZSc7XG5cdHZhciBKU0JSSURHRV9PTkxZID0gJ2FwbHVzLWpzYnJpZGdlLW9ubHknO1xuXHR2YXIgUEFHRV9DT05GSUcgPSAnYXBsdXMtcGFnZS1jb25maWcnOyBcblx0dmFyIEFQTFVTX1NLSVBfQVBWX1JVTEVTID0gJ2FwbHVzLXNraXAtYXB2LXJ1bGVzJztcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgUEFHRV9FTlRFUjogJ1BBR0VfRU5URVInLFxuXHQgIENVUlJFTlRfUEFHRV9DT05GSUc6ICdDVVJSRU5UX1BBR0VfQ09ORklHJyxcblx0ICBfQU5PTllfSUQ6ICdfYW5vbnlfaWQnLFxuXHQgIF9VU0VSX0lEOiAnX3VzZXJfaWQnLFxuXHQgIERFRkFVTFRfQ09ERTogZGVmYXVsdENvZGUsXG5cdCAgT1RIRVI6IE9USEVSLFxuXHQgIEVWRU5UX01BUDoge1xuXHQgICAgJzIxMDEnOiAnY2xpY2snLFxuXHQgICAgJzIyMDEnOiAnZXhwb3N1cmUnLFxuXHQgICAgJzIyMDInOiAnZXhwb3N1cmUnLFxuXHQgICAgJzE5OTk5JzogZGVmYXVsdENvZGUsXG5cdCAgICAnMTAyMyc6ICdhcHBfc2hvdycsXG5cdCAgICAnMTAxMCc6ICdhcHBfaGlkZV9vcl91bmxvYWQnXG5cdCAgfSxcblx0ICBFVkVOVF9JRF9NQVA6IHtcblx0ICAgICdFWFAnOiBFWFAsXG5cdCAgICAnSU1QRVhQJzogSU1QRVhQLFxuXHQgICAgJ0NMSyc6IENMSyxcblx0ICAgICdPVEhFUic6IE9USEVSLFxuXHQgICAgJ1NIT1cnOiBBUFBfU0hPVyxcblx0ICAgICdIX09SX1UnOiBBUFBfSElERV9PUl9VTkxPQURcblx0ICB9LFxuXHQgIEFQTFVTOiBBUExVUyxcblx0ICBHT0xETE9HOiBHT0xETE9HLFxuXHQgIFVOU1VCU0NSSUJFOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcudW5zdWJzY3JpYmUnLFxuXHQgIFNVQlNDUklCRTogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnN1YnNjcmliZScsXG5cdCAgUFVCTElTSDogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnB1Ymxpc2gnLFxuXHQgIENBQ0hFX1BVQlM6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5jYWNoZVB1YnMnLFxuXHQgIEFQTFVTX1VOSVZFUlNBTDogQVBMVVMgKyAnX3VuaXZlcnNhbCcsXG5cdCAgQVBMVVNfUVVFVUU6IEFQTFVTX1FVRVVFLFxuXHQgIEdPTERMT0dfUVVFVUU6IEdPTERMT0dfUVVFVUUsXG5cdCAgQ09NUExFVEU6ICdjb21wbGV0ZScsXG5cdCAgUFZfQ09ERTogJzIwMDEnLFxuXHQgIEVYUF9DT0RFOiBFWFAsXG5cdCAgQ0xLX0NPREU6IENMSyxcblx0ICBPVEhFUl9DT0RFOiBPVEhFUixcblx0ICBDTEs6ICdDTEsnLFxuXHQgIEVYUDogJ0VYUCcsXG5cdCAgLy8gT1RIRVI6ICdPVEhFUicsXG5cdCAgU1BNX0NOVDogJ3NwbS1jbnQnLFxuXHQgIFNQTV9VUkw6ICdzcG0tdXJsJyxcblx0ICBTUE1fUFJFOiAnc3BtLXByZScsXG5cdCAgTVdfQ0hBTkdFX1BWOiBNV19DSEFOR0UgKyAnX3B2Jyxcblx0ICBNV19DSEFOR0VfSEpMSjogTVdfQ0hBTkdFICsgJ19oamxqJyxcblx0ICBIVFRQOiBIVFRQICsgJzonLFxuXHQgIEhUVFBTOiAnaHR0cHM6Jyxcblx0ICBBUFBFTkRfTUVUQV9JTkZPOiBBUFBFTkRfTUVUQV9JTkZPLFxuXHQgIFNFVF9NRVRBX0lORk86IFNFVF9NRVRBX0lORk8sXG5cdCAgQVBMVVNfQVBQRU5EX01FVEFfSU5GTzogQVBMVVMgKyAnLicgKyBBUFBFTkRfTUVUQV9JTkZPLFxuXHQgIEFQTFVTX1NFVF9NRVRBX0lORk86IEFQTFVTICsgJy4nICsgU0VUX01FVEFfSU5GTyxcblx0ICBQVklEOidwdmlkJyxcblx0ICBBUExVU19MT0dfUElQRTonYXBsdXMtbG9nLXBpcGUnLFxuXHQgIG9wZW5BUElzOiBbXG5cdCAgICAnc2VuZCcsICdlbnRlcicsICdzZW5kUFYnLCAncmVjb3JkJywgJ2NvbWJpbmVSZWNvcmQnLCAncmVjb3JkVWRhdGEnLCAncmVxdWVzdFZUQ29uZmlnJyxcblx0ICAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcblx0ICAgICd1cGRhdGVQYWdlUHJvcGVydGllcycsXG5cdCAgICAndXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcblx0ICAgICd1cGRhdGVQYWdlVXRwYXJhbScsXG5cdCAgICAndXBkYXRlTmV4dFBhZ2VVdHBhcmFtJyxcblx0ICAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLCAnc2tpcFBhZ2UnLFxuXHQgICAgJ3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzJywgJ2dldFBhZ2VTcG1VcmwnLCAnZ2V0UGFnZVNwbVByZScsXG5cdCAgICAnc2V0UGFnZU5hbWUnLCAnZ2V0RWxlbWVudFNQTSdcblx0ICBdLFxuXHQgIFNFU1NJT05fSU5URVJWQUw6IFNFU1NJT05fSU5URVJWQUwsXG5cdCAgU0VTU0lPTl9QQVVTRV9USU1FOiAnc2Vzc2lvbl9wYXVzZV90aW1lJyxcblx0ICBJTVBSSU5UOiAnaW1wcmludCcsXG5cdCAgQ1VSUkVOVF9TRVNTSU9OOiAnY3VycmVudF9zZXNzaW9uJyxcblx0ICBNQVhfRVZFTlRJRF9MRU5HVEg6IDEyOCxcblx0ICBNQVhfUFJPUEVSVFlfS0VZX0xFTkdUSDogMjU2LFxuXHQgIE1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UOiAxMDAsXG5cdCAgUkVRVUVTVFM6ICdyZXF1ZXN0cycsXG5cdCAgU0hBUkVTOiAnc2hhcmVzJyxcblx0ICBBUExVU19TU1JDOiAnX2FwbHVzX3NzcmMnLFxuXHQgIEVLVlM6IEVLVlMsXG5cdCAgRVZFTlRfTUFYX0NPVU5UOiBFVkVOVF9NQVhfQ09VTlQsXG5cdCAgTUVNT1JZX01BWF9DT1VOVDogTUVNT1JZX01BWF9DT1VOVCxcblx0ICBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUw6IEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCxcblx0ICBQQUdFX1NUQVJUOiBQQUdFX1NUQVJULFxuXHQgIFBBR0VfRU5EOiBQQUdFX0VORCxcblx0ICBBUFBfU1RBUlQ6IEFQUF9TVEFSVCxcblx0ICBBUFBfRU5EOiBBUFBfRU5ELFxuXHQgIFVTRVJfUFJPRklMRV9LRVk6IFVTRVJfUFJPRklMRV9LRVksXG5cdCAgU0hBUkVfQ0FDSEVfSU5URVJWQUw6IFNIQVJFX0NBQ0hFX0lOVEVSVkFMLFxuXHQgIElNUFJJTlQ6IElNUFJJTlQsXG5cdCAgSURfVFlQRTogSURfVFlQRSxcblx0ICBKU0JSSURHRV9PTkxZOiBKU0JSSURHRV9PTkxZLFxuXHQgIFBBR0VfQ09ORklHOiBQQUdFX0NPTkZJRyxcblx0ICBBUExVU19TS0lQX0FQVl9SVUxFUzogQVBMVVNfU0tJUF9BUFZfUlVMRVNcblx0fTtcblx0XG5cdC8vIHZhciBvcGVuQVBJcyA9IFtcblx0Ly8gICAnc2VuZCcsICdlbnRlcicsICdzZW5kUFYnLCAncmVjb3JkJyxcblx0Ly8gICAnc2V0UGFnZVNQTScsICdzZXRNZXRhSW5mbycsICdhcHBlbmRNZXRhSW5mbycsXG5cdC8vICAgVVBEQVRFICsgJ1BhZ2VQcm9wZXJ0aWVzJyxcblx0Ly8gICBVUERBVEUgKyAnTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcblx0Ly8gICBVUERBVEUgKyAnUGFnZVV0cGFyYW0nLFxuXHQvLyAgIFVQREFURSArICdOZXh0UGFnZVV0cGFyYW0nLFxuXHQvLyAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLFxuXHQvLyAgICdza2lwUGFnZSdcblx0Ly8gXTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgXCJtZXRhSW5mb1wiOiB7XG5cdCAgICBcImFwbHVzLWlmci1wdlwiOiBcIjFcIixcblx0ICAgIFwiYXBsdXMtcmhvc3QtdlwiOiBcIlwiLFxuXHQgICAgXCJhcGx1cy1yaG9zdC1nXCI6IFwiXCIsXG5cdCAgICBcImFwbHVzLWNoYW5uZWxcIjogXCJcIixcblx0ICAgIFwiYXBwSWRcIjogXCJcIixcblx0ICAgIFwic2RrSWRcIjogXCJhcGx1c19jbG91ZF91bVwiLFxuXHQgICAgXCJhcGx1cy1jcHZkYXRhXCI6IHt9LFxuXHQgICAgXCJhcGx1cy1leGRhdGFcIjoge30sXG5cdCAgICBcImFwbHVzLWdsb2JhbGRhdGFcIjoge30sXG5cdCAgICBcImFwbHVzLW1tc3RhdC10aW1lb3V0XCI6IFwiMTAwMDBcIixcblx0ICAgIFwiYXBsdXMtZXRhZy10aW1lb3V0XCI6IFwiMTUwMFwiLFxuXHQgICAgXCJhcGx1cy10b1VUXCI6IFwiXCJcblx0ICB9LFxuXHQgIFwiZ2xvYmFsQ29uZmlnXCI6IHtcblx0ICAgIFwiaXNEZWNvZGVVcmxcIjogdHJ1ZSxcblx0ICAgIFwiaXNBbGlcIjogZmFsc2UsXG5cdCAgICBcImlzVU1cIjogdHJ1ZSxcblx0ICAgIFwiQVBMVVNfUVVFVUVcIjogXCJhcGx1c19xdWV1ZVwiLFxuXHQgICAgXCJFVEFHX1NUT1JBR0VfS0VZXCI6IFwiX19FVEFHX19DTkFfX0lEX19cIixcblx0ICAgIFwic2NyaXB0X25hbWVcIjogXCJhcGx1cy5qc1wiLFxuXHQgICAgXCJsdmVyXCI6IFwiMS43LjEwXCIsXG5cdCAgICBcIk5BTUVfU1RPUkFHRV9LRVlTXCI6IHtcblx0ICAgICAgXCJSRUZFUlJFUlwiOiBcIndtX3JlZmVycmVyXCIsXG5cdCAgICAgIFwiUkVGRVJSRVJfUFZfSURcIjogXCJyZWZlcl9wdl9pZFwiLFxuXHQgICAgICBcIkxPU1RfUFZfUEFHRV9EVVJBVElPTlwiOiBcImxvc3RfcHZfcGFnZV9kdXJhdGlvblwiLFxuXHQgICAgICBcIkxPU1RfUFZfUEFHRV9TUE1BQlwiOiBcImxvc3RfcHZfcGFnZV9zcG1hYlwiLFxuXHQgICAgICBcIkxPU1RfUFZfUEFHRVwiOiBcImxvc3RfcHZfcGFnZVwiLFxuXHQgICAgICBcIkxPU1RfUFZfUEFHRV9NU0dcIjogXCJsb3N0X3B2X3BhZ2VfbXNnXCJcblx0ICAgIH1cblx0ICB9LFxuXHQgIFwicGx1Z2luc1wiOiBbXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX3RyYWNrX2RlYnVnXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19ib2R5X3JlYWR5XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJwdWJzdWJcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNylcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2NsaWVudFwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygxMilcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX21ldGFfaW5qZWN0XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwibmFtZV9zdG9yYWdlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfd2ViX2h0dHBfdW1cIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oMzUpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19sb2dfaW5qZWN0XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImFwbHVzX21ldGFfaW5qZWN0XCJcblx0ICAgICAgXSxcblx0ICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgIFwicGx1Z2luc1wiOiB7XG5cdCAgICAgICAgICBcInB2XCI6IFtcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcImV0YWdcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1Milcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZW5fdG9fc2VuZHB2XCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTkpLFxuXHQgICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcblx0ICAgICAgICAgICAgICAgIFwiYXBsdXNXYWl0aW5nXCI6IFwiXCJcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVyZV90b19zZW5kXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNjApXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2MiksXG5cdCAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgICAgICAgICAgXCJwdmRhdGFUb1V0XCI6IHt9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kcHZfdXNlcmRhdGFcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2NiksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRwdl91c2VyZGF0YV93ZWJcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2OCksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCIsXG5cdCAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZHB2X3VzZXJkYXRhXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRwdl91dDJcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3MSksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRwdl91bTJuYXRpdmVcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3MyksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJjYW5fdG9fc2VuZHB2XCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNzQpLFxuXHQgICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcblx0ICAgICAgICAgICAgICAgIFwiZmxhZ1wiOiBcIk5PXCJcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJhZnRlcl9wdlwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICBdLFxuXHQgICAgICAgICAgXCJoamxqXCI6IFtcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcImV0YWdcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1Milcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2MCksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2MiksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX2hqbGpfdXNlcmRhdGFcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3NyksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX2hqbGpfdXNlcmRhdGFfd2ViXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNzgpLFxuXHQgICAgICAgICAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiLFxuXHQgICAgICAgICAgICAgICAgXCJ3aGF0X3RvX2hqbGpfdXNlcmRhdGFcIlxuXHQgICAgICAgICAgICAgIF1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9faGpsal91dDJcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg3OSksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX2hqbGpfdW0ybmF0aXZlXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oODApLFxuXHQgICAgICAgICAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiXG5cdCAgICAgICAgICAgICAgXVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICBdXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19hcGlcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oODEpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJtZXRhX3F1ZXVlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1Milcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImV0YWdfd2ViX3N5bmNcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oOTEpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19xdWV1ZVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg5Milcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImhvdF9sb2FkZXJcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oOTMpLFxuXHQgICAgICBcImNvbmZpZ1wiOiB7XG5cdCAgICAgICAgXCJ1cmxSdWxlc1wiOiBbXG5cdCAgICAgICAgICB7XG5cdCAgICAgICAgICAgIFwicnVsZVwiOiBcImFwbHVzX3dlYnZ0X21lc3NhZ2VyXCIsXG5cdCAgICAgICAgICAgIFwiY2RuUGF0aFwiOiBbXG5cdCAgICAgICAgICAgICAgXCJodHRwczovL2QuYWxpY2RuLmNvbS9hbGlsb2cvbWxvZy9hcGx1c193ZWJ2dF9tZXNzYWdlci5qc1wiXG5cdCAgICAgICAgICAgIF1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICBdXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICBdXG5cdH07XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5LqR5LiKd2Vi5Z+L54K56aqM6K+BYXBsdXNfdHJhY2tfZGVidWdfaWTms6jlhaXpgLvovpFcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGRvYyA9IGRvY3VtZW50O1xuXHQgICAgICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuXHQgICAgICAvLyDkv53or4Hlj6rkvJrmnInkuIDkuKphcGx1c19wbHVnaW5fbW9uaXRvcui/kOihjFxuXHQgICAgICBpZiAoYXBsdXMuX2FwbHVzX2NwbHVnaW5fdHJhY2tfZGViKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIGFwbHVzLl9hcGx1c19jcGx1Z2luX3RyYWNrX2RlYiA9IHtcblx0ICAgICAgICAnc3RhdHVzJzogJ2luaXQnXG5cdCAgICAgIH07XG5cdCAgICAgIHZhciB3aW4gPSB3aW5kb3c7XG5cdCAgICAgIHZhciBpc1RyYWNrRGVidWcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHZhciBMUyA9IHdpbi5sb2NhbFN0b3JhZ2U7XG5cdCAgICAgICAgICB2YXIgX3RyYWNraWQgPSAnYXBsdXNfdHJhY2tfZGVidWdfaWQnO1xuXHQgICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJ1s/fCZdJyArIF90cmFja2lkICsgJz0oXFxcXHcqKScpO1xuXHQgICAgICAgICAgdmFyIG1hdGNoX3ZhbHVlID0gbG9jYXRpb24uaHJlZi5tYXRjaChyZWcpO1xuXHQgICAgICAgICAgaWYgKG1hdGNoX3ZhbHVlICYmIG1hdGNoX3ZhbHVlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgTFMuc2V0SXRlbShfdHJhY2tpZCwgbWF0Y2hfdmFsdWVbMV0pO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIF9yID0gZG9jLnJlZmVycmVyIHx8ICcnO1xuXHQgICAgICAgICAgICB2YXIgbWF0Y2hfcmVmZXIgPSBfci5tYXRjaChyZWcpO1xuXHQgICAgICAgICAgICBpZiAobWF0Y2hfcmVmZXIgJiYgbWF0Y2hfcmVmZXIubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgIExTLnNldEl0ZW0oX3RyYWNraWQsIG1hdGNoX3JlZmVyWzFdKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICB2YXIgX24gPSB3aW4ubmFtZSB8fCAnJztcblx0ICAgICAgICAgICAgICB2YXIgbWF0Y2hfbmFtZSA9IF9uLm1hdGNoKHJlZyk7XG5cdCAgICAgICAgICAgICAgaWYgKG1hdGNoX25hbWUgJiYgbWF0Y2hfbmFtZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgICAgICBMUy5zZXRJdGVtKF90cmFja2lkLCBtYXRjaF9uYW1lWzFdKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHZhciBfdHJhY2tpZFZhbHVlID0gTFMuZ2V0SXRlbShfdHJhY2tpZCkgfHwgJyc7XG5cdCAgICAgICAgICBpZiAoX3RyYWNraWRWYWx1ZSAmJiBfdHJhY2tpZFZhbHVlLmxlbmd0aCA+IDUwKSB7XG5cdCAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBfdHJhY2tpZFZhbHVlLnNwbGl0KCdfJyk7XG5cdCAgICAgICAgICAgIHZhciBkYXRlO1xuXHQgICAgICAgICAgICBpZiAodmFsdWVzICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgICAgZGF0ZSA9IHZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV0ucmVwbGFjZSgvbG9nLywgJycpO1xuXHQgICAgICAgICAgICAgIHZhciBsb2dkYXRlID0gbmV3IERhdGUoKTtcblx0ICAgICAgICAgICAgICB2YXIgbG9nZGF0ZVRpbWUgPSBsb2dkYXRlLmdldFRpbWUoKTtcblx0ICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcblx0ICAgICAgICAgICAgICB2YXIgbm93VGltZSA9IG5vdy5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgICAgbG9nZGF0ZS5zZXRGdWxsWWVhcihwYXJzZUludChkYXRlLnN1YnN0cigwLCA0KSkpO1xuXHQgICAgICAgICAgICAgIGxvZ2RhdGUuc2V0TW9udGgocGFyc2VJbnQoZGF0ZS5zdWJzdHIoNCwgMikgLSAxKSk7XG5cdCAgICAgICAgICAgICAgbG9nZGF0ZS5zZXREYXRlKHBhcnNlSW50KGRhdGUuc3Vic3RyKDYsIDIpKSk7XG5cdCAgICAgICAgICAgICAgbG9nZGF0ZS5zZXRIb3VycyhwYXJzZUludChkYXRlLnN1YnN0cig4LCAyKSkpO1xuXHQgICAgICAgICAgICAgIGxvZ2RhdGUuc2V0TWludXRlcyhwYXJzZUludChkYXRlLnN1YnN0cigxMCwgMikpKTtcblx0ICAgICAgICAgICAgICBsb2dkYXRlLnNldFNlY29uZHMocGFyc2VJbnQoZGF0ZS5zdWJzdHIoMTIsIDIpKSk7XG5cdCAgICAgICAgICAgICAgbG9nZGF0ZS5zZXRNaWxsaXNlY29uZHMoMCk7XG5cdCAgICAgICAgICAgICAgbG9nZGF0ZVRpbWUgPSBsb2dkYXRlLmdldFRpbWUoKTtcblx0ICAgICAgICAgICAgICBub3dUaW1lID0gbm93LmdldFRpbWUoKTtcblx0ICAgICAgICAgICAgICB2YXIgbGltaXQgPSBub3dUaW1lIC0gbG9nZGF0ZVRpbWU7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIGxpbWl0IDw9IDM2MDAwMDAgPyAoX3RyYWNraWRWYWx1ZSB8fCBtYXRjaF92YWx1ZVsxXSkgOiBmYWxzZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIHZhciBhcGx1c190cmFja19kZWJ1Z19pZCA9IGlzVHJhY2tEZWJ1ZygpO1xuXHQgICAgICBpZiAoYXBsdXNfdHJhY2tfZGVidWdfaWQpIHtcblx0ICAgICAgICBhcGx1cy5fYXBsdXNfY3BsdWdpbl90cmFja19kZWIuc3RhdHVzID0gJ3N0YXJ0Jztcblx0ICAgICAgICB2YXIgb2JqID0ge1xuXHQgICAgICAgICAgYXBsdXNfdHJhY2tfZGVidWdfaWQ6IGFwbHVzX3RyYWNrX2RlYnVnX2lkLFxuXHQgICAgICAgIH07XG5cdCAgICAgICAgdmFyIHEgPSB3aW5kb3cuYXBsdXNfcXVldWUgfHwgKHdpbmRvdy5hcGx1c19xdWV1ZSA9IFtdKTtcblx0ICAgICAgICBxLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWV4ZGF0YScsIG9ial1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBxLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCBvYmpdXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGFwbHVzLl9hcGx1c19jcGx1Z2luX3RyYWNrX2RlYi5zdGF0dXMgPSAnY29tcGxldGUnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICog562J5b6FYm9keSByZWFkeVxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uIChzdGF0ZSwgY2IpIHtcblx0ICAgICAgdmFyIGhhbmRsZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuXHQgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpLmxlbmd0aCkge1xuXHQgICAgICAgICAgY2xlYXJJbnRlcnZhbChoYW5kbGVyKTtcblx0ICAgICAgICAgIGhhbmRsZXIgPSBudWxsO1xuXHQgICAgICAgICAgY2IoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIDUwKTtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGhhbmRsZXIpIHtcblx0ICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaGFuZGxlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCAxMDAwKTtcblx0ICAgICAgcmV0dXJuIDEwMDA7XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdHZhciBQdWJTdWJXZWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgLy8g5L+d6K+B5Y+q5Lya5pyJ5LiA5LiqcHVic3Vi6L+Q6KGMXG5cdCAgICAgIGlmIChhcGx1cy5hcGx1c19wdWJzdWIpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgLy8gYXBsdXMuYXBsdXNfcHVic3Vi5piv5LiA5Liq55uR5ZCs6ICF77yM5Zyo5o+S5Lu25YyW5YaF6YOo5Lya55So5Yiw5LuW77yM5pyJ5pWw5o2u5Y+Y5YyW5bCG5Lya5Y+R5bCE55u45bqU55qEZGF0YWNoYW5nZeS6i+S7tlxuXHQgICAgICBhcGx1cy5hcGx1c19wdWJzdWIgPSBQdWJTdWJXZWIuY3JlYXRlKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgUHViU3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUHViU3ViLmV4dGVuZCh7XG5cdCAgLyoqXG5cdCAgICog6K6i6ZiF5Yiw5LiA5qyh5Zue6LCD5ZCO5Y+W5raI6K6i6ZiFXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGgg6K6i6ZiF55qE5raI5oGv5Zue6LCD5Ye95pWwXG5cdCAgICogQHJldHVybiBjb250ZXh0XG5cdCAgICovXG5cdCAgc3Vic2NyaWJlT25jZTogZnVuY3Rpb24oZVR5cGUsIGgpIHtcblx0ICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuXHQgICAgdGhpcy5jYWxsYWJsZShoKTtcblx0XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgdmFyIG9uY2U7XG5cdCAgICB0aGlzLnN1YnNjcmliZS5jYWxsKHRoaXMsIGVUeXBlLCBvbmNlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIF9zZWxmLnVuc3Vic2NyaWJlLmNhbGwoX3NlbGYsIGVUeXBlLCBvbmNlKTtcblx0ICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHQgICAgICBoLmFwcGx5KF9zZWxmLCBhcmdzKTtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHR9KTtcblxuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3Mvc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzXG5cdCAqIOa2iOaBr+iuoumYheaooeWei1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgZ2V0QXJncyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0ICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG5cdCAgdmFyIF9hcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuXHQgIGZvciAodmFyIGogPSAxOyBqIDwgbGVuOyBqKyspIHtcblx0ICAgIF9hcmdzW2ogLSAxXSA9IGFyZ3Nbal07XG5cdCAgfVxuXHQgIHJldHVybiBfYXJncztcblx0fTtcblx0XG5cdHZhciBQdWJTdWIgPSBCYXNlLmV4dGVuZCh7XG5cdCAgLyoqXG5cdCAgICog5a+5Zm7ov5vooYzmlq3oqIDvvIzkuI3mmK/igJhmdW5jdGlvbuKAmeexu+Wei+aKpemUme+8jOWQpuWImei/lOWbnmZuXG5cdCAgICovXG5cdCAgY2FsbGFibGU6IGZ1bmN0aW9uIChmbikge1xuXHQgICAgaWYgKCFpc0Z1bmN0aW9uKGZuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcblx0ICAgIHJldHVybiBmbjtcblx0ICB9LFxuXHRcblx0ICBjcmVhdGU6IGZ1bmN0aW9uIChwcm9wcykge1xuXHQgICAgdmFyIGluc3RhbmNlID0gbmV3IHRoaXMoKTtcblx0ICAgIC8vIOe7keWumuivpeWunuS+i+eahOWxnuaAp1xuXHQgICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuXHQgICAgICBpbnN0YW5jZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuXHQgICAgfVxuXHRcblx0ICAgIGluc3RhbmNlLmhhbmRsZXJzID0gW107XG5cdCAgICBpbnN0YW5jZS5wdWJzID0ge307XG5cdCAgICByZXR1cm4gaW5zdGFuY2U7XG5cdCAgfSxcblx0XG5cdCAgc2V0SGFuZGxlcnM6IGZ1bmN0aW9uKGhhbmRsZXJzKSB7XG5cdCAgICB0aGlzLmhhbmRsZXJzID0gaGFuZGxlcnM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog6K6i6ZiF5Y+l5p+E5Li64oCcZVR5cGXigJ3nmoTmtojmga/vvIzlvZPmnInmtojmga/ov4fmnaXmiafooYzlm57osIPlh73mlbDvvJrigJxo4oCdXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGgg6K6i6ZiF55qE5raI5oGv5Zue6LCD5Ye95pWwXG5cdCAgICogQHJldHVybiBjb250ZXh0XG5cdCAgICovXG5cdCAgc3Vic2NyaWJlOiBmdW5jdGlvbihlVHlwZSwgaCl7XG5cdCAgICAvLyDlr7nlm57osIPlh73mlbDov5vooYzmlq3oqIBcblx0ICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cdFxuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIHZhciBwdWJzID0gX3NlbGYucHVicyB8fCB7fTtcblx0XG5cdCAgICB2YXIgYXJyID0gcHVic1tlVHlwZV0gfHwgW107XG5cdCAgICBpZiAoYXJyKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIF9hcmdzID0gYXJyW2ldKCk7XG5cdCAgICAgICAgaC5hcHBseShfc2VsZiwgX2FyZ3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgaGFuZGxlcnMgPSBfc2VsZi5oYW5kbGVycyB8fCBbXTtcblx0ICAgIGlmKCEoZVR5cGUgaW4gaGFuZGxlcnMpKSB7XG5cdCAgICAgIGhhbmRsZXJzW2VUeXBlXSA9IFtdO1xuXHQgICAgfVxuXHQgICAgaGFuZGxlcnNbZVR5cGVdLnB1c2goaCk7XG5cdCAgICBfc2VsZi5zZXRIYW5kbGVycyhoYW5kbGVycyk7XG5cdCAgICByZXR1cm4gX3NlbGY7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5Y+W5raI6K6i6ZiF77yM5bCG5Lya5Y+W5raI4oCcZVR5cGXigJ3lj6Xmn4Tlr7nlupTnmoTigJxo4oCd5Zue6LCD5Ye95pWw5LiL55qE5omA5pyJ6K6i6ZiFXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGgg6K6i6ZiF55qE5raI5oGv5Zue6LCD5Ye95pWwXG5cdCAgICogQHJldHVybiBjb250ZXh0XG5cdCAgICovXG5cdCAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uKGVUeXBlLCBoKSB7XG5cdCAgICAvLyDlr7nlm57osIPlh73mlbDov5vooYzmlq3oqIBcblx0ICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cdFxuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIHMgPSB0aGlzLmhhbmRsZXJzW2VUeXBlXTtcblx0ICAgICAgaWYgKCFzKSByZXR1cm4gdGhpcztcblx0XG5cdCAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ29iamVjdCcgJiYgcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIHZhciBoX3N0ciA9IGgudG9TdHJpbmcoKTtcblx0ICAgICAgICAgIHZhciBzX3N0ciA9IHNbaV0udG9TdHJpbmcoKTtcblx0ICAgICAgICAgIGlmIChoX3N0ciA9PT0gc19zdHIpIHtcblx0ICAgICAgICAgICAgcy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuaGFuZGxlcnNbZVR5cGVdID0gcztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc1tlVHlwZV07XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDmtojmga/liIblj5HvvIzlsIbkvJrliIblj5HliLDmiYDmnInorqLpmIVlVHlwZeWPpeafhOeahOiuoumYheiAhVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDliIblj5Hmtojmga/lj6Xmn4Rcblx0ICAgKi9cblx0ICBwdWJsaXNoOiBmdW5jdGlvbiAoZVR5cGUpIHtcblx0XG5cdCAgICB2YXIgYXJncyA9IGdldEFyZ3MoYXJndW1lbnRzKTtcblx0ICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMgfHwgW107XG5cdFxuXHQgICAgdmFyIHNpemUgPSBoYW5kbGVyc1tlVHlwZV0gPyBoYW5kbGVyc1tlVHlwZV0ubGVuZ3RoIDogMDtcblx0ICAgIGlmIChzaXplID4gMCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuXHQgICAgICAgIHZhciBmbiA9IGhhbmRsZXJzW2VUeXBlXVtpXTtcblx0ICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcblx0ICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH0sXG5cdFxuXHQgIGNhY2hlUHViczogZnVuY3Rpb24gKGVUeXBlKSB7XG5cdCAgICB2YXIgcHVicyA9IHRoaXMucHVicyB8fCB7fTtcblx0ICAgIHZhciBhcmdzID0gZ2V0QXJncyhhcmd1bWVudHMpO1xuXHQgICAgaWYgKCFwdWJzW2VUeXBlXSkge1xuXHQgICAgICBwdWJzW2VUeXBlXSA9IFtdO1xuXHQgICAgfVxuXHQgICAgcHVic1tlVHlwZV0ucHVzaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBhcmdzO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUHViU3ViO1xuXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobykge1xuXHQgIHJldHVybiB0eXBlb2YgbyA9PT0gJ2Z1bmN0aW9uJztcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy9zcmMvbGliX3UvY29yZS9CYXNlLmpzXG5cdCAqIOWfuuexu++8jOaPkOS+m+exu+aJgOmcgOimgeeahOWfuuehgOWxnuaAp1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvLyDln7rnsbtcblx0ZnVuY3Rpb24gQmFzZSgpIHt9XG5cdFxuXHQvLyDlsIZleHRlbmTlkoxjcmVhdGXnva7kuo5wcm90b3R5cGXlr7nosaHkuK3vvIzku6Xkvr/lrZDnsbvnu6fmib9cblx0QmFzZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24oKSB7fTtcblx0QmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oKSB7fTtcblx0XG5cdC8vIOS4uuS6huiDveWcqOWfuuexu+S4iuebtOaOpeS7pS5leHRlbmTnmoTmlrnlvI/ov5vooYzosIPnlKhcblx0QmFzZS5leHRlbmQgPSBmdW5jdGlvbihwcm9wcykge1xuXHQgIHJldHVybiB0aGlzLnByb3RvdHlwZS5leHRlbmQuY2FsbCh0aGlzLCBwcm9wcyk7XG5cdH07XG5cdFxuXHRCYXNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihwcm9wcykge1xuXHQgIC8qKlxuXHQgICAqIGNyZWF0ZeWunumZheS4iuaYr+WvuW5ld+eahOWwgeijhe+8m1xuXHQgICAqIGNyZWF0Zei/lOWbnueahOWunuS+i+WunumZheS4iuWwseaYr25ld+aehOmAoOWHuueahOWunuS+i++8m1xuXHQgICAqIHRoaXPljbPmjIflkJHosIPnlKjlvZPliY1jcmVhdGXnmoTmnoTpgKDlh73mlbDvvJtcblx0ICAgKi9cblx0ICB2YXIgaW5zdGFuY2UgPSBuZXcgdGhpcygpO1xuXHQgIC8vIOe7keWumuivpeWunuS+i+eahOWxnuaAp1xuXHQgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgIGluc3RhbmNlW25hbWVdID0gcHJvcHNbbmFtZV07XG5cdCAgfVxuXHQgIHJldHVybiBpbnN0YW5jZTtcblx0fTtcblx0XG5cdEJhc2UucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgLy8g5rS+55Sf5Ye65p2l55qE5paw55qE5a2Q57G7XG5cdCAgdmFyIFN1YkJhc2UgPSBmdW5jdGlvbigpIHt9O1xuXHQgIHRyeSB7XG5cdCAgICAvKipcblx0ICAgICAqIOe7p+aJv+eItuexu+eahOWxnuaAp+WSjOaWueazle+8jFxuXHQgICAgICog5b2T54S25YmN5o+Q5piv54i257G755qE5bGe5oCn6YO95pS+5ZyocHJvdG90eXBl5LitXG5cdCAgICAgKiDogIzpnZ7kuIrpnaJjcmVhdGXmlrnms5XnmoTigJzlrp7kvovlsZ7mgKfigJ3kuK1cblx0ICAgICAqL1xuXHQgICAgaWYgKCFpc0Z1bmN0aW9uKE9iamVjdC5jcmVhdGUpKSB7XG5cdCAgICAgIE9iamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAobykge1xuXHQgICAgICAgIGZ1bmN0aW9uIEYoKSB7fVxuXHQgICAgICAgIEYucHJvdG90eXBlID0gbztcblx0ICAgICAgICByZXR1cm4gbmV3IEYoKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICAgIFN1YkJhc2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSh0aGlzLnByb3RvdHlwZSk7XG5cdFxuXHQgICAgLy8g5bm25LiU5re75Yqg6Ieq5bex55qE5pa55rOV5ZKM5bGe5oCnXG5cdCAgICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG5cdCAgICAgIFN1YkJhc2UucHJvdG90eXBlW25hbWVdID0gcHJvcHNbbmFtZV07XG5cdCAgICB9XG5cdCAgICBTdWJCYXNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1YkJhc2U7XG5cdFxuXHQgICAgLy8g6ZyA6KaB5LulLmV4dGVuZOeahOaWueW8j+WSjC5jcmVhdGXnmoTmlrnlvI/osIPnlKjvvJpcblx0ICAgIFN1YkJhc2UuZXh0ZW5kID0gU3ViQmFzZS5wcm90b3R5cGUuZXh0ZW5kO1xuXHQgICAgU3ViQmFzZS5jcmVhdGUgPSBTdWJCYXNlLnByb3RvdHlwZS5jcmVhdGU7XG5cdCAgfSBjYXRjaChlcnIpIHtcblx0ICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coZXJyKTtcblx0ICB9IGZpbmFsbHkge1xuXHQgICAgcmV0dXJuIFN1YkJhc2U7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBCYXNlO1xuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOWuouaIt+err+S+pua1i+iEmuacrFxuXHQgKiAgQHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2tpc3N5dGVhbS9raXNzeS9ibG9iLzEuNC54L3NyYy9zZWVkL3NyYy91YS5qc1xuXHQgKiAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3l1eXUxOTExL01hZ25ldG8vYmxvYi9tYXN0ZXIvc3JjL3BsdWdpbnMvY2xpZW50L3VhLmpzXG5cdCAqICAgICAgICBodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS90Yi9hcC9ibG9iL21hc3Rlci9idWlsZC8xLjAvcG9jL20vb3MuanNcblx0ICogICAgICAgIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL3RiL2FwL2Jsb2IvbWFzdGVyL2J1aWxkLzEuMC9tL20vdWEuanNcblx0ICogICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9jbG91ZGNvbWUvanF1ZXJ5LnVhL2Jsb2IvbWFzdGVyL2pxdWVyeS51YS5qc1xuXHQgKlxuXHQgKiDmlK/mjIHnmoTlm73kuqfmtY/op4jlmajvvJpcblx0ICogMzYwc2UgICAgICAgIOaegemAn+aooeW8j1xuXHQgKiAzNjBlZSAgICAgICAg5p6B6YCf5qih5byPXG5cdCAqIOeMjuixuSAgICAgICAgICDlj4zmqKHlvI9cblx0ICogUVEgICAgICAgICAgIOWPjOaooeW8j1xuXHQgKiDlgrLmuLhcblx0ICog5reY5a6dICAgICAgICAgIOaegemAn+aooeW8j1xuXHQgKlxuXHQgKiAqIOebruWJjTM2MGVl55qE5rWL6K+V5piv5ryP6bG85rOV77yM5aaC5p6c5YW25LuW5Yy56YWN5LiN5LiK5bCx5piv5a6D77yM5Zug5q2k5Lya6K+v5YikXG5cdCAqXG5cdCAqIOeOsOWcqOi/mOS4jeiDveajgOa1i+eahOa1j+iniOWZqO+8mlxuXHQgKiAzNjBzZSAgICAgICAgICAgIOWFvOWuueaooeW8j1xuXHQgKiAzNjBlZSAgICAgICAgICAgIOWFvOWuueaooeW8j1xuXHQgKiDmt5jlrp3mtY/op4jlmaggICAgICAgICDlhbzlrrnmqKHlvI9cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIGdvbmdoYW8uZ2hcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuXHQgICAgICBhcGx1cy5fYXBsdXNfY2xpZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOWuouaIt+err+S+pua1i+iEmuacrFxuXHQgKiAgQHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2tpc3N5dGVhbS9raXNzeS9ibG9iLzEuNC54L3NyYy9zZWVkL3NyYy91YS5qc1xuXHQgKiAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL3l1eXUxOTExL01hZ25ldG8vYmxvYi9tYXN0ZXIvc3JjL3BsdWdpbnMvY2xpZW50L3VhLmpzXG5cdCAqICAgICAgICBodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS90Yi9hcC9ibG9iL21hc3Rlci9idWlsZC8xLjAvcG9jL20vb3MuanNcblx0ICogICAgICAgIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL3RiL2FwL2Jsb2IvbWFzdGVyL2J1aWxkLzEuMC9tL20vdWEuanNcblx0ICogICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9jbG91ZGNvbWUvanF1ZXJ5LnVhL2Jsb2IvbWFzdGVyL2pxdWVyeS51YS5qc1xuXHQgKlxuXHQgKiDmlK/mjIHnmoTlm73kuqfmtY/op4jlmajvvJpcblx0ICogMzYwc2UgICAgICAgIOaegemAn+aooeW8j1xuXHQgKiAzNjBlZSAgICAgICAg5p6B6YCf5qih5byPXG5cdCAqIOeMjuixuSAgICAgICAgICDlj4zmqKHlvI9cblx0ICogUVEgICAgICAgICAgIOWPjOaooeW8j1xuXHQgKiDlgrLmuLhcblx0ICog5reY5a6dICAgICAgICAgIOaegemAn+aooeW8j1xuXHQgKlxuXHQgKiAqIOebruWJjTM2MGVl55qE5rWL6K+V5piv5ryP6bG85rOV77yM5aaC5p6c5YW25LuW5Yy56YWN5LiN5LiK5bCx5piv5a6D77yM5Zug5q2k5Lya6K+v5YikXG5cdCAqXG5cdCAqIOeOsOWcqOi/mOS4jeiDveajgOa1i+eahOa1j+iniOWZqO+8mlxuXHQgKiAzNjBzZSAgICAgICAgICAgIOWFvOWuueaooeW8j1xuXHQgKiAzNjBlZSAgICAgICAgICAgIOWFvOWuueaooeW8j1xuXHQgKiDmt5jlrp3mtY/op4jlmaggICAgICAgICDlhbzlrrnmqKHlvI9cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIGdvbmdoYW8uZ2hcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gZ2V0T2xkRmFzaGlvbk9zSW5mbyh1YSkge1xuXHQgIHZhciB0b2tlbiA9IFtcblx0ICAgIFsnV2luZG93cyBOVCA1LjEnLCAnd2luWFAnXSxcblx0ICAgIFsnV2luZG93cyBOVCA2LjEnLCAnd2luNyddLFxuXHQgICAgWydXaW5kb3dzIE5UIDYuMCcsICd3aW5WaXN0YSddLFxuXHQgICAgWydXaW5kb3dzIE5UIDYuMicsICd3aW44J10sXG5cdCAgICBbJ1dpbmRvd3MgTlQgNi4zJywgJ3dpbjguMSddLFxuXHQgICAgWydXaW5kb3dzIE5UIDEwLjAnLCAnd2luMTAnXSxcblx0ICAgIFsnVWJ1bnR1JywgJ3VidW50dSddLFxuXHQgICAgWydMaW51eCcsICdsaW51eCddLFxuXHQgICAgWydXaW5kb3dzIE5UIDUuMicsICd3aW4yMDAzJ10sXG5cdCAgICBbJ1dpbmRvd3MgTlQgNS4wJywgJ3dpbjIwMDAnXSxcblx0ICAgIFsnV2luZG93cycsICd3aW5PdGhlciddLFxuXHQgICAgWydyaGlubycsICdyaGlubyddXG5cdCAgXTtcblx0ICBmb3IgKHZhciBpID0gMCwgbGVuID0gdG9rZW4ubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcblx0ICAgIHZhciB0b2tlbjAgPSB0b2tlbltpXVswXTtcblx0ICAgIGlmICh1YS5pbmRleE9mKHRva2VuMCkgIT09IC0xKSB7XG5cdCAgICAgIHZhciBvcyA9IHRva2VuMC5zcGxpdCgnICcpWzBdO1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGRldmljZV9tb2RlbDogb3MsXG5cdCAgICAgICAgb3M6IG9zLFxuXHQgICAgICAgIG9zX3ZlcnNpb246IHRva2VuW2ldWzFdXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBPVEhFUiA9ICdvdGhlcic7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGRldmljZV9tb2RlbDogT1RIRVIsXG5cdCAgICBvczogT1RIRVIsXG5cdCAgICBvc192ZXJzaW9uOiBPVEhFUlxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldE1vZGVybk9TSW5mbyAodWEsIGRldmljZV9tb2RlbCkge1xuXHQgIC8qKlxuXHQgICAqIGlQYWQ7IENQVSBPUyAxMV8wIGxpa2UgTWFjIE9TIFhcblx0ICAgKiBpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTFfMCBsaWtlIE1hYyBPUyBYXG5cdCAgICogTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxMF8xNF80XG5cdCAgICogTGludXg7IEFuZHJvaWQgNS4wOyBTTS1HOTAwUCBCdWlsZC9MUlgyMVRcblx0ICAgKi9cblx0ICB2YXIgb3NJbmZvID0gdWEuc3Vic3RyaW5nKHVhLmluZGV4T2YoJygnKSArIDEsIHVhLmluZGV4T2YoJyknKSk7XG5cdCAgdmFyIHJzID0ge1xuXHQgICAgZGV2aWNlX21vZGVsOiBkZXZpY2VfbW9kZWwsXG5cdCAgfTtcblx0ICB2YXIgZCA9IGRldmljZV9tb2RlbC50b0xvd2VyQ2FzZSgpO1xuXHQgIHN3aXRjaCAoZCkge1xuXHQgIGNhc2UgJ2lwYWQnOlxuXHQgIGNhc2UgJ2lwaG9uZSc6XG5cdCAgY2FzZSAnaXBvZCc6XG5cdCAgY2FzZSAnbWFjaW50b3NoJzpcblx0ICAgIGlmIChkID09PSAnbWFjaW50b3NoJykge1xuXHQgICAgICBpZiAoL01hYyBPUyBYLy50ZXN0KG9zSW5mbykpIHtcblx0ICAgICAgICBycy5vcyA9ICdNYWMgT1MgWCc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcnMub3MgPSAnTWFjIE9TJztcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcnMub3MgPSAnSU9TJztcblx0ICAgIH1cblx0ICAgIHJzLm9zX3ZlcnNpb24gPSBvc0luZm8ubWF0Y2goL1swLTlfLl0rLylbMF07XG5cdCAgICBicmVhaztcblx0ICBjYXNlICdhbmRyb2lkJzpcblx0ICAgIHJzLm9zID0gJ0FuZHJvaWQnO1xuXHQgICAgcnMub3NfdmVyc2lvbiA9IG9zSW5mby5tYXRjaCgvWzAtOS5dKy8pWzBdO1xuXHQgICAgYnJlYWs7XG5cdCAgZGVmYXVsdDpcblx0ICAgIGJyZWFrO1xuXHQgIH1cblx0ICBycy5vc192ZXJzaW9uID0gcnMub3NfdmVyc2lvbi5yZXBsYWNlKC9fL2csICcuJyk7XG5cdCAgcmV0dXJuIHJzO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgVUEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuXHQgIHZhciBpbmZvID0ge307XG5cdCAgdmFyIG1vZGVybk9TID0gVUEubWF0Y2goL2lwaG9uZXxpcGFkfGFuZHJvaWR8bWFjaW50b3NoL2kpO1xuXHQgIHZhciBEYXJ3aW5PUyA9IFVBLm1hdGNoKC9EYXJ3aW4vaSk7XG5cdCAgaWYgKG1vZGVybk9TKSB7XG5cdCAgICBpbmZvID0gZ2V0TW9kZXJuT1NJbmZvKFVBLCBtb2Rlcm5PU1swXSk7XG5cdCAgfSBlbHNlIGlmIChEYXJ3aW5PUykge1xuXHQgICAgdmFyIF9vcyA9IFVBLnNwbGl0KCcgJylbMl07XG5cdCAgICBpbmZvID0ge1xuXHQgICAgICBvczogJ0RhcndpbicsXG5cdCAgICAgIG9zX3ZlcnNpb246IF9vcy5tYXRjaCgvWzAtOS5dKy8pWzBdLFxuXHQgICAgICBkZXZpY2VfbW9kZWw6ICdEYXJ3aW4nXG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpbmZvID0gZ2V0T2xkRmFzaGlvbk9zSW5mbyhVQSk7XG5cdCAgfVxuXHQgIHZhciBzY3IgPSBzY3JlZW4gfHwge307XG5cdCAgaW5mby5zY3JlZW5XaWR0aCA9IHNjci53aWR0aDtcblx0ICBpbmZvLnNjcmVlbkhlaWdodCA9IHNjci5oZWlnaHQ7XG5cdFxuXHQgIGlmIChuYXZpZ2F0b3IpIHtcblx0ICAgIGluZm8udXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCAnLSc7XG5cdCAgICBpbmZvLmxhbmd1YWdlID0gbmF2aWdhdG9yLmxhbmd1YWdlIHx8IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UgfHwgJy0nO1xuXHQgIH1cblx0ICByZXR1cm4gaW5mbztcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDojrflj5bpobXpnaLkuIrnmoQgPG1ldGE+IOS4reS4jiBhcGx1cyDmiZPngrnnm7jlhbPnmoTlgLxcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuXHQgICAgICogICBsb2dDb25maWc6IHtsb2dDb25maWd9XG5cdCAgICAgKiB9XG5cdCAgICAgKi9cblx0ICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgIC8vIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fd2VicGFja19yZXF1aXJlX18oMTUpKHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluLmpzXG5cdCAqIG1ldGHphY3nva7mj5Lku7bvvIzooqthcGnmj5Lku7bkvp3otZZcblx0ICpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciBhc3NpZ24gPSByZXF1aXJlKCdAdXRpbHMvYXNzaWduJyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsVXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciB1dGlsTmF0aXZlNEFwbHVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdHZhciB1dGlsTmFtZVN0b3JhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0dmFyIG1ldGFJbmZvID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdFxuXHRmdW5jdGlvbiBnZXRDZG5QYXRoICgpIHtcblx0ICB2YXIgZG9jID0gZG9jdW1lbnQ7XG5cdCAgdmFyIHBhdGggPSAnLy9nLmFsaWNkbi5jb20nO1xuXHQgIGlmIChkb2MpIHtcblx0ICAgIHZhciBjdXJyZW50X25vZGUgPSBkb2MuZ2V0RWxlbWVudEJ5SWQoJ2JlYWNvbi1hcGx1cycpIHx8IGRvYy5nZXRFbGVtZW50QnlJZCgndGItYmVhY29uLWFwbHVzJyk7XG5cdCAgICB2YXIgcGF0aF9vdGhlcnMgPSBbJy8vYXNzZXRzLmFsaWNkbi5jb20vZycsICcvL2ctYXNzZXRzLmRhaWx5LnRhb2Jhby5uZXQnLCAnLy9hbGlkdC5vc3MtY24taGFuZ3pob3UuYWxpeXVuY3MuY29tJ107XG5cdCAgICBpZiAoY3VycmVudF9ub2RlKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aF9vdGhlcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cChwYXRoX290aGVyc1tpXSk7XG5cdCAgICAgICAgaWYgKHJlZy50ZXN0KGN1cnJlbnRfbm9kZS5zcmMpKSB7XG5cdCAgICAgICAgICBwYXRoID0gcGF0aF9vdGhlcnNbaV07XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gIFxuXHQgIH1cblx0ICByZXR1cm4gcGF0aDtcblx0fVxuXHRcblx0dmFyIGNkblBhdGg7XG5cdC8vIOaYr+WQpuWbvemZheeOr+Wig1xuXHRmdW5jdGlvbiBpc0ludGVybmF0aW9uYWwgKCkge1xuXHQgIGlmICghY2RuUGF0aCkge1xuXHQgICAgY2RuUGF0aCA9IGdldENkblBhdGgoKTtcblx0ICB9XG5cdCAgdmFyIGlzSW50ID0gY2RuUGF0aCA9PT0gJy8vYXNzZXRzLmFsaWNkbi5jb20vZycgfHwgY2RuUGF0aCA9PT0gJy8vbGF6LWctY2RuLmFsaWNkbi5jb20nO1xuXHQgIHJldHVybiBpc0ludCB8fCBtZXRhSW5mby5nZXRNZXRhSW5mbygnYXBsdXMtZW52JykgPT09ICdpbnQnO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc01vYmlsZSAoKSB7XG5cdCAgaWYgKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50KSB7XG5cdCAgICB2YXIgaXNQaG9uZSA9ICgvaXBob25lfGFuZHJvaWQvaSkudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblx0ICAgIHZhciBpc01vYmlsZSA9IGlzUGhvbmUgfHwgKC9UQlxcLVBEL2kpLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cdCAgICByZXR1cm4gaXNNb2JpbGU7XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRVdFBhcmFtRnJvbVVybCAoKSB7XG5cdCAgLy8gYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLXV0cGFyYW0nKTtcblx0ICB2YXIgcnM7XG5cdCAgdmFyIHV0cGFyYW1jbnQgPSB1dGlsVXJsLmdldFBhcmFtRnJvbVVybCgndXRwYXJhbWNudCcsIGxvY2F0aW9uLmhyZWYpO1xuXHQgIGlmICh1dHBhcmFtY250KSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBycyA9IHV0cGFyYW1jbnQgPSBKU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudCh1dHBhcmFtY250KSk7XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH1cblx0ICByZXR1cm4gcnM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwbHVzX2NvbmZpZykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBOQU1FX1NUT1JBR0VfS0VZUyA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuTkFNRV9TVE9SQUdFX0tFWVM7XG5cdCAgdmFyIHJlZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCkuZ2V0UmVmZXIoTkFNRV9TVE9SQUdFX0tFWVMpO1xuXHQgIC8vIGFwbHVzLmx2ZXIgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLmx2ZXI7XG5cdCAgYXBsdXMubmFtZVN0b3JhZ2UgPSB1dGlsTmFtZVN0b3JhZ2UubmFtZVN0b3JhZ2U7IC8vIOWOhuWPsuWOn+WboO+8jOWcqCBhcGx1cyDkuIrmmrTpnLLlh7ogbmFtZVN0b3JhZ2Vcblx0ICB1dGlsTmF0aXZlNEFwbHVzLmhhdmVOYXRpdmVGbGFnSW5VQSgpO1xuXHQgIHZhciBfJCA9IChhcGx1cy5fJCA9IGFwbHVzLl8kIHx8IHt9KTsgLy8g5YaF6YOo5L2/55So55qE5Y+Y6YePXG5cdCAgXyQuaXNfdGVybWluYWwgPSBpc01vYmlsZSgpO1xuXHQgIF8kLnNlbmRfcHZfY291bnQgPSAwO1xuXHQgIF8kLnBhZ2VfcmVmZXJyZXIgPSByZWZlcjtcblx0ICBfJC5zcG0gPSB7XG5cdCAgICBkYXRhOiB7fSxcblx0ICAgIHBhZ2VfcmVmZXJyZXI6IHJlZmVyXG5cdCAgfTtcblx0ICBhcGx1cy5nbG9iYWxDb25maWcgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnO1xuXHQgIHZhciB1dHBhcmFtY250ID0gZ2V0VXRQYXJhbUZyb21VcmwoKTtcblx0XG5cdCAgXyQubWV0YV9pbmZvID0gbWV0YUluZm8ucUdldCgpIHx8IHt9O1xuXHQgIGZvciAodmFyIGsgaW4gYXBsdXNfY29uZmlnLm1ldGFJbmZvKSB7XG5cdCAgICBpZiAoIV8kLm1ldGFfaW5mby5oYXNPd25Qcm9wZXJ0eShrKSkge1xuXHQgICAgICB2YXIgbWV0YVZhbHVlID0gYXBsdXNfY29uZmlnLm1ldGFJbmZvW2tdO1xuXHQgICAgICBpZiAoayA9PT0gJ2FwbHVzLXV0cGFyYW0nKSB7XG5cdCAgICAgICAgLy8g6L+Z6YeM55So55So5oi35Zyo6aG16Z2i5LiK6YWN572u55qEYXBsdXMtdXRwYXJhbeWOu21lcmdlIHV0cGFyYW1jbnRcblx0ICAgICAgICB1dHBhcmFtY250ICYmIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKGssIHV0cGFyYW1jbnQpO1xuXHQgICAgICAgIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKGssIG1ldGFWYWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbWV0YUluZm8uc2V0TWV0YUluZm8oaywgbWV0YVZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBcblx0XG5cdCAgYXBsdXMuXyQgPSBfJDtcblx0ICBhcGx1cy5pc0ludGVybmF0aW9uYWwgPSBpc0ludGVybmF0aW9uYWw7XG5cdCAgYXBsdXMuZ2V0Q2RuUGF0aCA9IGdldENkblBhdGg7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIC8qKlxuXHQvLyAgKiDku44gdXJsIOS4reWPluWHuuWvueW6lOeahCBzcG0g5Y+C5pWwXG5cdC8vICAqIEBwYXJhbSB1cmwge1N0cmluZ31cblx0Ly8gICogQHJldHVybiB7U3RyaW5nfSBzcG0gYS5iLmMuZC5wdmlk77yM5LiA5YWx5LqU5L2NXG5cdC8vICAqL1xuXHQvLyBmdW5jdGlvbiBnZXRTUE1Gcm9tVXJsKHVybCkge1xuXHQvLyAgIHZhciBtID0gdXJsLm1hdGNoKG5ldyBSZWdFeHAoJ1xcXFw/LipzcG09KFtcXFxcd1xcXFwuXFxcXC1cXFxcKi9dKyknKSk7XG5cdC8vICAgdmFyIHNwbTtcblx0Ly8gICByZXR1cm4gKG0gJiYgKHNwbSA9IG1bMV0pICYmIHNwbS5zcGxpdCgnLicpLmxlbmd0aCA9PSA1KSA/IHNwbSA6IG51bGw7XG5cdC8vIH1cblx0Ly8gZXhwb3J0cy5nZXRTUE1Gcm9tVXJsID0gZ2V0U1BNRnJvbVVybDtcblx0XG5cdC8qKlxuXHQgKiBAYXV0aG9yIGppemhhLnd5aiAob2xkailcblx0ICogQGJsb2cgaHR0cDovL29sZGoubmV0XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gZ2V0UGFyYW1Gcm9tVXJsKGtleSwgdXJsKSB7XG5cdCAgaWYgKGtleSAmJiB1cmwpIHtcblx0ICAgIHZhciBwYXJhbSA9ICcnO1xuXHQgICAgdmFyIG07XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgcmVnMSA9IG5ldyBSZWdFeHAoa2V5ICsgJz0oW14mfCN8P3xcXC9dKyknKTtcblx0ICAgICAgaWYgKGtleSA9PT0gJ3NwbScgfHwga2V5ID09PSAnc2NtJykge1xuXHQgICAgICAgIHZhciByZWcyID0gbmV3IFJlZ0V4cCgnXFxcXD8uKicgKyBrZXkgKyAnPShbXFxcXHdcXFxcLlxcXFwtXFxcXCovXSspJyk7XG5cdCAgICAgICAgdmFyIHRtcF8xID0gdXJsLm1hdGNoKHJlZzEpO1xuXHQgICAgICAgIHZhciB0bXBfMiA9IHVybC5tYXRjaChyZWcyKTtcblx0ICAgICAgICB2YXIgcGFyYW1fMSA9IHRtcF8xICYmIHRtcF8xLmxlbmd0aCA9PT0gMiA/IHRtcF8xWzFdIDogJyc7XG5cdCAgICAgICAgdmFyIHBhcmFtXzIgPSB0bXBfMiAmJiB0bXBfMi5sZW5ndGggPT09IDIgPyB0bXBfMlsxXSA6ICcnO1xuXHQgICAgICAgIHBhcmFtID0gcGFyYW1fMSA+IHBhcmFtXzIgPyBwYXJhbV8xIDogcGFyYW1fMjtcblx0ICAgICAgICBwYXJhbSA9IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbSA9IHVybC5tYXRjaChyZWcxKTtcblx0ICAgICAgICBwYXJhbSA9IG0gJiYgbS5sZW5ndGggPT09IDIgPyBtWzFdIDogJyc7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAvLyBUT0RPXG5cdCAgICB9IGZpbmFsbHkge1xuXHQgICAgICByZXR1cm4gcGFyYW07XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAnJztcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuZ2V0UGFyYW1Gcm9tVXJsID0gZ2V0UGFyYW1Gcm9tVXJsO1xuXHRcblx0LyoqXG5cdCAqIOS7jiB1cmwg5Lit5Y+W5Ye65a+55bqU55qEIHNwbSDlj4LmlbBcblx0ICog5LyY5bqT5Zyf6LGGc3BtQ+S9jeWPr+iDveWtmOWcqOeJueauiuWtl+espu+8jOWmgu+8muKAnHNwbT0wLjAuaXRlbV9YTVRZNE9URXlOVEEwTUE9PS5BLkJpaU5TMeKAnVxuXHQgKiBAcGFyYW0gdXJsIHtTdHJpbmd9XG5cdCAqIEByZXR1cm4ge1N0cmluZ30gc3BtIGEuYi5jLmQucHZpZO+8jOS4gOWFseS6lOS9jVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRTUE1Gcm9tVXJsID0gZnVuY3Rpb24odXJsKSB7XG5cdCAgcmV0dXJuIGdldFBhcmFtRnJvbVVybCgnc3BtJywgdXJsKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgVVRGTEFHID0gJ1VUNEFwbHVzJztcblx0dmFyIFVNRkxBRyA9ICdVbWVuZzRBcGx1cyc7XG5cdFxuXHRleHBvcnRzLmlzTmF0aXZlNEFwbHVzID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBjaGFubmVsID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXRvVVQnKTtcblx0ICB2YXIgYnJpZGdlTmFtZSA9IGFwbHVzLmFwbHVzQnJpZGdlTmFtZTtcblx0ICByZXR1cm4gKGJyaWRnZU5hbWUgPT09IFVURkxBRyAmJiBjaGFubmVsID09PSBVVEZMQUcpIHx8IGJyaWRnZU5hbWUgPT09IFVNRkxBRztcblx0fTtcblx0XG5cdGV4cG9ydHMuaGF2ZU5hdGl2ZUZsYWdJblVBID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBicmlkZ2VOYW1lID0gYXBsdXMuYXBsdXNCcmlkZ2VOYW1lO1xuXHQgIC8vIOW9k2JyaWRnZU5hbWXkuLrnqbrlgLzml7bmiY3ov5vooYzku6XkuIvnmoTliKTmlq3lkozlpITnkIbpgLvovpHvvIzku6Xmj5DljYflpJrmrKHov5DooYznmoTmgKfog71cblx0ICBpZiAoIWJyaWRnZU5hbWUgJiYgdHlwZW9mIGJyaWRnZU5hbWUgIT09ICdib29sZWFuJyAmJiBuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCkge1xuXHQgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoW1VURkxBRywgVU1GTEFHXS5qb2luKCd8JyksICdpJyk7XG5cdCAgICB2YXIgbWF0Y2hSZXN1bHQgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKHJlZyk7XG5cdCAgICBicmlkZ2VOYW1lID0gbWF0Y2hSZXN1bHQgPyBtYXRjaFJlc3VsdFswXSA6IGZhbHNlO1xuXHQgICAgYXBsdXMuYXBsdXNCcmlkZ2VOYW1lID0gYnJpZGdlTmFtZTtcblx0ICB9XG5cdCAgcmV0dXJuICEhYnJpZGdlTmFtZTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHQvKipcblx0ICogbmFtZVN0b3JhZ2Ug55qE5a6e546w5ou36LSdXG5cdCAqXG5cdCAqIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL2NvZGV2L25hbWUtc3RvcmFnZS90cmVlL21hc3RlclxuXHQgKi9cblx0dmFyIG5hbWVTdG9yYWdlID0gKGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgdmFyIF9uYW1lU3RvcmFnZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCduYW1lU3RvcmFnZScpO1xuXHRcblx0ICBpZiAoX25hbWVTdG9yYWdlKSB7XG5cdCAgICByZXR1cm4gX25hbWVTdG9yYWdlO1xuXHQgIH1cblx0XG5cdCAgdmFyIFNDSEVNRSA9IFwibmFtZVN0b3JhZ2U6XCI7XG5cdCAgLy92YXIgUkVfTkFNRVMgPSAvXm5hbWVTdG9yYWdlOihbXj9dKikoPzpcXD8oPzooW149XSspPShbXiZdKikpKik/L2c7XG5cdCAgdmFyIFJFX1BBSVIgPSAvXihbXj1dKykoPzo9KC4qKSk/JC87XG5cdCAgdmFyIFEgPSBcIj9cIjtcblx0ICB2YXIgRVEgPSBcIj1cIjtcblx0ICB2YXIgQU5EID0gXCImXCI7XG5cdFxuXHQgIHZhciBlbmNvZGUgPSBlbmNvZGVVUklDb21wb25lbnQ7XG5cdCAgdmFyIGRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudDtcblx0XG5cdCAgdmFyIFNUT1JBR0UgPSB7fTtcblx0ICB2YXIgT1JJR0lOX05BTUU7XG5cdFxuXHQgIHZhciBuYW1lU3RvcmFnZSA9IHt9O1xuXHRcblx0ICAvLyDop6PmnpDlubbliJ3lp4vljJYgbmFtZSDmlbDmja7jgIJcblx0ICAvLyDmoIflh4bnmoQgbmFtZVN0b3JhZ2Ug5pWw5o2u5qC85byP5Li6IGBuYW1lU3RvcmFnZTpvcmlnaW4tbmFtZT9rZXk9dmFsdWVgXG5cdCAgLy8gQHBhcmFtIHtTdHJpbmd9IG5hbWUuXG5cdCAgKGZ1bmN0aW9uIHBhcnNlKG5hbWUpIHtcblx0XG5cdCAgICBpZiAobmFtZSAmJiBuYW1lLmluZGV4T2YoU0NIRU1FKSA9PT0gMCkge1xuXHRcblx0ICAgICAgdmFyIG1hdGNoID0gbmFtZS5zcGxpdCgvWzo/XS8pO1xuXHRcblx0ICAgICAgbWF0Y2guc2hpZnQoKTsgLy8gc2NoZW1lOiBtYXRjaFswXTtcblx0ICAgICAgT1JJR0lOX05BTUUgPSBkZWNvZGUobWF0Y2guc2hpZnQoKSkgfHwgXCJcIjsgLy8gbWF0Y2hbMV1cblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSBtYXRjaC5qb2luKFwiXCIpOyAvLyBtYXRjaFsyLC4uLl1cblx0XG5cdCAgICAgIHZhciBwYWlycyA9IHBhcmFtcy5zcGxpdChBTkQpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgcGFpciwga2V5LCB2YWx1ZSwgbCA9IHBhaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHBhaXIgPSBwYWlyc1tpXS5tYXRjaChSRV9QQUlSKTtcblx0ICAgICAgICBpZiAoIXBhaXIgfHwgIXBhaXJbMV0pIHtcblx0ICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAga2V5ID0gZGVjb2RlKHBhaXJbMV0pO1xuXHQgICAgICAgIHZhbHVlID0gZGVjb2RlKHBhaXJbMl0pIHx8IFwiXCI7XG5cdFxuXHQgICAgICAgIFNUT1JBR0Vba2V5XSA9IHZhbHVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgfSBlbHNlIHtcblx0XG5cdCAgICAgIE9SSUdJTl9OQU1FID0gbmFtZSB8fCBcIlwiO1xuXHRcblx0ICAgIH1cblx0XG5cdCAgfSkod2luZG93Lm5hbWUpO1xuXHRcblx0ICAvLyDlhpnlhaXmlbDmja7jgIJcblx0ICAvLyBAcGFyYW0ge1N0cmluZ30ga2V5LCDplK7lkI3jgIJcblx0ICAvLyBAcGFyYW0ge1N0cmluZ30gdmFsdWUsIOmUruWAvOOAglxuXHQgIG5hbWVTdG9yYWdlLnNldEl0ZW0gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgaWYgKCFrZXkgfHwgXCJ1bmRlZmluZWRcIiA9PT0gdHlwZW9mIHZhbHVlKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIFNUT1JBR0Vba2V5XSA9IFN0cmluZyh2YWx1ZSk7XG5cdCAgICBzYXZlKCk7XG5cdCAgfTtcblx0XG5cdCAgLy8g6K+75Y+W5pWw5o2u44CCXG5cdCAgLy8gQHBhcmFtIHtTdHJpbmd9IGtleSwg6ZSu5ZCN44CCXG5cdCAgLy8gQHJldHVybiB7U3RyaW5nfSDplK7lgLzjgILlpoLmnpzkuI3lrZjlnKjvvIzliJnov5Tlm54gYG51bGxg44CCXG5cdCAgbmFtZVN0b3JhZ2UuZ2V0SXRlbSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHJldHVybiBTVE9SQUdFLmhhc093blByb3BlcnR5KGtleSkgPyBTVE9SQUdFW2tleV0gOiBudWxsO1xuXHQgIH07XG5cdFxuXHQgIC8vIOenu+mZpOaVsOaNruOAglxuXHQgIC8vIEBwYXJhbSB7U3RyaW5nfSBrZXksIOmUruWQjeOAglxuXHQgIG5hbWVTdG9yYWdlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBpZiAoIVNUT1JBR0UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBTVE9SQUdFW2tleV0gPSBudWxsO1xuXHQgICAgZGVsZXRlIFNUT1JBR0Vba2V5XTtcblx0ICAgIHNhdmUoKTtcblx0ICB9O1xuXHRcblx0ICAvLyDmuIXnqbogbmFtZVN0b3JhZ2XjgIJcblx0ICBuYW1lU3RvcmFnZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIFNUT1JBR0UgPSB7fTtcblx0ICAgIHNhdmUoKTtcblx0ICB9O1xuXHRcblx0ICBuYW1lU3RvcmFnZS52YWx1ZU9mID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIFNUT1JBR0U7XG5cdCAgfTtcblx0XG5cdCAgbmFtZVN0b3JhZ2UudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbmFtZSA9IHdpbmRvdy5uYW1lO1xuXHQgICAgcmV0dXJuIG5hbWUuaW5kZXhPZihTQ0hFTUUpID09PSAwID8gbmFtZSA6IFNDSEVNRSArIG5hbWU7XG5cdCAgfTtcblx0XG5cdCAgLy8g5L+d5a2Y5pWw5o2u5YiwIHdpbmRvdy5uYW1lXG5cdCAgLy8g5aaC5p6c5rKh5pyJ5a2Y5YKo5pWw5o2u77yM5YiZ5oGi5aSN5Y6f5aeL56qX5Y+j5ZCN56ewKHdpbmRvdy5uYW1lKeOAglxuXHQgIGZ1bmN0aW9uIHNhdmUoKSB7XG5cdCAgICB2YXIgcGFpcnMgPSBbXTtcblx0ICAgIHZhciBlbXB0eSA9IHRydWU7XG5cdCAgICB2YXIgdmFsdWU7XG5cdFxuXHQgICAgZm9yICh2YXIga2V5IGluIFNUT1JBR0UpIHtcblx0ICAgICAgaWYgKFNUT1JBR0UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgIGVtcHR5ID0gZmFsc2U7XG5cdCAgICAgICAgdmFsdWUgPSBTVE9SQUdFW2tleV0gfHwgXCJcIjtcblx0ICAgICAgICBwYWlycy5wdXNoKGVuY29kZShrZXkpICsgRVEgKyBlbmNvZGUodmFsdWUpKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHdpbmRvdy5uYW1lID0gZW1wdHkgPyBPUklHSU5fTkFNRSA6IFNDSEVNRSArIGVuY29kZShPUklHSU5fTkFNRSkgKyBRICsgcGFpcnMuam9pbihBTkQpO1xuXHQgIH07XG5cdFxuXHQgIC8vIGFkZEV2ZW50TGlzdGVyIGltcGxlbWVudGF0aW9uXG5cdCAgLy8gQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudC5cblx0ICAvLyBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lLlxuXHQgIC8vIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIuXG5cdCAgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHtcblx0ICAgIGlmICghZWxlbWVudCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHQgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBmYWxzZSk7XG5cdCAgICB9IGVsc2UgaWYgKGVsZW1lbnQuYXR0YWNoRXZlbnQpIHtcblx0ICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBmdW5jdGlvbiAoZXZ0KSB7XG5cdCAgICAgICAgaGFuZGxlci5jYWxsKGVsZW1lbnQsIGV2dCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8vIFNhdmUgdGhlIGxhc3QgZGF0YSBmb3IgdGhlIG5leHQgcGFnZS5cblx0ICBhZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHNhdmUoKTtcblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIG5hbWVTdG9yYWdlO1xuXHRcblx0fSkoKTtcblx0XG5cdGV4cG9ydHMubmFtZVN0b3JhZ2UgPSBuYW1lU3RvcmFnZTtcblxuXG4vKioqLyB9KSxcbi8qIDE5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDojrflj5bpobXpnaLkuIrnmoQgPG1ldGE+IOS4reS4jiBhcGx1cyDmiZPngrnnm7jlhbPnmoTlgLxcblx0ICog6Zi/6YeM57O75Lia5Yqh6LWw6L+Z5Liq6YC76L6RXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGZvcm1hdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHV0aWxEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciB1dGlsQXR0cmlidXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdHZhciB1dGlsTWV0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHQvLyB2YXIgdXRpbEV4aW5mbyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRXhpbmZvJyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgaW5mbyA9IHt9O1xuXHR2YXIgQVBMVVNfWF9TRVRUSU5HUyA9ICdhcGx1cy14LXNldHRpbmdzJztcblx0dmFyIHByaW9yaXR5TWV0YUluZm87XG5cdFxuXHQvLyDliKDpmaTlpKfph4/nmoRBcnJyYXnvvIzkv53nlZnljoblj7LkuI3op4TojIPnmoRtZXRhTmFtZSAyMDE4LTAxLTEwIEDosIvlo6tcblx0Ly8g6K+m6KeBIGh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvZG9jcy9scHl2Y21cblx0dmFyIGtleXMgPSBbJ2Fob3QtYXBsdXMnLCAnaXNvbmVwYWdlJywgJ3NwbS1pZCcsICdkYXRhLXNwbScsICdtaWNyb3Njb3BlLWRhdGEnXTtcblx0XG5cdC8qKlxuXHQgKiDlj5blvpcgaGVhZCAvIG1ldGEg5Lit55qE5pi+5b6u6ZWc55qE5pWw5o2u77yMXG5cdCAqIOW9ouWmgu+8mlxuXHQgKiA8bWV0YSBuYW1lPVwibWljcm9zY29wZS1kYXRhXCIgY29udGVudD1cInBhZ2VJZD0xMjM7IHNpdGVJZD00NTZcIj5cblx0ICog5Y+v6IO95pyJ5aSa5p2hIG1ldGEg5pWw5o2u44CCXG5cdCAqXG5cdCAqIOebuOWFs+agvOW8j+WPiuivtOaYjuinge+8mlxuXHQgKiBodHRwOi8vd2lraS51ZWQudGFvYmFvLm5ldC9kb2t1LnBocD9pZD10ZWFtOnVkYzpmMmU6d2VidHJhY2VyOmRldi1kb2NzOmV4dHJhLWRhdGFcblx0ICovXG5cdGZ1bmN0aW9uIGdldE1ldGFNaWNyb3Njb3BlRGF0YSAobWV0YV9ub2Rlcykge1xuXHQgIHZhciBpO1xuXHQgIHZhciBtZXRhO1xuXHQgIHZhciBsID0gbWV0YV9ub2Rlcy5sZW5ndGg7XG5cdCAgdmFyIGNvbnRlbnQ7XG5cdCAgdmFyIF9taWNyb3Njb3BlX2RhdGEgPSB7fTtcblx0ICBpbmZvLl9taWNyb3Njb3BlX2RhdGEgPSBfbWljcm9zY29wZV9kYXRhO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBtZXRhID0gbWV0YV9ub2Rlc1tpXTtcblx0ICAgIGlmICh1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsICduYW1lJykgPT09ICdtaWNyb3Njb3BlLWRhdGEnKSB7XG5cdCAgICAgIGNvbnRlbnQgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsICdjb250ZW50Jyk7XG5cdCAgICAgIHV0aWxEYXRhLnBhcnNlU2VtaWNvbG9uQ29udGVudChjb250ZW50LCBfbWljcm9zY29wZV9kYXRhKTtcblx0ICAgICAgaW5mby5pc19oZWFkX2hhc19tZXRhX21pY3Jvc2NvcGVfZGF0YSA9IHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpbmZvLl9taWNyb3Njb3BlX2RhdGFfcGFyYW1zID0gZm9ybWF0Lm9iajJwYXJhbShfbWljcm9zY29wZV9kYXRhKTtcblx0XG5cdCAgaW5mby5tc19kYXRhX3BhZ2VfaWQgPSBfbWljcm9zY29wZV9kYXRhWydwYWdlSWQnXTtcblx0ICBpbmZvLm1zX2RhdGFfc2hvcF9pZCA9IF9taWNyb3Njb3BlX2RhdGFbJ3Nob3BJZCddO1xuXHQgIGluZm8ubXNfZGF0YV9pbnN0YW5jZV9pZCA9IF9taWNyb3Njb3BlX2RhdGFbJ3NpdGVJbnN0YW5jZUlkJ107XG5cdCAgaW5mby5tc19kYXRhX3NpdGVDYXRlZ29yeUlkID0gX21pY3Jvc2NvcGVfZGF0YVsnc2l0ZUNhdGVnb3J5J107XG5cdCAgaW5mby5tc19wcm90b3R5cGVfaWQgPSBfbWljcm9zY29wZV9kYXRhWydwcm90b3R5cGVJZCddO1xuXHQgIGluZm8uc2l0ZV9pbnN0YW5jZV9pZF9vcl9zaG9wX2lkID0gaW5mby5tc19kYXRhX2luc3RhbmNlX2lkIHx8IGluZm8ubXNfZGF0YV9zaG9wX2lkO1xuXHRcblx0ICAvLyDnp7vpmaTkuoYgYXRwLWJlYWNvbiDlip/og73vvIzmmoLml7bkv53nlZnlhaXlj6MgQOiwi+WjqyAyMDE4LTAxLTEwXG5cdCAgaW5mby5fYXRwX2JlYWNvbl9kYXRhID0ge307XG5cdCAgaW5mby5fYXRwX2JlYWNvbl9kYXRhX3BhcmFtcyA9ICcnO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIDxtZXRhIG5hbWU9XCJkYXRhLXNwbVwiIGNvbnRlbnQ9XCIxXCIgZGF0YS1zcG0tcHJvdG9jb2w9XCJpXCIgLz5cblx0ICpcblx0ICog5Y+W5b6XIGRhdGEtc3BtIOi/meS4qiBtZXRhIOS4iueahCBkYXRhLXNwbS1wcm90b2NvbCDnmoTlgLxcblx0ICog5aaC5p6c5pyJ6K6+572u5LiU5YC85Li6ICdpJ++8iOS9v+eUqCBpbWcg5Y2P6K6u77yJ77yM5YiZ6aG16Z2i5LiK5omA5pyJ55qEIDxhPi88YXJlYT4g6ZO+5o6l6KKr54K55Ye75pe26YO95LiN5re75YqgIHNwbSDlj4LmlbDvvIzogIzmmK9cblx0ICog5Y+R6YCB5LiA5LiqIG5ldyBJbWFnZSgpIOivt+axglxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0U1BNUHJvdG9jb2xGcm9tTWV0YSAobWV0YV9ub2Rlcykge1xuXHQgIHZhciBtZXRhX3NwbV9wcm90b2NvbDtcblx0ICB2YXIgZ2V0TWV0YUJ5RGF0YXNwbSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfbWV0YTtcblx0ICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKSB7XG5cdCAgICAgIF9tZXRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPWRhdGEtc3BtXScpO1xuXHQgICAgfVxuXHQgICAgZWFjaChtZXRhX25vZGVzLCBmdW5jdGlvbiAobSkge1xuXHQgICAgICBpZiAodXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtLCAnbmFtZScpID09PSAnZGF0YS1zcG0nKSB7XG5cdCAgICAgICAgX21ldGEgPSBtO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBfbWV0YTtcblx0ICB9O1xuXHQgIHZhciBtZXRhID0gZ2V0TWV0YUJ5RGF0YXNwbSgpO1xuXHQgIGlmIChtZXRhKSB7XG5cdCAgICBtZXRhX3NwbV9wcm90b2NvbCA9IHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobWV0YSwgJ2RhdGEtc3BtLXByb3RvY29sJyk7XG5cdCAgfVxuXHQgIHJldHVybiBtZXRhX3NwbV9wcm90b2NvbDtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHBhcnNlT25lUGFnZShpbmZvKSB7XG5cdCAgdmFyIGNvbnRlbnQgPSBpbmZvLmlzb25lcGFnZSB8fCAnLTEnO1xuXHQgIHZhciBhcnJfY29udGVudCA9IGNvbnRlbnQuc3BsaXQoJ3wnKTtcblx0ICB2YXIgaXNvbmVwYWdlID0gYXJyX2NvbnRlbnRbMF07XG5cdCAgdmFyIHVybHBhZ2VuYW1lID0gYXJyX2NvbnRlbnRbMV0gPyBhcnJfY29udGVudFsxXSA6ICcnO1xuXHRcblx0ICBpbmZvLmlzb25lcGFnZV9kYXRhID0ge1xuXHQgICAgaXNvbmVwYWdlOiBpc29uZXBhZ2UsXG5cdCAgICB1cmxwYWdlbmFtZTogdXJscGFnZW5hbWVcblx0ICB9O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEByZXR1cm5zIHt7fX1cblx0ICovXG5cdHZhciBsYXN0X2luZm87XG5cdGZ1bmN0aW9uIGdldEluZm8oKSB7XG5cdCAgaWYgKGRvY3VtZW50KSB7XG5cdCAgICB2YXIgbWV0YV9ub2RlcyA9IHV0aWxNZXRhLmdldE1ldGFUYWdzKCk7XG5cdCAgICBnZXRNZXRhTWljcm9zY29wZURhdGEobWV0YV9ub2Rlcyk7XG5cdFxuXHQgICAgLy8gc3RlcDHjgIHmi7/liLDmiYDmnIlhcGx1c+WFs+mUruivjeW8gOWktOeahG1ldGFWYWx1ZVxuXHQgICAgZWFjaChtZXRhX25vZGVzLCBmdW5jdGlvbihtKXtcblx0ICAgICAgdmFyIG1ldGFOYW1lID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtLCAnbmFtZScpO1xuXHQgICAgICBpZiAoL15hcGx1cy8udGVzdChtZXRhTmFtZSkpIHtcblx0ICAgICAgICBpbmZvW21ldGFOYW1lXSA9IHV0aWxNZXRhLmdldE1ldGFDbnQobWV0YU5hbWUpO1xuXHQgICAgICAgIGlmIChtZXRhTmFtZSA9PT0gQVBMVVNfWF9TRVRUSU5HUykge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcHJpb3JpdHlNZXRhSW5mbyA9IGluZm9bbWV0YU5hbWVdID0gSlNPTi5wYXJzZSh1dGlsTWV0YS5nZXRNZXRhQ250KG1ldGFOYW1lKSk7XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICAvLyBzdGVwMuOAgeaLv+WIsOmZpOS6hmFwbHVz5YWz6ZSu6K+N5byA5aS055qE77yM5Y6G5Y+y5pq06Zyy55qE5o6l5Y+jbWV0YVZhbHVlXG5cdCAgICBlYWNoKGtleXMsIGZ1bmN0aW9uIChrKSB7XG5cdCAgICAgIGluZm9ba10gPSB1dGlsTWV0YS5nZXRNZXRhQ250KGspO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgaW5mby5zcG1fcHJvdG9jb2wgPSBnZXRTUE1Qcm90b2NvbEZyb21NZXRhKG1ldGFfbm9kZXMpO1xuXHQgICAgaWYgKHByaW9yaXR5TWV0YUluZm8pIHtcblx0ICAgICAgaW5mbyA9IHV0aWxEYXNoLmFzc2lnbihpbmZvLCBwcmlvcml0eU1ldGFJbmZvKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBzdGVwM+OAgea1rueCueaVsOeJueauiuWkhOeQhlxuXHQgICAgdmFyIGZsb2F0X2tleXMgPSBbJ2FwbHVzLXJhdGUtYWhvdCddO1xuXHQgICAgdmFyIGk7XG5cdCAgICB2YXIgaztcblx0ICAgIHZhciBsID0gZmxvYXRfa2V5cy5sZW5ndGg7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSArKykge1xuXHQgICAgICBrID0gZmxvYXRfa2V5c1tpXTtcblx0ICAgICAgaW5mb1trXSA9IHBhcnNlRmxvYXQoaW5mb1trXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgcGFyc2VPbmVQYWdlKGluZm8pO1xuXHQgIH1cblx0ICBsYXN0X2luZm8gPSBpbmZvIHx8IHt9O1xuXHQgIHJldHVybiBpbmZvO1xuXHR9O1xuXHRleHBvcnRzLmdldEluZm8gPSBnZXRJbmZvO1xuXHRcblx0Ly8g5aaC5p6c5pyJ57yT5a2Y77yM5L2/55So57yT5a2Y55qE5YC877yM5rKh5pyJ57yT5a2Y5YiZ5LuOIERPTSDkuK3or7vlj5Zcblx0ZXhwb3J0cy5xR2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBsYXN0X2luZm8gfHwgZ2V0SW5mbygpO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbG9nZ2VyUHJpb3JpdHlJbmZvIChrKSB7XG5cdCAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgbXNnOiAncGxlYXNlIGRvIG5vdCByZXBlYXQgc2V0UHJpb3JpdHlNZXRhSW5mbyAnICsga1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICog5Yqo5oCB6YWN572ubWV0YVxuXHQgKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcblx0ICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG5cdCAqXG5cdCAqIEBwYXJhbXMge1N0cmluZ30ga1xuXHQgKiBAcGFyYW1zIHtPYmplY3R9IHZcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHsgcHJpb3JpdHk6IDEgfSB8fCBudWxsXG5cdCAqL1xuXHRleHBvcnRzLnNldE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcblx0ICBpZiAoIWxhc3RfaW5mbykge1xuXHQgICAgbGFzdF9pbmZvID0ge307XG5cdCAgfVxuXHQgIC8vIOWFqOWxgOmFjee9ruWPquimgeacieWwseS4jeiDveWGjeasoeiuvue9ru+8jOaVhei/memHjOebtOaOpXJldHVyblxuXHQgIGlmICh0eXBlb2YgcHJpb3JpdHlNZXRhSW5mbyA9PT0gJ29iamVjdCcgJiYgcHJpb3JpdHlNZXRhSW5mb1trXSkge1xuXHQgICAgbG9nZ2VyUHJpb3JpdHlJbmZvKGspO1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIGlmIChrID09PSBBUExVU19YX1NFVFRJTkdTKSB7XG5cdCAgICBpZiAoIXByaW9yaXR5TWV0YUluZm8pIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBwcmlvcml0eU1ldGFJbmZvID0gdHlwZW9mIHYgPT09ICdvYmplY3QnID8gdiA6IEpTT04ucGFyc2Uodik7XG5cdCAgICAgICAgbGFzdF9pbmZvID0gdXRpbERhc2guYXNzaWduKGxhc3RfaW5mbywgcHJpb3JpdHlNZXRhSW5mbyk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKGUpO1xuXHQgICAgICB9ICBcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxvZ2dlclByaW9yaXR5SW5mbyhrKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0XG5cdCAgaWYgKGsgPT09ICdhcGx1cy1leGluZm8nKSB7XG5cdCAgICBsYXN0X2luZm9ba10gPSB0eXBlb2YgdiA9PT0gJ29iamVjdCcgPyB2IDogZm9ybWF0LnBhcmFtMm9iaih2KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgbGFzdF9pbmZvW2tdID0gdjtcblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdFxuXHQvKipcblx0ICogZ2V0IG1ldGFJbmZvIGJ5IGtleVxuXHQgKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcblx0ICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHR2YXIgZ2V0TWV0YUluZm8gPSBmdW5jdGlvbihrKSB7XG5cdCAgaWYgKCFsYXN0X2luZm8pIHtcblx0ICAgIGxhc3RfaW5mbyA9IHt9O1xuXHQgIH1cblx0ICByZXR1cm4gbGFzdF9pbmZvW2tdIHx8ICcnO1xuXHR9O1xuXHRleHBvcnRzLmdldE1ldGFJbmZvID0gZ2V0TWV0YUluZm87XG5cdFxuXHRcblx0LyoqXG5cdCAqIFRvIGFwcGVuZCBgbWV0YWAgdGFnIGlmIHRoZXJlJ3Mgbm9uZSBhcGx1cyBtZXRhLlxuXHQgKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcblx0ICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG5cdCAqICAtIGBPYmplY3QuYXNzaWduYCBjYWxsZWQgb24gT2JqZWN0IHZhbHVlcy5cblx0ICogIEBwYXJhbSBrXG5cdCAqICBAcGFyYW0gdlxuXHQgKi9cblx0ZXhwb3J0cy5hcHBlbmRNZXRhSW5mbyA9IGZ1bmN0aW9uIChrLCB2KSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgaWYgKGsgJiYgdikge1xuXHQgICAgLy8gYXBsdXMtdXRwYXJhbSB8fCBhcGx1cy1uZXh0cGFnZS11dHBhcmFtIHx8IGFwbHVzLWV4ZGF0YVxuXHQgICAgdmFyIHByb2Nlc3NPYmplY3QgPSBmdW5jdGlvbiAob2xkX3ZhbHVlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIG5ld192YWx1ZSA9IHR5cGVvZiB2ID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UodikgOiB2O1xuXHQgICAgICAgIHRvU2V0TWV0YUluZm8oaywgdXRpbERhc2guYXNzaWduKG9sZF92YWx1ZSwgbmV3X3ZhbHVlKSk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICB9O1xuXHQgICAgLy8gYXBsdXMtYXV0by1leHAgfHwgYXBsdXMtYXV0by1jbGtcblx0ICAgIHZhciBwcm9jZXNzQXJyYXkgPSBmdW5jdGlvbiAob2xkX3ZhbHVlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIG5ld192YWx1ZSA9IHR5cGVvZiB2ID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UodikgOiB2O1xuXHQgICAgICAgIHRvU2V0TWV0YUluZm8oaywgb2xkX3ZhbHVlLmNvbmNhdChuZXdfdmFsdWUpKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIHByb2Nlc3NPYmogPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuXHQgICAgICAgIHByb2Nlc3NBcnJheSh2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzc09iamVjdCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgdG9TZXRNZXRhSW5mbyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgIGFwbHVzLnNldE1ldGFJbmZvKGtleSwgdmFsdWUsIHtcblx0ICAgICAgICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL2RvY3MvbWV0YSNtZXRhLWFwbHVzLWV4aW5mb1xuXHQgICAgdmFyIHByb2Nlc3NBcGx1c0V4aW5mbyA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcblx0ICAgICAgdmFyIGV4aW5mb3NfbmV3ID0gZm9ybWF0LnBhcmFtMm9iaih2KTtcblx0ICAgICAgdG9TZXRNZXRhSW5mbyhrLCB1dGlsRGFzaC5hc3NpZ24ob2xkX3ZhbHVlLCBleGluZm9zX25ldykpOyAvLyBleGluZm9zX29sZC5jb25jYXQoZXhpbmZvc19uZXcpLmpvaW4oJyYnKVxuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgZmxhZztcblx0ICAgIHZhciBfb2xkVmFsdWUgPSBhcGx1cy5nZXRNZXRhSW5mbyhrKTtcblx0ICAgIGlmIChrID09PSAnYXBsdXMtZXhpbmZvJykge1xuXHQgICAgICBwcm9jZXNzQXBsdXNFeGluZm8oX29sZFZhbHVlKTtcblx0ICAgICAgZmxhZyA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBpZiAoX29sZFZhbHVlKSB7XG5cdCAgICAgIGlmICh0eXBlb2YgX29sZFZhbHVlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIHByb2Nlc3NPYmooX29sZFZhbHVlKTtcblx0ICAgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdmFyIHRtcF9wYXJzZSA9IEpTT04ucGFyc2UoX29sZFZhbHVlKTtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgdG1wX3BhcnNlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgICAgICBwcm9jZXNzT2JqKHRtcF9wYXJzZSk7XG5cdCAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICghZmxhZykge1xuXHQgICAgICB0b1NldE1ldGFJbmZvKGssIHYpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy91dGlsL2Zvcm1hdC5qc1xuXHQgKiDlt6Xlhbfnsbtcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyB2YXIgdHJ5VG9EZWNvZGUgPSByZXF1aXJlKCcuL3RyeVRvRGVjb2RlJyk7XG5cdFxuXHRleHBvcnRzLmFycjJvYmogPSBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIHZhciBrO1xuXHQgIHZhciB2O1xuXHQgIHZhciBpO1xuXHQgIHZhciBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgcmV0W2tdID0gdjtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBwYXJhbSB0byBvYmplY3Rcblx0ICog5bCG5LiA5Liq566A5Y2V55qE5b2i5aaCIGE9MSZiPTImYz0zIOi/meagt+eahOWPguaVsOi9rOWMluS4uueugOWNleeahCBvYmplY3Qg5qC85byP77yM5aaC77yaXG5cdCAqIHtcblx0ICogICBhOiBcIjFcIixcblx0ICogICBiOiBcIjJcIixcblx0ICogICBjOiBcIjNcIlxuXHQgKiB9XG5cdCAqIEBwYXJhbSBwYXJhbXMge1N0cmluZ31cblx0ICovXG5cdGV4cG9ydHMucGFyYW0yb2JqID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgIGlmICh0eXBlb2YgcGFyYW1zID09PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuIHBhcmFtcztcblx0ICB9XG5cdCAgaWYgKCFwYXJhbXMpIHBhcmFtcyA9ICcnO1xuXHRcblx0ICB2YXIgb2JqID0ge307XG5cdCAgdmFyIGEgPSBwYXJhbXMuc3BsaXQoJyYnKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBpdGVtID0gYVtpXTtcblx0ICAgIHZhciBpbmRleCA9IGl0ZW0uaW5kZXhPZignPScpO1xuXHQgICAgdmFyIGZyYWdtZW50ID0gaXRlbS5zcGxpdCgnPScpO1xuXHQgICAgdmFyIGxlbiA9IGl0ZW0ubGVuZ3RoO1xuXHQgICAgaWYgKGZyYWdtZW50Lmxlbmd0aCA9PT0gMikge1xuXHQgICAgICBvYmpbZnJhZ21lbnRbMF1dID0gZnJhZ21lbnRbMV0gfHwgJyc7ICBcblx0ICAgIH0gZWxzZSBpZiAoaW5kZXggPiAwKSB7XG5cdCAgICAgIHZhciBrZXkgPSBpdGVtLnNsaWNlKDAsIGluZGV4KTtcblx0ICAgICAgdmFyIHZhbHVlID0gaXRlbS5zbGljZShpbmRleCArIDEsIGxlbikgfHwgJyc7XG5cdCAgICAgIG9ialtrZXldID0gdmFsdWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvYmpbZnJhZ21lbnRbMF1dID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBvYmo7XG5cdH07XG5cdFxuXHQvLyBjb25zb2xlLmxvZygnVE9ETyBkZWxldGUgc19wbGFpbl9vYmonKTtcblx0dmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6Jztcblx0ZXhwb3J0cy5zX3BsYWluX29iaiA9IHNfcGxhaW5fb2JqO1xuXHRcblx0LyoqXG5cdCAqIGFycmF5IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG5cdCAqIOWFtuS4reaVsOe7hOS4ulxuXHQgKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG5cdCAqIOeahOW9ouW8j+OAglxuXHQgKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuXHQgKiBAcGFyYW0gYXJyIHtBcnJheX1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyMnBhcmFtKGFyciwgc2tpcEVuY29kZSkge1xuXHQgIHZhciBhID0gW10sXG5cdCAgICBrLFxuXHQgICAgdixcblx0ICAgIGksXG5cdCAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgdmFyIGlzSW5QbGFuT2JqID0gay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMDtcblx0ICAgIHZhciBfdmFsdWUgPSBpc0luUGxhbk9iaiB8fCBza2lwRW5jb2RlID8gdiA6IGVuY29kZVVSSUNvbXBvbmVudCh2KTtcblx0ICAgIGEucHVzaChpc0luUGxhbk9iaiA/IF92YWx1ZSA6IChrICsgJz0nICsgX3ZhbHVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiBhLmpvaW4oJyYnKTtcblx0fTtcblx0ZXhwb3J0cy5hcnIycGFyYW0gPSBhcnIycGFyYW07XG5cdFxuXHQvKipcblx0ICogb2JqZWN0IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleWvueixoei9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byPXG5cdCAqIOWPguingSBhcnIycGFyYW0oKSDmlrnms5Vcblx0ICogQHBhcmFtIG9iaiB7T2JqZWN0fVxuXHQgKiBAcGFyYW0gY29tbVRyYW5zbGF0ZSB7Qm9vbGVhbn0g5pmu6YCa6L2s5o2i5LiN5YGaaXNTdGFydFdpdGjmoKHpqoxcblx0ICpcblx0ICovXG5cdGV4cG9ydHMub2JqMnBhcmFtID0gZnVuY3Rpb24gKG9iaiwgY29tbVRyYW5zbGF0ZSkge1xuXHQgIHZhciBhID0gW107XG5cdCAgdmFyIGs7XG5cdCAgdmFyIHY7XG5cdCAgdmFyIF92O1xuXHQgIGZvciAoayBpbiBvYmopXG5cdCAgICBpZiAoayAmJiBvYmouaGFzT3duUHJvcGVydHkoaykpIHtcblx0ICAgICAgdiA9ICcnICsgb2JqW2tdO1xuXHQgICAgICBfdiA9IGsgKyAnPScgKyB2O1xuXHQgICAgICBpZiAoIWNvbW1UcmFuc2xhdGUpIHtcblx0ICAgICAgICBhLnB1c2goay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMCA/IHYgOiBfdik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYS5wdXNoKF92KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIHJldHVybiBhLmpvaW4oJyYnKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZW5jb2RlR29rZXlWYWx1ZSA9IGZ1bmN0aW9uIChnb2tleSkge1xuXHQgIC8vIHZhciBhcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIC8vIC8vIOWvuWdva2V55YaF55qEdmFsdWXnu5/kuIDliqDkuIDlsYLnvJbnoIFcblx0ICAvLyBpZiAodHlwZW9mIGdva2V5ID09PSAnb2JqZWN0JyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAvLyAgIGZvciAodmFyIGsgaW4gZ29rZXkpIHtcblx0ICAvLyAgICAgaWYgKHR5cGVvZiBnb2tleVtrXSA9PT0gJ3N0cmluZycpIHtcblx0ICAvLyAgICAgICB0cnkge1xuXHQgIC8vICAgICAgICAgZ29rZXlba10gPSBlbmNvZGVVUklDb21wb25lbnQoZGVjb2RlVVJJQ29tcG9uZW50KGdva2V5W2tdKSk7XG5cdCAgLy8gICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAvLyAgICAgfVxuXHQgIC8vICAgfVxuXHQgIC8vIH1cblx0ICByZXR1cm4gZ29rZXk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLmFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0LyoqXG5cdCAqIOeUn+aIkOS4gOS4queUqOS6jumBv+WFjee8k+WtmOeahOmaj+acuuaVsFxuXHQgKiDkuLrkuoblh4/lsJEgdXJsIOmVv+W6pu+8jOi/meS4qumaj+acuuaVsOaNrueahOmVv+W6puWumuS4uiA3IOS9je+8jFxuXHQgKiDkuLrkuoblh4/lsJHnorDmkp7vvIzkvb/nlKggMTYg6L+b5Yi25pWw5a2XXG5cdCAqXG5cdCAqIDI2ODQzNTQ1NiA9IDIgXiAyOCA9IDB4ZmZmZmZmZiArIDFcblx0ICovXG5cdGV4cG9ydHMubWFrZUNhY2hlTnVtID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNjg0MzU0NTYpLnRvU3RyaW5nKDE2KTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5ZCm5Lul5a2X56ym5LiyIHMyIOW8gOWktFxuXHQgKiBAcGFyYW0gczEge1N0cmluZ31cblx0ICogQHBhcmFtIHMyIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLmlzU3RhcnRXaXRoID0gZnVuY3Rpb24oczEsIHMyKSB7XG5cdCAgcmV0dXJuIHMxLmluZGV4T2YoczIpID09PSAwO1xuXHR9O1xuXHQvKipcblx0ICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+a7nuS7peWtl+espuS4siBzMiDnu5PlsL5cblx0ICogQHBhcmFtIHMxIHtTdHJpbmd9XG5cdCAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5pc0VuZFdpdGggPSBmdW5jdGlvbihzMSwgczIpIHtcblx0ICB2YXIgbDEgPSBzMS5sZW5ndGgsIGwyID0gczIubGVuZ3RoO1xuXHQgIHJldHVybiBsMSA+PSBsMiAmJiBzMS5pbmRleE9mKHMyKSA9PSAobDEgLSBsMik7XG5cdH07XG5cdFxuXHRleHBvcnRzLmFueSA9IGZ1bmN0aW9uKGFyciwgZm4pIHtcblx0ICB2YXIgaTtcblx0ICB2YXIgbCA9IGFyci5sZW5ndGg7XG5cdCAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgaWYgKGZuKGFycltpXSkpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuaXNOdW1iZXIgPSBmdW5jdGlvbih2KSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJztcblx0fTtcblx0XG5cdGV4cG9ydHMuaXNOYU4gPSBmdW5jdGlvbih2KSB7XG5cdCAgaWYoaXNOYU4pIHtcblx0ICAgIHJldHVybiBpc05hTih2KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHYgIT09IHY7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbljIXlkKvlrZfnrKbkuLIgczJcblx0ICogQHBhcmFtIHMxIHtTdHJpbmd9XG5cdCAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5pc0NvbnRhaW4gPSBmdW5jdGlvbiAoczEsIHMyKSB7XG5cdCAgcmV0dXJuIHMxLmluZGV4T2YoczIpID4gLTE7XG5cdH07XG5cdFxuXHQvKipcblx0ICog5YWL6ZqG5LiA5Liqb2JqZWN0XG5cdCAqL1xuXHR2YXIgY2xvbmVEZWVwID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgdmFyIHN0cjtcblx0ICB2YXIgbmV3b2JqID0gb2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSA/IFtdIDoge307XG5cdCAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfSBlbHNlIGlmIChKU09OICYmIEpTT04ucGFyc2UpIHtcblx0ICAgIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7IC8v57O75YiX5YyW5a+56LGhXG5cdCAgICBuZXdvYmogPSBKU09OLnBhcnNlKHN0cik7IC8v6L+Y5Y6fXG5cdCAgfSBlbHNlIHtcblx0ICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG5cdCAgICAgIG5ld29ialtpXSA9IHR5cGVvZiBvYmpbaV0gPT09ICdvYmplY3QnID8gY2xvbmVEZWVwKG9ialtpXSkgOiBvYmpbaV07XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBuZXdvYmo7XG5cdH07XG5cdFxuXHRleHBvcnRzLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcblxuXG4vKioqLyB9KSxcbi8qIDIyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XG5cdC8qKlxuXHQgKiDlr7nosaFtZXJnZVxuXHQgKiAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnblxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0T2JqLCBhcmdzT2JqKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgICAgICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcblx0ICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG5cdCAgICAgICAgaWYgKG5leHRTb3VyY2UgIT09IG51bGwpIHsgLy8gU2tpcCBvdmVyIGlmIHVuZGVmaW5lZCBvciBudWxsXG5cdCAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIG5leHRTb3VyY2UpIHtcblx0ICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuXHQgICAgICAgICAgICAgIHRvW25leHRLZXldID0gbmV4dFNvdXJjZVtuZXh0S2V5XTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdG87XG5cdCAgICB9KHRhcmdldE9iaiwgYXJnc09iaik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0YXJnZXRPYmosIGFyZ3NPYmopO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbFRyaW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0dmFyIHV0aWxTdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgdHJ5VG9EZWNvZGVVUklDb21wb25lbnQ6IGZ1bmN0aW9uICh2YWwsIGRlZmF1bHRfdmFsKSB7XG5cdCAgICB2YXIgdiA9IGRlZmF1bHRfdmFsIHx8ICcnO1xuXHQgICAgaWYgKHZhbCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodmFsKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdjtcblx0ICB9LFxuXHQgIFxuXHQgIC8qKlxuXHQgICAqIOWwhuW9ouWmgiBcInBhZ2VJZD0xMjM7IHNpdGVJZD00NTZcIiDnmoTlhoXlrrnop6PmnpDkuLogT2JqZWN0XG5cdCAgICogQHBhcmFtIHMge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2RpY3RdIHtPYmplY3R9XG5cdCAgICogQHJldHVybiB7T2JqZWN0fVxuXHQgICAqL1xuXHQgIHBhcnNlU2VtaWNvbG9uQ29udGVudDogZnVuY3Rpb24gKHMsIGRpY3QsIHVuZGVjb2RlKSB7XG5cdCAgICBkaWN0ID0gZGljdCB8fCB7fTtcblx0ICAgIHZhciBhID0gcy5zcGxpdCgnOycpO1xuXHQgICAgdmFyIGo7XG5cdCAgICB2YXIgYV9sZW4gPSBhLmxlbmd0aDtcblx0ICAgIHZhciBhMjtcblx0XG5cdCAgICBmb3IgKGogPSAwOyBqIDwgYV9sZW47IGorKykge1xuXHQgICAgICBhMiA9IGFbal0uc3BsaXQoJz0nKTtcblx0ICAgICAgdmFyIF92YWx1ZSA9IHV0aWxUcmltLnRyaW0oYTIuc2xpY2UoMSkuam9pbignPScpKTtcblx0ICAgICAgZGljdFt1dGlsVHJpbS50cmltKGEyWzBdKSB8fCAnJ10gPSB1bmRlY29kZSA/IF92YWx1ZSA6IHRoaXMudHJ5VG9EZWNvZGVVUklDb21wb25lbnQoX3ZhbHVlKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZGljdDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlsIbkuIDkuKogbm9kZSBsaXN0IOi9rOS4uuaVsOe7hFxuXHQgICAqIEBwYXJhbSBub2RlcyB7Tm9kZUxpc3R9XG5cdCAgICog5Y+C6KeB77yaaHR0cDovL3d3dy5wbGFuYWJjLm5ldC8yMDEwLzAxLzA2L2FyZ3VtZW50c190b19hcnJheS9cblx0ICAgKi9cblx0ICBub2RlTGlzdFRvQXJyYXk6IGZ1bmN0aW9uIChub2Rlcykge1xuXHQgICAgdmFyIGFycjtcblx0ICAgIHZhciBsZW5ndGg7XG5cdFxuXHQgICAgdHJ5IHtcblx0ICAgICAgLy8gd29ya3MgaW4gZXZlcnkgYnJvd3NlciBleGNlcHQgSUVcblx0ICAgICAgYXJyID0gW10uc2xpY2UuY2FsbChub2Rlcyk7XG5cdCAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgLy8gc2xvd2VyLCBidXQgd29ya3MgaW4gSUVcblx0ICAgICAgYXJyID0gW107XG5cdCAgICAgIGxlbmd0aCA9IG5vZGVzLmxlbmd0aDtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBhcnIucHVzaChub2Rlc1tpXSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZ2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCBkYXRlKSB7XG5cdCAgICBpZiAodXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG5cdCAgICAgIHZhciBfbHNfY25hID0gJyc7XG5cdCAgICAgIHZhciBfdmFsdWUgPSB1dGlsU3RvcmUuZ2V0KEVUQUdfU1RPUkFHRV9LRVkpO1xuXHQgICAgICBpZiAoX3ZhbHVlKSB7XG5cdCAgICAgICAgdmFyIF9hcnIgPSBfdmFsdWUuc3BsaXQoJ18nKSB8fCBbXTtcblx0ICAgICAgICBpZiAoZGF0ZSkge1xuXHQgICAgICAgICAgX2xzX2NuYSA9IF9hcnIubGVuZ3RoID4gMSAmJiBkYXRlID09PSBfYXJyWzBdID8gX2FyclsxXSA6ICcnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBfbHNfY25hID0gX2Fyci5sZW5ndGggPiAxID8gX2FyclsxXSA6ICcnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KF9sc19jbmEpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICcnO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8vIHV0aWxTdG9yZS5zZXQodGhpcy5FVEFHX1NUT1JBR0VfS0VZLCAgdGhpcy50b2RheSArICdfJyArIGVuY29kZVVSSUNvbXBvbmVudChjbmEpKTtcblx0ICBzZXRMc0NuYTogZnVuY3Rpb24gKEVUQUdfU1RPUkFHRV9LRVksIHRvZGF5LCBjbmEpIHtcblx0ICAgIGlmIChjbmEgJiYgdXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG5cdCAgICAgIHV0aWxTdG9yZS5zZXQoRVRBR19TVE9SQUdFX0tFWSwgIHRvZGF5ICsgJ18nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNuYSkpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGdldFVybDogZnVuY3Rpb24gKHVybCkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgZWdVcmwgPSB1cmwgfHwgJy8vbG9nLm1tc3RhdC5jb20vZWcuanMnO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIHJob3N0X3YgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmhvc3QtdicpO1xuXHQgICAgICB2YXIgcmVnID0gL1tbYS16fFxcLXxcXF98MC05XFwuXStbYS16fFxcLXxcXF98MC05XSg6XFxkKik/Lztcblx0ICAgICAgdmFyIGN1c3RvbV9ob3N0ID0gcmhvc3Rfdi5tYXRjaChyZWcpO1xuXHQgICAgICBpZiAoY3VzdG9tX2hvc3QgJiYgY3VzdG9tX2hvc3RbMF0pIHtcblx0ICAgICAgICAvLyBlZ1VybCA9IGVnVXJsLnJlcGxhY2UocmVnLCBjdXN0b21faG9zdFswXSk7XG5cdCAgICAgICAgZWdVcmwgPSAnLy8nICsgY3VzdG9tX2hvc3RbMF0gKyAnL2VnLmpzJztcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGVnVXJsO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDlr7nlrZfnrKbkuLLov5vooYx0cmlt5aSE55CGXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIOWOu+aOieWtl+espuS4siBzIOWJjeWQjueahOepuuagvFxuXHQgKiBAcGFyYW0gcyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gdHJpbShzKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpID8gcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykgOiAnJztcblx0fTtcblx0ZXhwb3J0cy50cmltID0gdHJpbTtcblxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIHNldDogZnVuY3Rpb24gKGssIHYpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGssIHYpO1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgLy8g57uP6L+HdGVzdOS5i+WQjmdldOW6lOivpeS4jeS8muaciemXrumimFxuXHQgIGdldDogZnVuY3Rpb24gKGspIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgcmV0dXJuICcnO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgdGVzdDogZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHRlc3RLZXkgPSAnZ3JleV90ZXN0X2tleSc7XG5cdCAgICB0cnkge1xuXHQgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0S2V5LCAxKTtcblx0ICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdEtleSk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0ICByZW1vdmU6IGZ1bmN0aW9uIChrKSB7XG5cdCAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5pel5b+X57G75bel5YW36ZuG5ZCIXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gbyA6e1xuXHQgKiAgIGxldmVsOiAnd2Fybi9pbmZvL2xvZycgZGVmYXVsdCBpcyB3YXJuXG5cdCAqICAgbXNnOiAnbXNnJ1xuXHQgKiB9XG5cdCAqL1xuXHR2YXIgcHJlZml4ID0gJ1thcGx1cyBsb2ddOiAnO1xuXHRleHBvcnRzLmxvZ2dlciA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgaWYgKCFvKSB7XG5cdCAgICBvID0ge307XG5cdCAgfVxuXHQgIHZhciBsZXZlbCA9IG8ubGV2ZWwgfHwgJ3dhcm4nO1xuXHQgIGNvbnNvbGUgJiYgY29uc29sZVtsZXZlbF0gJiYgY29uc29sZVtsZXZlbF0ocHJlZml4K28ubXNnKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVidWdMb2cgPSBmdW5jdGlvbihvKSB7XG5cdCAgdmFyIGFwbHVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICBpZiAoYXBsdXMgJiYgYXBsdXMuYXBsdXNEZWJ1Zykge1xuXHQgICAgdGhpcy5sb2dnZXIobyk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDI3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnIsIGZuKSB7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIGwgPSBhcnIubGVuZ3RoO1xuXHQgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBycyA9IGZuKGFycltpXSwgaSk7XG5cdCAgICBpZiAocnMgPT09ICdicmVhaycpIHtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDI4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS91dGlscy91dGlsQXR0cmlidXRlLmpzXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy50cnlUb0dldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuXHQgIHJldHVybiBlbGVtZW50ICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlID8gKGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJfbmFtZSkgfHwgJycpIDogJyc7XG5cdH07XG5cdFxuXHR2YXIgdHJ5VG9TZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cl9uYW1lLCBhdHRyX3ZhbHVlKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJfbmFtZSwgYXR0cl92YWx1ZSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLnRyeVRvU2V0QXR0cmlidXRlID0gdHJ5VG9TZXRBdHRyaWJ1dGU7XG5cdFxuXHRleHBvcnRzLnRyeVRvUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyX25hbWUpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB0cnlUb1NldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyX25hbWUsICcnKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5pON5L2cbWV0YeeahOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfaGVhZF9ub2RlO1xuXHR2YXIgX21ldGFfbm9kZXM7XG5cdFxuXHR2YXIgdXRpbEF0dHJpYnV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHQvKipcblx0ICog5Y+W5b6X6aG16Z2i5LiKIGhlYWQg5Lit55qE5omA5pyJIG1ldGEg5YWD57SgXG5cdCAqIEBwYXJhbSBbZm9yY2VdIHtib29sZWFufSDmmK/lkKblvLrliLbojrflj5bmlrDlhoXlrrlcblx0ICovXG5cdGZ1bmN0aW9uIGdldE1ldGFUYWdzKGZvcmNlKSB7XG5cdCAgX2hlYWRfbm9kZSA9IF9oZWFkX25vZGUgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcblx0XG5cdCAgaWYgKF9tZXRhX25vZGVzICYmICFmb3JjZSkge1xuXHQgICAgcmV0dXJuIF9tZXRhX25vZGVzO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIF9oZWFkX25vZGUgPyAoX21ldGFfbm9kZXMgPSBfaGVhZF9ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdtZXRhJykpIDogW107XG5cdH07XG5cdGV4cG9ydHMuZ2V0TWV0YVRhZ3MgPSBnZXRNZXRhVGFncztcblx0XG5cdC8qKlxuXHQgKiDlj5blvpcgaGVhZCAvIG1ldGEg5Lit5oyH5a6aIG1ldGEg55qEIChhdHRyIHx8IGNvbnRlbnQpIOWAvFxuXHQgKiA8bWV0YSBuYW1lPVwiYXBsdXMtdGVybWluYWxcIiBjb250ZW50PVwiMVwiPlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWV0YUNudChuYW1lLCBhdHRyKSB7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIG1ldGE7XG5cdCAgdmFyIG1ldGFfbm9kZXMgPSBnZXRNZXRhVGFncygpO1xuXHQgIHZhciBsID0gbWV0YV9ub2Rlcy5sZW5ndGg7XG5cdCAgdmFyIGNvbnRlbnQ7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgIG1ldGEgPSBtZXRhX25vZGVzW2ldO1xuXHQgICAgaWYgKHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobWV0YSwgJ25hbWUnKSA9PT0gbmFtZSkge1xuXHQgICAgICBjb250ZW50ID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCBhdHRyIHx8ICdjb250ZW50Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gY29udGVudCB8fCAnJztcblx0fTtcblx0ZXhwb3J0cy5nZXRNZXRhQ250ID0gZ2V0TWV0YUNudDtcblx0XG5cdFxuXHQvKipcblx0ICog56Gu5a6aIGhlYWQgLyBtZXRhIOS4reeahCBpc29uZXBhZ2Ug55qE5pWw5o2uXG5cdCAqIOW9ouWmgu+8mlxuXHQgKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjBcIiAvPiDooajnpLrkuI3mmK9vbmVwYWdlXG5cdCAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMXxodHRwOi8vaDUubS50YW9iYW8uY29tL3dlL2luZGV4Lmh0bSNkZXRhaWxcIiAvPiDooajnpLrmmK9vbmVwYWdlXG5cdCAqL1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRmdW5jdGlvbiBnZXRPbmVQYWdlSW5mbyhtZXRhSW5mbykge1xuXHQgIHZhciBvYmogPSB7XG5cdCAgICBpc29uZXBhZ2U6ICctMScsXG5cdCAgICB1cmxwYWdlbmFtZTogJydcblx0ICB9O1xuXHQgIHZhciBtZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCk7XG5cdCAgaWYgKG1ldGFfaW5mbyAmJiBtZXRhX2luZm8uaGFzT3duUHJvcGVydHkoJ2lzb25lcGFnZV9kYXRhJykpIHtcblx0ICAgIG9iai5pc29uZXBhZ2UgPSBtZXRhX2luZm8uaXNvbmVwYWdlX2RhdGEuaXNvbmVwYWdlO1xuXHQgICAgb2JqLnVybHBhZ2VuYW1lID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLnVybHBhZ2VuYW1lO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29udGVudCA9IGdldE1ldGFDbnQoJ2lzb25lcGFnZScpIHx8ICctMSc7XG5cdCAgICB2YXIgYXJyX2NvbnRlbnQgPSBjb250ZW50LnNwbGl0KFwifFwiKTtcblx0ICAgIG9iai5pc29uZXBhZ2UgPSBhcnJfY29udGVudFswXTtcblx0ICAgIG9iai51cmxwYWdlbmFtZSA9IGFycl9jb250ZW50WzFdID8gYXJyX2NvbnRlbnRbMV0gOiBcIlwiO1xuXHQgIH1cblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRleHBvcnRzLmdldE9uZVBhZ2VJbmZvID0gZ2V0T25lUGFnZUluZm87XG5cblxuLyoqKi8gfSksXG4vKiAzMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogcmVmZXJyZXLlt6Xlhbfnsbtcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgbmFtZVN0b3JhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KS5uYW1lU3RvcmFnZTtcblx0XG5cdGV4cG9ydHMuZ2V0UmVmZXIgPSBmdW5jdGlvbiAoTkFNRV9TVE9SQUdFX0tFWVMpIHtcblx0ICByZXR1cm4gZG9jdW1lbnQucmVmZXJyZXIgfHwgbmFtZVN0b3JhZ2UuZ2V0SXRlbShOQU1FX1NUT1JBR0VfS0VZUy5SRUZFUlJFUikgfHwgJyc7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvYXBsdXNfY3BsdWdpbi9zcmMvbGliX21vbml0b3IvdHJhY2tlcl9sb3N0cHYuanNcblx0ICog6K6w5b2V5Lii5aSxcHbnmoTlnLrmma9cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBuYW1lU3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpLm5hbWVTdG9yYWdlO1xuXHR2YXIgdXRpbFJlZmVycmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG5cdCAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cblx0ICAgICAqIH1cblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOWGmSByZWZlcnJlclxuXHQgICAgICpcblx0ICAgICAqIOWcqCB3aW5kb3cubmFtZSDkuK3orrDlvZXlvZPliY3pobXpnaLnmoQgdXJs77yM5Lul5L6/5LiL5LiA5Liq6aG16Z2i6K+75Y+WXG5cdCAgICAgKiB3aW5kb3cubmFtZSDnmoTor7vlhpkgQVBJIOWSjCBuYW1lIOWAvOeahOinhOiMg+WumuS5iemDvemHh+eUqCBuYW1lU3RvcmFnZVxuXHQgICAgICogaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vY29kZXYvbmFtZS1zdG9yYWdlL3RyZWUvbWFzdGVyXG5cdCAgICAgKi9cblx0ICAgIHJlY29yZFZhbEluV2luZG93TmFtZTogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgaXNfaHR0cHMgPSBhcGx1c1N0YXRpYy5IVFRQUyA9PSBsb2NhdGlvbi5wcm90b2NvbDtcblx0ICAgICAgdmFyIE5BTUVTVE9SQUdFX0tFWVMgPSBhcGx1cy5nbG9iYWxDb25maWcuTkFNRVNUT1JBR0VfS0VZUyB8fCB7fTtcblx0ICAgICAgdmFyIHJlZmVycmVyO1xuXHQgICAgICB2YXIgcmVmZXJyZXJfcHZfaWQ7XG5cdFxuXHQgICAgICAvLyDku4XlnKggdG9wIOmhtemdouaJjeWBmui/meS4quaTjeS9nFxuXHQgICAgICAvLyDku4XlnKggaHR0cHMg6aG16Z2i5ZyoIHdpbmRvdy5uYW1lIOS4reiusOW9leS4iyByZWZlcnJlciDnmoTlgLxcblx0ICAgICAgdmFyIGlzX2luX2lmcmFtZSA9IHBhcmVudCAhPT0gc2VsZjsgIC8vIOW9k+WJjemhtemdouaYr+WQpuWcqCBpZnJhbWUg5LitXG5cdCAgICAgIGlmIChpc19pbl9pZnJhbWUgfHwgIWlzX2h0dHBzKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcGFnZV91cmwgPSBsb2NhdGlvbi5ocmVmO1xuXHQgICAgICAvLyDmmK/lkKblnKjnmbvlvZXpobXpnaLkuIpcblx0ICAgICAgdmFyIGlzX2xvZ2luX3BhZ2UgPSBpc19odHRwcyAmJiAocGFnZV91cmwuaW5kZXhPZignbG9naW4udGFvYmFvLmNvbScpID49IDAgfHwgcGFnZV91cmwuaW5kZXhPZignbG9naW4udG1hbGwuY29tJykgPj0gMCk7XG5cdCAgICAgIHZhciBwYWdlX3JlZmVycmVyID0gdXRpbFJlZmVycmVyLmdldFJlZmVyKE5BTUVTVE9SQUdFX0tFWVMpO1xuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIOWmguaenOaYr+WcqOeZu+W9lemhtemdouS4iu+8jOW5tuS4lOW3sue7j+iusOW9leS6huS4gOS4qiByZWZlcnJlcu+8jOWImei/meWEv+WOu+aOiSByZWZlcnJlciDlj4LmlbBcblx0ICAgICAgICog5Zug5Li677yM5aaC5p6c55So5oi35piv5LuOIEEg6aG16Z2i54K55Ye75YiwIEIg6aG16Z2i77yM5Lit6Ze057uP6L+H5LqG55m75b2V6aG16Z2i77yMXG5cdCAgICAgICAqIOWQjuWPsOWcqOi/mOWOn+i3r+W+hOaXtu+8jOWPqumcgOimgeefpemBkyBBIC0+IELvvIzogIzkuI3pnIDopoHnn6XpgZMgQSAtPiBsb2dpbiAtPiBCXG5cdCAgICAgICAqL1xuXHQgICAgICBpZiAoaXNfbG9naW5fcGFnZSAmJiBwYWdlX3JlZmVycmVyKSB7XG5cdCAgICAgICAgcmVmZXJyZXIgPSBwYWdlX3JlZmVycmVyO1xuXHQgICAgICAgIHJlZmVycmVyX3B2X2lkID0gbmFtZVN0b3JhZ2UuZ2V0SXRlbShOQU1FU1RPUkFHRV9LRVlTWydSRUZFUlJFUl9QVl9JRCddKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZWZlcnJlciA9IHBhZ2VfdXJsO1xuXHQgICAgICAgIHJlZmVycmVyX3B2X2lkID0gYXBsdXMucHZpZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgbmFtZVN0b3JhZ2Uuc2V0SXRlbShOQU1FU1RPUkFHRV9LRVlTWydSRUZFUlJFUiddLCByZWZlcnJlcik7XG5cdCAgICAgIG5hbWVTdG9yYWdlLnNldEl0ZW0oTkFNRVNUT1JBR0VfS0VZU1snUkVGRVJSRVJfUFZfSUQnXSwgcmVmZXJyZXJfcHZfaWQpO1xuXHQgICAgfSxcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgdXRpbEV2ZW50Lm9uKHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfc2VsZi5yZWNvcmRWYWxJbldpbmRvd05hbWUoKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDMyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDkuovku7bnsbvlt6Xlhbfpm4blkIhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgcGFzc2l2ZVN1cHBvcnRlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHR2YXIgYXBsdXNUYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0XG5cdC8qKlxuXHQgKiB0YXAgbWV0aG9kc1xuXHQgKiB0aHggdG8gQOeBteeOiVxuXHQgKi9cblx0ZnVuY3Rpb24gdGFwRXZlbnRCaW5kIChlbGVtZW50LCBmbiwgZXZlbnRfdHlwZSkge1xuXHQgIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuXHQgIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm8gfHwge307XG5cdCAgdmFyIGFwbHVzX2N0YXAgPSBtZXRhX2luZm8uYXBsdXNfY3RhcCB8fCB7fTtcblx0ICB2YXIgYXBsdXNUb3VjaCA9IG1ldGFfaW5mb1snYXBsdXMtdG91Y2gnXTtcblx0ICAvLyDlpoLmnpzkuJrliqHmlrnmnInoh6rlrprkuYnlrp7njrDnmoR0YXDkuovku7bmj5Lku7bvvIzkvJjlhYjmjInor6Xkuovku7bmiafooYxcblx0ICBpZiAoYXBsdXNfY3RhcCAmJiB0eXBlb2YgYXBsdXNfY3RhcC5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgYXBsdXNfY3RhcC5vbihlbGVtZW50LCBmbik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBpc1RvdWNoID0gJ29udG91Y2hlbmQnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgaWYgKGlzVG91Y2ggJiYgKGFwbHVzVG91Y2ggPT09ICd0YXAnIHx8IGV2ZW50X3R5cGUgPT09ICd0YXBTcG0nIHx8IGV2ZW50X3R5cGUgPT09ICd0YXAnKSkge1xuXHQgICAgICBhcGx1c1RhcC5vbihlbGVtZW50LCBmbik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvbihlbGVtZW50LCBpc1RvdWNoID8gJ3RvdWNoc3RhcnQnIDogJ21vdXNlZG93bicsIGZuKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBkb1Njcm9sbENoZWNrIChjYikge1xuXHQgIHRyeSB7XG5cdCAgICAvLyBJZiBJRSBpcyB1c2VkLCB1c2UgdGhlIHRyaWNrIGJ5IERpZWdvIFBlcmluaVxuXHQgICAgLy8gaHR0cDovL2phdmFzY3JpcHQubndib3guY29tL0lFQ29udGVudExvYWRlZC9cblx0ICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgnbGVmdCcpO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0ICAgICAgZG9TY3JvbGxDaGVjayhjYik7XG5cdCAgICB9LCAxKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgLy8gYW5kIGV4ZWN1dGUgYW55IHdhaXRpbmcgZnVuY3Rpb25zXG5cdCAgY2IoKTtcblx0fTtcblx0XG5cdC8vIHRoYW5rcyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9ibG9iLzEuMTIuNC9zcmMvY29yZS9yZWFkeS5qc1xuXHRmdW5jdGlvbiBET01SZWFkeSAoY2FsbGJhY2spIHtcblx0ICB2YXIgaSA9IDA7XG5cdCAgdmFyIGNiID0gZnVuY3Rpb24oKSB7XG5cdCAgICBpZiAoaSA9PT0gMCkge1xuXHQgICAgICBjYWxsYmFjaygpO1xuXHQgICAgfVxuXHQgICAgaSsrO1xuXHQgIH07XG5cdCAgLy8gQ2F0Y2ggY2FzZXMgd2hlcmUgJChkb2MpLnJlYWR5KCkgaXMgY2FsbGVkIGFmdGVyIHRoZVxuXHQgIC8vIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuXG5cdCAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcblx0ICAgIC8vIEhhbmRsZSBpdCBhc3luY2hyb25vdXNseSB0byBhbGxvdyBzY3JpcHRzIHRoZSBvcHBvcnR1bml0eSB0byBkZWxheSByZWFkeVxuXHQgICAgY2IoKTtcblx0ICB9XG5cdCAgdmFyIGxvYWRlZDtcblx0ICAvLyBNb3ppbGxhLCBPcGVyYSBhbmQgd2Via2l0IG5pZ2h0bGllcyBjdXJyZW50bHkgc3VwcG9ydCB0aGlzIGV2ZW50XG5cdCAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgIC8vIFVzZSB0aGUgaGFuZHkgZXZlbnQgY2Jcblx0ICAgIGxvYWRlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbG9hZGVkLCBmYWxzZSk7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9O1xuXHQgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGxvYWRlZCwgZmFsc2UpO1xuXHRcblx0ICAgIC8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrXG5cdCAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNiLCBmYWxzZSk7XG5cdFxuXHQgICAgLy8gSWYgSUUgZXZlbnQgbW9kZWwgaXMgdXNlZFxuXHQgIH0gZWxzZSBpZiAoZG9jdW1lbnQuYXR0YWNoRXZlbnQpIHtcblx0ICAgIGxvYWRlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAvLyBNYWtlIHN1cmUgYm9keSBleGlzdHMsIGF0IGxlYXN0LCBpbiBjYXNlIElFIGdldHMgYSBsaXR0bGUgb3ZlcnplYWxvdXMgKHRpY2tldCAjNTQ0MykuXG5cdCAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG5cdCAgICAgICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGxvYWRlZCk7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIC8vIGVuc3VyZSBmaXJpbmcgYmVmb3JlIG9ubG9hZCxcblx0ICAgIC8vIG1heWJlIGxhdGUgYnV0IHNhZmUgYWxzbyBmb3IgaWZyYW1lc1xuXHQgICAgZG9jdW1lbnQuYXR0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGxvYWRlZCk7XG5cdFxuXHQgICAgLy8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0ICAgIHdpbmRvdy5hdHRhY2hFdmVudCgnb25sb2FkJywgY2IpO1xuXHRcblx0ICAgIC8vIElmIElFIGFuZCBub3QgYSBmcmFtZVxuXHQgICAgLy8gY29udGludWFsbHkgY2hlY2sgdG8gc2VlIGlmIHRoZSBkb2MgaXMgcmVhZHlcblx0ICAgIHZhciB0b3BsZXZlbCA9IGZhbHNlO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIHRvcGxldmVsID0gd2luZG93LmZyYW1lRWxlbWVudCA9PT0gbnVsbDtcblx0ICAgIH0gY2F0Y2goZSkge31cblx0XG5cdCAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsICYmIHRvcGxldmVsKSB7XG5cdCAgICAgIGRvU2Nyb2xsQ2hlY2soY2IpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8g55u05o6l55So5Y6f55Sf55qERE9NcmVhZHnvvIzkuI3ljrvkvp3otZblpJbpg6jnmoRqcXVlcnnvvIxraXNzeSBA6LCL5aOrIGluIDIwMTYtMTItMjdcblx0ZXhwb3J0cy5ET01SZWFkeSA9IERPTVJlYWR5O1xuXHRcblx0ZnVuY3Rpb24gb25sb2FkIChjYWxsYmFjaykge1xuXHQgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG5cdCAgICBjYWxsYmFjaygpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBvbih3aW5kb3csICdsb2FkJywgY2FsbGJhY2spO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5vbmxvYWQgPSBvbmxvYWQ7XG5cdFxuXHQvKipcblx0ICog57uR5a6a5LqL5Lu2XG5cdCAqIEBwYXJhbSBvYmoge1dpbmRvd3xFbGVtZW50fSBET00g5YWD57SgXG5cdCAqIEBwYXJhbSBldmVudF90eXBlXG5cdCAqIEBwYXJhbSBmXG5cdCAqL1xuXHRmdW5jdGlvbiBvbiAoKSB7XG5cdCAgdmFyIHdpbiA9IHdpbmRvdztcblx0ICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0ICBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcblx0ICAgIGlmIChhcmdzWzBdID09PSAnRE9NUmVhZHknKSB7XG5cdCAgICAgIERPTVJlYWR5KGFyZ3NbMV0pO1xuXHQgICAgfVxuXHQgICAgaWYgKGFyZ3NbMF0gPT09ICdvbmxvYWQnKSB7XG5cdCAgICAgIG9ubG9hZChhcmdzWzFdKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAzKSB7XG5cdCAgICB2YXIgb2JqID0gYXJnc1swXTtcblx0ICAgIHZhciBldmVudF90eXBlID0gYXJnc1sxXTtcblx0ICAgIHZhciBmID0gYXJnc1syXTtcblx0ICAgIGlmIChldmVudF90eXBlID09PSAndGFwJyB8fCBldmVudF90eXBlID09PSAndGFwU3BtJykge1xuXHQgICAgICB0YXBFdmVudEJpbmQob2JqLCBmLCBldmVudF90eXBlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIOW9k+WJjea1j+iniOWZqOaYr+WQpuS4uiBJRe+8iOaYr+WQpuaUr+aMgSBkb2N1bWVudC5hdHRhY2hFdmVudO+8iVxuXHQgICAgICB2YXIgb25ldmVudCA9ICEhZG9jdW1lbnQuYXR0YWNoRXZlbnQgPyAnYXR0YWNoRXZlbnQnIDogJ2FkZEV2ZW50TGlzdGVuZXInO1xuXHQgICAgICB2YXIgYXR0YSA9ICEhZG9jdW1lbnQuYXR0YWNoRXZlbnQ7XG5cdCAgICAgIG9ialtvbmV2ZW50XShcblx0ICAgICAgICAoYXR0YSA/ICdvbicgOiAnJykgKyBldmVudF90eXBlLFxuXHQgICAgICAgIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICBlID0gZSB8fCB3aW4uZXZlbnQ7XG5cdCAgICAgICAgICB2YXIgZWwgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgZihlLCBlbCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBwYXNzaXZlU3VwcG9ydGVkKGV2ZW50X3R5cGUpID8geyBwYXNzaXZlOiB0cnVlIH0gOiBmYWxzZVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5vbiA9IG9uO1xuXG5cbi8qKiovIH0pLFxuLyogMzMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICog6YCa6L+H6KKr5Yqo5LqL5Lu25L6m5ZCs5Zmo5o+Q5Y2H5rua5Yqo5oCn6IO9XG5cdCAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi91cGRhdGVzLzIwMTYvMDYvcGFzc2l2ZS1ldmVudC1saXN0ZW5lcnM/aGw9emgtY25cblx0ICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3Rvb2xzL2xpZ2h0aG91c2UvYXVkaXRzL3Bhc3NpdmUtZXZlbnQtbGlzdGVuZXJzP2hsPXpoLWNuXG5cdCAqL1xuXHR2YXIgc3VwcG9ydGVkO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChldmVudF90eXBlKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBwb3J0ZWQgPT09ICdib29sZWFuJykge1xuXHQgICAgcmV0dXJuIHN1cHBvcnRlZDtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8g5LuFdG91Y2jjgIFtb3VzZeOAgXNjcm9sbOOAgXdoZWVs55u45YWz55qE5LqL5Lu26ZyA6KaB5bCd6K+V5byA5ZCvJ3Bhc3NpdmUnXG5cdCAgICBpZiAoIS90b3VjaHxtb3VzZXxzY3JvbGx8d2hlZWwvaS50ZXN0KGV2ZW50X3R5cGUpKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHN1cHBvcnRlZCA9IGZhbHNlO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0ZXN0JywgbnVsbCwgb3B0aW9ucyk7XG5cdCAgICB9IGNhdGNoKGVycikge31cblx0ICAgIHJldHVybiBzdXBwb3J0ZWQ7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogdGFwXG5cdCAqIHRoYW5rcyBA6JmO54mZXG5cdCAqIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL2FsaWxvZy9hcGx1c19wbHVnaW5fYWxpdHJpcC90cmVlL21hc3Rlci9zcmMvbGliX3RhcFxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiZjueJmSA8aHV5YS5uemJAYWxpYmFiYS1pbmMuY29tPlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcblx0XG5cdC8vIHZhciBkb2MgPSB3aW5kb3cuZG9jdW1lbnQ7XG5cdC8vIHZhciBkb2NFbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdHZhciBnZXN0dXJlcyA9IHt9O1xuXHR2YXIgVE9VQ0hfU1RBUlQgPSAndG91Y2hzdGFydCc7XG5cdHZhciBUT1VDSF9FTkQgPSAndG91Y2hlbmQnO1xuXHR2YXIgVE9VUkNIX01PVkUgPSAndG91Y2htb3ZlJztcblx0dmFyIFRBUFBJTkcgPSAndGFwcGluZyc7XG5cdHZhciBUT1VDSF9DQU5DRUwgPSAndG91Y2hjYW5jZWwnO1xuXHRcblx0ZnVuY3Rpb24gZ2V0UmFuZG9tKG1pbiwgbWF4KSB7XG5cdCAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG5cdH07XG5cdHZhciBBUExVU19UQVAgPSAnYXBsdXNfdGFwJyArIGdldFJhbmRvbSgxLCAxMDAwMDApO1xuXHRcblx0ZnVuY3Rpb24gZmlyZUV2ZW50KGVsZW1lbnQsIHR5cGUsIGV4dHJhKSB7XG5cdCAgdmFyIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcblx0ICBldmVudC5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG5cdFxuXHQgIGlmICh0eXBlb2YgZXh0cmEgPT09ICdvYmplY3QnKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGV4dHJhKSB7XG5cdCAgICAgIGV2ZW50W3BdID0gZXh0cmFbcF07XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b3VjaHN0YXJ0SGFuZGxlcihldmVudCkge1xuXHQgIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0ICBpZiAoT2JqZWN0LmtleXMoZ2VzdHVyZXMpLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgZG9jRWwuYWRkRXZlbnRMaXN0ZW5lcihUT1VSQ0hfTU9WRSwgdG91Y2htb3ZlSGFuZGxlciwgZmFsc2UpO1xuXHQgICAgZG9jRWwuYWRkRXZlbnRMaXN0ZW5lcihUT1VDSF9FTkQsIHRvdWNoZW5kSGFuZGxlciwgZmFsc2UpO1xuXHQgICAgZG9jRWwuYWRkRXZlbnRMaXN0ZW5lcihUT1VDSF9DQU5DRUwsIHRvdWNoZW5kSGFuZGxlciwgZmFsc2UpO1xuXHQgIH1cblx0XG5cdCAgLy8gcmVjb3JkIGV2ZXJ5IHRvdWNoXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XG5cdCAgICB2YXIgdG91Y2hSZWNvcmQgPSB7fTtcblx0XG5cdCAgICBmb3IgKHZhciBwIGluIHRvdWNoKSB7XG5cdCAgICAgIHRvdWNoUmVjb3JkW3BdID0gdG91Y2hbcF07XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGdlc3R1cmUgPSB7XG5cdCAgICAgIHN0YXJ0VG91Y2g6IHRvdWNoUmVjb3JkLFxuXHQgICAgICBzdGFydFRpbWU6IERhdGUubm93KCksXG5cdCAgICAgIHN0YXR1czogVEFQUElORyxcblx0ICAgICAgZWxlbWVudDogZXZlbnQuc3JjRWxlbWVudCB8fCBldmVudC50YXJnZXRcblx0ICAgIH07XG5cdCAgICBnZXN0dXJlc1t0b3VjaC5pZGVudGlmaWVyXSA9IGdlc3R1cmU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b3VjaG1vdmVIYW5kbGVyKGV2ZW50KSB7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHRvdWNoID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbaV07XG5cdCAgICB2YXIgZ2VzdHVyZSA9IGdlc3R1cmVzW3RvdWNoLmlkZW50aWZpZXJdO1xuXHRcblx0ICAgIGlmICghZ2VzdHVyZSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRpc3BsYWNlbWVudFggPSB0b3VjaC5jbGllbnRYIC0gZ2VzdHVyZS5zdGFydFRvdWNoLmNsaWVudFg7XG5cdCAgICB2YXIgZGlzcGxhY2VtZW50WSA9IHRvdWNoLmNsaWVudFkgLSBnZXN0dXJlLnN0YXJ0VG91Y2guY2xpZW50WTtcblx0ICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhkaXNwbGFjZW1lbnRYLCAyKSArIE1hdGgucG93KGRpc3BsYWNlbWVudFksIDIpKTtcblx0XG5cdCAgICAvLyBtYWdpYyBudW1iZXIgMTA6IG1vdmluZyAxMHB4IG1lYW5zIHBhbiwgbm90IHRhcFxuXHQgICAgaWYgKChnZXN0dXJlLnN0YXR1cyA9PT0gVEFQUElORyB8fCBnZXN0dXJlLnN0YXR1cyA9PT0gJ3ByZXNzaW5nJykgJiYgZGlzdGFuY2UgPiAxMCkge1xuXHQgICAgICBnZXN0dXJlLnN0YXR1cyA9ICdwYW5uaW5nJztcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvdWNoZW5kSGFuZGxlcihldmVudCkge1xuXHRcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcblx0ICAgIHZhciBpZCA9IHRvdWNoLmlkZW50aWZpZXI7XG5cdCAgICB2YXIgZ2VzdHVyZSA9IGdlc3R1cmVzW2lkXTtcblx0XG5cdCAgICBpZiAoIWdlc3R1cmUpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGdlc3R1cmUuc3RhdHVzID09PSBUQVBQSU5HICYmIGV2ZW50LnR5cGUgPT09IFRPVUNIX0VORCkge1xuXHQgICAgICBnZXN0dXJlLnRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cdCAgICAgIC8vIGZpcmUgY2xpY2ssIG5vdCB0YXAuXG5cdCAgICAgIGZpcmVFdmVudChnZXN0dXJlLmVsZW1lbnQsIEFQTFVTX1RBUCwge1xuXHQgICAgICAgIHRvdWNoOiB0b3VjaCxcblx0ICAgICAgICB0b3VjaEV2ZW50OiBldmVudFxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBkZWxldGUgZ2VzdHVyZXNbaWRdO1xuXHQgIH1cblx0XG5cdCAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHQgIGlmIChPYmplY3Qua2V5cyhnZXN0dXJlcykubGVuZ3RoID09PSAwKSB7XG5cdCAgICBkb2NFbC5yZW1vdmVFdmVudExpc3RlbmVyKFRPVVJDSF9NT1ZFLCB0b3VjaG1vdmVIYW5kbGVyLCBmYWxzZSk7XG5cdCAgICBkb2NFbC5yZW1vdmVFdmVudExpc3RlbmVyKFRPVUNIX0VORCwgdG91Y2hlbmRIYW5kbGVyLCBmYWxzZSk7XG5cdCAgICBkb2NFbC5yZW1vdmVFdmVudExpc3RlbmVyKFRPVUNIX0NBTkNFTCwgdG91Y2hlbmRIYW5kbGVyLCBmYWxzZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmaXhJT1NUb3VjaEJ1ZyhlbGVtZW50KSB7XG5cdCAgaWYgKCFlbGVtZW50Ll9fZml4VG91Y2hFdmVudCkge1xuXHQgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFRPVUNIX1NUQVJULCBmdW5jdGlvbiAoKSB7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBlbGVtZW50Ll9fZml4VG91Y2hFdmVudCA9IHRydWU7XG5cdCAgfVxuXHR9XG5cdGZ1bmN0aW9uIGluaXQgKCkge1xuXHQgIGlmICghaXNJbml0aWFsaXplZCkge1xuXHQgICAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHQgICAgZG9jRWwuYWRkRXZlbnRMaXN0ZW5lcihUT1VDSF9TVEFSVCwgdG91Y2hzdGFydEhhbmRsZXIsIGZhbHNlKTtcblx0ICAgIGlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgb246IGZ1bmN0aW9uKGVsZW1lbnQsIGNhbGxiYWNrKSB7XG5cdCAgICBpbml0KCk7XG5cdCAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgY2FsbGJhY2spIHtcblx0ICAgICAgZml4SU9TVG91Y2hCdWcoZWxlbWVudCk7XG5cdCAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihBUExVU19UQVAsIChjYWxsYmFjay5fYXBsdXNfdGFwX2NhbGxiYWNrID0gZnVuY3Rpb24oZSkge1xuXHQgICAgICAgIGNhbGxiYWNrKGUsIGUudGFyZ2V0KTtcblx0ICAgICAgfSksIGZhbHNlKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHVuOiBmdW5jdGlvbihlbGVtZW50LCBjYWxsYmFjaykge1xuXHQgICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyICYmIGNhbGxiYWNrICYmIGNhbGxiYWNrLl9hcGx1c190YXBfY2FsbGJhY2spIHtcblx0ICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKEFQTFVTX1RBUCwgY2FsbGJhY2suX2FwbHVzX3RhcF9jYWxsYmFjaywgZmFsc2UpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDM1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHVt6YCa6YGT77yMYXBsdXPlj5HpgIFodHRw6K+35rGC5pel5b+X5o+S5Lu2XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDpkrDmmK0gPGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciBtaW5pID0gcmVxdWlyZSgnLi4vbGliX3UvdXRpbHMvbWluaScpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuXHQgICAgICogICBsb2dDb25maWc6IHtsb2dDb25maWd9XG5cdCAgICAgKiB9XG5cdCAgICAgKi9cblx0XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIE1haW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0ICAgICAgdmFyIG1haW4gPSBNYWluLmNyZWF0ZSh7XG5cdCAgICAgICAgV1M6IG51bGwsXG5cdCAgICAgICAgQ1RYOiB3aW5kb3csXG5cdCAgICAgICAgQ1RYX1RZUEU6ICdXRUInXG5cdCAgICAgIH0pOyAgICAgIFxuXHQgICAgICBtYWluLnJ1bih0aGlzLm9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiB1bemAmumBk++8jOaLpuaIquW5tuaMiWh0dHDljY/orq7lj5HpgIHml6Xlv5dcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIEFhcm9ufOmSsOaYrSA8Y2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGxvZ19jbG91ZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0dmFyIG1haW5fYmFzZV9odHRwID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cdHZhciBib2R5QnVpbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxTdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHR2YXIgZmV0Y2hEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciBpbml0VGltZXN0YW1wO1xuXHRtb2R1bGUuZXhwb3J0cyA9IG1haW5fYmFzZV9odHRwLmV4dGVuZCh7XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtcyB7T2JqZWN0fSBkYXRhXG5cdCAgICogKi8gXG5cdCAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIGlmICghIWFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkpTQlJJREdFX09OTFkpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH0gXG5cdCAgICB2YXIgcGFyYW1zID0gbG9nX2Nsb3VkLmNoYW5nZVRvT2JqKGRhdGEud2hhdF90b19zZW5kLmxvZ2RhdGEpO1xuXHQgICAgdWxvZygpLnNldERlYnVnKCEhYXBsdXMuZ2V0TWV0YUluZm8oJ0RFQlVHJykpO1xuXHQgICAgdmFyIG1ldGhvZDtcblx0ICAgIHZhciBwb3N0RGF0YSA9IGJvZHlCdWlsZChwYXJhbXMsIGRhdGEudXNlcmRhdGEpO1xuXHQgICAgaWYgKGFwbHVzLl9oNV9zaGFyZV9lbmFibGUpIHtcblx0ICAgICAgbWV0aG9kID0gJ1BPU1QnO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbWV0aG9kID0gZGF0YS53aGVyZV90b19zZW5kLm1ldGhvZDtcblx0ICAgICAgaWYgKG1ldGhvZCAhPT0gJ1BPU1QnIHx8ICEhIShuYXZpZ2F0b3IgJiYgbmF2aWdhdG9yLnNlbmRCZWFjb24pKSB7XG5cdCAgICAgICAgcG9zdERhdGEgPSBcImQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocG9zdERhdGEpO1xuXHQgICAgICB9IFxuXHQgICAgfVxuXHQgICAgXG5cdCAgICB1bG9nKCkuaSgnZXZlbnQgYmVmb3JlIHNlbmQgdG86ICcsIGRhdGEud2hlcmVfdG9fc2VuZC51cmwpO1xuXHQgICAgaWYgKCFpbml0VGltZXN0YW1wKSB7XG5cdCAgICAgIGluaXRUaW1lc3RhbXAgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChpbml0VGltZXN0YW1wICYmIGluaXRUaW1lc3RhbXAgLSAobmV3IERhdGUoKSkuZ2V0VGltZSgpID4gYXBsdXNTdGF0aWMuU0hBUkVfQ0FDSEVfSU5URVJWQUwgJiYgYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuXHQgICAgICB1dGlsU3RvcmUucmVtb3ZlKCdfX3NoYXJlZnJvbScpO1xuXHQgICAgICB1dGlsU3RvcmUucmVtb3ZlKCdfX2Zyb21hcHBrZXknKTtcblx0ICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX3VtX3NzcmMnKTtcblx0ICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX3VtX2NoYW5uZWwnKTtcblx0ICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX3VtX2NhbXBhaWduJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCFhcGx1cy5faDVfc2hhcmVfZW5hYmxlKSB7XG5cdCAgICAgIGFwbHVzLnNlbmQoZGF0YS53aGVyZV90b19zZW5kLnVybCwgcG9zdERhdGEsIG1ldGhvZCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmZXRjaERhdGEucmVxdWVzdDR1bSh7XG5cdCAgICAgICAgdXJsOiBkYXRhLndoZXJlX3RvX3NlbmQudXJsLFxuXHQgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICAgIGRhdGE6IHBvc3REYXRhLFxuXHQgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuXHQgICAgICAgICAgaWYgKHJlcyAmJiByZXMuaW1wcmludCkge1xuXHQgICAgICAgICAgICB1dGlsU3RvcmUuc2V0KGFwbHVzU3RhdGljLklNUFJJTlQsIHJlcy5pbXByaW50KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LFxuXHQgICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuXHQgICAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgICAgICBtc2c6ICdhcGx1cyB3ZWJsb2dzIGVycm9yOiAnICsgZXJyb3IgXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cbi8qKiovIH0pLFxuLyogMzcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogd2Vic29ja2V0IHV0aWxzXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0ZXhwb3J0cy5nZXRLZXlJbmRleCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICB2YXIgbWFwID0ge1xuXHQgICAgcHJvdG9jb2w6IDEsXG5cdCAgICBldmVudF9hcmdzOiAyNSxcblx0ICB9O1xuXHQgIHJldHVybiBtYXBba2V5XTtcblx0fTtcblx0dmFyIEhMID0gJy0nO1xuXHRleHBvcnRzLmNoYW5nZVRvQXJyYXkgPSBmdW5jdGlvbiAoZm9ybWF0LCBkYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdFxuXHQgIHZhciB0aW1lID0gZGF0YS5ldmVudF90aW1lc3RhbXAuZ2V0VGltZSgpLnRvU3RyaW5nKCk7XG5cdCAgdmFyIGNsaWVudCA9IGRhdGEuY2xpZW50IHx8IHt9O1xuXHQgIHZhciB3aWR0aCA9IGNsaWVudC5zY3JlZW5XaWR0aCB8fCAnJztcblx0ICB2YXIgaGVpZ2h0ID0gY2xpZW50LnNjcmVlbkhlaWdodCB8fCAnJztcblx0XG5cdCAgdmFyIF9yZXNvbHV0aW9uID0gd2lkdGggKyAnKicgKyBoZWlnaHQ7XG5cdCAgdmFyIHJlc29sdXRpb24gPSB3aWR0aCAmJiBoZWlnaHQgPyBfcmVzb2x1dGlvbiA6IEhMO1xuXHRcblx0ICAvLyB2YXIgVUEgPSBjbGllbnQudXNlckFnZW50IHx8IEhMO1xuXHQgIHZhciBMQU5HID0gY2xpZW50Lmxhbmd1YWdlIHx8IEhMO1xuXHQgIHZhciBnb2tleSA9IGRhdGEuZ29rZXkgfHwge307XG5cdCAgdmFyIGV2ZW50X2FyZ3MgPSBKU09OLnN0cmluZ2lmeShnb2tleSk7XG5cdCAgdmFyIHNka19pbmZvID0gSlNPTi5zdHJpbmdpZnkoe1xuXHQgICAgY3VzdG9tU2RrSWQ6IGRhdGEuc2RrX2luZm8uY3VzdG9tU2RrSWQgfHwgJycsXG5cdCAgICBwbGF0Zm9ybV90eXBlOiBkYXRhLnNka19pbmZvLnBsYXRmb3JtVHlwZSB8fCAnJywgLy93ZWNoYXQsICdhbGlwYXknLCAnYmFpZHUnLCAndGFvYmFvJ1xuXHQgIH0pO1xuXHQgIHZhciBhcHBLZXkgPSBkYXRhLmFwcEtleSB8fCBkYXRhLmFwcElkIHx8IEhMO1xuXHQgIC8vIOS4muWKoeW6lOeUqOeahOaJqeWxleS/oeaBr1xuXHQgIHZhciBhcHBfZXh0X2luZm8gPSBKU09OLnN0cmluZ2lmeSh7XG5cdCAgICAvLyBhcHBJZDogY2xpZW50LmFwcElkIHx8ICcnXG5cdCAgICBhcHBJZDogY2xpZW50LmFwcElkIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdtaW5pQXBwSWQnKSB8fCAnJ1xuXHQgIH0pO1xuXHQgIHZhciBzZXNzaW9uX2FyZ3MgPSBKU09OLnN0cmluZ2lmeShkYXRhLnNlc3Npb25BcmdzIHx8IHt9KTtcblx0ICB2YXIgZ2xvYmFsX2FyZ3MgPSBKU09OLnN0cmluZ2lmeShkYXRhLmdsb2JhbEFyZ3MgfHwge30pOyAvLyAyMDIxLTAxLTE0QOS5nemUoemcgOaxglxuXHQgIHZhciBhcmcxID0gZGF0YS5hcmcxIHx8IGRhdGEubG9na2V5IHx8IEhMO1xuXHQgIGlmIChhcmcxLmluZGV4T2YoJy8kJF8nKSA9PT0gMCkge1xuXHQgICAgYXJnMSA9IGFyZzEuc3Vic3RyaW5nKDEsIGFyZzEubGVuZ3RoKTtcblx0ICB9XG5cdCAgaWYgKGRhdGEuZXZlbnRfY29kZSA9PT0gJzIwMDEnICYmIGRhdGEudHJhY2tlckV2ZW50Q29kZSkge1xuXHQgICAgYXJnMSA9IGRhdGEudHJhY2tlckV2ZW50Q29kZTtcblx0ICB9XG5cdCAgdmFyIG1vZGVsID0gW1xuXHQgICAgZGF0YS5jYWNoZSwgICAgICAgICAgICAgICAgIC8vIGxvZ19pZCDmoIfor4bor6XmnaHml6Xlv5fnmoTllK/kuIBJRFxuXHQgICAgZGF0YS5tZXRob2QgfHwgJ0dFVCcsICAgICAgIC8vIHByb3RvY29sX2luZm8g5Y2P6K6u5L+h5oGvIOS4iemAieS5i+S4gO+8mldTL1BPU1QvR0VUXG5cdCAgICBITCwgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlcl9hZ2VudCAtIOWuouaIt+err1VB5L+h5oGvKOaUr+S7mOWuneWuouaIt+err+S8muacieerlue6v++8jOS8muWvvOiHtOacjeWKoeerr+ino+aekOWHuumUme+8jOaVheWJjeerr+S4jemHhylcblx0ICAgIHJlc29sdXRpb24sICAgICAgICAgICAgICAgICAvLyByZXNvbHV0aW9uIOWxj+W5leWuveW6pirlsY/luZXpq5jluqYgXG5cdCAgICBhcHBLZXksICAgICAgICAgICAgICAgICAgICAgLy8gYXBwX2tleVxuXHQgICAgYXBwX2V4dF9pbmZvLCAgICAgICAgICAgICAgIC8vIGFwcF9leHRfaW5mbyBBcHDmianlsZXkv6Hmga9cblx0ICAgIGRhdGEuX2Rldl9pZCB8fCBITCwgICAgICAgICAvLyBiaXpfZGV2aWNlX2lkIOS4muWKoeS4iuS8oOeahOiuvuWkh+ivhuWIq0lEXG5cdCAgICAne30nLCAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV2aWNlX2V4dF9pbmZvIOiuvuWkh+aJqeWxleS/oeaBryjlj4Lop4HkuIvmlofor7TmmI4pIFRPRE8g5b6F5a6aIGstdiBqc29u5LiyXG5cdCAgICBkYXRhLl91c2VyX25pY2sgfHwgSEwsICAgICAgLy8gYml6X3VzZXJfbmljayDkuJrliqHnq6/nlKjkuo7or4bliKvlt7LnmbvlvZXnlKjmiLfnmoTkvJrlkZjmoIfor4YgVE9ETyDkuJrliqHkvKDlhaVcblx0ICAgIGRhdGEuX3VzZXJfaWQgfHwgSEwsICAgICAgICAvLyBiaXpfdXNlcl9pZCDkuJrliqHnq6/nlKjkuo7or4bliKvlt7LnmbvlvZXnlKjmiLfnmoTkvJrlkZhJRFxuXHQgICAgZGF0YS5fYW5vbnlfaWQgfHwgSEwsICAgICAgIC8vIGJpel9hbm9ueV9pZCDkuJrliqHnq6/nlKjkuo7or4bliKvpnZ7nmbvlvZXnlKjmiLfnmoTljL/lkI1JRFxuXHQgICAgJ3t9JywgICAgICAgICAgICAgICAgICAgICAgIC8vIGJpel91c2VyX2V4dF9pbmZvIOS4muWKoeerr+S4iuS8oOeahOaJqeWxleeUqOaIt+S/oeaBryBUT0RPXG5cdCAgICBMQU5HLCAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9jYWxlIOWcsOWMui3or63oqIDkv6Hmga9cblx0ICAgIGRhdGEudGltZVpvbmUgfHwgSEwsICAgICAgICAvLyB0aW1lem9uZSDorr7lpIfkvb/nlKjnmoTml7bljLpcblx0ICAgIGNsaWVudC5vcyB8fCBITCwgICAgICAgICAgICAvLyBvcyDmk43kvZzns7vnu58g5aaC77yaXCJPUyBYXCJcblx0ICAgIGNsaWVudC5vc192ZXJzaW9uIHx8IEhMLCAgICAvLyBvc192ZXJzaW9uIOaTjeS9nOezu+e7n+eJiOacrOWPty9CdWlsZOegge+8jOWmgu+8mlwiMTBfMTRfNFwiXG5cdCAgICBzZGtfaW5mbywgICAgICAgICAgICAgICAgICAgLy8gc2RrX2luZm8gU0RL5L+h5oGvKOWPguingeivtOaYjikgay1257uT5p6E77yM6ZyA6Kej5p6QIFwianN2ZXI9YXBsdXNfdS5qcyZsdmVyPTguMTEuNVwiIFRPRE9cblx0ICAgIGRhdGEuX3Nlc3Npb25faWQgfHwgSEwsICAgICAvLyBiaXpfc2Vzc2lvbl9pZCDkuJrliqHnq6/nu7TmiqTnmoRzZXNzaW9uIGlkXG5cdCAgICBkYXRhLmNuYSB8fCBITCwgICAgICAgICAgICAgLy8gdXRkaWRcblx0ICAgIHRpbWUsICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVudF90aW1lc3RhbXAg5LqL5Lu25pel5b+X55Sf5oiQ5pe26Ze0KOacrOWcsCksIHB25Li66aG16Z2i6L+b5YWl5pe26Ze0XG5cdCAgICBlbmNvZGVVUklDb21wb25lbnQoZGF0YS51cmwpIHx8IEhMLCAgICAgICAgICAgIC8vIHBhZ2Ug5a6M5pW055qEVVJM5oiW6ICFU2NyZWVuIE5hbWVcblx0ICAgIGRhdGEuZXZlbnRfY29kZSB8fCBITCwgICAgICAvLyBldmVudF9pZCDkuovku7bnsbvlnotJRCBUT0RPIEDkupHmnbBcblx0ICAgIGVuY29kZVVSSUNvbXBvbmVudChkYXRhLnByZSkgfHwgSEwsICAgICAgICAgICAgLy8gcmVmZXJfcGFnZSDmnaXmupBwYWdlXG5cdCAgICBnbG9iYWxfYXJncywgICAgICAgICAgICAgICAgLy8gZ2xvYmFsX2FyZ3Mg55So5oi36K6+572u55qE5YWo5bGA5Y+C5pWwLCDnlJ/lkb3lkajmnJ/nuqfliKtcblx0ICAgIHNlc3Npb25fYXJncywgICAgICAgICAgICAgICAvLyBzZXNzaW9uX2FyZ3Mg55So5oi36K6+572u55qEU2Vzc2lvbue6p+WPguaVsCzot6hTZXNzaW9u5riF56m6XG5cdCAgICBldmVudF9hcmdzLCAgICAgICAgICAgICAgICAgLy8gZXZlbnRfYXJncyDnlKjmiLforr7nva7nmoRQVue6p+WPguaVsCzot6hQVua4heepuiBrLXbnu5PmnoQgQOS6keadsFxuXHQgICAgYXJnMSwgICAgICAgICAgICAgICAgICAgICAgIC8vIGFyZzEg55So5oi35omp5bGV6aKE55WZXG5cdCAgICBkYXRhLnNka19pbmZvLmpzdmVyLCAgICAgICAgLy8gVE9ETyBzZGtfdHlwZSAoYXBsdXNfbWluaS5qcykgcmVzZXJ2ZV8xIOS6i+S7tuWxnuaAp++8mlBW57qn55qE5pel5b+X5Y+C5pWwLOi3qFBW6Ieq5Yqo5riF56m677yM6L+Z6YeM5pivanPlpKfniYjmnKzlj7fvvIxhcGx1cy5qcyB8fCBhcGx1c19taW5pLmpzXG5cdCAgICBkYXRhLnNka19pbmZvLmx2ZXIsICAgICAgICAgLy8gc2RrX3ZlcnNpb24gIFNES+eJiOacrO+8jOi/memHjOWvueW6lGFwbHVzSlPnmoTlhbfkvZPniYjmnKzlj7fvvIzlpoIxLjAuMFxuXHQgICAgY2xpZW50LmFwcFZlcnNpb24gfHwgJ2RldnRvb2xzJyB8fCBITCwgICAgICAgICAvLyBhcHBfdmVyc2lvblxuXHQgICAgY2xpZW50LmJyYW5kIHx8IEhMLCAgICAgICAgIC8vIGJyYW5kIOaJi+acuuWTgeeJjFxuXHQgICAgSEwsICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhcnJpZXIg6L+Q6JCl5ZWG77yI5YmN56uv5Lmf5Y+W5LiN5Yiw77yJXG5cdCAgICBjbGllbnQubmV0d29ya1R5cGUgfHwgSEwsICAgLy8gYWNjZXNzIOe9kee7nOexu+Wei1xuXHQgIF07XG5cdCAgLy8gY29uc29sZS5sb2cobW9kZWwpO1xuXHQgIHJldHVybiBtb2RlbDtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2hhbmdlVG9PYmogPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHRpbWUgPSBkYXRhLmV2ZW50X3RpbWVzdGFtcC5nZXRUaW1lKCkudG9TdHJpbmcoKTtcblx0ICB2YXIgY2xpZW50ID0gZGF0YS5jbGllbnQgfHwge307XG5cdFxuXHQgIC8vIHZhciBVQSA9IGNsaWVudC51c2VyQWdlbnQgfHwgSEw7XG5cdCAgdmFyIExBTkcgPSBjbGllbnQubGFuZ3VhZ2UgfHwgSEw7XG5cdCAgdmFyIGdva2V5ID0gZGF0YS5nb2tleSB8fCB7fTtcblx0ICB2YXIgZXZlbnRfYXJncyA9IEpTT04uc3RyaW5naWZ5KGdva2V5KTtcblx0ICB2YXIgc2RrX2luZm8gPSBKU09OLnN0cmluZ2lmeSh7XG5cdCAgICBjdXN0b21TZGtJZDogZGF0YS5zZGtfaW5mby5jdXN0b21TZGtJZCB8fCAnJyxcblx0ICAgIHBsYXRmb3JtX3R5cGU6IGRhdGEuc2RrX2luZm8ucGxhdGZvcm1UeXBlIHx8ICcnLCAvL3dlY2hhdCwgJ2FsaXBheScsICdiYWlkdScsICd0YW9iYW8nXG5cdCAgfSk7XG5cdCAgXG5cdCAgdmFyIGFwcEtleSA9IGRhdGEuYXBwS2V5IHx8IGRhdGEuYXBwSWQgfHwgSEw7XG5cdCAgLy8g5Lia5Yqh5bqU55So55qE5omp5bGV5L+h5oGvXG5cdCAgdmFyIGFwcF9leHRfaW5mbyA9IEpTT04uc3RyaW5naWZ5KHtcblx0ICAgIC8vIGFwcElkOiBjbGllbnQuYXBwSWQgfHwgJydcblx0ICAgIGFwcElkOiBjbGllbnQuYXBwSWQgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ21pbmlBcHBJZCcpIHx8ICcnXG5cdCAgfSk7XG5cdCAgdmFyIHNlc3Npb25fYXJncyA9IEpTT04uc3RyaW5naWZ5KGRhdGEuc2Vzc2lvbkFyZ3MgfHwge30pO1xuXHQgIHZhciBnbG9iYWxfYXJncyA9IEpTT04uc3RyaW5naWZ5KGRhdGEuZ2xvYmFsQXJncyB8fCB7fSk7IC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG5cdCAgdmFyIGFyZzEgPSBkYXRhLmFyZzEgfHwgZGF0YS5sb2drZXkgfHwgSEw7XG5cdCAgaWYgKGFyZzEuaW5kZXhPZignLyQkXycpID09PSAwKSB7XG5cdCAgICBhcmcxID0gYXJnMS5zdWJzdHJpbmcoMSwgYXJnMS5sZW5ndGgpO1xuXHQgIH1cblx0ICBpZiAoZGF0YS5ldmVudF9jb2RlID09PSAnMjAwMScgJiYgZGF0YS50cmFja2VyRXZlbnRDb2RlKSB7XG5cdCAgICBhcmcxID0gZGF0YS50cmFja2VyRXZlbnRDb2RlO1xuXHQgIH1cblx0XG5cdCAgdmFyIE9iaiA9IHt9O1xuXHQgIE9iai5wbGF0Zm9ybSA9ICBkYXRhLnNka19pbmZvLnBsYXRmb3JtVHlwZSB8fCAnJztcblx0ICBPYmouc2RrX3R5cGUgPSBPYmoucGxhdGZvcm0gPyBPYmoucGxhdGZvcm0gKyAnbXAnIDogJyc7XG5cdCAgT2JqLmFwcGtleSA9IGFwcEtleTtcblx0ICBPYmouc2RrX3ZlcnNpb24gPSBkYXRhLnNka19pbmZvLmx2ZXI7IC8vIHNka192ZXJzaW9uICBTREvniYjmnKzvvIzov5nph4zlr7nlupRhcGx1c0pT55qE5YW35L2T54mI5pys5Y+377yM5aaCMS4wLjBcblx0ICAvLyB2YXIgbW9kZXJuT1MgPSBVQS5tYXRjaCgvaXBob25lfGlwYWR8YW5kcm9pZHxtYWNpbnRvc2h8V2luZG93cy9pKTtcblx0ICBPYmouZGV2aWNlX3R5cGUgPSBjbGllbnQuZGV2aWNlX21vZGVsIHx8ICcnO1xuXHQgIE9iai5vcyA9IGNsaWVudC5vcyB8fCAnJztcblx0ICBPYmoub3NfdmVyc2lvbiA9IGNsaWVudC5vc192ZXJzaW9uIHx8ICcnO1xuXHQgIE9iai5qc3ZlciA9IGRhdGEuc2RrX2luZm8uanN2ZXI7IC8vIHNka190eXBlIChhcGx1c19taW5pLmpzKSByZXNlcnZlXzEg5LqL5Lu25bGe5oCn77yaUFbnuqfnmoTml6Xlv5flj4LmlbAs6LeoUFboh6rliqjmuIXnqbrvvIzov5nph4zmmK9qc+Wkp+eJiOacrOWPt++8jGFwbHVzLmpzIHx8IGFwbHVzX21pbmkuanMgfHwgYXBsdXNfY2xvdWQuanM7XG5cdCAgLy8gT2JqLmRldmljZV9tb2RlbCA9IFVBOyAvLyBzZXJ2ZXIg56uv6YCa6L+HIEhUVFAgcmVxdWVzdCBoZWFkZXIg6I635Y+WXG5cdCAgT2JqLnBpeGVsX3JhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgJyc7XG5cdCAgdmFyIHcgPSBNYXRoLnJvdW5kKGNsaWVudC5zY3JlZW5XaWR0aCAqICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxKSk7XG5cdCAgdmFyIGggPSBNYXRoLnJvdW5kKGNsaWVudC5zY3JlZW5IZWlnaHQgKiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMSkpO1xuXHQgIE9iai5yZXNvbHV0aW9uID0gdyA+IGggPyB3ICsgJyonICsgaCA6IGggKyAnKicgKyB3O1xuXHQgIE9iai5sYW5ndWFnZSA9IExBTkc7XG5cdCAgT2JqLmFwcF92ZXJzaW9uID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcFZlcnNpb24nKSB8fCAnZGV2dG9vbHMnO1xuXHQgIC8vIGVrdiDpnIDopoHlrZfmrrVcblx0ICBPYmouYXJnMSA9IGFyZzE7XG5cdCAgT2JqLmV2ZW50X2FyZ3MgPSBldmVudF9hcmdzOyAvL2V2ZW50X2FyZ3Mg55So5oi36K6+572u55qEUFbnuqflj4LmlbAs6LeoUFbmuIXnqbogay1257uT5p6EIEDkupHmnbBcblx0ICBPYmouZXZlbnRfY29kZSA9IGRhdGEuZXZlbnRfY29kZSB8fCAnJztcblx0ICBPYmouc2Vzc2lvbkFyZ3MgPSBzZXNzaW9uX2FyZ3M7IC8vIHNlc3Npb25fYXJncyDnlKjmiLforr7nva7nmoRTZXNzaW9u57qn5Y+C5pWwLOi3qFNlc3Npb27muIXnqbpcblx0ICBPYmouZ2xvYmFsX2FyZ3MgPSBnbG9iYWxfYXJnczsgLy8gZ2xvYmFsX2FyZ3Mg55So5oi36K6+572u55qE5YWo5bGA5Y+C5pWwLCDnlJ/lkb3lkajmnJ/nuqfliKtcblx0ICBPYmouYXBwX2V4dF9pbmZvID0gYXBwX2V4dF9pbmZvOyAvLyBhcHBfZXh0X2luZm8gQXBw5omp5bGV5L+h5oGvXG5cdCAgT2JqLnRpbWUgPSB0aW1lOyAvL2V2ZW50X3RpbWVzdGFtcCDkuovku7bml6Xlv5fnlJ/miJDml7bpl7Qo5pys5ZywKSwgcHbkuLrpobXpnaLov5vlhaXml7bpl7Rcblx0ICBPYmouY25hID0gZGF0YS5jbmEgfHwgJyc7XG5cdCAgT2JqLnVybCA9IGRhdGEudXJsIHx8ICcnO1xuXHQgIE9iai5wcmUgPSBkYXRhLnByZSB8fCAnJztcblx0ICBPYmoubWV0aG9kID0gZGF0YS5tZXRob2QgfHwgJ0dFVCc7XG5cdCAgT2JqLmxvZ19pZCA9IGRhdGEuY2FjaGUgfHwgJyc7IC8vIGxvZ19pZCDmoIfor4bor6XmnaHml6Xlv5fnmoTllK/kuIBJRFxuXHQgIE9iai5zZGtfaW5mbyA9IHNka19pbmZvO1xuXHQgIE9iai5pc19hdXRvID0gZGF0YS5pc19hdXRvO1xuXHQgIHZhciBleGRhdGEgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJyk7XG5cdCAgaWYgKGV4ZGF0YSAmJiBleGRhdGEuYXBsdXNfdHJhY2tfZGVidWdfaWQpIHtcblx0ICAgIE9iai50cmFja19kZWJ1Z19pZCA9IGV4ZGF0YS5hcGx1c190cmFja19kZWJ1Z19pZDtcblx0ICB9XG5cdCAgcmV0dXJuIE9iajtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAzOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiDmi6bmiKrlubbmjIlodHRw5Y2P6K6u5Y+R6YCB5pel5b+XXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHQvLyB2YXIgbG9nX2Nsb3VkID0gcmVxdWlyZSgnLi9sb2dfY2xvdWQnKTtcblx0dmFyIHV0aWxHUSA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvLyB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEJhc2UuZXh0ZW5kKHtcblx0XG5cdCAgc3Vic2NyaWJlTG9nczogZnVuY3Rpb24gKGFjdGlvbiwgY2FsbGJhY2spIHtcblx0ICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIFthY3Rpb24sIGZ1bmN0aW9uIChvcmlEYXRhcykge1xuXHQgICAgICBpZiAob3JpRGF0YXMuc3RhdHVzID09PSBhcGx1c1N0YXRpYy5DT01QTEVURSkge1xuXHQgICAgICAgIGNhbGxiYWNrKG9yaURhdGFzKTtcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHQgIH0sXG5cdFxuXHQgIGdldExvZ2ljU3ltYm9sOiBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5mb3JtYXQgPT09ICdBTEknID8gJyYnIDogJ3x8Jztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlnKjlrZDnsbvkuK3lrp7njrBcblx0ICAgKiBAcGFyYW1zIHtPYmplY3R9IGRhdGFcblx0ICAgKi9cblx0ICBoYW5kbGVyTWlkZGxld2FyZTogZnVuY3Rpb24gKCkge30sXG5cdCAgXG5cdFxuXHQgIHdhdGNoTE9HOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgXG5cdCAgICAvLyDorqLpmIVwduS6i+S7tlxuXHQgICAgX3NlbGYuc3Vic2NyaWJlTG9ncyhhcGx1c1N0YXRpYy5NV19DSEFOR0VfUFYsIGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsICdwdicpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLy8g6K6i6ZiFaGpsai9hcGx1c+S6i+S7tlxuXHQgICAgX3NlbGYuc3Vic2NyaWJlTG9ncyhhcGx1c1N0YXRpYy5NV19DSEFOR0VfSEpMSiwgZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgX3NlbGYuaGFuZGxlck1pZGRsZXdhcmUoZGF0YSwgYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgfSk7XG5cdCAgfSxcblx0XG5cdCAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLndhdGNoTE9HKCk7XG5cdCAgfVxuXHR9KTtcblxuXG4vKioqLyB9KSxcbi8qIDM5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS91dGlscy91dGlsR1EuanNcblx0ICog5pON5L2cYXBsdXNfcXVldWXnmoTlt6Xlhbfnsbtcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0ZXhwb3J0cy5wdXNoSW50b0dvbGRsb2dRdWV1ZSA9IGZ1bmN0aW9uIChhY3Rpb24sIGFyZ3MpIHtcblx0ICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXNfcXVldWUnKTtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgbmFtZXMgPSBhY3Rpb24uc3BsaXQoJy4nKTtcblx0ICB2YXIgYXBsdXNfMSA9IGFwbHVzW25hbWVzWzFdXTtcblx0ICB2YXIgYXBsdXNfMiA9IGFwbHVzXzEgPyBhcGx1c18xW25hbWVzWzJdXSA6IG51bGw7XG5cdFxuXHQgIGlmIChhcGx1cyAmJiBuYW1lcy5sZW5ndGggPT09IDIgJiYgYXBsdXNfMSkge1xuXHQgICAgYXBsdXNfMS5hcHBseShhcGx1cywgYXJncyk7XG5cdCAgfSBlbHNlIGlmIChuYW1lcy5sZW5ndGggPT09IDMgJiYgYXBsdXNfMikge1xuXHQgICAgYXBsdXNfMi5hcHBseShhcGx1c18xLCBhcmdzKTsgIFxuXHQgIH0gZWxzZSB7XG5cdCAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgYWN0aW9uOiBhY3Rpb24sXG5cdCAgICAgIGFyZ3VtZW50czogYXJnc1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogdW0g6YCa6YGT77yM5pS25pWw6K+35rGC5LiK5oql5pWw5o2uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBBYXJvbnzpkrDmmK0gPGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbT5cblx0ICovXG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIGJ1aWxkSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpO1xuXHR2YXIgbWFuZ2xlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBiYXNlNjQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpO1xuXHR2YXIgY3JlYXRlRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdHZhciB1dGlsU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0dmFyIHBhZ2VNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdFxuXHQvKipcblx0ICog5ZCMdW3pgJrpgZPniYjmnKznmoTlsI/nqIvluo/mlLbmlbDkuIrmiqXmlbDmja7kvZPnm7jmr5TvvIzkuI3pnIDopoEgc2Vzc2lvbu+8jHNlc3Npb24g55Sx5pyN5Yqh56uv6Kej5YazXG5cdCAqIOW5tuS4lCBla3Yg5rKh5pyJ57yT5a2Y5py65Yi2XG5cdCovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxvZ2RhdGEsIHVzZXJkYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgaWYgKCFsb2dkYXRhIHx8ICF1c2VyZGF0YSB8fCB1dGlscy5jaGVja0VtcHR5T2JqKGxvZ2RhdGEpIHx8IHV0aWxzLmNoZWNrRW1wdHlPYmoodXNlcmRhdGEpKSB7XG5cdCAgICByZXR1cm4ge307XG5cdCAgfVxuXHQgIHZhciBkYXRhID0ge307XG5cdCAgdmFyIGhlYWRlciA9IGNsb25lRGVlcChidWlsZEhlYWRlcihsb2dkYXRhKSk7XG5cdCAgdmFyIGFfYW5vbnlfaWQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8IGxvZ2RhdGEuY25hO1xuXHQgIGlmIChhX2Fub255X2lkKSB7XG5cdCAgICBoZWFkZXIuYW5vbnlfaWQgPSBhX2Fub255X2lkO1xuXHQgICAgaGVhZGVyLmlkX3RyYWNraW5nLmFub255X2lkID0gYV9hbm9ueV9pZDtcblx0ICB9XG5cdCAgLy8gZml4IGlkdHJhY2luZyBidWcsIGlmIHVzZXIgZG9uJ3Qgc2V0IF9kZXZfaWRcblx0ICB2YXIgYV9kZXZfaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpIHx8IGxvZ2RhdGEuY25hO1xuXHQgIGlmIChhX2Rldl9pZCkge1xuXHQgICAgaGVhZGVyLmRldl9pZCA9IGFfZGV2X2lkO1xuXHQgICAgaGVhZGVyLmlkX3RyYWNraW5nLmRldl9pZCA9IGFfZGV2X2lkO1xuXHQgIH1cblx0ICBcblx0ICBpZiAoYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuXHQgICAgdmFyIHV1aWQgPSBhcGx1cy5nZXRNZXRhSW5mbygndXVpZCcpO1xuXHQgICAgaWYgKHV1aWQpIHtcblx0ICAgICAgaGVhZGVyLmlkX3RyYWNraW5nLnVkID0gdXVpZDtcblx0ICAgIH1cblx0ICAgIHZhciBvcGVuaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnb3BlbmlkJyk7XG5cdCAgICBpZiAob3BlbmlkKSB7XG5cdCAgICAgIGhlYWRlci5pZF90cmFja2luZy5vcGVuaWQgPSBvcGVuaWQ7XG5cdCAgICB9XG5cdCAgICB2YXIgdW5pb25pZCA9IGFwbHVzLmdldE1ldGFJbmZvKCd1bmlvbmlkJyk7XG5cdCAgICBpZiAodW5pb25pZCkge1xuXHQgICAgICBoZWFkZXIuaWRfdHJhY2tpbmcudW5pb25pZCA9IHVuaW9uaWQ7XG5cdCAgICB9XG5cdCAgICB2YXIgYW5vdXltb3Vzb3BlbmlkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2Fub3V5bW91c29wZW5pZCcpO1xuXHQgICAgaWYgKGFub3V5bW91c29wZW5pZCkge1xuXHQgICAgICBoZWFkZXIuaWRfdHJhY2tpbmcuYW5vbnltb3VzaWQgPSBhbm91eW1vdXNvcGVuaWQ7XG5cdCAgICB9XG5cdCAgICB2YXIgYWxpcGF5X2lkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FsaXBheWlkJyk7XG5cdCAgICBpZiAoYWxpcGF5X2lkKSB7XG5cdCAgICAgIGhlYWRlci5pZF90cmFja2luZy5hbGlwYXlfaWQgPSBhbGlwYXlfaWQ7XG5cdCAgICB9XG5cdCAgICB2YXIgc3dhbmlkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3N3YW5pZCcpO1xuXHQgICAgaWYgKHN3YW5pZCkge1xuXHQgICAgICBoZWFkZXIuaWRfdHJhY2tpbmcuYW5vbnltb3VzaWQgPSBzd2FuaWQ7XG5cdCAgICB9XG5cdCAgICB2YXIgdXNlclByb2ZpbGUgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5VU0VSX1BST0ZJTEVfS0VZKTtcblx0ICAgIGlmICh1c2VyUHJvZmlsZSkge1xuXHQgICAgICBoZWFkZXIudXNlcl9pbmZvID0gdXNlclByb2ZpbGU7XG5cdCAgICB9XG5cdCAgICB2YXIgaW1wID0gdXRpbFN0b3JlLmdldChhcGx1c1N0YXRpYy5JTVBSSU5UKTtcblx0ICAgIGlmIChpbXApIHtcblx0ICAgICAgaGVhZGVyLmltcHJpbnQgPSBpbXA7XG5cdCAgICB9XG5cdCAgICB2YXIgaWRfdHlwZSA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLklEX1RZUEUpIHx8ICdjbmFpZCc7XG5cdCAgICBoZWFkZXIuaWRfdHlwZSA9IGlkX3R5cGU7XG5cdCAgfVxuXHRcblx0ICB2YXIgZWt2ID0gbnVsbDtcblx0ICBpZiAobG9nZGF0YS5ldmVudF9jb2RlID09PSAnMjAwMScpIHtcblx0ICAgIGVrdiA9IF9idWlsZFBWRXZlbnQobG9nZGF0YSwgdXNlcmRhdGEpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBla3YgPSBfYnVpbGRISkxKRXZlbnQobG9nZGF0YSwgdXNlcmRhdGEpO1xuXHQgIH1cblx0ICBpZiAoZWt2KSB7XG5cdCAgICBkYXRhID0ge1xuXHQgICAgICBhbmFseXRpY3M6IHtcblx0ICAgICAgICBla3ZzOiB7XCJzZXNzaW9uaWRcIiA6IFtjbG9uZURlZXAoZWt2KV19XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICB2YXIgdXNlcklkID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpO1xuXHQgIGlmICh1c2VySWQgJiYgZGF0YS5hbmFseXRpY3MpIHtcblx0ICAgIGRhdGEuYW5hbHl0aWNzLmFjdGl2ZV91c2VyID0ge1xuXHQgICAgICBwdWlkOiB1c2VySWQsXG5cdCAgICAgIHByb3ZpZGVyOiBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpXG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgZGF0YS5oZWFkZXIgPSB1dGlscy5hc3NpZ24oaGVhZGVyLCBkYXRhLmhlYWRlciwge1xuXHQgICAgdHM6IERhdGUubm93KCksXG5cdCAgICB0cmFjZUlkOiB1dGlscy5nZXRSYW5kb21TdHIoMTApICsgRGF0ZS5ub3coKSArIHV0aWxzLmdldFJhbmRvbVN0cig5KVxuXHQgIH0pO1xuXHQgIHZhciBtYW5nbGVEYXRhID0gbWFuZ2xlKGRhdGEpO1xuXHQgIHZhciByZXF1ZXN0RGF0YSA9IGpzb25VdGlsLnN0cmluZ2Z5KG1hbmdsZURhdGEpO1xuXHQgIHVsb2coKS5pKCdldmVudCBkYXRhOiAnLG1hbmdsZURhdGEpO1xuXHQgIHJldHVybiBiYXNlNjQuZW5jb2RlKHJlcXVlc3REYXRhKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9idWlsZFNoYXJlSW5mbygpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICBpZiAoYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuXHQgICAgdmFyIHNoYXJlSW5mbyA9IHt9O1xuXHQgICAgdmFyIHNoYXJlZnJvbSA9IHV0aWxTdG9yZS5nZXQoJ19fc2hhcmVmcm9tJyk7XG5cdCAgICB2YXIgZnJvbWFwcGtleSA9IHV0aWxTdG9yZS5nZXQoJ19fZnJvbWFwcGtleScpO1xuXHQgICAgdmFyIF91bV9zc3JjID0gdXRpbFN0b3JlLmdldCgnX3VtX3NzcmMnKTsgXG5cdCAgICB2YXIgX3VtX2NoYW5uZWwgPSB1dGlsU3RvcmUuZ2V0KCdfdW1fY2hhbm5lbCcpO1xuXHQgICAgdmFyIF91bV9jYW1wYWlnbiA9IHV0aWxTdG9yZS5nZXQoJ191bV9jYW1wYWlnbicpO1xuXHQgICAgaWYgKHNoYXJlZnJvbSkge1xuXHQgICAgICBzaGFyZUluZm8uc2hhcmVmcm9tID0gc2hhcmVmcm9tO1xuXHQgICAgfVxuXHQgICAgaWYgKGZyb21hcHBrZXkpIHtcblx0ICAgICAgc2hhcmVJbmZvLmZyb21hcHBrZXkgPSBmcm9tYXBwa2V5O1xuXHQgICAgfVxuXHQgICAgaWYgKF91bV9zc3JjKSB7XG5cdCAgICAgIHNoYXJlSW5mby5fdW1fc3NyYyA9IF91bV9zc3JjO1xuXHQgICAgfVxuXHQgICAgaWYgKF91bV9jaGFubmVsKSB7XG5cdCAgICAgIHNoYXJlSW5mby5fdW1fY2hhbm5lbCA9IF91bV9jaGFubmVsO1xuXHQgICAgfVxuXHQgICAgaWYgKF91bV9jYW1wYWlnbikge1xuXHQgICAgICBzaGFyZUluZm8uX3VtX2NhbXBhaWduID0gX3VtX2NhbXBhaWduO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHNoYXJlSW5mbztcblx0ICB9XG5cdCAgcmV0dXJuO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRISkxKRXZlbnQobG9nZGF0YSwgdXNlcmRhdGEpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB0cnkge1xuXHQgICAgdmFyIGV2ZW50QXJncyA9IHt9O1xuXHQgICAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG5cdCAgICBpZiAoZ3ApIHtcblx0ICAgICAgZXZlbnRBcmdzLmdwID0gZ3A7XG5cdCAgICB9XG5cdCAgICB2YXIgZ29rZXkgPSB1c2VyZGF0YS5nb2tleTtcblx0ICAgIC8vIGNvbnZlcnQgdXJsIHBhcmFtZXRlciB0byBhIGphdmFzY3JpcHQgb2JqZWN0XG5cdCAgICB2YXIgcHJvcGVydGllcztcblx0ICAgIGlmICh0eXBlb2YgZ29rZXkgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHByb3BlcnRpZXMgPSBKU09OLnBhcnNlKCd7XCInICsgZ29rZXkucmVwbGFjZSgvXFwmL2csICdcIixcIicpLnJlcGxhY2UoL1xcPS9nLCdcIjpcIicpICsgJ1wifScsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgXG5cdCAgICAgICAgcmV0dXJuIGtleSA9PT0gXCJcIiA/IHZhbHVlIDogZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTsgXG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgZ29rZXkgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHByb3BlcnRpZXMgPSBjbG9uZURlZXAoZ29rZXkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvcGVydGllcyA9IHt9O1xuXHQgICAgfVxuXHQgICAgdmFyIHBhZ2VNYW5hZ2VyUGFnZU5hbWUgPSBwYWdlTWFuYWdlci5nZXRQYWdlQ29kZShsb2NhdGlvbi5wYXRobmFtZSk7XG5cdCAgICBpZiAobG9nZGF0YS51cmwpIHtcblx0ICAgICAgZXZlbnRBcmdzLnBhZ2VfbmFtZSA9IHByb3BlcnRpZXMuc3BtQiB8fCBwcm9wZXJ0aWVzWydkYXRhLXBhZ2VuYW1lJ10gfHwgcHJvcGVydGllcy5wYWdlX25hbWUgfHwgcGFnZU1hbmFnZXJQYWdlTmFtZSB8fCBsb2dkYXRhLnVybCAgfHwgJy0nO1xuXHQgICAgICBldmVudEFyZ3MudXJsID0gbG9nZGF0YS51cmwgfHwgJy0nO1xuXHQgICAgICBpZiAoZXZlbnRBcmdzLnBhZ2VfbmFtZSAmJiBwcm9wZXJ0aWVzLnNwbUMpIHtcblx0ICAgICAgICBldmVudEFyZ3NbJ3NwbS1jbnQnXSA9IFtlbmNvZGVVUklDb21wb25lbnQoZXZlbnRBcmdzLnBhZ2VfbmFtZSksIGVuY29kZVVSSUNvbXBvbmVudChwcm9wZXJ0aWVzLnNwbUMpLCBlbmNvZGVVUklDb21wb25lbnQocHJvcGVydGllcy5zcG1EKV0uZmlsdGVyKGZ1bmN0aW9uKHYpe1xuXHQgICAgICAgICAgcmV0dXJuICEhdjtcblx0ICAgICAgICB9KS5qb2luKCcuJyk7XG5cdCAgICAgICAgZGVsZXRlIHByb3BlcnRpZXMuc3BtQztcblx0ICAgICAgICBkZWxldGUgcHJvcGVydGllcy5zcG1EO1xuXHQgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLnNwbUI7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIGlmIChwcm9wZXJ0aWVzLnBhZ2VfbmFtZSB8fCBwcm9wZXJ0aWVzWydkYXRhLXBhZ2VuYW1lJ10pIHsgLy9wYWdlX25hbWUg5aaC5p6c5pyJLCDku4Xkv53nlZnlnKjnrKzkuIDnuqdcblx0ICAgIC8vICAgZGVsZXRlIHByb3BlcnRpZXMucGFnZV9uYW1lO1xuXHQgICAgLy8gICBkZWxldGUgcHJvcGVydGllc1snZGF0YS1wYWdlbmFtZSddO1xuXHQgICAgLy8gfVxuXHQgICAgdmFyIGNsb25lUCA9IGNsb25lRGVlcChwcm9wZXJ0aWVzKTtcblx0ICAgIGZvciAodmFyIGsgaW4gY2xvbmVQKSB7XG5cdCAgICAgIGlmICh0eXBlb2YgayA9PT0gJ3N0cmluZycgJiYgdXRpbHMuc3RhcnRzV2l0aChrLCAnXycpKSB7XG5cdCAgICAgICAgZXZlbnRBcmdzW2tdID0gY2xvbmVQW2tdO1xuXHQgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW2tdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBldmVudEFyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oZXZlbnRBcmdzLCBfYnVpbGRTaGFyZUluZm8oKSB8fCB7fSk7XG5cdCAgICBldmVudEFyZ3MuaXNfYXV0byA9IHVzZXJkYXRhLmdva2V5ICYmICh0eXBlb2YgdXNlcmRhdGEuZ29rZXkgPT09ICdzdHJpbmcnKSAmJiB1c2VyZGF0YS5nb2tleS5tYXRjaCgnaXNfYXV0bycpID8gMSA6IDA7XG5cdCAgICB2YXIgZXZlbnQgPSBjcmVhdGVFdmVudCh1c2VyZGF0YS5sb2drZXksIHV0aWxEYXNoLmFzc2lnbihldmVudEFyZ3MsIHsgY3VzcDogcHJvcGVydGllc30gKSk7XG5cdCAgICByZXR1cm4gZXZlbnQ7XG5cdCAgfSBjYXRjaCAoZSkgeyBcblx0ICAgIGNvbnNvbGUud2FybignSlNPTiBwYXJzZSBmYWlsZWQnLCBlKTtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRQVkV2ZW50KGxvZ2RhdGEsIHVzZXJkYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG5cdCAgdmFyIHB2YXJncyA9IHt9O1xuXHQgIHB2YXJncy5yID0gbG9nZGF0YS5hcmcxO1xuXHQgIGlmIChncCkge1xuXHQgICAgcHZhcmdzLmdwID0gZ3A7XG5cdCAgfVxuXHQgIFxuXHQgIHB2YXJncy5pc19hdXRvID0gISFsb2dkYXRhLmlzX2F1dG8gPyAxIDogMDtcblx0XG5cdCAgdmFyIGFyZ3MgPSB1c2VyZGF0YTtcblx0ICB2YXIgcHJvcGVydGllcyA9IGNsb25lRGVlcCh1dGlscy5kZWxldGVJbmZvKGFyZ3MsIFsnX2Fub255X2lkJywgJ19kZXZfaWQnLCAnX3Nlc3Npb25faWQnLCAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaycsICdfc3JjX3Bvc19pZCddKSk7XG5cdFxuXHQgIGlmIChwcm9wZXJ0aWVzLmR1cmF0aW9uKSB7XG5cdCAgICBwdmFyZ3MuZHVyYXRpb24gPSBwcm9wZXJ0aWVzLmR1cmF0aW9uO1xuXHQgICAgZGVsZXRlIHByb3BlcnRpZXMuZHVyYXRpb247XG5cdCAgfVxuXHQgIHZhciBwYWdlTWFuYWdlclBhZ2VOYW1lID0gcGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUobG9jYXRpb24ucGF0aG5hbWUpO1xuXHQgIGlmIChsb2dkYXRhLnVybCkge1xuXHQgICAgcHZhcmdzLnBhZ2VfbmFtZSA9IHByb3BlcnRpZXMuc3BtQiB8fCBwcm9wZXJ0aWVzLnBhZ2VfbmFtZSB8fCBkb2N1bWVudC5ib2R5LmRhdGFzZXQgJiYgZG9jdW1lbnQuYm9keS5kYXRhc2V0LnBhZ2VuYW1lIHx8IHBhZ2VNYW5hZ2VyUGFnZU5hbWUgfHwgbG9nZGF0YS51cmwgfHwgJy0nO1xuXHQgICAgcHZhcmdzLnVybCA9IGxvZ2RhdGEudXJsO1xuXHQgICAgcHZhcmdzWydzcG0tY250J10gPSBlbmNvZGVVUklDb21wb25lbnQocHZhcmdzLnBhZ2VfbmFtZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAobG9nZGF0YS5wcmUpIHtcblx0ICAgIHB2YXJncy5yZWZfdXJsID0gbG9nZGF0YS5wcmUgfHwgJy0nO1xuXHQgICAgaWYgKGFwbHVzLl9oNV9zaGFyZV9lbmFibGUgJiYgcHZhcmdzLnJlZl91cmwubGVuZ3RoID4gMSkge1xuXHQgICAgICB2YXIgcnMgPSBwdmFyZ3MucmVmX3VybC5tYXRjaCgvKFxcd3wtKStcXC4oXFx3fC0pK1xcLihcXHd8LSkrLyk7XG5cdCAgICAgIGlmIChycyAmJiBycy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgcHZhcmdzLl91bV9yZWZlcmVyX2RvbWFpbiA9IHJzWzBdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHB2YXJncyA9IHV0aWxEYXNoLmFzc2lnbihwdmFyZ3MsIF9idWlsZFNoYXJlSW5mbygpIHx8IHt9KTtcblx0ICByZXR1cm4gY3JlYXRlRXZlbnQoYXBsdXNTdGF0aWMuUEFHRV9TVEFSVCwgdXRpbERhc2guYXNzaWduKHB2YXJncywgeyBjdXNwOiBwcm9wZXJ0aWVzIH0pKTtcblx0fVxuXG5cbi8qKiovIH0pLFxuLyogNDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICog5YWL6ZqG5LiA5Liqb2JqZWN0XG5cdCAqL1xuXHRmdW5jdGlvbiBjbG9uZURlZXAgKG9iaikge1xuXHQgIHZhciBzdHI7XG5cdCAgdmFyIG5ld29iaiA9IEFycmF5LmlzQXJyYXkob2JqKSA/IFtdIDoge307IC8vRml4IG9iai5jb250cnVjdG9yIHR5cGVFcnJvciBjb25zdHJ1Y3RvciB1bmRlZmluZWRcblx0ICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9IGVsc2UgaWYgKEpTT04gJiYgSlNPTi5wYXJzZSkge1xuXHQgICAgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTsgLy/ns7vliJfljJblr7nosaFcblx0ICAgIG5ld29iaiA9IEpTT04ucGFyc2Uoc3RyKTsgLy/ov5jljp9cblx0ICB9IGVsc2Uge1xuXHQgICAgZm9yICh2YXIgaSBpbiBvYmopIHtcblx0ICAgICAgbmV3b2JqW2ldID0gdHlwZW9mIG9ialtpXSA9PT0gJ29iamVjdCcgPyBjbG9uZURlZXAob2JqW2ldKSA6IG9ialtpXTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG5ld29iajtcblx0fVxuXHRtb2R1bGUuZXhwb3J0cyA9IGNsb25lRGVlcDtcblxuLyoqKi8gfSksXG4vKiA0MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGF0YSkge1xuXHQgIHZhciBoZWFkZXIgPSB7fTtcblx0ICBoZWFkZXIuc2RrX3R5cGUgPSBkYXRhLnNka190eXBlO1xuXHQgIGhlYWRlci5hcHBrZXkgPSBkYXRhLmFwcGtleTtcblx0ICBoZWFkZXIuc2RrX3ZlcnNpb24gPSBkYXRhLnNka192ZXJzaW9uO1xuXHQgIGhlYWRlci5kZXZpY2VfdHlwZSA9IGRhdGEuZGV2aWNlX3R5cGU7XG5cdCAgaGVhZGVyLm9zID0gZGF0YS5vcztcblx0ICBoZWFkZXIub3NfdmVyc2lvbiA9IGRhdGEub3NfdmVyc2lvbjtcblx0ICBoZWFkZXIucGxhdGZvcm0gPSBkYXRhLnBsYXRmb3JtO1xuXHQgIGhlYWRlci5waXhlbF9yYXRpbyA9IGRhdGEucGl4ZWxfcmF0aW87XG5cdCAgaGVhZGVyLnJlc29sdXRpb24gPSBkYXRhLnJlc29sdXRpb247XG5cdCAgaGVhZGVyLmxhbmd1YWdlID0gZGF0YS5sYW5ndWFnZTtcblx0ICBoZWFkZXIuYXBwX3ZlcnNpb24gPSBkYXRhLmFwcF92ZXJzaW9uO1xuXHQgIGhlYWRlci5qc3ZlciA9IGRhdGEuanN2ZXI7XG5cdCAgaGVhZGVyLnByZSA9IGRhdGEucHJlO1xuXHQgIGhlYWRlci51cmwgPSBkYXRhLnVybDtcblx0ICBoZWFkZXIuZGVidWdJZCA9IGRhdGEudHJhY2tfZGVidWdfaWQ7XG5cdCAgaGVhZGVyLmlkX3RyYWNraW5nID0ge307XG5cdCAgcmV0dXJuIGhlYWRlcjtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA0MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMuZ2V0UmFuZG9tU3RyID0gZnVuY3Rpb24obGVuKSB7XG5cdCAgdmFyIHN0ciA9ICcnO1xuXHQgIHZhciBhcnIgPSBbJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJywgJ2knLCAnaicsICdrJywgJ2wnLCAnbScsICduJywgJ28nLCAncCcsICdxJywgJ3InLCAncycsICd0JywgJ3UnLCAndicsICd3JywgJ3gnLCAneScsICd6JywgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgTnVtYmVyKGxlbik7IGkrKykge1xuXHQgICAgdmFyIHBvcyA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChhcnIubGVuZ3RoIC0gMSkpO1xuXHQgICAgc3RyICs9IGFycltwb3NdO1xuXHQgIH1cblx0ICByZXR1cm4gc3RyO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5zdGFydHNXaXRoID0gZnVuY3Rpb24oc3RyLCBzZWFyY2hWYWwpIHtcblx0ICBpZiAoIXN0ciB8fCAhc2VhcmNoVmFsIHx8IHNlYXJjaFZhbC5sZW5ndGggPT09IDAgfHwgc2VhcmNoVmFsLmxlbmd0aCA+IHN0ci5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgc2VhcmNoVmFsLmxlbmd0aCkgPT09IHNlYXJjaFZhbDtcblx0fTtcblx0XG5cdGV4cG9ydHMuYXNzaWduID0gZnVuY3Rpb24odGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG5cdCAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuXHQgICAgaWYgKHNvdXJjZSkge1xuXHQgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIHNvdXJjZSkge1xuXHQgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBuZXh0S2V5KSkge1xuXHQgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gb3V0cHV0O1xuXHR9O1xuXHRcblx0Ly8gMS5la3bkuK3lrZjlnKjop4TliJnkuI3lkIjms5Xmg4XlhrXvvIzkuKLlvIPmlbTmnaHkuovku7Zcblx0Ly8gMi5ldmVudGlk6ZW/5bqm5LiN6IO96LaF6L+HMTI45Liq5a2X56ymXG5cdC8vIDMua2V56ZW/5bqm5LiN6IO96LaF6L+HMjU25Liq5a2X56ymXG5cdC8vIDQu5q+P5LiqZXZlbnTmkLrluKZrZXnkuKrmlbDkuI3og73otoXov4cxMDDkuKpcblx0ZXhwb3J0cy5jaGVja0V2ZW50ID0gZnVuY3Rpb24oZXZlbnRJZCwgcHJvcGVydGllcykge1xuXHQgIHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdCAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTtcblx0ICBpZiAoIShldmVudElkICYmIHR5cGVvZiBldmVudElkID09PSAnc3RyaW5nJykpIHtcblx0ICAgIHVsb2coKS5lKCdwbGVhc2UgY2hlY2sgdHJhY2tFdmVudCBpZC4gaWQgc2hvdWxkIGJlIFwic3RyaW5nXCIgYW5kIG5vdCBudWxsJyk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyDkv53nlZnlhbPplK7lrZdcblx0ICB2YXIgcmVzZXJ2ZVdvcmRzID0gWydpZCcsICdkdSddO1xuXHQgIHZhciByZXNlcnZlV29yZE1hcCA9IHt9O1xuXHRcblx0ICByZXNlcnZlV29yZHMuZm9yRWFjaChmdW5jdGlvbiAod29yZCkge1xuXHQgICAgcmVzZXJ2ZVdvcmRNYXBbd29yZF0gPSAxO1xuXHQgIH0pO1xuXHRcblx0ICAvLyDmo4Dmn6VldmVudElk5piv5ZCm5LiO5L+d55WZ5YWz6ZSu5a2X5Yay56qBXG5cdCAgaWYgKHJlc2VydmVXb3JkTWFwW2V2ZW50SWRdKSB7XG5cdCAgICB1bG9nKCkuZSgnZXZlbnRJZOS4jeiDveS4juS7peS4i+S/neeVmeWtl+WGsueqgTogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgaWYgKGV2ZW50SWQubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX0VWRU5USURfTEVOR1RIKSB7XG5cdCAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gbGVuZ3RoIG9mIGV2ZW50IGlkIHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyBwcm9wZXJ0aWVz55qE5ZCI5rOV57G75Z6L5Li6IHN0cmluZyB8IG9iamVjdChub3QgaW5jbHVkZSBBcnJheSlcblx0ICBpZiAocHJvcGVydGllc1xuXHQgICAgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHByb3BlcnRpZXMpKVxuXHQgICAgJiYgdHlwZW9mIHByb3BlcnRpZXMgIT09ICdzdHJpbmcnKSB7XG5cdCAgICB1bG9nKCkuZSgncGxlYXNlIGNoZWNrIHRyYWNrRXZlbnQgcHJvcGVydGllcy4gcHJvcGVydGllcyBzaG91bGQgYmUgc3RyaW5nIG9yIG9iamVjdChub3QgaW5jbHVkZSBBcnJheSknKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgIHZhciBjb3VudCA9IDA7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuXHQgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG5cdCAgICAgICAgaWYgKGtleS5sZW5ndGggPiBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBwcm9wZXJ0eSBrZXkgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGNvdW50ID49IGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UKSB7XG5cdCAgICAgICAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gY291bnQgb2YgcHJvcGVydGllcyBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCk7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAocmVzZXJ2ZVdvcmRNYXBba2V5XSkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ+WxnuaAp+S4reeahGtleeS4jeiDveS4juS7peS4i+S/neeVmeWtl+WGsueqgTogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY291bnQgKz0gMTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdFxuXHRcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdGV4cG9ydHMuZGVsZXRlSW5mbyA9IGZ1bmN0aW9uKGdva2V5LCBhcnIpIHtcblx0ICBlYWNoKGFyciwgZnVuY3Rpb24odikge1xuXHQgICAgZGVsZXRlIGdva2V5W3ZdO1xuXHQgIH0pO1xuXHQgIHJldHVybiBnb2tleTtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXHRcblx0XG5cdGV4cG9ydHMuRGF0YVR5cGUgPSB7XG5cdCAgSEFMRl9TRVNTSU9OOiAnaGFsZl9zZXNzaW9uJyxcblx0ICBDTE9TRV9TRVNTSU9OOiAnY2xvc2Vfc2Vzc2lvbicsXG5cdCAgRUtWOiAnZWt2Jyxcblx0ICBFTlRFUl9QQUdFOiAnZW50ZXJfcGFnZScsXG5cdCAgTEVBVkVfUEFHRTogJ2xlYXZlX3BhZ2UnXG5cdH07XG5cdFxuXHRleHBvcnRzLkFjY2Vzc1R5cGUgPSB7XG5cdCAgTU9CSUxFX05FVFdPUktfMkc6ICcyZycsXG5cdCAgTU9CSUxFX05FVFdPUktfM0c6ICczZycsXG5cdCAgTU9CSUxFX05FVFdPUktfNEc6ICc0ZycsXG5cdCAgTU9CSUxFX05FVFdPUktfTk9ORTogJ25vbmUnXG5cdH07XG5cbi8qKiovIH0pLFxuLyogNDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHR2YXIgTE9HX1BSRUZJWCA9ICdbQVBMVVNdIC0tICc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9kZWJ1ZyA9IGZhbHNlO1xuXHRcblx0ICBmdW5jdGlvbiBVTG9nKCkge1xuXHQgICAgdGhpcy5zZXREZWJ1ZyA9IGZ1bmN0aW9uIChkZWJ1Zykge1xuXHQgICAgICBfZGVidWcgPSBkZWJ1Zztcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5kID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX2RlYnVnKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBMT0dfUFJFRklYICsgYXJndW1lbnRzWzBdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgY29uc29sZS5kZWJ1Zy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIC8vIGVcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5pID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmIChfZGVidWcpIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY29uc29sZS5pbmZvLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIGVcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlbXB0eVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIC8vIGVcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy52ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX2RlYnVnKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBMT0dfUFJFRklYICsgYXJndW1lbnRzWzBdO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMudCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBjb25zb2xlLnRhYmxlLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgLy8gZVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLnRpcCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy50aXBfdyA9IGZ1bmN0aW9uIChtc2cpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBjb25zb2xlLmxvZyhcblx0ICAgICAgICAgICclYyAnICsgTE9HX1BSRUZJWCArIG1zZyxcblx0ICAgICAgICAgICdiYWNrZ3JvdW5kOnJlZDsgcGFkZGluZzogNHB4OyBwYWRkaW5nLXJpZ2h0OiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY29sb3I6ICNmZmY7J1xuXHQgICAgICAgICk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5lcnIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICBhcmd1bWVudHNbMF0gPSBMT0dfUFJFRklYICsgYXJndW1lbnRzWzBdO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgLy8gZVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdGhpcy5yZXBlYXQgPSBmdW5jdGlvbihjaGFyKSB7XG5cdCAgICAgIHZhciByZXMgPSBjaGFyO1xuXHQgICAgICB3aGlsZSAocmVzLmxlbmd0aCA8IDg2KSB7XG5cdCAgICAgICAgcmVzID0gcmVzICsgY2hhcjtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoX2luc3RhbmNlID09PSBudWxsKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IG5ldyBVTG9nKCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2luc3RhbmNlO1xuXHQgIH07XG5cdH0pKCk7XG5cbi8qKiovIH0pLFxuLyogNDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHR2YXIgYW5hbHl0aWNzTWFwID0ge1xuXHQgIGVrdnM6ICdlJyxcblx0ICBhY3RpdmVfdXNlcjogJ2FjdGl2ZV91c2VyJ1xuXHR9O1xuXHRcblx0dmFyIGhlYWRlck1hcCA9IHtcblx0ICBzZGtfdHlwZTogJ3NkdCcsXG5cdCAgZGV2aWNlX21vZGVsOiAnZG0nLFxuXHQgIGxhbmd1YWdlOiAnbGFuZycsXG5cdCAgZGV2aWNlX3R5cGU6ICdkdCcsXG5cdCAgb3NfdmVyc2lvbjogJ292Jyxcblx0ICBhcHBrZXk6ICdhaycsXG5cdCAgc2RrX3ZlcnNpb246ICdzdicsXG5cdCAgcmVzb2x1dGlvbjogJ3JsJyxcblx0ICB0ZXN0VG9rZW46ICd0dG4nLFxuXHQgIHBpeGVsX3JhdGlvOiAncHInLFxuXHQgIF9pZDogJ2lkJyxcblx0ICBpZF90eXBlOiAnaXQnLFxuXHQgIGlkX3RyYWNraW5nOiAnaXRyJyxcblx0ICBpbXByaW50OiAnaW1wJyxcblx0ICBkZWJ1Z0lkOiAnZGsnXG5cdH07XG5cdFxuXHR2YXIgaWRNYXAgPSB7XG5cdCAgdXVpZDogJ3VkJyxcblx0ICB1bmlvbmlkOiAndW5kJyxcblx0ICBvcGVuaWQ6ICdvZCcsXG5cdCAgYW5vbnltb3VzaWQ6ICduZCcsXG5cdCAgYWxpcGF5X2lkOiAnYWQnLFxuXHQgIGRldmljZV9pZDogJ2RkJyxcblx0ICB1c2VyaWQ6ICdwdWlkJ1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGg6IF9tYW5nbGVIZWFkZXIoZGF0YS5oZWFkZXIsIGhlYWRlck1hcCksXG5cdCAgICBhOiBfbWFuZ2xlQW5hbHl0aWNzKGRhdGEuYW5hbHl0aWNzLCBhbmFseXRpY3NNYXApXG5cdCAgfTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9tYW5nbGVIZWFkZXIoaGVhZGVyLCBtYXApIHtcblx0ICB2YXIgcmVzdWx0ID0gX21hbmdsZU9iaihoZWFkZXIsIG1hcCk7XG5cdFxuXHQgIGlmIChoZWFkZXIgJiYgaGVhZGVyLmlkX3RyYWNraW5nKSB7XG5cdCAgICByZXN1bHRbbWFwLmlkX3RyYWNraW5nIHx8ICdpZF90cmFja2luZyddID0gX21hbmdsZU9iaihoZWFkZXIuaWRfdHJhY2tpbmcsIGlkTWFwKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfbWFuZ2xlT2JqKG9iaiwgbWFwKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHRcblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICBpZiAobWFwW2tleV0pIHtcblx0ICAgICAgcmVzdWx0W21hcFtrZXldXSA9IG9ialtrZXldO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfbWFuZ2xlQW5hbHl0aWNzKGFuYWx5dGljcywgbWFwKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHRcblx0ICBpZiAoYW5hbHl0aWNzKSB7XG5cdCAgICBmb3IgKHZhciBwcm9wIGluIGFuYWx5dGljcykge1xuXHQgICAgICBpZiAoYW5hbHl0aWNzW3Byb3BdKSB7XG5cdCAgICAgICAgcmVzdWx0W21hcFtwcm9wXV0gPSBhbmFseXRpY3NbcHJvcF07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblxuLyoqKi8gfSksXG4vKiA0NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdHZhciBiNjRjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcblx0dmFyIGI2NHRhYiA9IChmdW5jdGlvbiAoYmluKSB7XG5cdCAgdmFyIHQgPSB7fTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGJpbi5sZW5ndGg7IGkgPCBsOyBpKyspIHRbYmluLmNoYXJBdChpKV0gPSBpO1xuXHQgIHJldHVybiB0O1xuXHR9KShiNjRjaGFycyk7XG5cdHZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXHR2YXIgY2JfdXRvYiA9IGZ1bmN0aW9uIChjKSB7XG5cdCAgdmFyIGNjO1xuXHQgIGlmIChjLmxlbmd0aCA8IDIpIHtcblx0ICAgIGNjID0gYy5jaGFyQ29kZUF0KDApO1xuXHQgICAgcmV0dXJuIGNjIDwgMTI4ID8gYyA6IGNjIDwgMjA0OCA/IGZyb21DaGFyQ29kZSgxOTIgfCBjYyA+Pj4gNikgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgJiA2MykgOiBmcm9tQ2hhckNvZGUoMjI0IHwgY2MgPj4+IDEyICYgMTUpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiA2ICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBjYyA9IDY1NTM2ICsgKGMuY2hhckNvZGVBdCgwKSAtIDU1Mjk2KSAqIDEwMjQgKyAoYy5jaGFyQ29kZUF0KDEpIC0gNTYzMjApO1xuXHQgICAgcmV0dXJuIGZyb21DaGFyQ29kZSgyNDAgfCBjYyA+Pj4gMTggJiA3KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gMTIgJiA2MykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDYgJiA2MykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgJiA2Myk7XG5cdCAgfVxuXHR9O1xuXHR2YXIgcmVfdXRvYiA9IC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZGXXxbXlxceDAwLVxceDdGXS9nO1xuXHR2YXIgdXRvYiA9IGZ1bmN0aW9uICh1KSB7XG5cdCAgcmV0dXJuIHUucmVwbGFjZShyZV91dG9iLCBjYl91dG9iKTtcblx0fTtcblx0dmFyIGNiX2VuY29kZSA9IGZ1bmN0aW9uIChjY2MpIHtcblx0ICB2YXIgcGFkbGVuID0gWzAsIDIsIDFdW2NjYy5sZW5ndGggJSAzXSxcblx0ICAgIG9yZCA9IGNjYy5jaGFyQ29kZUF0KDApIDw8IDE2IHwgKGNjYy5sZW5ndGggPiAxID8gY2NjLmNoYXJDb2RlQXQoMSkgOiAwKSA8PCA4IHwgKGNjYy5sZW5ndGggPiAyID8gY2NjLmNoYXJDb2RlQXQoMikgOiAwKSxcblx0ICAgIGNoYXJzID0gW2I2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDE4KSwgYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gMTIgJiA2MyksIHBhZGxlbiA+PSAyID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gNiAmIDYzKSwgcGFkbGVuID49IDEgPyAnPScgOiBiNjRjaGFycy5jaGFyQXQob3JkICYgNjMpXTtcblx0ICByZXR1cm4gY2hhcnMuam9pbignJyk7XG5cdH07XG5cdHZhciBidG9hID0gZnVuY3Rpb24gKGIpIHtcblx0ICByZXR1cm4gYi5yZXBsYWNlKC9bXFxzXFxTXXsxLDN9L2csIGNiX2VuY29kZSk7XG5cdH07XG5cdHZhciBfZW5jb2RlID0gZnVuY3Rpb24gKHUpIHtcblx0ICByZXR1cm4gYnRvYSh1dG9iKHUpKTtcblx0fTtcblx0dmFyIGVuY29kZSA9IGZ1bmN0aW9uICh1LCB1cmlzYWZlKSB7XG5cdCAgcmV0dXJuICF1cmlzYWZlID8gX2VuY29kZShTdHJpbmcodSkpIDogX2VuY29kZShTdHJpbmcodSkpLnJlcGxhY2UoL1srXFwvXS9nLCBmdW5jdGlvbiAobTApIHtcblx0ICAgIHJldHVybiBtMCA9PSAnKycgPyAnLScgOiAnXyc7XG5cdCAgfSkucmVwbGFjZSgvXFw9L2csICcnKTtcblx0fTtcblx0Ly8gdmFyIGVuY29kZVVSSSA9IGZ1bmN0aW9uICh1KSB7XG5cdC8vICAgcmV0dXJuIGVuY29kZSh1LCB0cnVlKTtcblx0Ly8gfTtcblx0dmFyIHJlX2J0b3UgPSBuZXcgUmVnRXhwKFsnW8OALcOfXVvCgC3Cv10nLCAnW8OgLcOvXVvCgC3Cv117Mn0nLCAnW8OwLcO3XVvCgC3Cv117M30nXS5qb2luKCd8JyksICdnJyk7XG5cdHZhciBjYl9idG91ID0gZnVuY3Rpb24gKGNjY2MpIHtcblx0ICBzd2l0Y2ggKGNjY2MubGVuZ3RoKSB7XG5cdCAgY2FzZSA0OlxuXHQgICAgdmFyIGNwID0gKDcgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDE4IHwgKDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDMpLCBvZmZzZXQgPSBjcCAtIDY1NTM2O1xuXHQgICAgcmV0dXJuIGZyb21DaGFyQ29kZSgob2Zmc2V0ID4+PiAxMCkgKyA1NTI5NikgKyBmcm9tQ2hhckNvZGUoKG9mZnNldCAmIDEwMjMpICsgNTYzMjApO1xuXHQgIGNhc2UgMzpcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDE1ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDIpKTtcblx0ICBkZWZhdWx0OlxuXHQgICAgcmV0dXJuIGZyb21DaGFyQ29kZSgoMzEgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSk7XG5cdCAgfVxuXHR9O1xuXHR2YXIgYnRvdSA9IGZ1bmN0aW9uIChiKSB7XG5cdCAgcmV0dXJuIGIucmVwbGFjZShyZV9idG91LCBjYl9idG91KTtcblx0fTtcblx0dmFyIGNiX2RlY29kZSA9IGZ1bmN0aW9uIChjY2NjKSB7XG5cdCAgdmFyIGxlbiA9IGNjY2MubGVuZ3RoLFxuXHQgICAgcGFkbGVuID0gbGVuICUgNCxcblx0ICAgIG4gPSAobGVuID4gMCA/IGI2NHRhYltjY2NjLmNoYXJBdCgwKV0gPDwgMTggOiAwKSB8IChsZW4gPiAxID8gYjY0dGFiW2NjY2MuY2hhckF0KDEpXSA8PCAxMiA6IDApIHwgKGxlbiA+IDIgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMildIDw8IDYgOiAwKSB8IChsZW4gPiAzID8gYjY0dGFiW2NjY2MuY2hhckF0KDMpXSA6IDApLFxuXHQgICAgY2hhcnMgPSBbZnJvbUNoYXJDb2RlKG4gPj4+IDE2KSwgZnJvbUNoYXJDb2RlKG4gPj4+IDggJiAyNTUpLCBmcm9tQ2hhckNvZGUobiAmIDI1NSldO1xuXHQgIGNoYXJzLmxlbmd0aCAtPSBbMCwgMCwgMiwgMV1bcGFkbGVuXTtcblx0ICByZXR1cm4gY2hhcnMuam9pbignJyk7XG5cdH07XG5cdHZhciBhdG9iID0gZnVuY3Rpb24gKGEpIHtcblx0ICByZXR1cm4gYS5yZXBsYWNlKC9bXFxzXFxTXXsxLDR9L2csIGNiX2RlY29kZSk7XG5cdH07XG5cdHZhciBfZGVjb2RlID0gZnVuY3Rpb24gKGEpIHtcblx0ICByZXR1cm4gYnRvdShhdG9iKGEpKTtcblx0fTtcblx0dmFyIGRlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIF9kZWNvZGUoU3RyaW5nKGEpLnJlcGxhY2UoL1stX10vZywgZnVuY3Rpb24gKG0wKSB7XG5cdCAgICByZXR1cm4gbTAgPT0gJy0nID8gJysnIDogJy8nO1xuXHQgIH0pLnJlcGxhY2UoL1teQS1aYS16MC05XFwrXFwvXS9nLCAnJykpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5lbmNvZGUgPSBlbmNvZGU7XG5cdGV4cG9ydHMuZGVjb2RlID0gZGVjb2RlO1xuXG4vKioqLyB9KSxcbi8qIDQ3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XG5cdGV4cG9ydHMuc3RyaW5nZnkgPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgaWYgKGRhdGEpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgLy8gZW1wdHlcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuICcnO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uKGpzb24pIHtcblx0ICBpZiAoanNvbikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIC8vIGVtcHR5XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBudWxsO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5wYXJzZVRvQXJyYXkgPSBmdW5jdGlvbihqc29uKSB7XG5cdCAgaWYgKGpzb24pIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAvLyBlbXB0eVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gW107XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiBldmVudC5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpZCwgcHJvcGVydGllcykge1xuXHQgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdCAgdmFyIGV2ZW50ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBldmVudC5pZCA9IGlkO1xuXHQgIGlmICghcHJvcGVydGllcyB8fCAhcHJvcGVydGllcy50cykge1xuXHQgICAgZXZlbnQudHMgPSBEYXRlLm5vdygpO1xuXHQgIH1cblx0ICB2YXIgcHJvcHNUeXBlID0gdHlwZW9mIHByb3BlcnRpZXM7XG5cdCAgaWYgKHByb3BzVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG5cdCAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkpIHtcblx0ICAgICAgICBldmVudFtrZXldID0gcHJvcGVydGllc1trZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuXHQgIGlmIChncCkge1xuXHQgICAgZXZlbnRbJ2dwJ10gPSBncDsgXG5cdCAgfVxuXHQgIHJldHVybiBldmVudDtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA0OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgY3VycmVudFBhdGggPSBcIlwiO1xuXHR2YXIgcGFnZU9wdGlvbk1hcCA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gYnVpbGRQYXRoKHBhdGgsIHF1ZXJ5KSB7XG5cdCAgaWYgKCFwYXRoKSB7XG5cdCAgICByZXR1cm4gXCJcIjtcblx0ICB9XG5cdCAgdmFyIHFzID0gW107XG5cdCAgZm9yICh2YXIgcSBpbiBxdWVyeSkge1xuXHQgICAgcXMucHVzaChxICsgJz0nICsgcXVlcnlbcV0pO1xuXHQgIH1cblx0ICB2YXIgcXNzID0gcXMuam9pbignJicpO1xuXHQgIHJldHVybiBxc3MgPyBwYXRoICsgJz8nICsgcXNzIDogcGF0aDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0Q3VycmVudFBhZ2VQYXRoID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIGN1cnJlbnRQYXRoO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5zZXRDdXJyZW50UGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICBpZiAocGF0aCkge1xuXHQgICAgY3VycmVudFBhdGggPSBwYXRoO1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UGFnZVF1ZXJ5ID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICByZXR1cm4gcGFnZU9wdGlvbk1hcFtwYXRoXTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLnNldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgsIHF1ZXJ5KSB7XG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIHBhZ2VPcHRpb25NYXBbcGF0aF0gPSBxdWVyeTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEZ1bGxQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIHJldHVybiBidWlsZFBhdGgoY3VycmVudFBhdGgsIHBhZ2VPcHRpb25NYXBbcGF0aF0pO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRQYWdlTmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgbWV0YSA9IGFwbHVzLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJyk7XG5cdCAgdmFyIHJlYWxQYXRoID0gcGF0aCB8fCBjdXJyZW50UGF0aDtcblx0ICB0cnkge1xuXHQgICAgLy8g5a+55LqO5Yqo5oCB6Lev55Sx77yM5pSv5oyB55So5oi35Lyg5YWl5q2j5YiZ6L+b6KGM5Yy56YWNXG5cdCAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PSAnb2JqZWN0Jykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YSkge1xuXHQgICAgICAgIGlmIChrZXkgPT09IHJlYWxQYXRoKSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9IGVsc2UgaWYgKG1ldGFba2V5XSAmJiBtZXRhW2tleV0ucmVnUnVsZSkge1xuXHQgICAgICAgICAgcmVhbFBhdGggPSBtZXRhW2tleV0ucmVnUnVsZS50ZXN0KHBhdGgpID8ga2V5IDogcmVhbFBhdGg7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy9cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIC8vXG5cdCAgfVxuXHQgIHJldHVybiBtZXRhW3JlYWxQYXRoXTtcblx0ICAvLyBpZiAoIXBhdGgpIHtcblx0ICAvLyAgIHJldHVybiBtZXRhICYmIG1ldGFbY3VycmVudFBhdGhdO1xuXHQgIC8vIH0gZWxzZSB7XG5cdCAgLy8gICByZXR1cm4gbWV0YSAmJiBtZXRhW3BhdGhdO1xuXHQgIC8vIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UGFnZUNvZGUgPSBmdW5jdGlvbihwYXRoKSB7XG5cdCAgcmV0dXJuICh0aGlzLmdldFBhZ2VOYW1lKHBhdGgpIHx8IHt9KS5wYWdlTmFtZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0VlRSZWFsdGltZUNvZGUgPSBmdW5jdGlvbigpIHtcblx0ICBpZiAoY3VycmVudFBhdGgpIHtcblx0ICAgIHZhciBxdWVyeSA9IHBhZ2VPcHRpb25NYXBbY3VycmVudFBhdGhdIHx8IHt9O1xuXHQgICAgdmFyIHJlZ0V4cCA9IC9eXFwkdnRfLztcblx0ICAgIHZhciBzY2VuZSA9IGRlY29kZVVSSUNvbXBvbmVudChxdWVyeS5zY2VuZSk7XG5cdCAgICByZXR1cm4gc2NlbmUgJiYgcmVnRXhwLnRlc3Qoc2NlbmUpICYmIHNjZW5lLnJlcGxhY2UocmVnRXhwLCAnJyk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDUwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3V0aWwvZmV0Y2hEYXRhLmpzXG5cdCAqIOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKipcblx0ICogQHR5cGUge09iamVjdH1cblx0ICog6YWN572u6aG55YyF5ous77yaXG5cdCAqIGJhc2U6IOm7mOiupOeBsOW6puWfuuaVsDEwMDAwXG5cdCAqIHRpbWVvdXQ6IENPUlPotoXml7bml7bpl7Rcblx0ICovXG5cdHZhciBfY29uZmlnID0ge1xuXHQgIGJhc2U6IDEwMDAwLFxuXHQgIC8vIOm7mOiupDEwc1xuXHQgIHRpbWVvdXQ6IDEwMDAwXG5cdH07XG5cdFxuXHR2YXIgZmV0Y2ggPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAodXJsLCByZXNvbHZlLCByZWplY3QsIG9wdHMpIHtcblx0ICBpZiAoL15cXC9cXC8vLnRlc3QodXJsKSkge1xuXHQgICAgdXJsID0gYXBsdXNTdGF0aWMuSFRUUFMgKyB1cmw7XG5cdCAgfVxuXHQgIHZhciBwZW5kaW5nID0gdHJ1ZTtcblx0ICB2YXIgdGltZW91dCA9IChvcHRzICYmIG9wdHMudGltZW91dCkgPyBvcHRzLnRpbWVvdXQgOiBfY29uZmlnLnRpbWVvdXQ7XG5cdCAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgaWYgKHBlbmRpbmcpIHtcblx0ICAgICAgcGVuZGluZyA9IGZhbHNlO1xuXHQgICAgICByZWplY3Qoe1xuXHQgICAgICAgIHRpbWVvdXQ6IHRpbWVvdXRcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwgdGltZW91dCk7XG5cdCAgd2luZG93LmZldGNoKHVybClcblx0ICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdCAgICAgIGlmKC9hcHBsaWNhdGlvblxcL2pzb24vLnRlc3QocmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSkge1xuXHQgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTtcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgaWYgKHBlbmRpbmcpIHtcblx0ICAgICAgICByZXNvbHZlKGRhdGEpO1xuXHQgICAgICAgIHBlbmRpbmcgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHQgICAgICBwZW5kaW5nICYmIHJlamVjdChlcnJvcik7XG5cdCAgICB9KTtcblx0fTtcblx0XG5cdHZhciBhamF4ID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHVybCwgcmVzb2x2ZSwgcmVqZWN0LCBvcHRzKSB7XG5cdCAgdmFyIHhocjtcblx0ICB2YXIgbWV0aG9kID0gJ0dFVCc7XG5cdCAgdmFyIG9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICh4aHIucmVzcG9uc2VUZXh0KSB7XG5cdCAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlVGV4dCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZWplY3QoKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHZhciBDT1JTID0gd2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmICd3aXRoQ3JlZGVudGlhbHMnIGluIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHQgIGlmIChDT1JTKSB7XG5cdCAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgeGhyID0gbmV3IHdpbmRvdy5YRG9tYWluUmVxdWVzdCgpO1xuXHQgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuXHQgIH1cblx0ICAvLyB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuXHQgIHZhciB0aW1lb3V0ID0gKG9wdHMgJiYgb3B0cy50aW1lb3V0KSA/IG9wdHMudGltZW91dCA6IF9jb25maWcudGltZW91dDtcblx0ICB4aHIudGltZW91dCA9IHRpbWVvdXQ7XG5cdCAgeGhyLm9ubG9hZCA9IG9ubG9hZDtcblx0ICB4aHIub25lcnJvciA9IHJlamVjdDtcblx0ICB4aHIub250aW1lb3V0ID0gcmVqZWN0O1xuXHQgIHhoci5zZW5kKCk7XG5cdH07XG5cdFxuXHR2YXIgcmVxdWVzdCA9IGZ1bmN0aW9uICh1cmwsIHJlc29sdmUsIHJlamVjdCwgb3B0cykge1xuXHQgIGlmICh3aW5kb3cuZmV0Y2gpIHtcblx0ICAgIGZldGNoKHVybCwgcmVzb2x2ZSwgcmVqZWN0LCBvcHRzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgYWpheCh1cmwsIHJlc29sdmUsIHJlamVjdCwgb3B0cyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJlcXVlc3Q0dW0gPSBmdW5jdGlvbihvcHQsIGNvbnRlbnRUeXBlKSB7XG5cdCAgb3B0ID0gb3B0IHx8IHt9O1xuXHQgIG9wdC5tZXRob2QgPSAob3B0Lm1ldGhvZCB8fCAnUE9TVCcpLnRvVXBwZXJDYXNlKCk7XG5cdCAgb3B0LnVybCA9IG9wdC51cmwgfHwgJyc7XG5cdCAgb3B0LmRhdGEgPSBvcHQuZGF0YSB8fCBudWxsO1xuXHQgIG9wdC5zdWNjZXNzID0gb3B0LnN1Y2Nlc3MgfHwgZnVuY3Rpb24gKCkge307XG5cdCAgb3B0LmVycm9yID0gb3B0LmVycm9yIHx8IGZ1bmN0aW9uICgpIHt9O1xuXHQgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICB2YXIgcGFyYW1zID0gW107XG5cdCAgZm9yICh2YXIga2V5IGluIG9wdC5kYXRhKXtcblx0ICAgIHBhcmFtcy5wdXNoKGtleSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChvcHQuZGF0YVtrZXldKSk7XG5cdCAgfVxuXHQgIHZhciBnZXREYXRhID0gcGFyYW1zLmpvaW4oJyYnKTtcblx0ICB2YXIgcG9zdERhdGEgPSBKU09OLnN0cmluZ2lmeShvcHQuZGF0YSB8fCB7fSk7XG5cdCAgXG5cdCAgaWYgKG9wdC5tZXRob2QgPT09ICdQT1NUJykge1xuXHQgICAgeGhyLm9wZW4ob3B0Lm1ldGhvZCwgb3B0LnVybCwgdHJ1ZSk7XG5cdCAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgY29udGVudFR5cGUgfHwgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblx0ICB9IGVsc2UgaWYgKG9wdC5tZXRob2QgPT09ICdHRVQnKSB7XG5cdCAgICB4aHIub3BlbihvcHQubWV0aG9kLCBvcHQudXJsICsgJz8nICsgZ2V0RGF0YSwgdHJ1ZSk7XG5cdCAgfVxuXHRcblx0ICAvLyB3aXRoQ3JlZGVudGlhbHMgY2Fubm90IGJlIG1vZGlmaWVkIHVudGlsIGFmdGVyIGNhbGxpbmcgLm9wZW4gb24gQW5kcm9pZCBhbmQgTW9iaWxlIFNhZmFyaVxuXHQgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuXHQgIHhoci50aW1lb3V0ID0gMzAwMDtcblx0ICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQgJiYgeGhyLnN0YXR1cyA9PSAyMDApIHtcblx0ICAgICAgdmFyIGpzb24gPSB7fTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBqc29uID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcblx0ICAgICAgfSBjYXRjaCAoZXgpIHt9XG5cdCAgICAgIG9wdC5zdWNjZXNzKGpzb24pO1xuXHQgICAgfWVsc2UgaWYoeGhyLnJlYWR5U3RhdGUgPT0gNCl7XG5cdCAgICAgIG9wdC5lcnJvcih4aHIuc3RhdXMpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGlmIChvcHQubWV0aG9kID09PSAnUE9TVCcpIHtcblx0ICAgIHhoci5zZW5kKHBvc3REYXRhKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgeGhyLnNlbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLnJlcXVlc3QgPSByZXF1ZXN0O1xuXHRleHBvcnRzLnJlcXVlc3Q0dW0gPSByZXF1ZXN0NHVtO1xuXG5cbi8qKiovIH0pLFxuLyogNTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOazqOWFpWxvZ0NvbmZpZyzkvpvlkI7nu63mj5Lku7bkvb/nlKhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldExvZ0NvbmZpZzogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbG9nQ29uZmlnID0ge307XG5cdCAgICAgIHZhciBwbHVnaW5zID0gdGhpcy5vcHRpb25zLmNvbmZpZy5wbHVnaW5zO1xuXHRcblx0ICAgICAgZm9yICh2YXIgayBpbiBwbHVnaW5zKSB7XG5cdCAgICAgICAgbG9nQ29uZmlnW2tdID0ge1xuXHQgICAgICAgICAgcGx1Z2luczogcGx1Z2luc1trXSxcblx0ICAgICAgICAgIGNvbnRleHQ6IHt9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBlYWNoKHBsdWdpbnNba10sIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICBsb2dDb25maWdba10uY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWcgfHwge307XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGxvZ0NvbmZpZztcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyA9IHRoaXMuZ2V0TG9nQ29uZmlnKCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5QQUdFX0xPQURfVElNRTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvZXRhZy5qc1xuXHQgKlxuXHQgKiDkvZznlKjvvJrljrsgaHR0cHM6Ly9sb2cubW1zdGF0LmNvbS9lZy5qcyB8IGh0dHBzOi8vZ2oubW1zdGF0LmNvbS9lZy5qc+WQjOatpWNuYe+8jOW5tuWGmeWFpeWIsOacrOWcsGNvb2tpZVxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY29va2llID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdHZhciB1dGlsRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHR2YXIgZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuXHR2YXIgdXRpbEV0YWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciB1dGlsRG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8vIOWIneWni+WMluaooeWdl1xuXHQgICAgaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgICB2YXIgcGx1Z2luX2V0YWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5ldGFnIHx8IHt9O1xuXHQgICAgICB0aGlzLmNuYSA9IHBsdWdpbl9ldGFnLmNuYSB8fCBjb29raWUuZ2V0Q29va2llQ25hKCdjbmEnKTtcblx0ICAgICAgLy8gdGhpcy50YWcgPSAwO1xuXHQgICAgICAvLyB0aGlzLnN0YWcgPSAtMTtcblx0ICAgICAgLy8gdGhpcy5ldGFnID0gJyc7XG5cdCAgICAgIHRoaXMuc2V0VGFnKDApO1xuXHQgICAgICB0aGlzLnNldFN0YWcoLTEpO1xuXHQgICAgICB0aGlzLnNldExzVGFnKCctMScpOyAvLyDmiZPmoIfnrb4obG9jYWxTdG9yYWdlVGFnKWxzdGFnID0gLTEg5Yid5aeL5YC8XG5cdCAgICAgIHRoaXMuc2V0RXRhZyh0aGlzLmNuYSB8fCAnJyk7XG5cdCAgICAgIHRoaXMucmVxdWVzdGluZyA9IGZhbHNlO1xuXHQgICAgICB0aGlzLnRvZGF5ID0gZGF0ZS5nZXRGb3JtYXREYXRlKCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHNldExzVGFnOiBmdW5jdGlvbihsc3RhZykge1xuXHQgICAgICB0aGlzLmxzdGFnID0gbHN0YWc7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcubHN0YWcgPSBsc3RhZztcblx0ICAgIH0sXG5cdFxuXHQgICAgc2V0VGFnOiBmdW5jdGlvbih0YWcpIHtcblx0ICAgICAgdGhpcy50YWcgPSB0YWc7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcudGFnID0gdGFnO1xuXHQgICAgfSxcblx0XG5cdCAgICBzZXRTdGFnOiBmdW5jdGlvbihzdGFnKSB7XG5cdCAgICAgIHRoaXMuc3RhZyA9IHN0YWc7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcuc3RhZyA9IHN0YWc7XG5cdCAgICB9LFxuXHRcblx0ICAgIHNldEV0YWc6IGZ1bmN0aW9uKGV0YWcpIHtcblx0ICAgICAgdGhpcy5ldGFnID0gZXRhZztcblx0ICAgICAgLy8g6LWL5YC8cHblj4LmlbDvvIjph43opoHvvIlcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQuZXRhZy5jbmEgPSBldGFnO1xuXHQgICAgICAvLyDlrZjlhaVjb29raWVcblx0ICAgICAgaWYgKGNvb2tpZS5nZXRDb29raWVDbmEoJ2NuYScpICE9PSBldGFnKSB7XG5cdCAgICAgICAgY29va2llLnNldENvb2tpZUNuYSgnY25hJywgZXRhZywge1xuXHQgICAgICAgICAgJ1NhbWVTaXRlJzogJ25vbmUnXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgc2V0THNjbmFTdGF0dXM6IGZ1bmN0aW9uKHN0YXR1cykge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5ldGFnLmxzY25hc3RhdHVzID0gc3RhdHVzO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHB25Y+R6YCB5Yiw5ZOq6YeM5Y67XG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjO+8jOi/lOWbnuKAnHBhdXNl4oCd5pqC5YGc5Lit6Ze05Lu25omn6KGM77yM6L+U5Zue5LiA5Liq5pW05pWw4oCcbuKAneWRiuivieS4remXtOS7tuKAnG7igJ3mr6vnp5LlkI7nu6fnu63miafooYzkuK3pl7Tku7Zcblx0ICAgICAqIOKAnOaaguWBnOKAneacgOWkmjEwc++8jOiLpei2heaXtuS4remXtOS7tuS8muW8uuWItue7p+e7reaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKHN0YXRlLCBjYikge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgLy8gdmFyIGFwbHVzX2NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZztcblx0ICAgICAgaWYgKF9zZWxmLmNuYSkge1xuXHQgICAgICAgIC8vIF9zZWxmLnRhZyA9IDE7XG5cdCAgICAgICAgX3NlbGYuc2V0VGFnKDEpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgdGltZXIgPSBudWxsO1xuXHQgICAgICB2YXIgYXBsdXNfcmhvc3RfdiA9IGFwbHVzLl8kLm1ldGFfaW5mb1snYXBsdXMtcmhvc3QtdiddO1xuXHQgICAgICBpZiAoYXBsdXNfcmhvc3Rfdikge1xuXHQgICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcuZWdVcmwgPSBhcGx1c19yaG9zdF92ICsgJy9lZy5qcyc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBlZ1VybCA9IHV0aWxFdGFnLmdldFVybCh0aGlzLm9wdGlvbnMuY29udGV4dC5ldGFnIHx8IHt9KTtcblx0ICAgICAgX3NlbGYucmVxdWVzdGluZyA9IHRydWU7XG5cdFxuXHQgICAgICB2YXIgZG9fYmFjayA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICBjYigpO1xuXHQgICAgICAgIH0sIDIwKTtcblx0ICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuXHQgICAgICB9O1xuXHQgICAgICBcblx0ICAgICAgdmFyIHVuaXR0ZXN0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQuZXRhZy51bml0dGVzdDtcblx0ICAgICAgdmFyIF9mbiA9IHVuaXR0ZXN0IHx8IHV0aWxEb20ubG9hZFNjcmlwdDtcblx0ICAgICAgXG5cdCAgICAgIF9mbihlZ1VybCwgZnVuY3Rpb24oZXJyb3IpIHtcblx0ICAgICAgICB2YXIgRXRhZztcblx0ICAgICAgICB2YXIgc3RhZztcblx0ICAgICAgICAvLyBvbmVycm9yIOinpuWPkVxuXHQgICAgICAgIGlmIChlcnJvciAmJiBlcnJvci50eXBlID09PSAnZXJyb3InKSB7XG5cdCAgICAgICAgICBfc2VsZi5zZXRTdGFnKC0zKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgRXRhZyA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ0V0YWcnKTtcblx0ICAgICAgICAgIGlmIChFdGFnKSB7XG5cdCAgICAgICAgICAgIF9zZWxmLnNldEV0YWcoRXRhZyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBzdGFnID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnc3RhZycpO1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBzdGFnICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdCAgICAgICAgICAgIC8vIF9zZWxmLnN0YWcgPSBzdGFnO1xuXHQgICAgICAgICAgICBfc2VsZi5zZXRTdGFnKHN0YWcpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8g5bey57uP6LaF5pe277yM5b2TRXRhZ+ayoeivt+axgui/h++8jOi1sOWOn+aciea1geeoi1xuXHQgICAgICAgIGlmICghX3NlbGYucmVxdWVzdGluZykge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgdGFn5qCH562+5YC85ZCr5LmJ77yaXG5cdCAgICAgICAgICAxICDkuJrliqHln5/mnIljbmHvvIzmnInljp/mnInmtYHnqItcblx0ICAgICAgICAgIDAgIOS4muWKoeWfn+ayoeaciWNuYe+8jOWPkei1t3RhZ+ivt+axglxuXHRcblx0ICAgICAgICAgIHN0YWfmoIfnrb7lgLzlkKvkuYnvvJpcblx0ICAgICAgICAgIC0xICAg5Yid5aeL5YyW5YC8XG5cdCAgICAgICAgICAxICAgIG1tc3RhdOaciWNuYe+8jOS4lGNuYeWvueeahFxuXHQgICAgICAgICAgMCAgICBtbXN0YXTmsqHmnIljbmHvvIxpZl9ub25lX21hdGNoIOacieWAvO+8jOS4lOWAvOato+ehrlxuXHQgICAgICAgICAgNCAgIG1tc3RhdOayoeaciWNuYe+8jGlmX25vbmVfbWF0Y2gg5pyJ5YC877yM5LiU5YC85LiN5q2j56Gu77yM5paw55Sf5oiQ55qEXG5cdCAgICAgICAgICAtMyAgIOWJjeerr2pz6Kem5Y+R77yMZXRhZyBvbmVycm9y5LqL5Lu26Kem5Y+R77yM5YiZ5qCH6K6wLTNcblx0ICAgICAgICAgIDIgICAg5ZWl6YO95rKh5pyJ77yM5oiW6ICFbW1zdGF05pyJ5L2G5piv5piv6ZSZ55qE77yM6YeN5paw55Sf5oiQXG5cdCAgICAgICAgICAtMiAgZXRhZ2pz6LaF5pe277yM5YmN56uvanPop6blj5Horr7nva5cblx0ICAgICAgICAgKi9cblx0ICAgICAgICB2YXIgZ2xvYmFsQ29uZmlnID0gYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuXHQgICAgICAgIGlmIChzdGFnID09PSAyIHx8IHN0YWcgPT09IDQpIHtcblx0ICAgICAgICAgIHZhciBfbHNjbmEgPSB1dGlsRGF0YS5nZXRMc0NuYShnbG9iYWxDb25maWcuRVRBR19TVE9SQUdFX0tFWSk7XG5cdCAgICAgICAgICAvLyBMU+acieWAvOaXtu+8jHNldOS4muWKoeWfn2Nvb2tpZeOAgWxzdGFnPTFcblx0ICAgICAgICAgIGlmIChfbHNjbmEpIHtcblx0ICAgICAgICAgICAgX3NlbGYuc2V0THNUYWcoMSk7XG5cdCAgICAgICAgICAgIF9zZWxmLnNldEV0YWcoX2xzY25hKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIC8vIExT5peg5YC85pe277yMc2V055So5pawQ05B5Y+R5pel5b+X44CBbHPloavlgLzjgIFsc3RhZz0wXG5cdCAgICAgICAgICAgIF9zZWxmLnNldExzVGFnKDApO1xuXHQgICAgICAgICAgICB1dGlsRGF0YS5zZXRMc0NuYShnbG9iYWxDb25maWcuRVRBR19TVE9SQUdFX0tFWSwgX3NlbGYudG9kYXksIEV0YWcpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBkb19iYWNrKCk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdmFyIGV0YWdUaW1lb3V0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV0YWctdGltZW91dCcpO1xuXHQgICAgICB2YXIgZGVmYXVsdFRpbWUgPSAyMDA7XG5cdCAgICAgIHZhciB0aW1lID0gZGVmYXVsdFRpbWU7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdGltZSA9IHBhcnNlSW50KGV0YWdUaW1lb3V0KTtcblx0ICAgICAgICBpZiAodXRpbERhc2guaXNOYU4odGltZSkgfHwgdGltZSA8IDIwMCkge1xuXHQgICAgICAgICAgdGltZSA9IGRlZmF1bHRUaW1lO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyDotoXml7blpITnkIZcblx0ICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIF9zZWxmLnJlcXVlc3RpbmcgPSBmYWxzZTtcblx0ICAgICAgICBfc2VsZi5zZXRTdGFnKC0yKTtcblx0ICAgICAgICBjYigpO1xuXHQgICAgICB9LCB0aW1lKTtcblx0XG5cdCAgICAgIC8vIOWRiuiviWNvbXBvc2XmmoLlgZzmiafooYzkuK3pl7Tku7bvvIznm7TliLBjYuWbnuWIsOWQjuWGjee7p+e7rVxuXHQgICAgICByZXR1cm4gdGltZTtcblx0ICAgIH0sXG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDUzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBjb29raWVcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHR2YXIgdGxkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0XG5cdC8qKlxuXHQgKiDlj5blvpcgY29va2llIOS4reWvueW6lCBrZXkg55qE5YC8XG5cdCAqIEBwYXJhbSBrZXkge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGdldENvb2tpZShrZXkpIHtcblx0ICBpZiAoIWRvY3VtZW50KSB7XG5cdCAgICByZXR1cm4gJyc7XG5cdCAgfVxuXHQgIHZhciBjb29raWVfdmFsID0gZG9jdW1lbnQuY29va2llLm1hdGNoKFxuXHQgICAgbmV3IFJlZ0V4cCgnKD86Xnw7KVxcXFxzKicgKyBrZXkgKyAnPShbXjtdKyknKVxuXHQgICk7XG5cdCAgcmV0dXJuIGNvb2tpZV92YWwgPyBjb29raWVfdmFsWzFdIDogJyc7XG5cdH07XG5cdGV4cG9ydHMuZ2V0Q29va2llID0gZ2V0Q29va2llO1xuXHRcblx0ZnVuY3Rpb24gZ2V0RXhwaXJlc1RpbWUgKG9wdGlvbnMpIHtcblx0ICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdCAgdmFyIGRhdGVTdHIgPSAnJztcblx0ICBpZiAoJ3Nlc3Npb24nID09PSBvcHRpb25zLmV4cGlyZXMpIHtcblx0ICB9IGVsc2UgaWYgKG9wdGlvbnMuZXhwaXJlcyAmJiAoJ251bWJlcicgPT09IHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgfHwgb3B0aW9ucy5leHBpcmVzLnRvVVRDU3RyaW5nKSkge1xuXHQgICAgLy8gb3B0aW9ucy5leHBpcmVz5aSp5pWwXG5cdCAgICBpZiAoJ251bWJlcicgPT09IHR5cGVvZiBvcHRpb25zLmV4cGlyZXMpIHtcblx0ICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgMjQgKiBvcHRpb25zLmV4cGlyZXMgKiA2MCAqIDYwICogMTAwMCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkYXRlID0gb3B0aW9ucy5leHBpcmVzO1xuXHQgICAgfVxuXHQgICAgZGF0ZVN0ciA9ICdleHBpcmVzPScgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIDIw5bm06L+H5pyf5pe26Ze0XG5cdCAgICB2YXIgeWVhcnMgPSAyMDtcblx0ICAgIGlmKHV0aWxBcnJheS5pbmRleG9mKFsndi55b3VrdS5jb20nLCd3d3cueW91a3UuY29tJywncGxheWVyLnlvdWt1LmNvbSddLGxvY2F0aW9uLmhvc3RuYW1lKT4tMSl7XG5cdCAgICAgIC8vIOS8mOmFt+S4muWKoeeJueauiu+8jOWPquiDvTHlubTmnInmlYjmnJ9cblx0ICAgICAgeWVhcnMgPSAxO1xuXHQgICAgfVxuXHQgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgeWVhcnMgKiAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcblx0ICAgIGRhdGVTdHIgPSAnZXhwaXJlcz0nICsgZGF0ZS50b1VUQ1N0cmluZygpO1xuXHQgIH1cblx0ICByZXR1cm4gZGF0ZVN0cjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdHJ5U2V0Q29va2llKG5hbWUsIHZhbCwgb3B0aW9ucykge1xuXHQgIGlmICghZG9jdW1lbnQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKCFvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0ge307XG5cdCAgfVxuXHQgIHZhbCArPSAnOycgKyAob3B0aW9ucy5leHBpcmVzIHx8IGdldEV4cGlyZXNUaW1lKG9wdGlvbnMpKTtcblx0ICAvLyB3d3cudGFvYmFvLmNvbSAtPiB0YW9iYW8uY29tXG5cdCAgdmFsICs9ICc7IHBhdGg9JyArIChvcHRpb25zLnBhdGggPyBvcHRpb25zLnBhdGggOiAnLycpO1xuXHQgIHZhbCArPSAnOyBkb21haW49JyArIG9wdGlvbnMuZG9tYWluO1xuXHRcblx0ICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz0nICsgdmFsO1xuXHRcblx0ICB2YXIgY2hyb21lVmVyc2lvbiA9IDA7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBjaHJvbWVJbmZvcyA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0Nocm9tZVxcL1xcZC8pO1xuXHQgICAgaWYgKGNocm9tZUluZm9zICYmIGNocm9tZUluZm9zWzBdKSB7XG5cdCAgICAgIGNocm9tZVZlcnNpb24gPSBjaHJvbWVJbmZvc1swXS5zcGxpdCgnLycpWzFdO1xuXHQgICAgICBpZiAoY2hyb21lVmVyc2lvbikge1xuXHQgICAgICAgIGNocm9tZVZlcnNpb24gPSBwYXJzZUludChjaHJvbWVWZXJzaW9uKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGUpIHt9XG5cdFxuXHQgIGlmIChvcHRpb25zLlNhbWVTaXRlICYmIGNocm9tZVZlcnNpb24gPj0gOCkge1xuXHQgICAgdmFsICs9ICc7IFNhbWVTaXRlPScgKyBvcHRpb25zLlNhbWVTaXRlO1xuXHQgICAgdmFsICs9ICc7IFNlY3VyZSc7XG5cdCAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz0nICsgdmFsO1xuXHQgIH1cblx0ICByZXR1cm4gZ2V0Q29va2llKG5hbWUpO1xuXHR9O1xuXHRleHBvcnRzLnRyeVNldENvb2tpZSA9IHRyeVNldENvb2tpZTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IG5hbWUgY29va2llS2V5XG5cdCAqIEBwYXJhbXMge1N0cmluZ3xOdW1iZXJ9IHZhbCBjb29raWVWYWx1ZVxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuXHQgKiAgIGV4cGlyZXNcblx0ICogICBkb21haW5cblx0ICogICBwYXRoXG5cdCAqIH1cblx0ICovXG5cdGZ1bmN0aW9uIHNldENvb2tpZShuYW1lLCB2YWwsIG9wdGlvbnMpIHtcblx0ICB0cnkge1xuXHQgICAgaWYgKCFkb2N1bWVudCkge1xuXHQgICAgICByZXR1cm4gJyc7XG5cdCAgICB9XG5cdCAgICBpZiAoIW9wdGlvbnMpIHtcblx0ICAgICAgb3B0aW9ucyA9IHt9O1xuXHQgICAgfVxuXHQgICAgaWYgKG9wdGlvbnMuZG9tYWluKSB7XG5cdCAgICAgIHRyeVNldENvb2tpZShuYW1lLCB2YWwsIG9wdGlvbnMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGRvbWFpbnMgPSB0bGQuZ2V0RG9tYWlucygpO1xuXHQgICAgICB2YXIgaSA9IDA7XG5cdCAgICAgIHdoaWxlIChpIDwgZG9tYWlucy5sZW5ndGgpIHtcblx0ICAgICAgICBvcHRpb25zLmRvbWFpbiA9IGRvbWFpbnNbaV07XG5cdCAgICAgICAgaWYgKCF0cnlTZXRDb29raWUobmFtZSwgdmFsLCBvcHRpb25zKSkge1xuXHQgICAgICAgICAgaSsrO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpID0gZG9tYWlucy5sZW5ndGg7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge31cblx0fTtcblx0XG5cdGV4cG9ydHMuc2V0Q29va2llID0gc2V0Q29va2llO1xuXHRcblx0dmFyIGtleXMgPSBbJ3RyYWNrbmljaycsICd0aHcnLCAnY25hJ107XG5cdFxuXHRleHBvcnRzLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGRhdGEgPSB7fTtcblx0ICBlYWNoKGtleXMsIGZ1bmN0aW9uIChrKSB7XG5cdCAgICBkYXRhW2tdID0gZ2V0Q29va2llKGspO1xuXHQgIH0pO1xuXHRcblx0ICBpZiAobG9jYXRpb24pIHtcblx0ICAgIHZhciBob3N0bmFtZSA9IGxvY2F0aW9uLmhvc3RuYW1lO1xuXHQgICAgLy8gVE9ETyDlvoXlrZDnl5XmnI3liqHnq6/lrp7njrDoh6rliqjku45odHRw5aS06YeM5Y+WY25hdWnpgLvovpHlkI7miorov5nmrrXpgLvovpHlubLmjonvvIFcblx0ICAgIC8vIDIwMTMtMDUtMDYg5LiA5ZW46ZyA5rGC77yM5LuF5ZyoIHRhbnguY29tIOaIliAqLnRhbnguY29tIOmhtemdouWPliBjbmF1aSDov5nkuKogY29va2llXG5cdCAgICBkYXRhLmNuYXVpID0gL1xcYnRhbnhcXC5jb20kLy50ZXN0KGhvc3RuYW1lKSA/IGdldENvb2tpZSgnY25hdWknKSA6ICcnO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGRhdGE7XG5cdH07XG5cdFxuXHQvLyDoh6rlrprkuYljb29raWXph4fpm4Zcblx0Ly8gaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9kb2NzL2t2aG1iZ1xuXHQvLyAyMDE4LzMvMTJcblx0Ly8g5LiN5YaN6YeH6ZuGX2FfZF9h77yM6YeH6ZuGaG5n77yM5bm25L+u5pS55Li6X2huZ1xuXHQvL+ivpuinge+8mmh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL2FsaWxvZy9rYi9pc3N1ZXMvMjIxXG5cdGV4cG9ydHMuZ2V0SG5nID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoZ2V0Q29va2llKCdobmcnKSB8fCAnJyk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldENvb2tpZUNuYSA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgcmV0dXJuIGdldENvb2tpZShuYW1lKSB8fCBnZXRDb29raWUoJ18nICsgbmFtZSk7XG5cdH07XG5cdGV4cG9ydHMuc2V0Q29va2llQ25hID0gZnVuY3Rpb24gKG5hbWUsIHZhbCwgb3B0aW9ucykge1xuXHQgIHZhciBkb21haW5zID0gdGxkLmdldERvbWFpbnMoKTtcblx0ICB2YXIgaSA9IDA7XG5cdCAgd2hpbGUgKGkgPCBkb21haW5zLmxlbmd0aCkge1xuXHQgICAgb3B0aW9ucy5kb21haW4gPSBkb21haW5zW2ldO1xuXHQgICAgaWYgKCF0cnlTZXRDb29raWUobmFtZSwgdmFsLCBvcHRpb25zKSkge1xuXHQgICAgICBpZiAoaSA9PT0gZG9tYWlucy5sZW5ndGggLSAxKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gdmFsICsgJzsnICsgZ2V0RXhwaXJlc1RpbWUob3B0aW9ucyk7XG5cdCAgICAgICAgdmFsdWUgKz0gJzsgcGF0aD0vJztcblx0ICAgICAgICBkb2N1bWVudC5jb29raWUgPSAnXycgKyBuYW1lICsgJz0nICsgdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgaSsrO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaSA9IGRvbWFpbnMubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDU0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEBhdXRob3Igaml6aGEud3lqXG5cdCAqIEBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuXHQgKlxuXHQgKiBUTEQgPSBUb3AgTGV2ZWwgRG9tYWluXG5cdCAqXG5cdCAqIGFwbHVzIOWGmSBjb29raWUg5pe277yM6YCa5bi46KaB5rGC5YaZ5Yiw5qC55Z+f77yM5q+U5aaCIHBhaW1haS50YW9iYW8uY29tIOeahCBjb29raWUg6KaB5YaZ5YiwIHRhb2Jhby5jb20g5Z+f5LiL77yMXG5cdCAqIOS9huaYr+acieS6m+WVhuWutuermeeCuee7keWumuS6huiHquWumuS5ieWfn+WQje+8jOavlOWmgiBodHRwOi8vaHVhc2hlbmdzaGlqaS5jb20uY24vIO+8jOWmguaenOWPquaYr+eugOWNleWcsOWPluWfn+WQjeeahOacgOWQjuS4pOS9je+8jFxuXHQgKiDlsLHkvJrlj5bliLAgY29tLmNu77yM5peg5rOV5q2j5bi46K6+572uIGNvb2tpZe+8jOaJgOS7pemcgOimgei/meS4quW6k1xuXHQgKiBtb2RpZnkgYnkgQOiwi+WjqyBpbiAyMDE3LTEwLTI45pel77yM5Y+W5raI6ZW/5Z+f5ZCN5ZCO57yA55m95ZCN5Y2V77yM5Lul6Kej5YazbGF6YWRh562J5paw5o6l5YWl5Lia5Yqh6Zeu6aKYXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy5nZXREb21haW5zID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHRvcHMgPSBbXTtcblx0ICB0cnkge1xuXHQgICAgdmFyIGZ1bGxfZG9tYWluID0gbG9jYXRpb24uaG9zdG5hbWU7XG5cdCAgICB2YXIgYSA9IGZ1bGxfZG9tYWluLnNwbGl0KCcuJyk7XG5cdCAgICB2YXIgaSA9IDI7XG5cdCAgICB3aGlsZShpIDw9IGEubGVuZ3RoKSB7XG5cdCAgICAgIHRvcHMucHVzaChhLnNsaWNlKGEubGVuZ3RoIC0gaSkuam9pbignLicpKTtcblx0ICAgICAgaSsrO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgcmV0dXJuIHRvcHM7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5pWw57uE5bel5YW3XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIElFOOS4jeaUr+aMgeaVsOe7hOWOn+eUn+eahGluZGV4T2bvvIzmlYXoh6rooYzlrp7njrDkuIDkuKppbmRleG9mXG5cdCAqIEBwYXJhbSBbQXJyYXldIGFyclxuXHQgKiBAcGFyYW0gW09iamVjdF0gaXRlbVxuXHQgKiBAcmV0dXJuIFtOdW1iZXJdIGluZGV4XG5cdCAqL1xuXHRleHBvcnRzLmluZGV4b2YgPSBmdW5jdGlvbihhcnIsIGl0ZW0pIHtcblx0ICB2YXIgaW5kZXggPSAtMTtcblx0ICB0cnkge1xuXHQgICAgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuXHQgICAgICBpZiAoYXJyW2pdID09PSBpdGVtKSB7XG5cdCAgICAgICAgaW5kZXggPSBqO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiBpbmRleDtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLml0ZW1NYXRjaCA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuXHQgIHZhciBtYXRjaGVkID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIGlmICghdGhpcy5pc0FycmF5KGFycikpIHtcblx0ICAgICAgcmV0dXJuIG1hdGNoZWQ7XG5cdCAgICB9XG5cdCAgICBtYXRjaGVkID0gYXJyLnNvbWUoZnVuY3Rpb24ocykge1xuXHQgICAgICByZXR1cm4gKHMgJiYgcy5sZW5ndGggPiAwKSAmJiBpdGVtLmluZGV4T2YocykgIT09IC0xO1xuXHQgICAgfSk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuXHQgICAgICBpZiAoaXRlbS5pbmRleE9mKGFycltqXSkgIT09IC0xKSB7XG5cdCAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG1hdGNoZWQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzQXJyYXkgPSBmdW5jdGlvbiAobykge1xuXHQgIGlmIChBcnJheS5pc0FycmF5KSB7XG5cdCAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIC9BcnJheS8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDU2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3V0aWwvZGF0ZVV0aWwuanNcblx0ICog5pel5pyf5biu5Yqp57G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gemVyb0ZpbGwobnVtYmVyLCB0YXJnZXRMZW5ndGgsIGZvcmNlU2lnbikge1xuXHQgIHZhciBhYnNOdW1iZXIgPSAnJyArIE1hdGguYWJzKG51bWJlciksXG5cdCAgICB6ZXJvc1RvRmlsbCA9IHRhcmdldExlbmd0aCAtIGFic051bWJlci5sZW5ndGgsXG5cdCAgICBzaWduID0gbnVtYmVyID49IDA7XG5cdCAgcmV0dXJuIChzaWduID8gKGZvcmNlU2lnbiA/ICcrJzogJycpIDogJy0nKSArIE1hdGgucG93KDEwLCBNYXRoLm1heCgwLCB6ZXJvc1RvRmlsbCkpLnRvU3RyaW5nKCkuc3Vic3RyKDEpICsgYWJzTnVtYmVyO1xuXHR9O1xuXHQvKipcblx0ICog5qC55o2u5qC85byP6L+U5Zue5pel5pyfXG5cdCAqIEBwYXJhbXMgW2Zvcm1hdF0gXCItXCIgKDIwMTgtMDEtMDEpIHwgXCIvXCIgKDIwMTgvMDEvMDEpXG5cdCAqL1xuXHRleHBvcnRzLmdldEZvcm1hdERhdGUgPSBmdW5jdGlvbihmb3JtYXQpIHtcblx0ICB2YXIgZCA9IG5ldyBEYXRlKCk7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiBbXG5cdCAgICAgIGQuZ2V0RnVsbFllYXIoKSxcblx0ICAgICAgemVyb0ZpbGwoZC5nZXRNb250aCgpICsgMSwgMiwgMCksXG5cdCAgICAgIHplcm9GaWxsKGQuZ2V0RGF0ZSgpLCAyLCAwKVxuXHQgICAgXS5qb2luKGZvcm1hdCB8fCAnJyk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuICcnO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDU3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdC8vIOS7hemZkOW8ueWGhe+8m+Wwj+exs+emgeeUqGVnLmpz5bqU5a+5562W55Wl77ya5L2/55So5Yqo5oCB5ZCO57yA5ZCNXG5cdC8vIOWQjue8gOWQjeeUn+aIkOaWueazlTog5b2T5YmN5pe26Ze05oiz6L2sMTbov5vliLbvvIzlj5blkI445L2N77yMXG5cdC8vIGZ1bmN0aW9uIGV0YWdVcmxTdWZmaXgoZXRhZ1VybCkge1xuXHQvLyAgIHZhciBkeW5hbWljVXJsID0gZXRhZ1VybDtcblx0Ly8gICB0cnkge1xuXHQvLyAgICAgaWYoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdC8vICAgICAgIHRyeSB7XG5cdC8vICAgICAgICAgdmFyIHRpbWVTdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQvLyAgICAgICAgIHZhciBkeW5hbWljU3VmZml4ID0gdGltZVN0YW1wLnRvU3RyaW5nKDE2KS5zbGljZSgtOCk7XG5cdC8vICAgICAgICAgd2hpbGUoZHluYW1pY1N1ZmZpeC5sZW5ndGggPCA4KSB7XG5cdC8vICAgICAgICAgICBkeW5hbWljU3VmZml4ID0gZHluYW1pY1N1ZmZpeCArICdmJztcblx0Ly8gICAgICAgICB9XG5cdC8vICAgICAgICAgZHluYW1pY1VybCA9IGV0YWdVcmwucmVwbGFjZSgvZWcuanMvLCBkeW5hbWljU3VmZml4ICsgJy5qcycpO1xuXHQvLyAgICAgICB9IGNhdGNoKGUpIHtcblx0Ly8gICAgICAgfVxuXHQvLyAgICAgICByZXR1cm4gZHluYW1pY1VybDtcblx0Ly8gICAgIH1cblx0Ly8gICB9IGNhdGNoKGUpIHtcblx0XG5cdC8vICAgfVxuXHQvLyAgIHJldHVybiBkeW5hbWljVXJsO1xuXHQvLyB9XG5cdFxuXHRleHBvcnRzLmdldFVybCA9IGZ1bmN0aW9uIChldGFnKSB7XG5cdCAgdmFyIHVybCA9IHV0aWxEYXRhLmdldFVybChldGFnICYmIGV0YWcuZWdVcmwpO1xuXHQgIC8vIHVybCA9IGV0YWdVcmxTdWZmaXgodXJsKTtcblx0ICAvLyDlpoLmnpxlZ1VybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuXHQgIGlmICh1cmwuaW5kZXhPZignaHR0cCcpICE9PSAwKSB7XG5cdCAgICB2YXIgcHJvdG9jYWwgPSAnaHR0cHM6Jztcblx0ICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG5cdCAgICB9XG5cdCAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICB9XG5cdCAgcmV0dXJuIHVybDtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA1OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxBdHRyaWJ1dGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfaGVhZF9ub2RlO1xuXHR2YXIgX2N1cnJlbnROb2RlO1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q3VycmVudE5vZGUgKCkge1xuXHQgIGlmICghX2N1cnJlbnROb2RlKSB7XG5cdCAgICBfY3VycmVudE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmVhY29uLWFwbHVzJykgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RiLWJlYWNvbi1hcGx1cycpO1xuXHQgIH1cblx0ICByZXR1cm4gX2N1cnJlbnROb2RlO1xuXHR9XG5cdGV4cG9ydHMuZ2V0Q3VycmVudE5vZGUgPSBnZXRDdXJyZW50Tm9kZTtcblx0XG5cdC8qKlxuXHQgKiBBcGx1c+aUr+aMgemHh+mbhkNTUOino+WGs+aWueahiFxuXHQgKiBmcm9tIOS6keadsCAgMjAxOC0xMi0xNyAgaHR0cHM6Ly9hb25lLmFsaWJhYmEtaW5jLmNvbS9yZXEvMTgyNDExNTQ/ZnJvbT1hayZmcm9tPWFrJlxuXHQgKi9cblx0ZnVuY3Rpb24gc2V0Tm9uY2UgKG5vZGUpIHtcblx0ICB2YXIgY3VycmVudF9ub2RlID0gZ2V0Q3VycmVudE5vZGUoKTtcblx0ICB2YXIgbm9uY2UgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKGN1cnJlbnRfbm9kZSwgJ2NzcHgnKTtcblx0ICBpZiAobm9kZSAmJiBub25jZSkge1xuXHQgICAgbm9kZS5ub25jZSA9IG5vbmNlO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIOWcqOW9k+WJjemhtemdoua3u+WKoOS4gOS4qiBqc1xuXHQgKiBAcGFyYW0gc3JjXG5cdCAqIEBwYXJhbSBbaHR0cHNfc3JjXVxuXHQgKi9cblx0ZXhwb3J0cy5hZGRTY3JpcHQgPSBmdW5jdGlvbiAoc3JjLCBodHRwc19zcmMsIGlkKSB7XG5cdCAgdmFyIHMgPSAnc2NyaXB0Jztcblx0ICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocyk7XG5cdCAgdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG5cdCAgdC5hc3luYyA9IHRydWU7XG5cdCAgdmFyIGN1cnJlbnRfbm9kZSA9IGdldEN1cnJlbnROb2RlKCk7XG5cdCAgdmFyIGhhc0Nyb3NzT3JpZ2luID0gY3VycmVudF9ub2RlICYmIGN1cnJlbnRfbm9kZS5oYXNBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJyk7XG5cdCAgaWYgKGhhc0Nyb3NzT3JpZ2luKSB7XG5cdCAgICB0LmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7XG5cdCAgfVxuXHRcblx0ICB2YXIgdXJsID0gYXBsdXNTdGF0aWMuSFRUUFMgPT09IGxvY2F0aW9uLnByb3RvY29sID8gKGh0dHBzX3NyYyB8fCBzcmMpIDogc3JjO1xuXHQgIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuXHQgICAgdXJsID0gYXBsdXNTdGF0aWMuSFRUUFMgKyB1cmw7XG5cdCAgfVxuXHQgIHQuc3JjID0gdXJsO1xuXHQgIGlmIChpZCkge1xuXHQgICAgdC5pZCA9IGlkO1xuXHQgIH1cblx0ICBzZXROb25jZSh0KTtcblx0ICB2YXIgbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHMpWzBdO1xuXHQgIF9oZWFkX25vZGUgPSBfaGVhZF9ub2RlIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG5cdCAgaWYgKG0pIHtcblx0ICAgIG0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodCwgbSk7XG5cdCAgfSBlbHNlIGlmIChfaGVhZF9ub2RlKSB7XG5cdCAgICBfaGVhZF9ub2RlLmFwcGVuZENoaWxkKHQpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDlnKjlvZPliY3pobXpnaLmt7vliqDkuIDkuKoganPvvIzlubbmiafooYzlm57osINcblx0ICogQHBhcmFtIHNyY1xuXHQgKiBAcGFyYW0gW2h0dHBzX3NyY11cblx0ICovXG5cdGV4cG9ydHMubG9hZFNjcmlwdCA9IGZ1bmN0aW9uKHVybCwgY2FsbGJhY2spIHtcblx0ICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHQgIF9oZWFkX25vZGUgPSBfaGVhZF9ub2RlIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG5cdCAgbm9kZS5hc3luYyA9IHRydWU7XG5cdFxuXHQgIGlmIChcIm9ubG9hZFwiIGluIG5vZGUpIHtcblx0ICAgIG5vZGUub25sb2FkID0gb25sb2FkO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgb25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICgvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KG5vZGUucmVhZHlTdGF0ZSkpIHtcblx0ICAgICAgICBvbmxvYWQoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIG5vZGUub25yZWFkeXN0YXRlY2hhbmdlID0gb25yZWFkeXN0YXRlY2hhbmdlO1xuXHRcblx0ICAgIC8vIOS4gOW8gOWni+S5n+WIpOaWreS4gOasoeeKtuaAgVxuXHQgICAgb25yZWFkeXN0YXRlY2hhbmdlKCk7XG5cdCAgfVxuXHRcblx0ICBub2RlLm9uZXJyb3IgPSBmdW5jdGlvbihlKSB7XG5cdCAgICBvbmxvYWQoZSk7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gb25sb2FkKGVycm9yKSB7XG5cdCAgICBub2RlLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG5vZGUub25sb2FkID0gbm9kZS5vbmVycm9yID0gbnVsbDtcblx0ICAgIG5vZGUgPSBudWxsO1xuXHRcblx0ICAgIGNhbGxiYWNrKGVycm9yKTtcblx0ICB9XG5cdFxuXHQgIG5vZGUuc3JjID0gdXJsO1xuXHQgIHNldE5vbmNlKG5vZGUpO1xuXHQgIF9oZWFkX25vZGUuYXBwZW5kQ2hpbGQobm9kZSk7ICBcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDliKTmlq3mmK/lkKbmlK/mjIF0b3VjaOS6i+S7tlxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXVxuXHQgKi9cblx0ZXhwb3J0cy5pc1RvdWNoID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuICdvbnRvdWNoZW5kJyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0fTtcblx0XG5cblxuLyoqKi8gfSksXG4vKiA1OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGVuX3RvX3NlbmQuanNcblx0ICpcblx0ICogICDkvZznlKjvvJog5L2V5pe25omn6KGMc2VuZHB25o+S5Lu2XG5cdCAqICAgZm46IGdldE1ldGFJbmZvIOe7p+aJv+iHs0Jhc2Vcblx0ICogICBmbjogcnVuICjmj5Lku7bmoIflh4bnmoTmiafooYzlhaXlj6MpXG5cdCAqICAgYXBsdXMtd2FpdGluZz1cIjFcIjog562J5b6FNuenkuWQjuWwneivleWPkemAgVBW5pel5b+XO1xuXHQgKiAgIGFwbHVzLXdhaXRpbmc9XCJNQU5cIjog5LiN6Ieq5Yqo5Y+R6YCBUFbml6Xlv5c7XG5cdCAqICAgYXBsdXMtd2FpdGluZz1cIm5cIjog5YW25LitbuS4uuWkp+S6jjHnmoTmraPmlbTmlbAsIGFwbHVz5Zyo562J5b6Fbuavq+enkuS5i+WQjuWwneivleWPkemAgVBW5pel5b+XO1xuXHQgKlxuXHQgKiAgIGRlcHPvvJog5pegXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOiOt+WPlm1ldGFfaW5mb1xuXHQgICAgICogVE9ETyDoi6Xku4rlkI7mnInliqjmgIHkv67mlLltZXRhX2luZm/nmoTpnIDmsYLvvIxcblx0ICAgICAqIOatpOWkhOmcgOimgeWKqOaAgeS7jiBtZXRhSW5mb+aooeWdl+S4reWOu+iwg+eUqGdldEluZm/mlrnms5XmnaXojrflj5bnm7jlhbPkv6Hmga/vvIzov5nmoLflgZrnmoTlnY/lpITmmK/mtojogJfmgKfog71cblx0ICAgICAqL1xuXHQgICAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvOyAvLyB8fCBtZXRhSW5mby5nZXRJbmZvKCk7XG5cdCAgICAgIHJldHVybiBtZXRhX2luZm87XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldEFwbHVzV2FpdGluZzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBtZXRhX2luZm8gPSB0aGlzLmdldE1ldGFJbmZvKCkgfHwge307XG5cdCAgICAgIHJldHVybiBtZXRhX2luZm9bJ2FwbHVzLXdhaXRpbmcnXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6PvvIzphY3nva7kuoZhcGx1c1dhaXRpbmcg5bm25LiUIOaYr2FwbHVz6Ieq5Yqo5omT54K55omN6LWw6L+Z5q616YC76L6RXG5cdCAgICAgKiA8bWV0YSBuYW1lPVwiYXBsdXMtd2FpdGluZ1wiIGNvbnRlbnQ9XCJ4eHhcIiAvPlxuXHQgICAgICogICB4eHg6ICdNQU4nIC0g5LiN5Y+R6YCBcHbnmoTmoIfor4Zcblx0ICAgICAqICAgeHh4OiAnMScgLSDlsJ3or5XnrYnlvoU256eS5ZCO5Y+RcHZcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybiBcImRvbmVcIijnu4jmraLkuK3pl7Tku7bmiafooYwpIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oc3RhdGUsIGNiKSB7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgYXBsdXNXYWl0aW5nID0gdGhpcy5nZXRBcGx1c1dhaXRpbmcoKTtcblx0ICAgICAgaWYgKGFwbHVzV2FpdGluZyAmJiBjb25maWcuaXNfYXV0bykge1xuXHQgICAgICAgIGFwbHVzV2FpdGluZyA9IHRoaXMuZ2V0QXBsdXNXYWl0aW5nKCkgKyAnJztcblx0ICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdiA9IHtcblx0ICAgICAgICAgIGFwbHVzV2FpdGluZzogYXBsdXNXYWl0aW5nXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBzd2l0Y2goYXBsdXNXYWl0aW5nKSB7XG5cdCAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fVVNFUl9JRDpcblx0ICAgICAgICBjYXNlIGFwbHVzU3RhdGljLl9BTk9OWV9JRDpcblx0ICAgICAgICBjYXNlICdNQU4nOlxuXHQgICAgICAgICAgcmV0dXJuICdkb25lJztcblx0ICAgICAgICBjYXNlICcxJzpcblx0ICAgICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2LmlzV2FpdCA9IHRydWU7XG5cdCAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgIGNiKCk7XG5cdCAgICAgICAgICB9LCA2MDAwKTtcblx0ICAgICAgICAgIHJldHVybiA2MDAwO1xuXHQgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICB2YXIgbiA9IGFwbHVzV2FpdGluZyAqIDE7XG5cdCAgICAgICAgICBpZiAoKG4gKyAnJykgIT09ICdOYU4nKSB7XG5cdCAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2LmlzV2FpdCA9IHRydWU7XG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgICBjYigpO1xuXHQgICAgICAgICAgICB9LCBuKTtcblx0ICAgICAgICAgICAgcmV0dXJuIG47XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH0sXG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDYwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3doZXJlX3RvX3NlbmQuanNcblx0ICpcblx0ICogICDkvZznlKjvvJp1bemAmumBk+S4i++8jOaUtumbhnB25Y+R6YCB5Y675ZCR5L+h5oGv77yI5Z+f5ZCN5Y+W5Yaz5LqO6YWN572u77yJXG5cdCAqICAgZm46IHJ1biAo5o+S5Lu25qCH5YeG55qE5omn6KGM5YWl5Y+jKVxuXHQgKiAgIOaciemFjee9rui/meS4quWFpeWPo1xuXHQgKiAgIDxtZXRhIG5hbWU9XCJhcGx1cy1yaG9zdC12XCIgY29udGVudD1cInh4eC54eHguY29tXCI+XG5cdCAqICAg5pe277yMUFbml6Xlv5dob3N05pS55Li65L2/55SoYXBsdXMtcmhvc3QtdiDmoIfnrb7lhoVjb250ZW505YaF5aOw5piO55qE5YC8XG5cdCAqXG5cdCAqICAgZGVwc++8muaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6ZKw5pitIDxjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyB2YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcblx0dmFyIHV0aWxVQSA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0dmFyIFBPU1QgPSAnUE9TVCc7XG5cdHZhciBHRVQgPSAnR0VUJztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICog6I635Y+WbWV0YV9pbmZvXG5cdCAgICAgKiBUT0RPIOiLpeS7iuWQjuacieWKqOaAgeS/ruaUuW1ldGFfaW5mb+eahOmcgOaxgu+8jFxuXHQgICAgICog5q2k5aSE6ZyA6KaB5Yqo5oCB5LuOIG1ldGFJbmZv5qih5Z2X5Lit5Y676LCD55SoZ2V0SW5mb+aWueazleadpeiOt+WPluebuOWFs+S/oeaBr++8jOi/meagt+WBmueahOWdj+WkhOaYr+a2iOiAl+aAp+iDvVxuXHQgICAgICovXG5cdCAgICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcblx0ICAgICAgcmV0dXJuIG1ldGFfaW5mbztcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0QXBsdXNNZXRhQnlLZXk6IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICB2YXIgbWV0YV9pbmZvID0gdGhpcy5nZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgICAgICByZXR1cm4gbWV0YV9pbmZvW2tleV07XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFJob3N0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBtZXRhVmFsdWUgPSB0aGlzLmdldEFwbHVzTWV0YUJ5S2V5KCdhcGx1cy1yaG9zdC12Jyk7XG5cdCAgICAgIHJldHVybiBtZXRhVmFsdWU7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldEhqbGpIb3N0VXJsOiBmdW5jdGlvbiAocmhvc3QpIHtcblx0ICAgICAgdmFyIHByZWZpeCA9IC9eXFwvXFwvLy50ZXN0KHJob3N0KSA/ICcnIDogJy8vJztcblx0ICAgICAgdmFyIGVuZGZpeCA9ICcvd2ViX2xvZ3MnO1xuXHQgICAgICB2YXIgdXJsID0gcHJlZml4ICsgcmhvc3QgKyBlbmRmaXg7XG5cdCAgICAgIHJldHVybiB1cmw7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFB2SG9zdFVybDogZnVuY3Rpb24gKHJob3N0KSB7XG5cdCAgICAgIHZhciBwcmVmaXggPSAvXlxcL1xcLy8udGVzdChyaG9zdCkgPyAnJyA6ICcvLyc7XG5cdCAgICAgIHZhciBlbmRmaXggPSAvXFwvJC8udGVzdChyaG9zdCkgPyAnJyA6ICcvJztcblx0XG5cdCAgICAgIHZhciBnaWYgPSAndi5naWYnO1xuXHQgICAgICBpZiAodXRpbFVBLmlzTW9iaWxlKCkpIHtcblx0ICAgICAgICBnaWYgPSAnbS5naWYnO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBwcmVmaXggKyByaG9zdCArIGVuZGZpeCArIGdpZjtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SG9zdFVybDogZnVuY3Rpb24gKHJob3N0KSB7XG5cdCAgICAgIHZhciBwcmVmaXggPSAvXlxcL1xcLy8udGVzdChyaG9zdCkgPyAnJyA6ICcvLyc7XG5cdCAgICAgIHZhciBlbmRmaXggPSAnL3dlYl9sb2dzJztcblx0ICAgICAgdmFyIHVybCA9IHByZWZpeCArIHJob3N0ICsgZW5kZml4O1xuXHQgICAgICByZXR1cm4gdXJsO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXRDaGFubmVsOiBmdW5jdGlvbiAoY2hhbm5lbCkge1xuXHQgICAgICB2YXIgYXBsdXNDaGFubmVsID0gdGhpcy5nZXRBcGx1c01ldGFCeUtleSgnYXBsdXMtY2hhbm5lbCcpO1xuXHQgICAgICB2YXIgY2hhbm5lbHMgPSBbJ1dTJywgJ1dTLU9OTFknLCBHRVQsIFBPU1RdO1xuXHRcblx0ICAgICAgdmFyIHJzO1xuXHQgICAgICBpZiAoY2hhbm5lbHMuaW5kZXhPZihjaGFubmVsKSA+IC0xKSB7XG5cdCAgICAgICAgcnMgPSBjaGFubmVsO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghcnMgJiYgY2hhbm5lbHMuaW5kZXhPZihhcGx1c0NoYW5uZWwpID4gLTEpIHtcblx0ICAgICAgICBycyA9IGFwbHVzQ2hhbm5lbDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcnM7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogaGpsauWPkemAgeWIsOWTqumHjOWOu1xuXHQgICAgICogMS4g5aaC5p6c5piv5Y2V5Y+R77yMaDXnmoTlj5HpgIHljrvlkJHpgLvovpHnm7TmjqXot7Pov4dcblx0ICAgICAqIDIuIHZhbGlkaXR5OlxuXHQgICAgICogICA8bWV0YSBuYW1lPVwiYXBsdXMtcmhvc3QtZ1wiIGNvbnRlbnQ9XCJnbS5tbXN0YXQuY29tXCIgLz5cblx0ICAgICAqICAg5pyJ5YC85LiU5ZCI5rOV5omN5L2/55So77yM5ZCm5YiZ55So6buY6K6k55qEZ20ubW1zdGF0LmNvbS93Z28ubW1zdGF0LmNvbVxuXHQgICAgICpcblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpOyAgICAgIFxuXHQgICAgICB2YXIgaXNfc2luZ2xlID0gISF0aGlzLm9wdGlvbnMuY29udGV4dC5pc19zaW5nbGU7XG5cdCAgICAgIGlmIChpc19zaW5nbGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHJlY29yZFR5cGUgPSB0aGlzLm9wdGlvbnMuY29uZmlnLnJlY29yZFR5cGU7XG5cdCAgICAgIHZhciByaG9zdCA9IHRoaXMuZ2V0Umhvc3QocmVjb3JkVHlwZSk7XG5cdCAgICAgIGlmICghcmhvc3QpIHtcblx0ICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICBtc2c6ICdjdXJyZW50IHJlcXVlc3QgZG9tYWluIGludmFsaWQsIHBsZWFzZSBjaGVjayB5b3VyIGFwbHVzLXJob3N0LXYgdmFsdWUgaW5zaWRlIG1ldGFpbmZvISdcblx0ICAgICAgICB9KTtcblx0ICAgICAgICByZXR1cm4gJ2RvbmUnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgdXJsO1xuXHQgICAgICBpZiAocmVjb3JkVHlwZSA9PT0gJ1BWJyAmJiAhYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuXHQgICAgICAgIHVybCA9IHRoaXMuZ2V0UHZIb3N0VXJsKHJob3N0KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB1cmwgPSB0aGlzLmdldEhqbGpIb3N0VXJsKHJob3N0KTtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBtZXRob2QgPSB0aGlzLmdldENoYW5uZWwoY29uZmlnLm1ldGhvZCkgfHwgUE9TVDtcblx0ICAgICAgaWYgKG1ldGhvZCA9PT0gUE9TVCAmJiAoIW5hdmlnYXRvciB8fCAhbmF2aWdhdG9yLnNlbmRCZWFjb24pKSB7XG5cdCAgICAgICAgbWV0aG9kID0gR0VUO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZCA9IGNvbmZpZy5tZXRob2Q7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQudXJsID0gdXJsO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogVUHliKTmlq3nm7jlhbPlt6Xlhbdcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLmlzTW9iaWxlID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIFVBID0gbmF2aWdhdG9yID8gbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICcnO1xuXHQgIHZhciBpc0FsaUFwcCA9IC9BbGlBcHB8WXVub3N8Y3ljbG9uZS9pLnRlc3QoVUEpOyAvLyDkupFPU+a1j+iniOWZqOWGheaguOS4umN5Y2xvbmVcblx0ICB2YXIgaXNJT1MgPSAoL2lQaG9uZXxpUGFkfGlQb2QvaSkudGVzdChVQSk7XG5cdCAgdmFyIGlzQW5kcm9pZCA9ICgvQW5kcm9pZC9pKS50ZXN0KFVBKTtcblx0ICB2YXIgaXNXaW5kb3dzUGhvbmUgPSAoL1dpbmRvd3MgUGhvbmUvaSkudGVzdChVQSkgfHwgKC9JRU1vYmlsZS9pKS50ZXN0KFVBKSB8fCAoL1dQRGVza3RvcC9pKS50ZXN0KFVBKTtcblx0ICB2YXIgaXNCbGFja0JlcnJ5ID0gKC9CbGFja0JlcnJ5L2kpLnRlc3QoVUEpO1xuXHQgIHZhciBpc09wZXJhTW9iaWxlID0gKC9PcGVyYSBNaW5pL2kpLnRlc3QoVUEpO1xuXHQgIHJldHVybiBpc0FsaUFwcCB8fCBpc0lPUyB8fCBpc0FuZHJvaWQgfHwgaXNXaW5kb3dzUGhvbmUgfHwgaXNCbGFja0JlcnJ5IHx8IGlzT3BlcmFNb2JpbGU7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hhdF90b19zZW5kLmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeWfuuehgOWPguaVsOaUtumbhu+8mlxuXHQgKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY29va2llID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciBsb2dJZCA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHV0aWxVQSA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbFBhcmFtcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldENvbW1vblBhcmFtczogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIGV0YWcgPSBjb250ZXh0LmV0YWcgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGEgfHwge307XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIC8vIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgcGxhdGZvcm1UeXBlID0gdXRpbFVBLmlzTW9iaWxlKCkgPyAnV0FQJyA6ICdQQyc7XG5cdCAgICAgIHZhciB1c2VySW5mbyA9IHtcblx0ICAgICAgICBfZGV2X2lkOiBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpLFxuXHQgICAgICAgIF9hbm9ueV9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSxcblx0ICAgICAgICBfdXNlcl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpLFxuXHQgICAgICAgIF91c2VyX25pY2s6IGFwbHVzLmdldE1ldGFJbmZvKCdfdXNlcl9uaWNrJykgfHwgY29va2llLmdldENvb2tpZSgndHJhY2tuaWNrJyksXG5cdCAgICAgICAgX3Nlc3Npb25faWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfc2Vzc2lvbl9pZCcpLFxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIHVybCA9IGNvbmZpZy5wYWdlVXJsIHx8IChsb2NhdGlvbiA/IGxvY2F0aW9uLmhyZWYgOiAnLScpO1xuXHQgICAgICB2YXIgdGl0bGUgPSBjb25maWcudGl0bGUgfHwgKGRvY3VtZW50ICYmIGRvY3VtZW50LnRpdGxlKTtcblx0ICAgICAgdmFyIGNhY2hlID0gKGFwbHVzLmdsb2JhbENvbmZpZy5pc0RlY29kZVVybCA/ICdEQ18nIDogJycpICsgbG9nSWQuZ2V0TG9nSWQodXJsLCB0aXRsZSk7XG5cdFxuXHQgICAgICB2YXIgYXBwSWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwS2V5JykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcElkJyk7XG5cdCAgICAgIGlmICghYXBwSWQpIHtcblx0ICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICBtc2c6ICdwbGVhc2Ugc2V0IGFwcElkIGluIGFwbHVzIG1ldGFJbmZvIGJlZm9yZSBzZW5kUFYhJ1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjb21tb25QYXJhbXMgPSB1dGlsRGFzaC5hc3NpZ24oe1xuXHQgICAgICAgIGFwcElkOiBhcHBJZCxcblx0ICAgICAgICBjYWNoZTogY2FjaGUsIC8vIGxvZ0lkLmdldExvZ0lkKHVybCwgdGl0bGUpLFxuXHQgICAgICAgIGNuYTogZXRhZy5jbmEgfHwgY29va2llLmdldENvb2tpZUNuYSgnY25hJyksXG5cdCAgICAgICAgZXRhZzogZXRhZyxcblx0ICAgICAgICBwcmU6IF8kLnBhZ2VfcmVmZXJyZXIgfHwgJy0nLCAvLyBUT0RPXG5cdCAgICAgICAgc2RrX2luZm86IHtcblx0ICAgICAgICAgIGpzdmVyOiBhcGx1cy5nbG9iYWxDb25maWcuc2NyaXB0X25hbWUsXG5cdCAgICAgICAgICBsdmVyOiBhcGx1cy5nbG9iYWxDb25maWcubHZlcixcblx0ICAgICAgICAgIGN1c3RvbVNka0lkOiBhcGx1cy5nZXRNZXRhSW5mbygnY3VzdG9tU2RrSWQnKSB8fCAnJyxcblx0ICAgICAgICAgIHBsYXRmb3JtVHlwZTogcGxhdGZvcm1UeXBlLnRvTG93ZXJDYXNlKCksXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0cmFja2VyRXZlbnRDb2RlOiBjb25maWcudHJhY2tlckV2ZW50Q29kZSxcblx0ICAgICAgICB0aXRsZTogdGl0bGUsXG5cdCAgICAgICAgdXJsOiB1cmwsXG5cdCAgICAgICAgY2xpZW50OiBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9LFxuXHQgICAgICAgIHRpbWVab25lOiB1dGlsUGFyYW1zLmdldFRpbWVab25lKCksXG5cdCAgICAgICAgZ29rZXk6IHVzZXJJbmZvLCAvLyB1dGlsRGFzaC5hc3NpZ24oc3BtSW5mbywgdXNlckluZm8pLFxuXHQgICAgICAgIGdta2V5OiB1c2VyZGF0YS5nbWtleSB8fCAnJyxcblx0ICAgICAgICBtZXRob2Q6IHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQubWV0aG9kXG5cdCAgICAgIH0sIHVzZXJJbmZvKTtcblx0ICAgICAgcmV0dXJuIGNvbW1vblBhcmFtcztcblx0ICAgIH0sXG5cdFxuXHRcblx0ICAgIGdldFB2UGFyYW1zOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIHZhciB0YXJnZXRVcmwgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLnVybDtcblx0ICAgICAgdmFyIGNvbW1vblBhcmFtcyA9IHRoaXMuZ2V0Q29tbW9uUGFyYW1zKCk7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICBpZiAoIXRoaXMub3B0aW9ucy5jb25maWcuaXNfYXV0bykge1xuXHQgICAgICAgIGNvbW1vblBhcmFtcy5zZGtfaW5mby5tYW5zbmRsb2cgPSAxO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gdXRpbERhc2guYXNzaWduKGNvbW1vblBhcmFtcywge1xuXHQgICAgICAgIGV2ZW50X2NvZGU6ICcyMDAxJyxcblx0ICAgICAgICBsb2d0eXBlOiAnMScsXG5cdCAgICAgICAgbG9na2V5OiB1dGlsVUEuaXNNb2JpbGUoKSA/ICcvbS5naWYnIDogJy92LmdpZicsXG5cdCAgICAgICAgZXZlbnRfdGltZXN0YW1wOiBhcGx1cy5fJC5zZW5kX3B2X2NvdW50ID4gMCA/IG5ldyBEYXRlKCkgOiBhcGx1cy5sb2dDb25maWcucGFnZUxvYWRUaW1lLFxuXHQgICAgICAgIGlzX2F1dG86IHRoaXMub3B0aW9ucy5jb25maWcuaXNfYXV0b1xuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SGpsalBhcmFtczogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSBjLnVzZXJkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgaGpsalBhcmFtcyA9IHtcblx0ICAgICAgICBldmVudF9jb2RlOiBhcGx1c1N0YXRpYy5FVkVOVF9JRF9NQVBbdXNlcmRhdGEuZ21rZXldIHx8IGFwbHVzU3RhdGljLk9USEVSLFxuXHQgICAgICAgIGxvZ3R5cGU6ICcyJyxcblx0ICAgICAgICBsb2drZXk6IHVzZXJkYXRhLmxvZ2tleSxcblx0ICAgICAgICBldmVudF90aW1lc3RhbXA6IG5ldyBEYXRlKCksXG5cdCAgICAgICAgLy8gbWFuc25kbG9nOiAnMScsXG5cdCAgICAgIH07XG5cdCAgICAgIHJldHVybiB1dGlsRGFzaC5hc3NpZ24odGhpcy5nZXRDb21tb25QYXJhbXMoKSwgaGpsalBhcmFtcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuXHQgICAgICogMi4gYmVhY29u5omp5bGV5Y+C5pWwOiBleHBhcmFtc1xuXHQgICAgICogMy4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlrqLmiLfnq6/lj4LmlbA6IGV4dHJhTGlzdFxuXHQgICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcblx0ICAgICAqIDQuIGxvY2FsU3RvcmFnZeS4reWtmOWCqOeahOS4iuS4gOmhtXNwbeS/oeaBrzogc3BtYWJ0ZXN0XG5cdCAgICAgKiDku6XkuIo06YOo5YiG5ou86KOF5oiQcHZkYXRhXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8fCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBwYXJhbXMgPSB7fTtcblx0ICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb25maWcucmVjb3JkVHlwZSA9PT0gJ1BWJykge1xuXHQgICAgICAgIHBhcmFtcyA9IHRoaXMuZ2V0UHZQYXJhbXMoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwYXJhbXMgPSB0aGlzLmdldEhqbGpQYXJhbXMoKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IHBhcmFtcztcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogcHZpZFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsSGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpO1xuXHRcblx0dmFyIGdldFJhbmRvbUlkID0gZnVuY3Rpb24gKHNpemUpIHtcblx0ICAvKipcblx0ICAgKiDnlJ/miJDmnKzpobXnmoQgcHYgaWRcblx0ICAgKiBwdiBpZCDlj6rpnIDopoHlvZPliY3nlKjmiLfkvJror53llK/kuIDljbPlj6/vvIzov5nlhL/kvb/nlKjkuIDkuKogNiDkvY3nmoQgMTYg6L+b5Yi25pWw5a2XXG5cdCAgICovXG5cdCAgdmFyIHJuZF9zdHJzID0gJyc7XG5cdCAgdmFyIGNoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcblx0ICB2YXIgaGFuZGxlZCA9IGZhbHNlO1xuXHQgIHZhciBjaGFyO1xuXHRcblx0ICAvKipcblx0ICAgKiDop6PlhrPpg6jliIYgc3BtIOiiqyBHRlcg5aKZ5LqG55qE5oOF5Ya177yM5aaCIDIyLmdsXG5cdCAgICog5o6S6ZmkIHB2aWQg5LulIGdsIOW8gOWktOeahOaDheWGtVxuXHQgICAqL1xuXHQgIGZ1bmN0aW9uIGhhbmRsZVBWSWQgKGNoYXJQb3MpIHtcblx0ICAgIHZhciBjaGFyc1dpdGhvdXRHID0gJzAxMjM0NTY3ODlhYmNkZWZoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGSElKS0xNTk9QUVJTVFVWV1hZWic7XG5cdCAgICB2YXIgY2hhcnNXaXRob3V0TCA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamttbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTU5PUFFSU1RVVldYWVonO1xuXHRcblx0ICAgIGlmIChjaGFyUG9zID09IDEpIHtcblx0ICAgICAgcmV0dXJuIGNoYXJzV2l0aG91dEcuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYwKSwgMSk7XG5cdCAgICB9IGVsc2UgaWYgKGNoYXJQb3MgPT0gMikge1xuXHQgICAgICByZXR1cm4gY2hhcnNXaXRob3V0TC5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiAnMCc7XG5cdCAgfTtcblx0XG5cdCAgd2hpbGUgKHJuZF9zdHJzLmxlbmd0aCA8IHNpemUpIHtcblx0ICAgIGNoYXIgPSBjaGFycy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjIpLCAxKTtcblx0ICAgIC8vIOWkhOeQhuiiq+WimeeahOaDheWGte+8jOebruWJjeWPqumSiOWvuWds5byA5aS055qEXG5cdCAgICBpZiAoIWhhbmRsZWQgJiYgcm5kX3N0cnMubGVuZ3RoIDw9IDIgJiYgKGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnZycgfHwgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJykpIHtcblx0ICAgICAgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PT0gMCAmJiBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG5cdCAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjUpIHtcblx0ICAgICAgICAgIGNoYXIgPSBoYW5kbGVQVklkKDEpO1xuXHQgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PSAxICYmIGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnbCcgJiYgcm5kX3N0cnMuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG5cdCAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMik7XG5cdCAgICAgICAgaGFuZGxlZCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJuZF9zdHJzICs9IGNoYXI7XG5cdCAgfVxuXHQgIHJldHVybiBybmRfc3Rycztcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGdldENoYXJzIChhcmdzLCBzaXplLCBkZWZhdWx0VmFsKSB7XG5cdCAgaWYgKGFyZ3MpIHtcblx0ICAgIHJldHVybiB1dGlsSGFzaC5oYXNoKGVuY29kZVVSSUNvbXBvbmVudChhcmdzKSkuc3Vic3RyKDAsIHNpemUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZGVmYXVsdFZhbDtcblx0ICB9XG5cdH1cblx0XG5cdGV4cG9ydHMuZ2V0TG9nSWQgPSBmdW5jdGlvbiAocGFnZVVybCwgbG9nTmFtZSkge1xuXHQgIHZhciByYW5kb204Q2hhcnMgPSBnZXRSYW5kb21JZCg4KTtcblx0ICB2YXIgcmFuZG9tNENoYXJzID0gcmFuZG9tOENoYXJzLnN1YnN0cigwLCA0KTtcblx0ICB2YXIgcmFuZG9tNkNoYXJzID0gcmFuZG9tOENoYXJzLnN1YnN0cigwLCA2KTtcblx0ICByZXR1cm4gW1xuXHQgICAgZ2V0Q2hhcnMocGFnZVVybCwgNCwgcmFuZG9tNENoYXJzKSxcblx0ICAgIGdldENoYXJzKGxvZ05hbWUsIDQsIHJhbmRvbTRDaGFycyksXG5cdCAgICByYW5kb202Q2hhcnNcblx0ICBdLmpvaW4oJycpO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8g5qC55o2u5a+G6ZKlc+WvueWtl+espuS4snN0cui/m+ihjOi9rOS5iVxuXHRleHBvcnRzLmhhc2ggPSBmdW5jdGlvbihzdHIsIHMpIHtcblx0ICB2YXIgZGVmX3YgPSAxMzE1NDIzOTExO1xuXHQgIHZhciBoYXNoID0gcyB8fCBkZWZfdiwgaSwgY2g7XG5cdCAgZm9yIChpID0gc3RyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBjaCA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHQgICAgaGFzaCBePSAoKGhhc2ggPDwgNSkgKyBjaCArIChoYXNoID4+IDIpKTtcblx0ICB9XG5cdCAgdmFyIHJzID0gKGhhc2ggJiAweDdGRkZGRkZGKS50b1N0cmluZygxNik7XG5cdCAgcmV0dXJuIHJzO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICog6L+U5ZueR01U5qC85byP55qE5pe25Yy677yM5aaC77yaR01UKzA1OjQ1LCBHTVQtMDc6MDAsIEdNVCswODowMFxuXHQgKi9cblx0ZXhwb3J0cy5nZXRUaW1lWm9uZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX3RpbWVab25lID0gLW5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSAvIDYwO1xuXHQgIHZhciBfYW5kID0gJysnO1xuXHQgIGlmIChfdGltZVpvbmUgPCAwKSB7XG5cdCAgICBfYW5kID0gJy0nO1xuXHQgIH1cblx0ICB2YXIgem9uZSA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkpO1xuXHQgIHZhciByZW1haW5kZXIgPSBNYXRoLmFicyhwYXJzZUludChfdGltZVpvbmUpIC0gX3RpbWVab25lKTtcblx0ICB2YXIgcmVtYWluZGVyWm9uZSA9ICcwMCc7XG5cdCAgaWYgKHJlbWFpbmRlciA+IDApIHtcblx0ICAgIHJlbWFpbmRlclpvbmUgPSA2MCAqIHJlbWFpbmRlcjtcblx0ICB9XG5cdCAgcmV0dXJuICdHTVQnICsgX2FuZCArICh6b25lID4gOSA/IHpvbmUgOiAoJzAnICsgem9uZSkpICsgJzonICsgcmVtYWluZGVyWm9uZTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDY2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3BsdWdpbnMvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGEuanNcblx0ICpcblx0ICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG5cdCAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBwdmRhdGHlkI7pnaLvvJpwdmRhdGEuY29uY2F0KHVzZXJkYXRhKVxuXHQgKiAgZGVwczogd2hhdF90b19zZW5kcHZcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nyk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG5cdCAgICAgKlxuXHQgICAgICogZ29rZXk6XG5cdCAgICAgKiAgIOi/meWdl+S4uuWvueWOhuWPsnVzZXJkYXRh5Lyg6YCS55qE5YW85a655YGa5rOV77yMVE9ET++8muaOqOWKqOW6lOeUqOaWueWPmOabtFxuXHQgICAgICogICDlupTnlKjmlrnkvKDpgJLnmoRnb2tleeagvOW8j+W6lOeUqOaWueiHquihjOWGs+Wumu+8jFxuXHQgICAgICogICAgIOWmgiBnb2tleT1cImE9MSZiPTJcIiDmiJYge1wiYVwiOlt7XCJrZXlcIjoyMDE2MTIyNjE1NTAsXCJ2YWx1ZVwiOjAuMX0se1wia2V5XCI6MjAxNjEyMjYxNjAwLFwidmFsdWVcIjowLjV9LHtcImtleVwiOjIwMTYxMjI2MTYxMCxcInZhbHVlXCI6MX1dfVxuXHQgICAgICogICDov5nlnZfpgLvovpHmmK/pgKDmiJBleHRlbmRhcmdz5YaF6YOo5Ye6546w5aSa5Liq5pac5p2g55qE5YWD5Ye277yB77yB77yBXG5cdCAgICAgKiBwYWdlX2lkOlxuXHQgICAgICogICDmnIlwYWdlX2lk5bCx5Zyoc3BtYuS4rea3u+WKoOWtkOWPguaVsFxuXHQgICAgICogICDml6BwYWdlX2lk5bCx5riF6Zmkc3BtYuS4reeahOWtkOWPguaVsFxuXHQgICAgICogc3BtX2NudFxuXHQgICAgICogICDmm7TmlLnlroxzcG1i5L2N6L+Y6ZyA6KaB5pu05pawc3BtX2NudCBA6LCL5aOrIGluIDIwMTgtMDMtMjAgIOS7peWFjXRvVVTnmoRzcG0tY2505Lii5aSx5YiG5qG25Y+3XG5cdCAgICAgKiDkuKrmgKfljJblj4LmlbDvvJpcblx0ICAgICAqICAgMS4gKGFwbHVz5qSN5YWlKTogPG1ldGEgbmFtZT1cImFwbHVzLWNwdmRhdGFcIiBjb250ZW50PVwiSlNPTnN0cmluZ1wiPlxuXHQgICAgICogICAyLiDmlrnms5XkvKDlhaU6IGFwbHVzLnNlbmRQVih7Q09ORklHfSwge1VTRVJEQVRFfSk7XG5cdCAgICAgKiDlj43kvZzlvIrnmoTmlofmoaPlrr3pq5g6IF9wdyxfcGhcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG5cdCAgICAgKi9cblx0ICAgIGdldFVzZXJkYXRhOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgZCA9IHt9O1xuXHRcblx0ICAgICAgaWYgKGNvbmZpZyAmJiAhY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgICBpZiAoY29uZmlnLmdva2V5KSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgZCA9IGZvcm1hdC5wYXJhbTJvYmooY29uZmlnLmdva2V5KTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICAgZCA9IGNvbmZpZy5nb2tleTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjb21ib1VzZXJkYXRhID0gZnVuY3Rpb24oX2RhdGEpIHtcblx0ICAgICAgICBpZihpc0FycmF5KF9kYXRhKSl7XG5cdCAgICAgICAgICBfZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuXHQgICAgICAgICAgICBkID0gdXRpbERhc2guYXNzaWduKGQsIGl0ZW0pO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfWVsc2V7XG5cdCAgICAgICAgICBkID0gdXRpbERhc2guYXNzaWduKGQsIF9kYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbGRhdGEnKSk7XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnKSk7XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGEgfHwge307XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEodXNlcmRhdGEpO1xuXHRcblx0ICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5aSE55CGXyTlhajlsYDlj5jph48gLS0tLS0tIDJcblx0ICAgICAqL1xuXHQgICAgcHJvY2Vzc0xvZGFzaERvbGxhcjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5yZWZlcnJlcikge1xuXHQgICAgICAgIF8kLnBhZ2VfcmVmZXJyZXIgPSBjb25maWcucmVmZXJyZXI7XG5cdCAgICAgIH1cblx0ICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5pu05pawcHJl77yI5Zyo6L+Z6YeM5YGa55qE5Y6f5Zug5piv77yMcHJl5Y+C5pWw5bGe5LqOYmFzaWPlj4LmlbDvvIzkvYbmmK91c2VyZGF0YeS4reWmguS8oOmAkuS6hnJlZmVycmVy77yM5Y+v5Lul6KaG55uWcHJl77yJXG5cdCAgICAgKi9cblx0ICAgIHVwZGF0ZVByZTogZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICBpZiAoXyQucGFnZV9yZWZlcnJlcikge1xuXHQgICAgICAgIGRhdGEucHJlID0gIF8kLnBhZ2VfcmVmZXJyZXI7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGRhdGE7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgZCA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhO1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSB1dGlsRGFzaC5hc3NpZ24odGhpcy5nZXRVc2VyZGF0YSgpLCBkLnVzZXJkYXRhIHx8IHt9KTtcblx0ICAgICAgdGhpcy5wcm9jZXNzTG9kYXNoRG9sbGFyKCk7XG5cdFxuXHQgICAgICBkLmdva2V5ID0gdXRpbERhc2guYXNzaWduKGQuZ29rZXksIHVzZXJkYXRhKTtcblx0ICAgICAgZCA9IHRoaXMudXBkYXRlUHJlKGQpO1xuXHRcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBkO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC51c2VyZGF0YSA9IGQuZ29rZXk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSkge1xuXHQgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAvQXJyYXkvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YV93ZWIuanNcblx0ICpcblx0ICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG5cdCAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBwdmRhdGHlkI7pnaLvvJpwdmRhdGEuY29uY2F0KHVzZXJkYXRhKVxuXHQgKiAgZGVwczogd2hhdF90b19zZW5kcHZcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEV4aW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpO1xuXHR2YXIgZ2V0RXhQYXJhbXNPYmogPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgLyoqXG5cdCAgICAgKiDlhbzlrrnljoblj7LnmoRwYWdlX2lkXG5cdCAgICAgKi9cblx0ICAgIGdldFBhZ2VJZDogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcblx0ICAgICAgcmV0dXJuIGNvbmZpZy5wYWdlX2lkIHx8IGNvbmZpZy5wYWdlaWQgfHwgY29uZmlnLnBhZ2VJZCB8fCB1c2VyZGF0YS5wYWdlX2lkO1xuXHQgICAgfSxcblx0XG5cdCAgICByZXNldFNwbUI6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIGlmICghYXBsdXMuc3BtQVBJKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBfc3BtID0gXyQuc3BtIHx8IHt9O1xuXHQgICAgICB2YXIgc3BtYiA9IF9zcG0uZGF0YS5iO1xuXHQgICAgICBpZiAoc3BtYikge1xuXHQgICAgICAgIHZhciBwYWdlX2lkID0gdGhpcy5nZXRQYWdlSWQoKTtcblx0ICAgICAgICBpZiAocGFnZV9pZCkge1xuXHQgICAgICAgICAgc3BtYiA9IHNwbWIuc3BsaXQoJy8nKVswXSArICcvJyArIHBhZ2VfaWQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHNwbWIgPSBzcG1iLnNwbGl0KCcvJylbMF07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGFwbHVzLnNwbUFQSSAmJiBhcGx1cy5zcG1BUEkuc2V0QihzcG1iKTtcblx0XG5cdCAgICAgICAgdmFyIGNudHMgPSBfc3BtLnNwbV9jbnQuc3BsaXQoJy4nKTtcblx0ICAgICAgICBpZiAoY250cyAmJiBjbnRzLmxlbmd0aCA+IDIpIHtcblx0ICAgICAgICAgIGNudHNbMV0gPSBzcG1iO1xuXHQgICAgICAgICAgX3NwbS5zcG1fY250ID0gY250cy5qb2luKCcuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgZ2V0RXhQYXJhbXNJbmZvOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBlID0gdXRpbEV4aW5mby5nZXRFeFBhcmFtcygpO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5leHBhcmFtcyA9IGU7XG5cdCAgICAgIHJldHVybiBnZXRFeFBhcmFtc09iaihlKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHRoaXMucmVzZXRTcG1CKCk7XG5cdCAgICAgIHZhciBnb2tleSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5O1xuXHQgICAgICBnb2tleSA9IGFzc2lnbih0aGlzLmdldEV4UGFyYW1zSW5mbygpLCBnb2tleSk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5ID0gZ29rZXk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0dmFyIGZvcm1hdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHV0aWxEb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KTtcblx0dmFyIHV0aWxBdHRyaWJ1dGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqXG5cdCAqIHBhcmFtIHRvIGFycmF5XG5cdCAqIDIwMTYtMDgtMjQg5pS+5byA77yM55So5p2l5aSE55CGZXhwYXJhbXMgQOiwi+Wjq1xuXHQgKiDlsIbkuIDkuKrnroDljZXnmoTlvaLlpoIgYT0xJmI9MiZjPTMg6L+Z5qC355qE5Y+C5pWw6L2s5YyW5Li6566A5Y2V55qEIGFycmF5IOagvOW8j++8jOWmgu+8mlxuXHQgKiBbW1wiYVwiLCBcIjFcIl0sIFtcImJcIiwgXCIyXCJdLCBbXCJjXCIsIFwiM1wiXV1cblx0ICpcblx0ICogQHBhcmFtIHBhcmFtcyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gcGFyYW0yYXJyIChwYXJhbXMpIHtcblx0ICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG5cdCAgICBpID0gMCwgbCA9IGEubGVuZ3RoLFxuXHQgICAgaXRlbSxcblx0ICAgIGFyciA9IFtdO1xuXHQgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpdGVtID0gYVtpXS5zcGxpdChcIj1cIik7XG5cdCAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYXJyO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOWwhm1ldGHphY3nva7nmoRleHBhcmFtc+WQiOW5tuWIsGJlYWNvbui+k+WHuueahGV4cGFyYW1z5LiKXG5cdCAqIEBwYXJhbXMge1N0cmluZ30gYmVhY29uRXhwYXJhbXNcblx0ICogQHBhcmFtcyB7U3RyaW5nfSBtZXRhRXhwYXJhbXNcblx0ICpcblx0ICogQHJldHVybiB7U3RyaW5nfSBleHBhcmFtc1xuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2VFeHBhcmFtcyAoYmVhY29uRXhwYXJhbXMsIG1ldGFFeHBhcmFtcykge1xuXHQgIHZhciBiZXhwYXJhbXMgPSAnYXBsdXMmc2lkeD1hcGx1c1NpZGV4JmNreD1hcGx1c0NreCc7XG5cdCAgdmFyIGRlZmF1bHRFeHBhcmFtcyA9IGJlYWNvbkV4cGFyYW1zIHx8IGJleHBhcmFtcztcblx0ICB0cnkge1xuXHQgICAgaWYgKG1ldGFFeHBhcmFtcykge1xuXHQgICAgICB2YXIgbWV0YU9iaiA9IGZvcm1hdC5wYXJhbTJvYmoobWV0YUV4cGFyYW1zKTtcblx0ICAgICAgdmFyIGJsYWNrcyA9IFthcGx1c1N0YXRpYy5BUExVUywgJ2NuYScsIGFwbHVzU3RhdGljLlNQTV9DTlQsIGFwbHVzU3RhdGljLlNQTV9VUkwsIGFwbHVzU3RhdGljLlNQTV9QUkUsICdsb2d0eXBlJywgJ3ByZScsICd1aWRhcGx1cycsICdhc2lkJywgJ3NpZHgnLCAndHJpZCcsICdnb2tleSddO1xuXHQgICAgICBlYWNoKGJsYWNrcywgZnVuY3Rpb24oaykge1xuXHQgICAgICAgIGlmIChtZXRhT2JqLmhhc093blByb3BlcnR5KGspKSB7XG5cdCAgICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7bXNnOiAnQ2FuIG5vdCBpbmplY3Qga2V5d29yZHM6ICcgKyBrfSk7XG5cdCAgICAgICAgICBkZWxldGUgbWV0YU9ialtrXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBkZWxldGUgbWV0YU9ialsnJ107IC8vIOepuueZvWtleeS5n+enu+mZpOaOiVxuXHRcblx0ICAgICAgdmFyIHRtcFBhcmFtID0gJyc7XG5cdCAgICAgIC8vIOaciWJlYWNvbumFjee9rueahOaDheWGtVxuXHQgICAgICBpZiAoYmVhY29uRXhwYXJhbXMpIHtcblx0ICAgICAgICB2YXIgaW5kZXggPSBiZWFjb25FeHBhcmFtcy5tYXRjaCgvYXBsdXMmLykuaW5kZXg7XG5cdCAgICAgICAgdmFyIGJlYWNvbk9iaiA9IGluZGV4ID4gMCA/IGZvcm1hdC5wYXJhbTJvYmooYmVhY29uRXhwYXJhbXMuc3Vic3RyaW5nKDAsIGluZGV4KSkgOiB7fTtcblx0ICAgICAgICBkZWxldGUgYmVhY29uT2JqWycnXTtcblx0ICAgICAgICB0bXBQYXJhbSA9IGZvcm1hdC5vYmoycGFyYW0odXRpbERhc2guYXNzaWduKGJlYWNvbk9iaiwgbWV0YU9iaikpICsgJyYnICsgYmVhY29uRXhwYXJhbXMuc3Vic3RyaW5nKGluZGV4LCBiZWFjb25FeHBhcmFtcy5sZW5ndGgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIOaXoGJlYWNvbumFjee9rueahOaDheWGtVxuXHQgICAgICAgIHRtcFBhcmFtID0gZm9ybWF0Lm9iajJwYXJhbShtZXRhT2JqKSArICcmJyArIGJleHBhcmFtcztcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdG1wUGFyYW07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gZGVmYXVsdEV4cGFyYW1zO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHJldHVybiBkZWZhdWx0RXhwYXJhbXM7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLm1lcmdlRXhwYXJhbXMgPSBtZXJnZUV4cGFyYW1zO1xuXHRcblx0XG5cdGZ1bmN0aW9uIGdldEV4UGFyYW1zRnJvbU1ldGEgKCkge1xuXHQgIHZhciBfJCA9IGFwbHVzICYmIGFwbHVzLl8kID8gYXBsdXMuXyQgOiB7fTtcblx0ICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvIHx8IHt9O1xuXHQgIHJldHVybiBtZXRhX2luZm9bJ2FwbHVzLWV4cGFyYW1zJ10gfHwgJyc7XG5cdH07XG5cdFxuXHQvLyBleHBhcmFtc+WPguaVsC0tLS0tLSAyXG5cdGZ1bmN0aW9uIGdldEV4UGFyYW1zICgpIHtcblx0ICB2YXIgY3VycmVudF9ub2RlID0gdXRpbERvbS5nZXRDdXJyZW50Tm9kZSgpO1xuXHQgIHZhciBiX2V4cGFyYW1zID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShjdXJyZW50X25vZGUsICdleHBhcmFtcycpO1xuXHQgIHZhciBleHBhcmFtcyA9IG1lcmdlRXhwYXJhbXMoYl9leHBhcmFtcywgZ2V0RXhQYXJhbXNGcm9tTWV0YSgpKSB8fCAnJztcblx0ICByZXR1cm4gZXhwYXJhbXMgJiYgZXhwYXJhbXMucmVwbGFjZSgvJmFtcDsvZywgXCImXCIpLnJlcGxhY2UoL1xcYnVzZXIoaXxJKWQ9LywgXCJ1aWRhcGx1cz1cIik7XG5cdH07XG5cdGV4cG9ydHMuZ2V0RXhQYXJhbXMgPSBnZXRFeFBhcmFtcztcblx0XG5cdC8qKlxuXHQgKiDlh7rkuo7mtYHph4/nmoTogIPomZHvvIxiZWFjb27ovpPlh7rnmoRleHBhcmFtc+WPquWPliBleHBhcmFtc19rZXlfbmFtZXPvvIjop4HphY3nva7vvIkg5YaF55qE5Yeg5Liq5a2X5q61XG5cdCAqIOiLpWV4cGFyYW1z5YaF5pyJdXNlcmlkIOaIluiAhSDlnKjlj5HpgIHnmoRQVumSn3VpZGFwbHVz5pyJ5YC8LCDliJnlnKjku6Tnrq3or7fmsYLnmoRnb2tleeWGheS5n+i/veWKoHVpZHBhbHVz5Y+C5pWwXG5cdCAqIOiLpWV4cGFyYW1z5YaF5pyJ5Lyg5YWlcGNfaS9wdV9pLCDliJnlnKjku6Tnrq3or7fmsYLnmoRnb2tleeWGheS5n+m7mOiupOi/veWKoHBjX2kvcHVfaeWPguaVsFxuXHQgKlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9IHJzXG5cdCAqL1xuXHRleHBvcnRzLmdldEV4cGFyYW1zSW5mb3MgPSBmdW5jdGlvbihleHBhcmFtc19rZXlfbmFtZXMsIG1ldGFfZXhpbmZvKSB7XG5cdCAgdmFyIHJzID0ge307XG5cdCAgdmFyIGtleXMgPSBleHBhcmFtc19rZXlfbmFtZXMgfHwgWyd1aWRhcGx1cycsICdwY19pJywgJ3B1X2knXTtcblx0ICB2YXIgdG1wX2luZm8gPSBnZXRFeFBhcmFtcygpIHx8ICcnO1xuXHQgIHRtcF9pbmZvID0gdG1wX2luZm8ucmVwbGFjZSgvJmFwbHVzJi8sICcmJyk7XG5cdCAgdmFyIHRtcF9hcnIgPSBwYXJhbTJhcnIodG1wX2luZm8pIHx8IFtdO1xuXHQgIFxuXHQgIHZhciBjb25mID0gZnVuY3Rpb24oaykge1xuXHQgICAgcmV0dXJuIHV0aWxBcnJheS5pbmRleG9mKGtleXMsIGspID4gLTE7XG5cdCAgfTsgIFxuXHQgIC8vIOWHuuS6jua1gemHj+eahOiAg+iZke+8jGJlYWNvbui+k+WHuueahGV4cGFyYW1z5Y+q5Y+WICBleHBhcmFtc19rZXlfbmFtZXPvvIjop4HphY3nva7vvInlhoXnmoTlh6DkuKrlrZfmrrVcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHRtcF9hcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciB0bXBfb2JqID0gdG1wX2FycltpXTtcblx0ICAgIHZhciBrID0gdG1wX29ialswXSB8fCAnJztcblx0ICAgIHZhciB2ID0gdG1wX29ialsxXSB8fCAnJztcblx0ICAgIGlmIChrICYmIHYgJiYgKG1ldGFfZXhpbmZvID09PSAnRVhQQVJBTVMnIHx8IGNvbmYoaykpKSB7XG5cdCAgICAgIHJzW2tdID0gdjtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJzO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDcwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGZvcm1hdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChleHBhcmFtcykge1xuXHQgIHZhciBycyA9IHt9O1xuXHQgIHRyeSB7XG5cdCAgICAvLyB2YXIgZXhwYXJhbXMgPSB1dGlsRXhpbmZvLmdldEV4UGFyYW1zKCk7XG5cdCAgICAvLyB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5leHBhcmFtcyA9IGV4cGFyYW1zO1xuXHQgICAgdmFyIHRtcE9iaiA9IGZvcm1hdC5wYXJhbTJvYmooZXhwYXJhbXMucmVwbGFjZSgvJmFtcDsvZywgJyYnKS5yZXBsYWNlKC9cXGJ1c2VyKGl8SSlkPS8sICd1aWRhcGx1cz0nKS5yZXBsYWNlKC8mYXBsdXMmLywgJyYnKSk7XG5cdCAgICAvLyDku4Xlj5YgWyd1aWRhcGx1cycsICdwY19pJywgJ3B1X2knXSDkuInkuKrlgLxcblx0ICAgIGlmICh0bXBPYmoudWlkYXBsdXMpIHtcblx0ICAgICAgcnMudWlkYXBsdXMgPSB0bXBPYmoudWlkYXBsdXM7XG5cdCAgICB9XG5cdCAgICBycy5wY19pID0gdG1wT2JqLnBjX2k7XG5cdCAgICBycy5wdV9pID0gdG1wT2JqLnB1X2k7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhlKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJzO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDcxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl9iL2NvbmZpZy9wbHVnaW5zL3doYXRfc2VuZHB2X3RvX3V0Mi5qc1xuXHQgKlxuXHQgKiAg5L2c55So77ya5aaC5p6c5b2T5YmN546v5aKD5ruh6LazdG9VVOadoeS7tu+8jOWImeWwhuaUtumbhuWPkemAgeiHs1VU55qE5Y+C5pWw77yMXG5cdCAqICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOWPguaVsOWtmOaUvuWIsOS4iuS4i+aWh+eOr+Wig+S4rTogY29udGV4dC53aGVyZV90b19zZW5kcHYucHZkYXRhVG9VVFxuXHQgKiAgZGVwczogIHdoZXJlX3RvX3NlbmRwdlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTsgXG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgY29va2llID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7XG5cdHZhciB1dGlsVXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKipcblx0ICog5riF55CG5omT54K55Y+C5pWwXG5cdCAqIOWwhuaJgOacieWAvOS4uuepuueahOWPguaVsOWOu+aOie+8iGFwbHVz6Zmk5aSW77yJ77ybXG5cdCAqIOWmguaenOaciemHjeWkjeeahOWPguaVsO+8jOWPquS/neeVmeacgOWQjuS4gOS4qlxuXHQgKiBAcGFyYW0gZGF0YSB7QXJyYXl9XG5cdCAqL1xuXHRmdW5jdGlvbiBjbGVhblBhcmFtcyhkYXRhKSB7XG5cdCAgdmFyIG5ld19wYXJhbXMgPSBbXTtcblx0ICB2YXIgaTtcblx0ICB2YXIgaXRlbTtcblx0ICB2YXIga2V5cyA9IHt9O1xuXHQgIHZhciBrO1xuXHQgIHZhciB2O1xuXHRcblx0ICBmb3IgKGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBpdGVtID0gZGF0YVtpXTtcblx0ICAgIGsgPSBpdGVtWzBdO1xuXHQgICAgaWYgKGsgJiYgay5pbmRleE9mKHV0aWwuc19wbGFpbl9vYmopID09IC0xICYmIGtleXMuaGFzT3duUHJvcGVydHkoaykpIGNvbnRpbnVlO1xuXHQgICAgdiA9IGl0ZW1bMV07XG5cdCAgICBpZiAoayA9PSAnYXBsdXMnIHx8IHYpIHtcblx0ICAgICAgbmV3X3BhcmFtcy51bnNoaWZ0KFtrLCB2XSk7XG5cdCAgICAgIGtleXNba10gPSAxO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5ld19wYXJhbXM7XG5cdH07XG5cdFxuXHQvKipcblx0ICog5riF55CGdG9VVOaJk+eCueWPguaVsO+8jOWOu+mZpO+8mlxuXHQgKiBsb2d0eXBlXG5cdCAqIGNhY2hlXG5cdCAqIHNjclxuXHQgKiA6Oi1wbGFpbi14eHhcblx0ICogc3BtLWNudFxuXHQgKiBAcGFyYW0gZGF0YVxuXHQgKi9cblx0ZnVuY3Rpb24gY2xlYW5QYXJhbXNGb3JUb1VUKGRhdGEpIHtcblx0ICB2YXIgbmV3X3BhcmFtcyA9IFtdLFxuXHQgICAgaSxcblx0ICAgIGl0ZW0sXG5cdCAgICBrLCB2LFxuXHQgICAgZXhjbHVkZVBhcm1zID0ge1xuXHQgICAgICBcImxvZ3R5cGVcIjogdHJ1ZSxcblx0ICAgICAgXCJjYWNoZVwiOiB0cnVlLFxuXHQgICAgICBcInNjclwiOiB0cnVlLFxuXHQgICAgICBcInNwbS1jbnRcIjogdHJ1ZVxuXHQgICAgfTtcblx0XG5cdCAgZm9yIChpID0gZGF0YS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgaXRlbSA9IGRhdGFbaV07XG5cdCAgICBrID0gaXRlbVswXTtcblx0ICAgIHYgPSBpdGVtWzFdO1xuXHQgICAgaWYgKCh1dGlsRGFzaC5pc1N0YXJ0V2l0aChrLCB1dGlsLnNfcGxhaW5fb2JqKSAmJiAhdXRpbERhc2guaXNTdGFydFdpdGgoaywgdXRpbC5ta1BsYWluS2V5Rm9yRXhwYXJhbXMoKSkpIHx8IGV4Y2x1ZGVQYXJtc1trXSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0ICAgIC8vIDIwMTYtMDgtMjQg55Cs5a2Q6ZyA5rGC77yMZXhwYXJhbXPljZXni6zlpITnkIbvvIx3aW5kdmFuZemHjOmcgOimgSBA6LCL5aOrXG5cdCAgICBpZiAodXRpbERhc2guaXNTdGFydFdpdGgoaywgdXRpbC5ta1BsYWluS2V5Rm9yRXhwYXJhbXMoKSkpIHtcblx0ICAgICAgdmFyIGV4cGFyYW1zQXJyID0gdXRpbC5wYXJhbTJhcnIodik7XG5cdCAgICAgIGlmICh0eXBlb2YgZXhwYXJhbXNBcnIgPT09ICdvYmplY3QnICYmIGV4cGFyYW1zQXJyLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBmb3IgKHZhciBqID0gZXhwYXJhbXNBcnIubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0ICAgICAgICAgIHZhciBlSXRlbSA9IGV4cGFyYW1zQXJyW2pdO1xuXHQgICAgICAgICAgLy8g56m65YC85LiN6ZyA6KaBXG5cdCAgICAgICAgICBpZiAoZUl0ZW0gJiYgZUl0ZW1bMV0pIHtcblx0ICAgICAgICAgICAgbmV3X3BhcmFtcy51bnNoaWZ0KFtlSXRlbVswXSwgZUl0ZW1bMV1dKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdCAgICBuZXdfcGFyYW1zLnVuc2hpZnQoW2ssIHZdKTtcblx0ICB9XG5cdCAgcmV0dXJuIG5ld19wYXJhbXM7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvLyAvLyDliJ3lp4vljJbmqKHlnZdcblx0ICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgIC8vIH0sXG5cdFxuXHQgICAgLy8g5YWz6ZSu6K+N5LiN5YWB6K645bqU55So5pa56KaG55uWXG5cdCAgICBrZXlJc0F2YWlsYWJsZTogZnVuY3Rpb24oaykge1xuXHQgICAgICB2YXIgYmxhY2tzID0gWydmdW5jdHlwZScsICdmdW5jSWQnLCAnc3BtLWNudCcsICdzcG0tdXJsJywgJ3NwbS1wcmUnLCAnX2lzaDUnLCAnX2lzX2cydScsICdfaDV1cmwnLCAnY25hJywgJ2lzb25lcGFnZScsICdsdmVyJywgJ2pzdmVyJ107XG5cdCAgICAgIGlmKHV0aWxBcnJheS5pbmRleG9mKGJsYWNrcywgaykgPT09IC0xKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyDlt7Lnu4/lkoxVVOe6puWumuWlve+8jOS8oOmAkue7mVVU55qE5LqM57qn5Y+C5pWw5Y+q5pSv5oyB5Z+65pys5pWw5o2u57G75Z6L77yM5LiN5pSv5oyB5a+56LGhXG5cdCAgICB2YWxJc0F2YWlsYWJsZTogZnVuY3Rpb24odikge1xuXHQgICAgICBpZiAodHlwZW9mIHYgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSxcblx0XG5cdCAgICB1cFV0RGF0YTogZnVuY3Rpb24oZCwgb2JqKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIGQgPSBkID8gZCA6IHt9O1xuXHQgICAgICBpZiAob2JqICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgZm9yICh2YXIgayBpbiBvYmopIHtcblx0ICAgICAgICAgIHZhciB2ID0gb2JqW2tdO1xuXHQgICAgICAgICAgaWYoayAmJiBfc2VsZi52YWxJc0F2YWlsYWJsZSh2KSAmJiBfc2VsZi5rZXlJc0F2YWlsYWJsZShrKSkge1xuXHQgICAgICAgICAgICBkW2tdID0gdjsgLy8g6Ieq5a6a5LmJ5Y+C5pWw57uf57uf6ZyA6KaB5YqgXCJfXCLliY3nvIBcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldFRvVXREYXRhOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcblx0ICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGNvbnRleHQud2hhdF90b19zZW5kIHx8IHt9O1xuXHQgICAgICB2YXIgbG9nZGF0YSA9IHdoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgc2RrX2luZm8gPSBsb2dkYXRhLnNka19pbmZvIHx8IHt9O1xuXHQgICAgICB2YXIgZXRhZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcgfHwge307XG5cdFxuXHQgICAgICB2YXIgZXhwYXJhbXMgPSBjbGVhblBhcmFtc0ZvclRvVVQoY2xlYW5QYXJhbXMobG9nZGF0YS5leHBhcmFtcyB8fCBbXSkpO1xuXHQgICAgICBleHBhcmFtcyA9IHV0aWwuYXJyMm9iaihleHBhcmFtcyk7XG5cdCAgICAgIC8vIHZhciB1c2VyZGF0YSA9IGNsZWFuUGFyYW1zRm9yVG9VVChjbGVhblBhcmFtcyhjb250ZXh0LnVzZXJkYXRhIHx8IFtdKSk7XG5cdCAgICAgIC8vIHVzZXJkYXRhID0gdXRpbC5hcnIyb2JqKHVzZXJkYXRhKTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YTtcblx0ICAgICAgdmFyIHBhZ2V1cmwgPSBsb2NhdGlvbi5ocmVmO1xuXHRcblx0ICAgICAgdmFyIGQgPSB7XG5cdCAgICAgIH07XG5cdCAgICAgIC8vIC0tLS0yMDE3MDMyNyBhcGx1c+aWsOWinumcgOaxgiBA5Lmd6ZShKDAyNzcxNylcblx0ICAgICAgLy8gMS7CoGFwbHVz5aKe5YqgIHNjbeOAgSBpc3NiPTEo5aaC5p6cdXJs5ZCO6Z2i5pyJcG9pbnTlj4LmlbDvvInjgIEgcGcxc3RlcGsg5LiJ5Liq5Y+C5pWw77yM6L+Z5LiJ5Liq5Y+C5pWw6YO95raJ5Y+KVVJM5Y+C5pWw6Kej5p6QXG5cdCAgICAgIHZhciBzY20gPSB1dGlsVXJsLmdldFBhcmFtRnJvbVVybCgnc2NtJywgcGFnZXVybCkgfHwgJyc7XG5cdCAgICAgIGlmIChzY20pIHtcblx0ICAgICAgICBkWydzY20nXSA9IHNjbTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcGcxc3RlcGsgPSB1dGlsVXJsLmdldFBhcmFtRnJvbVVybCgncGcxc3RlcGsnLCBwYWdldXJsKSB8fCAnJztcblx0ICAgICAgaWYgKHBnMXN0ZXBrKSB7XG5cdCAgICAgICAgZFsncGcxc3RlcGsnXSA9IHBnMXN0ZXBrO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBwb2ludCA9IHV0aWxVcmwuZ2V0UGFyYW1Gcm9tVXJsKCdwb2ludCcsIHBhZ2V1cmwpIHx8ICcnO1xuXHQgICAgICBpZiAocG9pbnQpIHtcblx0ICAgICAgICBkWydpc3NiJ10gPSAxO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChzZGtfaW5mbyAmJiBzZGtfaW5mby5tYW5zbmRsb2cpIHtcblx0ICAgICAgICBkLm1hbnNuZGxvZyA9IHNka19pbmZvLm1hbnNuZGxvZztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZCA9IHRoaXMudXBVdERhdGEoZCwgZXhwYXJhbXMpOyAgLy8gYmVhY29u5Z+L54K555qE5bqU55So5Y+C5pWwXG5cdCAgICAgIGQgPSB0aGlzLnVwVXREYXRhKGQsIGxvZ2RhdGEuZ29rZXkpO1xuXHQgICAgICBkID0gdGhpcy51cFV0RGF0YShkLCB1c2VyZGF0YSk7ICAvLyDlupTnlKjmlrnpgJrov4dzZW5kUFbmjqXlj6PkvKDpgJLnmoRwduWPguaVsFxuXHRcblx0ICAgICAgLy8g5Y+C5pWw57G75Z6L5LiA77ya6ZyA6KaBVVTnibnmrorlpITnkIbnmoTvvIhmdW5jdHlwZe+8jGZ1bmNJZO+8jHVybO+8jGxvZ2tlee+8iVxuXHQgICAgICBkLmZ1bmN0eXBlID0gJ3BhZ2UnO1xuXHQgICAgICBkLmZ1bmNJZCA9ICcyMDAxJztcblx0ICAgICAgaWYgKGFwbHVzICYmIGFwbHVzLmdsb2JhbENvbmZpZyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICBkLnVybCA9IChsb2NhdGlvbi5wcm90b2NvbCB8fCAnaHR0cHM6JykgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lOyAvLyBsb2NhdGlvbi5vcmlnaW4gKyBsb2NhdGlvbi5wYXRobmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBkLnVybCA9IGxvY2F0aW9uLmhyZWY7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIOWPguaVsOexu+Wei+S6jO+8muS4jemcgOimgVVU54m55q6K5aSE55CG55qE77yI5YW25LuWYXBsdXPoh6rlrprkuYlrZXlcXHZhbHVl77yJa2V56ZyA6KaB5LiL5YiS57q/5byA5aS0XG5cdCAgICAgIGQuX2lzaDUgPSAnMSc7ICAgIC8vIFVU5b+F6aG755qE5bGe5oCn77yM5YaZ5q275Y2z5Y+vXG5cdCAgICAgIGQuX2g1dXJsID0gcGFnZXVybDtcblx0ICAgICAgZC5fdG9VVCA9IDI7XG5cdCAgICAgIGQuX2JyaWRnZU5hbWUgPSAnV2luZFZhbmUnO1xuXHQgICAgICBkLl9icmlkZ2VWZXJzaW9uID0gJzMuMC40Jztcblx0XG5cdCAgICAgIC8vIOWPguaVsOexu+Wei+S4ie+8muS4jemcgOimgVVU54m55q6K5aSE55CG77yM5LiUa2V55peg5LiL5YiS57q/5YmN57yAXG5cdCAgICAgIGlmIChzcG0uc3BtX2NudCkgZFthcGx1c1N0YXRpYy5TUE1fQ05UXSA9IHNwbS5zcG1fY250IHx8ICcnO1xuXHQgICAgICBpZiAoc3BtLnNwbV91cmwpIGRbYXBsdXNTdGF0aWMuU1BNX1VSTF0gPSBzcG0uc3BtX3VybCB8fCAnJztcblx0ICAgICAgaWYgKHNwbS5zcG1fcHJlKSBkW2FwbHVzU3RhdGljLlNQTV9QUkVdID0gc3BtLnNwbV9wcmUgfHwgJyc7XG5cdFxuXHQgICAgICBkLmNuYSA9IGV0YWcuY25hIHx8IGNvb2tpZS5nZXRDb29raWVDbmEoJ2NuYScpO1xuXHQgICAgICBkLmx2ZXIgPSBzZGtfaW5mby5sdmVyO1xuXHQgICAgICBkLmpzdmVyID0gc2RrX2luZm8uanN2ZXI7XG5cdCAgICAgIGQucHZlciA9ICcxLjAuMCc7XG5cdCAgICAgIGQuaXNvbmVwYWdlID0gLTE7XG5cdCAgICAgIHZhciB1dHBhcmFtQ250ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXV0cGFyYW0nKTtcblx0ICAgICAgaWYgKHV0cGFyYW1DbnQpIHtcblx0ICAgICAgICBkWyd1dHBhcmFtLWNudCddID0gSlNPTi5zdHJpbmdpZnkodXRwYXJhbUNudCk7XG5cdCAgICAgIH1cblx0ICAgICAgZC5faXNfZzJ1XyA9IDE7XG5cdCAgICAgIGQuX3Nsb2cgPSAxO1xuXHQgICAgICByZXR1cm4gZDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBwduWPkemAgeWIsOWTqumHjOWOu1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGMud2hhdF90b19zZW5kIHx8IHt9O1xuXHQgICAgICB3aGF0X3RvX3NlbmQucHZkYXRhVG9VdCA9IHRoaXMuZ2V0VG9VdERhdGEoKTtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kID0gd2hhdF90b19zZW5kO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5qCH5YeG5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gdmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJy4vdXRpbEFycmF5Jyk7XG5cdC8vIHZhciBmb3JtYXQgPSByZXF1aXJlKCcuL2Zvcm1hdCcpO1xuXHRcblx0dmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6Jztcblx0ZXhwb3J0cy5ta1BsYWluS2V5ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBzX3BsYWluX29iaiArIE1hdGgucmFuZG9tKCk7XG5cdH07XG5cdGV4cG9ydHMuc19wbGFpbl9vYmogPSBzX3BsYWluX29iajtcblx0XG5cdC8vIDIwMTYtMDgtMjQg55Cs5a2Q6ZyA5rGC77yMZXhwYXJhbXPljZXni6zlpITnkIbvvIx3aW5kdmFuZemHjOmcgOimgSBA6LCL5aOrXG5cdGV4cG9ydHMubWtQbGFpbktleUZvckV4cGFyYW1zID0gZnVuY3Rpb24oa2V5X3ByZWZpeCkge1xuXHQgIHZhciBfa2V5ID0ga2V5X3ByZWZpeCB8fCBzX3BsYWluX29iajtcblx0ICByZXR1cm4gX2tleSArICdleHBhcmFtcyc7XG5cdH07XG5cdFxuXHQvKipcblx0ICogYXJyYXkgdG8gcGFyYW1cblx0ICog5bCG5LiA5Liq566A5Y2V55qE5pWw57uE6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI/vvIxcblx0ICog5YW25Lit5pWw57uE5Li6XG5cdCAqICAgICAgW1trMSwgdjFdLCBbazIsIHYyXSwgW2szLCB2M10sIC4uLl1cblx0ICog55qE5b2i5byP44CCXG5cdCAqIOS4jiBvYmoycGFyYW0g55u45q+U77yM6L+Z5Liq5pa55rOV55qE5aW95aSE5piv5Y+v5Lul5L+d6K+B5pyA5ZCO5Y+C5pWw55qE6aG65bqPXG5cdCAqIEBwYXJhbSBhcnIge0FycmF5fVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiBhcnIycGFyYW0oYXJyKSB7XG5cdCAgdmFyIGEgPSBbXSxcblx0ICAgIGssXG5cdCAgICB2LFxuXHQgICAgaSxcblx0ICAgIGxlbiA9IGFyci5sZW5ndGg7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgayA9IGFycltpXVswXTtcblx0ICAgIHYgPSBhcnJbaV1bMV07XG5cdCAgICBhLnB1c2goay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMCA/IHYgOiAoayArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2KSkpO1xuXHQgIH1cblx0ICByZXR1cm4gYS5qb2luKCcmJyk7XG5cdH07XG5cdGV4cG9ydHMuYXJyMnBhcmFtID0gYXJyMnBhcmFtO1xuXHRcblx0XG5cdC8qKlxuXHQgKiBwYXJhbSB0byBhcnJheVxuXHQgKiAyMDE2LTA4LTI0IOaUvuW8gO+8jOeUqOadpeWkhOeQhmV4cGFyYW1zIEDosIvlo6tcblx0ICog5bCG5LiA5Liq566A5Y2V55qE5b2i5aaCIGE9MSZiPTImYz0zIOi/meagt+eahOWPguaVsOi9rOWMluS4uueugOWNleeahCBhcnJheSDmoLzlvI/vvIzlpoLvvJpcblx0ICogW1tcImFcIiwgXCIxXCJdLCBbXCJiXCIsIFwiMlwiXSwgW1wiY1wiLCBcIjNcIl1dXG5cdCAqXG5cdCAqIEBwYXJhbSBwYXJhbXMge1N0cmluZ31cblx0ICovXG5cdGV4cG9ydHMucGFyYW0yYXJyID0gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgIHZhciBhID0gcGFyYW1zLnNwbGl0KFwiJlwiKSxcblx0ICAgIGkgPSAwLCBsID0gYS5sZW5ndGgsXG5cdCAgICBpdGVtLFxuXHQgICAgYXJyID0gW107XG5cdCAgZm9yICg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGl0ZW0gPSBhW2ldLnNwbGl0KFwiPVwiKTtcblx0ICAgIGFyci5wdXNoKFtpdGVtLnNoaWZ0KCksIGl0ZW0uam9pbihcIj1cIildKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBhcnI7XG5cdH07XG5cdFxuXHRleHBvcnRzLmFycjJvYmogPSBmdW5jdGlvbiAoYXJyKSB7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIHZhciBrO1xuXHQgIHZhciB2O1xuXHQgIHZhciBpO1xuXHQgIHZhciBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgcmV0W2tdID0gdjtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0Ly8g5LuF5pSv5oyB5LiA57qnanNvbue7k+aehFxuXHRleHBvcnRzLmpzb25MaWtlU3RyMkpTT04gPSBmdW5jdGlvbihqc29uU3RyKSB7XG5cdCAgaWYgKCFqc29uU3RyIHx8IHR5cGVvZiBqc29uU3RyICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHt9O1xuXHQgIH1cblx0ICB2YXIgc3RyID0ganNvblN0ci5yZXBsYWNlKC9bJ1wie31dKy9nLCAnJyk7XG5cdCAgdmFyIGFycjEgPSBzdHIuc3BsaXQoJywnKTsgXG5cdCAgdmFyIGFycjIgPSBbXTsgXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIxLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBhcnIyLnB1c2goYXJyMVtpXS5zcGxpdCgnOicpKTtcblx0ICB9XG5cdCAgdmFyIHJlc3VsdCA9IHRoaXMuYXJyMm9iaihhcnIyKTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jYW4yaHR0cHMgPSBmdW5jdGlvbih1cmwpIHtcblx0ICBpZiAodXJsLmluZGV4T2YoJy8vJykgPT09IDApIHtcblx0ICAgIHZhciBwcm90b2NhbCA9ICdodHRwczonO1xuXHQgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG5cdCAgICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAgIH1cblx0ICAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuXHQgIH1cblx0ICByZXR1cm4gdXJsO1xuXHR9O1xuXHQgXG5cdGV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDczICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogd2hhdF90b19zZW5kcHZfdW0ybmF0aXZlLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICog5L2c55So77yaIOahpeaOpeWGheW1jOaDheWGteS4i++8jHVt5pel5b+X5Y2P6K6u5Y+R6YCBUFbml6Xlv5fnu5luYXRpdmVcblx0ICogXG5cdCAqIGRlcHM6IOaXoFxuXHQgKiBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICogXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBnZXRUb05hdGl2ZURhdGE6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAvLyB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICAvLyB2YXIgc3BtID0gXyQuc3BtIHx8IHt9O1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IHV0aWxEYXNoLmNsb25lRGVlcChjb250ZXh0LnVzZXJkYXRhKSB8fCB7fTtcblx0ICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGNvbnRleHQud2hhdF90b19zZW5kIHx8IHt9O1xuXHQgICAgICB2YXIgbG9nZGF0YSA9IHdoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgc2RrX2luZm8gPSBsb2dkYXRhLnNka19pbmZvIHx8IHt9O1xuXHQgICAgICB2YXIgZXRhZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcgfHwge307XG5cdFxuXHQgICAgICB2YXIgcmVzdWx0ID0ge30gLHNka0FyZ3MgPSB7fSwgY3VzdG9tQXJncyA9IHt9O1xuXHQgICAgICBzZGtBcmdzLmNuYSA9IGV0YWcuY25hO1xuXHQgICAgICBzZGtBcmdzLmx2ZXIgPSBzZGtfaW5mby5sdmVyO1xuXHQgICAgICBzZGtBcmdzLmpzdmVyID0gc2RrX2luZm8uanN2ZXI7XG5cdCAgICAgIHNka0FyZ3MuaWQgPSBhcGx1c1N0YXRpYy5QQUdFX1NUQVJUO1xuXHQgICAgICBzZGtBcmdzLnRzID0gRGF0ZS5ub3coKTsgLy/lkozoo7h3ZWLkvqfkvJrmnInlt67lvIJcblx0ICAgICAgc2RrQXJncy5yID0gbG9nZGF0YS5hcmcxIHx8IGxvZ2RhdGEubG9na2V5IHx8ICctJztcblx0ICAgICAgc2RrQXJncy5pc19oNSA9ICcxJztcblx0XG5cdCAgICAgIGlmICh1c2VyZGF0YS5oYXNPd25Qcm9wZXJ0eSgnYXV0b3NlbmQnKSkge1xuXHQgICAgICAgIHNka0FyZ3MuaXNfYXV0byA9IDE7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2RrQXJncy5pc19hdXRvID0gMDtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgY3VzdG9tQXJncyA9IHV0aWxEYXNoLmNsb25lRGVlcCh1dGlscy5kZWxldGVJbmZvKHVzZXJkYXRhLCBbXG5cdCAgICAgICAgJ19hbm9ueV9pZCcsICdfZGV2X2lkJywgJ19zZXNzaW9uX2lkJywgJ19zcmNfcG9zX2lkJyxcblx0ICAgICAgICAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaydcblx0ICAgICAgXSkpO1xuXHRcblx0ICAgICAgaWYgKGN1c3RvbUFyZ3MuZHVyYXRpb24pIHtcblx0ICAgICAgICBzZGtBcmdzLmR1cmF0aW9uID0gY3VzdG9tQXJncy5kdXJhdGlvbjtcblx0ICAgICAgICBkZWxldGUgY3VzdG9tQXJncy5kdXJhdGlvbjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGN1c3RvbUFyZ3MucGFnZV9zdGFydCkge1xuXHQgICAgICAgIHNka0FyZ3MucGFnZV9zdGFydCA9IGN1c3RvbUFyZ3MucGFnZV9zdGFydDtcblx0ICAgICAgICBkZWxldGUgY3VzdG9tQXJncy5wYWdlX3N0YXJ0O1xuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBpZiAobG9nZGF0YS51cmwpIHtcblx0ICAgICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgY3VzdG9tQXJncy5zcG1CIHx8IGN1c3RvbUFyZ3MucGFnZV9uYW1lIHx8IGxvZ2RhdGEudXJsIHx8ICctJztcblx0ICAgICAgICBzZGtBcmdzLnVybCA9IGxvZ2RhdGEudXJsIHx8ICctJztcblx0ICAgICAgICBzZGtBcmdzWydzcG0tY250J10gPSBlbmNvZGVVUklDb21wb25lbnQoc2RrQXJncy5wYWdlX25hbWUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAobG9nZGF0YS5wcmUpIHtcblx0ICAgICAgICBzZGtBcmdzLnJlZl91cmwgPSBsb2dkYXRhLnByZSB8fCAnLSc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGlmIChjdXN0b21BcmdzLnBhZ2VfbmFtZSkge1xuXHQgICAgICAvLyAgIGRlbGV0ZSBjdXN0b21BcmdzLnBhZ2VfbmFtZTtcblx0ICAgICAgLy8gfVxuXHQgICAgICBpZiAoY3VzdG9tQXJncy50cykge1xuXHQgICAgICAgIC8vIOWIoOmZpG5hdGl2ZeS/neeVmeWtl+autXRzXG5cdCAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3MudHM7XG5cdCAgICAgIH1cblx0ICAgICAgcmVzdWx0LnNka0FyZ3MgPSB1dGlsRGFzaC5jbG9uZURlZXAoc2RrQXJncyk7XG5cdCAgICAgIHJlc3VsdC5jdXNwID0gY3VzdG9tQXJncztcblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGMud2hhdF90b19zZW5kIHx8IHt9O1xuXHQgICAgICB3aGF0X3RvX3NlbmQucHZkYXRhVG9VbU5hdGl2ZSA9IHRoaXMuZ2V0VG9OYXRpdmVEYXRhKCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZCA9IHdoYXRfdG9fc2VuZDtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvY2FuX3RvX3NlbmRwdi5qc1xuXHQgKlxuXHQgKiDkvZznlKjvvJrliKTmlq1wduiDveWQpuWPkemAge+8jOS4jeWPr+S7peWPkemAgeWImeS8muS4reaWreWQjue7reaJgOacieS4remXtOS7tuaJp+ihjFxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOaYr+WQpuimgeaJp+ihjHNlbmRwdueahOWFpeWPo1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgdmFyIGNhbl90b19zZW5kcHYgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5jYW5fdG9fc2VuZHB2IHx8IHt9O1xuXHQgICAgICB2YXIgY291bnQgPSBfJC5zZW5kX3B2X2NvdW50IHx8IDA7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHRcblx0ICAgICAgaWYgKGNvbmZpZy5pc19hdXRvICYmIGNvdW50ID4gMCkge1xuXHQgICAgICAgIHJldHVybiAnZG9uZSc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY2FuX3RvX3NlbmRwdi5mbGFnID0gJ1lFUyc7XG5cdCAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQuY2FuX3RvX3NlbmRwdiA9IGNhbl90b19zZW5kcHY7XG5cdCAgICAgICAgXyQuc2VuZF9wdl9jb3VudCA9ICsrY291bnQ7XG5cdCAgICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L2FmdGVyX3B2LmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8mnB25Y+R6YCB5a6M5q+V77yM5YiG5Y+R5LiA5Liq5a6M5oiQ5LqL5Lu2XG5cdCAqIGRlcHM6IOaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvLyAvLyDliJ3lp4vljJbmqKHlnZdcblx0ICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgIC8vIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDmmK/lkKbopoHmiafooYxzZW5kcHbnmoTlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICB2YXIgXyQgPSBhcGx1cy5fJCB8fCB7fTtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgncHZfY29udGV4dCcsIGMpO1xuXHQgICAgICAvLyBwduWPkemAgeWujOavle+8jOWIhuWPkeS4gOS4quWujOaIkOS6i+S7tlxuXHQgICAgICB2YXIgc3BtX2FiID0gYXBsdXMuc3BtX2FiIHx8IFtdO1xuXHQgICAgICB2YXIgX3NwbWFiID0gc3BtX2FiLmpvaW4oJy4nKTtcblx0ICAgICAgdmFyIF9jb3VudCA9IF8kLnNlbmRfcHZfY291bnQ7XG5cdFxuXHQgICAgICB2YXIgcHViT2JqID0ge1xuXHQgICAgICAgIGNuYTogYy5ldGFnLmNuYSxcblx0ICAgICAgICBjb3VudDogX2NvdW50LFxuXHQgICAgICAgIHNwbWFiX3ByZTogYXBsdXMuc3BtYWJfcHJlXG5cdCAgICAgIH07XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2coWydzZW5kUFYnLCAnY29tcGxldGUnLCBfc3BtYWIsIHB1Yk9ial0pO1xuXHQgICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKFsnc2VuZFBWJywgJ2NvbXBsZXRlJywgX3NwbWFiLCBwdWJPYmpdKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfSxcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNzYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBGTiA9ICdmdW5jdGlvbic7XG5cdFxuXHR2YXIgZ2V0UHVic3ViID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHB1YnN1YiA9IGFwbHVzLmFwbHVzX3B1YnN1YiB8fCB7fTtcblx0ICB2YXIgZmxhZyA9IHR5cGVvZiBwdWJzdWIucHVibGlzaCA9PT0gRk47XG5cdCAgcmV0dXJuIGZsYWcgPyBwdWJzdWIgOiAnJztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDliIblj5Hmtojmga/lt6Xlhbflh73mlbBcblx0ICogQHBhcmFtcyB7QXJyYXl9IGFyZ3MgW2tleSwgbXNnVmFsdWUxLCBtc2dWYWx1ZTIsIG1zZ1ZhbHVlMywgbXNnVmFsdWVOLCAuLi5dXG5cdCAqL1xuXHRleHBvcnRzLmRvUHViTXNnID0gZnVuY3Rpb24oYXJncykge1xuXHQgIHZhciBwdWJzdWIgPSBnZXRQdWJzdWIoKTtcblx0ICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIucHVibGlzaCA9PT0gRk4pIHtcblx0ICAgIHB1YnN1Yi5wdWJsaXNoLmFwcGx5KHB1YnN1YiwgYXJncyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGNhY2hl5b2T5YmN55qE5YiG5Y+R5Ye95pWw55qE5bel5YW35Ye95pWwXG5cdCAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuXHQgKi9cblx0ZXhwb3J0cy5kb0NhY2hlUHVicyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0ICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG5cdCAgaWYgKHB1YnN1YiAmJiB0eXBlb2YgcHVic3ViLmNhY2hlUHVicyA9PT0gRk4pIHtcblx0ICAgIHB1YnN1Yi5jYWNoZVB1YnMuYXBwbHkocHVic3ViLCBhcmdzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog6K6i6ZiF5raI5oGv5bel5YW35Ye95pWwXG5cdCAqIEBwYXJhbXMge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYihbIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXSlcblx0ICovXG5cdGV4cG9ydHMuZG9TdWJNc2cgPSBmdW5jdGlvbihrZXksIGNiKSB7XG5cdCAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuXHQgIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5zdWJzY3JpYmUgPT09IEZOKSB7XG5cdCAgICBwdWJzdWIuc3Vic2NyaWJlKGtleSwgY2IpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDc3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3BsdWdpbnMvcHYvd2hhdF90b19oamxqX3VzZXJkYXRhLmpzXG5cdCAqXG5cdCAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuXHQgKiAgICAgICAgICAg5bm25bCG5pS26ZuG5Yiw55qE6Ieq5a6a5LmJ5Y+C5pWw5Lul5pWw57uE5qC85byP6L+95Yqg5YiwbG9nZGF0YeWQjumdou+8mmxvZ2RhdGEuY29uY2F0KHVzZXJkYXRhKVxuXHQgKiAgZGVwczogd2hhdF90b19oamxqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGZvcm1hdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8vIC8qKlxuXHQgICAgLy8gICog5Yid5aeL5YyW5qih5Z2XXG5cdCAgICAvLyAgKi9cblx0ICAgIC8vIGluaXQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAvLyAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgICAvLyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG5cdCAgICAgKlxuXHQgICAgICogcmVjb3JkKGxvZ2tleSwgZ21rZXksIGdva2V5KSBBUEnkuK3nmoRnb2tleVxuXHQgICAgICogbWV0YTphcGx1cy1leGluZm/kv6Hmga8sIG1ldGE6YXBsdXMtZXhkYXRh5L+h5oGvXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybiB7T2JqZWN0fSB7Li4ufVxuXHQgICAgICovXG5cdCAgICBnZXRVc2VyRGF0YTogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcblx0ICAgICAgdmFyIGdva2V5ID0gYy53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleTtcblx0XG5cdCAgICAgIGdva2V5ID0gdXRpbERhc2guYXNzaWduKGdva2V5LCBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsZGF0YScpKTtcblx0ICAgICAgZ29rZXkgPSB1dGlsRGFzaC5hc3NpZ24oZ29rZXksIGZvcm1hdC5wYXJhbTJvYmoodXNlcmRhdGEuZ29rZXkpKTtcblx0ICAgICAgdmFyIGFwbHVzRXhpbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4aW5mbycpO1xuXHQgICAgICBpZiAoYXBsdXNFeGluZm8pIHtcblx0ICAgICAgICBnb2tleSA9IHV0aWxEYXNoLmFzc2lnbihnb2tleSwgZm9ybWF0LnBhcmFtMm9iaihhcGx1c0V4aW5mbykpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgZXhkYXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScpO1xuXHQgICAgICBpZiAoaXNBcnJheShleGRhdGEpKSB7XG5cdCAgICAgICAgZXhkYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG5cdCAgICAgICAgICBnb2tleSA9IHV0aWxEYXNoLmFzc2lnbihnb2tleSwgaXRlbSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZ29rZXkgPSB1dGlsRGFzaC5hc3NpZ24oZ29rZXksIGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1leGRhdGEnKSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGdva2V5O1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueJ2RvbmUn57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuICdkb25lJyB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleSA9IHRoaXMuZ2V0VXNlckRhdGEoKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L3doYXRfdG9faGpsal91c2VyZGF0YS5qc1xuXHQgKlxuXHQgKiAg5o+S5Lu25L2c55So77ya5pS26ZuG5bqU55So5pa56Ieq5a6a5LmJcHblj4LmlbBcblx0ICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsGxvZ2RhdGHlkI7pnaLvvJpsb2dkYXRhLmNvbmNhdCh1c2VyZGF0YSlcblx0ICogIGRlcHM6IHdoYXRfdG9faGpsalxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsRXhpbmZvID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7XG5cdHZhciBnZXRFeFBhcmFtc09iaiA9IF9fd2VicGFja19yZXF1aXJlX18oNzApO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8vIGdldENvb2tpZVVzZXJJbmZvOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAvLyAgIHZhciBkID0ge307XG5cdCAgICAvLyAgIC8vIOaXpeW/l+aUtumbhuW3peWPt1xuXHQgICAgLy8gICB2YXIgd24gPSBjb29raWUuZ2V0Q29va2llKCd3b3Jrbm8nKSB8fCBjb29raWUuZ2V0Q29va2llKCdlbXBsSWQnKTtcblx0ICAgIC8vICAgaWYgKHduKSB7XG5cdCAgICAvLyAgICAgZC53b3Jrbm8gPSB3bjtcblx0ICAgIC8vICAgfVxuXHQgICAgLy8gICB2YXIgaG5nID0gY29va2llLmdldEhuZygpO1xuXHQgICAgLy8gICBpZiAoaG5nKSB7XG5cdCAgICAvLyAgICAgZC5faG5nID0gY29va2llLmdldEhuZygpO1xuXHQgICAgLy8gICB9XG5cdCAgICAvLyAgIHJldHVybiBkO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBnZXRFeFBhcmFtc0luZm86IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGUgPSB1dGlsRXhpbmZvLmdldEV4UGFyYW1zKCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmV4cGFyYW1zID0gZTtcblx0ICAgICAgcmV0dXJuIGdldEV4UGFyYW1zT2JqKGUpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueJ2RvbmUn57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuICdkb25lJyB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgZ29rZXkgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleTtcblx0ICAgICAgZ29rZXkgPSB1dGlsRGFzaC5hc3NpZ24odGhpcy5nZXRFeFBhcmFtc0luZm8oKSwgZ29rZXkpO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleSA9IGdva2V5O1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDc5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl9iL2NvbmZpZy9wbHVnaW5zL3doYXRfdG9faGpsal91dDIuanNcblx0ICpcblx0ICog5L2c55So77ya5pel5b+X5Y+R6YCB6IezVVTlj4LmlbDmlLbpm4bvvJpcblx0ICpcblx0ICogZGVwczog5pegXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICog6I635Y+WVVTml6Xlv5fpnIDopoHnmoTlj4LmlbBcblx0ICAgICAqIOWPguaVsOexu+Wei+S4gO+8mumcgOimgVVU54m55q6K5aSE55CG55qE77yIZnVuY3R5cGXvvIxmdW5jSWTvvIx1cmzvvIxsb2drZXnvvIlcblx0ICAgICAqIOWPguaVsOexu+Wei+S6jO+8muS4jemcgOimgVVU54m55q6K5aSE55CG55qE77yI5YW25LuWYXBsdXPoh6rlrprkuYlrZXlcXHZhbHVl77yJa2V56ZyA6KaB5LiL5YiS57q/5byA5aS0XG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybiB7T2JqZWN0fSB7XG5cdCAgICAgKiAgIGZ1bmN0eXBlOiBcImN0cmxcIixcblx0ICAgICAqICAgZnVuY0lkOiBcIjIxMDFcIixcblx0ICAgICAqICAgdXJsOiBcImh0dHBzOi8vaDUubS50YW9iYW8uY29tL2J1eS9xaW5nZGFuL2xpc3QuaHRtbFwiLFxuXHQgICAgICogICBsb2drZXk6IFwiL3FpbmdkYW4uMi4zXCIsXG5cdCAgICAgKlxuXHQgICAgICogICBfc3BtY250OiBcImEzMTQ1LjgxODM3MzcuMC4wXCIsXG5cdCAgICAgKiAgIF9zcG11cmw6IFwiYTAuYjAuYzAuZDBcIixcblx0ICAgICAqICAgX2g1dXJsOiBcIi8vaDUubS50YW9iYW8uY29tL2J1eS9xaW5nZGFuL2xpc3QuaHRtbD9zY209MjAxOS4xLjQuMzExJml0ZW1JZD01MjczNTE0NjE0NTYsNTI3MDM4NTU1NzU2JnNwbT1hMjE0MS4xLndpZGdldC40JmxvY2F0ZT13aWRnZXQtNFwiLFxuXHQgICAgICogICBfY25hOiBcIjEyMzQ0NDY1NDdcIixcblx0ICAgICAqICAgX290aGVyczogXCJzb21ldmFsdWVcIiAsXG5cdCAgICAgKiAgIF9pc2g1OiBcIjFcIiAgLy8gVVTlv4XpobvnmoTlsZ7mgKfvvIzlhpnmrbvljbPlj69cblx0ICAgICAqICAgX2lzX2cydV86IFwiMVwiIC8vIOWNleWPkeaXtumcgOimgVxuXHQgICAgICogfVxuXHQgICAgICovXG5cdCAgICBnZXRUb1V0RGF0YTogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGEgfHwge307XG5cdCAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuXHQgICAgICB2YXIgd2hhdF90b19zZW5kID0gY29udGV4dC53aGF0X3RvX3NlbmQgfHwge307XG5cdCAgICAgIHZhciBsb2dkYXRhID0gd2hhdF90b19zZW5kLmxvZ2RhdGEgfHwge307XG5cdCAgICAgIHZhciBzZGtfaW5mbyA9IGxvZ2RhdGEuc2RrX2luZm8gfHwge307XG5cdCAgICAgIHZhciBnb2tleSA9IGxvZ2RhdGEuZ29rZXkgfHwge307XG5cdFxuXHQgICAgICB2YXIgZ29rZXlBcnIgPSBbXTtcblx0ICAgICAgdmFyIGdva2V5U3RyID0gJyc7XG5cdCAgICAgIGZvciAodmFyIGsgaW4gZ29rZXkpIHtcblx0ICAgICAgICBpZiAoW2FwbHVzU3RhdGljLlNQTV9DTlQsIGFwbHVzU3RhdGljLlNQTV9VUkwsIGFwbHVzU3RhdGljLlNQTV9QUkVdLmluZGV4T2YoaykgPT09IC0xKSB7XG5cdCAgICAgICAgICB2YXIgX3RtcFZhbHVlID0gZ29rZXlba107XG5cdCAgICAgICAgICBpZiAoZ29rZXlba10gPT09ICd1bmRlZmluZWQnIHx8IGdva2V5W2tdID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgX3RtcFZhbHVlID0gJyc7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBnb2tleUFyci5wdXNoKGsgKyAnPScgKyBfdG1wVmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAoZ29rZXlBcnIubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGdva2V5U3RyID0gZ29rZXlBcnIuam9pbignJicpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBwYWdldXJsID0gbG9jYXRpb24uaHJlZjtcblx0ICAgICAgdmFyIGQgPSB7fTtcblx0ICAgICAgLy8g5Y+C5pWw57G75Z6L5LiA77ya6ZyA6KaBVVTnibnmrorlpITnkIbnmoTvvIhmdW5jdHlwZe+8jGZ1bmNJZO+8jHVybO+8jGxvZ2tlee+8iVxuXHQgICAgICBkLmZ1bmN0eXBlID0gJ2N0cmwnO1xuXHQgICAgICBkLmZ1bmNJZCA9IGxvZ2RhdGEuZXZlbnRfY29kZTtcblx0ICAgICAgaWYgKGFwbHVzICYmIGFwbHVzLmdsb2JhbENvbmZpZyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICBkLnVybCA9IChsb2NhdGlvbi5wcm90b2NvbCB8fCAnaHR0cHM6JykgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGQudXJsID0gbG9jYXRpb24uaHJlZjtcblx0ICAgICAgfVxuXHQgICAgICBkLmxvZ2tleSA9IGxvZ2RhdGEubG9na2V5O1xuXHQgICAgICBkLmdva2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGdva2V5U3RyKTtcblx0ICAgICAgZC5nbWtleSA9IGxvZ2RhdGEuZ21rZXk7XG5cdFxuXHQgICAgICAvLyDlj4LmlbDnsbvlnovkuozvvJrkuI3pnIDopoFVVOeJueauiuWkhOeQhueahO+8iOWFtuS7lmFwbHVz6Ieq5a6a5LmJa2V5XFx2YWx1Ze+8iWtleemcgOimgeS4i+WIkue6v+W8gOWktFxuXHQgICAgICBkLl9pc2g1ID0gJzEnO1xuXHQgICAgICBkLl9oNXVybCA9IHBhZ2V1cmw7XG5cdCAgICAgIGQuX2lzX2cydV8gPSAxO1xuXHQgICAgICBkLl9zbG9nID0gMTtcblx0ICAgICAgZC5fdG9VVCA9IDI7XG5cdCAgICAgIGQuX2JyaWRnZU5hbWUgPSAnV2luZFZhbmUnO1xuXHQgICAgICBkLl9icmlkZ2VWZXJzaW9uID0gJzMuMC40Jztcblx0XG5cdCAgICAgIC8vIOWPguaVsOexu+Wei+S4ie+8muS4jemcgOimgVVU54m55q6K5aSE55CG77yM5LiUa2V55peg5LiL5YiS57q/5YmN57yAXG5cdCAgICAgIGlmIChzcG0uc3BtX2NudCkgZFthcGx1c1N0YXRpYy5TUE1fQ05UXSA9IHNwbS5zcG1fY250IHx8ICcnO1xuXHQgICAgICBpZiAoc3BtLnNwbV91cmwpIGRbYXBsdXNTdGF0aWMuU1BNX1VSTF0gPSBzcG0uc3BtX3VybCB8fCAnJztcblx0ICAgICAgaWYgKHNwbS5zcG1fcHJlKSBkW2FwbHVzU3RhdGljLlNQTV9QUkVdID0gc3BtLnNwbV9wcmUgfHwgJyc7XG5cdFxuXHQgICAgICBkLmNuYSA9IGV0YWcuY25hO1xuXHQgICAgICBkLmx2ZXIgPSBzZGtfaW5mby5sdmVyO1xuXHQgICAgICBkLmpzdmVyID0gc2RrX2luZm8uanN2ZXI7XG5cdCAgICAgIC8vIOWPr+inhuWMluS7pOeureagh+ivhmF1dG9zZW5kXG5cdCAgICAgIGlmICh1c2VyZGF0YS5oYXNPd25Qcm9wZXJ0eSgnYXV0b3NlbmQnKSkge1xuXHQgICAgICAgIGQuYXV0b3NlbmQgPSB1c2VyZGF0YS5hdXRvc2VuZDtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgdXRwYXJhbUNudCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy11dHBhcmFtJyk7XG5cdCAgICAgIGlmICh1dHBhcmFtQ250KSB7XG5cdCAgICAgICAgZFsndXRwYXJhbS1jbnQnXSA9IEpTT04uc3RyaW5naWZ5KHV0cGFyYW1DbnQpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBkO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGMud2hhdF90b19zZW5kIHx8IHt9O1xuXHQgICAgICB3aGF0X3RvX3NlbmQucHZkYXRhVG9VdCA9IHRoaXMuZ2V0VG9VdERhdGEoKTtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kID0gd2hhdF90b19zZW5kO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDgwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogd2hhdF90b19oamxqXzJuYXRpdmUuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiBcblx0ICog5L2c55So77yaIOahpeaOpeWGheW1jOaDheWGteS4i++8jHVt5pel5b+X5Y2P6K6u5Y+R6YCB6buE6YeR5Luk566t5pel5b+X57uZbmF0aXZlXG5cdCAqIFxuXHQgKiBkZXBzOiDml6Bcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7XG5cdHZhciBhcGx1c1V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldFRvTmF0aXZlRGF0YTogZnVuY3Rpb24oKSB7XG5cdCAgICAgIC8vIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcblx0ICAgICAgdmFyIGV0YWcgPSBjb250ZXh0LmV0YWcgfHwge307XG5cdCAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjb250ZXh0LndoYXRfdG9fc2VuZCB8fCB7fTtcblx0ICAgICAgdmFyIGxvZ2RhdGEgPSB3aGF0X3RvX3NlbmQubG9nZGF0YSB8fCB7fTtcblx0ICAgICAgdmFyIHNka19pbmZvID0gbG9nZGF0YS5zZGtfaW5mbyB8fCB7fTtcblx0XG5cdCAgICAgIHZhciByZXN1bHQgPSB7fSAsc2RrQXJncyA9IHt9LCBjdXN0b21BcmdzID0ge307XG5cdCAgICAgIHNka0FyZ3MuY25hID0gZXRhZy5jbmE7XG5cdCAgICAgIHNka0FyZ3MubHZlciA9IHNka19pbmZvLmx2ZXI7XG5cdCAgICAgIHNka0FyZ3MuanN2ZXIgPSBzZGtfaW5mby5qc3Zlcjtcblx0ICAgICAgc2RrQXJncy5pZCA9IHVzZXJkYXRhLmxvZ2tleSB8fCAnLSc7XG5cdCAgICAgIHNka0FyZ3MudHMgPSBEYXRlLm5vdygpOyAvL+WSjOijuHdlYuS+p+S8muacieW3ruW8glxuXHQgICAgICBzZGtBcmdzLmlzX2g1ID0gJzEnO1xuXHQgICAgICBzZGtBcmdzLmZ1bmNJZCA9IGxvZ2RhdGEuZXZlbnRfY29kZTtcblx0XG5cdCAgICAgIGlmICh1c2VyZGF0YS5nb2tleSAmJiAodHlwZW9mIHVzZXJkYXRhLmdva2V5ID09PSAnc3RyaW5nJykgJiYgdXNlcmRhdGEuZ29rZXkubWF0Y2goJ2lzX2F1dG8nKSkge1xuXHQgICAgICAgIHNka0FyZ3MuaXNfYXV0byA9IDE7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2RrQXJncy5pc19hdXRvID0gMDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHR5cGVvZiB1c2VyZGF0YS5nb2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBjdXN0b21BcmdzID0gYXBsdXNVdGlscy5hcnIyb2JqKGFwbHVzVXRpbHMucGFyYW0yYXJyKHVzZXJkYXRhLmdva2V5IHx8ICcnKSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY3VzdG9tQXJncyA9IHV0aWxEYXNoLmNsb25lRGVlcCh1dGlscy5kZWxldGVJbmZvKHVzZXJkYXRhLmdva2V5LCBbXG5cdCAgICAgICAgICAnX2Fub255X2lkJywgJ19kZXZfaWQnLCAnX3Nlc3Npb25faWQnLCAnX3NyY19wb3NfaWQnLFxuXHQgICAgICAgICAgJ191c2VyX2lkJywgJ191c2VyX25pY2snXG5cdCAgICAgICAgXSkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAobG9nZGF0YS51cmwpIHtcblx0ICAgICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgY3VzdG9tQXJncy5zcG1CIHx8IGN1c3RvbUFyZ3NbJ2RhdGEtcGFnZW5hbWUnXSB8fCBjdXN0b21BcmdzLnBhZ2VfbmFtZSB8fCBsb2dkYXRhLnVybCB8fCAnLSc7XG5cdCAgICAgICAgc2RrQXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG5cdCAgICAgICAgaWYgKHNka0FyZ3MucGFnZV9uYW1lICYmIGN1c3RvbUFyZ3Muc3BtQykge1xuXHQgICAgICAgICAgc2RrQXJnc1snc3BtLWNudCddID0gW2VuY29kZVVSSUNvbXBvbmVudChzZGtBcmdzLnBhZ2VfbmFtZSksIGVuY29kZVVSSUNvbXBvbmVudChjdXN0b21BcmdzLnNwbUMpLCBlbmNvZGVVUklDb21wb25lbnQoY3VzdG9tQXJncy5zcG1EKV0uZmlsdGVyKGZ1bmN0aW9uKHYpe1xuXHQgICAgICAgICAgICByZXR1cm4gISF2O1xuXHQgICAgICAgICAgfSkuam9pbignLicpO1xuXHQgICAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3Muc3BtQztcblx0ICAgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLnNwbUI7XG5cdCAgICAgICAgICBkZWxldGUgY3VzdG9tQXJncy5zcG1EO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gaWYgKGN1c3RvbUFyZ3MucGFnZV9uYW1lIHx8IGN1c3RvbUFyZ3NbJ2RhdGEtcGFnZW5hbWUnXSkge1xuXHQgICAgICAvLyAgIGRlbGV0ZSBjdXN0b21BcmdzLnBhZ2VfbmFtZTtcblx0ICAgICAgLy8gICBkZWxldGUgY3VzdG9tQXJnc1snZGF0YS1wYWdlbmFtZSddO1xuXHQgICAgICAvLyB9XG5cdCAgICAgIGlmIChjdXN0b21BcmdzLnRzKSB7XG5cdCAgICAgICAgLy8g5Yig6ZmkbmF0aXZl5L+d55WZ5a2X5q61dHNcblx0ICAgICAgICBkZWxldGUgY3VzdG9tQXJncy50cztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNsb25lUCA9IHV0aWxEYXNoLmNsb25lRGVlcChjdXN0b21BcmdzKTtcblx0ICAgICAgZm9yICh2YXIgayBpbiBjbG9uZVApIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGsgPT09ICdzdHJpbmcnICYmIHV0aWxzLnN0YXJ0c1dpdGgoaywgJ18nKSkge1xuXHQgICAgICAgICAgc2RrQXJnc1trXSA9IGNsb25lUFtrXTtcblx0ICAgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzW2tdO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmVzdWx0LnNka0FyZ3MgPSB1dGlsRGFzaC5jbG9uZURlZXAoc2RrQXJncyk7XG5cdCAgICAgIHJlc3VsdC5jdXNwID0gY3VzdG9tQXJncztcblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGMud2hhdF90b19zZW5kIHx8IHt9O1xuXHQgICAgICB3aGF0X3RvX3NlbmQuaGpsamRhdGFUb1VtTmF0aXZlID0gdGhpcy5nZXRUb05hdGl2ZURhdGEoKTtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kID0gd2hhdF90b19zZW5kO1xuXHQgICAgICByZXR1cm47IFxuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogODEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcblx0ICogQVBJ5o+S5Lu2XG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fd2VicGFja19yZXF1aXJlX18oODIpKHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA4MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuXHQgKiBBUEnmj5Lku7Zcblx0ICpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBsb2dDb25maWcge1xuXHQgKiAgICBwdjoge1xuXHQgKiAgICAgIHBsdWdpbnM6IHJlcXVpcmUoJy4vbGliX2xvZy9wbHVnaW5zX3B2JyksXG5cdCAqICAgICAgY29udGV4dDogcmVxdWlyZSgnLi9saWJfbG9nL2NvbmZpZy9jb25maWdfdScpXG5cdCAqICAgIH0sXG5cdCAqICAgIGhqbGo6IHtcblx0ICogICAgICBwbHVnaW5zOiByZXF1aXJlKCcuL2xpYl9sb2cvcGx1Z2luc19oamxqJyksXG5cdCAqICAgICAgY29udGV4dDogcmVxdWlyZSgnLi9saWJfbG9nL2NvbmZpZy9jb25maWdfaGpsal91Jylcblx0ICogICAgfVxuXHQgKiAgfVxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAobG9nQ29uZmlnKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgaWYgKGFwbHVzLl9hcGx1c19hcGkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9IGVsc2Uge1xuXHQgICAgYXBsdXMuX2FwbHVzX2FwaSA9IHtcblx0ICAgICAgc3RhdHVzOiAnY29tcGxldGUnXG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgdmFyIGFwbHVzT2JqID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MykucnVuLmNyZWF0ZSh7XG5cdCAgICBsb2dDb25maWc6IGxvZ0NvbmZpZ1xuXHQgIH0pO1xuXHQgIGZvciAodmFyIGsgaW4gYXBsdXNPYmopIHtcblx0ICAgIGFwbHVzW2tdID0gYXBsdXNPYmpba107XG5cdCAgfVxuXHRcblx0ICAvLyDliJ3lp4vljJZwdmlkXG5cdCAgX193ZWJwYWNrX3JlcXVpcmVfXyg4OCkubWFrZVBWSWQoKTtcblx0XG5cdCAgdmFyIG1zZ0FyciA9IFsnYXBsdXNSZWFkeScsICdjb21wbGV0ZSddO1xuXHQgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNnQXJyKTtcblx0ICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ0Fycik7XG5cdFxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGRvYyA9IGRvY3VtZW50O1xuXHRcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIGNvb2tpZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpO1xuXHR2YXIgdXRpbEV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEdRID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdHZhciBSZWR1Y2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0XG5cdHZhciBtZXRhSW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgcmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oODcpO1xuXHR2YXIgZm5fYmVmb3JlX3B2ID0gW107XG5cdHZhciBmbl9hZnRlcl9wdiA9IFtdO1xuXHR2YXIgZm5fYmVmb3JlX3JlY29yZCA9IFtdO1xuXHR2YXIgZm5fYWZ0ZXJfcmVjb3JkID0gW107XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHR2YXIgRU1QVFlfRk4gPSBmdW5jdGlvbiAoKSB7fTtcblx0XG5cdGZ1bmN0aW9uIGdldE1tc3RhdFRpbWVvdXQgKCkge1xuXHQgIHZhciB0aW1lID0gNTAwMDtcblx0ICB0cnkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgbG9uZ3RpbWUgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtbW1zdGF0LXRpbWVvdXQnKTtcblx0ICAgIGlmIChsb25ndGltZSkge1xuXHQgICAgICB2YXIgdGltZUludCA9IHBhcnNlSW50KGxvbmd0aW1lKTtcblx0ICAgICAgaWYgKHRpbWVJbnQgPj0gMTAwMCAmJiB0aW1lSW50IDw9IDEwMDAwKSB7XG5cdCAgICAgICAgdGltZSAgPSB0aW1lSW50O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge31cblx0ICByZXR1cm4gdGltZTtcblx0fVxuXHRcblx0ZXhwb3J0cy5ydW4gPSBCYXNlLmV4dGVuZCh7XG5cdCAgLyoqXG5cdCAgICog5rOo5YaMIHNlbmRQViDmiafooYzkuYvliY3nmoTmlrnms5Vcblx0ICAgKiDov5nkupvmlrnms5XlsIblnKggc2VuZFBWIOS5i+WJjeS+neasoeaJp+ihjO+8jOWmguaenOacieS4gOS4quaYvuW8j+i/lOWbniBmYWxzZe+8jOWImSBzZW5kUFYg5bCG6KKr5Y+W5raIXG5cdCAgICogQHBhcmFtIGZuIHtmdW5jdGlvbn1cblx0ICAgKi9cblx0ICBiZWZvcmVTZW5kUFY6IGZ1bmN0aW9uIChmbikge1xuXHQgICAgZm5fYmVmb3JlX3B2LnB1c2goZm4pO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOazqOWGjCBzZW5kUFYg5omn6KGM5LmL5ZCO55qE5pa55rOVXG5cdCAgICog6L+Z5Lqb5pa55rOV5bCG5ZyoIHNlbmRQViDkuYvlkI7kvp3mrKHmiafooYxcblx0ICAgKiBAcGFyYW0gZm4ge2Z1bmN0aW9ufVxuXHQgICAqL1xuXHQgIC8vIGFmdGVyU2VuZFBWOiBmdW5jdGlvbiAoZm4pIHtcblx0ICAvLyAgIGZuX2FmdGVyX3B2LnB1c2goZm4pO1xuXHQgIC8vIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdFVCDor7fmsYLkuIDkuKrlm77niYflnLDlnYDvvIzlkJHmnI3liqHlmajlj5HpgIHmiZPngrlcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB1cmwge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2RhdGFTdHJdIHtTdHJpbmd9XG5cdCAgICogQHBhcmFtIFttZXRob2RdIHtTdHJpbmd9ICAvLyBQT1NUIE9SIEdFVFxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0ICBzZW5kOiBmdW5jdGlvbiAodXJsLCBkYXRhU3RyLCBtZXRob2QpIHtcblx0ICAgIHZhciBzcmM7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIC8vIOWmguaenHVybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuXHQgICAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG5cdCAgICAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuXHQgICAgICBpZiAoLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcblx0ICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG5cdCAgICAgIH1cblx0ICAgICAgdXJsID0gcHJvdG9jYWwgKyB1cmw7XG5cdCAgICB9XG5cdCAgICAvLyDmjIflrprkuoZQT1NU5YiZ5LyY5YWI5oyJUE9TVOWPkemAgVxuXHQgICAgLy8g5by55YaF6buY6K6k5LyY5YWIc2VuZEJlYWNvblxuXHQgICAgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnICYmIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3Iuc2VuZEJlYWNvbikge1xuXHQgICAgICBzcmMgPSByZXF1ZXN0LnBvc3REYXRhKHVybCwgZGF0YVN0cik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzcmMgPSByZXF1ZXN0LnNlbmRJbWcodXJsICsgJz8nICsgZGF0YVN0ciwgZ2V0TW1zdGF0VGltZW91dCgpKTtcblx0ICAgIH1cblx0ICAgIGFwbHVzLnJlcSA9IHNyYztcblx0ICAgIHJldHVybiBzcmM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIFtPYmplY3RdIGNvbmZpZzoge1xuXHQgICAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuXHQgICAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2Vcblx0ICAgKiAgIHBhZ2VfaWQ6IDEyMywgICAgICAgICAvLyDlsIbkvJrkvZPnjrDlnKhzcG1i5L2N5LiKXG5cdCAgICogICBnb2tleTogJycsICAgICAgICAgICAgLy8g55So5oi36Ieq5a6a5LmJ5Y+C5pWw77yI5ZCR5LiL5YW85a6577yMVE9ET+WQjue7reS4i+aOie+8iVxuXHQgICAqIH1cblx0ICAgKiBAcGFyYW0gW09iamVjdF0gdXNlcmRhdGE6IHtcblx0ICAgKiAgIHJlZmVycmVyOiAnaHR0cDovL3d3dy50YW9iYW8uY29tJyAgIC8vIOWwhuS8muabv+aNonB26K+35rGC55qEcHJl5Y+C5pWwXG5cdCAgICogICB4eHgxOiAndnZ2MScsXG5cdCAgICogICB4eHgyOiAndnZ2MicsXG5cdCAgICogICB4eHhOOiAndnZ2TicsXG5cdCAgICogfSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG5cdCAgICovXG5cdCAgc2VuZFBWOiBmdW5jdGlvbiAoY29uZmlnLCB1c2VyZGF0YSkge1xuXHQgICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuXHQgICAgLy8gMeOAgWJlZm9yZVNlbmRQVu+8jOWmguaenOS7u+aEj+S4gOS4quWHveaVsOi/lOWbnuWAvOS4uiBmYWxzZe+8jOWImeS4reaWreW5tumAgOWHuu+8jOS4jeWPkemAgSBQViDor7fmsYJcblx0ICAgIGlmICh1dGlsRGFzaC5hbnkoZm5fYmVmb3JlX3B2LCBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgcmV0dXJuIGZuKGFwbHVzLCBjb25maWcpID09PSBmYWxzZTtcblx0ICAgIH0pKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIHNraXBSdWxlcyA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1NLSVBfQVBWX1JVTEVTKSB8fCBbXTtcblx0ICAgIGlmICh1dGlsQXJyYXkuaXRlbU1hdGNoKHNraXBSdWxlcywgbG9jYXRpb24uaHJlZikgJiYgY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAvLyAgIG1zZzogJ+agueaNruinhOWImTonICsgc2tpcFJ1bGVzICsgJywg5b+955Wl6Ieq5YqocHbkuIrmiqUnICsgbG9jYXRpb24uaHJlZlxuXHQgICAgICAvLyB9KTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gMuOAgeaJp+ihjCBzZW5kcHYg5o+S5Lu2XG5cdCAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG5cdCAgICBjb25maWcucmVjb3JkVHlwZSA9ICdQVic7IC8vIOWIpOaWreWNleWPjOWPkeeUqOeahO+8jOiAg+iZkeenu+mZpFxuXHQgICAgXG5cdCAgICB2YXIgaXNVTSA9IGFwbHVzLmdsb2JhbENvbmZpZy5pc1VNO1xuXHQgICAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpOyBcblx0ICAgIGlmIChpc0FsaSB8fCBpc1VNKSB7XG5cdCAgICAgIGNvbmZpZy5tZXRob2QgPSAnUE9TVCc7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHB2ID0gYXBsdXMubG9nQ29uZmlnLnB2O1xuXHQgICAgcmVkdWNlci5ydW4oe1xuXHQgICAgICBwbHVnaW5zOiBwdi5wbHVnaW5zLFxuXHQgICAgICBjb250ZXh0OiB1dGlsRGFzaC5jbG9uZURlZXAocHYuY29udGV4dCkgLy8g6Ziy5q2i5rqQ6YWN572u6KKr5rGh5p+TXG5cdCAgICB9LCB7XG5cdCAgICAgIGNvbmZpZzogY29uZmlnLFxuXHQgICAgICB1c2VyZGF0YTogdXNlcmRhdGEsXG5cdCAgICAgIHB1YnN1YlR5cGU6ICdwdicsXG5cdCAgICAgIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9wdixcblx0ICAgICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfcHYnXG5cdCAgICB9KTtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbXMgY29uZmlnIHtcblx0ICAgKiAgIGNvbXBvbmVudElkOiAxNDYwMDhcblx0ICAgKiAgIHBhZ2VJZDog6YeH6ZuG566h55CG5bmz5Y+w5LiK55Sf5oiQ55qE5ZSv5LiA55qEcGFnZUlkIGh0dHBzOi8vbG9nMi1kYWlseS5hbGliYWJhLm5ldC90cmFjay9kZXZlbG9wL2FyZWEtbWFuYWdlbWVudC9kZXRhaWwvMTQ2MDAzLzg4MDAwNC8xNDYwMDhcblx0ICAgKiB9XG5cdCAgICovXG5cdCAgcGFnZUVudGVyOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoY29uZmlnKSB7XG5cdCAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuUFVCTElTSCwgW2FwbHVzU3RhdGljLlBBR0VfRU5URVIsIGNvbmZpZ10pO1xuXHQgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKGFwbHVzU3RhdGljLkNBQ0hFX1BVQlMsIFthcGx1c1N0YXRpYy5QQUdFX0VOVEVSLCBjb25maWddKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlhbzlrrl3ZWJ2aWV35YaF5Zue6LCDZ29sZGxvZy5nZXRQYXJhbeaOpeWPo+eahOWdkVxuXHQgICAqL1xuXHQgIGdldFBhcmFtOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihzaWQpIHtcblx0ICAgIHZhciB3diA9IHdpbmRvdy5XaW5kVmFuZSB8fCB7fTtcblx0ICAgIHZhciB2YWx1ZSA9IHd2ICYmIHR5cGVvZiB3di5nZXRQYXJhbSA9PT0gJ2Z1bmN0aW9uJyA/IHd2LmdldFBhcmFtKHNpZCkgOiAnJztcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICBiZWZvcmVSZWNvcmQ6IGZ1bmN0aW9uIChmbikge1xuXHQgICAgZm5fYmVmb3JlX3JlY29yZC5wdXNoKGZuKTtcblx0ICB9LFxuXHRcblx0ICBhZnRlclJlY29yZDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICBmbl9hZnRlcl9yZWNvcmQucHVzaChmbik7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5Y+R6YCB6buE6YeR5Luk566t5omT54K5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGxvZ2tleVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBnbWtleVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBnb2tleVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2Qg6K+35rGC5pa55rOV5Li6IFBPU1Qgb3IgR0VUXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGNiXG5cdCAgICovXG5cdCAgcmVjb3JkOiBmdW5jdGlvbiAobG9na2V5LCBnbWtleSwgZ29rZXksIG1ldGhvZCwgY2IpIHtcblx0ICAgIC8vIG1ldGhvZCA9ICdHRVQnOyAvLyB1dGlsLmlzU3RyaW5nKG1ldGhvZCkgPyBtZXRob2QudG9VcHBlckNhc2UoKSA6ICdHRVQnO1xuXHQgICAgLy8gYmVmb3JlUmVjb3JkIO+8jOWmguaenOS7u+aEj+S4gOS4quWHveaVsOi/lOWbnuWAvOS4uiBmYWxzZe+8jOWImeS4reaWreW5tumAgOWHuu+8jOS4jeWPkemAgSByZWNvcmQg6K+35rGCXG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciBpc0FsaSA9IGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaTtcblx0ICAgIHZhciBpc1VNID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU07XG5cdCAgICBpZiAobG9na2V5ICYmIGxvZ2tleS5pbmRleE9mKCcvJykgIT09IDAgJiYgaXNBbGkpIHtcblx0ICAgICAgbG9na2V5ID0gJy8nICsgbG9na2V5O1xuXHQgICAgfVxuXHQgICAgaWYgKHV0aWxEYXNoLmFueShmbl9iZWZvcmVfcmVjb3JkLCBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgcmV0dXJuIGZuKGFwbHVzKSA9PT0gZmFsc2U7XG5cdCAgICB9KSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG5cdCAgICB2YXIgaGpsaiA9IGFwbHVzLmxvZ0NvbmZpZy5oamxqO1xuXHQgICAgcmVkdWNlci5ydW4oe1xuXHQgICAgICBwbHVnaW5zOiBoamxqLnBsdWdpbnMsXG5cdCAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgfSwge1xuXHQgICAgICBjb25maWc6IHtcblx0ICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcblx0ICAgICAgICBtZXRob2Q6IGlzVU0gPyAobWV0aG9kIHx8ICdQT1NUJykgOiBtZXRob2Rcblx0ICAgICAgICAvLyBtZXRob2Q6IG1ldGhvZCB8fCAnUE9TVCdcblx0ICAgICAgfSxcblx0ICAgICAgdXNlcmRhdGE6IHtcblx0ICAgICAgICBsb2drZXk6IGxvZ2tleSxcblx0ICAgICAgICBnbWtleTogZ21rZXksXG5cdCAgICAgICAgZ29rZXk6IGdva2V5IHx8IHt9XG5cdCAgICAgIH0sXG5cdCAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcblx0ICAgICAgbWVzc2FnZUZuUXVldWU6IGZuX2FmdGVyX3JlY29yZCxcblx0ICAgICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfaGpsaidcblx0ICAgIH0sIGZ1bmN0aW9uKCl7XG5cdCAgICAgIGlmIChpc0Z1bmN0aW9uKGNiKSkge1xuXHQgICAgICAgIGNiKCk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOaatOmcsue7mWFwbHVzX3NwbS5qcywg5Y+R6YCB5Y+v6KeG5YyW6buE6YeR5Luk566tXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGxvZ2tleVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBnbWtleVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBnb2tleVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2Qg6K+35rGC5pa55rOV5Li6IFBPU1Qgb3IgR0VUXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGNiXG5cdCAgICovXG5cdCAgcmVjb3JkVWRhdGE6IGZ1bmN0aW9uIChsb2drZXksIGdta2V5LCBnb2tleSwgbWV0aG9kLCBjYikge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG5cdCAgICB2YXIgaGpsaiA9IGFwbHVzLmxvZ0NvbmZpZy5oamxqO1xuXHQgICAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpO1xuXHQgICAgcmVkdWNlci5ydW4oe1xuXHQgICAgICBwbHVnaW5zOiBoamxqLnBsdWdpbnMsXG5cdCAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgfSwge1xuXHQgICAgICBjb25maWc6IHtcblx0ICAgICAgICByZWNvcmRUeXBlOiAnREFUQUNMSUNLX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcblx0ICAgICAgICBtZXRob2Q6IGlzQWxpID8gbWV0aG9kIDogKG1ldGhvZCB8fCAnUE9TVCcpXG5cdCAgICAgIH0sXG5cdCAgICAgIHVzZXJkYXRhOiB7XG5cdCAgICAgICAgbG9na2V5OiBsb2drZXksXG5cdCAgICAgICAgZ21rZXk6IGdta2V5LFxuXHQgICAgICAgIGdva2V5OiBnb2tleSB8fCB7fVxuXHQgICAgICB9LFxuXHQgICAgICBwdWJzdWJUeXBlOiAnaGpsaicsXG5cdCAgICAgIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9yZWNvcmQsXG5cdCAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2hqbGonXG5cdCAgICB9LCBmdW5jdGlvbigpe1xuXHQgICAgICBpZiAoaXNGdW5jdGlvbihjYikpIHtcblx0ICAgICAgICBjYigpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOabtOaWsOmhtemdoueahCBh44CBYiDkvY1cblx0ICAgKiDpnIDmsYLlj4Lop4HvvJpodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS9hbGlsb2cva2IvaXNzdWVzLzEzN1xuXHQgICAqIEBwYXJhbSBhIHtTdHJpbmd9XG5cdCAgICogQHBhcmFtIFtiXSB7U3RyaW5nfVxuXHQgICAqIEBwYXJhbSBbY2JdIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0ICBzZXRQYWdlU1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoYSwgYiwgY2IpIHtcblx0ICAgIC8qXG5cdCAgICAgKiBbc3BtRmxhZ10ge2Jvb2xlYW59IDIwMTgvMy8xMi00LzMg6K+l5qCH6K+G5Li6dHJ1Ze+8jOihqOekunNwbS1wcmXlkoxzcG0tdXJs5LiN5Lya5pS55Y+YXG5cdCAgICAgKiDor6bop4HvvJpodHRwczovL2xhcmsuYWxpcGF5LmNvbS9semR0cmFja2luZy92b3lhZ2VyYXBwL3BkcHYzI2FwbHVzLXRyYWNraW5nLWxpYlxuXHQgICAgICovXG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciBzcG1GbGFnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXNwbS1maXhlZCcpO1xuXHQgICAgdmFyIGNhbGxiYWNrID0gdHlwZW9mIGNiID09PSAnZnVuY3Rpb24nID8gY2IgOiBmdW5jdGlvbiAoKSB7fTtcblx0ICAgIC8vIOabtOaWsOWGhemDqOWPmOmHj+WAvFxuXHQgICAgYXBsdXMuc3BtX2FiID0gYXBsdXMuc3BtX2FiIHx8IFtdO1xuXHQgICAgdmFyIG9sZF9zcG1hYiA9IHV0aWxEYXNoLmNsb25lRGVlcChhcGx1cy5zcG1fYWIpO1xuXHRcblx0XG5cdCAgICBpZiAoYSkge1xuXHQgICAgICBhcGx1cy5zcG1fYWJbMF0gPSAnJyArIGE7XG5cdCAgICAgIGFwbHVzLl8kLnNwbS5kYXRhLmEgPSAnJyArIGE7XG5cdCAgICB9XG5cdCAgICBpZiAoYikge1xuXHQgICAgICBhcGx1cy5zcG1fYWJbMV0gPSAnJyArIGI7XG5cdCAgICAgIGFwbHVzLl8kLnNwbS5kYXRhLmIgPSAnJyArICBiO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICB2YXIgbWV0YV9pbmZvID0gbWV0YUluZm8ucUdldCgpO1xuXHQgICAgLy8g55Sf5oiQIFBWIOaJk+eCueeahOaVsOaNriBUT0RPXG5cdCAgICBhcGx1cy5zcG1BUEkgJiYgYXBsdXMuc3BtQVBJLnNwYUluaXQoYXBsdXMsIG1ldGFfaW5mbywgb2xkX3NwbWFiKTtcblx0XG5cdCAgICBpZiAoc3BtRmxhZyAhPT0gJzEnKSB7XG5cdCAgICAgIHZhciBfc3BtYWJfcHJlID0gb2xkX3NwbWFiLmpvaW4oJy4nKTtcblx0ICAgICAgYXBsdXMuc3BtYWJfcHJlID0gX3NwbWFiX3ByZTtcblx0ICAgIH1cblx0ICAgIHZhciBtc2dzID0gWydzZXRQYWdlU1BNJywge1xuXHQgICAgICBzcG1hYl9wcmU6IGFwbHVzLnNwbWFiX3ByZSxcblx0ICAgICAgc3BtYWI6IGFwbHVzLnNwbV9hYi5qb2luKCcuJylcblx0ICAgIH1dO1xuXHQgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdFxuXHQgICAgLy8gcmVzZXRNZXRhQW5kQm9keSgpO1xuXHQgICAgLy8gcmVzZXRNb2R1bGVzKCk7XG5cdFxuXHQgICAgY2FsbGJhY2soKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDliqjmgIHphY3nva5tZXRhXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gdlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIHtcblx0ICAgKiAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcblx0ICAgKiAgIHByaW9yaXR5OiAxLCAvLyDorr7nva7kuobkvJjlhYjnuqcx77yM5ZCM5pe25pyJPG1ldGEgbmFtZT1cImFwbHVzLXgtc2V0dGluZ3NcIiBjb250ZW50PVwiJHthcGx1c+aPkuS7tuWQjX0kXCI+77yM6L+Z5Y+q6IO96K6+572u5LiA5qyhXG5cdCAgICogfVxuXHQgICAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAgICovXG5cdCAgc2V0TWV0YUluZm86IGZ1bmN0aW9uKGFyZzEsIHZhbHVlLCBvcHRzKSB7XG5cdCAgICB2YXIgaztcblx0ICAgIHZhciB2O1xuXHQgICAgdmFyIGRlZmF1bHRNb2RlID0gJ09WRVJXUklURSc7XG5cdCAgICB2YXIgbW9kZSA9IGRlZmF1bHRNb2RlO1xuXHQgICAgaWYgKHR5cGVvZiBhcmcxID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBrID0gYXJnMS5tZXRhTmFtZTtcblx0ICAgICAgdiA9IGFyZzEubWV0YVZhbHVlO1xuXHQgICAgICBtb2RlID0gYXJnMS5tb2RlIHx8IGRlZmF1bHRNb2RlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgayA9IGFyZzE7XG5cdCAgICAgIHYgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICAgIGlmIChtb2RlID09PSBkZWZhdWx0TW9kZSkge1xuXHQgICAgICBpZiAobWV0YUluZm8uc2V0TWV0YUluZm8oaywgdiwgb3B0cykpIHtcblx0ICAgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICAgIF8kLm1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKTtcblx0ICAgICAgICB2YXIgcnMgPSB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcblx0XG5cdCAgICAgICAgdmFyIG1zZ3MgPSBbJ3NldE1ldGFJbmZvJywgaywgdiwgb3B0c107XG5cdCAgICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuXHQgICAgICAgIHJldHVybiBycztcblx0ICAgICAgfSBcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmFwcGVuZE1ldGFJbmZvKGssIHYpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRvIGFwcGVuZCBgbWV0YWAgdGFnIGlmIHRoZXJlJ3Mgbm9uZSBhcGx1cyBtZXRhLlxuXHQgICAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuXHQgICAqICAtIGBBcnJheS5wcm90b3R5cGUuY29uY2F0YCBjYWxsZWQgb24gQXJyYXkgdmFsdWVzLlxuXHQgICAqICAtIGBPYmplY3QuYXNzaWduYCBjYWxsZWQgb24gT2JqZWN0IHZhbHVlcy5cblx0ICAgKiAgQHBhcmFtIGtcblx0ICAgKiAgQHBhcmFtIHZcblx0ICAgKi9cblx0ICBhcHBlbmRNZXRhSW5mbzogbWV0YUluZm8uYXBwZW5kTWV0YUluZm8sXG5cdFxuXHQgIC8qKlxuXHQgICAqIGh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9wcm9qZWN0L2FwbHVzX2Nsb3VkIzMzMmRlNjJjXG5cdCAgICovXG5cdCAgdXBkYXRlUGFnZVByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIGlmIChwcm9wZXJ0aWVzICYmIHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBpZiAocHJvcGVydGllcy5fcGFnZSkge1xuXHQgICAgICAgIHByb3BlcnRpZXMucGFnZU5hbWUgPSBwcm9wZXJ0aWVzLl9wYWdlO1xuXHQgICAgICAgIGFwbHVzLnNldE1ldGFJbmZvKCdhcGx1cy1wYWdlbmFtZScsIHByb3BlcnRpZXMucGFnZU5hbWUpO1xuXHQgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLl9wYWdlO1xuXHQgICAgICB9XG5cdCAgICAgIGFwbHVzLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1jcHZkYXRhJywgcHJvcGVydGllcyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgbXNnOiAnd2FybmluZzogdHlwZW9mIHVwZGF0ZVBhZ2VQcm9wZXJ0aWVzXFwncyBwYXJhbXMgbXVzdCBiZSBvYmplY3QnXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIGh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9wcm9qZWN0L2FwbHVzX2Nsb3VkIzYwMzRjMWRhXG5cdCAgICovXG5cdCAgdXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocHJvcGVydGllcykge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICBpZiAodHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIGFwbHVzLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1uZXh0cGFnZS1wcm9wZXJ0aWVzJywgcHJvcGVydGllcyk7ICBcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICBtc2c6ICd3YXJuaW5nOiB0eXBlb2YgdXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzXFwncyBwYXJhbXMgbXVzdCBiZSBvYmplY3QnXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgLy8gdmFyIHEgPSAod2luZG93LmdvbGRsb2dfcXVldWUgfHwgKHdpbmRvdy5nb2xkbG9nX3F1ZXVlID0gW10pKTtcblx0ICAgIC8vIHEucHVzaCh7XG5cdCAgICAvLyAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgLy8gICBhcmd1bWVudHM6IFsnTmF0aXZlNEFwbHVzRXhlY1JlYWR5JywgZnVuY3Rpb24oc3RhdHVzKXtcblx0ICAgIC8vICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG5cdCAgICAvLyAgICAgICAvLyDphY3nva5tZXRhXG5cdCAgICAvLyAgICAgICBpZiAodHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICAvLyAgICAgICAgIHdpbmRvdy5BcGx1czRVVC51cGRhdGVOZXh0UGFnZVByb3BlcnRpZXMocHJvcGVydGllcyk7XG5cdCAgICAvLyAgICAgICB9IGVsc2Uge1xuXHQgICAgLy8gICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAvLyAgICAgICAgICAgbXNnOiAnd2FybmluZzogdHlwZW9mIHVwZGF0ZVBhZ2VQcm9wZXJ0aWVzXFwncyBwYXJhbXMgbXVzdCBiZSBvYmplY3QnXG5cdCAgICAvLyAgICAgICAgIH0pO1xuXHQgICAgLy8gICAgICAgfVxuXHQgICAgLy8gICAgIH1cblx0ICAgIC8vICAgfV1cblx0ICAgIC8vIH0pO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIGdldCBtZXRhSW5mbyBieSBrZXlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ31cblx0ICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICovXG5cdCAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uKGspIHtcblx0ICAgIHJldHVybiBtZXRhSW5mby5nZXRNZXRhSW5mbyhrKTtcblx0ICB9LFxuXHRcblx0ICAvLyDkuovku7bnu5HlrprmjqXlj6PvvIzku47moLjlv4PlupPmmrTpnLLlh7rljrvkvpthcGx1c0pT5o+S5Lu25L2/55SoXG5cdCAgb246IHV0aWxFdmVudC5vbixcblx0ICAvLyDmt7HluqblhYvpmobvvIzku47moLjlv4PlupPmmrTpnLLlh7rljrvkvpthcGx1c0pT5o+S5Lu25L2/55SoXG5cdCAgY2xvbmVEZWVwOiB1dGlsRGFzaC5jbG9uZURlZXAsXG5cdCAgc2V0Q29va2llOiBjb29raWUuc2V0Q29va2llLFxuXHQgIGdldENvb2tpZTogY29va2llLmdldENvb2tpZSxcblx0XG5cdCAgLy8gV0VC56uv5pqC5LiN6ZyA6KaB5a6e546wXG5cdCAgcGFnZUFwcGVhcjogRU1QVFlfRk4sXG5cdFxuXHQgIC8vIFdFQuerr+aaguS4jemcgOimgeWunueOsFxuXHQgIHBhZ2VEaXNhcHBlYXI6IEVNUFRZX0ZOLFxuXHRcblx0ICB1cGRhdGVQYWdlVXRwYXJhbTogRU1QVFlfRk4sXG5cdFxuXHQgIHVwZGF0ZU5leHRQYWdlVXRwYXJhbTogRU1QVFlfRk4sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbXMge09iamVjdH0gcHJvcGVydGllc1xuXHQgICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cblx0ICAgKi9cblx0ICB1cGRhdGVTZXNzaW9uUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBhcGx1cy5zZXRNZXRhSW5mbygnX3Nlc3Npb25fYXJncycsIHByb3BlcnRpZXMpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgLyoqXG5cdCAgICog5Y+L55uf5LqR5LiK6K6+572u6aG16Z2i57yW56CBXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHBhZ2VuYW1lXG5cdCAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuXHQgICAqICovICBcblx0ICBzZXRQYWdlTmFtZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFnZW5hbWUpIHtcblx0ICAgIGlmICghcGFnZW5hbWUgfHwgdHlwZW9mIHBhZ2VuYW1lICE9PSAnc3RyaW5nJykge1xuXHQgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgbXNnOiAnc2V0UGFnZU5hbWUgZmFpbGVkOiAnICsgJyBwYWdlbmFtZT0nICsgcGFnZW5hbWUgXG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgYm9keSA9IGRvYy5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cdCAgICB0cnkge1xuXHQgICAgICBib2R5LnNldEF0dHJpYnV0ZSgnZGF0YS1wYWdlbmFtZScsIHBhZ2VuYW1lKTtcblx0ICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgbXNnOiAnc2V0UGFnZU5hbWUgZmFpbGVkOiAnICsgJyBlcnI9JyArIGUgXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGdldFBhZ2VOYW1lOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbigpIHtcblx0ICAgIGlmICh3aW5kb3cuZG9jdW1lbnQuYm9keSAmJiB3aW5kb3cuZG9jdW1lbnQuYm9keS5kYXRhc2V0ICYmIHdpbmRvdy5kb2N1bWVudC5ib2R5LmRhdGFzZXQucGFnZW5hbWUpIHtcblx0ICAgICAgcmV0dXJuIHdpbmRvdy5kb2N1bWVudC5ib2R5LmRhdGFzZXQucGFnZW5hbWU7XG5cdCAgICB9IFxuXHQgICAgcmV0dXJuICcnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOiOt+WPluWFg+e0oOeahHNwbS1hbmNob3ItaWRcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudCBcblx0ICAgKiBAcmV0dXJucyB7U3RyaW5nfSBkYXRhLXNwbS1hbmNob3ItaWRcblx0ICAgKi9cblx0XG5cdCAgZ2V0RWxlbWVudFNQTTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oZWxlbWVudCkge1xuXHQgICAgaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50LmRhdGFzZXQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNwbS1hbmNob3ItaWQnKTtcblx0ICB9XG5cdH0pO1xuXHRcblx0Ly8gZXhwb3J0cy5ydW4gPSBvcGVuQVBJLmluaXQocnVuKTtcblxuXG4vKioqLyB9KSxcbi8qIDg0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBDb21wb3NlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSk7XG5cdHZhciBwbHVnaW5zTG9hZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nik7XG5cdFxuXHQvKipcblx0ICogc2VucHZcblx0ICogQHBhcmFtIFtPYmplY3RdIGNvbmZpZzoge1xuXHQgKiAgIGNoZWNrc3VtOiAxMTExMTExMSwgICAvLyDmoLnmja5zcG1hLHNwbWLoh6rliqjnlJ/miJDnmoTkuIDkuKrlrZfnrKbkuLJcblx0ICogICBpc19hdXRvOiB0cnVlL2ZhbHNl77yMIC8vIOagh+ivhuaYr+WQpuiHquWKqOaJk+eCue+8jOm7mOiupOS4unRydWXvvIzljZXpobXlupTnlKjpnIDopoHkvKBmYWxzZVxuXHQgKiAgIHBhZ2VfaWQ6IDEyMywgICAgICAgIC8vIOWwhuS8muS9k+eOsOWcqHNwbWLkvY3kuIpcblx0ICogICBnb2tleTogJycsICAgICAgICAgICAvLyDnm67liY3lt7Lnu4/lpLHmlYhcblx0ICogICByZWZlcnJlcjogJ2h0dHA6Ly93d3cudGFvYmFvLmNvbScgICAvLyDlsIbkvJrmm7/mjaJwduivt+axgueahHByZeWPguaVsFxuXHQgKiB9IC8vIOWQjCBhcGx1cy5sYXVuY2jnrKzkuozkuKrlhaXlj4LigJxtYW51YWzigJ1cblx0ICpcblx0ICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhICAgLy8g5ZCE56eN6Ieq5a6a5LmJcHblj4LmlbBcblx0ICpcblx0ICogQHBhcmFtIFtPYmplY3RdIG9iaiAtIHtmbl9hZnRlcl9wdjogZm5fYWZ0ZXJfcHYsIHh4eDogeHh4fVxuXHQgKlxuXHQgKiBzdGVwMTogbG9hZGVyIHBsdWdpbnMgIG1pZGRsZXdhcmVcblx0ICogc3RlcDI6IGxvYWRlciBkb1NlbmRQdiBtaWRkbGV3YXJlXG5cdCAqIHN0ZXAzOiBydW4gbWlkZGxld2FyZXNcblx0ICovXG5cdFxuXHR2YXIgUmVkdWNlciA9IGZ1bmN0aW9uKCkge1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMgT2JqZWN0IENPTkZJRyB7XG5cdCAqICAgY29udGV4dDogeHh4LFxuXHQgKiAgIHBsdWdpbnM6IHh4eCBcblx0ICogfVxuXHQgKiBAcGFyYW1zIE9iamVjdCBvcHRzIHtcblx0ICogICBjb25maWc6IGNvbmZpZyxcblx0ICogICB1c2VyZGF0YTogdXNlcmRhdGEsXG5cdCAqICAgcHVic3ViVHlwZTogJ3B2JyB8fCAnaGpsaicgfHwgJ3ByZXB2J1xuXHQgKiAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2JyB8fCAnbXdfY2hhbmdlX2hqbGonIHx8ICdtd19jaGFuZ2VfcHJlcHYnXG5cdCAqICAgbWVzc2FnZUZuUXVldWU6IFtmbjEsIGZuMiAuLi5dXG5cdCAqIH1cblx0ICovXG5cdFJlZHVjZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIChDT05GSUcsIG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgLy8gMeOAgWluaXQgcGx1Z2luc1xuXHQgIHZhciBwbCA9IG5ldyBwbHVnaW5zTG9hZGVyKCk7XG5cdCAgcGwuaW5pdCh7XG5cdCAgICBtaWRkbGV3YXJlOiBbXSxcblx0ICAgIGNvbmZpZzogb3B0cy5jb25maWcsXG5cdCAgICBwbHVnaW5zOiBDT05GSUcucGx1Z2luc1xuXHQgIH0pO1xuXHQgIHZhciBtaWRkbGV3YXJlID0gcGwucnVuKCk7XG5cdFxuXHQgIC8vIOWIneWni+WMluS4iuS4i+aWh+eOr+Wig++8jGNvbnRleHTlhoXnmoRkYXRh5bCG5Lya5Zyo5ZCE5Liq5o+S5Lu25Lit6L+b6KGM6LWL5YC85oiW6ICF5L+u5pS577yI6YeN6KaB77yJXG5cdCAgdmFyIGNvbnRleHQgPSBpc0Z1bmN0aW9uKENPTkZJRy5jb250ZXh0KSA/IG5ldyBDT05GSUcuY29udGV4dCgpIDogQ09ORklHLmNvbnRleHQ7XG5cdCAgY29udGV4dC51c2VyZGF0YSA9IG9wdHMudXNlcmRhdGE7XG5cdCAgY29udGV4dC5sb2dnZXIgPSB1dGlsTG9nZ2VyLmxvZ2dlcjtcblx0XG5cdCAgdmFyIGFwcCA9IHtcblx0ICAgIGNvbnRleHQ6IGNvbnRleHQsXG5cdCAgICBwdWJzdWI6IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ2FwbHVzX3B1YnN1YicpLFxuXHQgICAgcHVic3ViVHlwZTogb3B0cyAmJiBvcHRzLnB1YnN1YlR5cGVcblx0ICB9O1xuXHRcblx0ICB2YXIgY29tcG9zZSA9IG5ldyBDb21wb3NlKCk7XG5cdCAgY29tcG9zZS5jcmVhdGUoYXBwKTtcblx0ICAvLyDmiafooYzkuK3pl7Tku7Zcblx0ICBjb21wb3NlLndyYXAobWlkZGxld2FyZSwgZnVuY3Rpb24oKSB7XG5cdCAgICBhcHAuY29udGV4dC5zdGF0dXMgPSBhcGx1c1N0YXRpYy5DT01QTEVURTtcblx0ICAgIGlmIChvcHRzKSB7XG5cdCAgICAgIGlmIChvcHRzLm1pZGRsZXdhcmVNZXNzYWdlS2V5KSB7XG5cdCAgICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhbb3B0cy5taWRkbGV3YXJlTWVzc2FnZUtleSwgYXBwLmNvbnRleHRdKTsgIFxuXHQgICAgICB9XG5cdCAgICAgIGlmIChvcHRzLm1lc3NhZ2VGblF1ZXVlKSB7XG5cdCAgICAgICAgZWFjaChvcHRzLm1lc3NhZ2VGblF1ZXVlLCBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgICAgIGZuKHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKSwgQ09ORklHKTtcblx0ICAgICAgICB9KTsgIFxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcblx0ICAgICAgY2FsbGJhY2soYXBwLmNvbnRleHQpO1xuXHQgICAgfVxuXHQgIH0pKCk7XG5cdFxuXHR9O1xuXHRtb2R1bGUuZXhwb3J0cyA9IFJlZHVjZXI7XG5cblxuLyoqKi8gfSksXG4vKiA4NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvY29tcG9zZS5qc1xuXHQgKiDlh73mlbDpmJ/liJfljIXoo4XlmaggRXhwb3NlIGNvbXBvc2l0b3Jcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdHZhciB1dGlsTG9nZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHRmdW5jdGlvbiBjb21wb3NlICgpIHt9O1xuXHRcblx0Y29tcG9zZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24ocHJvcHMpIHtcblx0ICAvKipcblx0ICAgKiBjcmVhdGXlrp7pmYXkuIrmmK/lr7luZXfnmoTlsIHoo4XvvJtcblx0ICAgKiBjcmVhdGXov5Tlm57nmoTlrp7kvovlrp7pmYXkuIrlsLHmmK9uZXfmnoTpgKDlh7rnmoTlrp7kvovvvJtcblx0ICAgKiB0aGlz5Y2z5oyH5ZCR6LCD55So5b2T5YmNY3JlYXRl55qE5p6E6YCg5Ye95pWw77ybXG5cdCAgICovXG5cdCAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuXHQgICAgaWYgKHR5cGVvZiB0aGlzW25hbWVdID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICB0aGlzW25hbWVdID0gcHJvcHNbbmFtZV07XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXHRcblx0Y29tcG9zZS5wcm90b3R5cGUuY2FsbGVkTGlzdCA9IFtdO1xuXHRcblx0Y29tcG9zZS5wcm90b3R5cGUuc2V0Q2FsbGVkTGlzdCA9IGZ1bmN0aW9uKGkpIHtcblx0ICBpZiAodXRpbEFycmF5LmluZGV4b2YodGhpcy5jYWxsZWRMaXN0LCBpKSA9PT0gLTEpIHtcblx0ICAgIHRoaXMuY2FsbGVkTGlzdC5wdXNoKGkpO1xuXHQgIH1cblx0fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLnJlc2V0Q2FsbGVkTGlzdCA9IGZ1bmN0aW9uKCkge1xuXHQgIHRoaXMuY2FsbGVkTGlzdCA9IFtdO1xuXHR9O1xuXHRcblx0Y29tcG9zZS5wcm90b3R5cGUud3JhcCA9IGZ1bmN0aW9uKG13LCBjYWxsYmFjaykge1xuXHQgIHZhciBjb250ZXh0ID0gdGhpcztcblx0ICB2YXIgY3R4ID0gdGhpcy5jb250ZXh0IHx8IHt9O1xuXHQgIHZhciBjb21wb3NlID0gY3R4LmNvbXBvc2UgfHwge307XG5cdCAgdmFyIG1heFRpbWVvdXQgPSBjb21wb3NlLm1heFRpbWVvdXQgfHwgMTAgKiAxMDAwO1xuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlKSB7XG5cdCAgICB2YXIgc2l6ZSA9IG13Lmxlbmd0aDsgLy8g5Lit6Ze05Lu26Zif5YiX6ZW/5bqmXG5cdCAgICB2YXIgaSA9IDA7IC8vIOS4remXtOS7tue0ouW8lVxuXHQgICAgdmFyIGogPSAwOyAvLyDkuIDkuKrmoIfor4bvvIwwLeWIneWni+eKtuaAge+8jDEt5Lit6Ze05Lu25Zue6LCD5omn6KGM5LqGXG5cdCAgICB2YXIgc2xlZXBIYW5kZXIxO1xuXHQgICAgdmFyIHJ1biA9IGZ1bmN0aW9uKGluZGV4LCBzdGF0dXMpIHtcblx0ICAgICAgLy8gY29udGV4dC5wdWJzdWJJbmZvKGNvbnRleHQsIG13W2ldKTtcblx0ICAgICAgLy8g5Lit6Ze05Lu26Zif5YiX5omn6KGM5a6M5q+V5ZCO6L+U5ZueXG5cdCAgICAgIGlmIChpID09PSBzaXplKSB7XG5cdCAgICAgICAgc3RhdGUgPSAnZG9uZSc7XG5cdCAgICAgICAgY29udGV4dC5yZXNldENhbGxlZExpc3QoKTsgLy8g6YeN572uY2FsbGVkTGlzdOWPmOmHj1xuXHQgICAgICAgIC8vIHN0YXR1c+WmguaenOetieS6jmRvbmXvvIzor7TmmI7mmK/kuK3pgJTpgIDlh7rnmoTkuK3pl7Tku7bvvIzkuI3pnIDopoHmiafooYzlm57osINcblx0ICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykgJiYgc3RhdHVzICE9PSBzdGF0ZSkge1xuXHQgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCBzdGF0ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNsZWFyVGltZW91dChzbGVlcEhhbmRlcjEpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICAvLyB2YXIgY2Jfc3RhdGUgPSBudWxsO1xuXHQgICAgICAvLyDkv53or4Hmr4/kuKrkuK3pl7Tku7blj6rkvJrmiafooYzkuIDmrKFcblx0ICAgICAgaWYgKHV0aWxBcnJheS5pbmRleG9mKGNvbnRleHQuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG5cdCAgICAgICAgY29udGV4dC5zZXRDYWxsZWRMaXN0ICYmIGNvbnRleHQuc2V0Q2FsbGVkTGlzdChpKTtcblx0ICAgICAgICBpZiAobXcgJiYgbXdbaV0gJiYgaXNGdW5jdGlvbihtd1tpXVswXSkpIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgKiBAcGFyYW1zIHtBcnJheX0gbWlkZGxld2FyZVxuXHQgICAgICAgICAgICAgKiBAcGFyYW1zIHtBcnJheX0gbXNnXG5cdCAgICAgICAgICAgICAqL1xuXHQgICAgICAgICAgICBzdGF0ZSA9IG13W2ldWzBdLmNhbGwoY29udGV4dCwgc3RhdGUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgICAgICAgaiA9IDE7ICAvLyAxLeS4remXtOS7tuWbnuiwg+aJp+ihjOS6hlxuXHQgICAgICAgICAgICAgIHJ1bihpKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgICAgICBtc2c6IGVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgLy8g54q25oCB5Li6cGF1c2XnrYnlvoUyMDBtc+i9ruivou+8jOeKtuaAgeS4um51bWJlcuexu+Wei+eahOaVsOWAvOetieW+hXN0YXRlbXPova7or6Jcblx0ICAgICAgdmFyIGlzTnVtYmVyID0gdHlwZW9mIHN0YXRlID09PSAnbnVtYmVyJztcblx0ICAgICAgaWYgKHN0YXRlID09PSAncGF1c2UnIHx8IGlzTnVtYmVyKSB7XG5cdCAgICAgICAgaiA9IDA7XG5cdCAgICAgICAgLy8g5pyA5aSn562J5b6F5pe26ZW/XG5cdCAgICAgICAgdmFyIF90aW1lX291dCA9IGlzTnVtYmVyID8gc3RhdGUgOiBtYXhUaW1lb3V0O1xuXHQgICAgICAgIHZhciBfbXdfbmFtZSA9IG13W2ldID8gbXdbaV1bMV0gOiAnJztcblx0ICAgICAgICBzbGVlcEhhbmRlcjEgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYgKGogPT09IDApIHtcblx0ICAgICAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgICAgICAgIG1zZzogJ2p1bXAgdGhlIG1pZGRsZXdhcmUgYWJvdXQgJyArIF9td19uYW1lICsgJywgYmVjYXVzZSB3YWl0aW5nIHRpbWVvdXQgbWF4VGltZW91dCA9ICcgKyBfdGltZV9vdXRcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIHN0YXRlID0gbnVsbDtcblx0ICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgICAgICBydW4oaSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgX3RpbWVfb3V0KTtcblx0ICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ2RvbmUnKSB7XG5cdCAgICAgICAgLy8g54q25oCB5Li6ZG9uZeihqOekuue7k+adn++8jOS4jeeuoeWQjumdoui/mOacieayoeacieS4remXtOS7tumDvee7k+adn1xuXHQgICAgICAgIGkgPSBzaXplO1xuXHQgICAgICAgIHJ1bihpLCBzdGF0ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8g6buY6K6k54q25oCB77yM5Y+q566h5omn6KGM5Lit6Ze05Lu26Zif5YiXXG5cdCAgICAgICAgaSsrO1xuXHQgICAgICAgIHJ1bihpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIGlmIChjb250ZXh0LmNhbGxlZExpc3QgJiYgY29udGV4dC5jYWxsZWRMaXN0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgY29udGV4dC5yZXNldENhbGxlZExpc3QoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBydW4oaSk7XG5cdCAgfTtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gY29tcG9zZTtcblxuLyoqKi8gfSksXG4vKiA4NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9wbHVnaW5zTG9hZGVyLmpzXG5cdCAqIOaPkuS7tuWKoOi9veWZqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtcyBvcHRzIHtcblx0ICAgICAqICAgbWlkZGxld2FyZTogW10sXG5cdCAgICAgKiAgIHBsdWdpbnM6IFtdLFxuXHQgICAgICogICBjb25maWc6IHt9XG5cdCAgICAgKiB9XG5cdCAgICAgKi9cblx0ICAgIGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcblx0ICAgICAgdGhpcy5vcHRzID0gb3B0cztcblx0ICAgICAgaWYgKG9wdHMgJiYgdHlwZW9mIG9wdHMubWlkZGxld2FyZSA9PT0gJ29iamVjdCcgJiYgb3B0cy5taWRkbGV3YXJlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBvcHRzLm1pZGRsZXdhcmU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gW107XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5wbHVnaW5zX25hbWUgPSBbXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDliIblj5HorqLpmIXlj5jljJZcblx0ICAgICAqIEBwYXJhbSBvIHtcblx0ICAgICAqICAgcHVic3ViOiB7Li4ufSxcblx0ICAgICAqICAgY29udGV4dDogey4uLn1cblx0ICAgICAqIH0sXG5cdCAgICAgKiBAcGFyYW0gbXcg5b2T5YmN5omn6KGM55qE5Lit6Ze05Lu2XG5cdCAgICAgKi9cblx0ICAgIHB1YnN1YkluZm86IGZ1bmN0aW9uKGN0eCwgbXcpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgcHVic3ViID0gY3R4LnB1YnN1Yjtcblx0ICAgICAgICBpZiAocHVic3ViKSB7XG5cdCAgICAgICAgICBwdWJzdWIucHVibGlzaCgncGx1Z2luc19jaGFuZ2VfJyArIGN0eC5wdWJzdWJUeXBlLCBtdyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgICAgbXNnOiBlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoaW5kZXgpIHtcblx0ICAgICAgaWYoIWluZGV4KSBpbmRleCA9IDA7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIHZhciBtaWRkbGV3YXJlID0gdGhpcy5taWRkbGV3YXJlO1xuXHQgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0cyB8fCB7fTtcblx0ICAgICAgdmFyIHBsdWdpbnMgPSBvcHRzLnBsdWdpbnM7XG5cdCAgICAgIGlmIChwbHVnaW5zICYmIHR5cGVvZiBwbHVnaW5zID09PSAnb2JqZWN0JyAmJiBwbHVnaW5zLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICB2YXIgcGx1Z2luID0gcGx1Z2luc1tpbmRleF07XG5cdCAgICAgICAgdGhpcy5wbHVnaW5zX25hbWUucHVzaChwbHVnaW4ubmFtZSk7XG5cdCAgICAgICAgbWlkZGxld2FyZS5wdXNoKFtmdW5jdGlvbihzdGF0ZSwgY2Ipe1xuXHQgICAgICAgICAgX3NlbGYucHVic3ViSW5mbyh0aGlzLCBwbHVnaW4pO1xuXHQgICAgICAgICAgLy8g6I635Y+W5o+S5Lu25qih5Z2X6Lev5b6E5bm25Yid5aeL5YyWXG5cdCAgICAgICAgICB2YXIgbSA9IG5ldyBwbHVnaW4ucGF0aCgpO1xuXHRcblx0ICAgICAgICAgIC8vIOS4uuiKguecgeS7o+eggemHj++8jOm7mOiupOeahOWIneWni+WMluaWueazleWcqOWKoOi9veWZqOWGheWBmuWFnOW6leWkhOeQhu+8jOWNs+aPkuS7tuWGheaXoOeJueauiuaDheWGteaXoOmcgOWunueOsGluaXTmlrnms5Vcblx0ICAgICAgICAgIGlmICghbS5pbml0KSB7XG5cdCAgICAgICAgICAgIG0uaW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIOWwhuS4iuS4i+aWh+azqOWFpeWIsOaPkuS7tuWGhVxuXHQgICAgICAgICAgbS5pbml0KHtcblx0ICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuXHQgICAgICAgICAgICBjb25maWc6IGFzc2lnbihwbHVnaW4uY29uZmlnIHx8IHt9LCBvcHRzLmNvbmZpZylcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgcmV0dXJuIG0ucnVuKHN0YXRlLCBmdW5jdGlvbiAobXNnKSB7XG5cdCAgICAgICAgICAgIC8vIOi/memHjOS9v+eUqDHmr6vnp5Llu7bov5/miafooYzvvIzpmLLmraLkuK3pl7Tku7bkuLvkvZPlhoXnmoRjYWxsYmFja+WFiOaJp+ihjO+8jOWvvOiHtOahhuaetuaLv+S4jeWIsOS4remXtOS7tnJldHVybueahOetieW+heaXtumVv++8jOS7juiAjOWvvOiHtOebkeaOp+W8guW4uFxuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICBjYihwbHVnaW4sIG1zZyk7XG5cdCAgICAgICAgICAgIH0sIDEpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSwgcGx1Z2luLm5hbWVdKTtcblx0XG5cdCAgICAgICAgaW5kZXgrKztcblx0ICAgICAgICBpZihwbHVnaW5zW2luZGV4XSl7XG5cdCAgICAgICAgICByZXR1cm4gdGhpcy5ydW4oaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWlkZGxld2FyZTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDg3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9hcGx1cy5qc1xuXHQgKiByZXF1ZXN0XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBqaXpoYS53eWpAYmxvZyBodHRwOi8vb2xkai5uZXRcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8g5Y+R6YCB5Zu+54mHR0VU6K+35rGCXG5cdGV4cG9ydHMuc2VuZEltZyA9IGZ1bmN0aW9uKHNyYywgdGltZW91dCkge1xuXHQgIHZhciB3aW4gPSB3aW5kb3cgfHwge307XG5cdCAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuXHQgIHZhciBybmRfaWQgPSBcIl9pbWdfXCIgKyBNYXRoLnJhbmRvbSgpO1xuXHRcblx0ICAvLyDlnKjlhajlsYDlj5jph4/kuK3lvJXnlKggaW1n77yM6Ziy5q2iIGltZyDooqvlnoPlnL7lm57mlLbmnLrliLbov4fml6nlm57mlLbpgKDmiJDor7fmsYLlj5HpgIHlpLHotKVcblx0ICAvLyDlj4LogIPvvJpodHRwOi8vb2xkai5uZXQvYXJ0aWNsZS9vbmUtdGhpbmctdG8tbm90aWNlLWFib3V0LW5ldy1pbWFnZS9cblx0ICB3aW5bcm5kX2lkXSA9IGltZztcblx0XG5cdCAgdmFyIHJlbW92ZVJuZElkID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHdpbltybmRfaWRdKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgZGVsZXRlIHdpbltybmRfaWRdO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgd2luW3JuZF9pZF0gPSB1bmRlZmluZWQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBpbWcub25sb2FkID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKCkge1xuXHQgICAgcmVtb3ZlUm5kSWQoKTtcblx0ICB9O1xuXHQgIGltZy5vbmVycm9yID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKCkge1xuXHQgICAgcmVtb3ZlUm5kSWQoKTtcblx0ICB9O1xuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgIGlmICh3aW5kb3dbcm5kX2lkXSkge1xuXHQgICAgICB3aW5kb3dbcm5kX2lkXS5zcmMgPSAnJztcblx0ICAgICAgcmVtb3ZlUm5kSWQoKTtcblx0ICAgIH1cblx0ICB9LCB0aW1lb3V0IHx8IDUwMDApO1xuXHRcblx0ICBpbWcuc3JjID0gc3JjO1xuXHQgIGltZyA9IG51bGw7IC8vIOWIoOmZpOS4tOaXtuWPmOmHj+eahOW8leeUqFxuXHQgIHJldHVybiBzcmM7XG5cdH07XG5cdFxuXHQvLyDlj5HpgIFzZW5kQmVhY29uIHBvc3Tor7fmsYJcblx0ZXhwb3J0cy5wb3N0RGF0YSA9IGZ1bmN0aW9uICh1cmwsIGRhdGEpIHtcblx0ICAvLyBmb3IgKHZhciBrIGluIGRhdGEpIHtcblx0ICAvLyAgIGlmIChrICE9PSAnY25hJykge1xuXHQgIC8vICAgICBkYXRhW2tdID0gZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFba10pO1xuXHQgIC8vICAgfVxuXHQgIC8vIH1cblx0ICBuYXZpZ2F0b3Iuc2VuZEJlYWNvbih1cmwsIGRhdGEpO1xuXHQgIHJldHVybiB1cmw7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogODggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIHB2aWRcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgbG9nSWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTtcblx0XG5cdC8qKlxuXHQgKiDliKTmlq3mmK/lkKbnpoHnlKjkuoZwdmlkXG5cdCAqIEByZXR1cm4gW0Jvb2xlYW5dXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0Rpc2FibGVQdmlkICgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgZGlzYWJsZVB2aWQ7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBtZXRhX3ZhbHVlID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWRpc2FibGUtcHZpZCcpICsgJyc7XG5cdCAgICBpZiAobWV0YV92YWx1ZSA9PT0gJ3RydWUnKSB7XG5cdCAgICAgIGRpc2FibGVQdmlkID0gdHJ1ZTtcblx0ICAgIH0gZWxzZSBpZiAobWV0YV92YWx1ZSA9PT0gJ2ZhbHNlJykge1xuXHQgICAgICBkaXNhYmxlUHZpZCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZXJyKXtcblx0ICB9XG5cdCAgcmV0dXJuIGRpc2FibGVQdmlkO1xuXHR9O1xuXHRleHBvcnRzLmlzRGlzYWJsZVB2aWQgPSBpc0Rpc2FibGVQdmlkO1xuXHRcblx0LyoqXG5cdCAqIOWkhOeQhumhtemdouS4iueahCBwdiBpZFxuXHQgKi9cblx0ZXhwb3J0cy5tYWtlUFZJZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgcHJlX3B2aWQgPSBhcGx1cy5wdmlkO1xuXHQgIHZhciB1cmwgPSBsb2NhdGlvbiAmJiBsb2NhdGlvbi5ocmVmO1xuXHQgIHZhciB0aXRsZSA9IGRvY3VtZW50ICYmIGRvY3VtZW50LnRpdGxlO1xuXHQgIGFwbHVzLnB2aWQgPSBsb2dJZC5nZXRMb2dJZCh1cmwsIHRpdGxlKTtcblx0ICB2YXIgbXNncyA9IFsncHZpZENoYW5nZScsIHtcblx0ICAgIHByZV9wdmlkOiBwcmVfcHZpZCxcblx0ICAgIHB2aWQ6IGFwbHVzLnB2aWRcblx0ICB9XTtcblx0ICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuXHQgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgcmV0dXJuIGlzRGlzYWJsZVB2aWQoKSA/ICcnIDogYXBsdXMucHZpZDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UHZJZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICByZXR1cm4gaXNEaXNhYmxlUHZpZCgpID8gJycgOiBhcGx1cy5wdmlkO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuXHQgKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkwKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46ICBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1c19jb25maWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWc7XG5cdCAgICAgIHZhciBBUExVU19RVUVVRSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUU7XG5cdFxuXHQgICAgICB2YXIgY29udGV4dCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICAgICAgdmFyIHF1ZSA9IGNvbnRleHRbQVBMVVNfUVVFVUVdIHx8IFtdO1xuXHQgICAgICB2YXIgcnMgPSBhY3Rpb24uZ2V0Rm9ybWF0UXVldWUocXVlLCAnbWV0YVF1ZXVlJyk7XG5cdCAgICAgIGNvbnRleHRbQVBMVVNfUVVFVUVdID0gcnMucXVldWU7XG5cdCAgICAgIGFjdGlvbi5wcm9jZXNzR29sZGxvZ1F1ZXVlKHJzLmZvcm1hdFF1ZXVlLCB0aGlzLm9wdGlvbnMuY29uZmlnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogOTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpO1xuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge0FycmF5fSBRVUVVRVxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcblx0ICogfVxuXHQgKi9cblx0dmFyIHByb2Nlc3NHb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoUVVFVUUsIG9wdHMpIHtcblx0ICBmdW5jdGlvbiBmKCkge1xuXHQgICAgaWYgKCFRVUVVRSB8fCAhdXRpbEFycmF5LmlzQXJyYXkoUVVFVUUpIHx8ICFRVUVVRS5sZW5ndGgpIHJldHVybjtcblx0ICAgIC8vIOaOkuW6j1xuXHQgICAgdmFyIHF1ZSA9IGdldEZvcm1hdFF1ZXVlKFFVRVVFKS5xdWV1ZTtcblx0ICAgIHZhciB0YXNrID0ge307XG5cdCAgICB2YXIgZGVsYXlUYXNrcyA9IFtdO1xuXHQgICAgd2hpbGUgKHRhc2sgPSBxdWUuc2hpZnQoKSkgeyAvLyDkvp3mrKHmiafooYwgd2luZG93LmFwbHVzX3F1ZXVlIOS4reeahOS7u+WKoVxuXHQgICAgICBwcm9jZXNzVGFzayh0YXNrLCBvcHRzLCBmdW5jdGlvbiAodCkge1xuXHQgICAgICAgIGRlbGF5VGFza3MucHVzaCh0KTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICBpZiAoZGVsYXlUYXNrcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHdoaWxlICh0YXNrID0gZGVsYXlUYXNrcy5zaGlmdCgpKSB7XG5cdCAgICAgICAgICBwcm9jZXNzVGFzayh0YXNrLCBvcHRzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIDEwMCk7XG5cdCAgICB9XG5cdCAgfTtcblx0ICB0cnkge1xuXHQgICAgZigpO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICBtc2c6IGVcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5wcm9jZXNzR29sZGxvZ1F1ZXVlID0gcHJvY2Vzc0dvbGRsb2dRdWV1ZTtcblx0XG5cdGZ1bmN0aW9uIGdldE1ldGFJbmZvKCkge1xuXHQgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuXHQgIHJldHVybiBtZXRhX2luZm87XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEFwbHVzSG9sZFR5cGUgKCkge1xuXHQgIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgIHZhciB1YWlkID0gbWV0YV9pbmZvLnVhaWQgKyAnJztcblx0ICBpZiAodWFpZCA9PT0gJzEnICYmICFtZXRhX2luZm8uX2Fub255X2lkKSB7XG5cdCAgICByZXR1cm4gJ0JMT0NLJztcblx0ICB9XG5cdCAgcmV0dXJuIG1ldGFfaW5mb1snX2hvbGQnXSB8fCBtZXRhX2luZm9bJ2FwbHVzLXdhaXRpbmcnXTtcblx0fVxuXHRcblx0dmFyIEFQTFVTX0hPTERfVVNFUklEX1FVRVVFID0gW107XG5cdHZhciBBUExVU19IT0xEX0FOT05ZX1FVRVVFID0gW107XG5cdHZhciBBUExVU19IT0xEX1FVRVVFID0gW107XG5cdFxuXHRmdW5jdGlvbiBmaWx0ZXJUYXNrICh0YXNrKSB7XG5cdCAgdmFyIGhvbGRUeXBlID0gZ2V0QXBsdXNIb2xkVHlwZSgpO1xuXHQgIC8vIGNvbnNvbGUubG9nKCdob2xkVHlwZSA9PT0gJywgaG9sZFR5cGUpO1xuXHQgIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgIHZhciBmbGFnID0gdHJ1ZTtcblx0XG5cdCAgLy8gMDogXCJfaG9sZFwiXG5cdCAgLy8gMTogXCJTVEFSVFwiXG5cdCAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3VtZW50cyB8fCBbXTtcblx0ICB2YXIgbWV0YUtleSA9IGFyZ3NbMF07XG5cdCAgdmFyIG1ldGFWYWx1ZSA9IGFyZ3NbMV07XG5cdCAgdmFyIFNUQVJUID0gJ1NUQVJUJztcblx0ICBpZiAobWV0YUtleSA9PT0gJ19ob2xkJyAmJiBtZXRhVmFsdWUgPT09IFNUQVJUKSB7XG5cdCAgICByZXR1cm4gU1RBUlQ7XG5cdCAgfVxuXHQgIGlmIChtZXRhS2V5ID09PSAnX2Fub255X2lkJyAmJiBtZXRhVmFsdWUpIHtcblx0ICAgIHJldHVybiBTVEFSVDtcblx0ICB9XG5cdCAgaWYgKHRhc2sgJiYgL3NlbmRQVnxyZWNvcmR8c2V0UGFnZVNQTXxzZXRNZXRhSW5mb3xhcHBlbmRNZXRhSW5mbyQvLnRlc3QodGFzay5hY3Rpb24pKSB7XG5cdCAgICBzd2l0Y2ggKGhvbGRUeXBlKSB7XG5cdCAgICBjYXNlICdCTE9DSyc6XG5cdCAgICAgIGlmICghbWV0YV9pbmZvW2hvbGRUeXBlXSkge1xuXHQgICAgICAgIEFQTFVTX0hPTERfUVVFVUUucHVzaCh0YXNrKTtcblx0ICAgICAgICBmbGFnID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWs7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZsYWc7XG5cdH1cblx0XG5cdFxuXHQvLyB2YXIgcHJvY2Vzc2VkID0gZmFsc2U7XG5cdGZ1bmN0aW9uIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlIChvcHRzKSB7XG5cdCAgLy8gaWYgKCFwcm9jZXNzZWQpIHtcblx0ICAvLyAgIHByb2Nlc3NlZCA9IHRydWU7XG5cdCAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1VTRVJJRF9RVUVVRSwgb3B0cyk7XG5cdCAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcblx0ICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfUVVFVUUsIG9wdHMpOyAgXG5cdCAgLy8gfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBxdWV1ZU5hbWU6IGFwbHVzX3F1ZXVlIHx8IGdvbGRsb2dfcXVldWVcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcblx0ICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG5cdCAqIH1cblx0ICovXG5cdGV4cG9ydHMuc3Vic2NyaWJlQW5kUHJvY2Vzc1F1ZXVlID0gZnVuY3Rpb24gKHF1ZXVlTmFtZSwgb3B0cykge1xuXHQgIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuXHQgIHF1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuU0VUX01FVEFfSU5GTywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuX1VTRVJfSUQgJiYgdmFsdWUpIHtcblx0ICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcblx0ICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9BTk9OWV9JRCAmJiB2YWx1ZSkge1xuXHQgICAgICAgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSwgb3B0cyk7XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnX2hvbGQnICYmIHZhbHVlID09PSAnU1RBUlQnKSB7XG5cdCAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZXRNZXRob2ROYW1lIChrZXksIGlzT3BlbkFwaSkge1xuXHQgIGlmIChpc09wZW5BcGkgJiYgYXBsdXNTdGF0aWMub3BlbkFQSXMuaW5kZXhPZihrZXkpID4gLTEpIHtcblx0ICAgIGtleSA9ICdfJyArIGtleTtcblx0ICB9XG5cdCAgcmV0dXJuIGtleTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gdGFza1xuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcblx0ICogfVxuXHQgKi9cblx0dmFyIHByb2Nlc3NUYXNrID0gZnVuY3Rpb24odGFzaywgb3B0cywgY2FsbGJhY2spIHtcblx0ICB2YXIgaXNPcGVuQXBpID0gISFvcHRzLmlzT3BlbkFwaTtcblx0ICB2YXIgYWN0aW9uID0gdGFzayA/IHRhc2suYWN0aW9uIDogJyc7XG5cdCAgdmFyIGFyZ3MgPSB0YXNrID8gdGFzay5hcmd1bWVudHMgOiAnJztcblx0XG5cdCAgdmFyIHJlc3VsdCA9IGZpbHRlclRhc2sodGFzayk7XG5cdCAgaWYgKCFyZXN1bHQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGNvbnRleHQgPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHsgLy8g56Gu5L+d5p+Q5Liq5Lu75Yqh5omn6KGM5aSx6LSl5LiN5Lya5b2x5ZON5YW25a6D5Lu75YqhXG5cdCAgICBpZiAoYWN0aW9uICYmIGFyZ3MgJiYgdXRpbEFycmF5LmlzQXJyYXkoYXJncykpIHtcblx0ICAgICAgdmFyIGEgPSBhY3Rpb24uc3BsaXQoJy4nKTtcblx0ICAgICAgdmFyIG9iaiA9IGNvbnRleHQ7XG5cdCAgICAgIHZhciBfZm4gPSBjb250ZXh0O1xuXHQgICAgICB2YXIgbWV0aG9kTmFtZTtcblx0ICAgICAgaWYgKGEubGVuZ3RoID09PSAzKSB7XG5cdCAgICAgICAgb2JqID0gY29udGV4dFthWzBdXVthWzFdXSB8fCB7fTtcblx0ICAgICAgICBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShhWzJdLCBpc09wZW5BcGkpO1xuXHQgICAgICAgIF9mbiA9IG9ialttZXRob2ROYW1lXSA/IG9ialttZXRob2ROYW1lXSA6ICcnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdoaWxlIChhLmxlbmd0aCkge1xuXHQgICAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYS5zaGlmdCgpLCBpc09wZW5BcGkpO1xuXHQgICAgICAgICAgX2ZuID0gb2JqID0gb2JqW21ldGhvZE5hbWVdO1xuXHQgICAgICAgICAgaWYgKCFvYmopIHsgLy8g6Z2e5rOVIGFjdGlvblxuXHQgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcblx0ICAgICAgICAgICAgICBjYWxsYmFjayh0YXNrKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChpc0Z1bmN0aW9uKF9mbikpIHtcblx0ICAgICAgICBfZm4uYXBwbHkob2JqLCBhcmdzKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocmVzdWx0ID09PSAnU1RBUlQnKSB7XG5cdCAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgbXNnOiBlXG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMucHJvY2Vzc1Rhc2sgPSBwcm9jZXNzVGFzaztcblx0XG5cdHZhciBnZXRGb3JtYXRRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZSwgdHlwZSkge1xuXHQgIHZhciBxdWV1ZU1hcCA9IHtcblx0ICAgIHN1YnNjcmliZU13Q2hhbmdlUXVldWU6IFtdLFxuXHQgICAgc3Vic2NyaWJlTWV0YVF1ZXVlOiBbXSxcblx0ICAgIHN1YnNjcmliZVF1ZXVlOiBbXSxcblx0ICAgIG1ldGFRdWV1ZTogW10sXG5cdCAgICBvdGhlcnNRdWV1ZTogW11cblx0ICB9O1xuXHRcblx0ICB2YXIgcSA9IFtdO1xuXHQgIHZhciB0YXNrID0ge307XG5cdCAgd2hpbGUgKHRhc2sgPSBxdWV1ZS5zaGlmdCgpKSB7IC8vIOS+neasoeaJp+ihjCB3aW5kb3cuYXBsdXNfcXVldWUg5Lit55qE5Lu75YqhXG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgYWMgPSB0YXNrLmFjdGlvbjtcblx0ICAgICAgdmFyIGtleSA9IHRhc2suYXJndW1lbnRzWzBdO1xuXHQgICAgICBpZiAoL3N1YnNjcmliZS8udGVzdChhYykpIHtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnc2V0TWV0YUluZm8nKSB7XG5cdCAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNZXRhUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWIHx8IGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEopIHtcblx0ICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoL01ldGFJbmZvLy50ZXN0KGFjKSkge1xuXHQgICAgICAgIHF1ZXVlTWFwLm1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgIG1zZzogZVxuXHQgICAgICB9KTtcblx0ICAgICAgcXVldWVNYXAub3RoZXJzUXVldWUucHVzaCh0YXNrKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIGZvcm1hdFF1ZXVlO1xuXHQgIGlmICh0eXBlICYmIHF1ZXVlTWFwW3R5cGVdKSB7XG5cdCAgICBmb3JtYXRRdWV1ZSA9IHF1ZXVlTWFwW3R5cGVdO1xuXHQgICAgcXVldWVNYXBbdHlwZV0gPSBbXTtcblx0ICB9XG5cdCAgcSA9IHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUuY29uY2F0KHF1ZXVlTWFwLm1ldGFRdWV1ZSk7XG5cdCAgcSA9IHEuY29uY2F0KHF1ZXVlTWFwLnN1YnNjcmliZVF1ZXVlKTtcblx0ICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlTWV0YVF1ZXVlLCBxdWV1ZU1hcC5vdGhlcnNRdWV1ZSk7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHF1ZXVlOiBxLFxuXHQgICAgZm9ybWF0UXVldWU6IGZvcm1hdFF1ZXVlXG5cdCAgfTtcblx0fTtcblx0ZXhwb3J0cy5nZXRGb3JtYXRRdWV1ZSA9IGdldEZvcm1hdFF1ZXVlO1xuXG5cbi8qKiovIH0pLFxuLyogOTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdHZhciB1dGlsRG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdHZhciB1dGlsRXRhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpO1xuXHR2YXIgdXRpbFN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIHB25Y+R6YCB5Yiw5ZOq6YeM5Y67XG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuXHQgICAgICBpZiAodXRpbFN0b3JlLnRlc3QoKSkge1xuXHQgICAgICAgIHZhciBfY25hID0gdXRpbERhdGEuZ2V0THNDbmEoYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5FVEFHX1NUT1JBR0VfS0VZLCBfc2VsZi50b2RheSk7XG5cdCAgICAgICAgaWYgKCFfY25hKSB7XG5cdCAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgIHZhciBhcGx1c19yaG9zdF92ID0gYXBsdXMuXyQubWV0YV9pbmZvWydhcGx1cy1yaG9zdC12J107XG5cdCAgICAgICAgICAgIGlmIChhcGx1c19yaG9zdF92KSB7XG5cdCAgICAgICAgICAgICAgX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcuZWdVcmwgPSBhcGx1c19yaG9zdF92ICsgJy9lZy5qcyc7XG5cdCAgICAgICAgICAgICAgdmFyIGVnVXJsID0gdXRpbEV0YWcuZ2V0VXJsKF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnIHx8IHt9KTtcblx0ICAgICAgICAgICAgICB1dGlsRG9tLmxvYWRTY3JpcHQoZWdVcmwsIGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIC8vIHZhciBFdGFnID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnRXRhZycpO1xuXHQgICAgICAgICAgICAgICAgaWYgKGVyciAmJiBlcnIudHlwZSAhPT0gJ2Vycm9yJykge1xuXHQgICAgICAgICAgICAgICAgICB1dGlsRGF0YS5zZXRMc0NuYShhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkVUQUdfU1RPUkFHRV9LRVksIF9zZWxmLnRvZGF5LCBhcGx1cy5FdGFnKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSwgMTAwMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogOTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuXHQgKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkwKTtcblx0XG5cdHZhciBRdWV1ZSA9IEJhc2UuZXh0ZW5kKHtcblx0ICBwdXNoOiBmdW5jdGlvbih0YXNrKSB7XG5cdCAgICB0aGlzLmxlbmd0aCsrO1xuXHQgICAgYWN0aW9uLnByb2Nlc3NUYXNrKHRhc2ssIHRoaXMub3B0cyk7ICBcblx0ICB9LFxuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBwcm9jZXNzQXBsdXNRdWV1ZTogZnVuY3Rpb24gKHF1ZXVlTmFtZSkge1xuXHQgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuXHQgICAgICBhY3Rpb24ucHJvY2Vzc0dvbGRsb2dRdWV1ZShxdWUsIG9wdHMpO1xuXHQgICAgICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUsIFF1ZXVlLmNyZWF0ZSh7XG5cdCAgICAgICAgb3B0czogb3B0cywgXG5cdCAgICAgICAgc3RhcnRMZW5ndGg6IHF1ZS5sZW5ndGgsXG5cdCAgICAgICAgbGVuZ3RoOiAwXG5cdCAgICAgIH0pKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW1zIHtTdHJpbmd9IHR5cGVcblx0ICAgICAqL1xuXHQgICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuXHQgICAgICB2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFO1xuXHRcblx0ICAgICAgdGhpcy5wcm9jZXNzQXBsdXNRdWV1ZShBUExVU19RVUVVRSk7XG5cdFxuXHQgICAgICBpZiAoQVBMVVNfUVVFVUUgPT09ICdhcGx1c19xdWV1ZScpIHtcblx0ICAgICAgICB0aGlzLnByb2Nlc3NBcGx1c1F1ZXVlKCdnb2xkbG9nX3F1ZXVlJyk7XG5cdCAgICAgIH1cblx0ICAgICAgYWN0aW9uLnN1YnNjcmliZUFuZFByb2Nlc3NRdWV1ZShBUExVU19RVUVVRSwgdGhpcy5vcHRpb25zLmNvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDkzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDov5nmmK/kuIDkuKrliqDovb3lmajvvIznlKjkuo7ng63liqDovb1KU+aPkuS7tlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciB1dGlsRG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTtcblx0Ly8gdmFyIHBsdWdpbkxvYWRlck1hcCA9IHt9O1xuXHQvKipcblx0ICogRE9NUmVhZHnlkI7lvIDlp4vmiafooYzliqDovb1hcGx1c0pT5o+S5Lu255qE5Yqo5L2cXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuXHQgICAgICogICBsb2dDb25maWc6IHtsb2dDb25maWd9XG5cdCAgICAgKiB9XG5cdCAgICAgKi9cblx0ICAgIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gLyoqXG5cdCAgICAvLyAgKiDliqDovb3oh6rliqjmm53lhYlcXOiHquWKqOeCueWHu+eahGpzXG5cdCAgICAvLyAgKiBAcGFyYW1zIHtTdHJpbmd9IG1ldGFLZXkgJ2FwbHVzLWF1dG8tZXhwJyB8ICdhcGx1cy1hdXRvLWNsaydcblx0ICAgIC8vICAqIEBwYXJhbXMge1N0cmluZ30gbWV0YVZhbHVlXG5cdCAgICAvLyAgKi9cblx0ICAgIC8vIGxvYWRBcGx1c1BsdWdpbjogZnVuY3Rpb24gKG1ldGFLZXkpIHtcblx0ICAgIC8vICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAvLyAgIHZhciBjZG5QYXRoID0gY29uZmlnW21ldGFLZXldO1xuXHQgICAgLy8gICB2YXIgcGx1Z2luX3BhdGhzID0gYXBsdXMuZ2V0Q2RuUGF0aCgpICsgY2RuUGF0aDtcblx0ICAgIC8vICAgaWYgKGNkblBhdGggJiYgIWFwbHVzW2NvbmZpZy5nbG9iYWxOYW1lXSAmJiAhcGx1Z2luTG9hZGVyTWFwW2NkblBhdGhdKSB7XG5cdCAgICAvLyAgICAgdXRpbERvbS5hZGRTY3JpcHQocGx1Z2luX3BhdGhzKTtcblx0ICAgIC8vICAgICBwbHVnaW5Mb2FkZXJNYXBbY2RuUGF0aF0gPSB0cnVlO1xuXHQgICAgLy8gICB9XG5cdCAgICAvLyB9LFxuXHRcblx0ICAgIGFkZFN0eWxlOiBmdW5jdGlvbiAoaWQsIHN0eWxlVXJsKSB7XG5cdCAgICAgIHZhciBzdHlsZUlkID0gaWQgKyAnX3N0eWxlJztcblx0ICAgICAgdmFyIHN0eWxlTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0eWxlSWQpO1xuXHQgICAgICBpZiAoIXN0eWxlTm9kZSkge1xuXHQgICAgICAgIHN0eWxlTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcblx0ICAgICAgICBzdHlsZU5vZGUuaWQgPSBzdHlsZUlkO1xuXHQgICAgICAgIHN0eWxlTm9kZS5ocmVmID0gc3R5bGVVcmw7XG5cdCAgICAgICAgc3R5bGVOb2RlLnJlbCA9ICdzdHlsZXNoZWV0Jztcblx0ICAgICAgICBzdHlsZU5vZGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdCAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKS5pdGVtKDApLmFwcGVuZENoaWxkKHN0eWxlTm9kZSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgdmFyIGlzX2luX2lmcmFtZSA9IHBhcmVudCAhPT0gc2VsZjsgIC8vIOW9k+WJjemhtemdouaYr+WQpuWcqCBpZnJhbWUg5LitXG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICBpZiAoIWlzX2luX2lmcmFtZSAmJiBjb25maWcudXJsUnVsZXMpIHtcblx0ICAgICAgICBlYWNoKGNvbmZpZy51cmxSdWxlcywgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKHYucnVsZSk7XG5cdCAgICAgICAgICB2YXIgbWF0Y2hlZEluTFM7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBtYXRjaGVkSW5MUyA9IHYuaWQgPyB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh2LmlkKSA6ICcnO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgICAgIGlmIChyZWcudGVzdChsb2NhdGlvbi5ocmVmKSB8fCBtYXRjaGVkSW5MUykge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHYuaWQsIHRydWUpO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICAgICAgICBpZiAodXRpbEFycmF5LmlzQXJyYXkodi5jZG5QYXRoKSkge1xuXHQgICAgICAgICAgICAgIGVhY2godi5jZG5QYXRoLCBmdW5jdGlvbiAocGF0aCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKC9cXC5jc3MkLy50ZXN0KHBhdGgpKSB7XG5cdCAgICAgICAgICAgICAgICAgIF9zZWxmLmFkZFN0eWxlKHYuaWQsIHBhdGgpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXFwuanMvLnRlc3QocGF0aCkpIHtcblx0ICAgICAgICAgICAgICAgICAgdXRpbERvbS5hZGRTY3JpcHQocGF0aCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdXRpbERvbS5hZGRTY3JpcHQodi5jZG5QYXRoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ3NldE1ldGFJbmZvJywgZnVuY3Rpb24gKG1ldGFLZXksIG1ldGFWYXVlKSB7XG5cdCAgICAgIC8vICAgX3NlbGYubG9hZEFwbHVzUGx1Z2luKG1ldGFLZXksIG1ldGFWYXVlKTtcblx0ICAgICAgLy8gfSk7XG5cdCAgICAgIC8vIGlmICgvYXBsdXNfd2VidnRfbWVzc2FnZXIvLnRlc3QobG9jYXRpb24uaHJlZikpIHtcblx0ICAgICAgLy8gICB1dGlsRG9tLmFkZFNjcmlwdChwbHVnaW5fcGF0aHMpO1xuXHQgICAgICAvLyB9XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDk0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9hcGx1cy5qc1xuXHQgKiDmqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBqaXpoYS53eWpAYmxvZyBodHRwOi8vb2xkai5uZXRcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBsdXNfY29uZmlnKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciB3aW4gPSB3aW5kb3c7XG5cdCAgICB2YXIgX2sgPSAnZ190Yl9hcGx1c19sb2FkZWQnO1xuXHQgICAgaWYgKHdpbltfa10pIHJldHVybjtcblx0ICAgIHdpbltfa10gPSAxO1xuXHQgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5NSkuaXNEZWJ1Z0FwbHVzKCk7XG5cdCAgICB2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHQgICAgdmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTtcblx0ICAgIHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHQgICAgdmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0ICAgIHZhciBhcGx1c2luaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KTtcblx0XG5cdCAgICB2YXIgUlVOTklORyA9ICdydW5uaW5nJztcblx0ICAgIC8vIHZhciBDT01QTEVURSA9ICdjb21wbGV0ZSc7XG5cdCAgICB2YXIgYXBsdXNTdGF0dXMgPSBbJ2FwbHVzUmVhZHknLCBSVU5OSU5HXTtcblx0ICAgIHV0aWxQdWJzdWIuZG9QdWJNc2coYXBsdXNTdGF0dXMpO1xuXHRcblx0ICAgIGFwbHVzaW5pdC5ydW4oe1xuXHQgICAgICBwbHVnaW5zOiBhcGx1c19jb25maWcucGx1Z2lucyxcblx0ICAgICAgY29udGV4dDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjb25maWdfcHZfY29udGV4dCA9IHtcblx0ICAgICAgICAgIFBBR0VfTE9BRF9USU1FOiBuZXcgRGF0ZSgpXG5cdCAgICAgICAgfTtcblx0ICAgICAgICB2YXIgUExVR0lOU19QViA9IFtdO1xuXHQgICAgICAgIGVhY2goYXBsdXNfY29uZmlnLnBsdWdpbnMsIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWcgfHwge307XG5cdCAgICAgICAgICBpZiAodi5uYW1lID09PSAnYXBsdXNfbG9nX2luamVjdCcgJiYgdi5jb25maWcgJiYgdi5jb25maWcucGx1Z2lucykge1xuXHQgICAgICAgICAgICBQTFVHSU5TX1BWID0gdi5jb25maWcucGx1Z2lucy5wdjtcblx0ICAgICAgICAgICAgZWFjaChQTFVHSU5TX1BWLCBmdW5jdGlvbiAodikge1xuXHQgICAgICAgICAgICAgIGNvbmZpZ19wdl9jb250ZXh0W3YubmFtZV0gPSB2LmNvbmZpZztcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgcmV0dXJuIHV0aWxEYXNoLmFzc2lnbihjb25maWdfcHZfY29udGV4dCwge1xuXHQgICAgICAgICAgYXBsdXNfY29uZmlnOiBhcGx1c19jb25maWdcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgbXNnOiAnQVBMVVMgSU5JVCBTVUNDRVNTJ1xuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIC8vIFRPRE8g5Yqg55uR5o6nXG5cdCAgICAvLyBjb25zb2xlLmxvZyhlKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBpc0RlYnVnO1xuXHRcblx0LyoqXG5cdCAqIOaYr+WQpuW8gOWQr2RlYnVn5qih5byP5YWl5Y+j77yM5ZyodXJs5Lit5Yqg5YWlZGVidWdBcGx1cz10cnVlXG5cdCAqL1xuXHRleHBvcnRzLmlzRGVidWdBcGx1cyA9IGZ1bmN0aW9uIChkZWJ1Zykge1xuXHQgIGlmICh0eXBlb2YgaXNEZWJ1ZyA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gaXNEZWJ1Zztcblx0ICB9XG5cdCAgLy9wYXJhbWV0ZXIgaXMgaW52YWxpZFxuXHQgIGlmICh0eXBlb2YgZGVidWcgPT09ICdib29sZWFuJykge1xuXHQgICAgaXNEZWJ1ZyA9IGRlYnVnO1xuXHQgIH1cblx0ICBpZiAobG9jYWxTdG9yYWdlICYmIGxvY2F0aW9uKSB7XG5cdCAgICB2YXIgbWF0Y2hfdmFsdWUgPSBsb2NhdGlvbi5ocmVmLm1hdGNoKC9hcGx1c0RlYnVnPSh0cnVlfGZhbHNlKS8pO1xuXHQgICAgaWYgKG1hdGNoX3ZhbHVlICYmIG1hdGNoX3ZhbHVlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FwbHVzRGVidWcnLCBtYXRjaF92YWx1ZVsxXSk7XG5cdCAgICB9XG5cdCAgICBpc0RlYnVnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FwbHVzRGVidWcnKSA9PT0gJ3RydWUnO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpc0RlYnVnID0gZmFsc2U7XG5cdCAgfVxuXHQgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoJ2FwbHVzRGVidWcnLCBpc0RlYnVnKTsgIFxuXHQgIHJldHVybiBpc0RlYnVnO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogOTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGFwbHVzIEFQSVxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBSZWR1Y2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7XG5cdFxuXHQvKipcblx0ICog5bCG5ZCO57ut55qEaW5pdOWKqOS9nOmDveWBmuaIkOaPkuS7tu+8jOebruWJjeWPquaciXdoZXJlX3RvX3NlbmRwduS4gOmhuVxuXHQgKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIHBsdWdpbnNcblx0ICogICBjb250ZXh0XG5cdCAqIH1cblx0ICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrXG5cdCAqXG5cdCAqL1xuXHRleHBvcnRzLnJ1biA9IGZ1bmN0aW9uIChvcHRzLCBjYWxsYmFjaykge1xuXHQgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcblx0ICByZWR1Y2VyLnJ1bih7XG5cdCAgICBwbHVnaW5zOiBvcHRzLnBsdWdpbnMsXG5cdCAgICBjb250ZXh0OiBvcHRzLmNvbnRleHRcblx0ICB9LCB7XG5cdCAgICBjb25maWc6IHt9LFxuXHQgICAgdXNlcmRhdGE6IHt9LFxuXHQgICAgcHVic3ViVHlwZTogJ2FwbHVzaW5pdCcsXG5cdCAgICBtZXNzYWdlRm5RdWV1ZTogW10sXG5cdCAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9hcGx1c2luaXQnXG5cdCAgfSwgZnVuY3Rpb24gKGN0eCkge1xuXHQgICAgdmFyIG1zZ3MgPSBbJ2FwbHVzSW5pdENvbnRleHQnLCBjdHhdO1xuXHQgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcblx0ICAgICAgY2FsbGJhY2soY3R4KTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwbHVzX2Nsb3VkX3VtLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNzA1M2ZiYjFjNjQ1MjdiOWQ3Y2QiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhbGlsb2cvYXBsdXMvc3JjL2FwbHVzLmpzXG4gKiDmqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0Jztcbi8vIHJlcXVpcmUoJy4uL2J1aWxkX2FsaS9hcGx1c19zcGFfYXV0b19wdi5qcycpO1xucmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJykuaW5pdEdsb2JhbCh3aW5kb3cpO1xuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFwbHVzX2NvbmZpZyA9IHJlcXVpcmUoJ0AvYXBsdXNfY2xvdWRfdW1fY29uZmlnJyk7XG4gIHJlcXVpcmUoJy4vYXBsdXNfd2ViX2Jhc2ljJykoYXBsdXNfY29uZmlnKTtcbn0pKCk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c19jbG91ZF91bS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pON5L2cYXBsdXPnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxudmFyIEFQTFVTID0gYXBsdXNTdGF0aWMuQVBMVVM7XG52YXIgQVBMVVNfUVVFVUUgPSBhcGx1c1N0YXRpYy5BUExVU19RVUVVRTtcblxudmFyIEdPTERMT0cgPSBhcGx1c1N0YXRpYy5HT0xETE9HO1xudmFyIEdPTERMT0dfUVVFVUUgPSBhcGx1c1N0YXRpYy5HT0xETE9HX1FVRVVFO1xuXG52YXIgX2FwbHVzX2NvbnRleHQ7XG52YXIgaXNXZWIgPSBmYWxzZTtcbnRyeSB7XG4gIF9hcGx1c19jb250ZXh0ID0gd2luZG93O1xuICBpc1dlYiA9IHRydWU7XG59IGNhdGNoIChlKSB7XG4gIF9hcGx1c19jb250ZXh0ID0ge307XG59XG5cbmV4cG9ydHMuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIF9hcGx1c19jb250ZXh0O1xufTtcblxuZXhwb3J0cy5pbml0R2xvYmFsID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgaWYgKGNvbnRleHQpIHtcbiAgICBfYXBsdXNfY29udGV4dCA9IGNvbnRleHQ7XG4gIH0gZWxzZSB7XG4gICAgX2FwbHVzX2NvbnRleHQgPSB7XG4gICAgICB2OiAxLFxuICAgICAgYXBsdXM6IHt9LFxuICAgICAgYXBsdXNfcXVldWU6IFtdXG4gICAgfTtcbiAgfVxuICB2YXIgX2FwbHVzRGVmYXVsdFZhbHVlO1xuICB2YXIgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWU7XG4gIGlmIChpc1dlYikge1xuICAgIHRyeSB7XG4gICAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSAoX2FwbHVzX2NvbnRleHQuYXBsdXMgfHwgKF9hcGx1c19jb250ZXh0LmFwbHVzID0ge30pKTtcbiAgICAgIHZhciBfZ29sZGxvZ19xdWV1ZSA9IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlIHx8IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlID0gW10pKTtcbiAgICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gKF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlIHx8IChfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSA9IFtdKSk7XG4gICAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IF9nb2xkbG9nX3F1ZXVlLmNvbmNhdChfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSk7ICBcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9IGVsc2Uge1xuICAgIF9hcGx1c0RlZmF1bHRWYWx1ZSA9IF9hcGx1c19jb250ZXh0LmFwbHVzO1xuICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWU7XG4gIH1cbiAgXG4gIF9hcGx1c19jb250ZXh0LmFwbHVzID0gX2FwbHVzX2NvbnRleHQuZ29sZGxvZyA9IF9hcGx1c0RlZmF1bHRWYWx1ZTtcbiAgX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgPSBfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlID0gX2FwbHVzUXVldWVEZWZhdWx0VmFsdWU7XG4gIFxuICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG59O1xuXG52YXIgZ2V0R2xvYmFsVmFsdWUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gIGlmIChrZXkgPT09IEFQTFVTIHx8IGtleSA9PT0gR09MRExPRykge1xuICAgIHZhciBnID0gX2FwbHVzX2NvbnRleHRbQVBMVVNdIHx8IF9hcGx1c19jb250ZXh0W0dPTERMT0ddO1xuICAgIGlmICghZykge1xuICAgICAgZyA9IF9hcGx1c19jb250ZXh0W0FQTFVTXSA9IF9hcGx1c19jb250ZXh0W0dPTERMT0ddID0ge307XG4gICAgfVxuICAgIHJldHVybiBnO1xuICB9XG4gIHZhciBnb2xkbG9nX3F1ZXVlID0gR09MRExPR19RVUVVRTtcbiAgdmFyIGFwbHVzX3F1ZXVlID0gQVBMVVNfUVVFVUU7XG4gIGlmIChrZXkgPT09IGFwbHVzX3F1ZXVlIHx8IGtleSA9PT0gZ29sZGxvZ19xdWV1ZSkge1xuICAgIHZhciBxID0gX2FwbHVzX2NvbnRleHRbYXBsdXNfcXVldWVdIHx8IF9hcGx1c19jb250ZXh0W2dvbGRsb2dfcXVldWVdO1xuICAgIGlmICghcSkge1xuICAgICAgcSA9IF9hcGx1c19jb250ZXh0W2FwbHVzX3F1ZXVlXSA9IF9hcGx1c19jb250ZXh0W2dvbGRsb2dfcXVldWVdID0gW107XG4gICAgfVxuICAgIHJldHVybiBxO1xuICB9XG59O1xuZXhwb3J0cy5nZXRHbG9iYWxWYWx1ZSA9IGdldEdsb2JhbFZhbHVlO1xuXG5leHBvcnRzLnNldEdsb2JhbFZhbHVlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgX2FwbHVzX2NvbnRleHRba2V5XSA9IHZhbHVlO1xufTtcblxuLyoqXG4gKiDojrflj5ZhcGx1c+WGhemDqOWPmOmHj1xuICogQHBhcmFtcyBbU3RyaW5nXSBrZXlcbiAqIEByZXR1cm4gW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dXG4gKi9cbnZhciBnZXRHb2xkbG9nVmFsID0gZnVuY3Rpb24oa2V5KSB7XG4gIHZhciB2O1xuICB0cnkge1xuICAgIHZhciBhcGx1cyA9IGdldEdsb2JhbFZhbHVlKEFQTFVTKTtcbiAgICB2ID0gYXBsdXNba2V5XTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHYgPSAnJztcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gdjtcbiAgfVxufTtcbmV4cG9ydHMuZ2V0R29sZGxvZ1ZhbCA9IGdldEdvbGRsb2dWYWw7XG4vKipcbiAqIOiuvue9rmFwbHVz5YaF6YOo5Y+Y6YePXG4gKiBAcGFyYW1zIFtTdHJpbmddIGtleVxuICogQHBhcmFtcyBbT2JqZWN0fFN0cmluZ3xOdW1iZXJ8Qm9vbGVhbl0gdmFsXG4gKiBAcmV0dXJuIFtCb29sZWFuXVxuICovXG52YXIgc2V0R29sZGxvZ1ZhbCA9IGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gIHZhciBmID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgdmFyIGFwbHVzID0gZ2V0R2xvYmFsVmFsdWUoQVBMVVMpO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIGFwbHVzW2tleV0gPSB2YWw7XG4gICAgICBmID0gdHJ1ZTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBmID0gZmFsc2U7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIGY7XG4gIH1cbn07XG5leHBvcnRzLnNldEdvbGRsb2dWYWwgPSBzZXRHb2xkbG9nVmFsO1xuXG4vKipcbiAqIOiOt+WPlmNsaWVudEluZm8o5rWP6KeI5Zmo44CB6K6+5aSH562J5L+h5oGvKVxuICogQHJldHVybiB7T2JqZWN0fVxuICogICB2ZXJzaW9uOiAyLFxuICogICB1YV9pbmZvOiB7XG4gKiAgICAgYjogXCJjaHJvbWU1OFwiXG4gKiAgICAgaXNtOiBcIm1hY1wiXG4gKiAgICAgbXg6IFwiMzYwZWVcIlxuICogICAgIG86IFwibWFjXCJcbiAqICAgICBwOiAxXG4gKiAgICAgczogXCIxOTIweDEwODBcIlxuICogICAgIHc6IFwid2Via2l0XCJcbiAqICAgfVxuICogfVxuICovXG5leHBvcnRzLmdldENsaWVudEluZm8gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGdldEdvbGRsb2dWYWwoJ19hcGx1c19jbGllbnQnKSB8fCB7fTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsR29sZGxvZy5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgQVBMVVMgPSAnYXBsdXMnO1xudmFyIEdPTERMT0cgPSAnZ29sZGxvZyc7XG52YXIgQVBMVVNfUVVFVUUgPSBBUExVUyArICdfcXVldWUnO1xudmFyIEdPTERMT0dfUVVFVUUgPSBHT0xETE9HICsgJ19xdWV1ZSc7XG52YXIgTVdfQ0hBTkdFID0gJ213X2NoYW5nZSc7XG52YXIgTUVUQV9JTkZPID0gJ01ldGFJbmZvJztcbnZhciBBUFBFTkRfTUVUQV9JTkZPID0gJ2FwcGVuZCcgKyBNRVRBX0lORk87XG52YXIgU0VUX01FVEFfSU5GTyA9ICdzZXQnICsgTUVUQV9JTkZPO1xudmFyIEhUVFAgPSAnaHR0cCc7XG52YXIgX3B1YnN1YiA9ICdfcHVic3ViJztcblxudmFyIGRlZmF1bHRDb2RlID0gJ290aGVyJztcbnZhciBDTEsgPSAnMjEwMSc7XG52YXIgRVhQID0gJzIyMDEnO1xudmFyIElNUEVYUCA9ICcyMjAyJztcbnZhciBPVEhFUiA9ICcxOTk5OSc7XG52YXIgQVBQX1NIT1cgPSAnMTAyMyc7XG52YXIgQVBQX0hJREVfT1JfVU5MT0FEID0gJzEwMTAnOyBcbnZhciBTRVNTSU9OX0lOVEVSVkFMID0gMzAwMDA7IC8vIHNlc3Npb25JZOi/h+acn+aXtumXtCAzMOenklxudmFyIFNIQVJFX0NBQ0hFX0lOVEVSVkFMID0gMTAwMCAqIDYwICogMzA7XG52YXIgRUtWUyA9ICdla3ZzJztcbnZhciBFVkVOVF9NQVhfQ09VTlQgPSAxMDAwMDsgLy8g5pys5Zyw5pyA5aSa5a2Y5YKo6L+Z5LmI5aSaZWt25pWw5o2uXG52YXIgTUVNT1JZX01BWF9DT1VOVCA9IDE7IC8vIOWGheWtmOS4reWtmOWCqOeahOacgOWkp+aVsOaNruaVsOmHj++8jOi2hei/h+WImee8k+WtmOWIsOacrOWcsFxudmFyIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCA9IDMwMDA7IC8vIGVrdum7mOiupOWPkemAgemXtOmalOaXtumXtDogM+enklxudmFyIFBBR0VfU1RBUlQgPSAnJCRfcGFnZV9zdGFydCc7XG52YXIgUEFHRV9FTkQgPSAnJCRfcGFnZV9lbmQnO1xudmFyIEFQUF9TVEFSVCA9ICckJF9hcHBfc3RhcnQnO1xudmFyIEFQUF9FTkQgPSAnJCRfYXBwX2VuZCc7XG52YXIgVVNFUl9QUk9GSUxFX0tFWSA9ICdhcGx1c191c2VyX3Byb2ZpbGUnO1xudmFyIElNUFJJTlQgPSAnaW1wcmludCc7XG52YXIgSURfVFlQRSA9ICdhcGx1cy1pZHR5cGUnO1xudmFyIEpTQlJJREdFX09OTFkgPSAnYXBsdXMtanNicmlkZ2Utb25seSc7XG52YXIgUEFHRV9DT05GSUcgPSAnYXBsdXMtcGFnZS1jb25maWcnOyBcbnZhciBBUExVU19TS0lQX0FQVl9SVUxFUyA9ICdhcGx1cy1za2lwLWFwdi1ydWxlcyc7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgUEFHRV9FTlRFUjogJ1BBR0VfRU5URVInLFxuICBDVVJSRU5UX1BBR0VfQ09ORklHOiAnQ1VSUkVOVF9QQUdFX0NPTkZJRycsXG4gIF9BTk9OWV9JRDogJ19hbm9ueV9pZCcsXG4gIF9VU0VSX0lEOiAnX3VzZXJfaWQnLFxuICBERUZBVUxUX0NPREU6IGRlZmF1bHRDb2RlLFxuICBPVEhFUjogT1RIRVIsXG4gIEVWRU5UX01BUDoge1xuICAgICcyMTAxJzogJ2NsaWNrJyxcbiAgICAnMjIwMSc6ICdleHBvc3VyZScsXG4gICAgJzIyMDInOiAnZXhwb3N1cmUnLFxuICAgICcxOTk5OSc6IGRlZmF1bHRDb2RlLFxuICAgICcxMDIzJzogJ2FwcF9zaG93JyxcbiAgICAnMTAxMCc6ICdhcHBfaGlkZV9vcl91bmxvYWQnXG4gIH0sXG4gIEVWRU5UX0lEX01BUDoge1xuICAgICdFWFAnOiBFWFAsXG4gICAgJ0lNUEVYUCc6IElNUEVYUCxcbiAgICAnQ0xLJzogQ0xLLFxuICAgICdPVEhFUic6IE9USEVSLFxuICAgICdTSE9XJzogQVBQX1NIT1csXG4gICAgJ0hfT1JfVSc6IEFQUF9ISURFX09SX1VOTE9BRFxuICB9LFxuICBBUExVUzogQVBMVVMsXG4gIEdPTERMT0c6IEdPTERMT0csXG4gIFVOU1VCU0NSSUJFOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcudW5zdWJzY3JpYmUnLFxuICBTVUJTQ1JJQkU6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5zdWJzY3JpYmUnLFxuICBQVUJMSVNIOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcucHVibGlzaCcsXG4gIENBQ0hFX1BVQlM6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5jYWNoZVB1YnMnLFxuICBBUExVU19VTklWRVJTQUw6IEFQTFVTICsgJ191bml2ZXJzYWwnLFxuICBBUExVU19RVUVVRTogQVBMVVNfUVVFVUUsXG4gIEdPTERMT0dfUVVFVUU6IEdPTERMT0dfUVVFVUUsXG4gIENPTVBMRVRFOiAnY29tcGxldGUnLFxuICBQVl9DT0RFOiAnMjAwMScsXG4gIEVYUF9DT0RFOiBFWFAsXG4gIENMS19DT0RFOiBDTEssXG4gIE9USEVSX0NPREU6IE9USEVSLFxuICBDTEs6ICdDTEsnLFxuICBFWFA6ICdFWFAnLFxuICAvLyBPVEhFUjogJ09USEVSJyxcbiAgU1BNX0NOVDogJ3NwbS1jbnQnLFxuICBTUE1fVVJMOiAnc3BtLXVybCcsXG4gIFNQTV9QUkU6ICdzcG0tcHJlJyxcbiAgTVdfQ0hBTkdFX1BWOiBNV19DSEFOR0UgKyAnX3B2JyxcbiAgTVdfQ0hBTkdFX0hKTEo6IE1XX0NIQU5HRSArICdfaGpsaicsXG4gIEhUVFA6IEhUVFAgKyAnOicsXG4gIEhUVFBTOiAnaHR0cHM6JyxcbiAgQVBQRU5EX01FVEFfSU5GTzogQVBQRU5EX01FVEFfSU5GTyxcbiAgU0VUX01FVEFfSU5GTzogU0VUX01FVEFfSU5GTyxcbiAgQVBMVVNfQVBQRU5EX01FVEFfSU5GTzogQVBMVVMgKyAnLicgKyBBUFBFTkRfTUVUQV9JTkZPLFxuICBBUExVU19TRVRfTUVUQV9JTkZPOiBBUExVUyArICcuJyArIFNFVF9NRVRBX0lORk8sXG4gIFBWSUQ6J3B2aWQnLFxuICBBUExVU19MT0dfUElQRTonYXBsdXMtbG9nLXBpcGUnLFxuICBvcGVuQVBJczogW1xuICAgICdzZW5kJywgJ2VudGVyJywgJ3NlbmRQVicsICdyZWNvcmQnLCAnY29tYmluZVJlY29yZCcsICdyZWNvcmRVZGF0YScsICdyZXF1ZXN0VlRDb25maWcnLFxuICAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcbiAgICAndXBkYXRlUGFnZVByb3BlcnRpZXMnLFxuICAgICd1cGRhdGVOZXh0UGFnZVByb3BlcnRpZXMnLFxuICAgICd1cGRhdGVQYWdlVXRwYXJhbScsXG4gICAgJ3VwZGF0ZU5leHRQYWdlVXRwYXJhbScsXG4gICAgJ3BhZ2VBcHBlYXInLCAncGFnZURpc2FwcGVhcicsICdza2lwUGFnZScsXG4gICAgJ3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzJywgJ2dldFBhZ2VTcG1VcmwnLCAnZ2V0UGFnZVNwbVByZScsXG4gICAgJ3NldFBhZ2VOYW1lJywgJ2dldEVsZW1lbnRTUE0nXG4gIF0sXG4gIFNFU1NJT05fSU5URVJWQUw6IFNFU1NJT05fSU5URVJWQUwsXG4gIFNFU1NJT05fUEFVU0VfVElNRTogJ3Nlc3Npb25fcGF1c2VfdGltZScsXG4gIElNUFJJTlQ6ICdpbXByaW50JyxcbiAgQ1VSUkVOVF9TRVNTSU9OOiAnY3VycmVudF9zZXNzaW9uJyxcbiAgTUFYX0VWRU5USURfTEVOR1RIOiAxMjgsXG4gIE1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIOiAyNTYsXG4gIE1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UOiAxMDAsXG4gIFJFUVVFU1RTOiAncmVxdWVzdHMnLFxuICBTSEFSRVM6ICdzaGFyZXMnLFxuICBBUExVU19TU1JDOiAnX2FwbHVzX3NzcmMnLFxuICBFS1ZTOiBFS1ZTLFxuICBFVkVOVF9NQVhfQ09VTlQ6IEVWRU5UX01BWF9DT1VOVCxcbiAgTUVNT1JZX01BWF9DT1VOVDogTUVNT1JZX01BWF9DT1VOVCxcbiAgRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMOiBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUwsXG4gIFBBR0VfU1RBUlQ6IFBBR0VfU1RBUlQsXG4gIFBBR0VfRU5EOiBQQUdFX0VORCxcbiAgQVBQX1NUQVJUOiBBUFBfU1RBUlQsXG4gIEFQUF9FTkQ6IEFQUF9FTkQsXG4gIFVTRVJfUFJPRklMRV9LRVk6IFVTRVJfUFJPRklMRV9LRVksXG4gIFNIQVJFX0NBQ0hFX0lOVEVSVkFMOiBTSEFSRV9DQUNIRV9JTlRFUlZBTCxcbiAgSU1QUklOVDogSU1QUklOVCxcbiAgSURfVFlQRTogSURfVFlQRSxcbiAgSlNCUklER0VfT05MWTogSlNCUklER0VfT05MWSxcbiAgUEFHRV9DT05GSUc6IFBBR0VfQ09ORklHLFxuICBBUExVU19TS0lQX0FQVl9SVUxFUzogQVBMVVNfU0tJUF9BUFZfUlVMRVNcbn07XG5cbi8vIHZhciBvcGVuQVBJcyA9IFtcbi8vICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsXG4vLyAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcbi8vICAgVVBEQVRFICsgJ1BhZ2VQcm9wZXJ0aWVzJyxcbi8vICAgVVBEQVRFICsgJ05leHRQYWdlUHJvcGVydGllcycsXG4vLyAgIFVQREFURSArICdQYWdlVXRwYXJhbScsXG4vLyAgIFVQREFURSArICdOZXh0UGFnZVV0cGFyYW0nLFxuLy8gICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJyxcbi8vICAgJ3NraXBQYWdlJ1xuLy8gXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9hcGx1c1N0YXRpYy5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgXCJtZXRhSW5mb1wiOiB7XG4gICAgXCJhcGx1cy1pZnItcHZcIjogXCIxXCIsXG4gICAgXCJhcGx1cy1yaG9zdC12XCI6IFwiXCIsXG4gICAgXCJhcGx1cy1yaG9zdC1nXCI6IFwiXCIsXG4gICAgXCJhcGx1cy1jaGFubmVsXCI6IFwiXCIsXG4gICAgXCJhcHBJZFwiOiBcIlwiLFxuICAgIFwic2RrSWRcIjogXCJhcGx1c19jbG91ZF91bVwiLFxuICAgIFwiYXBsdXMtY3B2ZGF0YVwiOiB7fSxcbiAgICBcImFwbHVzLWV4ZGF0YVwiOiB7fSxcbiAgICBcImFwbHVzLWdsb2JhbGRhdGFcIjoge30sXG4gICAgXCJhcGx1cy1tbXN0YXQtdGltZW91dFwiOiBcIjEwMDAwXCIsXG4gICAgXCJhcGx1cy1ldGFnLXRpbWVvdXRcIjogXCIxNTAwXCIsXG4gICAgXCJhcGx1cy10b1VUXCI6IFwiXCJcbiAgfSxcbiAgXCJnbG9iYWxDb25maWdcIjoge1xuICAgIFwiaXNEZWNvZGVVcmxcIjogdHJ1ZSxcbiAgICBcImlzQWxpXCI6IGZhbHNlLFxuICAgIFwiaXNVTVwiOiB0cnVlLFxuICAgIFwiQVBMVVNfUVVFVUVcIjogXCJhcGx1c19xdWV1ZVwiLFxuICAgIFwiRVRBR19TVE9SQUdFX0tFWVwiOiBcIl9fRVRBR19fQ05BX19JRF9fXCIsXG4gICAgXCJzY3JpcHRfbmFtZVwiOiBcImFwbHVzLmpzXCIsXG4gICAgXCJsdmVyXCI6IFwiMS43LjEwXCIsXG4gICAgXCJOQU1FX1NUT1JBR0VfS0VZU1wiOiB7XG4gICAgICBcIlJFRkVSUkVSXCI6IFwid21fcmVmZXJyZXJcIixcbiAgICAgIFwiUkVGRVJSRVJfUFZfSURcIjogXCJyZWZlcl9wdl9pZFwiLFxuICAgICAgXCJMT1NUX1BWX1BBR0VfRFVSQVRJT05cIjogXCJsb3N0X3B2X3BhZ2VfZHVyYXRpb25cIixcbiAgICAgIFwiTE9TVF9QVl9QQUdFX1NQTUFCXCI6IFwibG9zdF9wdl9wYWdlX3NwbWFiXCIsXG4gICAgICBcIkxPU1RfUFZfUEFHRVwiOiBcImxvc3RfcHZfcGFnZVwiLFxuICAgICAgXCJMT1NUX1BWX1BBR0VfTVNHXCI6IFwibG9zdF9wdl9wYWdlX21zZ1wiXG4gICAgfVxuICB9LFxuICBcInBsdWdpbnNcIjogW1xuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX3RyYWNrX2RlYnVnXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX3dlYi9hcGx1c190cmFja19kZWJ1Z19jbG91ZC5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19ib2R5X3JlYWR5XCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX3dlYi9hcGx1c19ib2R5X3JlYWR5LmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcInB1YnN1YlwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbWVzc2FnZXIvcHVic3ViX3dlYi5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19jbGllbnRcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfY2xpZW50X3dlYi5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19tZXRhX2luamVjdFwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19tZXRhX2luamVjdC5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJuYW1lX3N0b3JhZ2VcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX21vbml0b3IvbmFtZV9zdG9yYWdlLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX3dlYl9odHRwX3VtXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2FwbHVzX3dlYl9odHRwX3VtLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2xvZ19pbmplY3RcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfbG9nX2luamVjdC5qcycpLFxuICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgXCJhcGx1c19tZXRhX2luamVjdFwiXG4gICAgICBdLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcInBsdWdpbnNcIjoge1xuICAgICAgICAgIFwicHZcIjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9ldGFnX3dlYi5qcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVuX3RvX3NlbmRwdlwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGVuX3RvX3NlbmRwdi5qcycpLFxuICAgICAgICAgICAgICBcImNvbmZpZ1wiOiB7XG4gICAgICAgICAgICAgICAgXCJhcGx1c1dhaXRpbmdcIjogXCJcIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVyZV90b19zZW5kXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX3dlYl9jbG91ZF91bS5qcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF93ZWJfY2xvdWQuanMnKSxcbiAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICAgICAgICAgIFwicHZkYXRhVG9VdFwiOiB7fVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRwdl91c2VyZGF0YVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YS5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW1xuICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kcHZfdXNlcmRhdGFfd2ViXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3VzZXJkYXRhX3dlYi5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW1xuICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCIsXG4gICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRwdl91c2VyZGF0YVwiXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZHB2X3V0MlwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91dDIuanMnKSxcbiAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZHB2X3VtMm5hdGl2ZVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91bTJuYXRpdmUuanMnKSxcbiAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcImNhbl90b19zZW5kcHZcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvY2FuX3RvX3NlbmRwdi5qcycpLFxuICAgICAgICAgICAgICBcImNvbmZpZ1wiOiB7XG4gICAgICAgICAgICAgICAgXCJmbGFnXCI6IFwiTk9cIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJhZnRlcl9wdlwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9hZnRlcl9wdi5qcycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBcImhqbGpcIjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9ldGFnX3dlYi5qcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVyZV90b19zZW5kXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX3dlYl9jbG91ZF91bS5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZFwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hhdF90b19zZW5kX3dlYl9jbG91ZC5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9faGpsal91c2VyZGF0YVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91c2VyZGF0YS5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW1xuICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19oamxqX3VzZXJkYXRhX3dlYlwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91c2VyZGF0YV93ZWIuanMnKSxcbiAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiLFxuICAgICAgICAgICAgICAgIFwid2hhdF90b19oamxqX3VzZXJkYXRhXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19oamxqX3V0MlwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91dDIuanMnKSxcbiAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9faGpsal91bTJuYXRpdmVcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvaGpsai93aGF0X3RvX2hqbGpfdW0ybmF0aXZlLmpzJyksXG4gICAgICAgICAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgICAgICAgICAgXCJ3aGF0X3RvX3NlbmRcIlxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19hcGlcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfYXBpLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIm1ldGFfcXVldWVcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX3F1ZXVlL21ldGFfcXVldWUuanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfd2ViLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImV0YWdfd2ViX3N5bmNcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9ldGFnX3dlYl9zeW5jLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX3F1ZXVlXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9xdWV1ZS9hcGx1c19xdWV1ZS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJob3RfbG9hZGVyXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX3dlYi9saWJfaG90L2hvdF9sb2FkZXIuanMnKSxcbiAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgXCJ1cmxSdWxlc1wiOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgXCJydWxlXCI6IFwiYXBsdXNfd2VidnRfbWVzc2FnZXJcIixcbiAgICAgICAgICAgIFwiY2RuUGF0aFwiOiBbXG4gICAgICAgICAgICAgIFwiaHR0cHM6Ly9kLmFsaWNkbi5jb20vYWxpbG9nL21sb2cvYXBsdXNfd2VidnRfbWVzc2FnZXIuanNcIlxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH1cbiAgXVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c19jbG91ZF91bV9jb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOS6keS4indlYuWfi+eCuemqjOivgWFwbHVzX3RyYWNrX2RlYnVnX2lk5rOo5YWl6YC76L6RXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBkb2MgPSBkb2N1bWVudDtcbiAgICAgIHZhciBhcGx1cyA9ICh3aW5kb3cuYXBsdXMgfHwgKHdpbmRvdy5hcGx1cyA9IHt9KSk7XG4gICAgICAvLyDkv53or4Hlj6rkvJrmnInkuIDkuKphcGx1c19wbHVnaW5fbW9uaXRvcui/kOihjFxuICAgICAgaWYgKGFwbHVzLl9hcGx1c19jcGx1Z2luX3RyYWNrX2RlYikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBhcGx1cy5fYXBsdXNfY3BsdWdpbl90cmFja19kZWIgPSB7XG4gICAgICAgICdzdGF0dXMnOiAnaW5pdCdcbiAgICAgIH07XG4gICAgICB2YXIgd2luID0gd2luZG93O1xuICAgICAgdmFyIGlzVHJhY2tEZWJ1ZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgTFMgPSB3aW4ubG9jYWxTdG9yYWdlO1xuICAgICAgICAgIHZhciBfdHJhY2tpZCA9ICdhcGx1c190cmFja19kZWJ1Z19pZCc7XG4gICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoJ1s/fCZdJyArIF90cmFja2lkICsgJz0oXFxcXHcqKScpO1xuICAgICAgICAgIHZhciBtYXRjaF92YWx1ZSA9IGxvY2F0aW9uLmhyZWYubWF0Y2gocmVnKTtcbiAgICAgICAgICBpZiAobWF0Y2hfdmFsdWUgJiYgbWF0Y2hfdmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgTFMuc2V0SXRlbShfdHJhY2tpZCwgbWF0Y2hfdmFsdWVbMV0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgX3IgPSBkb2MucmVmZXJyZXIgfHwgJyc7XG4gICAgICAgICAgICB2YXIgbWF0Y2hfcmVmZXIgPSBfci5tYXRjaChyZWcpO1xuICAgICAgICAgICAgaWYgKG1hdGNoX3JlZmVyICYmIG1hdGNoX3JlZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgTFMuc2V0SXRlbShfdHJhY2tpZCwgbWF0Y2hfcmVmZXJbMV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIF9uID0gd2luLm5hbWUgfHwgJyc7XG4gICAgICAgICAgICAgIHZhciBtYXRjaF9uYW1lID0gX24ubWF0Y2gocmVnKTtcbiAgICAgICAgICAgICAgaWYgKG1hdGNoX25hbWUgJiYgbWF0Y2hfbmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgTFMuc2V0SXRlbShfdHJhY2tpZCwgbWF0Y2hfbmFtZVsxXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIF90cmFja2lkVmFsdWUgPSBMUy5nZXRJdGVtKF90cmFja2lkKSB8fCAnJztcbiAgICAgICAgICBpZiAoX3RyYWNraWRWYWx1ZSAmJiBfdHJhY2tpZFZhbHVlLmxlbmd0aCA+IDUwKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gX3RyYWNraWRWYWx1ZS5zcGxpdCgnXycpO1xuICAgICAgICAgICAgdmFyIGRhdGU7XG4gICAgICAgICAgICBpZiAodmFsdWVzICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGRhdGUgPSB2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdLnJlcGxhY2UoL2xvZy8sICcnKTtcbiAgICAgICAgICAgICAgdmFyIGxvZ2RhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICB2YXIgbG9nZGF0ZVRpbWUgPSBsb2dkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgIHZhciBub3dUaW1lID0gbm93LmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgbG9nZGF0ZS5zZXRGdWxsWWVhcihwYXJzZUludChkYXRlLnN1YnN0cigwLCA0KSkpO1xuICAgICAgICAgICAgICBsb2dkYXRlLnNldE1vbnRoKHBhcnNlSW50KGRhdGUuc3Vic3RyKDQsIDIpIC0gMSkpO1xuICAgICAgICAgICAgICBsb2dkYXRlLnNldERhdGUocGFyc2VJbnQoZGF0ZS5zdWJzdHIoNiwgMikpKTtcbiAgICAgICAgICAgICAgbG9nZGF0ZS5zZXRIb3VycyhwYXJzZUludChkYXRlLnN1YnN0cig4LCAyKSkpO1xuICAgICAgICAgICAgICBsb2dkYXRlLnNldE1pbnV0ZXMocGFyc2VJbnQoZGF0ZS5zdWJzdHIoMTAsIDIpKSk7XG4gICAgICAgICAgICAgIGxvZ2RhdGUuc2V0U2Vjb25kcyhwYXJzZUludChkYXRlLnN1YnN0cigxMiwgMikpKTtcbiAgICAgICAgICAgICAgbG9nZGF0ZS5zZXRNaWxsaXNlY29uZHMoMCk7XG4gICAgICAgICAgICAgIGxvZ2RhdGVUaW1lID0gbG9nZGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgIG5vd1RpbWUgPSBub3cuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICB2YXIgbGltaXQgPSBub3dUaW1lIC0gbG9nZGF0ZVRpbWU7XG4gICAgICAgICAgICAgIHJldHVybiBsaW1pdCA8PSAzNjAwMDAwID8gKF90cmFja2lkVmFsdWUgfHwgbWF0Y2hfdmFsdWVbMV0pIDogZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgYXBsdXNfdHJhY2tfZGVidWdfaWQgPSBpc1RyYWNrRGVidWcoKTtcbiAgICAgIGlmIChhcGx1c190cmFja19kZWJ1Z19pZCkge1xuICAgICAgICBhcGx1cy5fYXBsdXNfY3BsdWdpbl90cmFja19kZWIuc3RhdHVzID0gJ3N0YXJ0JztcbiAgICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgICBhcGx1c190cmFja19kZWJ1Z19pZDogYXBsdXNfdHJhY2tfZGVidWdfaWQsXG4gICAgICAgIH07XG4gICAgICAgIHZhciBxID0gd2luZG93LmFwbHVzX3F1ZXVlIHx8ICh3aW5kb3cuYXBsdXNfcXVldWUgPSBbXSk7XG4gICAgICAgIHEucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1leGRhdGEnLCBvYmpdXG4gICAgICAgIH0pO1xuICAgICAgICBxLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtY3B2ZGF0YScsIG9ial1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXBsdXMuX2FwbHVzX2NwbHVnaW5fdHJhY2tfZGViLnN0YXR1cyA9ICdjb21wbGV0ZSc7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2FwbHVzX3RyYWNrX2RlYnVnX2Nsb3VkLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog562J5b6FYm9keSByZWFkeVxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG4gICAgICogICBsb2dDb25maWc6IHtsb2dDb25maWd9XG4gICAgICogfVxuICAgICAqL1xuICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgLy8gfSxcblxuICAgIHJ1bjogZnVuY3Rpb24gKHN0YXRlLCBjYikge1xuICAgICAgdmFyIGhhbmRsZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKS5sZW5ndGgpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKGhhbmRsZXIpO1xuICAgICAgICAgIGhhbmRsZXIgPSBudWxsO1xuICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDUwKTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMDApO1xuICAgICAgcmV0dXJuIDEwMDA7XG4gICAgfSxcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX3dlYi9hcGx1c19ib2R5X3JlYWR5LmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxudmFyIFB1YlN1YldlYiA9IHJlcXVpcmUoJ0Bjb3JlL1B1YlN1YldlYicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46ICBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIC8vIOS/neivgeWPquS8muacieS4gOS4qnB1YnN1Yui/kOihjFxuICAgICAgaWYgKGFwbHVzLmFwbHVzX3B1YnN1Yikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBhcGx1cy5hcGx1c19wdWJzdWLmmK/kuIDkuKrnm5HlkKzogIXvvIzlnKjmj5Lku7bljJblhoXpg6jkvJrnlKjliLDku5bvvIzmnInmlbDmja7lj5jljJblsIbkvJrlj5HlsITnm7jlupTnmoRkYXRhY2hhbmdl5LqL5Lu2XG4gICAgICBhcGx1cy5hcGx1c19wdWJzdWIgPSBQdWJTdWJXZWIuY3JlYXRlKCk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX21lc3NhZ2VyL3B1YnN1Yl93ZWIuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIFB1YlN1YiA9IHJlcXVpcmUoJ0Bjb3JlL1B1YlN1YicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFB1YlN1Yi5leHRlbmQoe1xuICAvKipcbiAgICog6K6i6ZiF5Yiw5LiA5qyh5Zue6LCD5ZCO5Y+W5raI6K6i6ZiFXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4RcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaCDorqLpmIXnmoTmtojmga/lm57osIPlh73mlbBcbiAgICogQHJldHVybiBjb250ZXh0XG4gICAqL1xuICBzdWJzY3JpYmVPbmNlOiBmdW5jdGlvbihlVHlwZSwgaCkge1xuICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHZhciBvbmNlO1xuICAgIHRoaXMuc3Vic2NyaWJlLmNhbGwodGhpcywgZVR5cGUsIG9uY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIF9zZWxmLnVuc3Vic2NyaWJlLmNhbGwoX3NlbGYsIGVUeXBlLCBvbmNlKTtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgIGguYXBwbHkoX3NlbGYsIGFyZ3MpO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvUHViU3ViV2ViLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzXG4gKiDmtojmga/orqLpmIXmqKHlnotcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcblxudmFyIGdldEFyZ3MgPSBmdW5jdGlvbihhcmdzKSB7XG4gIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgdmFyIF9hcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuICBmb3IgKHZhciBqID0gMTsgaiA8IGxlbjsgaisrKSB7XG4gICAgX2FyZ3NbaiAtIDFdID0gYXJnc1tqXTtcbiAgfVxuICByZXR1cm4gX2FyZ3M7XG59O1xuXG52YXIgUHViU3ViID0gQmFzZS5leHRlbmQoe1xuICAvKipcbiAgICog5a+5Zm7ov5vooYzmlq3oqIDvvIzkuI3mmK/igJhmdW5jdGlvbuKAmeexu+Wei+aKpemUme+8jOWQpuWImei/lOWbnmZuXG4gICAqL1xuICBjYWxsYWJsZTogZnVuY3Rpb24gKGZuKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGZuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICByZXR1cm4gZm47XG4gIH0sXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBuZXcgdGhpcygpO1xuICAgIC8vIOe7keWumuivpeWunuS+i+eahOWxnuaAp1xuICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICAgIGluc3RhbmNlW25hbWVdID0gcHJvcHNbbmFtZV07XG4gICAgfVxuXG4gICAgaW5zdGFuY2UuaGFuZGxlcnMgPSBbXTtcbiAgICBpbnN0YW5jZS5wdWJzID0ge307XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9LFxuXG4gIHNldEhhbmRsZXJzOiBmdW5jdGlvbihoYW5kbGVycykge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBoYW5kbGVycztcbiAgfSxcblxuICAvKipcbiAgICog6K6i6ZiF5Y+l5p+E5Li64oCcZVR5cGXigJ3nmoTmtojmga/vvIzlvZPmnInmtojmga/ov4fmnaXmiafooYzlm57osIPlh73mlbDvvJrigJxo4oCdXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4RcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaCDorqLpmIXnmoTmtojmga/lm57osIPlh73mlbBcbiAgICogQHJldHVybiBjb250ZXh0XG4gICAqL1xuICBzdWJzY3JpYmU6IGZ1bmN0aW9uKGVUeXBlLCBoKXtcbiAgICAvLyDlr7nlm57osIPlh73mlbDov5vooYzmlq3oqIBcbiAgICB0aGlzLmNhbGxhYmxlKGgpO1xuXG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgcHVicyA9IF9zZWxmLnB1YnMgfHwge307XG5cbiAgICB2YXIgYXJyID0gcHVic1tlVHlwZV0gfHwgW107XG4gICAgaWYgKGFycikge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIF9hcmdzID0gYXJyW2ldKCk7XG4gICAgICAgIGguYXBwbHkoX3NlbGYsIF9hcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIGhhbmRsZXJzID0gX3NlbGYuaGFuZGxlcnMgfHwgW107XG4gICAgaWYoIShlVHlwZSBpbiBoYW5kbGVycykpIHtcbiAgICAgIGhhbmRsZXJzW2VUeXBlXSA9IFtdO1xuICAgIH1cbiAgICBoYW5kbGVyc1tlVHlwZV0ucHVzaChoKTtcbiAgICBfc2VsZi5zZXRIYW5kbGVycyhoYW5kbGVycyk7XG4gICAgcmV0dXJuIF9zZWxmO1xuICB9LFxuXG4gIC8qKlxuICAgKiDlj5bmtojorqLpmIXvvIzlsIbkvJrlj5bmtojigJxlVHlwZeKAneWPpeafhOWvueW6lOeahOKAnGjigJ3lm57osIPlh73mlbDkuIvnmoTmiYDmnInorqLpmIVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuICAgKiBAcmV0dXJuIGNvbnRleHRcbiAgICovXG4gIHVuc3Vic2NyaWJlOiBmdW5jdGlvbihlVHlwZSwgaCkge1xuICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cbiAgICB0cnkge1xuICAgICAgdmFyIHMgPSB0aGlzLmhhbmRsZXJzW2VUeXBlXTtcbiAgICAgIGlmICghcykgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ29iamVjdCcgJiYgcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGhfc3RyID0gaC50b1N0cmluZygpO1xuICAgICAgICAgIHZhciBzX3N0ciA9IHNbaV0udG9TdHJpbmcoKTtcbiAgICAgICAgICBpZiAoaF9zdHIgPT09IHNfc3RyKSB7XG4gICAgICAgICAgICBzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVyc1tlVHlwZV0gPSBzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuaGFuZGxlcnNbZVR5cGVdO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOa2iOaBr+WIhuWPke+8jOWwhuS8muWIhuWPkeWIsOaJgOacieiuoumYhWVUeXBl5Y+l5p+E55qE6K6i6ZiF6ICFXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDliIblj5Hmtojmga/lj6Xmn4RcbiAgICovXG4gIHB1Ymxpc2g6IGZ1bmN0aW9uIChlVHlwZSkge1xuXG4gICAgdmFyIGFyZ3MgPSBnZXRBcmdzKGFyZ3VtZW50cyk7XG4gICAgdmFyIGhhbmRsZXJzID0gdGhpcy5oYW5kbGVycyB8fCBbXTtcblxuICAgIHZhciBzaXplID0gaGFuZGxlcnNbZVR5cGVdID8gaGFuZGxlcnNbZVR5cGVdLmxlbmd0aCA6IDA7XG4gICAgaWYgKHNpemUgPiAwKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICB2YXIgZm4gPSBoYW5kbGVyc1tlVHlwZV1baV07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgY2FjaGVQdWJzOiBmdW5jdGlvbiAoZVR5cGUpIHtcbiAgICB2YXIgcHVicyA9IHRoaXMucHVicyB8fCB7fTtcbiAgICB2YXIgYXJncyA9IGdldEFyZ3MoYXJndW1lbnRzKTtcbiAgICBpZiAoIXB1YnNbZVR5cGVdKSB7XG4gICAgICBwdWJzW2VUeXBlXSA9IFtdO1xuICAgIH1cbiAgICBwdWJzW2VUeXBlXS5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBhcmdzO1xuICAgIH0pO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBQdWJTdWI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL1B1YlN1Yi5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSAnZnVuY3Rpb24nO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9pc0Z1bmN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL0Jhc2UuanNcbiAqIOWfuuexu++8jOaPkOS+m+exu+aJgOmcgOimgeeahOWfuuehgOWxnuaAp1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcblxuLy8g5Z+657G7XG5mdW5jdGlvbiBCYXNlKCkge31cblxuLy8g5bCGZXh0ZW5k5ZKMY3JlYXRl572u5LqOcHJvdG90eXBl5a+56LGh5Lit77yM5Lul5L6/5a2Q57G757un5om/XG5CYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbigpIHt9O1xuQmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oKSB7fTtcblxuLy8g5Li65LqG6IO95Zyo5Z+657G75LiK55u05o6l5LulLmV4dGVuZOeahOaWueW8j+i/m+ihjOiwg+eUqFxuQmFzZS5leHRlbmQgPSBmdW5jdGlvbihwcm9wcykge1xuICByZXR1cm4gdGhpcy5wcm90b3R5cGUuZXh0ZW5kLmNhbGwodGhpcywgcHJvcHMpO1xufTtcblxuQmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgLyoqXG4gICAqIGNyZWF0ZeWunumZheS4iuaYr+WvuW5ld+eahOWwgeijhe+8m1xuICAgKiBjcmVhdGXov5Tlm57nmoTlrp7kvovlrp7pmYXkuIrlsLHmmK9uZXfmnoTpgKDlh7rnmoTlrp7kvovvvJtcbiAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuICAgKi9cbiAgdmFyIGluc3RhbmNlID0gbmV3IHRoaXMoKTtcbiAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG4gIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICBpbnN0YW5jZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuICB9XG4gIHJldHVybiBpbnN0YW5jZTtcbn07XG5cbkJhc2UucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIC8vIOa0vueUn+WHuuadpeeahOaWsOeahOWtkOexu1xuICB2YXIgU3ViQmFzZSA9IGZ1bmN0aW9uKCkge307XG4gIHRyeSB7XG4gICAgLyoqXG4gICAgICog57un5om/54i257G755qE5bGe5oCn5ZKM5pa55rOV77yMXG4gICAgICog5b2T54S25YmN5o+Q5piv54i257G755qE5bGe5oCn6YO95pS+5ZyocHJvdG90eXBl5LitXG4gICAgICog6ICM6Z2e5LiK6Z2iY3JlYXRl5pa55rOV55qE4oCc5a6e5L6L5bGe5oCn4oCd5LitXG4gICAgICovXG4gICAgaWYgKCFpc0Z1bmN0aW9uKE9iamVjdC5jcmVhdGUpKSB7XG4gICAgICBPYmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgZnVuY3Rpb24gRigpIHt9XG4gICAgICAgIEYucHJvdG90eXBlID0gbztcbiAgICAgICAgcmV0dXJuIG5ldyBGKCk7XG4gICAgICB9O1xuICAgIH1cbiAgICBTdWJCYXNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodGhpcy5wcm90b3R5cGUpO1xuXG4gICAgLy8g5bm25LiU5re75Yqg6Ieq5bex55qE5pa55rOV5ZKM5bGe5oCnXG4gICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuICAgICAgU3ViQmFzZS5wcm90b3R5cGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcbiAgICB9XG4gICAgU3ViQmFzZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWJCYXNlO1xuXG4gICAgLy8g6ZyA6KaB5LulLmV4dGVuZOeahOaWueW8j+WSjC5jcmVhdGXnmoTmlrnlvI/osIPnlKjvvJpcbiAgICBTdWJCYXNlLmV4dGVuZCA9IFN1YkJhc2UucHJvdG90eXBlLmV4dGVuZDtcbiAgICBTdWJCYXNlLmNyZWF0ZSA9IFN1YkJhc2UucHJvdG90eXBlLmNyZWF0ZTtcbiAgfSBjYXRjaChlcnIpIHtcbiAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKGVycik7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIFN1YkJhc2U7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQmFzZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvQmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOWuouaIt+err+S+pua1i+iEmuacrFxuICogIEByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9raXNzeXRlYW0va2lzc3kvYmxvYi8xLjQueC9zcmMvc2VlZC9zcmMvdWEuanNcbiAqICAgICAgICBodHRwczovL2dpdGh1Yi5jb20veXV5dTE5MTEvTWFnbmV0by9ibG9iL21hc3Rlci9zcmMvcGx1Z2lucy9jbGllbnQvdWEuanNcbiAqICAgICAgICBodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS90Yi9hcC9ibG9iL21hc3Rlci9idWlsZC8xLjAvcG9jL20vb3MuanNcbiAqICAgICAgICBodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS90Yi9hcC9ibG9iL21hc3Rlci9idWlsZC8xLjAvbS9tL3VhLmpzXG4gKiAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2Nsb3VkY29tZS9qcXVlcnkudWEvYmxvYi9tYXN0ZXIvanF1ZXJ5LnVhLmpzXG4gKlxuICog5pSv5oyB55qE5Zu95Lqn5rWP6KeI5Zmo77yaXG4gKiAzNjBzZSAgICAgICAg5p6B6YCf5qih5byPXG4gKiAzNjBlZSAgICAgICAg5p6B6YCf5qih5byPXG4gKiDnjI7osbkgICAgICAgICAg5Y+M5qih5byPXG4gKiBRUSAgICAgICAgICAg5Y+M5qih5byPXG4gKiDlgrLmuLhcbiAqIOa3mOWunSAgICAgICAgICDmnoHpgJ/mqKHlvI9cbiAqXG4gKiAqIOebruWJjTM2MGVl55qE5rWL6K+V5piv5ryP6bG85rOV77yM5aaC5p6c5YW25LuW5Yy56YWN5LiN5LiK5bCx5piv5a6D77yM5Zug5q2k5Lya6K+v5YikXG4gKlxuICog546w5Zyo6L+Y5LiN6IO95qOA5rWL55qE5rWP6KeI5Zmo77yaXG4gKiAzNjBzZSAgICAgICAgICAgIOWFvOWuueaooeW8j1xuICogMzYwZWUgICAgICAgICAgICDlhbzlrrnmqKHlvI9cbiAqIOa3mOWunea1j+iniOWZqCAgICAgICAgIOWFvOWuueaooeW8j1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBnb25naGFvLmdoXG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSAod2luZG93LmFwbHVzIHx8ICh3aW5kb3cuYXBsdXMgPSB7fSkpO1xuICAgICAgYXBsdXMuX2FwbHVzX2NsaWVudCA9IHJlcXVpcmUoJy4vbGliX2NsaWVudC9tYWluJykoKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfd2ViLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5a6i5oi356uv5L6m5rWL6ISa5pysXG4gKiAgQHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2tpc3N5dGVhbS9raXNzeS9ibG9iLzEuNC54L3NyYy9zZWVkL3NyYy91YS5qc1xuICogICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS95dXl1MTkxMS9NYWduZXRvL2Jsb2IvbWFzdGVyL3NyYy9wbHVnaW5zL2NsaWVudC91YS5qc1xuICogICAgICAgIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL3RiL2FwL2Jsb2IvbWFzdGVyL2J1aWxkLzEuMC9wb2MvbS9vcy5qc1xuICogICAgICAgIGh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL3RiL2FwL2Jsb2IvbWFzdGVyL2J1aWxkLzEuMC9tL20vdWEuanNcbiAqICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vY2xvdWRjb21lL2pxdWVyeS51YS9ibG9iL21hc3Rlci9qcXVlcnkudWEuanNcbiAqXG4gKiDmlK/mjIHnmoTlm73kuqfmtY/op4jlmajvvJpcbiAqIDM2MHNlICAgICAgICDmnoHpgJ/mqKHlvI9cbiAqIDM2MGVlICAgICAgICDmnoHpgJ/mqKHlvI9cbiAqIOeMjuixuSAgICAgICAgICDlj4zmqKHlvI9cbiAqIFFRICAgICAgICAgICDlj4zmqKHlvI9cbiAqIOWCsua4uFxuICog5reY5a6dICAgICAgICAgIOaegemAn+aooeW8j1xuICpcbiAqICog55uu5YmNMzYwZWXnmoTmtYvor5XmmK/mvI/psbzms5XvvIzlpoLmnpzlhbbku5bljLnphY3kuI3kuIrlsLHmmK/lroPvvIzlm6DmraTkvJror6/liKRcbiAqXG4gKiDnjrDlnKjov5jkuI3og73mo4DmtYvnmoTmtY/op4jlmajvvJpcbiAqIDM2MHNlICAgICAgICAgICAg5YW85a655qih5byPXG4gKiAzNjBlZSAgICAgICAgICAgIOWFvOWuueaooeW8j1xuICog5reY5a6d5rWP6KeI5ZmoICAgICAgICAg5YW85a655qih5byPXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIGdvbmdoYW8uZ2hcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBnZXRPbGRGYXNoaW9uT3NJbmZvKHVhKSB7XG4gIHZhciB0b2tlbiA9IFtcbiAgICBbJ1dpbmRvd3MgTlQgNS4xJywgJ3dpblhQJ10sXG4gICAgWydXaW5kb3dzIE5UIDYuMScsICd3aW43J10sXG4gICAgWydXaW5kb3dzIE5UIDYuMCcsICd3aW5WaXN0YSddLFxuICAgIFsnV2luZG93cyBOVCA2LjInLCAnd2luOCddLFxuICAgIFsnV2luZG93cyBOVCA2LjMnLCAnd2luOC4xJ10sXG4gICAgWydXaW5kb3dzIE5UIDEwLjAnLCAnd2luMTAnXSxcbiAgICBbJ1VidW50dScsICd1YnVudHUnXSxcbiAgICBbJ0xpbnV4JywgJ2xpbnV4J10sXG4gICAgWydXaW5kb3dzIE5UIDUuMicsICd3aW4yMDAzJ10sXG4gICAgWydXaW5kb3dzIE5UIDUuMCcsICd3aW4yMDAwJ10sXG4gICAgWydXaW5kb3dzJywgJ3dpbk90aGVyJ10sXG4gICAgWydyaGlubycsICdyaGlubyddXG4gIF07XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0b2tlbi5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgIHZhciB0b2tlbjAgPSB0b2tlbltpXVswXTtcbiAgICBpZiAodWEuaW5kZXhPZih0b2tlbjApICE9PSAtMSkge1xuICAgICAgdmFyIG9zID0gdG9rZW4wLnNwbGl0KCcgJylbMF07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZXZpY2VfbW9kZWw6IG9zLFxuICAgICAgICBvczogb3MsXG4gICAgICAgIG9zX3ZlcnNpb246IHRva2VuW2ldWzFdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICB2YXIgT1RIRVIgPSAnb3RoZXInO1xuICByZXR1cm4ge1xuICAgIGRldmljZV9tb2RlbDogT1RIRVIsXG4gICAgb3M6IE9USEVSLFxuICAgIG9zX3ZlcnNpb246IE9USEVSXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldE1vZGVybk9TSW5mbyAodWEsIGRldmljZV9tb2RlbCkge1xuICAvKipcbiAgICogaVBhZDsgQ1BVIE9TIDExXzAgbGlrZSBNYWMgT1MgWFxuICAgKiBpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTFfMCBsaWtlIE1hYyBPUyBYXG4gICAqIE1hY2ludG9zaDsgSW50ZWwgTWFjIE9TIFggMTBfMTRfNFxuICAgKiBMaW51eDsgQW5kcm9pZCA1LjA7IFNNLUc5MDBQIEJ1aWxkL0xSWDIxVFxuICAgKi9cbiAgdmFyIG9zSW5mbyA9IHVhLnN1YnN0cmluZyh1YS5pbmRleE9mKCcoJykgKyAxLCB1YS5pbmRleE9mKCcpJykpO1xuICB2YXIgcnMgPSB7XG4gICAgZGV2aWNlX21vZGVsOiBkZXZpY2VfbW9kZWwsXG4gIH07XG4gIHZhciBkID0gZGV2aWNlX21vZGVsLnRvTG93ZXJDYXNlKCk7XG4gIHN3aXRjaCAoZCkge1xuICBjYXNlICdpcGFkJzpcbiAgY2FzZSAnaXBob25lJzpcbiAgY2FzZSAnaXBvZCc6XG4gIGNhc2UgJ21hY2ludG9zaCc6XG4gICAgaWYgKGQgPT09ICdtYWNpbnRvc2gnKSB7XG4gICAgICBpZiAoL01hYyBPUyBYLy50ZXN0KG9zSW5mbykpIHtcbiAgICAgICAgcnMub3MgPSAnTWFjIE9TIFgnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcnMub3MgPSAnTWFjIE9TJztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcnMub3MgPSAnSU9TJztcbiAgICB9XG4gICAgcnMub3NfdmVyc2lvbiA9IG9zSW5mby5tYXRjaCgvWzAtOV8uXSsvKVswXTtcbiAgICBicmVhaztcbiAgY2FzZSAnYW5kcm9pZCc6XG4gICAgcnMub3MgPSAnQW5kcm9pZCc7XG4gICAgcnMub3NfdmVyc2lvbiA9IG9zSW5mby5tYXRjaCgvWzAtOS5dKy8pWzBdO1xuICAgIGJyZWFrO1xuICBkZWZhdWx0OlxuICAgIGJyZWFrO1xuICB9XG4gIHJzLm9zX3ZlcnNpb24gPSBycy5vc192ZXJzaW9uLnJlcGxhY2UoL18vZywgJy4nKTtcbiAgcmV0dXJuIHJzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIFVBID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgdmFyIGluZm8gPSB7fTtcbiAgdmFyIG1vZGVybk9TID0gVUEubWF0Y2goL2lwaG9uZXxpcGFkfGFuZHJvaWR8bWFjaW50b3NoL2kpO1xuICB2YXIgRGFyd2luT1MgPSBVQS5tYXRjaCgvRGFyd2luL2kpO1xuICBpZiAobW9kZXJuT1MpIHtcbiAgICBpbmZvID0gZ2V0TW9kZXJuT1NJbmZvKFVBLCBtb2Rlcm5PU1swXSk7XG4gIH0gZWxzZSBpZiAoRGFyd2luT1MpIHtcbiAgICB2YXIgX29zID0gVUEuc3BsaXQoJyAnKVsyXTtcbiAgICBpbmZvID0ge1xuICAgICAgb3M6ICdEYXJ3aW4nLFxuICAgICAgb3NfdmVyc2lvbjogX29zLm1hdGNoKC9bMC05Ll0rLylbMF0sXG4gICAgICBkZXZpY2VfbW9kZWw6ICdEYXJ3aW4nXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpbmZvID0gZ2V0T2xkRmFzaGlvbk9zSW5mbyhVQSk7XG4gIH1cbiAgdmFyIHNjciA9IHNjcmVlbiB8fCB7fTtcbiAgaW5mby5zY3JlZW5XaWR0aCA9IHNjci53aWR0aDtcbiAgaW5mby5zY3JlZW5IZWlnaHQgPSBzY3IuaGVpZ2h0O1xuXG4gIGlmIChuYXZpZ2F0b3IpIHtcbiAgICBpbmZvLnVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgJy0nO1xuICAgIGluZm8ubGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZSB8fCAnLSc7XG4gIH1cbiAgcmV0dXJuIGluZm87XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfY2xpZW50L21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDojrflj5bpobXpnaLkuIrnmoQgPG1ldGE+IOS4reS4jiBhcGx1cyDmiZPngrnnm7jlhbPnmoTlgLxcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW1zIHtPYmplY3R9IG9wdGlvbnMge1xuICAgICAqICAgbG9nQ29uZmlnOiB7bG9nQ29uZmlnfVxuICAgICAqIH1cbiAgICAgKi9cbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcXVpcmUoJy4vbGliX21ldGEvbWFpbicpKHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfbWV0YV9pbmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcbiAqIG1ldGHphY3nva7mj5Lku7bvvIzooqthcGnmj5Lku7bkvp3otZZcbiAqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyB2YXIgYXNzaWduID0gcmVxdWlyZSgnQHV0aWxzL2Fzc2lnbicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbFVybCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsVXJsJyk7XG52YXIgdXRpbE5hdGl2ZTRBcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTmF0aXZlNEFwbHVzJyk7XG52YXIgdXRpbE5hbWVTdG9yYWdlID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxOYW1lU3RvcmFnZScpO1xudmFyIG1ldGFJbmZvID0gcmVxdWlyZSgnLi9tZXRhSW5mb0FsaScpO1xuXG5mdW5jdGlvbiBnZXRDZG5QYXRoICgpIHtcbiAgdmFyIGRvYyA9IGRvY3VtZW50O1xuICB2YXIgcGF0aCA9ICcvL2cuYWxpY2RuLmNvbSc7XG4gIGlmIChkb2MpIHtcbiAgICB2YXIgY3VycmVudF9ub2RlID0gZG9jLmdldEVsZW1lbnRCeUlkKCdiZWFjb24tYXBsdXMnKSB8fCBkb2MuZ2V0RWxlbWVudEJ5SWQoJ3RiLWJlYWNvbi1hcGx1cycpO1xuICAgIHZhciBwYXRoX290aGVycyA9IFsnLy9hc3NldHMuYWxpY2RuLmNvbS9nJywgJy8vZy1hc3NldHMuZGFpbHkudGFvYmFvLm5ldCcsICcvL2FsaWR0Lm9zcy1jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20nXTtcbiAgICBpZiAoY3VycmVudF9ub2RlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhfb3RoZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKHBhdGhfb3RoZXJzW2ldKTtcbiAgICAgICAgaWYgKHJlZy50ZXN0KGN1cnJlbnRfbm9kZS5zcmMpKSB7XG4gICAgICAgICAgcGF0aCA9IHBhdGhfb3RoZXJzW2ldO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAgXG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59XG5cbnZhciBjZG5QYXRoO1xuLy8g5piv5ZCm5Zu96ZmF546v5aKDXG5mdW5jdGlvbiBpc0ludGVybmF0aW9uYWwgKCkge1xuICBpZiAoIWNkblBhdGgpIHtcbiAgICBjZG5QYXRoID0gZ2V0Q2RuUGF0aCgpO1xuICB9XG4gIHZhciBpc0ludCA9IGNkblBhdGggPT09ICcvL2Fzc2V0cy5hbGljZG4uY29tL2cnIHx8IGNkblBhdGggPT09ICcvL2xhei1nLWNkbi5hbGljZG4uY29tJztcbiAgcmV0dXJuIGlzSW50IHx8IG1ldGFJbmZvLmdldE1ldGFJbmZvKCdhcGx1cy1lbnYnKSA9PT0gJ2ludCc7XG59XG5cbmZ1bmN0aW9uIGlzTW9iaWxlICgpIHtcbiAgaWYgKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50KSB7XG4gICAgdmFyIGlzUGhvbmUgPSAoL2lwaG9uZXxhbmRyb2lkL2kpLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgdmFyIGlzTW9iaWxlID0gaXNQaG9uZSB8fCAoL1RCXFwtUEQvaSkudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICByZXR1cm4gaXNNb2JpbGU7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldFV0UGFyYW1Gcm9tVXJsICgpIHtcbiAgLy8gYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLXV0cGFyYW0nKTtcbiAgdmFyIHJzO1xuICB2YXIgdXRwYXJhbWNudCA9IHV0aWxVcmwuZ2V0UGFyYW1Gcm9tVXJsKCd1dHBhcmFtY250JywgbG9jYXRpb24uaHJlZik7XG4gIGlmICh1dHBhcmFtY250KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJzID0gdXRwYXJhbWNudCA9IEpTT04ucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KHV0cGFyYW1jbnQpKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiBycztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBsdXNfY29uZmlnKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgTkFNRV9TVE9SQUdFX0tFWVMgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLk5BTUVfU1RPUkFHRV9LRVlTO1xuICB2YXIgcmVmZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFJlZmVycmVyJykuZ2V0UmVmZXIoTkFNRV9TVE9SQUdFX0tFWVMpO1xuICAvLyBhcGx1cy5sdmVyID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5sdmVyO1xuICBhcGx1cy5uYW1lU3RvcmFnZSA9IHV0aWxOYW1lU3RvcmFnZS5uYW1lU3RvcmFnZTsgLy8g5Y6G5Y+y5Y6f5Zug77yM5ZyoIGFwbHVzIOS4iuaatOmcsuWHuiBuYW1lU3RvcmFnZVxuICB1dGlsTmF0aXZlNEFwbHVzLmhhdmVOYXRpdmVGbGFnSW5VQSgpO1xuICB2YXIgXyQgPSAoYXBsdXMuXyQgPSBhcGx1cy5fJCB8fCB7fSk7IC8vIOWGhemDqOS9v+eUqOeahOWPmOmHj1xuICBfJC5pc190ZXJtaW5hbCA9IGlzTW9iaWxlKCk7XG4gIF8kLnNlbmRfcHZfY291bnQgPSAwO1xuICBfJC5wYWdlX3JlZmVycmVyID0gcmVmZXI7XG4gIF8kLnNwbSA9IHtcbiAgICBkYXRhOiB7fSxcbiAgICBwYWdlX3JlZmVycmVyOiByZWZlclxuICB9O1xuICBhcGx1cy5nbG9iYWxDb25maWcgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnO1xuICB2YXIgdXRwYXJhbWNudCA9IGdldFV0UGFyYW1Gcm9tVXJsKCk7XG5cbiAgXyQubWV0YV9pbmZvID0gbWV0YUluZm8ucUdldCgpIHx8IHt9O1xuICBmb3IgKHZhciBrIGluIGFwbHVzX2NvbmZpZy5tZXRhSW5mbykge1xuICAgIGlmICghXyQubWV0YV9pbmZvLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICB2YXIgbWV0YVZhbHVlID0gYXBsdXNfY29uZmlnLm1ldGFJbmZvW2tdO1xuICAgICAgaWYgKGsgPT09ICdhcGx1cy11dHBhcmFtJykge1xuICAgICAgICAvLyDov5nph4znlKjnlKjmiLflnKjpobXpnaLkuIrphY3nva7nmoRhcGx1cy11dHBhcmFt5Y67bWVyZ2UgdXRwYXJhbWNudFxuICAgICAgICB1dHBhcmFtY250ICYmIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKGssIHV0cGFyYW1jbnQpO1xuICAgICAgICBtZXRhSW5mby5hcHBlbmRNZXRhSW5mbyhrLCBtZXRhVmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWV0YUluZm8uc2V0TWV0YUluZm8oaywgbWV0YVZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG5cbiAgYXBsdXMuXyQgPSBfJDtcbiAgYXBsdXMuaXNJbnRlcm5hdGlvbmFsID0gaXNJbnRlcm5hdGlvbmFsO1xuICBhcGx1cy5nZXRDZG5QYXRoID0gZ2V0Q2RuUGF0aDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9tZXRhL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIC8qKlxuLy8gICog5LuOIHVybCDkuK3lj5blh7rlr7nlupTnmoQgc3BtIOWPguaVsFxuLy8gICogQHBhcmFtIHVybCB7U3RyaW5nfVxuLy8gICogQHJldHVybiB7U3RyaW5nfSBzcG0gYS5iLmMuZC5wdmlk77yM5LiA5YWx5LqU5L2NXG4vLyAgKi9cbi8vIGZ1bmN0aW9uIGdldFNQTUZyb21VcmwodXJsKSB7XG4vLyAgIHZhciBtID0gdXJsLm1hdGNoKG5ldyBSZWdFeHAoJ1xcXFw/LipzcG09KFtcXFxcd1xcXFwuXFxcXC1cXFxcKi9dKyknKSk7XG4vLyAgIHZhciBzcG07XG4vLyAgIHJldHVybiAobSAmJiAoc3BtID0gbVsxXSkgJiYgc3BtLnNwbGl0KCcuJykubGVuZ3RoID09IDUpID8gc3BtIDogbnVsbDtcbi8vIH1cbi8vIGV4cG9ydHMuZ2V0U1BNRnJvbVVybCA9IGdldFNQTUZyb21Vcmw7XG5cbi8qKlxuICogQGF1dGhvciBqaXpoYS53eWogKG9sZGopXG4gKiBAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGdldFBhcmFtRnJvbVVybChrZXksIHVybCkge1xuICBpZiAoa2V5ICYmIHVybCkge1xuICAgIHZhciBwYXJhbSA9ICcnO1xuICAgIHZhciBtO1xuICAgIHRyeSB7XG4gICAgICB2YXIgcmVnMSA9IG5ldyBSZWdFeHAoa2V5ICsgJz0oW14mfCN8P3xcXC9dKyknKTtcbiAgICAgIGlmIChrZXkgPT09ICdzcG0nIHx8IGtleSA9PT0gJ3NjbScpIHtcbiAgICAgICAgdmFyIHJlZzIgPSBuZXcgUmVnRXhwKCdcXFxcPy4qJyArIGtleSArICc9KFtcXFxcd1xcXFwuXFxcXC1cXFxcKi9dKyknKTtcbiAgICAgICAgdmFyIHRtcF8xID0gdXJsLm1hdGNoKHJlZzEpO1xuICAgICAgICB2YXIgdG1wXzIgPSB1cmwubWF0Y2gocmVnMik7XG4gICAgICAgIHZhciBwYXJhbV8xID0gdG1wXzEgJiYgdG1wXzEubGVuZ3RoID09PSAyID8gdG1wXzFbMV0gOiAnJztcbiAgICAgICAgdmFyIHBhcmFtXzIgPSB0bXBfMiAmJiB0bXBfMi5sZW5ndGggPT09IDIgPyB0bXBfMlsxXSA6ICcnO1xuICAgICAgICBwYXJhbSA9IHBhcmFtXzEgPiBwYXJhbV8yID8gcGFyYW1fMSA6IHBhcmFtXzI7XG4gICAgICAgIHBhcmFtID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG0gPSB1cmwubWF0Y2gocmVnMSk7XG4gICAgICAgIHBhcmFtID0gbSAmJiBtLmxlbmd0aCA9PT0gMiA/IG1bMV0gOiAnJztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIFRPRE9cbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmV0dXJuIHBhcmFtO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5leHBvcnRzLmdldFBhcmFtRnJvbVVybCA9IGdldFBhcmFtRnJvbVVybDtcblxuLyoqXG4gKiDku44gdXJsIOS4reWPluWHuuWvueW6lOeahCBzcG0g5Y+C5pWwXG4gKiDkvJjlupPlnJ/osYZzcG1D5L2N5Y+v6IO95a2Y5Zyo54m55q6K5a2X56ym77yM5aaC77ya4oCcc3BtPTAuMC5pdGVtX1hNVFk0T1RFeU5UQTBNQT09LkEuQmlpTlMx4oCdXG4gKiBAcGFyYW0gdXJsIHtTdHJpbmd9XG4gKiBAcmV0dXJuIHtTdHJpbmd9IHNwbSBhLmIuYy5kLnB2aWTvvIzkuIDlhbHkupTkvY1cbiAqL1xuZXhwb3J0cy5nZXRTUE1Gcm9tVXJsID0gZnVuY3Rpb24odXJsKSB7XG4gIHJldHVybiBnZXRQYXJhbUZyb21VcmwoJ3NwbScsIHVybCk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbFVybC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnLi91dGlsR29sZGxvZycpO1xuXG52YXIgVVRGTEFHID0gJ1VUNEFwbHVzJztcbnZhciBVTUZMQUcgPSAnVW1lbmc0QXBsdXMnO1xuXG5leHBvcnRzLmlzTmF0aXZlNEFwbHVzID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIGNoYW5uZWwgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdG9VVCcpO1xuICB2YXIgYnJpZGdlTmFtZSA9IGFwbHVzLmFwbHVzQnJpZGdlTmFtZTtcbiAgcmV0dXJuIChicmlkZ2VOYW1lID09PSBVVEZMQUcgJiYgY2hhbm5lbCA9PT0gVVRGTEFHKSB8fCBicmlkZ2VOYW1lID09PSBVTUZMQUc7XG59O1xuXG5leHBvcnRzLmhhdmVOYXRpdmVGbGFnSW5VQSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBicmlkZ2VOYW1lID0gYXBsdXMuYXBsdXNCcmlkZ2VOYW1lO1xuICAvLyDlvZNicmlkZ2VOYW1l5Li656m65YC85pe25omN6L+b6KGM5Lul5LiL55qE5Yik5pat5ZKM5aSE55CG6YC76L6R77yM5Lul5o+Q5Y2H5aSa5qyh6L+Q6KGM55qE5oCn6IO9XG4gIGlmICghYnJpZGdlTmFtZSAmJiB0eXBlb2YgYnJpZGdlTmFtZSAhPT0gJ2Jvb2xlYW4nICYmIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IudXNlckFnZW50KSB7XG4gICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoW1VURkxBRywgVU1GTEFHXS5qb2luKCd8JyksICdpJyk7XG4gICAgdmFyIG1hdGNoUmVzdWx0ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChyZWcpO1xuICAgIGJyaWRnZU5hbWUgPSBtYXRjaFJlc3VsdCA/IG1hdGNoUmVzdWx0WzBdIDogZmFsc2U7XG4gICAgYXBsdXMuYXBsdXNCcmlkZ2VOYW1lID0gYnJpZGdlTmFtZTtcbiAgfVxuICByZXR1cm4gISFicmlkZ2VOYW1lO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxOYXRpdmU0QXBsdXMuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4vdXRpbEdvbGRsb2cnKTtcblxuLyoqXG4gKiBuYW1lU3RvcmFnZSDnmoTlrp7njrDmi7fotJ1cbiAqXG4gKiBodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS9jb2Rldi9uYW1lLXN0b3JhZ2UvdHJlZS9tYXN0ZXJcbiAqL1xudmFyIG5hbWVTdG9yYWdlID0gKGZ1bmN0aW9uICgpIHtcblxuICB2YXIgX25hbWVTdG9yYWdlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ25hbWVTdG9yYWdlJyk7XG5cbiAgaWYgKF9uYW1lU3RvcmFnZSkge1xuICAgIHJldHVybiBfbmFtZVN0b3JhZ2U7XG4gIH1cblxuICB2YXIgU0NIRU1FID0gXCJuYW1lU3RvcmFnZTpcIjtcbiAgLy92YXIgUkVfTkFNRVMgPSAvXm5hbWVTdG9yYWdlOihbXj9dKikoPzpcXD8oPzooW149XSspPShbXiZdKikpKik/L2c7XG4gIHZhciBSRV9QQUlSID0gL14oW149XSspKD86PSguKikpPyQvO1xuICB2YXIgUSA9IFwiP1wiO1xuICB2YXIgRVEgPSBcIj1cIjtcbiAgdmFyIEFORCA9IFwiJlwiO1xuXG4gIHZhciBlbmNvZGUgPSBlbmNvZGVVUklDb21wb25lbnQ7XG4gIHZhciBkZWNvZGUgPSBkZWNvZGVVUklDb21wb25lbnQ7XG5cbiAgdmFyIFNUT1JBR0UgPSB7fTtcbiAgdmFyIE9SSUdJTl9OQU1FO1xuXG4gIHZhciBuYW1lU3RvcmFnZSA9IHt9O1xuXG4gIC8vIOino+aekOW5tuWIneWni+WMliBuYW1lIOaVsOaNruOAglxuICAvLyDmoIflh4bnmoQgbmFtZVN0b3JhZ2Ug5pWw5o2u5qC85byP5Li6IGBuYW1lU3RvcmFnZTpvcmlnaW4tbmFtZT9rZXk9dmFsdWVgXG4gIC8vIEBwYXJhbSB7U3RyaW5nfSBuYW1lLlxuICAoZnVuY3Rpb24gcGFyc2UobmFtZSkge1xuXG4gICAgaWYgKG5hbWUgJiYgbmFtZS5pbmRleE9mKFNDSEVNRSkgPT09IDApIHtcblxuICAgICAgdmFyIG1hdGNoID0gbmFtZS5zcGxpdCgvWzo/XS8pO1xuXG4gICAgICBtYXRjaC5zaGlmdCgpOyAvLyBzY2hlbWU6IG1hdGNoWzBdO1xuICAgICAgT1JJR0lOX05BTUUgPSBkZWNvZGUobWF0Y2guc2hpZnQoKSkgfHwgXCJcIjsgLy8gbWF0Y2hbMV1cblxuICAgICAgdmFyIHBhcmFtcyA9IG1hdGNoLmpvaW4oXCJcIik7IC8vIG1hdGNoWzIsLi4uXVxuXG4gICAgICB2YXIgcGFpcnMgPSBwYXJhbXMuc3BsaXQoQU5EKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBwYWlyLCBrZXksIHZhbHVlLCBsID0gcGFpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHBhaXIgPSBwYWlyc1tpXS5tYXRjaChSRV9QQUlSKTtcbiAgICAgICAgaWYgKCFwYWlyIHx8ICFwYWlyWzFdKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBrZXkgPSBkZWNvZGUocGFpclsxXSk7XG4gICAgICAgIHZhbHVlID0gZGVjb2RlKHBhaXJbMl0pIHx8IFwiXCI7XG5cbiAgICAgICAgU1RPUkFHRVtrZXldID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICBPUklHSU5fTkFNRSA9IG5hbWUgfHwgXCJcIjtcblxuICAgIH1cblxuICB9KSh3aW5kb3cubmFtZSk7XG5cbiAgLy8g5YaZ5YWl5pWw5o2u44CCXG4gIC8vIEBwYXJhbSB7U3RyaW5nfSBrZXksIOmUruWQjeOAglxuICAvLyBAcGFyYW0ge1N0cmluZ30gdmFsdWUsIOmUruWAvOOAglxuICBuYW1lU3RvcmFnZS5zZXRJdGVtID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICBpZiAoIWtleSB8fCBcInVuZGVmaW5lZFwiID09PSB0eXBlb2YgdmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU1RPUkFHRVtrZXldID0gU3RyaW5nKHZhbHVlKTtcbiAgICBzYXZlKCk7XG4gIH07XG5cbiAgLy8g6K+75Y+W5pWw5o2u44CCXG4gIC8vIEBwYXJhbSB7U3RyaW5nfSBrZXksIOmUruWQjeOAglxuICAvLyBAcmV0dXJuIHtTdHJpbmd9IOmUruWAvOOAguWmguaenOS4jeWtmOWcqO+8jOWImei/lOWbniBgbnVsbGDjgIJcbiAgbmFtZVN0b3JhZ2UuZ2V0SXRlbSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gU1RPUkFHRS5oYXNPd25Qcm9wZXJ0eShrZXkpID8gU1RPUkFHRVtrZXldIDogbnVsbDtcbiAgfTtcblxuICAvLyDnp7vpmaTmlbDmja7jgIJcbiAgLy8gQHBhcmFtIHtTdHJpbmd9IGtleSwg6ZSu5ZCN44CCXG4gIG5hbWVTdG9yYWdlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFTVE9SQUdFLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgU1RPUkFHRVtrZXldID0gbnVsbDtcbiAgICBkZWxldGUgU1RPUkFHRVtrZXldO1xuICAgIHNhdmUoKTtcbiAgfTtcblxuICAvLyDmuIXnqbogbmFtZVN0b3JhZ2XjgIJcbiAgbmFtZVN0b3JhZ2UuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgU1RPUkFHRSA9IHt9O1xuICAgIHNhdmUoKTtcbiAgfTtcblxuICBuYW1lU3RvcmFnZS52YWx1ZU9mID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBTVE9SQUdFO1xuICB9O1xuXG4gIG5hbWVTdG9yYWdlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBuYW1lID0gd2luZG93Lm5hbWU7XG4gICAgcmV0dXJuIG5hbWUuaW5kZXhPZihTQ0hFTUUpID09PSAwID8gbmFtZSA6IFNDSEVNRSArIG5hbWU7XG4gIH07XG5cbiAgLy8g5L+d5a2Y5pWw5o2u5YiwIHdpbmRvdy5uYW1lXG4gIC8vIOWmguaenOayoeacieWtmOWCqOaVsOaNru+8jOWImeaBouWkjeWOn+Wni+eql+WPo+WQjeensCh3aW5kb3cubmFtZSnjgIJcbiAgZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICB2YXIgZW1wdHkgPSB0cnVlO1xuICAgIHZhciB2YWx1ZTtcblxuICAgIGZvciAodmFyIGtleSBpbiBTVE9SQUdFKSB7XG4gICAgICBpZiAoU1RPUkFHRS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGVtcHR5ID0gZmFsc2U7XG4gICAgICAgIHZhbHVlID0gU1RPUkFHRVtrZXldIHx8IFwiXCI7XG4gICAgICAgIHBhaXJzLnB1c2goZW5jb2RlKGtleSkgKyBFUSArIGVuY29kZSh2YWx1ZSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHdpbmRvdy5uYW1lID0gZW1wdHkgPyBPUklHSU5fTkFNRSA6IFNDSEVNRSArIGVuY29kZShPUklHSU5fTkFNRSkgKyBRICsgcGFpcnMuam9pbihBTkQpO1xuICB9O1xuXG4gIC8vIGFkZEV2ZW50TGlzdGVyIGltcGxlbWVudGF0aW9uXG4gIC8vIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQuXG4gIC8vIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUuXG4gIC8vIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIuXG4gIGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZWxlbWVudCwgZXZlbnROYW1lLCBoYW5kbGVyKSB7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgZmFsc2UpO1xuICAgIH0gZWxzZSBpZiAoZWxlbWVudC5hdHRhY2hFdmVudCkge1xuICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgIGhhbmRsZXIuY2FsbChlbGVtZW50LCBldnQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIFNhdmUgdGhlIGxhc3QgZGF0YSBmb3IgdGhlIG5leHQgcGFnZS5cbiAgYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csICdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgc2F2ZSgpO1xuICB9KTtcblxuICByZXR1cm4gbmFtZVN0b3JhZ2U7XG5cbn0pKCk7XG5cbmV4cG9ydHMubmFtZVN0b3JhZ2UgPSBuYW1lU3RvcmFnZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxOYW1lU3RvcmFnZS5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuICog6Zi/6YeM57O75Lia5Yqh6LWw6L+Z5Liq6YC76L6RXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGZvcm1hdCA9IHJlcXVpcmUoJ0B1dGlscy9mb3JtYXQnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxEYXRhID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXRhJyk7XG52YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgdXRpbEF0dHJpYnV0ZSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXR0cmlidXRlJyk7XG52YXIgdXRpbE1ldGEgPSByZXF1aXJlKCdAdXRpbHMvdXRpbE1ldGEnKTtcbi8vIHZhciB1dGlsRXhpbmZvID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFeGluZm8nKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG52YXIgaW5mbyA9IHt9O1xudmFyIEFQTFVTX1hfU0VUVElOR1MgPSAnYXBsdXMteC1zZXR0aW5ncyc7XG52YXIgcHJpb3JpdHlNZXRhSW5mbztcblxuLy8g5Yig6Zmk5aSn6YeP55qEQXJycmF577yM5L+d55WZ5Y6G5Y+y5LiN6KeE6IyD55qEbWV0YU5hbWUgMjAxOC0wMS0xMCBA6LCL5aOrXG4vLyDor6bop4EgaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9kb2NzL2xweXZjbVxudmFyIGtleXMgPSBbJ2Fob3QtYXBsdXMnLCAnaXNvbmVwYWdlJywgJ3NwbS1pZCcsICdkYXRhLXNwbScsICdtaWNyb3Njb3BlLWRhdGEnXTtcblxuLyoqXG4gKiDlj5blvpcgaGVhZCAvIG1ldGEg5Lit55qE5pi+5b6u6ZWc55qE5pWw5o2u77yMXG4gKiDlvaLlpoLvvJpcbiAqIDxtZXRhIG5hbWU9XCJtaWNyb3Njb3BlLWRhdGFcIiBjb250ZW50PVwicGFnZUlkPTEyMzsgc2l0ZUlkPTQ1NlwiPlxuICog5Y+v6IO95pyJ5aSa5p2hIG1ldGEg5pWw5o2u44CCXG4gKlxuICog55u45YWz5qC85byP5Y+K6K+05piO6KeB77yaXG4gKiBodHRwOi8vd2lraS51ZWQudGFvYmFvLm5ldC9kb2t1LnBocD9pZD10ZWFtOnVkYzpmMmU6d2VidHJhY2VyOmRldi1kb2NzOmV4dHJhLWRhdGFcbiAqL1xuZnVuY3Rpb24gZ2V0TWV0YU1pY3Jvc2NvcGVEYXRhIChtZXRhX25vZGVzKSB7XG4gIHZhciBpO1xuICB2YXIgbWV0YTtcbiAgdmFyIGwgPSBtZXRhX25vZGVzLmxlbmd0aDtcbiAgdmFyIGNvbnRlbnQ7XG4gIHZhciBfbWljcm9zY29wZV9kYXRhID0ge307XG4gIGluZm8uX21pY3Jvc2NvcGVfZGF0YSA9IF9taWNyb3Njb3BlX2RhdGE7XG5cbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIG1ldGEgPSBtZXRhX25vZGVzW2ldO1xuICAgIGlmICh1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsICduYW1lJykgPT09ICdtaWNyb3Njb3BlLWRhdGEnKSB7XG4gICAgICBjb250ZW50ID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCAnY29udGVudCcpO1xuICAgICAgdXRpbERhdGEucGFyc2VTZW1pY29sb25Db250ZW50KGNvbnRlbnQsIF9taWNyb3Njb3BlX2RhdGEpO1xuICAgICAgaW5mby5pc19oZWFkX2hhc19tZXRhX21pY3Jvc2NvcGVfZGF0YSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgaW5mby5fbWljcm9zY29wZV9kYXRhX3BhcmFtcyA9IGZvcm1hdC5vYmoycGFyYW0oX21pY3Jvc2NvcGVfZGF0YSk7XG5cbiAgaW5mby5tc19kYXRhX3BhZ2VfaWQgPSBfbWljcm9zY29wZV9kYXRhWydwYWdlSWQnXTtcbiAgaW5mby5tc19kYXRhX3Nob3BfaWQgPSBfbWljcm9zY29wZV9kYXRhWydzaG9wSWQnXTtcbiAgaW5mby5tc19kYXRhX2luc3RhbmNlX2lkID0gX21pY3Jvc2NvcGVfZGF0YVsnc2l0ZUluc3RhbmNlSWQnXTtcbiAgaW5mby5tc19kYXRhX3NpdGVDYXRlZ29yeUlkID0gX21pY3Jvc2NvcGVfZGF0YVsnc2l0ZUNhdGVnb3J5J107XG4gIGluZm8ubXNfcHJvdG90eXBlX2lkID0gX21pY3Jvc2NvcGVfZGF0YVsncHJvdG90eXBlSWQnXTtcbiAgaW5mby5zaXRlX2luc3RhbmNlX2lkX29yX3Nob3BfaWQgPSBpbmZvLm1zX2RhdGFfaW5zdGFuY2VfaWQgfHwgaW5mby5tc19kYXRhX3Nob3BfaWQ7XG5cbiAgLy8g56e76Zmk5LqGIGF0cC1iZWFjb24g5Yqf6IO977yM5pqC5pe25L+d55WZ5YWl5Y+jIEDosIvlo6sgMjAxOC0wMS0xMFxuICBpbmZvLl9hdHBfYmVhY29uX2RhdGEgPSB7fTtcbiAgaW5mby5fYXRwX2JlYWNvbl9kYXRhX3BhcmFtcyA9ICcnO1xufTtcblxuLyoqXG4gKiA8bWV0YSBuYW1lPVwiZGF0YS1zcG1cIiBjb250ZW50PVwiMVwiIGRhdGEtc3BtLXByb3RvY29sPVwiaVwiIC8+XG4gKlxuICog5Y+W5b6XIGRhdGEtc3BtIOi/meS4qiBtZXRhIOS4iueahCBkYXRhLXNwbS1wcm90b2NvbCDnmoTlgLxcbiAqIOWmguaenOacieiuvue9ruS4lOWAvOS4uiAnaSfvvIjkvb/nlKggaW1nIOWNj+iuru+8ie+8jOWImemhtemdouS4iuaJgOacieeahCA8YT4vPGFyZWE+IOmTvuaOpeiiq+eCueWHu+aXtumDveS4jea3u+WKoCBzcG0g5Y+C5pWw77yM6ICM5pivXG4gKiDlj5HpgIHkuIDkuKogbmV3IEltYWdlKCkg6K+35rGCXG4gKi9cbmZ1bmN0aW9uIGdldFNQTVByb3RvY29sRnJvbU1ldGEgKG1ldGFfbm9kZXMpIHtcbiAgdmFyIG1ldGFfc3BtX3Byb3RvY29sO1xuICB2YXIgZ2V0TWV0YUJ5RGF0YXNwbSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX21ldGE7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IpIHtcbiAgICAgIF9tZXRhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPWRhdGEtc3BtXScpO1xuICAgIH1cbiAgICBlYWNoKG1ldGFfbm9kZXMsIGZ1bmN0aW9uIChtKSB7XG4gICAgICBpZiAodXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtLCAnbmFtZScpID09PSAnZGF0YS1zcG0nKSB7XG4gICAgICAgIF9tZXRhID0gbTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gX21ldGE7XG4gIH07XG4gIHZhciBtZXRhID0gZ2V0TWV0YUJ5RGF0YXNwbSgpO1xuICBpZiAobWV0YSkge1xuICAgIG1ldGFfc3BtX3Byb3RvY29sID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCAnZGF0YS1zcG0tcHJvdG9jb2wnKTtcbiAgfVxuICByZXR1cm4gbWV0YV9zcG1fcHJvdG9jb2w7XG59O1xuXG5mdW5jdGlvbiBwYXJzZU9uZVBhZ2UoaW5mbykge1xuICB2YXIgY29udGVudCA9IGluZm8uaXNvbmVwYWdlIHx8ICctMSc7XG4gIHZhciBhcnJfY29udGVudCA9IGNvbnRlbnQuc3BsaXQoJ3wnKTtcbiAgdmFyIGlzb25lcGFnZSA9IGFycl9jb250ZW50WzBdO1xuICB2YXIgdXJscGFnZW5hbWUgPSBhcnJfY29udGVudFsxXSA/IGFycl9jb250ZW50WzFdIDogJyc7XG5cbiAgaW5mby5pc29uZXBhZ2VfZGF0YSA9IHtcbiAgICBpc29uZXBhZ2U6IGlzb25lcGFnZSxcbiAgICB1cmxwYWdlbmFtZTogdXJscGFnZW5hbWVcbiAgfTtcbn07XG5cbi8qKlxuICogQHJldHVybnMge3t9fVxuICovXG52YXIgbGFzdF9pbmZvO1xuZnVuY3Rpb24gZ2V0SW5mbygpIHtcbiAgaWYgKGRvY3VtZW50KSB7XG4gICAgdmFyIG1ldGFfbm9kZXMgPSB1dGlsTWV0YS5nZXRNZXRhVGFncygpO1xuICAgIGdldE1ldGFNaWNyb3Njb3BlRGF0YShtZXRhX25vZGVzKTtcblxuICAgIC8vIHN0ZXAx44CB5ou/5Yiw5omA5pyJYXBsdXPlhbPplK7or43lvIDlpLTnmoRtZXRhVmFsdWVcbiAgICBlYWNoKG1ldGFfbm9kZXMsIGZ1bmN0aW9uKG0pe1xuICAgICAgdmFyIG1ldGFOYW1lID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtLCAnbmFtZScpO1xuICAgICAgaWYgKC9eYXBsdXMvLnRlc3QobWV0YU5hbWUpKSB7XG4gICAgICAgIGluZm9bbWV0YU5hbWVdID0gdXRpbE1ldGEuZ2V0TWV0YUNudChtZXRhTmFtZSk7XG4gICAgICAgIGlmIChtZXRhTmFtZSA9PT0gQVBMVVNfWF9TRVRUSU5HUykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcmlvcml0eU1ldGFJbmZvID0gaW5mb1ttZXRhTmFtZV0gPSBKU09OLnBhcnNlKHV0aWxNZXRhLmdldE1ldGFDbnQobWV0YU5hbWUpKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gc3RlcDLjgIHmi7/liLDpmaTkuoZhcGx1c+WFs+mUruivjeW8gOWktOeahO+8jOWOhuWPsuaatOmcsueahOaOpeWPo21ldGFWYWx1ZVxuICAgIGVhY2goa2V5cywgZnVuY3Rpb24gKGspIHtcbiAgICAgIGluZm9ba10gPSB1dGlsTWV0YS5nZXRNZXRhQ250KGspO1xuICAgIH0pO1xuXG4gICAgaW5mby5zcG1fcHJvdG9jb2wgPSBnZXRTUE1Qcm90b2NvbEZyb21NZXRhKG1ldGFfbm9kZXMpO1xuICAgIGlmIChwcmlvcml0eU1ldGFJbmZvKSB7XG4gICAgICBpbmZvID0gdXRpbERhc2guYXNzaWduKGluZm8sIHByaW9yaXR5TWV0YUluZm8pO1xuICAgIH1cblxuICAgIC8vIHN0ZXAz44CB5rWu54K55pWw54m55q6K5aSE55CGXG4gICAgdmFyIGZsb2F0X2tleXMgPSBbJ2FwbHVzLXJhdGUtYWhvdCddO1xuICAgIHZhciBpO1xuICAgIHZhciBrO1xuICAgIHZhciBsID0gZmxvYXRfa2V5cy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkgKyspIHtcbiAgICAgIGsgPSBmbG9hdF9rZXlzW2ldO1xuICAgICAgaW5mb1trXSA9IHBhcnNlRmxvYXQoaW5mb1trXSk7XG4gICAgfVxuXG4gICAgcGFyc2VPbmVQYWdlKGluZm8pO1xuICB9XG4gIGxhc3RfaW5mbyA9IGluZm8gfHwge307XG4gIHJldHVybiBpbmZvO1xufTtcbmV4cG9ydHMuZ2V0SW5mbyA9IGdldEluZm87XG5cbi8vIOWmguaenOaciee8k+WtmO+8jOS9v+eUqOe8k+WtmOeahOWAvO+8jOayoeaciee8k+WtmOWImeS7jiBET00g5Lit6K+75Y+WXG5leHBvcnRzLnFHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBsYXN0X2luZm8gfHwgZ2V0SW5mbygpO1xufTtcblxuZnVuY3Rpb24gbG9nZ2VyUHJpb3JpdHlJbmZvIChrKSB7XG4gIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICBtc2c6ICdwbGVhc2UgZG8gbm90IHJlcGVhdCBzZXRQcmlvcml0eU1ldGFJbmZvICcgKyBrXG4gIH0pO1xufVxuXG4vKipcbiAqIOWKqOaAgemFjee9rm1ldGFcbiAqIOWuuemUmeagoemqjOenu+akjeWIsGFwbHVz5Y+v6KeG5YyW5Z+L54K56aqM6K+B5bel5YW35YaFIDIwMTgtMDEtMTAgQOiwi+Wjq1xuICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG4gKlxuICogQHBhcmFtcyB7U3RyaW5nfSBrXG4gKiBAcGFyYW1zIHtPYmplY3R9IHZcbiAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7IHByaW9yaXR5OiAxIH0gfHwgbnVsbFxuICovXG5leHBvcnRzLnNldE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcbiAgaWYgKCFsYXN0X2luZm8pIHtcbiAgICBsYXN0X2luZm8gPSB7fTtcbiAgfVxuICAvLyDlhajlsYDphY3nva7lj6ropoHmnInlsLHkuI3og73lho3mrKHorr7nva7vvIzmlYXov5nph4znm7TmjqVyZXR1cm5cbiAgaWYgKHR5cGVvZiBwcmlvcml0eU1ldGFJbmZvID09PSAnb2JqZWN0JyAmJiBwcmlvcml0eU1ldGFJbmZvW2tdKSB7XG4gICAgbG9nZ2VyUHJpb3JpdHlJbmZvKGspO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChrID09PSBBUExVU19YX1NFVFRJTkdTKSB7XG4gICAgaWYgKCFwcmlvcml0eU1ldGFJbmZvKSB7XG4gICAgICB0cnkge1xuICAgICAgICBwcmlvcml0eU1ldGFJbmZvID0gdHlwZW9mIHYgPT09ICdvYmplY3QnID8gdiA6IEpTT04ucGFyc2Uodik7XG4gICAgICAgIGxhc3RfaW5mbyA9IHV0aWxEYXNoLmFzc2lnbihsYXN0X2luZm8sIHByaW9yaXR5TWV0YUluZm8pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKGUpO1xuICAgICAgfSAgXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlclByaW9yaXR5SW5mbyhrKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAoayA9PT0gJ2FwbHVzLWV4aW5mbycpIHtcbiAgICBsYXN0X2luZm9ba10gPSB0eXBlb2YgdiA9PT0gJ29iamVjdCcgPyB2IDogZm9ybWF0LnBhcmFtMm9iaih2KTtcbiAgfSBlbHNlIHtcbiAgICBsYXN0X2luZm9ba10gPSB2O1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBnZXQgbWV0YUluZm8gYnkga2V5XG4gKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcbiAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvcHJvamVjdC9wZXJmb3JtYW5jZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG52YXIgZ2V0TWV0YUluZm8gPSBmdW5jdGlvbihrKSB7XG4gIGlmICghbGFzdF9pbmZvKSB7XG4gICAgbGFzdF9pbmZvID0ge307XG4gIH1cbiAgcmV0dXJuIGxhc3RfaW5mb1trXSB8fCAnJztcbn07XG5leHBvcnRzLmdldE1ldGFJbmZvID0gZ2V0TWV0YUluZm87XG5cblxuLyoqXG4gKiBUbyBhcHBlbmQgYG1ldGFgIHRhZyBpZiB0aGVyZSdzIG5vbmUgYXBsdXMgbWV0YS5cbiAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG4gKiAgLSBgT2JqZWN0LmFzc2lnbmAgY2FsbGVkIG9uIE9iamVjdCB2YWx1ZXMuXG4gKiAgQHBhcmFtIGtcbiAqICBAcGFyYW0gdlxuICovXG5leHBvcnRzLmFwcGVuZE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIGlmIChrICYmIHYpIHtcbiAgICAvLyBhcGx1cy11dHBhcmFtIHx8IGFwbHVzLW5leHRwYWdlLXV0cGFyYW0gfHwgYXBsdXMtZXhkYXRhXG4gICAgdmFyIHByb2Nlc3NPYmplY3QgPSBmdW5jdGlvbiAob2xkX3ZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZSh2KSA6IHY7XG4gICAgICAgIHRvU2V0TWV0YUluZm8oaywgdXRpbERhc2guYXNzaWduKG9sZF92YWx1ZSwgbmV3X3ZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH07XG4gICAgLy8gYXBsdXMtYXV0by1leHAgfHwgYXBsdXMtYXV0by1jbGtcbiAgICB2YXIgcHJvY2Vzc0FycmF5ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIG5ld192YWx1ZSA9IHR5cGVvZiB2ID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UodikgOiB2O1xuICAgICAgICB0b1NldE1ldGFJbmZvKGssIG9sZF92YWx1ZS5jb25jYXQobmV3X3ZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH07XG5cbiAgICB2YXIgcHJvY2Vzc09iaiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgICBwcm9jZXNzQXJyYXkodmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzc09iamVjdCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgdG9TZXRNZXRhSW5mbyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICBhcGx1cy5zZXRNZXRhSW5mbyhrZXksIHZhbHVlLCB7XG4gICAgICAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL2RvY3MvbWV0YSNtZXRhLWFwbHVzLWV4aW5mb1xuICAgIHZhciBwcm9jZXNzQXBsdXNFeGluZm8gPSBmdW5jdGlvbiAob2xkX3ZhbHVlKSB7XG4gICAgICB2YXIgZXhpbmZvc19uZXcgPSBmb3JtYXQucGFyYW0yb2JqKHYpO1xuICAgICAgdG9TZXRNZXRhSW5mbyhrLCB1dGlsRGFzaC5hc3NpZ24ob2xkX3ZhbHVlLCBleGluZm9zX25ldykpOyAvLyBleGluZm9zX29sZC5jb25jYXQoZXhpbmZvc19uZXcpLmpvaW4oJyYnKVxuICAgIH07XG5cbiAgICB2YXIgZmxhZztcbiAgICB2YXIgX29sZFZhbHVlID0gYXBsdXMuZ2V0TWV0YUluZm8oayk7XG4gICAgaWYgKGsgPT09ICdhcGx1cy1leGluZm8nKSB7XG4gICAgICBwcm9jZXNzQXBsdXNFeGluZm8oX29sZFZhbHVlKTtcbiAgICAgIGZsYWcgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoX29sZFZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIF9vbGRWYWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgcHJvY2Vzc09iaihfb2xkVmFsdWUpO1xuICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHRtcF9wYXJzZSA9IEpTT04ucGFyc2UoX29sZFZhbHVlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRtcF9wYXJzZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHByb2Nlc3NPYmoodG1wX3BhcnNlKTtcbiAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghZmxhZykge1xuICAgICAgdG9TZXRNZXRhSW5mbyhrLCB2KTtcbiAgICB9XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tZXRhSW5mb0FsaS5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcy91dGlsL2Zvcm1hdC5qc1xuICog5bel5YW357G7XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gdmFyIHRyeVRvRGVjb2RlID0gcmVxdWlyZSgnLi90cnlUb0RlY29kZScpO1xuXG5leHBvcnRzLmFycjJvYmogPSBmdW5jdGlvbiAoYXJyKSB7XG4gIHZhciByZXQgPSB7fTtcbiAgdmFyIGs7XG4gIHZhciB2O1xuICB2YXIgaTtcbiAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgayA9IGFycltpXVswXTtcbiAgICB2ID0gYXJyW2ldWzFdO1xuICAgIHJldFtrXSA9IHY7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogcGFyYW0gdG8gb2JqZWN0XG4gKiDlsIbkuIDkuKrnroDljZXnmoTlvaLlpoIgYT0xJmI9MiZjPTMg6L+Z5qC355qE5Y+C5pWw6L2s5YyW5Li6566A5Y2V55qEIG9iamVjdCDmoLzlvI/vvIzlpoLvvJpcbiAqIHtcbiAqICAgYTogXCIxXCIsXG4gKiAgIGI6IFwiMlwiLFxuICogICBjOiBcIjNcIlxuICogfVxuICogQHBhcmFtIHBhcmFtcyB7U3RyaW5nfVxuICovXG5leHBvcnRzLnBhcmFtMm9iaiA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuICBpZiAoIXBhcmFtcykgcGFyYW1zID0gJyc7XG5cbiAgdmFyIG9iaiA9IHt9O1xuICB2YXIgYSA9IHBhcmFtcy5zcGxpdCgnJicpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGFbaV07XG4gICAgdmFyIGluZGV4ID0gaXRlbS5pbmRleE9mKCc9Jyk7XG4gICAgdmFyIGZyYWdtZW50ID0gaXRlbS5zcGxpdCgnPScpO1xuICAgIHZhciBsZW4gPSBpdGVtLmxlbmd0aDtcbiAgICBpZiAoZnJhZ21lbnQubGVuZ3RoID09PSAyKSB7XG4gICAgICBvYmpbZnJhZ21lbnRbMF1dID0gZnJhZ21lbnRbMV0gfHwgJyc7ICBcbiAgICB9IGVsc2UgaWYgKGluZGV4ID4gMCkge1xuICAgICAgdmFyIGtleSA9IGl0ZW0uc2xpY2UoMCwgaW5kZXgpO1xuICAgICAgdmFyIHZhbHVlID0gaXRlbS5zbGljZShpbmRleCArIDEsIGxlbikgfHwgJyc7XG4gICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpbZnJhZ21lbnRbMF1dID0gJyc7XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmo7XG59O1xuXG4vLyBjb25zb2xlLmxvZygnVE9ETyBkZWxldGUgc19wbGFpbl9vYmonKTtcbnZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5leHBvcnRzLnNfcGxhaW5fb2JqID0gc19wbGFpbl9vYmo7XG5cbi8qKlxuICogYXJyYXkgdG8gcGFyYW1cbiAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG4gKiDlhbbkuK3mlbDnu4TkuLpcbiAqICAgICAgW1trMSwgdjFdLCBbazIsIHYyXSwgW2szLCB2M10sIC4uLl1cbiAqIOeahOW9ouW8j+OAglxuICog5LiOIG9iajJwYXJhbSDnm7jmr5TvvIzov5nkuKrmlrnms5XnmoTlpb3lpITmmK/lj6/ku6Xkv53or4HmnIDlkI7lj4LmlbDnmoTpobrluo9cbiAqIEBwYXJhbSBhcnIge0FycmF5fVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBhcnIycGFyYW0oYXJyLCBza2lwRW5jb2RlKSB7XG4gIHZhciBhID0gW10sXG4gICAgayxcbiAgICB2LFxuICAgIGksXG4gICAgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBrID0gYXJyW2ldWzBdO1xuICAgIHYgPSBhcnJbaV1bMV07XG4gICAgdmFyIGlzSW5QbGFuT2JqID0gay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMDtcbiAgICB2YXIgX3ZhbHVlID0gaXNJblBsYW5PYmogfHwgc2tpcEVuY29kZSA/IHYgOiBlbmNvZGVVUklDb21wb25lbnQodik7XG4gICAgYS5wdXNoKGlzSW5QbGFuT2JqID8gX3ZhbHVlIDogKGsgKyAnPScgKyBfdmFsdWUpKTtcbiAgfVxuICByZXR1cm4gYS5qb2luKCcmJyk7XG59O1xuZXhwb3J0cy5hcnIycGFyYW0gPSBhcnIycGFyYW07XG5cbi8qKlxuICogb2JqZWN0IHRvIHBhcmFtXG4gKiDlsIbkuIDkuKrnroDljZXlr7nosaHovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j1xuICog5Y+C6KeBIGFycjJwYXJhbSgpIOaWueazlVxuICogQHBhcmFtIG9iaiB7T2JqZWN0fVxuICogQHBhcmFtIGNvbW1UcmFuc2xhdGUge0Jvb2xlYW59IOaZrumAmui9rOaNouS4jeWBmmlzU3RhcnRXaXRo5qCh6aqMXG4gKlxuICovXG5leHBvcnRzLm9iajJwYXJhbSA9IGZ1bmN0aW9uIChvYmosIGNvbW1UcmFuc2xhdGUpIHtcbiAgdmFyIGEgPSBbXTtcbiAgdmFyIGs7XG4gIHZhciB2O1xuICB2YXIgX3Y7XG4gIGZvciAoayBpbiBvYmopXG4gICAgaWYgKGsgJiYgb2JqLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICB2ID0gJycgKyBvYmpba107XG4gICAgICBfdiA9IGsgKyAnPScgKyB2O1xuICAgICAgaWYgKCFjb21tVHJhbnNsYXRlKSB7XG4gICAgICAgIGEucHVzaChrLmluZGV4T2Yoc19wbGFpbl9vYmopID09PSAwID8gdiA6IF92KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGEucHVzaChfdik7XG4gICAgICB9XG4gICAgfVxuICByZXR1cm4gYS5qb2luKCcmJyk7XG59O1xuXG5leHBvcnRzLmVuY29kZUdva2V5VmFsdWUgPSBmdW5jdGlvbiAoZ29rZXkpIHtcbiAgLy8gdmFyIGFwbHVzID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJykuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIC8vIC8vIOWvuWdva2V55YaF55qEdmFsdWXnu5/kuIDliqDkuIDlsYLnvJbnoIFcbiAgLy8gaWYgKHR5cGVvZiBnb2tleSA9PT0gJ29iamVjdCcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4gIC8vICAgZm9yICh2YXIgayBpbiBnb2tleSkge1xuICAvLyAgICAgaWYgKHR5cGVvZiBnb2tleVtrXSA9PT0gJ3N0cmluZycpIHtcbiAgLy8gICAgICAgdHJ5IHtcbiAgLy8gICAgICAgICBnb2tleVtrXSA9IGVuY29kZVVSSUNvbXBvbmVudChkZWNvZGVVUklDb21wb25lbnQoZ29rZXlba10pKTtcbiAgLy8gICAgICAgfSBjYXRjaCAoZSkge31cbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vIH1cbiAgcmV0dXJuIGdva2V5O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2Zvcm1hdC5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5hc3NpZ24gPSByZXF1aXJlKCcuL2Fzc2lnbicpO1xuXG4vKipcbiAqIOeUn+aIkOS4gOS4queUqOS6jumBv+WFjee8k+WtmOeahOmaj+acuuaVsFxuICog5Li65LqG5YeP5bCRIHVybCDplb/luqbvvIzov5nkuKrpmo/mnLrmlbDmja7nmoTplb/luqblrprkuLogNyDkvY3vvIxcbiAqIOS4uuS6huWHj+WwkeeisOaSnu+8jOS9v+eUqCAxNiDov5vliLbmlbDlrZdcbiAqXG4gKiAyNjg0MzU0NTYgPSAyIF4gMjggPSAweGZmZmZmZmYgKyAxXG4gKi9cbmV4cG9ydHMubWFrZUNhY2hlTnVtID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjY4NDM1NDU2KS50b1N0cmluZygxNik7XG59O1xuXG4vKipcbiAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbku6XlrZfnrKbkuLIgczIg5byA5aS0XG4gKiBAcGFyYW0gczEge1N0cmluZ31cbiAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmlzU3RhcnRXaXRoID0gZnVuY3Rpb24oczEsIHMyKSB7XG4gIHJldHVybiBzMS5pbmRleE9mKHMyKSA9PT0gMDtcbn07XG4vKipcbiAqIOWIpOaWreWtl+espuS4siBzMSDmmK/mu57ku6XlrZfnrKbkuLIgczIg57uT5bC+XG4gKiBAcGFyYW0gczEge1N0cmluZ31cbiAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmlzRW5kV2l0aCA9IGZ1bmN0aW9uKHMxLCBzMikge1xuICB2YXIgbDEgPSBzMS5sZW5ndGgsIGwyID0gczIubGVuZ3RoO1xuICByZXR1cm4gbDEgPj0gbDIgJiYgczEuaW5kZXhPZihzMikgPT0gKGwxIC0gbDIpO1xufTtcblxuZXhwb3J0cy5hbnkgPSBmdW5jdGlvbihhcnIsIGZuKSB7XG4gIHZhciBpO1xuICB2YXIgbCA9IGFyci5sZW5ndGg7XG4gIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoZm4oYXJyW2ldKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmV4cG9ydHMuaXNOdW1iZXIgPSBmdW5jdGlvbih2KSB7XG4gIHJldHVybiB0eXBlb2YgdiA9PT0gJ251bWJlcic7XG59O1xuXG5leHBvcnRzLmlzTmFOID0gZnVuY3Rpb24odikge1xuICBpZihpc05hTikge1xuICAgIHJldHVybiBpc05hTih2KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdiAhPT0gdjtcbiAgfVxufTtcblxuLyoqXG4gKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5ZCm5YyF5ZCr5a2X56ym5LiyIHMyXG4gKiBAcGFyYW0gczEge1N0cmluZ31cbiAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuICovXG5leHBvcnRzLmlzQ29udGFpbiA9IGZ1bmN0aW9uIChzMSwgczIpIHtcbiAgcmV0dXJuIHMxLmluZGV4T2YoczIpID4gLTE7XG59O1xuXG4vKipcbiAqIOWFi+mahuS4gOS4qm9iamVjdFxuICovXG52YXIgY2xvbmVEZWVwID0gZnVuY3Rpb24ob2JqKSB7XG4gIHZhciBzdHI7XG4gIHZhciBuZXdvYmogPSBvYmouY29uc3RydWN0b3IgPT09IEFycmF5ID8gW10gOiB7fTtcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2UgaWYgKEpTT04gJiYgSlNPTi5wYXJzZSkge1xuICAgIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7IC8v57O75YiX5YyW5a+56LGhXG4gICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3b2JqO1xufTtcblxuZXhwb3J0cy5jbG9uZURlZXAgPSBjbG9uZURlZXA7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRGFzaC5qc1xuLy8gbW9kdWxlIGlkID0gMjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG4vKipcbiAqIOWvueixoW1lcmdlXG4gKiAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnblxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0YXJnZXRPYmosIGFyZ3NPYmopIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgICAgaWYgKG5leHRTb3VyY2UgIT09IG51bGwpIHsgLy8gU2tpcCBvdmVyIGlmIHVuZGVmaW5lZCBvciBudWxsXG4gICAgICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBuZXh0U291cmNlKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG5leHRTb3VyY2UsIG5leHRLZXkpKSB7XG4gICAgICAgICAgICAgIHRvW25leHRLZXldID0gbmV4dFNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0bztcbiAgICB9KHRhcmdldE9iaiwgYXJnc09iaik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRhcmdldE9iaiwgYXJnc09iaik7XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvYXNzaWduLmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbFRyaW0gPSByZXF1aXJlKCcuL3V0aWxUcmltJyk7XG52YXIgdXRpbFN0b3JlID0gcmVxdWlyZSgnLi91dGlsU3RvcmUnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdHJ5VG9EZWNvZGVVUklDb21wb25lbnQ6IGZ1bmN0aW9uICh2YWwsIGRlZmF1bHRfdmFsKSB7XG4gICAgdmFyIHYgPSBkZWZhdWx0X3ZhbCB8fCAnJztcbiAgICBpZiAodmFsKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2O1xuICB9LFxuICBcbiAgLyoqXG4gICAqIOWwhuW9ouWmgiBcInBhZ2VJZD0xMjM7IHNpdGVJZD00NTZcIiDnmoTlhoXlrrnop6PmnpDkuLogT2JqZWN0XG4gICAqIEBwYXJhbSBzIHtTdHJpbmd9XG4gICAqIEBwYXJhbSBbZGljdF0ge09iamVjdH1cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgcGFyc2VTZW1pY29sb25Db250ZW50OiBmdW5jdGlvbiAocywgZGljdCwgdW5kZWNvZGUpIHtcbiAgICBkaWN0ID0gZGljdCB8fCB7fTtcbiAgICB2YXIgYSA9IHMuc3BsaXQoJzsnKTtcbiAgICB2YXIgajtcbiAgICB2YXIgYV9sZW4gPSBhLmxlbmd0aDtcbiAgICB2YXIgYTI7XG5cbiAgICBmb3IgKGogPSAwOyBqIDwgYV9sZW47IGorKykge1xuICAgICAgYTIgPSBhW2pdLnNwbGl0KCc9Jyk7XG4gICAgICB2YXIgX3ZhbHVlID0gdXRpbFRyaW0udHJpbShhMi5zbGljZSgxKS5qb2luKCc9JykpO1xuICAgICAgZGljdFt1dGlsVHJpbS50cmltKGEyWzBdKSB8fCAnJ10gPSB1bmRlY29kZSA/IF92YWx1ZSA6IHRoaXMudHJ5VG9EZWNvZGVVUklDb21wb25lbnQoX3ZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGljdDtcbiAgfSxcblxuICAvKipcbiAgICog5bCG5LiA5LiqIG5vZGUgbGlzdCDovazkuLrmlbDnu4RcbiAgICogQHBhcmFtIG5vZGVzIHtOb2RlTGlzdH1cbiAgICog5Y+C6KeB77yaaHR0cDovL3d3dy5wbGFuYWJjLm5ldC8yMDEwLzAxLzA2L2FyZ3VtZW50c190b19hcnJheS9cbiAgICovXG4gIG5vZGVMaXN0VG9BcnJheTogZnVuY3Rpb24gKG5vZGVzKSB7XG4gICAgdmFyIGFycjtcbiAgICB2YXIgbGVuZ3RoO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIHdvcmtzIGluIGV2ZXJ5IGJyb3dzZXIgZXhjZXB0IElFXG4gICAgICBhcnIgPSBbXS5zbGljZS5jYWxsKG5vZGVzKTtcbiAgICAgIHJldHVybiBhcnI7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBzbG93ZXIsIGJ1dCB3b3JrcyBpbiBJRVxuICAgICAgYXJyID0gW107XG4gICAgICBsZW5ndGggPSBub2Rlcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyLnB1c2gobm9kZXNbaV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXJyO1xuICAgIH1cbiAgfSxcblxuICBnZXRMc0NuYTogZnVuY3Rpb24gKEVUQUdfU1RPUkFHRV9LRVksIGRhdGUpIHtcbiAgICBpZiAodXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG4gICAgICB2YXIgX2xzX2NuYSA9ICcnO1xuICAgICAgdmFyIF92YWx1ZSA9IHV0aWxTdG9yZS5nZXQoRVRBR19TVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoX3ZhbHVlKSB7XG4gICAgICAgIHZhciBfYXJyID0gX3ZhbHVlLnNwbGl0KCdfJykgfHwgW107XG4gICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgX2xzX2NuYSA9IF9hcnIubGVuZ3RoID4gMSAmJiBkYXRlID09PSBfYXJyWzBdID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9sc19jbmEgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoX2xzX2NuYSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0sXG5cbiAgLy8gdXRpbFN0b3JlLnNldCh0aGlzLkVUQUdfU1RPUkFHRV9LRVksICB0aGlzLnRvZGF5ICsgJ18nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNuYSkpO1xuICBzZXRMc0NuYTogZnVuY3Rpb24gKEVUQUdfU1RPUkFHRV9LRVksIHRvZGF5LCBjbmEpIHtcbiAgICBpZiAoY25hICYmIHV0aWxTdG9yZS5zZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuICAgICAgdXRpbFN0b3JlLnNldChFVEFHX1NUT1JBR0VfS0VZLCAgdG9kYXkgKyAnXycgKyBlbmNvZGVVUklDb21wb25lbnQoY25hKSk7XG4gICAgfVxuICB9LFxuXG4gIGdldFVybDogZnVuY3Rpb24gKHVybCkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHZhciBlZ1VybCA9IHVybCB8fCAnLy9sb2cubW1zdGF0LmNvbS9lZy5qcyc7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByaG9zdF92ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJob3N0LXYnKTtcbiAgICAgIHZhciByZWcgPSAvW1thLXp8XFwtfFxcX3wwLTlcXC5dK1thLXp8XFwtfFxcX3wwLTldKDpcXGQqKT8vO1xuICAgICAgdmFyIGN1c3RvbV9ob3N0ID0gcmhvc3Rfdi5tYXRjaChyZWcpO1xuICAgICAgaWYgKGN1c3RvbV9ob3N0ICYmIGN1c3RvbV9ob3N0WzBdKSB7XG4gICAgICAgIC8vIGVnVXJsID0gZWdVcmwucmVwbGFjZShyZWcsIGN1c3RvbV9ob3N0WzBdKTtcbiAgICAgICAgZWdVcmwgPSAnLy8nICsgY3VzdG9tX2hvc3RbMF0gKyAnL2VnLmpzJztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgfVxuICAgIHJldHVybiBlZ1VybDtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxEYXRhLmpzXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5a+55a2X56ym5Liy6L+b6KGMdHJpbeWkhOeQhlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICog5Y675o6J5a2X56ym5LiyIHMg5YmN5ZCO55qE56m65qC8XG4gKiBAcGFyYW0gcyB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiB0cmltKHMpIHtcbiAgcmV0dXJuICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpID8gcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykgOiAnJztcbn07XG5leHBvcnRzLnRyaW0gPSB0cmltO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbFRyaW0uanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzZXQ6IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGssIHYpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcbiAgLy8g57uP6L+HdGVzdOS5i+WQjmdldOW6lOivpeS4jeS8muaciemXrumimFxuICBnZXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuICB0ZXN0OiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRlc3RLZXkgPSAnZ3JleV90ZXN0X2tleSc7XG4gICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRlc3RLZXksIDEpO1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdEtleSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uIChrKSB7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oayk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsU3RvcmUuanNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDml6Xlv5fnsbvlt6Xlhbfpm4blkIhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBwYXJhbXMge09iamVjdH0gbyA6e1xuICogICBsZXZlbDogJ3dhcm4vaW5mby9sb2cnIGRlZmF1bHQgaXMgd2FyblxuICogICBtc2c6ICdtc2cnXG4gKiB9XG4gKi9cbnZhciBwcmVmaXggPSAnW2FwbHVzIGxvZ106ICc7XG5leHBvcnRzLmxvZ2dlciA9IGZ1bmN0aW9uIChvKSB7XG4gIGlmICghbykge1xuICAgIG8gPSB7fTtcbiAgfVxuICB2YXIgbGV2ZWwgPSBvLmxldmVsIHx8ICd3YXJuJztcbiAgY29uc29sZSAmJiBjb25zb2xlW2xldmVsXSAmJiBjb25zb2xlW2xldmVsXShwcmVmaXgrby5tc2cpO1xufTtcblxuZXhwb3J0cy5kZWJ1Z0xvZyA9IGZ1bmN0aW9uKG8pIHtcbiAgdmFyIGFwbHVzID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJykuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnKSB7XG4gICAgdGhpcy5sb2dnZXIobyk7XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbExvZ2dlci5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyciwgZm4pIHtcbiAgdmFyIGk7XG4gIHZhciBsID0gYXJyLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBycyA9IGZuKGFycltpXSwgaSk7XG4gICAgaWYgKHJzID09PSAnYnJlYWsnKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZWFjaC5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMudHJ5VG9HZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyX25hbWUpIHtcbiAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUgPyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cl9uYW1lKSB8fCAnJykgOiAnJztcbn07XG5cbnZhciB0cnlUb1NldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyX25hbWUsIGF0dHJfdmFsdWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcbiAgICB0cnkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cl9uYW1lLCBhdHRyX3ZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy50cnlUb1NldEF0dHJpYnV0ZSA9IHRyeVRvU2V0QXR0cmlidXRlO1xuXG5leHBvcnRzLnRyeVRvUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSkge1xuICAgIHRyeSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyX25hbWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRyeVRvU2V0QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJfbmFtZSwgJycpO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDmk43kvZxtZXRh55qE5bel5YW357G7XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIF9oZWFkX25vZGU7XG52YXIgX21ldGFfbm9kZXM7XG5cbnZhciB1dGlsQXR0cmlidXRlID0gcmVxdWlyZSgnLi91dGlsQXR0cmlidXRlJyk7XG4vKipcbiAqIOWPluW+l+mhtemdouS4iiBoZWFkIOS4reeahOaJgOaciSBtZXRhIOWFg+e0oFxuICogQHBhcmFtIFtmb3JjZV0ge2Jvb2xlYW59IOaYr+WQpuW8uuWItuiOt+WPluaWsOWGheWuuVxuICovXG5mdW5jdGlvbiBnZXRNZXRhVGFncyhmb3JjZSkge1xuICBfaGVhZF9ub2RlID0gX2hlYWRfbm9kZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuXG4gIGlmIChfbWV0YV9ub2RlcyAmJiAhZm9yY2UpIHtcbiAgICByZXR1cm4gX21ldGFfbm9kZXM7XG4gIH1cblxuICByZXR1cm4gX2hlYWRfbm9kZSA/IChfbWV0YV9ub2RlcyA9IF9oZWFkX25vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21ldGEnKSkgOiBbXTtcbn07XG5leHBvcnRzLmdldE1ldGFUYWdzID0gZ2V0TWV0YVRhZ3M7XG5cbi8qKlxuICog5Y+W5b6XIGhlYWQgLyBtZXRhIOS4reaMh+WumiBtZXRhIOeahCAoYXR0ciB8fCBjb250ZW50KSDlgLxcbiAqIDxtZXRhIG5hbWU9XCJhcGx1cy10ZXJtaW5hbFwiIGNvbnRlbnQ9XCIxXCI+XG4gKi9cbmZ1bmN0aW9uIGdldE1ldGFDbnQobmFtZSwgYXR0cikge1xuICB2YXIgaTtcbiAgdmFyIG1ldGE7XG4gIHZhciBtZXRhX25vZGVzID0gZ2V0TWV0YVRhZ3MoKTtcbiAgdmFyIGwgPSBtZXRhX25vZGVzLmxlbmd0aDtcbiAgdmFyIGNvbnRlbnQ7XG5cbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIG1ldGEgPSBtZXRhX25vZGVzW2ldO1xuICAgIGlmICh1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsICduYW1lJykgPT09IG5hbWUpIHtcbiAgICAgIGNvbnRlbnQgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsIGF0dHIgfHwgJ2NvbnRlbnQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29udGVudCB8fCAnJztcbn07XG5leHBvcnRzLmdldE1ldGFDbnQgPSBnZXRNZXRhQ250O1xuXG5cbi8qKlxuICog56Gu5a6aIGhlYWQgLyBtZXRhIOS4reeahCBpc29uZXBhZ2Ug55qE5pWw5o2uXG4gKiDlvaLlpoLvvJpcbiAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMFwiIC8+IOihqOekuuS4jeaYr29uZXBhZ2VcbiAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMXxodHRwOi8vaDUubS50YW9iYW8uY29tL3dlL2luZGV4Lmh0bSNkZXRhaWxcIiAvPiDooajnpLrmmK9vbmVwYWdlXG4gKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBnZXRPbmVQYWdlSW5mbyhtZXRhSW5mbykge1xuICB2YXIgb2JqID0ge1xuICAgIGlzb25lcGFnZTogJy0xJyxcbiAgICB1cmxwYWdlbmFtZTogJydcbiAgfTtcbiAgdmFyIG1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKTtcbiAgaWYgKG1ldGFfaW5mbyAmJiBtZXRhX2luZm8uaGFzT3duUHJvcGVydHkoJ2lzb25lcGFnZV9kYXRhJykpIHtcbiAgICBvYmouaXNvbmVwYWdlID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLmlzb25lcGFnZTtcbiAgICBvYmoudXJscGFnZW5hbWUgPSBtZXRhX2luZm8uaXNvbmVwYWdlX2RhdGEudXJscGFnZW5hbWU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNvbnRlbnQgPSBnZXRNZXRhQ250KCdpc29uZXBhZ2UnKSB8fCAnLTEnO1xuICAgIHZhciBhcnJfY29udGVudCA9IGNvbnRlbnQuc3BsaXQoXCJ8XCIpO1xuICAgIG9iai5pc29uZXBhZ2UgPSBhcnJfY29udGVudFswXTtcbiAgICBvYmoudXJscGFnZW5hbWUgPSBhcnJfY29udGVudFsxXSA/IGFycl9jb250ZW50WzFdIDogXCJcIjtcbiAgfVxuICByZXR1cm4gb2JqO1xufTtcbmV4cG9ydHMuZ2V0T25lUGFnZUluZm8gPSBnZXRPbmVQYWdlSW5mbztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxNZXRhLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogcmVmZXJyZXLlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbmFtZVN0b3JhZ2UgPSByZXF1aXJlKCcuL3V0aWxOYW1lU3RvcmFnZScpLm5hbWVTdG9yYWdlO1xuXG5leHBvcnRzLmdldFJlZmVyID0gZnVuY3Rpb24gKE5BTUVfU1RPUkFHRV9LRVlTKSB7XG4gIHJldHVybiBkb2N1bWVudC5yZWZlcnJlciB8fCBuYW1lU3RvcmFnZS5nZXRJdGVtKE5BTUVfU1RPUkFHRV9LRVlTLlJFRkVSUkVSKSB8fCAnJztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUmVmZXJyZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL2FwbHVzX2NwbHVnaW4vc3JjL2xpYl9tb25pdG9yL3RyYWNrZXJfbG9zdHB2LmpzXG4gKiDorrDlvZXkuKLlpLFwdueahOWcuuaZr1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsRXZlbnQgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEV2ZW50Jyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBuYW1lU3RvcmFnZSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTmFtZVN0b3JhZ2UnKS5uYW1lU3RvcmFnZTtcbnZhciB1dGlsUmVmZXJyZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFJlZmVycmVyJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtcyB7T2JqZWN0fSBvcHRpb25zIHtcbiAgICAgKiAgIGxvZ0NvbmZpZzoge2xvZ0NvbmZpZ31cbiAgICAgKiB9XG4gICAgICovXG4gICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyB9LFxuXG4gICAgLyoqXG4gICAgICog5YaZIHJlZmVycmVyXG4gICAgICpcbiAgICAgKiDlnKggd2luZG93Lm5hbWUg5Lit6K6w5b2V5b2T5YmN6aG16Z2i55qEIHVybO+8jOS7peS+v+S4i+S4gOS4qumhtemdouivu+WPllxuICAgICAqIHdpbmRvdy5uYW1lIOeahOivu+WGmSBBUEkg5ZKMIG5hbWUg5YC855qE6KeE6IyD5a6a5LmJ6YO96YeH55SoIG5hbWVTdG9yYWdlXG4gICAgICogaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vY29kZXYvbmFtZS1zdG9yYWdlL3RyZWUvbWFzdGVyXG4gICAgICovXG4gICAgcmVjb3JkVmFsSW5XaW5kb3dOYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaXNfaHR0cHMgPSBhcGx1c1N0YXRpYy5IVFRQUyA9PSBsb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgIHZhciBOQU1FU1RPUkFHRV9LRVlTID0gYXBsdXMuZ2xvYmFsQ29uZmlnLk5BTUVTVE9SQUdFX0tFWVMgfHwge307XG4gICAgICB2YXIgcmVmZXJyZXI7XG4gICAgICB2YXIgcmVmZXJyZXJfcHZfaWQ7XG5cbiAgICAgIC8vIOS7heWcqCB0b3Ag6aG16Z2i5omN5YGa6L+Z5Liq5pON5L2cXG4gICAgICAvLyDku4XlnKggaHR0cHMg6aG16Z2i5ZyoIHdpbmRvdy5uYW1lIOS4reiusOW9leS4iyByZWZlcnJlciDnmoTlgLxcbiAgICAgIHZhciBpc19pbl9pZnJhbWUgPSBwYXJlbnQgIT09IHNlbGY7ICAvLyDlvZPliY3pobXpnaLmmK/lkKblnKggaWZyYW1lIOS4rVxuICAgICAgaWYgKGlzX2luX2lmcmFtZSB8fCAhaXNfaHR0cHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgcGFnZV91cmwgPSBsb2NhdGlvbi5ocmVmO1xuICAgICAgLy8g5piv5ZCm5Zyo55m75b2V6aG16Z2i5LiKXG4gICAgICB2YXIgaXNfbG9naW5fcGFnZSA9IGlzX2h0dHBzICYmIChwYWdlX3VybC5pbmRleE9mKCdsb2dpbi50YW9iYW8uY29tJykgPj0gMCB8fCBwYWdlX3VybC5pbmRleE9mKCdsb2dpbi50bWFsbC5jb20nKSA+PSAwKTtcbiAgICAgIHZhciBwYWdlX3JlZmVycmVyID0gdXRpbFJlZmVycmVyLmdldFJlZmVyKE5BTUVTVE9SQUdFX0tFWVMpO1xuXG4gICAgICAvKipcbiAgICAgICAqIOWmguaenOaYr+WcqOeZu+W9lemhtemdouS4iu+8jOW5tuS4lOW3sue7j+iusOW9leS6huS4gOS4qiByZWZlcnJlcu+8jOWImei/meWEv+WOu+aOiSByZWZlcnJlciDlj4LmlbBcbiAgICAgICAqIOWboOS4uu+8jOWmguaenOeUqOaIt+aYr+S7jiBBIOmhtemdoueCueWHu+WIsCBCIOmhtemdou+8jOS4remXtOe7j+i/h+S6hueZu+W9lemhtemdou+8jFxuICAgICAgICog5ZCO5Y+w5Zyo6L+Y5Y6f6Lev5b6E5pe277yM5Y+q6ZyA6KaB55+l6YGTIEEgLT4gQu+8jOiAjOS4jemcgOimgeefpemBkyBBIC0+IGxvZ2luIC0+IEJcbiAgICAgICAqL1xuICAgICAgaWYgKGlzX2xvZ2luX3BhZ2UgJiYgcGFnZV9yZWZlcnJlcikge1xuICAgICAgICByZWZlcnJlciA9IHBhZ2VfcmVmZXJyZXI7XG4gICAgICAgIHJlZmVycmVyX3B2X2lkID0gbmFtZVN0b3JhZ2UuZ2V0SXRlbShOQU1FU1RPUkFHRV9LRVlTWydSRUZFUlJFUl9QVl9JRCddKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZmVycmVyID0gcGFnZV91cmw7XG4gICAgICAgIHJlZmVycmVyX3B2X2lkID0gYXBsdXMucHZpZDtcbiAgICAgIH1cblxuICAgICAgbmFtZVN0b3JhZ2Uuc2V0SXRlbShOQU1FU1RPUkFHRV9LRVlTWydSRUZFUlJFUiddLCByZWZlcnJlcik7XG4gICAgICBuYW1lU3RvcmFnZS5zZXRJdGVtKE5BTUVTVE9SQUdFX0tFWVNbJ1JFRkVSUkVSX1BWX0lEJ10sIHJlZmVycmVyX3B2X2lkKTtcbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdXRpbEV2ZW50Lm9uKHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3NlbGYucmVjb3JkVmFsSW5XaW5kb3dOYW1lKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbW9uaXRvci9uYW1lX3N0b3JhZ2UuanNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDkuovku7bnsbvlt6Xlhbfpm4blkIhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgcGFzc2l2ZVN1cHBvcnRlZCA9IHJlcXVpcmUoJy4vcGFzc2l2ZVN1cHBvcnRlZCcpO1xudmFyIGFwbHVzVGFwID0gcmVxdWlyZSgnLi9hcGx1c1RhcCcpO1xuXG4vKipcbiAqIHRhcCBtZXRob2RzXG4gKiB0aHggdG8gQOeBteeOiVxuICovXG5mdW5jdGlvbiB0YXBFdmVudEJpbmQgKGVsZW1lbnQsIGZuLCBldmVudF90eXBlKSB7XG4gIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvIHx8IHt9O1xuICB2YXIgYXBsdXNfY3RhcCA9IG1ldGFfaW5mby5hcGx1c19jdGFwIHx8IHt9O1xuICB2YXIgYXBsdXNUb3VjaCA9IG1ldGFfaW5mb1snYXBsdXMtdG91Y2gnXTtcbiAgLy8g5aaC5p6c5Lia5Yqh5pa55pyJ6Ieq5a6a5LmJ5a6e546w55qEdGFw5LqL5Lu25o+S5Lu277yM5LyY5YWI5oyJ6K+l5LqL5Lu25omn6KGMXG4gIGlmIChhcGx1c19jdGFwICYmIHR5cGVvZiBhcGx1c19jdGFwLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgYXBsdXNfY3RhcC5vbihlbGVtZW50LCBmbik7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGlzVG91Y2ggPSAnb250b3VjaGVuZCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaWYgKGlzVG91Y2ggJiYgKGFwbHVzVG91Y2ggPT09ICd0YXAnIHx8IGV2ZW50X3R5cGUgPT09ICd0YXBTcG0nIHx8IGV2ZW50X3R5cGUgPT09ICd0YXAnKSkge1xuICAgICAgYXBsdXNUYXAub24oZWxlbWVudCwgZm4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbihlbGVtZW50LCBpc1RvdWNoID8gJ3RvdWNoc3RhcnQnIDogJ21vdXNlZG93bicsIGZuKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGRvU2Nyb2xsQ2hlY2sgKGNiKSB7XG4gIHRyeSB7XG4gICAgLy8gSWYgSUUgaXMgdXNlZCwgdXNlIHRoZSB0cmljayBieSBEaWVnbyBQZXJpbmlcbiAgICAvLyBodHRwOi8vamF2YXNjcmlwdC5ud2JveC5jb20vSUVDb250ZW50TG9hZGVkL1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgnbGVmdCcpO1xuICB9IGNhdGNoKGUpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgZG9TY3JvbGxDaGVjayhjYik7XG4gICAgfSwgMSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIGFuZCBleGVjdXRlIGFueSB3YWl0aW5nIGZ1bmN0aW9uc1xuICBjYigpO1xufTtcblxuLy8gdGhhbmtzIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvMS4xMi40L3NyYy9jb3JlL3JlYWR5LmpzXG5mdW5jdGlvbiBET01SZWFkeSAoY2FsbGJhY2spIHtcbiAgdmFyIGkgPSAwO1xuICB2YXIgY2IgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gICAgaSsrO1xuICB9O1xuICAvLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvYykucmVhZHkoKSBpcyBjYWxsZWQgYWZ0ZXIgdGhlXG4gIC8vIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuXG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgLy8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG4gICAgY2IoKTtcbiAgfVxuICB2YXIgbG9hZGVkO1xuICAvLyBNb3ppbGxhLCBPcGVyYSBhbmQgd2Via2l0IG5pZ2h0bGllcyBjdXJyZW50bHkgc3VwcG9ydCB0aGlzIGV2ZW50XG4gIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgLy8gVXNlIHRoZSBoYW5keSBldmVudCBjYlxuICAgIGxvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGxvYWRlZCwgZmFsc2UpO1xuICAgICAgY2IoKTtcbiAgICB9O1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBsb2FkZWQsIGZhbHNlKTtcblxuICAgIC8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjYiwgZmFsc2UpO1xuXG4gICAgLy8gSWYgSUUgZXZlbnQgbW9kZWwgaXMgdXNlZFxuICB9IGVsc2UgaWYgKGRvY3VtZW50LmF0dGFjaEV2ZW50KSB7XG4gICAgbG9hZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgYm9keSBleGlzdHMsIGF0IGxlYXN0LCBpbiBjYXNlIElFIGdldHMgYSBsaXR0bGUgb3ZlcnplYWxvdXMgKHRpY2tldCAjNTQ0MykuXG4gICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICBkb2N1bWVudC5kZXRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgbG9hZGVkKTtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8vIGVuc3VyZSBmaXJpbmcgYmVmb3JlIG9ubG9hZCxcbiAgICAvLyBtYXliZSBsYXRlIGJ1dCBzYWZlIGFsc28gZm9yIGlmcmFtZXNcbiAgICBkb2N1bWVudC5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgbG9hZGVkKTtcblxuICAgIC8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrXG4gICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbmxvYWQnLCBjYik7XG5cbiAgICAvLyBJZiBJRSBhbmQgbm90IGEgZnJhbWVcbiAgICAvLyBjb250aW51YWxseSBjaGVjayB0byBzZWUgaWYgdGhlIGRvYyBpcyByZWFkeVxuICAgIHZhciB0b3BsZXZlbCA9IGZhbHNlO1xuXG4gICAgdHJ5IHtcbiAgICAgIHRvcGxldmVsID0gd2luZG93LmZyYW1lRWxlbWVudCA9PT0gbnVsbDtcbiAgICB9IGNhdGNoKGUpIHt9XG5cbiAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsICYmIHRvcGxldmVsKSB7XG4gICAgICBkb1Njcm9sbENoZWNrKGNiKTtcbiAgICB9XG4gIH1cbn07XG4vLyDnm7TmjqXnlKjljp/nlJ/nmoRET01yZWFkee+8jOS4jeWOu+S+nei1luWklumDqOeahGpxdWVyee+8jGtpc3N5IEDosIvlo6sgaW4gMjAxNi0xMi0yN1xuZXhwb3J0cy5ET01SZWFkeSA9IERPTVJlYWR5O1xuXG5mdW5jdGlvbiBvbmxvYWQgKGNhbGxiYWNrKSB7XG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgY2FsbGJhY2soKTtcbiAgfSBlbHNlIHtcbiAgICBvbih3aW5kb3csICdsb2FkJywgY2FsbGJhY2spO1xuICB9XG59O1xuZXhwb3J0cy5vbmxvYWQgPSBvbmxvYWQ7XG5cbi8qKlxuICog57uR5a6a5LqL5Lu2XG4gKiBAcGFyYW0gb2JqIHtXaW5kb3d8RWxlbWVudH0gRE9NIOWFg+e0oFxuICogQHBhcmFtIGV2ZW50X3R5cGVcbiAqIEBwYXJhbSBmXG4gKi9cbmZ1bmN0aW9uIG9uICgpIHtcbiAgdmFyIHdpbiA9IHdpbmRvdztcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gIGlmIChhcmdzLmxlbmd0aCA9PT0gMikge1xuICAgIGlmIChhcmdzWzBdID09PSAnRE9NUmVhZHknKSB7XG4gICAgICBET01SZWFkeShhcmdzWzFdKTtcbiAgICB9XG4gICAgaWYgKGFyZ3NbMF0gPT09ICdvbmxvYWQnKSB7XG4gICAgICBvbmxvYWQoYXJnc1sxXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAzKSB7XG4gICAgdmFyIG9iaiA9IGFyZ3NbMF07XG4gICAgdmFyIGV2ZW50X3R5cGUgPSBhcmdzWzFdO1xuICAgIHZhciBmID0gYXJnc1syXTtcbiAgICBpZiAoZXZlbnRfdHlwZSA9PT0gJ3RhcCcgfHwgZXZlbnRfdHlwZSA9PT0gJ3RhcFNwbScpIHtcbiAgICAgIHRhcEV2ZW50QmluZChvYmosIGYsIGV2ZW50X3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyDlvZPliY3mtY/op4jlmajmmK/lkKbkuLogSUXvvIjmmK/lkKbmlK/mjIEgZG9jdW1lbnQuYXR0YWNoRXZlbnTvvIlcbiAgICAgIHZhciBvbmV2ZW50ID0gISFkb2N1bWVudC5hdHRhY2hFdmVudCA/ICdhdHRhY2hFdmVudCcgOiAnYWRkRXZlbnRMaXN0ZW5lcic7XG4gICAgICB2YXIgYXR0YSA9ICEhZG9jdW1lbnQuYXR0YWNoRXZlbnQ7XG4gICAgICBvYmpbb25ldmVudF0oXG4gICAgICAgIChhdHRhID8gJ29uJyA6ICcnKSArIGV2ZW50X3R5cGUsXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgZSA9IGUgfHwgd2luLmV2ZW50O1xuICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICAgICAgICBpZiAodHlwZW9mIGYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGYoZSwgZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGFzc2l2ZVN1cHBvcnRlZChldmVudF90eXBlKSA/IHsgcGFzc2l2ZTogdHJ1ZSB9IDogZmFsc2VcbiAgICAgICk7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy5vbiA9IG9uO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEV2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOmAmui/h+iiq+WKqOS6i+S7tuS+puWQrOWZqOaPkOWNh+a7muWKqOaAp+iDvVxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3VwZGF0ZXMvMjAxNi8wNi9wYXNzaXZlLWV2ZW50LWxpc3RlbmVycz9obD16aC1jblxuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3Rvb2xzL2xpZ2h0aG91c2UvYXVkaXRzL3Bhc3NpdmUtZXZlbnQtbGlzdGVuZXJzP2hsPXpoLWNuXG4gKi9cbnZhciBzdXBwb3J0ZWQ7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChldmVudF90eXBlKSB7XG4gIGlmICh0eXBlb2Ygc3VwcG9ydGVkID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gc3VwcG9ydGVkO1xuICB9IGVsc2Uge1xuICAgIC8vIOS7hXRvdWNo44CBbW91c2XjgIFzY3JvbGzjgIF3aGVlbOebuOWFs+eahOS6i+S7tumcgOimgeWwneivleW8gOWQrydwYXNzaXZlJ1xuICAgIGlmICghL3RvdWNofG1vdXNlfHNjcm9sbHx3aGVlbC9pLnRlc3QoZXZlbnRfdHlwZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc3VwcG9ydGVkID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0ZXN0JywgbnVsbCwgb3B0aW9ucyk7XG4gICAgfSBjYXRjaChlcnIpIHt9XG4gICAgcmV0dXJuIHN1cHBvcnRlZDtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3Bhc3NpdmVTdXBwb3J0ZWQuanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogdGFwXG4gKiB0aGFua3MgQOiZjueJmVxuICogaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vYWxpbG9nL2FwbHVzX3BsdWdpbl9hbGl0cmlwL3RyZWUvbWFzdGVyL3NyYy9saWJfdGFwXG4gKiBBdXRob3JzOlxuICogICDomY7niZkgPGh1eWEubnpiQGFsaWJhYmEtaW5jLmNvbT5cbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0luaXRpYWxpemVkID0gZmFsc2U7XG5cbi8vIHZhciBkb2MgPSB3aW5kb3cuZG9jdW1lbnQ7XG4vLyB2YXIgZG9jRWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xudmFyIGdlc3R1cmVzID0ge307XG52YXIgVE9VQ0hfU1RBUlQgPSAndG91Y2hzdGFydCc7XG52YXIgVE9VQ0hfRU5EID0gJ3RvdWNoZW5kJztcbnZhciBUT1VSQ0hfTU9WRSA9ICd0b3VjaG1vdmUnO1xudmFyIFRBUFBJTkcgPSAndGFwcGluZyc7XG52YXIgVE9VQ0hfQ0FOQ0VMID0gJ3RvdWNoY2FuY2VsJztcblxuZnVuY3Rpb24gZ2V0UmFuZG9tKG1pbiwgbWF4KSB7XG4gIHJldHVybiBtaW4gKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpO1xufTtcbnZhciBBUExVU19UQVAgPSAnYXBsdXNfdGFwJyArIGdldFJhbmRvbSgxLCAxMDAwMDApO1xuXG5mdW5jdGlvbiBmaXJlRXZlbnQoZWxlbWVudCwgdHlwZSwgZXh0cmEpIHtcbiAgdmFyIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcbiAgZXZlbnQuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUpO1xuXG4gIGlmICh0eXBlb2YgZXh0cmEgPT09ICdvYmplY3QnKSB7XG4gICAgZm9yICh2YXIgcCBpbiBleHRyYSkge1xuICAgICAgZXZlbnRbcF0gPSBleHRyYVtwXTtcbiAgICB9XG4gIH1cblxuICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufVxuXG5mdW5jdGlvbiB0b3VjaHN0YXJ0SGFuZGxlcihldmVudCkge1xuICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIGlmIChPYmplY3Qua2V5cyhnZXN0dXJlcykubGVuZ3RoID09PSAwKSB7XG4gICAgZG9jRWwuYWRkRXZlbnRMaXN0ZW5lcihUT1VSQ0hfTU9WRSwgdG91Y2htb3ZlSGFuZGxlciwgZmFsc2UpO1xuICAgIGRvY0VsLmFkZEV2ZW50TGlzdGVuZXIoVE9VQ0hfRU5ELCB0b3VjaGVuZEhhbmRsZXIsIGZhbHNlKTtcbiAgICBkb2NFbC5hZGRFdmVudExpc3RlbmVyKFRPVUNIX0NBTkNFTCwgdG91Y2hlbmRIYW5kbGVyLCBmYWxzZSk7XG4gIH1cblxuICAvLyByZWNvcmQgZXZlcnkgdG91Y2hcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xuICAgIHZhciB0b3VjaFJlY29yZCA9IHt9O1xuXG4gICAgZm9yICh2YXIgcCBpbiB0b3VjaCkge1xuICAgICAgdG91Y2hSZWNvcmRbcF0gPSB0b3VjaFtwXTtcbiAgICB9XG5cbiAgICB2YXIgZ2VzdHVyZSA9IHtcbiAgICAgIHN0YXJ0VG91Y2g6IHRvdWNoUmVjb3JkLFxuICAgICAgc3RhcnRUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgc3RhdHVzOiBUQVBQSU5HLFxuICAgICAgZWxlbWVudDogZXZlbnQuc3JjRWxlbWVudCB8fCBldmVudC50YXJnZXRcbiAgICB9O1xuICAgIGdlc3R1cmVzW3RvdWNoLmlkZW50aWZpZXJdID0gZ2VzdHVyZTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b3VjaG1vdmVIYW5kbGVyKGV2ZW50KSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcbiAgICB2YXIgZ2VzdHVyZSA9IGdlc3R1cmVzW3RvdWNoLmlkZW50aWZpZXJdO1xuXG4gICAgaWYgKCFnZXN0dXJlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRpc3BsYWNlbWVudFggPSB0b3VjaC5jbGllbnRYIC0gZ2VzdHVyZS5zdGFydFRvdWNoLmNsaWVudFg7XG4gICAgdmFyIGRpc3BsYWNlbWVudFkgPSB0b3VjaC5jbGllbnRZIC0gZ2VzdHVyZS5zdGFydFRvdWNoLmNsaWVudFk7XG4gICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KE1hdGgucG93KGRpc3BsYWNlbWVudFgsIDIpICsgTWF0aC5wb3coZGlzcGxhY2VtZW50WSwgMikpO1xuXG4gICAgLy8gbWFnaWMgbnVtYmVyIDEwOiBtb3ZpbmcgMTBweCBtZWFucyBwYW4sIG5vdCB0YXBcbiAgICBpZiAoKGdlc3R1cmUuc3RhdHVzID09PSBUQVBQSU5HIHx8IGdlc3R1cmUuc3RhdHVzID09PSAncHJlc3NpbmcnKSAmJiBkaXN0YW5jZSA+IDEwKSB7XG4gICAgICBnZXN0dXJlLnN0YXR1cyA9ICdwYW5uaW5nJztcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdG91Y2hlbmRIYW5kbGVyKGV2ZW50KSB7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xuICAgIHZhciBpZCA9IHRvdWNoLmlkZW50aWZpZXI7XG4gICAgdmFyIGdlc3R1cmUgPSBnZXN0dXJlc1tpZF07XG5cbiAgICBpZiAoIWdlc3R1cmUpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChnZXN0dXJlLnN0YXR1cyA9PT0gVEFQUElORyAmJiBldmVudC50eXBlID09PSBUT1VDSF9FTkQpIHtcbiAgICAgIGdlc3R1cmUudGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgIC8vIGZpcmUgY2xpY2ssIG5vdCB0YXAuXG4gICAgICBmaXJlRXZlbnQoZ2VzdHVyZS5lbGVtZW50LCBBUExVU19UQVAsIHtcbiAgICAgICAgdG91Y2g6IHRvdWNoLFxuICAgICAgICB0b3VjaEV2ZW50OiBldmVudFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVsZXRlIGdlc3R1cmVzW2lkXTtcbiAgfVxuXG4gIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgaWYgKE9iamVjdC5rZXlzKGdlc3R1cmVzKS5sZW5ndGggPT09IDApIHtcbiAgICBkb2NFbC5yZW1vdmVFdmVudExpc3RlbmVyKFRPVVJDSF9NT1ZFLCB0b3VjaG1vdmVIYW5kbGVyLCBmYWxzZSk7XG4gICAgZG9jRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihUT1VDSF9FTkQsIHRvdWNoZW5kSGFuZGxlciwgZmFsc2UpO1xuICAgIGRvY0VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoVE9VQ0hfQ0FOQ0VMLCB0b3VjaGVuZEhhbmRsZXIsIGZhbHNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaXhJT1NUb3VjaEJ1ZyhlbGVtZW50KSB7XG4gIGlmICghZWxlbWVudC5fX2ZpeFRvdWNoRXZlbnQpIHtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uICgpIHtcbiAgICB9LCBmYWxzZSk7XG4gICAgZWxlbWVudC5fX2ZpeFRvdWNoRXZlbnQgPSB0cnVlO1xuICB9XG59XG5mdW5jdGlvbiBpbml0ICgpIHtcbiAgaWYgKCFpc0luaXRpYWxpemVkKSB7XG4gICAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIGRvY0VsLmFkZEV2ZW50TGlzdGVuZXIoVE9VQ0hfU1RBUlQsIHRvdWNoc3RhcnRIYW5kbGVyLCBmYWxzZSk7XG4gICAgaXNJbml0aWFsaXplZCA9IHRydWU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG9uOiBmdW5jdGlvbihlbGVtZW50LCBjYWxsYmFjaykge1xuICAgIGluaXQoKTtcbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgY2FsbGJhY2spIHtcbiAgICAgIGZpeElPU1RvdWNoQnVnKGVsZW1lbnQpO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEFQTFVTX1RBUCwgKGNhbGxiYWNrLl9hcGx1c190YXBfY2FsbGJhY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNhbGxiYWNrKGUsIGUudGFyZ2V0KTtcbiAgICAgIH0pLCBmYWxzZSk7XG4gICAgfVxuICB9LFxuICB1bjogZnVuY3Rpb24oZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgY2FsbGJhY2sgJiYgY2FsbGJhY2suX2FwbHVzX3RhcF9jYWxsYmFjaykge1xuICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKEFQTFVTX1RBUCwgY2FsbGJhY2suX2FwbHVzX3RhcF9jYWxsYmFjaywgZmFsc2UpO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2FwbHVzVGFwLmpzXG4vLyBtb2R1bGUgaWQgPSAzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHVt6YCa6YGT77yMYXBsdXPlj5HpgIFodHRw6K+35rGC5pel5b+X5o+S5Lu2XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOmSsOaYrSA8Y2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciBtaW5pID0gcmVxdWlyZSgnLi4vbGliX3UvdXRpbHMvbWluaScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG4gICAgICogICBsb2dDb25maWc6IHtsb2dDb25maWd9XG4gICAgICogfVxuICAgICAqL1xuXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgTWFpbiA9IHJlcXVpcmUoJy4vbGliX2Nvbm5lY3Rpb24vbWFpbl93ZWJfaHR0cF91bS5qcycpO1xuICAgICAgdmFyIG1haW4gPSBNYWluLmNyZWF0ZSh7XG4gICAgICAgIFdTOiBudWxsLFxuICAgICAgICBDVFg6IHdpbmRvdyxcbiAgICAgICAgQ1RYX1RZUEU6ICdXRUInXG4gICAgICB9KTsgICAgICBcbiAgICAgIG1haW4ucnVuKHRoaXMub3B0aW9ucyk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfd2ViX2h0dHBfdW0uanNcbi8vIG1vZHVsZSBpZCA9IDM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogdW3pgJrpgZPvvIzmi6bmiKrlubbmjIlodHRw5Y2P6K6u5Y+R6YCB5pel5b+XXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIEFhcm9ufOmSsOaYrSA8Y2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBsb2dfY2xvdWQgPSByZXF1aXJlKCcuL2xvZ19jbG91ZCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBtYWluX2Jhc2VfaHR0cCA9IHJlcXVpcmUoJy4vbWFpbl9iYXNlX2h0dHAuanMnKTtcbnZhciBib2R5QnVpbGQgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL2JvZHlfYnVpbGRlcl93ZWJfdW0nKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS91bG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsU3RvcmUgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFN0b3JlJyk7XG52YXIgZmV0Y2hEYXRhID0gcmVxdWlyZSgnQHV0aWxzL2ZldGNoRGF0YScpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIGluaXRUaW1lc3RhbXA7XG5tb2R1bGUuZXhwb3J0cyA9IG1haW5fYmFzZV9odHRwLmV4dGVuZCh7XG4gIC8qKlxuICAgKiBAcGFyYW1zIHtPYmplY3R9IGRhdGFcbiAgICogKi8gXG4gIGhhbmRsZXJNaWRkbGV3YXJlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIGlmICghIWFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkpTQlJJREdFX09OTFkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBcbiAgICB2YXIgcGFyYW1zID0gbG9nX2Nsb3VkLmNoYW5nZVRvT2JqKGRhdGEud2hhdF90b19zZW5kLmxvZ2RhdGEpO1xuICAgIHVsb2coKS5zZXREZWJ1ZyghIWFwbHVzLmdldE1ldGFJbmZvKCdERUJVRycpKTtcbiAgICB2YXIgbWV0aG9kO1xuICAgIHZhciBwb3N0RGF0YSA9IGJvZHlCdWlsZChwYXJhbXMsIGRhdGEudXNlcmRhdGEpO1xuICAgIGlmIChhcGx1cy5faDVfc2hhcmVfZW5hYmxlKSB7XG4gICAgICBtZXRob2QgPSAnUE9TVCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1ldGhvZCA9IGRhdGEud2hlcmVfdG9fc2VuZC5tZXRob2Q7XG4gICAgICBpZiAobWV0aG9kICE9PSAnUE9TVCcgfHwgISEhKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3Iuc2VuZEJlYWNvbikpIHtcbiAgICAgICAgcG9zdERhdGEgPSBcImQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocG9zdERhdGEpO1xuICAgICAgfSBcbiAgICB9XG4gICAgXG4gICAgdWxvZygpLmkoJ2V2ZW50IGJlZm9yZSBzZW5kIHRvOiAnLCBkYXRhLndoZXJlX3RvX3NlbmQudXJsKTtcbiAgICBpZiAoIWluaXRUaW1lc3RhbXApIHtcbiAgICAgIGluaXRUaW1lc3RhbXAgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgIH1cblxuICAgIGlmIChpbml0VGltZXN0YW1wICYmIGluaXRUaW1lc3RhbXAgLSAobmV3IERhdGUoKSkuZ2V0VGltZSgpID4gYXBsdXNTdGF0aWMuU0hBUkVfQ0FDSEVfSU5URVJWQUwgJiYgYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX19zaGFyZWZyb20nKTtcbiAgICAgIHV0aWxTdG9yZS5yZW1vdmUoJ19fZnJvbWFwcGtleScpO1xuICAgICAgdXRpbFN0b3JlLnJlbW92ZSgnX3VtX3NzcmMnKTtcbiAgICAgIHV0aWxTdG9yZS5yZW1vdmUoJ191bV9jaGFubmVsJyk7XG4gICAgICB1dGlsU3RvcmUucmVtb3ZlKCdfdW1fY2FtcGFpZ24nKTtcbiAgICB9XG5cbiAgICBpZiAoIWFwbHVzLl9oNV9zaGFyZV9lbmFibGUpIHtcbiAgICAgIGFwbHVzLnNlbmQoZGF0YS53aGVyZV90b19zZW5kLnVybCwgcG9zdERhdGEsIG1ldGhvZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZldGNoRGF0YS5yZXF1ZXN0NHVtKHtcbiAgICAgICAgdXJsOiBkYXRhLndoZXJlX3RvX3NlbmQudXJsLFxuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgZGF0YTogcG9zdERhdGEsXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmltcHJpbnQpIHtcbiAgICAgICAgICAgIHV0aWxTdG9yZS5zZXQoYXBsdXNTdGF0aWMuSU1QUklOVCwgcmVzLmltcHJpbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgICAgbXNnOiAnYXBsdXMgd2VibG9ncyBlcnJvcjogJyArIGVycm9yIFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbWFpbl93ZWJfaHR0cF91bS5qc1xuLy8gbW9kdWxlIGlkID0gMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiB3ZWJzb2NrZXQgdXRpbHNcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5leHBvcnRzLmdldEtleUluZGV4ID0gZnVuY3Rpb24gKGtleSkge1xuICB2YXIgbWFwID0ge1xuICAgIHByb3RvY29sOiAxLFxuICAgIGV2ZW50X2FyZ3M6IDI1LFxuICB9O1xuICByZXR1cm4gbWFwW2tleV07XG59O1xudmFyIEhMID0gJy0nO1xuZXhwb3J0cy5jaGFuZ2VUb0FycmF5ID0gZnVuY3Rpb24gKGZvcm1hdCwgZGF0YSkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblxuICB2YXIgdGltZSA9IGRhdGEuZXZlbnRfdGltZXN0YW1wLmdldFRpbWUoKS50b1N0cmluZygpO1xuICB2YXIgY2xpZW50ID0gZGF0YS5jbGllbnQgfHwge307XG4gIHZhciB3aWR0aCA9IGNsaWVudC5zY3JlZW5XaWR0aCB8fCAnJztcbiAgdmFyIGhlaWdodCA9IGNsaWVudC5zY3JlZW5IZWlnaHQgfHwgJyc7XG5cbiAgdmFyIF9yZXNvbHV0aW9uID0gd2lkdGggKyAnKicgKyBoZWlnaHQ7XG4gIHZhciByZXNvbHV0aW9uID0gd2lkdGggJiYgaGVpZ2h0ID8gX3Jlc29sdXRpb24gOiBITDtcblxuICAvLyB2YXIgVUEgPSBjbGllbnQudXNlckFnZW50IHx8IEhMO1xuICB2YXIgTEFORyA9IGNsaWVudC5sYW5ndWFnZSB8fCBITDtcbiAgdmFyIGdva2V5ID0gZGF0YS5nb2tleSB8fCB7fTtcbiAgdmFyIGV2ZW50X2FyZ3MgPSBKU09OLnN0cmluZ2lmeShnb2tleSk7XG4gIHZhciBzZGtfaW5mbyA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICBjdXN0b21TZGtJZDogZGF0YS5zZGtfaW5mby5jdXN0b21TZGtJZCB8fCAnJyxcbiAgICBwbGF0Zm9ybV90eXBlOiBkYXRhLnNka19pbmZvLnBsYXRmb3JtVHlwZSB8fCAnJywgLy93ZWNoYXQsICdhbGlwYXknLCAnYmFpZHUnLCAndGFvYmFvJ1xuICB9KTtcbiAgdmFyIGFwcEtleSA9IGRhdGEuYXBwS2V5IHx8IGRhdGEuYXBwSWQgfHwgSEw7XG4gIC8vIOS4muWKoeW6lOeUqOeahOaJqeWxleS/oeaBr1xuICB2YXIgYXBwX2V4dF9pbmZvID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIC8vIGFwcElkOiBjbGllbnQuYXBwSWQgfHwgJydcbiAgICBhcHBJZDogY2xpZW50LmFwcElkIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdtaW5pQXBwSWQnKSB8fCAnJ1xuICB9KTtcbiAgdmFyIHNlc3Npb25fYXJncyA9IEpTT04uc3RyaW5naWZ5KGRhdGEuc2Vzc2lvbkFyZ3MgfHwge30pO1xuICB2YXIgZ2xvYmFsX2FyZ3MgPSBKU09OLnN0cmluZ2lmeShkYXRhLmdsb2JhbEFyZ3MgfHwge30pOyAvLyAyMDIxLTAxLTE0QOS5nemUoemcgOaxglxuICB2YXIgYXJnMSA9IGRhdGEuYXJnMSB8fCBkYXRhLmxvZ2tleSB8fCBITDtcbiAgaWYgKGFyZzEuaW5kZXhPZignLyQkXycpID09PSAwKSB7XG4gICAgYXJnMSA9IGFyZzEuc3Vic3RyaW5nKDEsIGFyZzEubGVuZ3RoKTtcbiAgfVxuICBpZiAoZGF0YS5ldmVudF9jb2RlID09PSAnMjAwMScgJiYgZGF0YS50cmFja2VyRXZlbnRDb2RlKSB7XG4gICAgYXJnMSA9IGRhdGEudHJhY2tlckV2ZW50Q29kZTtcbiAgfVxuICB2YXIgbW9kZWwgPSBbXG4gICAgZGF0YS5jYWNoZSwgICAgICAgICAgICAgICAgIC8vIGxvZ19pZCDmoIfor4bor6XmnaHml6Xlv5fnmoTllK/kuIBJRFxuICAgIGRhdGEubWV0aG9kIHx8ICdHRVQnLCAgICAgICAvLyBwcm90b2NvbF9pbmZvIOWNj+iuruS/oeaBryDkuInpgInkuYvkuIDvvJpXUy9QT1NUL0dFVFxuICAgIEhMLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VyX2FnZW50IC0g5a6i5oi356uvVUHkv6Hmga8o5pSv5LuY5a6d5a6i5oi356uv5Lya5pyJ56uW57q/77yM5Lya5a+86Ie05pyN5Yqh56uv6Kej5p6Q5Ye66ZSZ77yM5pWF5YmN56uv5LiN6YeHKVxuICAgIHJlc29sdXRpb24sICAgICAgICAgICAgICAgICAvLyByZXNvbHV0aW9uIOWxj+W5leWuveW6pirlsY/luZXpq5jluqYgXG4gICAgYXBwS2V5LCAgICAgICAgICAgICAgICAgICAgIC8vIGFwcF9rZXlcbiAgICBhcHBfZXh0X2luZm8sICAgICAgICAgICAgICAgLy8gYXBwX2V4dF9pbmZvIEFwcOaJqeWxleS/oeaBr1xuICAgIGRhdGEuX2Rldl9pZCB8fCBITCwgICAgICAgICAvLyBiaXpfZGV2aWNlX2lkIOS4muWKoeS4iuS8oOeahOiuvuWkh+ivhuWIq0lEXG4gICAgJ3t9JywgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldmljZV9leHRfaW5mbyDorr7lpIfmianlsZXkv6Hmga8o5Y+C6KeB5LiL5paH6K+05piOKSBUT0RPIOW+heWumiBrLXYganNvbuS4slxuICAgIGRhdGEuX3VzZXJfbmljayB8fCBITCwgICAgICAvLyBiaXpfdXNlcl9uaWNrIOS4muWKoeerr+eUqOS6juivhuWIq+W3sueZu+W9leeUqOaIt+eahOS8muWRmOagh+ivhiBUT0RPIOS4muWKoeS8oOWFpVxuICAgIGRhdGEuX3VzZXJfaWQgfHwgSEwsICAgICAgICAvLyBiaXpfdXNlcl9pZCDkuJrliqHnq6/nlKjkuo7or4bliKvlt7LnmbvlvZXnlKjmiLfnmoTkvJrlkZhJRFxuICAgIGRhdGEuX2Fub255X2lkIHx8IEhMLCAgICAgICAvLyBiaXpfYW5vbnlfaWQg5Lia5Yqh56uv55So5LqO6K+G5Yir6Z2e55m75b2V55So5oi355qE5Yy/5ZCNSURcbiAgICAne30nLCAgICAgICAgICAgICAgICAgICAgICAgLy8gYml6X3VzZXJfZXh0X2luZm8g5Lia5Yqh56uv5LiK5Lyg55qE5omp5bGV55So5oi35L+h5oGvIFRPRE9cbiAgICBMQU5HLCAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9jYWxlIOWcsOWMui3or63oqIDkv6Hmga9cbiAgICBkYXRhLnRpbWVab25lIHx8IEhMLCAgICAgICAgLy8gdGltZXpvbmUg6K6+5aSH5L2/55So55qE5pe25Yy6XG4gICAgY2xpZW50Lm9zIHx8IEhMLCAgICAgICAgICAgIC8vIG9zIOaTjeS9nOezu+e7nyDlpoLvvJpcIk9TIFhcIlxuICAgIGNsaWVudC5vc192ZXJzaW9uIHx8IEhMLCAgICAvLyBvc192ZXJzaW9uIOaTjeS9nOezu+e7n+eJiOacrOWPty9CdWlsZOegge+8jOWmgu+8mlwiMTBfMTRfNFwiXG4gICAgc2RrX2luZm8sICAgICAgICAgICAgICAgICAgIC8vIHNka19pbmZvIFNES+S/oeaBryjlj4Lop4Hor7TmmI4pIGstdue7k+aehO+8jOmcgOino+aekCBcImpzdmVyPWFwbHVzX3UuanMmbHZlcj04LjExLjVcIiBUT0RPXG4gICAgZGF0YS5fc2Vzc2lvbl9pZCB8fCBITCwgICAgIC8vIGJpel9zZXNzaW9uX2lkIOS4muWKoeerr+e7tOaKpOeahHNlc3Npb24gaWRcbiAgICBkYXRhLmNuYSB8fCBITCwgICAgICAgICAgICAgLy8gdXRkaWRcbiAgICB0aW1lLCAgICAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnRfdGltZXN0YW1wIOS6i+S7tuaXpeW/l+eUn+aIkOaXtumXtCjmnKzlnLApLCBwduS4uumhtemdoui/m+WFpeaXtumXtFxuICAgIGVuY29kZVVSSUNvbXBvbmVudChkYXRhLnVybCkgfHwgSEwsICAgICAgICAgICAgLy8gcGFnZSDlrozmlbTnmoRVUkzmiJbogIVTY3JlZW4gTmFtZVxuICAgIGRhdGEuZXZlbnRfY29kZSB8fCBITCwgICAgICAvLyBldmVudF9pZCDkuovku7bnsbvlnotJRCBUT0RPIEDkupHmnbBcbiAgICBlbmNvZGVVUklDb21wb25lbnQoZGF0YS5wcmUpIHx8IEhMLCAgICAgICAgICAgIC8vIHJlZmVyX3BhZ2Ug5p2l5rqQcGFnZVxuICAgIGdsb2JhbF9hcmdzLCAgICAgICAgICAgICAgICAvLyBnbG9iYWxfYXJncyDnlKjmiLforr7nva7nmoTlhajlsYDlj4LmlbAsIOeUn+WRveWRqOacn+e6p+WIq1xuICAgIHNlc3Npb25fYXJncywgICAgICAgICAgICAgICAvLyBzZXNzaW9uX2FyZ3Mg55So5oi36K6+572u55qEU2Vzc2lvbue6p+WPguaVsCzot6hTZXNzaW9u5riF56m6XG4gICAgZXZlbnRfYXJncywgICAgICAgICAgICAgICAgIC8vIGV2ZW50X2FyZ3Mg55So5oi36K6+572u55qEUFbnuqflj4LmlbAs6LeoUFbmuIXnqbogay1257uT5p6EIEDkupHmnbBcbiAgICBhcmcxLCAgICAgICAgICAgICAgICAgICAgICAgLy8gYXJnMSDnlKjmiLfmianlsZXpooTnlZlcbiAgICBkYXRhLnNka19pbmZvLmpzdmVyLCAgICAgICAgLy8gVE9ETyBzZGtfdHlwZSAoYXBsdXNfbWluaS5qcykgcmVzZXJ2ZV8xIOS6i+S7tuWxnuaAp++8mlBW57qn55qE5pel5b+X5Y+C5pWwLOi3qFBW6Ieq5Yqo5riF56m677yM6L+Z6YeM5pivanPlpKfniYjmnKzlj7fvvIxhcGx1cy5qcyB8fCBhcGx1c19taW5pLmpzXG4gICAgZGF0YS5zZGtfaW5mby5sdmVyLCAgICAgICAgIC8vIHNka192ZXJzaW9uICBTREvniYjmnKzvvIzov5nph4zlr7nlupRhcGx1c0pT55qE5YW35L2T54mI5pys5Y+377yM5aaCMS4wLjBcbiAgICBjbGllbnQuYXBwVmVyc2lvbiB8fCAnZGV2dG9vbHMnIHx8IEhMLCAgICAgICAgIC8vIGFwcF92ZXJzaW9uXG4gICAgY2xpZW50LmJyYW5kIHx8IEhMLCAgICAgICAgIC8vIGJyYW5kIOaJi+acuuWTgeeJjFxuICAgIEhMLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXJyaWVyIOi/kOiQpeWVhu+8iOWJjeerr+S5n+WPluS4jeWIsO+8iVxuICAgIGNsaWVudC5uZXR3b3JrVHlwZSB8fCBITCwgICAvLyBhY2Nlc3Mg572R57uc57G75Z6LXG4gIF07XG4gIC8vIGNvbnNvbGUubG9nKG1vZGVsKTtcbiAgcmV0dXJuIG1vZGVsO1xufTtcblxuZXhwb3J0cy5jaGFuZ2VUb09iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciB0aW1lID0gZGF0YS5ldmVudF90aW1lc3RhbXAuZ2V0VGltZSgpLnRvU3RyaW5nKCk7XG4gIHZhciBjbGllbnQgPSBkYXRhLmNsaWVudCB8fCB7fTtcblxuICAvLyB2YXIgVUEgPSBjbGllbnQudXNlckFnZW50IHx8IEhMO1xuICB2YXIgTEFORyA9IGNsaWVudC5sYW5ndWFnZSB8fCBITDtcbiAgdmFyIGdva2V5ID0gZGF0YS5nb2tleSB8fCB7fTtcbiAgdmFyIGV2ZW50X2FyZ3MgPSBKU09OLnN0cmluZ2lmeShnb2tleSk7XG4gIHZhciBzZGtfaW5mbyA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICBjdXN0b21TZGtJZDogZGF0YS5zZGtfaW5mby5jdXN0b21TZGtJZCB8fCAnJyxcbiAgICBwbGF0Zm9ybV90eXBlOiBkYXRhLnNka19pbmZvLnBsYXRmb3JtVHlwZSB8fCAnJywgLy93ZWNoYXQsICdhbGlwYXknLCAnYmFpZHUnLCAndGFvYmFvJ1xuICB9KTtcbiAgXG4gIHZhciBhcHBLZXkgPSBkYXRhLmFwcEtleSB8fCBkYXRhLmFwcElkIHx8IEhMO1xuICAvLyDkuJrliqHlupTnlKjnmoTmianlsZXkv6Hmga9cbiAgdmFyIGFwcF9leHRfaW5mbyA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAvLyBhcHBJZDogY2xpZW50LmFwcElkIHx8ICcnXG4gICAgYXBwSWQ6IGNsaWVudC5hcHBJZCB8fCBhcGx1cy5nZXRNZXRhSW5mbygnbWluaUFwcElkJykgfHwgJydcbiAgfSk7XG4gIHZhciBzZXNzaW9uX2FyZ3MgPSBKU09OLnN0cmluZ2lmeShkYXRhLnNlc3Npb25BcmdzIHx8IHt9KTtcbiAgdmFyIGdsb2JhbF9hcmdzID0gSlNPTi5zdHJpbmdpZnkoZGF0YS5nbG9iYWxBcmdzIHx8IHt9KTsgLy8gMjAyMS0wMS0xNEDkuZ3plKHpnIDmsYJcbiAgdmFyIGFyZzEgPSBkYXRhLmFyZzEgfHwgZGF0YS5sb2drZXkgfHwgSEw7XG4gIGlmIChhcmcxLmluZGV4T2YoJy8kJF8nKSA9PT0gMCkge1xuICAgIGFyZzEgPSBhcmcxLnN1YnN0cmluZygxLCBhcmcxLmxlbmd0aCk7XG4gIH1cbiAgaWYgKGRhdGEuZXZlbnRfY29kZSA9PT0gJzIwMDEnICYmIGRhdGEudHJhY2tlckV2ZW50Q29kZSkge1xuICAgIGFyZzEgPSBkYXRhLnRyYWNrZXJFdmVudENvZGU7XG4gIH1cblxuICB2YXIgT2JqID0ge307XG4gIE9iai5wbGF0Zm9ybSA9ICBkYXRhLnNka19pbmZvLnBsYXRmb3JtVHlwZSB8fCAnJztcbiAgT2JqLnNka190eXBlID0gT2JqLnBsYXRmb3JtID8gT2JqLnBsYXRmb3JtICsgJ21wJyA6ICcnO1xuICBPYmouYXBwa2V5ID0gYXBwS2V5O1xuICBPYmouc2RrX3ZlcnNpb24gPSBkYXRhLnNka19pbmZvLmx2ZXI7IC8vIHNka192ZXJzaW9uICBTREvniYjmnKzvvIzov5nph4zlr7nlupRhcGx1c0pT55qE5YW35L2T54mI5pys5Y+377yM5aaCMS4wLjBcbiAgLy8gdmFyIG1vZGVybk9TID0gVUEubWF0Y2goL2lwaG9uZXxpcGFkfGFuZHJvaWR8bWFjaW50b3NofFdpbmRvd3MvaSk7XG4gIE9iai5kZXZpY2VfdHlwZSA9IGNsaWVudC5kZXZpY2VfbW9kZWwgfHwgJyc7XG4gIE9iai5vcyA9IGNsaWVudC5vcyB8fCAnJztcbiAgT2JqLm9zX3ZlcnNpb24gPSBjbGllbnQub3NfdmVyc2lvbiB8fCAnJztcbiAgT2JqLmpzdmVyID0gZGF0YS5zZGtfaW5mby5qc3ZlcjsgLy8gc2RrX3R5cGUgKGFwbHVzX21pbmkuanMpIHJlc2VydmVfMSDkuovku7blsZ7mgKfvvJpQVue6p+eahOaXpeW/l+WPguaVsCzot6hQVuiHquWKqOa4heepuu+8jOi/memHjOaYr2pz5aSn54mI5pys5Y+377yMYXBsdXMuanMgfHwgYXBsdXNfbWluaS5qcyB8fCBhcGx1c19jbG91ZC5qcztcbiAgLy8gT2JqLmRldmljZV9tb2RlbCA9IFVBOyAvLyBzZXJ2ZXIg56uv6YCa6L+HIEhUVFAgcmVxdWVzdCBoZWFkZXIg6I635Y+WXG4gIE9iai5waXhlbF9yYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8ICcnO1xuICB2YXIgdyA9IE1hdGgucm91bmQoY2xpZW50LnNjcmVlbldpZHRoICogKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEpKTtcbiAgdmFyIGggPSBNYXRoLnJvdW5kKGNsaWVudC5zY3JlZW5IZWlnaHQgKiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMSkpO1xuICBPYmoucmVzb2x1dGlvbiA9IHcgPiBoID8gdyArICcqJyArIGggOiBoICsgJyonICsgdztcbiAgT2JqLmxhbmd1YWdlID0gTEFORztcbiAgT2JqLmFwcF92ZXJzaW9uID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcFZlcnNpb24nKSB8fCAnZGV2dG9vbHMnO1xuICAvLyBla3Yg6ZyA6KaB5a2X5q61XG4gIE9iai5hcmcxID0gYXJnMTtcbiAgT2JqLmV2ZW50X2FyZ3MgPSBldmVudF9hcmdzOyAvL2V2ZW50X2FyZ3Mg55So5oi36K6+572u55qEUFbnuqflj4LmlbAs6LeoUFbmuIXnqbogay1257uT5p6EIEDkupHmnbBcbiAgT2JqLmV2ZW50X2NvZGUgPSBkYXRhLmV2ZW50X2NvZGUgfHwgJyc7XG4gIE9iai5zZXNzaW9uQXJncyA9IHNlc3Npb25fYXJnczsgLy8gc2Vzc2lvbl9hcmdzIOeUqOaIt+iuvue9rueahFNlc3Npb27nuqflj4LmlbAs6LeoU2Vzc2lvbua4heepulxuICBPYmouZ2xvYmFsX2FyZ3MgPSBnbG9iYWxfYXJnczsgLy8gZ2xvYmFsX2FyZ3Mg55So5oi36K6+572u55qE5YWo5bGA5Y+C5pWwLCDnlJ/lkb3lkajmnJ/nuqfliKtcbiAgT2JqLmFwcF9leHRfaW5mbyA9IGFwcF9leHRfaW5mbzsgLy8gYXBwX2V4dF9pbmZvIEFwcOaJqeWxleS/oeaBr1xuICBPYmoudGltZSA9IHRpbWU7IC8vZXZlbnRfdGltZXN0YW1wIOS6i+S7tuaXpeW/l+eUn+aIkOaXtumXtCjmnKzlnLApLCBwduS4uumhtemdoui/m+WFpeaXtumXtFxuICBPYmouY25hID0gZGF0YS5jbmEgfHwgJyc7XG4gIE9iai51cmwgPSBkYXRhLnVybCB8fCAnJztcbiAgT2JqLnByZSA9IGRhdGEucHJlIHx8ICcnO1xuICBPYmoubWV0aG9kID0gZGF0YS5tZXRob2QgfHwgJ0dFVCc7XG4gIE9iai5sb2dfaWQgPSBkYXRhLmNhY2hlIHx8ICcnOyAvLyBsb2dfaWQg5qCH6K+G6K+l5p2h5pel5b+X55qE5ZSv5LiASURcbiAgT2JqLnNka19pbmZvID0gc2RrX2luZm87XG4gIE9iai5pc19hdXRvID0gZGF0YS5pc19hdXRvO1xuICB2YXIgZXhkYXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScpO1xuICBpZiAoZXhkYXRhICYmIGV4ZGF0YS5hcGx1c190cmFja19kZWJ1Z19pZCkge1xuICAgIE9iai50cmFja19kZWJ1Z19pZCA9IGV4ZGF0YS5hcGx1c190cmFja19kZWJ1Z19pZDtcbiAgfVxuICByZXR1cm4gT2JqO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9jb25uZWN0aW9uL2xvZ19jbG91ZC5qc1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDmi6bmiKrlubbmjIlodHRw5Y2P6K6u5Y+R6YCB5pel5b+XXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbi8vIHZhciBsb2dfY2xvdWQgPSByZXF1aXJlKCcuL2xvZ19jbG91ZCcpO1xudmFyIHV0aWxHUSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR1EnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh7XG5cbiAgc3Vic2NyaWJlTG9nczogZnVuY3Rpb24gKGFjdGlvbiwgY2FsbGJhY2spIHtcbiAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBbYWN0aW9uLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcbiAgICAgIGlmIChvcmlEYXRhcy5zdGF0dXMgPT09IGFwbHVzU3RhdGljLkNPTVBMRVRFKSB7XG4gICAgICAgIGNhbGxiYWNrKG9yaURhdGFzKTtcbiAgICAgIH1cbiAgICB9XSk7XG4gIH0sXG5cbiAgZ2V0TG9naWNTeW1ib2w6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXQgPT09ICdBTEknID8gJyYnIDogJ3x8JztcbiAgfSxcblxuICAvKipcbiAgICog5Zyo5a2Q57G75Lit5a6e546wXG4gICAqIEBwYXJhbXMge09iamVjdH0gZGF0YVxuICAgKi9cbiAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uICgpIHt9LFxuICBcblxuICB3YXRjaExPRzogZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgXG4gICAgLy8g6K6i6ZiFcHbkuovku7ZcbiAgICBfc2VsZi5zdWJzY3JpYmVMb2dzKGFwbHVzU3RhdGljLk1XX0NIQU5HRV9QViwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsICdwdicpO1xuICAgIH0pO1xuXG4gICAgLy8g6K6i6ZiFaGpsai9hcGx1c+S6i+S7tlxuICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEosIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBfc2VsZi5oYW5kbGVyTWlkZGxld2FyZShkYXRhLCBhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy53YXRjaExPRygpO1xuICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbWFpbl9iYXNlX2h0dHAuanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qc1xuICog5pON5L2cYXBsdXNfcXVldWXnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuL3V0aWxHb2xkbG9nJyk7XG5cbmV4cG9ydHMucHVzaEludG9Hb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoYWN0aW9uLCBhcmdzKSB7XG4gIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG5hbWVzID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gIHZhciBhcGx1c18xID0gYXBsdXNbbmFtZXNbMV1dO1xuICB2YXIgYXBsdXNfMiA9IGFwbHVzXzEgPyBhcGx1c18xW25hbWVzWzJdXSA6IG51bGw7XG5cbiAgaWYgKGFwbHVzICYmIG5hbWVzLmxlbmd0aCA9PT0gMiAmJiBhcGx1c18xKSB7XG4gICAgYXBsdXNfMS5hcHBseShhcGx1cywgYXJncyk7XG4gIH0gZWxzZSBpZiAobmFtZXMubGVuZ3RoID09PSAzICYmIGFwbHVzXzIpIHtcbiAgICBhcGx1c18yLmFwcGx5KGFwbHVzXzEsIGFyZ3MpOyAgXG4gIH0gZWxzZSB7XG4gICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGFyZ3VtZW50czogYXJnc1xuICAgIH0pO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdRLmpzXG4vLyBtb2R1bGUgaWQgPSAzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHVtIOmAmumBk++8jOaUtuaVsOivt+axguS4iuaKpeaVsOaNrlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBBYXJvbnzpkrDmmK0gPGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbT5cbiAqL1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciBidWlsZEhlYWRlciA9IHJlcXVpcmUoJy4vaGVhZGVyX2J1aWxkZXJfd2ViX3VtJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBtYW5nbGUgPSByZXF1aXJlKCcuL21hbmdsZV93ZWInKTtcbnZhciBiYXNlNjQgPSByZXF1aXJlKCcuL2Jhc2U2NCcpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBqc29uVXRpbCA9IHJlcXVpcmUoJy4vanNvblV0aWwnKTtcbnZhciBjcmVhdGVFdmVudCA9IHJlcXVpcmUoJy4vZXZlbnQnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS91bG9nJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1dGlsU3RvcmUgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFN0b3JlJyk7XG52YXIgcGFnZU1hbmFnZXIgPSByZXF1aXJlKCcuL3BhZ2VNYW5hZ2VyJyk7XG5cbi8qKlxuICog5ZCMdW3pgJrpgZPniYjmnKznmoTlsI/nqIvluo/mlLbmlbDkuIrmiqXmlbDmja7kvZPnm7jmr5TvvIzkuI3pnIDopoEgc2Vzc2lvbu+8jHNlc3Npb24g55Sx5pyN5Yqh56uv6Kej5YazXG4gKiDlubbkuJQgZWt2IOayoeaciee8k+WtmOacuuWItlxuKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxvZ2RhdGEsIHVzZXJkYXRhKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoIWxvZ2RhdGEgfHwgIXVzZXJkYXRhIHx8IHV0aWxzLmNoZWNrRW1wdHlPYmoobG9nZGF0YSkgfHwgdXRpbHMuY2hlY2tFbXB0eU9iaih1c2VyZGF0YSkpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgdmFyIGRhdGEgPSB7fTtcbiAgdmFyIGhlYWRlciA9IGNsb25lRGVlcChidWlsZEhlYWRlcihsb2dkYXRhKSk7XG4gIHZhciBhX2Fub255X2lkID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSB8fCBsb2dkYXRhLmNuYTtcbiAgaWYgKGFfYW5vbnlfaWQpIHtcbiAgICBoZWFkZXIuYW5vbnlfaWQgPSBhX2Fub255X2lkO1xuICAgIGhlYWRlci5pZF90cmFja2luZy5hbm9ueV9pZCA9IGFfYW5vbnlfaWQ7XG4gIH1cbiAgLy8gZml4IGlkdHJhY2luZyBidWcsIGlmIHVzZXIgZG9uJ3Qgc2V0IF9kZXZfaWRcbiAgdmFyIGFfZGV2X2lkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSB8fCBsb2dkYXRhLmNuYTtcbiAgaWYgKGFfZGV2X2lkKSB7XG4gICAgaGVhZGVyLmRldl9pZCA9IGFfZGV2X2lkO1xuICAgIGhlYWRlci5pZF90cmFja2luZy5kZXZfaWQgPSBhX2Rldl9pZDtcbiAgfVxuICBcbiAgaWYgKGFwbHVzLl9oNV9zaGFyZV9lbmFibGUpIHtcbiAgICB2YXIgdXVpZCA9IGFwbHVzLmdldE1ldGFJbmZvKCd1dWlkJyk7XG4gICAgaWYgKHV1aWQpIHtcbiAgICAgIGhlYWRlci5pZF90cmFja2luZy51ZCA9IHV1aWQ7XG4gICAgfVxuICAgIHZhciBvcGVuaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnb3BlbmlkJyk7XG4gICAgaWYgKG9wZW5pZCkge1xuICAgICAgaGVhZGVyLmlkX3RyYWNraW5nLm9wZW5pZCA9IG9wZW5pZDtcbiAgICB9XG4gICAgdmFyIHVuaW9uaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygndW5pb25pZCcpO1xuICAgIGlmICh1bmlvbmlkKSB7XG4gICAgICBoZWFkZXIuaWRfdHJhY2tpbmcudW5pb25pZCA9IHVuaW9uaWQ7XG4gICAgfVxuICAgIHZhciBhbm91eW1vdXNvcGVuaWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYW5vdXltb3Vzb3BlbmlkJyk7XG4gICAgaWYgKGFub3V5bW91c29wZW5pZCkge1xuICAgICAgaGVhZGVyLmlkX3RyYWNraW5nLmFub255bW91c2lkID0gYW5vdXltb3Vzb3BlbmlkO1xuICAgIH1cbiAgICB2YXIgYWxpcGF5X2lkID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FsaXBheWlkJyk7XG4gICAgaWYgKGFsaXBheV9pZCkge1xuICAgICAgaGVhZGVyLmlkX3RyYWNraW5nLmFsaXBheV9pZCA9IGFsaXBheV9pZDtcbiAgICB9XG4gICAgdmFyIHN3YW5pZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdzd2FuaWQnKTtcbiAgICBpZiAoc3dhbmlkKSB7XG4gICAgICBoZWFkZXIuaWRfdHJhY2tpbmcuYW5vbnltb3VzaWQgPSBzd2FuaWQ7XG4gICAgfVxuICAgIHZhciB1c2VyUHJvZmlsZSA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLlVTRVJfUFJPRklMRV9LRVkpO1xuICAgIGlmICh1c2VyUHJvZmlsZSkge1xuICAgICAgaGVhZGVyLnVzZXJfaW5mbyA9IHVzZXJQcm9maWxlO1xuICAgIH1cbiAgICB2YXIgaW1wID0gdXRpbFN0b3JlLmdldChhcGx1c1N0YXRpYy5JTVBSSU5UKTtcbiAgICBpZiAoaW1wKSB7XG4gICAgICBoZWFkZXIuaW1wcmludCA9IGltcDtcbiAgICB9XG4gICAgdmFyIGlkX3R5cGUgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5JRF9UWVBFKSB8fCAnY25haWQnO1xuICAgIGhlYWRlci5pZF90eXBlID0gaWRfdHlwZTtcbiAgfVxuXG4gIHZhciBla3YgPSBudWxsO1xuICBpZiAobG9nZGF0YS5ldmVudF9jb2RlID09PSAnMjAwMScpIHtcbiAgICBla3YgPSBfYnVpbGRQVkV2ZW50KGxvZ2RhdGEsIHVzZXJkYXRhKTtcbiAgfSBlbHNlIHtcbiAgICBla3YgPSBfYnVpbGRISkxKRXZlbnQobG9nZGF0YSwgdXNlcmRhdGEpO1xuICB9XG4gIGlmIChla3YpIHtcbiAgICBkYXRhID0ge1xuICAgICAgYW5hbHl0aWNzOiB7XG4gICAgICAgIGVrdnM6IHtcInNlc3Npb25pZFwiIDogW2Nsb25lRGVlcChla3YpXX1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgdmFyIHVzZXJJZCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKTtcbiAgaWYgKHVzZXJJZCAmJiBkYXRhLmFuYWx5dGljcykge1xuICAgIGRhdGEuYW5hbHl0aWNzLmFjdGl2ZV91c2VyID0ge1xuICAgICAgcHVpZDogdXNlcklkLFxuICAgICAgcHJvdmlkZXI6IGFwbHVzLmdldE1ldGFJbmZvKCdfdXNlcl9uaWNrJylcbiAgICB9O1xuICB9XG5cbiAgZGF0YS5oZWFkZXIgPSB1dGlscy5hc3NpZ24oaGVhZGVyLCBkYXRhLmhlYWRlciwge1xuICAgIHRzOiBEYXRlLm5vdygpLFxuICAgIHRyYWNlSWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyBEYXRlLm5vdygpICsgdXRpbHMuZ2V0UmFuZG9tU3RyKDkpXG4gIH0pO1xuICB2YXIgbWFuZ2xlRGF0YSA9IG1hbmdsZShkYXRhKTtcbiAgdmFyIHJlcXVlc3REYXRhID0ganNvblV0aWwuc3RyaW5nZnkobWFuZ2xlRGF0YSk7XG4gIHVsb2coKS5pKCdldmVudCBkYXRhOiAnLG1hbmdsZURhdGEpO1xuICByZXR1cm4gYmFzZTY0LmVuY29kZShyZXF1ZXN0RGF0YSk7XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRTaGFyZUluZm8oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoYXBsdXMuX2g1X3NoYXJlX2VuYWJsZSkge1xuICAgIHZhciBzaGFyZUluZm8gPSB7fTtcbiAgICB2YXIgc2hhcmVmcm9tID0gdXRpbFN0b3JlLmdldCgnX19zaGFyZWZyb20nKTtcbiAgICB2YXIgZnJvbWFwcGtleSA9IHV0aWxTdG9yZS5nZXQoJ19fZnJvbWFwcGtleScpO1xuICAgIHZhciBfdW1fc3NyYyA9IHV0aWxTdG9yZS5nZXQoJ191bV9zc3JjJyk7IFxuICAgIHZhciBfdW1fY2hhbm5lbCA9IHV0aWxTdG9yZS5nZXQoJ191bV9jaGFubmVsJyk7XG4gICAgdmFyIF91bV9jYW1wYWlnbiA9IHV0aWxTdG9yZS5nZXQoJ191bV9jYW1wYWlnbicpO1xuICAgIGlmIChzaGFyZWZyb20pIHtcbiAgICAgIHNoYXJlSW5mby5zaGFyZWZyb20gPSBzaGFyZWZyb207XG4gICAgfVxuICAgIGlmIChmcm9tYXBwa2V5KSB7XG4gICAgICBzaGFyZUluZm8uZnJvbWFwcGtleSA9IGZyb21hcHBrZXk7XG4gICAgfVxuICAgIGlmIChfdW1fc3NyYykge1xuICAgICAgc2hhcmVJbmZvLl91bV9zc3JjID0gX3VtX3NzcmM7XG4gICAgfVxuICAgIGlmIChfdW1fY2hhbm5lbCkge1xuICAgICAgc2hhcmVJbmZvLl91bV9jaGFubmVsID0gX3VtX2NoYW5uZWw7XG4gICAgfVxuICAgIGlmIChfdW1fY2FtcGFpZ24pIHtcbiAgICAgIHNoYXJlSW5mby5fdW1fY2FtcGFpZ24gPSBfdW1fY2FtcGFpZ247XG4gICAgfVxuICAgIHJldHVybiBzaGFyZUluZm87XG4gIH1cbiAgcmV0dXJuO1xufVxuXG5mdW5jdGlvbiBfYnVpbGRISkxKRXZlbnQobG9nZGF0YSwgdXNlcmRhdGEpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHRyeSB7XG4gICAgdmFyIGV2ZW50QXJncyA9IHt9O1xuICAgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuICAgIGlmIChncCkge1xuICAgICAgZXZlbnRBcmdzLmdwID0gZ3A7XG4gICAgfVxuICAgIHZhciBnb2tleSA9IHVzZXJkYXRhLmdva2V5O1xuICAgIC8vIGNvbnZlcnQgdXJsIHBhcmFtZXRlciB0byBhIGphdmFzY3JpcHQgb2JqZWN0XG4gICAgdmFyIHByb3BlcnRpZXM7XG4gICAgaWYgKHR5cGVvZiBnb2tleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHByb3BlcnRpZXMgPSBKU09OLnBhcnNlKCd7XCInICsgZ29rZXkucmVwbGFjZSgvXFwmL2csICdcIixcIicpLnJlcGxhY2UoL1xcPS9nLCdcIjpcIicpICsgJ1wifScsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgXG4gICAgICAgIHJldHVybiBrZXkgPT09IFwiXCIgPyB2YWx1ZSA6IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7IFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZ29rZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICBwcm9wZXJ0aWVzID0gY2xvbmVEZWVwKGdva2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvcGVydGllcyA9IHt9O1xuICAgIH1cbiAgICB2YXIgcGFnZU1hbmFnZXJQYWdlTmFtZSA9IHBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKGxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICBpZiAobG9nZGF0YS51cmwpIHtcbiAgICAgIGV2ZW50QXJncy5wYWdlX25hbWUgPSBwcm9wZXJ0aWVzLnNwbUIgfHwgcHJvcGVydGllc1snZGF0YS1wYWdlbmFtZSddIHx8IHByb3BlcnRpZXMucGFnZV9uYW1lIHx8IHBhZ2VNYW5hZ2VyUGFnZU5hbWUgfHwgbG9nZGF0YS51cmwgIHx8ICctJztcbiAgICAgIGV2ZW50QXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG4gICAgICBpZiAoZXZlbnRBcmdzLnBhZ2VfbmFtZSAmJiBwcm9wZXJ0aWVzLnNwbUMpIHtcbiAgICAgICAgZXZlbnRBcmdzWydzcG0tY250J10gPSBbZW5jb2RlVVJJQ29tcG9uZW50KGV2ZW50QXJncy5wYWdlX25hbWUpLCBlbmNvZGVVUklDb21wb25lbnQocHJvcGVydGllcy5zcG1DKSwgZW5jb2RlVVJJQ29tcG9uZW50KHByb3BlcnRpZXMuc3BtRCldLmZpbHRlcihmdW5jdGlvbih2KXtcbiAgICAgICAgICByZXR1cm4gISF2O1xuICAgICAgICB9KS5qb2luKCcuJyk7XG4gICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLnNwbUM7XG4gICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLnNwbUQ7XG4gICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLnNwbUI7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGlmIChwcm9wZXJ0aWVzLnBhZ2VfbmFtZSB8fCBwcm9wZXJ0aWVzWydkYXRhLXBhZ2VuYW1lJ10pIHsgLy9wYWdlX25hbWUg5aaC5p6c5pyJLCDku4Xkv53nlZnlnKjnrKzkuIDnuqdcbiAgICAvLyAgIGRlbGV0ZSBwcm9wZXJ0aWVzLnBhZ2VfbmFtZTtcbiAgICAvLyAgIGRlbGV0ZSBwcm9wZXJ0aWVzWydkYXRhLXBhZ2VuYW1lJ107XG4gICAgLy8gfVxuICAgIHZhciBjbG9uZVAgPSBjbG9uZURlZXAocHJvcGVydGllcyk7XG4gICAgZm9yICh2YXIgayBpbiBjbG9uZVApIHtcbiAgICAgIGlmICh0eXBlb2YgayA9PT0gJ3N0cmluZycgJiYgdXRpbHMuc3RhcnRzV2l0aChrLCAnXycpKSB7XG4gICAgICAgIGV2ZW50QXJnc1trXSA9IGNsb25lUFtrXTtcbiAgICAgICAgZGVsZXRlIHByb3BlcnRpZXNba107XG4gICAgICB9XG4gICAgfVxuICAgIGV2ZW50QXJncyA9IHV0aWxEYXNoLmFzc2lnbihldmVudEFyZ3MsIF9idWlsZFNoYXJlSW5mbygpIHx8IHt9KTtcbiAgICBldmVudEFyZ3MuaXNfYXV0byA9IHVzZXJkYXRhLmdva2V5ICYmICh0eXBlb2YgdXNlcmRhdGEuZ29rZXkgPT09ICdzdHJpbmcnKSAmJiB1c2VyZGF0YS5nb2tleS5tYXRjaCgnaXNfYXV0bycpID8gMSA6IDA7XG4gICAgdmFyIGV2ZW50ID0gY3JlYXRlRXZlbnQodXNlcmRhdGEubG9na2V5LCB1dGlsRGFzaC5hc3NpZ24oZXZlbnRBcmdzLCB7IGN1c3A6IHByb3BlcnRpZXN9ICkpO1xuICAgIHJldHVybiBldmVudDtcbiAgfSBjYXRjaCAoZSkgeyBcbiAgICBjb25zb2xlLndhcm4oJ0pTT04gcGFyc2UgZmFpbGVkJywgZSk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRQVkV2ZW50KGxvZ2RhdGEsIHVzZXJkYXRhKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcbiAgdmFyIHB2YXJncyA9IHt9O1xuICBwdmFyZ3MuciA9IGxvZ2RhdGEuYXJnMTtcbiAgaWYgKGdwKSB7XG4gICAgcHZhcmdzLmdwID0gZ3A7XG4gIH1cbiAgXG4gIHB2YXJncy5pc19hdXRvID0gISFsb2dkYXRhLmlzX2F1dG8gPyAxIDogMDtcblxuICB2YXIgYXJncyA9IHVzZXJkYXRhO1xuICB2YXIgcHJvcGVydGllcyA9IGNsb25lRGVlcCh1dGlscy5kZWxldGVJbmZvKGFyZ3MsIFsnX2Fub255X2lkJywgJ19kZXZfaWQnLCAnX3Nlc3Npb25faWQnLCAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaycsICdfc3JjX3Bvc19pZCddKSk7XG5cbiAgaWYgKHByb3BlcnRpZXMuZHVyYXRpb24pIHtcbiAgICBwdmFyZ3MuZHVyYXRpb24gPSBwcm9wZXJ0aWVzLmR1cmF0aW9uO1xuICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmR1cmF0aW9uO1xuICB9XG4gIHZhciBwYWdlTWFuYWdlclBhZ2VOYW1lID0gcGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUobG9jYXRpb24ucGF0aG5hbWUpO1xuICBpZiAobG9nZGF0YS51cmwpIHtcbiAgICBwdmFyZ3MucGFnZV9uYW1lID0gcHJvcGVydGllcy5zcG1CIHx8IHByb3BlcnRpZXMucGFnZV9uYW1lIHx8IGRvY3VtZW50LmJvZHkuZGF0YXNldCAmJiBkb2N1bWVudC5ib2R5LmRhdGFzZXQucGFnZW5hbWUgfHwgcGFnZU1hbmFnZXJQYWdlTmFtZSB8fCBsb2dkYXRhLnVybCB8fCAnLSc7XG4gICAgcHZhcmdzLnVybCA9IGxvZ2RhdGEudXJsO1xuICAgIHB2YXJnc1snc3BtLWNudCddID0gZW5jb2RlVVJJQ29tcG9uZW50KHB2YXJncy5wYWdlX25hbWUpO1xuICB9XG5cbiAgaWYgKGxvZ2RhdGEucHJlKSB7XG4gICAgcHZhcmdzLnJlZl91cmwgPSBsb2dkYXRhLnByZSB8fCAnLSc7XG4gICAgaWYgKGFwbHVzLl9oNV9zaGFyZV9lbmFibGUgJiYgcHZhcmdzLnJlZl91cmwubGVuZ3RoID4gMSkge1xuICAgICAgdmFyIHJzID0gcHZhcmdzLnJlZl91cmwubWF0Y2goLyhcXHd8LSkrXFwuKFxcd3wtKStcXC4oXFx3fC0pKy8pO1xuICAgICAgaWYgKHJzICYmIHJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcHZhcmdzLl91bV9yZWZlcmVyX2RvbWFpbiA9IHJzWzBdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdmFyZ3MgPSB1dGlsRGFzaC5hc3NpZ24ocHZhcmdzLCBfYnVpbGRTaGFyZUluZm8oKSB8fCB7fSk7XG4gIHJldHVybiBjcmVhdGVFdmVudChhcGx1c1N0YXRpYy5QQUdFX1NUQVJULCB1dGlsRGFzaC5hc3NpZ24ocHZhcmdzLCB7IGN1c3A6IHByb3BlcnRpZXMgfSkpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vYm9keV9idWlsZGVyX3dlYl91bS5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDlhYvpmobkuIDkuKpvYmplY3RcbiAqL1xuZnVuY3Rpb24gY2xvbmVEZWVwIChvYmopIHtcbiAgdmFyIHN0cjtcbiAgdmFyIG5ld29iaiA9IEFycmF5LmlzQXJyYXkob2JqKSA/IFtdIDoge307IC8vRml4IG9iai5jb250cnVjdG9yIHR5cGVFcnJvciBjb25zdHJ1Y3RvciB1bmRlZmluZWRcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2UgaWYgKEpTT04gJiYgSlNPTi5wYXJzZSkge1xuICAgIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7IC8v57O75YiX5YyW5a+56LGhXG4gICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3b2JqO1xufVxubW9kdWxlLmV4cG9ydHMgPSBjbG9uZURlZXA7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvY2xvbmVEZWVwLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkYXRhKSB7XG4gIHZhciBoZWFkZXIgPSB7fTtcbiAgaGVhZGVyLnNka190eXBlID0gZGF0YS5zZGtfdHlwZTtcbiAgaGVhZGVyLmFwcGtleSA9IGRhdGEuYXBwa2V5O1xuICBoZWFkZXIuc2RrX3ZlcnNpb24gPSBkYXRhLnNka192ZXJzaW9uO1xuICBoZWFkZXIuZGV2aWNlX3R5cGUgPSBkYXRhLmRldmljZV90eXBlO1xuICBoZWFkZXIub3MgPSBkYXRhLm9zO1xuICBoZWFkZXIub3NfdmVyc2lvbiA9IGRhdGEub3NfdmVyc2lvbjtcbiAgaGVhZGVyLnBsYXRmb3JtID0gZGF0YS5wbGF0Zm9ybTtcbiAgaGVhZGVyLnBpeGVsX3JhdGlvID0gZGF0YS5waXhlbF9yYXRpbztcbiAgaGVhZGVyLnJlc29sdXRpb24gPSBkYXRhLnJlc29sdXRpb247XG4gIGhlYWRlci5sYW5ndWFnZSA9IGRhdGEubGFuZ3VhZ2U7XG4gIGhlYWRlci5hcHBfdmVyc2lvbiA9IGRhdGEuYXBwX3ZlcnNpb247XG4gIGhlYWRlci5qc3ZlciA9IGRhdGEuanN2ZXI7XG4gIGhlYWRlci5wcmUgPSBkYXRhLnByZTtcbiAgaGVhZGVyLnVybCA9IGRhdGEudXJsO1xuICBoZWFkZXIuZGVidWdJZCA9IGRhdGEudHJhY2tfZGVidWdfaWQ7XG4gIGhlYWRlci5pZF90cmFja2luZyA9IHt9O1xuICByZXR1cm4gaGVhZGVyO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9oZWFkZXJfYnVpbGRlcl93ZWJfdW0uanNcbi8vIG1vZHVsZSBpZCA9IDQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMuZ2V0UmFuZG9tU3RyID0gZnVuY3Rpb24obGVuKSB7XG4gIHZhciBzdHIgPSAnJztcbiAgdmFyIGFyciA9IFsnMCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICdhJywgJ2InLCAnYycsICdkJywgJ2UnLCAnZicsICdnJywgJ2gnLCAnaScsICdqJywgJ2snLCAnbCcsICdtJywgJ24nLCAnbycsICdwJywgJ3EnLCAncicsICdzJywgJ3QnLCAndScsICd2JywgJ3cnLCAneCcsICd5JywgJ3onLCAnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnLCAnRycsICdIJywgJ0knLCAnSicsICdLJywgJ0wnLCAnTScsICdOJywgJ08nLCAnUCcsICdRJywgJ1InLCAnUycsICdUJywgJ1UnLCAnVicsICdXJywgJ1gnLCAnWScsICdaJ107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgTnVtYmVyKGxlbik7IGkrKykge1xuICAgIHZhciBwb3MgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoYXJyLmxlbmd0aCAtIDEpKTtcbiAgICBzdHIgKz0gYXJyW3Bvc107XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cbmV4cG9ydHMuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uKHN0ciwgc2VhcmNoVmFsKSB7XG4gIGlmICghc3RyIHx8ICFzZWFyY2hWYWwgfHwgc2VhcmNoVmFsLmxlbmd0aCA9PT0gMCB8fCBzZWFyY2hWYWwubGVuZ3RoID4gc3RyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gc3RyLnN1YnN0cigwLCBzZWFyY2hWYWwubGVuZ3RoKSA9PT0gc2VhcmNoVmFsO1xufTtcblxuZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICB9XG5cbiAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufTtcblxuLy8gMS5la3bkuK3lrZjlnKjop4TliJnkuI3lkIjms5Xmg4XlhrXvvIzkuKLlvIPmlbTmnaHkuovku7Zcbi8vIDIuZXZlbnRpZOmVv+W6puS4jeiDvei2hei/hzEyOOS4quWtl+esplxuLy8gMy5rZXnplb/luqbkuI3og73otoXov4cyNTbkuKrlrZfnrKZcbi8vIDQu5q+P5LiqZXZlbnTmkLrluKZrZXnkuKrmlbDkuI3og73otoXov4cxMDDkuKpcbmV4cG9ydHMuY2hlY2tFdmVudCA9IGZ1bmN0aW9uKGV2ZW50SWQsIHByb3BlcnRpZXMpIHtcbiAgdmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4gIHZhciB1bG9nID0gcmVxdWlyZSgnLi4vbGliX3VtL3Vsb2cnKTtcbiAgaWYgKCEoZXZlbnRJZCAmJiB0eXBlb2YgZXZlbnRJZCA9PT0gJ3N0cmluZycpKSB7XG4gICAgdWxvZygpLmUoJ3BsZWFzZSBjaGVjayB0cmFja0V2ZW50IGlkLiBpZCBzaG91bGQgYmUgXCJzdHJpbmdcIiBhbmQgbm90IG51bGwnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyDkv53nlZnlhbPplK7lrZdcbiAgdmFyIHJlc2VydmVXb3JkcyA9IFsnaWQnLCAnZHUnXTtcbiAgdmFyIHJlc2VydmVXb3JkTWFwID0ge307XG5cbiAgcmVzZXJ2ZVdvcmRzLmZvckVhY2goZnVuY3Rpb24gKHdvcmQpIHtcbiAgICByZXNlcnZlV29yZE1hcFt3b3JkXSA9IDE7XG4gIH0pO1xuXG4gIC8vIOajgOafpWV2ZW50SWTmmK/lkKbkuI7kv53nlZnlhbPplK7lrZflhrLnqoFcbiAgaWYgKHJlc2VydmVXb3JkTWFwW2V2ZW50SWRdKSB7XG4gICAgdWxvZygpLmUoJ2V2ZW50SWTkuI3og73kuI7ku6XkuIvkv53nlZnlrZflhrLnqoE6ICcgKyByZXNlcnZlV29yZHMuam9pbignLCcpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoZXZlbnRJZC5sZW5ndGggPiBhcGx1c1N0YXRpYy5NQVhfRVZFTlRJRF9MRU5HVEgpIHtcbiAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gbGVuZ3RoIG9mIGV2ZW50IGlkIHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gcHJvcGVydGllc+eahOWQiOazleexu+Wei+S4uiBzdHJpbmcgfCBvYmplY3Qobm90IGluY2x1ZGUgQXJyYXkpXG4gIGlmIChwcm9wZXJ0aWVzXG4gICAgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHByb3BlcnRpZXMpKVxuICAgICYmIHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnc3RyaW5nJykge1xuICAgIHVsb2coKS5lKCdwbGVhc2UgY2hlY2sgdHJhY2tFdmVudCBwcm9wZXJ0aWVzLiBwcm9wZXJ0aWVzIHNob3VsZCBiZSBzdHJpbmcgb3Igb2JqZWN0KG5vdCBpbmNsdWRlIEFycmF5KScpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG4gICAgICAgIGlmIChrZXkubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpIHtcbiAgICAgICAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gbGVuZ3RoIG9mIHByb3BlcnR5IGtleSBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvdW50ID49IGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UKSB7XG4gICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGNvdW50IG9mIHByb3BlcnRpZXMgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWVNfQ09VTlQpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNlcnZlV29yZE1hcFtrZXldKSB7XG4gICAgICAgICAgdWxvZygpLmUoJ+WxnuaAp+S4reeahGtleeS4jeiDveS4juS7peS4i+S/neeVmeWtl+WGsueqgTogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvdW50ICs9IDE7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcblxuZXhwb3J0cy5kZWxldGVJbmZvID0gZnVuY3Rpb24oZ29rZXksIGFycikge1xuICBlYWNoKGFyciwgZnVuY3Rpb24odikge1xuICAgIGRlbGV0ZSBnb2tleVt2XTtcbiAgfSk7XG4gIHJldHVybiBnb2tleTtcbn07XG5cbmV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cblxuZXhwb3J0cy5EYXRhVHlwZSA9IHtcbiAgSEFMRl9TRVNTSU9OOiAnaGFsZl9zZXNzaW9uJyxcbiAgQ0xPU0VfU0VTU0lPTjogJ2Nsb3NlX3Nlc3Npb24nLFxuICBFS1Y6ICdla3YnLFxuICBFTlRFUl9QQUdFOiAnZW50ZXJfcGFnZScsXG4gIExFQVZFX1BBR0U6ICdsZWF2ZV9wYWdlJ1xufTtcblxuZXhwb3J0cy5BY2Nlc3NUeXBlID0ge1xuICBNT0JJTEVfTkVUV09SS18yRzogJzJnJyxcbiAgTU9CSUxFX05FVFdPUktfM0c6ICczZycsXG4gIE1PQklMRV9ORVRXT1JLXzRHOiAnNGcnLFxuICBNT0JJTEVfTkVUV09SS19OT05FOiAnbm9uZSdcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vdXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG52YXIgTE9HX1BSRUZJWCA9ICdbQVBMVVNdIC0tICc7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG4gIHZhciBfZGVidWcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBVTG9nKCkge1xuICAgIHRoaXMuc2V0RGVidWcgPSBmdW5jdGlvbiAoZGVidWcpIHtcbiAgICAgIF9kZWJ1ZyA9IGRlYnVnO1xuICAgIH07XG5cbiAgICB0aGlzLmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBMT0dfUFJFRklYICsgYXJndW1lbnRzWzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmRlYnVnLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUuaW5mby5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIGVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZW1wdHlcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnNvbGUudGFibGUuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnRpcF93ID0gZnVuY3Rpb24gKG1zZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgJyVjICcgKyBMT0dfUFJFRklYICsgbXNnLFxuICAgICAgICAgICdiYWNrZ3JvdW5kOnJlZDsgcGFkZGluZzogNHB4OyBwYWRkaW5nLXJpZ2h0OiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY29sb3I6ICNmZmY7J1xuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBlXG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZXJyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5yZXBlYXQgPSBmdW5jdGlvbihjaGFyKSB7XG4gICAgICB2YXIgcmVzID0gY2hhcjtcbiAgICAgIHdoaWxlIChyZXMubGVuZ3RoIDwgODYpIHtcbiAgICAgICAgcmVzID0gcmVzICsgY2hhcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKF9pbnN0YW5jZSA9PT0gbnVsbCkge1xuICAgICAgX2luc3RhbmNlID0gbmV3IFVMb2coKTtcbiAgICB9XG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfTtcbn0pKCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vdWxvZy5qc1xuLy8gbW9kdWxlIGlkID0gNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbnZhciBhbmFseXRpY3NNYXAgPSB7XG4gIGVrdnM6ICdlJyxcbiAgYWN0aXZlX3VzZXI6ICdhY3RpdmVfdXNlcidcbn07XG5cbnZhciBoZWFkZXJNYXAgPSB7XG4gIHNka190eXBlOiAnc2R0JyxcbiAgZGV2aWNlX21vZGVsOiAnZG0nLFxuICBsYW5ndWFnZTogJ2xhbmcnLFxuICBkZXZpY2VfdHlwZTogJ2R0JyxcbiAgb3NfdmVyc2lvbjogJ292JyxcbiAgYXBwa2V5OiAnYWsnLFxuICBzZGtfdmVyc2lvbjogJ3N2JyxcbiAgcmVzb2x1dGlvbjogJ3JsJyxcbiAgdGVzdFRva2VuOiAndHRuJyxcbiAgcGl4ZWxfcmF0aW86ICdwcicsXG4gIF9pZDogJ2lkJyxcbiAgaWRfdHlwZTogJ2l0JyxcbiAgaWRfdHJhY2tpbmc6ICdpdHInLFxuICBpbXByaW50OiAnaW1wJyxcbiAgZGVidWdJZDogJ2RrJ1xufTtcblxudmFyIGlkTWFwID0ge1xuICB1dWlkOiAndWQnLFxuICB1bmlvbmlkOiAndW5kJyxcbiAgb3BlbmlkOiAnb2QnLFxuICBhbm9ueW1vdXNpZDogJ25kJyxcbiAgYWxpcGF5X2lkOiAnYWQnLFxuICBkZXZpY2VfaWQ6ICdkZCcsXG4gIHVzZXJpZDogJ3B1aWQnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgcmV0dXJuIHtcbiAgICBoOiBfbWFuZ2xlSGVhZGVyKGRhdGEuaGVhZGVyLCBoZWFkZXJNYXApLFxuICAgIGE6IF9tYW5nbGVBbmFseXRpY3MoZGF0YS5hbmFseXRpY3MsIGFuYWx5dGljc01hcClcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIF9tYW5nbGVIZWFkZXIoaGVhZGVyLCBtYXApIHtcbiAgdmFyIHJlc3VsdCA9IF9tYW5nbGVPYmooaGVhZGVyLCBtYXApO1xuXG4gIGlmIChoZWFkZXIgJiYgaGVhZGVyLmlkX3RyYWNraW5nKSB7XG4gICAgcmVzdWx0W21hcC5pZF90cmFja2luZyB8fCAnaWRfdHJhY2tpbmcnXSA9IF9tYW5nbGVPYmooaGVhZGVyLmlkX3RyYWNraW5nLCBpZE1hcCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZnVuY3Rpb24gX21hbmdsZU9iaihvYmosIG1hcCkge1xuICB2YXIgcmVzdWx0ID0ge307XG5cbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChtYXBba2V5XSkge1xuICAgICAgcmVzdWx0W21hcFtrZXldXSA9IG9ialtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IG9ialtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiBfbWFuZ2xlQW5hbHl0aWNzKGFuYWx5dGljcywgbWFwKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBpZiAoYW5hbHl0aWNzKSB7XG4gICAgZm9yICh2YXIgcHJvcCBpbiBhbmFseXRpY3MpIHtcbiAgICAgIGlmIChhbmFseXRpY3NbcHJvcF0pIHtcbiAgICAgICAgcmVzdWx0W21hcFtwcm9wXV0gPSBhbmFseXRpY3NbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9tYW5nbGVfd2ViLmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xudmFyIGI2NGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xudmFyIGI2NHRhYiA9IChmdW5jdGlvbiAoYmluKSB7XG4gIHZhciB0ID0ge307XG4gIGZvciAodmFyIGkgPSAwLCBsID0gYmluLmxlbmd0aDsgaSA8IGw7IGkrKykgdFtiaW4uY2hhckF0KGkpXSA9IGk7XG4gIHJldHVybiB0O1xufSkoYjY0Y2hhcnMpO1xudmFyIGZyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG52YXIgY2JfdXRvYiA9IGZ1bmN0aW9uIChjKSB7XG4gIHZhciBjYztcbiAgaWYgKGMubGVuZ3RoIDwgMikge1xuICAgIGNjID0gYy5jaGFyQ29kZUF0KDApO1xuICAgIHJldHVybiBjYyA8IDEyOCA/IGMgOiBjYyA8IDIwNDggPyBmcm9tQ2hhckNvZGUoMTkyIHwgY2MgPj4+IDYpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpIDogZnJvbUNoYXJDb2RlKDIyNCB8IGNjID4+PiAxMiAmIDE1KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gNiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKTtcbiAgfSBlbHNlIHtcbiAgICBjYyA9IDY1NTM2ICsgKGMuY2hhckNvZGVBdCgwKSAtIDU1Mjk2KSAqIDEwMjQgKyAoYy5jaGFyQ29kZUF0KDEpIC0gNTYzMjApO1xuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoMjQwIHwgY2MgPj4+IDE4ICYgNykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDEyICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiA2ICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpO1xuICB9XG59O1xudmFyIHJlX3V0b2IgPSAvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGRl18W15cXHgwMC1cXHg3Rl0vZztcbnZhciB1dG9iID0gZnVuY3Rpb24gKHUpIHtcbiAgcmV0dXJuIHUucmVwbGFjZShyZV91dG9iLCBjYl91dG9iKTtcbn07XG52YXIgY2JfZW5jb2RlID0gZnVuY3Rpb24gKGNjYykge1xuICB2YXIgcGFkbGVuID0gWzAsIDIsIDFdW2NjYy5sZW5ndGggJSAzXSxcbiAgICBvcmQgPSBjY2MuY2hhckNvZGVBdCgwKSA8PCAxNiB8IChjY2MubGVuZ3RoID4gMSA/IGNjYy5jaGFyQ29kZUF0KDEpIDogMCkgPDwgOCB8IChjY2MubGVuZ3RoID4gMiA/IGNjYy5jaGFyQ29kZUF0KDIpIDogMCksXG4gICAgY2hhcnMgPSBbYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gMTgpLCBiNjRjaGFycy5jaGFyQXQob3JkID4+PiAxMiAmIDYzKSwgcGFkbGVuID49IDIgPyAnPScgOiBiNjRjaGFycy5jaGFyQXQob3JkID4+PiA2ICYgNjMpLCBwYWRsZW4gPj0gMSA/ICc9JyA6IGI2NGNoYXJzLmNoYXJBdChvcmQgJiA2MyldO1xuICByZXR1cm4gY2hhcnMuam9pbignJyk7XG59O1xudmFyIGJ0b2EgPSBmdW5jdGlvbiAoYikge1xuICByZXR1cm4gYi5yZXBsYWNlKC9bXFxzXFxTXXsxLDN9L2csIGNiX2VuY29kZSk7XG59O1xudmFyIF9lbmNvZGUgPSBmdW5jdGlvbiAodSkge1xuICByZXR1cm4gYnRvYSh1dG9iKHUpKTtcbn07XG52YXIgZW5jb2RlID0gZnVuY3Rpb24gKHUsIHVyaXNhZmUpIHtcbiAgcmV0dXJuICF1cmlzYWZlID8gX2VuY29kZShTdHJpbmcodSkpIDogX2VuY29kZShTdHJpbmcodSkpLnJlcGxhY2UoL1srXFwvXS9nLCBmdW5jdGlvbiAobTApIHtcbiAgICByZXR1cm4gbTAgPT0gJysnID8gJy0nIDogJ18nO1xuICB9KS5yZXBsYWNlKC9cXD0vZywgJycpO1xufTtcbi8vIHZhciBlbmNvZGVVUkkgPSBmdW5jdGlvbiAodSkge1xuLy8gICByZXR1cm4gZW5jb2RlKHUsIHRydWUpO1xuLy8gfTtcbnZhciByZV9idG91ID0gbmV3IFJlZ0V4cChbJ1vDgC3Dn11bwoAtwr9dJywgJ1vDoC3Dr11bwoAtwr9dezJ9JywgJ1vDsC3Dt11bwoAtwr9dezN9J10uam9pbignfCcpLCAnZycpO1xudmFyIGNiX2J0b3UgPSBmdW5jdGlvbiAoY2NjYykge1xuICBzd2l0Y2ggKGNjY2MubGVuZ3RoKSB7XG4gIGNhc2UgNDpcbiAgICB2YXIgY3AgPSAoNyAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgMTggfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpIDw8IDEyIHwgKDYzICYgY2NjYy5jaGFyQ29kZUF0KDIpKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMyksIG9mZnNldCA9IGNwIC0gNjU1MzY7XG4gICAgcmV0dXJuIGZyb21DaGFyQ29kZSgob2Zmc2V0ID4+PiAxMCkgKyA1NTI5NikgKyBmcm9tQ2hhckNvZGUoKG9mZnNldCAmIDEwMjMpICsgNTYzMjApO1xuICBjYXNlIDM6XG4gICAgcmV0dXJuIGZyb21DaGFyQ29kZSgoMTUgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDEyIHwgKDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMikpO1xuICBkZWZhdWx0OlxuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDMxICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpO1xuICB9XG59O1xudmFyIGJ0b3UgPSBmdW5jdGlvbiAoYikge1xuICByZXR1cm4gYi5yZXBsYWNlKHJlX2J0b3UsIGNiX2J0b3UpO1xufTtcbnZhciBjYl9kZWNvZGUgPSBmdW5jdGlvbiAoY2NjYykge1xuICB2YXIgbGVuID0gY2NjYy5sZW5ndGgsXG4gICAgcGFkbGVuID0gbGVuICUgNCxcbiAgICBuID0gKGxlbiA+IDAgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMCldIDw8IDE4IDogMCkgfCAobGVuID4gMSA/IGI2NHRhYltjY2NjLmNoYXJBdCgxKV0gPDwgMTIgOiAwKSB8IChsZW4gPiAyID8gYjY0dGFiW2NjY2MuY2hhckF0KDIpXSA8PCA2IDogMCkgfCAobGVuID4gMyA/IGI2NHRhYltjY2NjLmNoYXJBdCgzKV0gOiAwKSxcbiAgICBjaGFycyA9IFtmcm9tQ2hhckNvZGUobiA+Pj4gMTYpLCBmcm9tQ2hhckNvZGUobiA+Pj4gOCAmIDI1NSksIGZyb21DaGFyQ29kZShuICYgMjU1KV07XG4gIGNoYXJzLmxlbmd0aCAtPSBbMCwgMCwgMiwgMV1bcGFkbGVuXTtcbiAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xufTtcbnZhciBhdG9iID0gZnVuY3Rpb24gKGEpIHtcbiAgcmV0dXJuIGEucmVwbGFjZSgvW1xcc1xcU117MSw0fS9nLCBjYl9kZWNvZGUpO1xufTtcbnZhciBfZGVjb2RlID0gZnVuY3Rpb24gKGEpIHtcbiAgcmV0dXJuIGJ0b3UoYXRvYihhKSk7XG59O1xudmFyIGRlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG4gIHJldHVybiBfZGVjb2RlKFN0cmluZyhhKS5yZXBsYWNlKC9bLV9dL2csIGZ1bmN0aW9uIChtMCkge1xuICAgIHJldHVybiBtMCA9PSAnLScgPyAnKycgOiAnLyc7XG4gIH0pLnJlcGxhY2UoL1teQS1aYS16MC05XFwrXFwvXS9nLCAnJykpO1xufTtcblxuZXhwb3J0cy5lbmNvZGUgPSBlbmNvZGU7XG5leHBvcnRzLmRlY29kZSA9IGRlY29kZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9iYXNlNjQuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuZXhwb3J0cy5zdHJpbmdmeSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgaWYgKGRhdGEpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn07XG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbihqc29uKSB7XG4gIGlmIChqc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuZXhwb3J0cy5wYXJzZVRvQXJyYXkgPSBmdW5jdGlvbihqc29uKSB7XG4gIGlmIChqc29uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVtcHR5XG4gICAgfVxuICB9XG4gIHJldHVybiBbXTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vanNvblV0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDQ3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiBldmVudC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaWQsIHByb3BlcnRpZXMpIHtcbiAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgZXZlbnQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBldmVudC5pZCA9IGlkO1xuICBpZiAoIXByb3BlcnRpZXMgfHwgIXByb3BlcnRpZXMudHMpIHtcbiAgICBldmVudC50cyA9IERhdGUubm93KCk7XG4gIH1cbiAgdmFyIHByb3BzVHlwZSA9IHR5cGVvZiBwcm9wZXJ0aWVzO1xuICBpZiAocHJvcHNUeXBlID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG4gICAgICAgIGV2ZW50W2tleV0gPSBwcm9wZXJ0aWVzW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcbiAgaWYgKGdwKSB7XG4gICAgZXZlbnRbJ2dwJ10gPSBncDsgXG4gIH1cbiAgcmV0dXJuIGV2ZW50O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9ldmVudC5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbnZhciBjdXJyZW50UGF0aCA9IFwiXCI7XG52YXIgcGFnZU9wdGlvbk1hcCA9IHt9O1xuXG5mdW5jdGlvbiBidWlsZFBhdGgocGF0aCwgcXVlcnkpIHtcbiAgaWYgKCFwYXRoKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgdmFyIHFzID0gW107XG4gIGZvciAodmFyIHEgaW4gcXVlcnkpIHtcbiAgICBxcy5wdXNoKHEgKyAnPScgKyBxdWVyeVtxXSk7XG4gIH1cbiAgdmFyIHFzcyA9IHFzLmpvaW4oJyYnKTtcbiAgcmV0dXJuIHFzcyA/IHBhdGggKyAnPycgKyBxc3MgOiBwYXRoO1xufTtcblxuZXhwb3J0cy5nZXRDdXJyZW50UGFnZVBhdGggPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGN1cnJlbnRQYXRoO1xufTtcblxuZXhwb3J0cy5zZXRDdXJyZW50UGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgaWYgKHBhdGgpIHtcbiAgICBjdXJyZW50UGF0aCA9IHBhdGg7XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0UGFnZVF1ZXJ5ID0gZnVuY3Rpb24ocGF0aCkge1xuICBpZiAocGF0aCkge1xuICAgIHJldHVybiBwYWdlT3B0aW9uTWFwW3BhdGhdO1xuICB9XG59O1xuXG5leHBvcnRzLnNldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgsIHF1ZXJ5KSB7XG4gIGlmIChwYXRoKSB7XG4gICAgcGFnZU9wdGlvbk1hcFtwYXRoXSA9IHF1ZXJ5O1xuICB9XG59O1xuXG5leHBvcnRzLmdldEZ1bGxQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gYnVpbGRQYXRoKGN1cnJlbnRQYXRoLCBwYWdlT3B0aW9uTWFwW3BhdGhdKTtcbn07XG5cbmV4cG9ydHMuZ2V0UGFnZU5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgbWV0YSA9IGFwbHVzLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJyk7XG4gIHZhciByZWFsUGF0aCA9IHBhdGggfHwgY3VycmVudFBhdGg7XG4gIHRyeSB7XG4gICAgLy8g5a+55LqO5Yqo5oCB6Lev55Sx77yM5pSv5oyB55So5oi35Lyg5YWl5q2j5YiZ6L+b6KGM5Yy56YWNXG4gICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhKSB7XG4gICAgICAgIGlmIChrZXkgPT09IHJlYWxQYXRoKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSBpZiAobWV0YVtrZXldICYmIG1ldGFba2V5XS5yZWdSdWxlKSB7XG4gICAgICAgICAgcmVhbFBhdGggPSBtZXRhW2tleV0ucmVnUnVsZS50ZXN0KHBhdGgpID8ga2V5IDogcmVhbFBhdGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgLy9cbiAgfVxuICByZXR1cm4gbWV0YVtyZWFsUGF0aF07XG4gIC8vIGlmICghcGF0aCkge1xuICAvLyAgIHJldHVybiBtZXRhICYmIG1ldGFbY3VycmVudFBhdGhdO1xuICAvLyB9IGVsc2Uge1xuICAvLyAgIHJldHVybiBtZXRhICYmIG1ldGFbcGF0aF07XG4gIC8vIH1cbn07XG5cbmV4cG9ydHMuZ2V0UGFnZUNvZGUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiAodGhpcy5nZXRQYWdlTmFtZShwYXRoKSB8fCB7fSkucGFnZU5hbWU7XG59O1xuXG5leHBvcnRzLmdldFZUUmVhbHRpbWVDb2RlID0gZnVuY3Rpb24oKSB7XG4gIGlmIChjdXJyZW50UGF0aCkge1xuICAgIHZhciBxdWVyeSA9IHBhZ2VPcHRpb25NYXBbY3VycmVudFBhdGhdIHx8IHt9O1xuICAgIHZhciByZWdFeHAgPSAvXlxcJHZ0Xy87XG4gICAgdmFyIHNjZW5lID0gZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5LnNjZW5lKTtcbiAgICByZXR1cm4gc2NlbmUgJiYgcmVnRXhwLnRlc3Qoc2NlbmUpICYmIHNjZW5lLnJlcGxhY2UocmVnRXhwLCAnJyk7XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MvdXRpbC9mZXRjaERhdGEuanNcbiAqIOW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYy5qcycpO1xuXG4vKipcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiDphY3nva7pobnljIXmi6zvvJpcbiAqIGJhc2U6IOm7mOiupOeBsOW6puWfuuaVsDEwMDAwXG4gKiB0aW1lb3V0OiBDT1JT6LaF5pe25pe26Ze0XG4gKi9cbnZhciBfY29uZmlnID0ge1xuICBiYXNlOiAxMDAwMCxcbiAgLy8g6buY6K6kMTBzXG4gIHRpbWVvdXQ6IDEwMDAwXG59O1xuXG52YXIgZmV0Y2ggPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAodXJsLCByZXNvbHZlLCByZWplY3QsIG9wdHMpIHtcbiAgaWYgKC9eXFwvXFwvLy50ZXN0KHVybCkpIHtcbiAgICB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcbiAgfVxuICB2YXIgcGVuZGluZyA9IHRydWU7XG4gIHZhciB0aW1lb3V0ID0gKG9wdHMgJiYgb3B0cy50aW1lb3V0KSA/IG9wdHMudGltZW91dCA6IF9jb25maWcudGltZW91dDtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgIGlmIChwZW5kaW5nKSB7XG4gICAgICBwZW5kaW5nID0gZmFsc2U7XG4gICAgICByZWplY3Qoe1xuICAgICAgICB0aW1lb3V0OiB0aW1lb3V0XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHRpbWVvdXQpO1xuICB3aW5kb3cuZmV0Y2godXJsKVxuICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBpZigvYXBwbGljYXRpb25cXC9qc29uLy50ZXN0KHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7XG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICBpZiAocGVuZGluZykge1xuICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICBwZW5kaW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSlcbiAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgIHBlbmRpbmcgJiYgcmVqZWN0KGVycm9yKTtcbiAgICB9KTtcbn07XG5cbnZhciBhamF4ID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHVybCwgcmVzb2x2ZSwgcmVqZWN0LCBvcHRzKSB7XG4gIHZhciB4aHI7XG4gIHZhciBtZXRob2QgPSAnR0VUJztcbiAgdmFyIG9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoeGhyLnJlc3BvbnNlVGV4dCkge1xuICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVqZWN0KCk7XG4gICAgfVxuICB9O1xuICB2YXIgQ09SUyA9IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgaWYgKENPUlMpIHtcbiAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgeGhyID0gbmV3IHdpbmRvdy5YRG9tYWluUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTtcbiAgfVxuICAvLyB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICB2YXIgdGltZW91dCA9IChvcHRzICYmIG9wdHMudGltZW91dCkgPyBvcHRzLnRpbWVvdXQgOiBfY29uZmlnLnRpbWVvdXQ7XG4gIHhoci50aW1lb3V0ID0gdGltZW91dDtcbiAgeGhyLm9ubG9hZCA9IG9ubG9hZDtcbiAgeGhyLm9uZXJyb3IgPSByZWplY3Q7XG4gIHhoci5vbnRpbWVvdXQgPSByZWplY3Q7XG4gIHhoci5zZW5kKCk7XG59O1xuXG52YXIgcmVxdWVzdCA9IGZ1bmN0aW9uICh1cmwsIHJlc29sdmUsIHJlamVjdCwgb3B0cykge1xuICBpZiAod2luZG93LmZldGNoKSB7XG4gICAgZmV0Y2godXJsLCByZXNvbHZlLCByZWplY3QsIG9wdHMpO1xuICB9IGVsc2Uge1xuICAgIGFqYXgodXJsLCByZXNvbHZlLCByZWplY3QsIG9wdHMpO1xuICB9XG59O1xuXG52YXIgcmVxdWVzdDR1bSA9IGZ1bmN0aW9uKG9wdCwgY29udGVudFR5cGUpIHtcbiAgb3B0ID0gb3B0IHx8IHt9O1xuICBvcHQubWV0aG9kID0gKG9wdC5tZXRob2QgfHwgJ1BPU1QnKS50b1VwcGVyQ2FzZSgpO1xuICBvcHQudXJsID0gb3B0LnVybCB8fCAnJztcbiAgb3B0LmRhdGEgPSBvcHQuZGF0YSB8fCBudWxsO1xuICBvcHQuc3VjY2VzcyA9IG9wdC5zdWNjZXNzIHx8IGZ1bmN0aW9uICgpIHt9O1xuICBvcHQuZXJyb3IgPSBvcHQuZXJyb3IgfHwgZnVuY3Rpb24gKCkge307XG4gIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgdmFyIHBhcmFtcyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb3B0LmRhdGEpe1xuICAgIHBhcmFtcy5wdXNoKGtleSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChvcHQuZGF0YVtrZXldKSk7XG4gIH1cbiAgdmFyIGdldERhdGEgPSBwYXJhbXMuam9pbignJicpO1xuICB2YXIgcG9zdERhdGEgPSBKU09OLnN0cmluZ2lmeShvcHQuZGF0YSB8fCB7fSk7XG4gIFxuICBpZiAob3B0Lm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgeGhyLm9wZW4ob3B0Lm1ldGhvZCwgb3B0LnVybCwgdHJ1ZSk7XG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsIGNvbnRlbnRUeXBlIHx8ICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gIH0gZWxzZSBpZiAob3B0Lm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICB4aHIub3BlbihvcHQubWV0aG9kLCBvcHQudXJsICsgJz8nICsgZ2V0RGF0YSwgdHJ1ZSk7XG4gIH1cblxuICAvLyB3aXRoQ3JlZGVudGlhbHMgY2Fubm90IGJlIG1vZGlmaWVkIHVudGlsIGFmdGVyIGNhbGxpbmcgLm9wZW4gb24gQW5kcm9pZCBhbmQgTW9iaWxlIFNhZmFyaVxuICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgeGhyLnRpbWVvdXQgPSAzMDAwO1xuICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmIHhoci5zdGF0dXMgPT0gMjAwKSB7XG4gICAgICB2YXIganNvbiA9IHt9O1xuICAgICAgdHJ5IHtcbiAgICAgICAganNvbiA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICB9IGNhdGNoIChleCkge31cbiAgICAgIG9wdC5zdWNjZXNzKGpzb24pO1xuICAgIH1lbHNlIGlmKHhoci5yZWFkeVN0YXRlID09IDQpe1xuICAgICAgb3B0LmVycm9yKHhoci5zdGF1cyk7XG4gICAgfVxuICB9O1xuXG4gIGlmIChvcHQubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICB4aHIuc2VuZChwb3N0RGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgeGhyLnNlbmQoKTtcbiAgfVxufTtcblxuZXhwb3J0cy5yZXF1ZXN0ID0gcmVxdWVzdDtcbmV4cG9ydHMucmVxdWVzdDR1bSA9IHJlcXVlc3Q0dW07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9mZXRjaERhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDms6jlhaVsb2dDb25maWcs5L6b5ZCO57ut5o+S5Lu25L2/55SoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGVhY2ggPSByZXF1aXJlKCcuLi9saWJfdS91dGlscy9lYWNoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIGdldExvZ0NvbmZpZzogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGxvZ0NvbmZpZyA9IHt9O1xuICAgICAgdmFyIHBsdWdpbnMgPSB0aGlzLm9wdGlvbnMuY29uZmlnLnBsdWdpbnM7XG5cbiAgICAgIGZvciAodmFyIGsgaW4gcGx1Z2lucykge1xuICAgICAgICBsb2dDb25maWdba10gPSB7XG4gICAgICAgICAgcGx1Z2luczogcGx1Z2luc1trXSxcbiAgICAgICAgICBjb250ZXh0OiB7fVxuICAgICAgICB9O1xuICAgICAgICBlYWNoKHBsdWdpbnNba10sIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgbG9nQ29uZmlnW2tdLmNvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnIHx8IHt9O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsb2dDb25maWc7XG4gICAgfSxcblxuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnID0gdGhpcy5nZXRMb2dDb25maWcoKTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5QQUdFX0xPQURfVElNRTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9hcGx1c19sb2dfaW5qZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSA1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL2V0YWcuanNcbiAqXG4gKiDkvZznlKjvvJrljrsgaHR0cHM6Ly9sb2cubW1zdGF0LmNvbS9lZy5qcyB8IGh0dHBzOi8vZ2oubW1zdGF0LmNvbS9lZy5qc+WQjOatpWNuYe+8jOW5tuWGmeWFpeWIsOacrOWcsGNvb2tpZVxuICogZGVwczog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGNvb2tpZSA9IHJlcXVpcmUoJ0B1dGlscy9jb29raWUnKTtcbnZhciB1dGlsRGF0YSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGF0YScpO1xudmFyIGRhdGUgPSByZXF1aXJlKCdAdXRpbHMvZGF0ZScpO1xudmFyIHV0aWxFdGFnID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdGFnJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdXRpbERvbSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRG9tJyk7XG4gIHJldHVybiB7XG4gICAgLy8g5Yid5aeL5YyW5qih5Z2XXG4gICAgaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgIHZhciBwbHVnaW5fZXRhZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcgfHwge307XG4gICAgICB0aGlzLmNuYSA9IHBsdWdpbl9ldGFnLmNuYSB8fCBjb29raWUuZ2V0Q29va2llQ25hKCdjbmEnKTtcbiAgICAgIC8vIHRoaXMudGFnID0gMDtcbiAgICAgIC8vIHRoaXMuc3RhZyA9IC0xO1xuICAgICAgLy8gdGhpcy5ldGFnID0gJyc7XG4gICAgICB0aGlzLnNldFRhZygwKTtcbiAgICAgIHRoaXMuc2V0U3RhZygtMSk7XG4gICAgICB0aGlzLnNldExzVGFnKCctMScpOyAvLyDmiZPmoIfnrb4obG9jYWxTdG9yYWdlVGFnKWxzdGFnID0gLTEg5Yid5aeL5YC8XG4gICAgICB0aGlzLnNldEV0YWcodGhpcy5jbmEgfHwgJycpO1xuICAgICAgdGhpcy5yZXF1ZXN0aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLnRvZGF5ID0gZGF0ZS5nZXRGb3JtYXREYXRlKCk7XG4gICAgfSxcblxuICAgIHNldExzVGFnOiBmdW5jdGlvbihsc3RhZykge1xuICAgICAgdGhpcy5sc3RhZyA9IGxzdGFnO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQuZXRhZy5sc3RhZyA9IGxzdGFnO1xuICAgIH0sXG5cbiAgICBzZXRUYWc6IGZ1bmN0aW9uKHRhZykge1xuICAgICAgdGhpcy50YWcgPSB0YWc7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5ldGFnLnRhZyA9IHRhZztcbiAgICB9LFxuXG4gICAgc2V0U3RhZzogZnVuY3Rpb24oc3RhZykge1xuICAgICAgdGhpcy5zdGFnID0gc3RhZztcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcuc3RhZyA9IHN0YWc7XG4gICAgfSxcblxuICAgIHNldEV0YWc6IGZ1bmN0aW9uKGV0YWcpIHtcbiAgICAgIHRoaXMuZXRhZyA9IGV0YWc7XG4gICAgICAvLyDotYvlgLxwduWPguaVsO+8iOmHjeimge+8iVxuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQuZXRhZy5jbmEgPSBldGFnO1xuICAgICAgLy8g5a2Y5YWlY29va2llXG4gICAgICBpZiAoY29va2llLmdldENvb2tpZUNuYSgnY25hJykgIT09IGV0YWcpIHtcbiAgICAgICAgY29va2llLnNldENvb2tpZUNuYSgnY25hJywgZXRhZywge1xuICAgICAgICAgICdTYW1lU2l0ZSc6ICdub25lJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0THNjbmFTdGF0dXM6IGZ1bmN0aW9uKHN0YXR1cykge1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQuZXRhZy5sc2NuYXN0YXR1cyA9IHN0YXR1cztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogcHblj5HpgIHliLDlk6rph4zljrtcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjO+8jOi/lOWbnuKAnHBhdXNl4oCd5pqC5YGc5Lit6Ze05Lu25omn6KGM77yM6L+U5Zue5LiA5Liq5pW05pWw4oCcbuKAneWRiuivieS4remXtOS7tuKAnG7igJ3mr6vnp5LlkI7nu6fnu63miafooYzkuK3pl7Tku7ZcbiAgICAgKiDigJzmmoLlgZzigJ3mnIDlpJoxMHPvvIzoi6XotoXml7bkuK3pl7Tku7bkvJrlvLrliLbnu6fnu63miafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKHN0YXRlLCBjYikge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgLy8gdmFyIGFwbHVzX2NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZztcbiAgICAgIGlmIChfc2VsZi5jbmEpIHtcbiAgICAgICAgLy8gX3NlbGYudGFnID0gMTtcbiAgICAgICAgX3NlbGYuc2V0VGFnKDEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgdGltZXIgPSBudWxsO1xuICAgICAgdmFyIGFwbHVzX3Job3N0X3YgPSBhcGx1cy5fJC5tZXRhX2luZm9bJ2FwbHVzLXJob3N0LXYnXTtcbiAgICAgIGlmIChhcGx1c19yaG9zdF92KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcuZWdVcmwgPSBhcGx1c19yaG9zdF92ICsgJy9lZy5qcyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgZWdVcmwgPSB1dGlsRXRhZy5nZXRVcmwodGhpcy5vcHRpb25zLmNvbnRleHQuZXRhZyB8fCB7fSk7XG4gICAgICBfc2VsZi5yZXF1ZXN0aW5nID0gdHJ1ZTtcblxuICAgICAgdmFyIGRvX2JhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9LCAyMCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICB9O1xuICAgICAgXG4gICAgICB2YXIgdW5pdHRlc3QgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5ldGFnLnVuaXR0ZXN0O1xuICAgICAgdmFyIF9mbiA9IHVuaXR0ZXN0IHx8IHV0aWxEb20ubG9hZFNjcmlwdDtcbiAgICAgIFxuICAgICAgX2ZuKGVnVXJsLCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICB2YXIgRXRhZztcbiAgICAgICAgdmFyIHN0YWc7XG4gICAgICAgIC8vIG9uZXJyb3Ig6Kem5Y+RXG4gICAgICAgIGlmIChlcnJvciAmJiBlcnJvci50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgX3NlbGYuc2V0U3RhZygtMyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgRXRhZyA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ0V0YWcnKTtcbiAgICAgICAgICBpZiAoRXRhZykge1xuICAgICAgICAgICAgX3NlbGYuc2V0RXRhZyhFdGFnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3RhZyA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ3N0YWcnKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHN0YWcgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIC8vIF9zZWxmLnN0YWcgPSBzdGFnO1xuICAgICAgICAgICAgX3NlbGYuc2V0U3RhZyhzdGFnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDlt7Lnu4/otoXml7bvvIzlvZNFdGFn5rKh6K+35rGC6L+H77yM6LWw5Y6f5pyJ5rWB56iLXG4gICAgICAgIGlmICghX3NlbGYucmVxdWVzdGluZykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgIHRhZ+agh+etvuWAvOWQq+S5ie+8mlxuICAgICAgICAgIDEgIOS4muWKoeWfn+aciWNuYe+8jOacieWOn+aciea1geeoi1xuICAgICAgICAgIDAgIOS4muWKoeWfn+ayoeaciWNuYe+8jOWPkei1t3RhZ+ivt+axglxuXG4gICAgICAgICAgc3RhZ+agh+etvuWAvOWQq+S5ie+8mlxuICAgICAgICAgIC0xICAg5Yid5aeL5YyW5YC8XG4gICAgICAgICAgMSAgICBtbXN0YXTmnIljbmHvvIzkuJRjbmHlr7nnmoRcbiAgICAgICAgICAwICAgIG1tc3RhdOayoeaciWNuYe+8jGlmX25vbmVfbWF0Y2gg5pyJ5YC877yM5LiU5YC85q2j56GuXG4gICAgICAgICAgNCAgIG1tc3RhdOayoeaciWNuYe+8jGlmX25vbmVfbWF0Y2gg5pyJ5YC877yM5LiU5YC85LiN5q2j56Gu77yM5paw55Sf5oiQ55qEXG4gICAgICAgICAgLTMgICDliY3nq69qc+inpuWPke+8jGV0YWcgb25lcnJvcuS6i+S7tuinpuWPke+8jOWImeagh+iusC0zXG4gICAgICAgICAgMiAgICDllaXpg73msqHmnInvvIzmiJbogIVtbXN0YXTmnInkvYbmmK/mmK/plJnnmoTvvIzph43mlrDnlJ/miJBcbiAgICAgICAgICAtMiAgZXRhZ2pz6LaF5pe277yM5YmN56uvanPop6blj5Horr7nva5cbiAgICAgICAgICovXG4gICAgICAgIHZhciBnbG9iYWxDb25maWcgPSBhcGx1cy5nbG9iYWxDb25maWcgfHwge307XG4gICAgICAgIGlmIChzdGFnID09PSAyIHx8IHN0YWcgPT09IDQpIHtcbiAgICAgICAgICB2YXIgX2xzY25hID0gdXRpbERhdGEuZ2V0THNDbmEoZ2xvYmFsQ29uZmlnLkVUQUdfU1RPUkFHRV9LRVkpO1xuICAgICAgICAgIC8vIExT5pyJ5YC85pe277yMc2V05Lia5Yqh5Z+fY29va2ll44CBbHN0YWc9MVxuICAgICAgICAgIGlmIChfbHNjbmEpIHtcbiAgICAgICAgICAgIF9zZWxmLnNldExzVGFnKDEpO1xuICAgICAgICAgICAgX3NlbGYuc2V0RXRhZyhfbHNjbmEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBMU+aXoOWAvOaXtu+8jHNldOeUqOaWsENOQeWPkeaXpeW/l+OAgWxz5aGr5YC844CBbHN0YWc9MFxuICAgICAgICAgICAgX3NlbGYuc2V0THNUYWcoMCk7XG4gICAgICAgICAgICB1dGlsRGF0YS5zZXRMc0NuYShnbG9iYWxDb25maWcuRVRBR19TVE9SQUdFX0tFWSwgX3NlbGYudG9kYXksIEV0YWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkb19iYWNrKCk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIGV0YWdUaW1lb3V0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV0YWctdGltZW91dCcpO1xuICAgICAgdmFyIGRlZmF1bHRUaW1lID0gMjAwO1xuICAgICAgdmFyIHRpbWUgPSBkZWZhdWx0VGltZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRpbWUgPSBwYXJzZUludChldGFnVGltZW91dCk7XG4gICAgICAgIGlmICh1dGlsRGFzaC5pc05hTih0aW1lKSB8fCB0aW1lIDwgMjAwKSB7XG4gICAgICAgICAgdGltZSA9IGRlZmF1bHRUaW1lO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICB9XG5cbiAgICAgIC8vIOi2heaXtuWkhOeQhlxuICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBfc2VsZi5yZXF1ZXN0aW5nID0gZmFsc2U7XG4gICAgICAgIF9zZWxmLnNldFN0YWcoLTIpO1xuICAgICAgICBjYigpO1xuICAgICAgfSwgdGltZSk7XG5cbiAgICAgIC8vIOWRiuiviWNvbXBvc2XmmoLlgZzmiafooYzkuK3pl7Tku7bvvIznm7TliLBjYuWbnuWIsOWQjuWGjee7p+e7rVxuICAgICAgcmV0dXJuIHRpbWU7XG4gICAgfSxcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ193ZWIuanNcbi8vIG1vZHVsZSBpZCA9IDUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBjb29raWVcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZWFjaCA9IHJlcXVpcmUoJy4vZWFjaCcpO1xudmFyIHRsZCA9IHJlcXVpcmUoJy4vdGxkJyk7XG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnLi91dGlsQXJyYXknKTtcblxuLyoqXG4gKiDlj5blvpcgY29va2llIOS4reWvueW6lCBrZXkg55qE5YC8XG4gKiBAcGFyYW0ga2V5IHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldENvb2tpZShrZXkpIHtcbiAgaWYgKCFkb2N1bWVudCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICB2YXIgY29va2llX3ZhbCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChcbiAgICBuZXcgUmVnRXhwKCcoPzpefDspXFxcXHMqJyArIGtleSArICc9KFteO10rKScpXG4gICk7XG4gIHJldHVybiBjb29raWVfdmFsID8gY29va2llX3ZhbFsxXSA6ICcnO1xufTtcbmV4cG9ydHMuZ2V0Q29va2llID0gZ2V0Q29va2llO1xuXG5mdW5jdGlvbiBnZXRFeHBpcmVzVGltZSAob3B0aW9ucykge1xuICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gIHZhciBkYXRlU3RyID0gJyc7XG4gIGlmICgnc2Vzc2lvbicgPT09IG9wdGlvbnMuZXhwaXJlcykge1xuICB9IGVsc2UgaWYgKG9wdGlvbnMuZXhwaXJlcyAmJiAoJ251bWJlcicgPT09IHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgfHwgb3B0aW9ucy5leHBpcmVzLnRvVVRDU3RyaW5nKSkge1xuICAgIC8vIG9wdGlvbnMuZXhwaXJlc+WkqeaVsFxuICAgIGlmICgnbnVtYmVyJyA9PT0gdHlwZW9mIG9wdGlvbnMuZXhwaXJlcykge1xuICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgMjQgKiBvcHRpb25zLmV4cGlyZXMgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGUgPSBvcHRpb25zLmV4cGlyZXM7XG4gICAgfVxuICAgIGRhdGVTdHIgPSAnZXhwaXJlcz0nICsgZGF0ZS50b1VUQ1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIC8vIDIw5bm06L+H5pyf5pe26Ze0XG4gICAgdmFyIHllYXJzID0gMjA7XG4gICAgaWYodXRpbEFycmF5LmluZGV4b2YoWyd2LnlvdWt1LmNvbScsJ3d3dy55b3VrdS5jb20nLCdwbGF5ZXIueW91a3UuY29tJ10sbG9jYXRpb24uaG9zdG5hbWUpPi0xKXtcbiAgICAgIC8vIOS8mOmFt+S4muWKoeeJueauiu+8jOWPquiDvTHlubTmnInmlYjmnJ9cbiAgICAgIHllYXJzID0gMTtcbiAgICB9XG4gICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgeWVhcnMgKiAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICBkYXRlU3RyID0gJ2V4cGlyZXM9JyArIGRhdGUudG9VVENTdHJpbmcoKTtcbiAgfVxuICByZXR1cm4gZGF0ZVN0cjtcbn1cblxuZnVuY3Rpb24gdHJ5U2V0Q29va2llKG5hbWUsIHZhbCwgb3B0aW9ucykge1xuICBpZiAoIWRvY3VtZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICB2YWwgKz0gJzsnICsgKG9wdGlvbnMuZXhwaXJlcyB8fCBnZXRFeHBpcmVzVGltZShvcHRpb25zKSk7XG4gIC8vIHd3dy50YW9iYW8uY29tIC0+IHRhb2Jhby5jb21cbiAgdmFsICs9ICc7IHBhdGg9JyArIChvcHRpb25zLnBhdGggPyBvcHRpb25zLnBhdGggOiAnLycpO1xuICB2YWwgKz0gJzsgZG9tYWluPScgKyBvcHRpb25zLmRvbWFpbjtcblxuICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz0nICsgdmFsO1xuXG4gIHZhciBjaHJvbWVWZXJzaW9uID0gMDtcbiAgdHJ5IHtcbiAgICB2YXIgY2hyb21lSW5mb3MgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcXC9cXGQvKTtcbiAgICBpZiAoY2hyb21lSW5mb3MgJiYgY2hyb21lSW5mb3NbMF0pIHtcbiAgICAgIGNocm9tZVZlcnNpb24gPSBjaHJvbWVJbmZvc1swXS5zcGxpdCgnLycpWzFdO1xuICAgICAgaWYgKGNocm9tZVZlcnNpb24pIHtcbiAgICAgICAgY2hyb21lVmVyc2lvbiA9IHBhcnNlSW50KGNocm9tZVZlcnNpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge31cblxuICBpZiAob3B0aW9ucy5TYW1lU2l0ZSAmJiBjaHJvbWVWZXJzaW9uID49IDgpIHtcbiAgICB2YWwgKz0gJzsgU2FtZVNpdGU9JyArIG9wdGlvbnMuU2FtZVNpdGU7XG4gICAgdmFsICs9ICc7IFNlY3VyZSc7XG4gICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9JyArIHZhbDtcbiAgfVxuICByZXR1cm4gZ2V0Q29va2llKG5hbWUpO1xufTtcbmV4cG9ydHMudHJ5U2V0Q29va2llID0gdHJ5U2V0Q29va2llO1xuXG4vKipcbiAqIEBwYXJhbXMge1N0cmluZ30gbmFtZSBjb29raWVLZXlcbiAqIEBwYXJhbXMge1N0cmluZ3xOdW1iZXJ9IHZhbCBjb29raWVWYWx1ZVxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRpb25zIHtcbiAqICAgZXhwaXJlc1xuICogICBkb21haW5cbiAqICAgcGF0aFxuICogfVxuICovXG5mdW5jdGlvbiBzZXRDb29raWUobmFtZSwgdmFsLCBvcHRpb25zKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZG9tYWluKSB7XG4gICAgICB0cnlTZXRDb29raWUobmFtZSwgdmFsLCBvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGRvbWFpbnMgPSB0bGQuZ2V0RG9tYWlucygpO1xuICAgICAgdmFyIGkgPSAwO1xuICAgICAgd2hpbGUgKGkgPCBkb21haW5zLmxlbmd0aCkge1xuICAgICAgICBvcHRpb25zLmRvbWFpbiA9IGRvbWFpbnNbaV07XG4gICAgICAgIGlmICghdHJ5U2V0Q29va2llKG5hbWUsIHZhbCwgb3B0aW9ucykpIHtcbiAgICAgICAgICBpKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaSA9IGRvbWFpbnMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7fVxufTtcblxuZXhwb3J0cy5zZXRDb29raWUgPSBzZXRDb29raWU7XG5cbnZhciBrZXlzID0gWyd0cmFja25pY2snLCAndGh3JywgJ2NuYSddO1xuXG5leHBvcnRzLmdldERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBkYXRhID0ge307XG4gIGVhY2goa2V5cywgZnVuY3Rpb24gKGspIHtcbiAgICBkYXRhW2tdID0gZ2V0Q29va2llKGspO1xuICB9KTtcblxuICBpZiAobG9jYXRpb24pIHtcbiAgICB2YXIgaG9zdG5hbWUgPSBsb2NhdGlvbi5ob3N0bmFtZTtcbiAgICAvLyBUT0RPIOW+heWtkOeXleacjeWKoeerr+WunueOsOiHquWKqOS7jmh0dHDlpLTph4zlj5ZjbmF1aemAu+i+keWQjuaKiui/meautemAu+i+keW5suaOie+8gVxuICAgIC8vIDIwMTMtMDUtMDYg5LiA5ZW46ZyA5rGC77yM5LuF5ZyoIHRhbnguY29tIOaIliAqLnRhbnguY29tIOmhtemdouWPliBjbmF1aSDov5nkuKogY29va2llXG4gICAgZGF0YS5jbmF1aSA9IC9cXGJ0YW54XFwuY29tJC8udGVzdChob3N0bmFtZSkgPyBnZXRDb29raWUoJ2NuYXVpJykgOiAnJztcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufTtcblxuLy8g6Ieq5a6a5LmJY29va2ll6YeH6ZuGXG4vLyBodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL2RvY3Mva3ZobWJnXG4vLyAyMDE4LzMvMTJcbi8vIOS4jeWGjemHh+mbhl9hX2RfYe+8jOmHh+mbhmhuZ++8jOW5tuS/ruaUueS4ul9obmdcbi8v6K+m6KeB77yaaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vYWxpbG9nL2tiL2lzc3Vlcy8yMjFcbmV4cG9ydHMuZ2V0SG5nID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGdldENvb2tpZSgnaG5nJykgfHwgJycpO1xufTtcblxuZXhwb3J0cy5nZXRDb29raWVDbmEgPSBmdW5jdGlvbiAobmFtZSkge1xuICByZXR1cm4gZ2V0Q29va2llKG5hbWUpIHx8IGdldENvb2tpZSgnXycgKyBuYW1lKTtcbn07XG5leHBvcnRzLnNldENvb2tpZUNuYSA9IGZ1bmN0aW9uIChuYW1lLCB2YWwsIG9wdGlvbnMpIHtcbiAgdmFyIGRvbWFpbnMgPSB0bGQuZ2V0RG9tYWlucygpO1xuICB2YXIgaSA9IDA7XG4gIHdoaWxlIChpIDwgZG9tYWlucy5sZW5ndGgpIHtcbiAgICBvcHRpb25zLmRvbWFpbiA9IGRvbWFpbnNbaV07XG4gICAgaWYgKCF0cnlTZXRDb29raWUobmFtZSwgdmFsLCBvcHRpb25zKSkge1xuICAgICAgaWYgKGkgPT09IGRvbWFpbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB2YWwgKyAnOycgKyBnZXRFeHBpcmVzVGltZShvcHRpb25zKTtcbiAgICAgICAgdmFsdWUgKz0gJzsgcGF0aD0vJztcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gJ18nICsgbmFtZSArICc9JyArIHZhbHVlO1xuICAgICAgfVxuICAgICAgaSsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBpID0gZG9tYWlucy5sZW5ndGg7XG4gICAgfVxuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvY29va2llLmpzXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIEBhdXRob3Igaml6aGEud3lqXG4gKiBAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqXG4gKiBUTEQgPSBUb3AgTGV2ZWwgRG9tYWluXG4gKlxuICogYXBsdXMg5YaZIGNvb2tpZSDml7bvvIzpgJrluLjopoHmsYLlhpnliLDmoLnln5/vvIzmr5TlpoIgcGFpbWFpLnRhb2Jhby5jb20g55qEIGNvb2tpZSDopoHlhpnliLAgdGFvYmFvLmNvbSDln5/kuIvvvIxcbiAqIOS9huaYr+acieS6m+WVhuWutuermeeCuee7keWumuS6huiHquWumuS5ieWfn+WQje+8jOavlOWmgiBodHRwOi8vaHVhc2hlbmdzaGlqaS5jb20uY24vIO+8jOWmguaenOWPquaYr+eugOWNleWcsOWPluWfn+WQjeeahOacgOWQjuS4pOS9je+8jFxuICog5bCx5Lya5Y+W5YiwIGNvbS5jbu+8jOaXoOazleato+W4uOiuvue9riBjb29raWXvvIzmiYDku6XpnIDopoHov5nkuKrlupNcbiAqIG1vZGlmeSBieSBA6LCL5aOrIGluIDIwMTctMTAtMjjml6XvvIzlj5bmtojplb/ln5/lkI3lkI7nvIDnmb3lkI3ljZXvvIzku6Xop6PlhrNsYXphZGHnrYnmlrDmjqXlhaXkuJrliqHpl67pophcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuZ2V0RG9tYWlucyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdG9wcyA9IFtdO1xuICB0cnkge1xuICAgIHZhciBmdWxsX2RvbWFpbiA9IGxvY2F0aW9uLmhvc3RuYW1lO1xuICAgIHZhciBhID0gZnVsbF9kb21haW4uc3BsaXQoJy4nKTtcbiAgICB2YXIgaSA9IDI7XG4gICAgd2hpbGUoaSA8PSBhLmxlbmd0aCkge1xuICAgICAgdG9wcy5wdXNoKGEuc2xpY2UoYS5sZW5ndGggLSBpKS5qb2luKCcuJykpO1xuICAgICAgaSsrO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge31cbiAgcmV0dXJuIHRvcHM7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdGxkLmpzXG4vLyBtb2R1bGUgaWQgPSA1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pWw57uE5bel5YW3XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBJRTjkuI3mlK/mjIHmlbDnu4Tljp/nlJ/nmoRpbmRleE9m77yM5pWF6Ieq6KGM5a6e546w5LiA5LiqaW5kZXhvZlxuICogQHBhcmFtIFtBcnJheV0gYXJyXG4gKiBAcGFyYW0gW09iamVjdF0gaXRlbVxuICogQHJldHVybiBbTnVtYmVyXSBpbmRleFxuICovXG5leHBvcnRzLmluZGV4b2YgPSBmdW5jdGlvbihhcnIsIGl0ZW0pIHtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIHRyeSB7XG4gICAgaW5kZXggPSBhcnIuaW5kZXhPZihpdGVtKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXJyLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAoYXJyW2pdID09PSBpdGVtKSB7XG4gICAgICAgIGluZGV4ID0gajtcbiAgICAgIH1cbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG59O1xuXG5leHBvcnRzLml0ZW1NYXRjaCA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuICB2YXIgbWF0Y2hlZCA9IGZhbHNlO1xuICB0cnkge1xuICAgIGlmICghdGhpcy5pc0FycmF5KGFycikpIHtcbiAgICAgIHJldHVybiBtYXRjaGVkO1xuICAgIH1cbiAgICBtYXRjaGVkID0gYXJyLnNvbWUoZnVuY3Rpb24ocykge1xuICAgICAgcmV0dXJuIChzICYmIHMubGVuZ3RoID4gMCkgJiYgaXRlbS5pbmRleE9mKHMpICE9PSAtMTtcbiAgICB9KTtcbiAgfSBjYXRjaChlKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChpdGVtLmluZGV4T2YoYXJyW2pdKSAhPT0gLTEpIHtcbiAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbWF0Y2hlZDtcbn07XG5cbmV4cG9ydHMuaXNBcnJheSA9IGZ1bmN0aW9uIChvKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIC9BcnJheS8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykpO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEFycmF5LmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3V0aWwvZGF0ZVV0aWwuanNcbiAqIOaXpeacn+W4ruWKqeexu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHplcm9GaWxsKG51bWJlciwgdGFyZ2V0TGVuZ3RoLCBmb3JjZVNpZ24pIHtcbiAgdmFyIGFic051bWJlciA9ICcnICsgTWF0aC5hYnMobnVtYmVyKSxcbiAgICB6ZXJvc1RvRmlsbCA9IHRhcmdldExlbmd0aCAtIGFic051bWJlci5sZW5ndGgsXG4gICAgc2lnbiA9IG51bWJlciA+PSAwO1xuICByZXR1cm4gKHNpZ24gPyAoZm9yY2VTaWduID8gJysnOiAnJykgOiAnLScpICsgTWF0aC5wb3coMTAsIE1hdGgubWF4KDAsIHplcm9zVG9GaWxsKSkudG9TdHJpbmcoKS5zdWJzdHIoMSkgKyBhYnNOdW1iZXI7XG59O1xuLyoqXG4gKiDmoLnmja7moLzlvI/ov5Tlm57ml6XmnJ9cbiAqIEBwYXJhbXMgW2Zvcm1hdF0gXCItXCIgKDIwMTgtMDEtMDEpIHwgXCIvXCIgKDIwMTgvMDEvMDEpXG4gKi9cbmV4cG9ydHMuZ2V0Rm9ybWF0RGF0ZSA9IGZ1bmN0aW9uKGZvcm1hdCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIGQuZ2V0RnVsbFllYXIoKSxcbiAgICAgIHplcm9GaWxsKGQuZ2V0TW9udGgoKSArIDEsIDIsIDApLFxuICAgICAgemVyb0ZpbGwoZC5nZXREYXRlKCksIDIsIDApXG4gICAgXS5qb2luKGZvcm1hdCB8fCAnJyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9kYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxEYXRhID0gcmVxdWlyZSgnLi91dGlsRGF0YScpO1xuXG4vLyDku4XpmZDlvLnlhoXvvJvlsI/nsbPnpoHnlKhlZy5qc+W6lOWvueetlueVpe+8muS9v+eUqOWKqOaAgeWQjue8gOWQjVxuLy8g5ZCO57yA5ZCN55Sf5oiQ5pa55rOVOiDlvZPliY3ml7bpl7TmiLPovawxNui/m+WItu+8jOWPluWQjjjkvY3vvIxcbi8vIGZ1bmN0aW9uIGV0YWdVcmxTdWZmaXgoZXRhZ1VybCkge1xuLy8gICB2YXIgZHluYW1pY1VybCA9IGV0YWdVcmw7XG4vLyAgIHRyeSB7XG4vLyAgICAgaWYoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4vLyAgICAgICB0cnkge1xuLy8gICAgICAgICB2YXIgdGltZVN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4vLyAgICAgICAgIHZhciBkeW5hbWljU3VmZml4ID0gdGltZVN0YW1wLnRvU3RyaW5nKDE2KS5zbGljZSgtOCk7XG4vLyAgICAgICAgIHdoaWxlKGR5bmFtaWNTdWZmaXgubGVuZ3RoIDwgOCkge1xuLy8gICAgICAgICAgIGR5bmFtaWNTdWZmaXggPSBkeW5hbWljU3VmZml4ICsgJ2YnO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGR5bmFtaWNVcmwgPSBldGFnVXJsLnJlcGxhY2UoL2VnLmpzLywgZHluYW1pY1N1ZmZpeCArICcuanMnKTtcbi8vICAgICAgIH0gY2F0Y2goZSkge1xuLy8gICAgICAgfVxuLy8gICAgICAgcmV0dXJuIGR5bmFtaWNVcmw7XG4vLyAgICAgfVxuLy8gICB9IGNhdGNoKGUpIHtcblxuLy8gICB9XG4vLyAgIHJldHVybiBkeW5hbWljVXJsO1xuLy8gfVxuXG5leHBvcnRzLmdldFVybCA9IGZ1bmN0aW9uIChldGFnKSB7XG4gIHZhciB1cmwgPSB1dGlsRGF0YS5nZXRVcmwoZXRhZyAmJiBldGFnLmVnVXJsKTtcbiAgLy8gdXJsID0gZXRhZ1VybFN1ZmZpeCh1cmwpO1xuICAvLyDlpoLmnpxlZ1VybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuICBpZiAodXJsLmluZGV4T2YoJ2h0dHAnKSAhPT0gMCkge1xuICAgIHZhciBwcm90b2NhbCA9ICdodHRwczonO1xuICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuICAgIH1cbiAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgfVxuICByZXR1cm4gdXJsO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRXRhZy5qc1xuLy8gbW9kdWxlIGlkID0gNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsQXR0cmlidXRlID0gcmVxdWlyZSgnLi91dGlsQXR0cmlidXRlJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxudmFyIF9oZWFkX25vZGU7XG52YXIgX2N1cnJlbnROb2RlO1xuXG5mdW5jdGlvbiBnZXRDdXJyZW50Tm9kZSAoKSB7XG4gIGlmICghX2N1cnJlbnROb2RlKSB7XG4gICAgX2N1cnJlbnROb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JlYWNvbi1hcGx1cycpIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0Yi1iZWFjb24tYXBsdXMnKTtcbiAgfVxuICByZXR1cm4gX2N1cnJlbnROb2RlO1xufVxuZXhwb3J0cy5nZXRDdXJyZW50Tm9kZSA9IGdldEN1cnJlbnROb2RlO1xuXG4vKipcbiAqIEFwbHVz5pSv5oyB6YeH6ZuGQ1NQ6Kej5Yaz5pa55qGIXG4gKiBmcm9tIOS6keadsCAgMjAxOC0xMi0xNyAgaHR0cHM6Ly9hb25lLmFsaWJhYmEtaW5jLmNvbS9yZXEvMTgyNDExNTQ/ZnJvbT1hayZmcm9tPWFrJlxuICovXG5mdW5jdGlvbiBzZXROb25jZSAobm9kZSkge1xuICB2YXIgY3VycmVudF9ub2RlID0gZ2V0Q3VycmVudE5vZGUoKTtcbiAgdmFyIG5vbmNlID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShjdXJyZW50X25vZGUsICdjc3B4Jyk7XG4gIGlmIChub2RlICYmIG5vbmNlKSB7XG4gICAgbm9kZS5ub25jZSA9IG5vbmNlO1xuICB9XG59XG5cbi8qKlxuICog5Zyo5b2T5YmN6aG16Z2i5re75Yqg5LiA5LiqIGpzXG4gKiBAcGFyYW0gc3JjXG4gKiBAcGFyYW0gW2h0dHBzX3NyY11cbiAqL1xuZXhwb3J0cy5hZGRTY3JpcHQgPSBmdW5jdGlvbiAoc3JjLCBodHRwc19zcmMsIGlkKSB7XG4gIHZhciBzID0gJ3NjcmlwdCc7XG4gIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChzKTtcbiAgdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gIHQuYXN5bmMgPSB0cnVlO1xuICB2YXIgY3VycmVudF9ub2RlID0gZ2V0Q3VycmVudE5vZGUoKTtcbiAgdmFyIGhhc0Nyb3NzT3JpZ2luID0gY3VycmVudF9ub2RlICYmIGN1cnJlbnRfbm9kZS5oYXNBdHRyaWJ1dGUoJ2Nyb3Nzb3JpZ2luJyk7XG4gIGlmIChoYXNDcm9zc09yaWdpbikge1xuICAgIHQuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcbiAgfVxuXG4gIHZhciB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyA9PT0gbG9jYXRpb24ucHJvdG9jb2wgPyAoaHR0cHNfc3JjIHx8IHNyYykgOiBzcmM7XG4gIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuICAgIHVybCA9IGFwbHVzU3RhdGljLkhUVFBTICsgdXJsO1xuICB9XG4gIHQuc3JjID0gdXJsO1xuICBpZiAoaWQpIHtcbiAgICB0LmlkID0gaWQ7XG4gIH1cbiAgc2V0Tm9uY2UodCk7XG4gIHZhciBtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF07XG4gIF9oZWFkX25vZGUgPSBfaGVhZF9ub2RlIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gIGlmIChtKSB7XG4gICAgbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0LCBtKTtcbiAgfSBlbHNlIGlmIChfaGVhZF9ub2RlKSB7XG4gICAgX2hlYWRfbm9kZS5hcHBlbmRDaGlsZCh0KTtcbiAgfVxufTtcblxuLyoqXG4gKiDlnKjlvZPliY3pobXpnaLmt7vliqDkuIDkuKoganPvvIzlubbmiafooYzlm57osINcbiAqIEBwYXJhbSBzcmNcbiAqIEBwYXJhbSBbaHR0cHNfc3JjXVxuICovXG5leHBvcnRzLmxvYWRTY3JpcHQgPSBmdW5jdGlvbih1cmwsIGNhbGxiYWNrKSB7XG4gIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIF9oZWFkX25vZGUgPSBfaGVhZF9ub2RlIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gIG5vZGUuYXN5bmMgPSB0cnVlO1xuXG4gIGlmIChcIm9ubG9hZFwiIGluIG5vZGUpIHtcbiAgICBub2RlLm9ubG9hZCA9IG9ubG9hZDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgb25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoL2xvYWRlZHxjb21wbGV0ZS8udGVzdChub2RlLnJlYWR5U3RhdGUpKSB7XG4gICAgICAgIG9ubG9hZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgbm9kZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBvbnJlYWR5c3RhdGVjaGFuZ2U7XG5cbiAgICAvLyDkuIDlvIDlp4vkuZ/liKTmlq3kuIDmrKHnirbmgIFcbiAgICBvbnJlYWR5c3RhdGVjaGFuZ2UoKTtcbiAgfVxuXG4gIG5vZGUub25lcnJvciA9IGZ1bmN0aW9uKGUpIHtcbiAgICBvbmxvYWQoZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gb25sb2FkKGVycm9yKSB7XG4gICAgbm9kZS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBub2RlLm9ubG9hZCA9IG5vZGUub25lcnJvciA9IG51bGw7XG4gICAgbm9kZSA9IG51bGw7XG5cbiAgICBjYWxsYmFjayhlcnJvcik7XG4gIH1cblxuICBub2RlLnNyYyA9IHVybDtcbiAgc2V0Tm9uY2Uobm9kZSk7XG4gIF9oZWFkX25vZGUuYXBwZW5kQ2hpbGQobm9kZSk7ICBcbn07XG5cbi8qKlxuICog5Yik5pat5piv5ZCm5pSv5oyBdG91Y2jkuovku7ZcbiAqIEByZXR1cm4gW0Jvb2xlYW5dXG4gKi9cbmV4cG9ydHMuaXNUb3VjaCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gJ29udG91Y2hlbmQnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbERvbS5qc1xuLy8gbW9kdWxlIGlkID0gNThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGVuX3RvX3NlbmQuanNcbiAqXG4gKiAgIOS9nOeUqO+8miDkvZXml7bmiafooYxzZW5kcHbmj5Lku7ZcbiAqICAgZm46IGdldE1ldGFJbmZvIOe7p+aJv+iHs0Jhc2VcbiAqICAgZm46IHJ1biAo5o+S5Lu25qCH5YeG55qE5omn6KGM5YWl5Y+jKVxuICogICBhcGx1cy13YWl0aW5nPVwiMVwiOiDnrYnlvoU256eS5ZCO5bCd6K+V5Y+R6YCBUFbml6Xlv5c7XG4gKiAgIGFwbHVzLXdhaXRpbmc9XCJNQU5cIjog5LiN6Ieq5Yqo5Y+R6YCBUFbml6Xlv5c7XG4gKiAgIGFwbHVzLXdhaXRpbmc9XCJuXCI6IOWFtuS4rW7kuLrlpKfkuo4x55qE5q2j5pW05pWwLCBhcGx1c+WcqOetieW+hW7mr6vnp5LkuYvlkI7lsJ3or5Xlj5HpgIFQVuaXpeW/lztcbiAqXG4gKiAgIGRlcHPvvJog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPlm1ldGFfaW5mb1xuICAgICAqIFRPRE8g6Iul5LuK5ZCO5pyJ5Yqo5oCB5L+u5pS5bWV0YV9pbmZv55qE6ZyA5rGC77yMXG4gICAgICog5q2k5aSE6ZyA6KaB5Yqo5oCB5LuOIG1ldGFJbmZv5qih5Z2X5Lit5Y676LCD55SoZ2V0SW5mb+aWueazleadpeiOt+WPluebuOWFs+S/oeaBr++8jOi/meagt+WBmueahOWdj+WkhOaYr+a2iOiAl+aAp+iDvVxuICAgICAqL1xuICAgIGdldE1ldGFJbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvOyAvLyB8fCBtZXRhSW5mby5nZXRJbmZvKCk7XG4gICAgICByZXR1cm4gbWV0YV9pbmZvO1xuICAgIH0sXG5cbiAgICBnZXRBcGx1c1dhaXRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1ldGFfaW5mbyA9IHRoaXMuZ2V0TWV0YUluZm8oKSB8fCB7fTtcbiAgICAgIHJldHVybiBtZXRhX2luZm9bJ2FwbHVzLXdhaXRpbmcnXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+j77yM6YWN572u5LqGYXBsdXNXYWl0aW5nIOW5tuS4lCDmmK9hcGx1c+iHquWKqOaJk+eCueaJjei1sOi/meautemAu+i+kVxuICAgICAqIDxtZXRhIG5hbWU9XCJhcGx1cy13YWl0aW5nXCIgY29udGVudD1cInh4eFwiIC8+XG4gICAgICogICB4eHg6ICdNQU4nIC0g5LiN5Y+R6YCBcHbnmoTmoIfor4ZcbiAgICAgKiAgIHh4eDogJzEnIC0g5bCd6K+V562J5b6FNuenkuWQjuWPkXB2XG4gICAgICpcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqXG4gICAgICogQHJldHVybiBcImRvbmVcIijnu4jmraLkuK3pl7Tku7bmiafooYwpIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbihzdGF0ZSwgY2IpIHtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgdmFyIGFwbHVzV2FpdGluZyA9IHRoaXMuZ2V0QXBsdXNXYWl0aW5nKCk7XG4gICAgICBpZiAoYXBsdXNXYWl0aW5nICYmIGNvbmZpZy5pc19hdXRvKSB7XG4gICAgICAgIGFwbHVzV2FpdGluZyA9IHRoaXMuZ2V0QXBsdXNXYWl0aW5nKCkgKyAnJztcbiAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYgPSB7XG4gICAgICAgICAgYXBsdXNXYWl0aW5nOiBhcGx1c1dhaXRpbmdcbiAgICAgICAgfTtcbiAgICAgICAgc3dpdGNoKGFwbHVzV2FpdGluZykge1xuICAgICAgICBjYXNlIGFwbHVzU3RhdGljLl9VU0VSX0lEOlxuICAgICAgICBjYXNlIGFwbHVzU3RhdGljLl9BTk9OWV9JRDpcbiAgICAgICAgY2FzZSAnTUFOJzpcbiAgICAgICAgICByZXR1cm4gJ2RvbmUnO1xuICAgICAgICBjYXNlICcxJzpcbiAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgfSwgNjAwMCk7XG4gICAgICAgICAgcmV0dXJuIDYwMDA7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdmFyIG4gPSBhcGx1c1dhaXRpbmcgKiAxO1xuICAgICAgICAgIGlmICgobiArICcnKSAhPT0gJ05hTicpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2LmlzV2FpdCA9IHRydWU7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9LCBuKTtcbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hlbl90b19zZW5kcHYuanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hlcmVfdG9fc2VuZC5qc1xuICpcbiAqICAg5L2c55So77yadW3pgJrpgZPkuIvvvIzmlLbpm4ZwduWPkemAgeWOu+WQkeS/oeaBr++8iOWfn+WQjeWPluWGs+S6jumFjee9ru+8iVxuICogICBmbjogcnVuICjmj5Lku7bmoIflh4bnmoTmiafooYzlhaXlj6MpXG4gKiAgIOaciemFjee9rui/meS4quWFpeWPo1xuICogICA8bWV0YSBuYW1lPVwiYXBsdXMtcmhvc3QtdlwiIGNvbnRlbnQ9XCJ4eHgueHh4LmNvbVwiPlxuICogICDml7bvvIxQVuaXpeW/l2hvc3TmlLnkuLrkvb/nlKhhcGx1cy1yaG9zdC12IOagh+etvuWGhWNvbnRlbnTlhoXlo7DmmI7nmoTlgLxcbiAqXG4gKiAgIGRlcHPvvJrml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6ZKw5pitIDxjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gdmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbFVBID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxVQScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cbnZhciBQT1NUID0gJ1BPU1QnO1xudmFyIEdFVCA9ICdHRVQnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIOiOt+WPlm1ldGFfaW5mb1xuICAgICAqIFRPRE8g6Iul5LuK5ZCO5pyJ5Yqo5oCB5L+u5pS5bWV0YV9pbmZv55qE6ZyA5rGC77yMXG4gICAgICog5q2k5aSE6ZyA6KaB5Yqo5oCB5LuOIG1ldGFJbmZv5qih5Z2X5Lit5Y676LCD55SoZ2V0SW5mb+aWueazleadpeiOt+WPluebuOWFs+S/oeaBr++8jOi/meagt+WBmueahOWdj+WkhOaYr+a2iOiAl+aAp+iDvVxuICAgICAqL1xuICAgIGdldE1ldGFJbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvOyAvLyB8fCBtZXRhSW5mby5nZXRJbmZvKCk7XG4gICAgICByZXR1cm4gbWV0YV9pbmZvO1xuICAgIH0sXG5cbiAgICBnZXRBcGx1c01ldGFCeUtleTogZnVuY3Rpb24oa2V5KSB7XG4gICAgICB2YXIgbWV0YV9pbmZvID0gdGhpcy5nZXRNZXRhSW5mbygpIHx8IHt9O1xuICAgICAgcmV0dXJuIG1ldGFfaW5mb1trZXldO1xuICAgIH0sXG5cbiAgICBnZXRSaG9zdDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1ldGFWYWx1ZSA9IHRoaXMuZ2V0QXBsdXNNZXRhQnlLZXkoJ2FwbHVzLXJob3N0LXYnKTtcbiAgICAgIHJldHVybiBtZXRhVmFsdWU7XG4gICAgfSxcblxuICAgIGdldEhqbGpIb3N0VXJsOiBmdW5jdGlvbiAocmhvc3QpIHtcbiAgICAgIHZhciBwcmVmaXggPSAvXlxcL1xcLy8udGVzdChyaG9zdCkgPyAnJyA6ICcvLyc7XG4gICAgICB2YXIgZW5kZml4ID0gJy93ZWJfbG9ncyc7XG4gICAgICB2YXIgdXJsID0gcHJlZml4ICsgcmhvc3QgKyBlbmRmaXg7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG5cbiAgICBnZXRQdkhvc3RVcmw6IGZ1bmN0aW9uIChyaG9zdCkge1xuICAgICAgdmFyIHByZWZpeCA9IC9eXFwvXFwvLy50ZXN0KHJob3N0KSA/ICcnIDogJy8vJztcbiAgICAgIHZhciBlbmRmaXggPSAvXFwvJC8udGVzdChyaG9zdCkgPyAnJyA6ICcvJztcblxuICAgICAgdmFyIGdpZiA9ICd2LmdpZic7XG4gICAgICBpZiAodXRpbFVBLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgZ2lmID0gJ20uZ2lmJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcmVmaXggKyByaG9zdCArIGVuZGZpeCArIGdpZjtcbiAgICB9LFxuXG4gICAgZ2V0SG9zdFVybDogZnVuY3Rpb24gKHJob3N0KSB7XG4gICAgICB2YXIgcHJlZml4ID0gL15cXC9cXC8vLnRlc3Qocmhvc3QpID8gJycgOiAnLy8nO1xuICAgICAgdmFyIGVuZGZpeCA9ICcvd2ViX2xvZ3MnO1xuICAgICAgdmFyIHVybCA9IHByZWZpeCArIHJob3N0ICsgZW5kZml4O1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9LFxuXG4gICAgZ2V0Q2hhbm5lbDogZnVuY3Rpb24gKGNoYW5uZWwpIHtcbiAgICAgIHZhciBhcGx1c0NoYW5uZWwgPSB0aGlzLmdldEFwbHVzTWV0YUJ5S2V5KCdhcGx1cy1jaGFubmVsJyk7XG4gICAgICB2YXIgY2hhbm5lbHMgPSBbJ1dTJywgJ1dTLU9OTFknLCBHRVQsIFBPU1RdO1xuXG4gICAgICB2YXIgcnM7XG4gICAgICBpZiAoY2hhbm5lbHMuaW5kZXhPZihjaGFubmVsKSA+IC0xKSB7XG4gICAgICAgIHJzID0gY2hhbm5lbDtcbiAgICAgIH1cbiAgICAgIGlmICghcnMgJiYgY2hhbm5lbHMuaW5kZXhPZihhcGx1c0NoYW5uZWwpID4gLTEpIHtcbiAgICAgICAgcnMgPSBhcGx1c0NoYW5uZWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gcnM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIGhqbGrlj5HpgIHliLDlk6rph4zljrtcbiAgICAgKiAxLiDlpoLmnpzmmK/ljZXlj5HvvIxoNeeahOWPkemAgeWOu+WQkemAu+i+keebtOaOpei3s+i/h1xuICAgICAqIDIuIHZhbGlkaXR5OlxuICAgICAqICAgPG1ldGEgbmFtZT1cImFwbHVzLXJob3N0LWdcIiBjb250ZW50PVwiZ20ubW1zdGF0LmNvbVwiIC8+XG4gICAgICogICDmnInlgLzkuJTlkIjms5XmiY3kvb/nlKjvvIzlkKbliJnnlKjpu5jorqTnmoRnbS5tbXN0YXQuY29tL3dnby5tbXN0YXQuY29tXG4gICAgICpcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTsgICAgICBcbiAgICAgIHZhciBpc19zaW5nbGUgPSAhIXRoaXMub3B0aW9ucy5jb250ZXh0LmlzX3NpbmdsZTtcbiAgICAgIGlmIChpc19zaW5nbGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHJlY29yZFR5cGUgPSB0aGlzLm9wdGlvbnMuY29uZmlnLnJlY29yZFR5cGU7XG4gICAgICB2YXIgcmhvc3QgPSB0aGlzLmdldFJob3N0KHJlY29yZFR5cGUpO1xuICAgICAgaWYgKCFyaG9zdCkge1xuICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgbXNnOiAnY3VycmVudCByZXF1ZXN0IGRvbWFpbiBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91ciBhcGx1cy1yaG9zdC12IHZhbHVlIGluc2lkZSBtZXRhaW5mbyEnXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gJ2RvbmUnO1xuICAgICAgfVxuXG4gICAgICB2YXIgdXJsO1xuICAgICAgaWYgKHJlY29yZFR5cGUgPT09ICdQVicgJiYgIWFwbHVzLl9oNV9zaGFyZV9lbmFibGUpIHtcbiAgICAgICAgdXJsID0gdGhpcy5nZXRQdkhvc3RVcmwocmhvc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXJsID0gdGhpcy5nZXRIamxqSG9zdFVybChyaG9zdCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgdmFyIG1ldGhvZCA9IHRoaXMuZ2V0Q2hhbm5lbChjb25maWcubWV0aG9kKSB8fCBQT1NUO1xuICAgICAgaWYgKG1ldGhvZCA9PT0gUE9TVCAmJiAoIW5hdmlnYXRvciB8fCAhbmF2aWdhdG9yLnNlbmRCZWFjb24pKSB7XG4gICAgICAgIG1ldGhvZCA9IEdFVDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlcmVfdG9fc2VuZC5tZXRob2QgPSBjb25maWcubWV0aG9kO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlcmVfdG9fc2VuZC51cmwgPSB1cmw7XG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hlcmVfdG9fc2VuZF93ZWJfY2xvdWRfdW0uanNcbi8vIG1vZHVsZSBpZCA9IDYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBVQeWIpOaWreebuOWFs+W3peWFt1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuaXNNb2JpbGUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIFVBID0gbmF2aWdhdG9yID8gbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICcnO1xuICB2YXIgaXNBbGlBcHAgPSAvQWxpQXBwfFl1bm9zfGN5Y2xvbmUvaS50ZXN0KFVBKTsgLy8g5LqRT1PmtY/op4jlmajlhoXmoLjkuLpjeWNsb25lXG4gIHZhciBpc0lPUyA9ICgvaVBob25lfGlQYWR8aVBvZC9pKS50ZXN0KFVBKTtcbiAgdmFyIGlzQW5kcm9pZCA9ICgvQW5kcm9pZC9pKS50ZXN0KFVBKTtcbiAgdmFyIGlzV2luZG93c1Bob25lID0gKC9XaW5kb3dzIFBob25lL2kpLnRlc3QoVUEpIHx8ICgvSUVNb2JpbGUvaSkudGVzdChVQSkgfHwgKC9XUERlc2t0b3AvaSkudGVzdChVQSk7XG4gIHZhciBpc0JsYWNrQmVycnkgPSAoL0JsYWNrQmVycnkvaSkudGVzdChVQSk7XG4gIHZhciBpc09wZXJhTW9iaWxlID0gKC9PcGVyYSBNaW5pL2kpLnRlc3QoVUEpO1xuICByZXR1cm4gaXNBbGlBcHAgfHwgaXNJT1MgfHwgaXNBbmRyb2lkIHx8IGlzV2luZG93c1Bob25lIHx8IGlzQmxhY2tCZXJyeSB8fCBpc09wZXJhTW9iaWxlO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsVUEuanNcbi8vIG1vZHVsZSBpZCA9IDYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hhdF90b19zZW5kLmpzXG4gKlxuICog5L2c55So77ya5pel5b+X5Y+R6YCB5Z+656GA5Y+C5pWw5pS26ZuG77yaXG4gKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuICogZGVwczog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGNvb2tpZSA9IHJlcXVpcmUoJ0B1dGlscy9jb29raWUnKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciBsb2dJZCA9IHJlcXVpcmUoJ0B1dGlscy9sb2dJZCcpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbFVBID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxVQScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsUGFyYW1zID0gcmVxdWlyZSgnLi91dGlsUGFyYW1zJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIGdldENvbW1vblBhcmFtczogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIGV0YWcgPSBjb250ZXh0LmV0YWcgfHwge307XG4gICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIC8vIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBwbGF0Zm9ybVR5cGUgPSB1dGlsVUEuaXNNb2JpbGUoKSA/ICdXQVAnIDogJ1BDJztcbiAgICAgIHZhciB1c2VySW5mbyA9IHtcbiAgICAgICAgX2Rldl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSxcbiAgICAgICAgX2Fub255X2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpLFxuICAgICAgICBfdXNlcl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpLFxuICAgICAgICBfdXNlcl9uaWNrOiBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpIHx8IGNvb2tpZS5nZXRDb29raWUoJ3RyYWNrbmljaycpLFxuICAgICAgICBfc2Vzc2lvbl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19zZXNzaW9uX2lkJyksXG4gICAgICB9O1xuXG4gICAgICB2YXIgdXJsID0gY29uZmlnLnBhZ2VVcmwgfHwgKGxvY2F0aW9uID8gbG9jYXRpb24uaHJlZiA6ICctJyk7XG4gICAgICB2YXIgdGl0bGUgPSBjb25maWcudGl0bGUgfHwgKGRvY3VtZW50ICYmIGRvY3VtZW50LnRpdGxlKTtcbiAgICAgIHZhciBjYWNoZSA9IChhcGx1cy5nbG9iYWxDb25maWcuaXNEZWNvZGVVcmwgPyAnRENfJyA6ICcnKSArIGxvZ0lkLmdldExvZ0lkKHVybCwgdGl0bGUpO1xuXG4gICAgICB2YXIgYXBwSWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwS2V5JykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcElkJyk7XG4gICAgICBpZiAoIWFwcElkKSB7XG4gICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgICAgICBtc2c6ICdwbGVhc2Ugc2V0IGFwcElkIGluIGFwbHVzIG1ldGFJbmZvIGJlZm9yZSBzZW5kUFYhJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHZhciBjb21tb25QYXJhbXMgPSB1dGlsRGFzaC5hc3NpZ24oe1xuICAgICAgICBhcHBJZDogYXBwSWQsXG4gICAgICAgIGNhY2hlOiBjYWNoZSwgLy8gbG9nSWQuZ2V0TG9nSWQodXJsLCB0aXRsZSksXG4gICAgICAgIGNuYTogZXRhZy5jbmEgfHwgY29va2llLmdldENvb2tpZUNuYSgnY25hJyksXG4gICAgICAgIGV0YWc6IGV0YWcsXG4gICAgICAgIHByZTogXyQucGFnZV9yZWZlcnJlciB8fCAnLScsIC8vIFRPRE9cbiAgICAgICAgc2RrX2luZm86IHtcbiAgICAgICAgICBqc3ZlcjogYXBsdXMuZ2xvYmFsQ29uZmlnLnNjcmlwdF9uYW1lLFxuICAgICAgICAgIGx2ZXI6IGFwbHVzLmdsb2JhbENvbmZpZy5sdmVyLFxuICAgICAgICAgIGN1c3RvbVNka0lkOiBhcGx1cy5nZXRNZXRhSW5mbygnY3VzdG9tU2RrSWQnKSB8fCAnJyxcbiAgICAgICAgICBwbGF0Zm9ybVR5cGU6IHBsYXRmb3JtVHlwZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICB9LFxuICAgICAgICB0cmFja2VyRXZlbnRDb2RlOiBjb25maWcudHJhY2tlckV2ZW50Q29kZSxcbiAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgY2xpZW50OiBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9LFxuICAgICAgICB0aW1lWm9uZTogdXRpbFBhcmFtcy5nZXRUaW1lWm9uZSgpLFxuICAgICAgICBnb2tleTogdXNlckluZm8sIC8vIHV0aWxEYXNoLmFzc2lnbihzcG1JbmZvLCB1c2VySW5mbyksXG4gICAgICAgIGdta2V5OiB1c2VyZGF0YS5nbWtleSB8fCAnJyxcbiAgICAgICAgbWV0aG9kOiB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZFxuICAgICAgfSwgdXNlckluZm8pO1xuICAgICAgcmV0dXJuIGNvbW1vblBhcmFtcztcbiAgICB9LFxuXG5cbiAgICBnZXRQdlBhcmFtczogZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdmFyIHRhcmdldFVybCA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQudXJsO1xuICAgICAgdmFyIGNvbW1vblBhcmFtcyA9IHRoaXMuZ2V0Q29tbW9uUGFyYW1zKCk7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmNvbmZpZy5pc19hdXRvKSB7XG4gICAgICAgIGNvbW1vblBhcmFtcy5zZGtfaW5mby5tYW5zbmRsb2cgPSAxO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdXRpbERhc2guYXNzaWduKGNvbW1vblBhcmFtcywge1xuICAgICAgICBldmVudF9jb2RlOiAnMjAwMScsXG4gICAgICAgIGxvZ3R5cGU6ICcxJyxcbiAgICAgICAgbG9na2V5OiB1dGlsVUEuaXNNb2JpbGUoKSA/ICcvbS5naWYnIDogJy92LmdpZicsXG4gICAgICAgIGV2ZW50X3RpbWVzdGFtcDogYXBsdXMuXyQuc2VuZF9wdl9jb3VudCA+IDAgPyBuZXcgRGF0ZSgpIDogYXBsdXMubG9nQ29uZmlnLnBhZ2VMb2FkVGltZSxcbiAgICAgICAgaXNfYXV0bzogdGhpcy5vcHRpb25zLmNvbmZpZy5pc19hdXRvXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgZ2V0SGpsalBhcmFtczogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB1c2VyZGF0YSA9IGMudXNlcmRhdGEgfHwge307XG4gICAgICB2YXIgaGpsalBhcmFtcyA9IHtcbiAgICAgICAgZXZlbnRfY29kZTogYXBsdXNTdGF0aWMuRVZFTlRfSURfTUFQW3VzZXJkYXRhLmdta2V5XSB8fCBhcGx1c1N0YXRpYy5PVEhFUixcbiAgICAgICAgbG9ndHlwZTogJzInLFxuICAgICAgICBsb2drZXk6IHVzZXJkYXRhLmxvZ2tleSxcbiAgICAgICAgZXZlbnRfdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAvLyBtYW5zbmRsb2c6ICcxJyxcbiAgICAgIH07XG4gICAgICByZXR1cm4gdXRpbERhc2guYXNzaWduKHRoaXMuZ2V0Q29tbW9uUGFyYW1zKCksIGhqbGpQYXJhbXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6NcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIDEuIGFwbHVz6buY6K6k6ZyA6KaB6YeH6ZuG55qE5Y+C5pWwOiBiYXNpY0xpc3RcbiAgICAgKiAyLiBiZWFjb27mianlsZXlj4LmlbA6IGV4cGFyYW1zXG4gICAgICogMy4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlrqLmiLfnq6/lj4LmlbA6IGV4dHJhTGlzdFxuICAgICAqIOS4remAlOWkhOeQhl8k5YWo5bGA5Y+Y6YePOiBwcm9jZXNzTG9kYXNoRG9sbGFyXG4gICAgICogNC4gbG9jYWxTdG9yYWdl5Lit5a2Y5YKo55qE5LiK5LiA6aG1c3Bt5L+h5oGvOiBzcG1hYnRlc3RcbiAgICAgKiDku6XkuIo06YOo5YiG5ou86KOF5oiQcHZkYXRhXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHt9O1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb25maWcucmVjb3JkVHlwZSA9PT0gJ1BWJykge1xuICAgICAgICBwYXJhbXMgPSB0aGlzLmdldFB2UGFyYW1zKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXMgPSB0aGlzLmdldEhqbGpQYXJhbXMoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gcGFyYW1zO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hhdF90b19zZW5kX3dlYl9jbG91ZC5qc1xuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIHB2aWRcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEhhc2ggPSByZXF1aXJlKCcuL3V0aWxIYXNoJyk7XG5cbnZhciBnZXRSYW5kb21JZCA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIC8qKlxuICAgKiDnlJ/miJDmnKzpobXnmoQgcHYgaWRcbiAgICogcHYgaWQg5Y+q6ZyA6KaB5b2T5YmN55So5oi35Lya6K+d5ZSv5LiA5Y2z5Y+v77yM6L+Z5YS/5L2/55So5LiA5LiqIDYg5L2N55qEIDE2IOi/m+WItuaVsOWtl1xuICAgKi9cbiAgdmFyIHJuZF9zdHJzID0gJyc7XG4gIHZhciBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XG4gIHZhciBoYW5kbGVkID0gZmFsc2U7XG4gIHZhciBjaGFyO1xuXG4gIC8qKlxuICAgKiDop6PlhrPpg6jliIYgc3BtIOiiqyBHRlcg5aKZ5LqG55qE5oOF5Ya177yM5aaCIDIyLmdsXG4gICAqIOaOkumZpCBwdmlkIOS7pSBnbCDlvIDlpLTnmoTmg4XlhrVcbiAgICovXG4gIGZ1bmN0aW9uIGhhbmRsZVBWSWQgKGNoYXJQb3MpIHtcbiAgICB2YXIgY2hhcnNXaXRob3V0RyA9ICcwMTIzNDU2Nzg5YWJjZGVmaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkhJSktMTU5PUFFSU1RVVldYWVonO1xuICAgIHZhciBjaGFyc1dpdGhvdXRMID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa21ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktNTk9QUVJTVFVWV1hZWic7XG5cbiAgICBpZiAoY2hhclBvcyA9PSAxKSB7XG4gICAgICByZXR1cm4gY2hhcnNXaXRob3V0Ry5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcbiAgICB9IGVsc2UgaWYgKGNoYXJQb3MgPT0gMikge1xuICAgICAgcmV0dXJuIGNoYXJzV2l0aG91dEwuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYwKSwgMSk7XG4gICAgfVxuICAgIHJldHVybiAnMCc7XG4gIH07XG5cbiAgd2hpbGUgKHJuZF9zdHJzLmxlbmd0aCA8IHNpemUpIHtcbiAgICBjaGFyID0gY2hhcnMuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYyKSwgMSk7XG4gICAgLy8g5aSE55CG6KKr5aKZ55qE5oOF5Ya177yM55uu5YmN5Y+q6ZKI5a+5Z2zlvIDlpLTnmoRcbiAgICBpZiAoIWhhbmRsZWQgJiYgcm5kX3N0cnMubGVuZ3RoIDw9IDIgJiYgKGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnZycgfHwgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJykpIHtcbiAgICAgIGlmIChybmRfc3Rycy5sZW5ndGggPT09IDAgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJykge1xuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkge1xuICAgICAgICAgIGNoYXIgPSBoYW5kbGVQVklkKDEpO1xuICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PSAxICYmIGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnbCcgJiYgcm5kX3N0cnMuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG4gICAgICAgIGNoYXIgPSBoYW5kbGVQVklkKDIpO1xuICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcm5kX3N0cnMgKz0gY2hhcjtcbiAgfVxuICByZXR1cm4gcm5kX3N0cnM7XG59O1xuXG5mdW5jdGlvbiBnZXRDaGFycyAoYXJncywgc2l6ZSwgZGVmYXVsdFZhbCkge1xuICBpZiAoYXJncykge1xuICAgIHJldHVybiB1dGlsSGFzaC5oYXNoKGVuY29kZVVSSUNvbXBvbmVudChhcmdzKSkuc3Vic3RyKDAsIHNpemUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkZWZhdWx0VmFsO1xuICB9XG59XG5cbmV4cG9ydHMuZ2V0TG9nSWQgPSBmdW5jdGlvbiAocGFnZVVybCwgbG9nTmFtZSkge1xuICB2YXIgcmFuZG9tOENoYXJzID0gZ2V0UmFuZG9tSWQoOCk7XG4gIHZhciByYW5kb200Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDQpO1xuICB2YXIgcmFuZG9tNkNoYXJzID0gcmFuZG9tOENoYXJzLnN1YnN0cigwLCA2KTtcbiAgcmV0dXJuIFtcbiAgICBnZXRDaGFycyhwYWdlVXJsLCA0LCByYW5kb200Q2hhcnMpLFxuICAgIGdldENoYXJzKGxvZ05hbWUsIDQsIHJhbmRvbTRDaGFycyksXG4gICAgcmFuZG9tNkNoYXJzXG4gIF0uam9pbignJyk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvbG9nSWQuanNcbi8vIG1vZHVsZSBpZCA9IDYzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIOagueaNruWvhumSpXPlr7nlrZfnrKbkuLJzdHLov5vooYzovazkuYlcbmV4cG9ydHMuaGFzaCA9IGZ1bmN0aW9uKHN0ciwgcykge1xuICB2YXIgZGVmX3YgPSAxMzE1NDIzOTExO1xuICB2YXIgaGFzaCA9IHMgfHwgZGVmX3YsIGksIGNoO1xuICBmb3IgKGkgPSBzdHIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBjaCA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGhhc2ggXj0gKChoYXNoIDw8IDUpICsgY2ggKyAoaGFzaCA+PiAyKSk7XG4gIH1cbiAgdmFyIHJzID0gKGhhc2ggJiAweDdGRkZGRkZGKS50b1N0cmluZygxNik7XG4gIHJldHVybiBycztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsSGFzaC5qc1xuLy8gbW9kdWxlIGlkID0gNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDov5Tlm55HTVTmoLzlvI/nmoTml7bljLrvvIzlpoLvvJpHTVQrMDU6NDUsIEdNVC0wNzowMCwgR01UKzA4OjAwXG4gKi9cbmV4cG9ydHMuZ2V0VGltZVpvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGltZVpvbmUgPSAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjA7XG4gIHZhciBfYW5kID0gJysnO1xuICBpZiAoX3RpbWVab25lIDwgMCkge1xuICAgIF9hbmQgPSAnLSc7XG4gIH1cbiAgdmFyIHpvbmUgPSBNYXRoLmFicyhwYXJzZUludChfdGltZVpvbmUpKTtcbiAgdmFyIHJlbWFpbmRlciA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkgLSBfdGltZVpvbmUpO1xuICB2YXIgcmVtYWluZGVyWm9uZSA9ICcwMCc7XG4gIGlmIChyZW1haW5kZXIgPiAwKSB7XG4gICAgcmVtYWluZGVyWm9uZSA9IDYwICogcmVtYWluZGVyO1xuICB9XG4gIHJldHVybiAnR01UJyArIF9hbmQgKyAoem9uZSA+IDkgPyB6b25lIDogKCcwJyArIHpvbmUpKSArICc6JyArIHJlbWFpbmRlclpvbmU7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3V0aWxQYXJhbXMuanNcbi8vIG1vZHVsZSBpZCA9IDY1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YS5qc1xuICpcbiAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsHB2ZGF0YeWQjumdou+8mnB2ZGF0YS5jb25jYXQodXNlcmRhdGEpXG4gKiAgZGVwczogd2hhdF90b19zZW5kcHZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcblxuICAgIC8qKlxuICAgICAqIOmHh+mbhuS4quaAp+WMluWPguaVsFxuICAgICAqXG4gICAgICogZ29rZXk6XG4gICAgICogICDov5nlnZfkuLrlr7nljoblj7J1c2VyZGF0YeS8oOmAkueahOWFvOWuueWBmuazle+8jFRPRE/vvJrmjqjliqjlupTnlKjmlrnlj5jmm7RcbiAgICAgKiAgIOW6lOeUqOaWueS8oOmAkueahGdva2V55qC85byP5bqU55So5pa56Ieq6KGM5Yaz5a6a77yMXG4gICAgICogICAgIOWmgiBnb2tleT1cImE9MSZiPTJcIiDmiJYge1wiYVwiOlt7XCJrZXlcIjoyMDE2MTIyNjE1NTAsXCJ2YWx1ZVwiOjAuMX0se1wia2V5XCI6MjAxNjEyMjYxNjAwLFwidmFsdWVcIjowLjV9LHtcImtleVwiOjIwMTYxMjI2MTYxMCxcInZhbHVlXCI6MX1dfVxuICAgICAqICAg6L+Z5Z2X6YC76L6R5piv6YCg5oiQZXh0ZW5kYXJnc+WGhemDqOWHuueOsOWkmuS4quaWnOadoOeahOWFg+WHtu+8ge+8ge+8gVxuICAgICAqIHBhZ2VfaWQ6XG4gICAgICogICDmnIlwYWdlX2lk5bCx5Zyoc3BtYuS4rea3u+WKoOWtkOWPguaVsFxuICAgICAqICAg5pegcGFnZV9pZOWwsea4hemZpHNwbWLkuK3nmoTlrZDlj4LmlbBcbiAgICAgKiBzcG1fY250XG4gICAgICogICDmm7TmlLnlroxzcG1i5L2N6L+Y6ZyA6KaB5pu05pawc3BtX2NudCBA6LCL5aOrIGluIDIwMTgtMDMtMjAgIOS7peWFjXRvVVTnmoRzcG0tY2505Lii5aSx5YiG5qG25Y+3XG4gICAgICog5Liq5oCn5YyW5Y+C5pWw77yaXG4gICAgICogICAxLiAoYXBsdXPmpI3lhaUpOiA8bWV0YSBuYW1lPVwiYXBsdXMtY3B2ZGF0YVwiIGNvbnRlbnQ9XCJKU09Oc3RyaW5nXCI+XG4gICAgICogICAyLiDmlrnms5XkvKDlhaU6IGFwbHVzLnNlbmRQVih7Q09ORklHfSwge1VTRVJEQVRFfSk7XG4gICAgICog5Y+N5L2c5byK55qE5paH5qGj5a696auYOiBfcHcsX3BoXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG4gICAgICovXG4gICAgZ2V0VXNlcmRhdGE6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBkID0ge307XG5cbiAgICAgIGlmIChjb25maWcgJiYgIWNvbmZpZy5pc19hdXRvKSB7XG4gICAgICAgIGlmIChjb25maWcuZ29rZXkpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGQgPSBmb3JtYXQucGFyYW0yb2JqKGNvbmZpZy5nb2tleSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLmdva2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZCA9IGNvbmZpZy5nb2tleTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGNvbWJvVXNlcmRhdGEgPSBmdW5jdGlvbihfZGF0YSkge1xuICAgICAgICBpZihpc0FycmF5KF9kYXRhKSl7XG4gICAgICAgICAgX2RhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgIGQgPSB1dGlsRGFzaC5hc3NpZ24oZCwgaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIGQgPSB1dGlsRGFzaC5hc3NpZ24oZCwgX2RhdGEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY29tYm9Vc2VyZGF0YShhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsZGF0YScpKTtcbiAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnKSk7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIGNvbWJvVXNlcmRhdGEodXNlcmRhdGEpO1xuXG4gICAgICByZXR1cm4gZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5aSE55CGXyTlhajlsYDlj5jph48gLS0tLS0tIDJcbiAgICAgKi9cbiAgICBwcm9jZXNzTG9kYXNoRG9sbGFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLnJlZmVycmVyKSB7XG4gICAgICAgIF8kLnBhZ2VfcmVmZXJyZXIgPSBjb25maWcucmVmZXJyZXI7XG4gICAgICB9XG4gICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5pu05pawcHJl77yI5Zyo6L+Z6YeM5YGa55qE5Y6f5Zug5piv77yMcHJl5Y+C5pWw5bGe5LqOYmFzaWPlj4LmlbDvvIzkvYbmmK91c2VyZGF0YeS4reWmguS8oOmAkuS6hnJlZmVycmVy77yM5Y+v5Lul6KaG55uWcHJl77yJXG4gICAgICovXG4gICAgdXBkYXRlUHJlOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgaWYgKF8kLnBhZ2VfcmVmZXJyZXIpIHtcbiAgICAgICAgZGF0YS5wcmUgPSAgXyQucGFnZV9yZWZlcnJlcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6NcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZCA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhO1xuICAgICAgdmFyIHVzZXJkYXRhID0gdXRpbERhc2guYXNzaWduKHRoaXMuZ2V0VXNlcmRhdGEoKSwgZC51c2VyZGF0YSB8fCB7fSk7XG4gICAgICB0aGlzLnByb2Nlc3NMb2Rhc2hEb2xsYXIoKTtcblxuICAgICAgZC5nb2tleSA9IHV0aWxEYXNoLmFzc2lnbihkLmdva2V5LCB1c2VyZGF0YSk7XG4gICAgICBkID0gdGhpcy51cGRhdGVQcmUoZCk7XG5cbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gZDtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LnVzZXJkYXRhID0gZC5nb2tleTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDY2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIC9BcnJheS8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykpO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2lzQXJyYXkuanNcbi8vIG1vZHVsZSBpZCA9IDY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YV93ZWIuanNcbiAqXG4gKiAg5o+S5Lu25L2c55So77ya5pS26ZuG5bqU55So5pa56Ieq5a6a5LmJcHblj4LmlbBcbiAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBwdmRhdGHlkI7pnaLvvJpwdmRhdGEuY29uY2F0KHVzZXJkYXRhKVxuICogIGRlcHM6IHdoYXRfdG9fc2VuZHB2XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxFeGluZm8gPSByZXF1aXJlKCdAdXRpbHMvdXRpbEV4aW5mbycpO1xudmFyIGdldEV4UGFyYW1zT2JqID0gcmVxdWlyZSgnLi4vZ2V0RXhwYXJhbXNPYmonKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ0B1dGlscy9hc3NpZ24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiDlhbzlrrnljoblj7LnmoRwYWdlX2lkXG4gICAgICovXG4gICAgZ2V0UGFnZUlkOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuICAgICAgcmV0dXJuIGNvbmZpZy5wYWdlX2lkIHx8IGNvbmZpZy5wYWdlaWQgfHwgY29uZmlnLnBhZ2VJZCB8fCB1c2VyZGF0YS5wYWdlX2lkO1xuICAgIH0sXG5cbiAgICByZXNldFNwbUI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgaWYgKCFhcGx1cy5zcG1BUEkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIHZhciBfc3BtID0gXyQuc3BtIHx8IHt9O1xuICAgICAgdmFyIHNwbWIgPSBfc3BtLmRhdGEuYjtcbiAgICAgIGlmIChzcG1iKSB7XG4gICAgICAgIHZhciBwYWdlX2lkID0gdGhpcy5nZXRQYWdlSWQoKTtcbiAgICAgICAgaWYgKHBhZ2VfaWQpIHtcbiAgICAgICAgICBzcG1iID0gc3BtYi5zcGxpdCgnLycpWzBdICsgJy8nICsgcGFnZV9pZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzcG1iID0gc3BtYi5zcGxpdCgnLycpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGFwbHVzLnNwbUFQSSAmJiBhcGx1cy5zcG1BUEkuc2V0QihzcG1iKTtcblxuICAgICAgICB2YXIgY250cyA9IF9zcG0uc3BtX2NudC5zcGxpdCgnLicpO1xuICAgICAgICBpZiAoY250cyAmJiBjbnRzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICBjbnRzWzFdID0gc3BtYjtcbiAgICAgICAgICBfc3BtLnNwbV9jbnQgPSBjbnRzLmpvaW4oJy4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0RXhQYXJhbXNJbmZvOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IHV0aWxFeGluZm8uZ2V0RXhQYXJhbXMoKTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmV4cGFyYW1zID0gZTtcbiAgICAgIHJldHVybiBnZXRFeFBhcmFtc09iaihlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5yZXNldFNwbUIoKTtcbiAgICAgIHZhciBnb2tleSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5O1xuICAgICAgZ29rZXkgPSBhc3NpZ24odGhpcy5nZXRFeFBhcmFtc0luZm8oKSwgZ29rZXkpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEuZ29rZXkgPSBnb2tleTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGFfd2ViLmpzXG4vLyBtb2R1bGUgaWQgPSA2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlYWNoID0gcmVxdWlyZSgnLi9lYWNoJyk7XG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnLi9mb3JtYXQnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJy4vdXRpbERhc2gnKTtcbnZhciB1dGlsRG9tID0gcmVxdWlyZSgnLi91dGlsRG9tJyk7XG52YXIgdXRpbEF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4vdXRpbEF0dHJpYnV0ZScpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJy4vdXRpbEFycmF5Jyk7XG52YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJy4vdXRpbExvZ2dlcicpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnLi9hcGx1c1N0YXRpYycpO1xuXG4vKipcbiAqIHBhcmFtIHRvIGFycmF5XG4gKiAyMDE2LTA4LTI0IOaUvuW8gO+8jOeUqOadpeWkhOeQhmV4cGFyYW1zIEDosIvlo6tcbiAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgYXJyYXkg5qC85byP77yM5aaC77yaXG4gKiBbW1wiYVwiLCBcIjFcIl0sIFtcImJcIiwgXCIyXCJdLCBbXCJjXCIsIFwiM1wiXV1cbiAqXG4gKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHBhcmFtMmFyciAocGFyYW1zKSB7XG4gIHZhciBhID0gcGFyYW1zLnNwbGl0KFwiJlwiKSxcbiAgICBpID0gMCwgbCA9IGEubGVuZ3RoLFxuICAgIGl0ZW0sXG4gICAgYXJyID0gW107XG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IGFbaV0uc3BsaXQoXCI9XCIpO1xuICAgIGFyci5wdXNoKFtpdGVtLnNoaWZ0KCksIGl0ZW0uam9pbihcIj1cIildKTtcbiAgfVxuXG4gIHJldHVybiBhcnI7XG59O1xuXG4vKipcbiAqIOWwhm1ldGHphY3nva7nmoRleHBhcmFtc+WQiOW5tuWIsGJlYWNvbui+k+WHuueahGV4cGFyYW1z5LiKXG4gKiBAcGFyYW1zIHtTdHJpbmd9IGJlYWNvbkV4cGFyYW1zXG4gKiBAcGFyYW1zIHtTdHJpbmd9IG1ldGFFeHBhcmFtc1xuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gZXhwYXJhbXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2VFeHBhcmFtcyAoYmVhY29uRXhwYXJhbXMsIG1ldGFFeHBhcmFtcykge1xuICB2YXIgYmV4cGFyYW1zID0gJ2FwbHVzJnNpZHg9YXBsdXNTaWRleCZja3g9YXBsdXNDa3gnO1xuICB2YXIgZGVmYXVsdEV4cGFyYW1zID0gYmVhY29uRXhwYXJhbXMgfHwgYmV4cGFyYW1zO1xuICB0cnkge1xuICAgIGlmIChtZXRhRXhwYXJhbXMpIHtcbiAgICAgIHZhciBtZXRhT2JqID0gZm9ybWF0LnBhcmFtMm9iaihtZXRhRXhwYXJhbXMpO1xuICAgICAgdmFyIGJsYWNrcyA9IFthcGx1c1N0YXRpYy5BUExVUywgJ2NuYScsIGFwbHVzU3RhdGljLlNQTV9DTlQsIGFwbHVzU3RhdGljLlNQTV9VUkwsIGFwbHVzU3RhdGljLlNQTV9QUkUsICdsb2d0eXBlJywgJ3ByZScsICd1aWRhcGx1cycsICdhc2lkJywgJ3NpZHgnLCAndHJpZCcsICdnb2tleSddO1xuICAgICAgZWFjaChibGFja3MsIGZ1bmN0aW9uKGspIHtcbiAgICAgICAgaWYgKG1ldGFPYmouaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7bXNnOiAnQ2FuIG5vdCBpbmplY3Qga2V5d29yZHM6ICcgKyBrfSk7XG4gICAgICAgICAgZGVsZXRlIG1ldGFPYmpba107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZGVsZXRlIG1ldGFPYmpbJyddOyAvLyDnqbrnmb1rZXnkuZ/np7vpmaTmjolcblxuICAgICAgdmFyIHRtcFBhcmFtID0gJyc7XG4gICAgICAvLyDmnIliZWFjb27phY3nva7nmoTmg4XlhrVcbiAgICAgIGlmIChiZWFjb25FeHBhcmFtcykge1xuICAgICAgICB2YXIgaW5kZXggPSBiZWFjb25FeHBhcmFtcy5tYXRjaCgvYXBsdXMmLykuaW5kZXg7XG4gICAgICAgIHZhciBiZWFjb25PYmogPSBpbmRleCA+IDAgPyBmb3JtYXQucGFyYW0yb2JqKGJlYWNvbkV4cGFyYW1zLnN1YnN0cmluZygwLCBpbmRleCkpIDoge307XG4gICAgICAgIGRlbGV0ZSBiZWFjb25PYmpbJyddO1xuICAgICAgICB0bXBQYXJhbSA9IGZvcm1hdC5vYmoycGFyYW0odXRpbERhc2guYXNzaWduKGJlYWNvbk9iaiwgbWV0YU9iaikpICsgJyYnICsgYmVhY29uRXhwYXJhbXMuc3Vic3RyaW5nKGluZGV4LCBiZWFjb25FeHBhcmFtcy5sZW5ndGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g5pegYmVhY29u6YWN572u55qE5oOF5Ya1XG4gICAgICAgIHRtcFBhcmFtID0gZm9ybWF0Lm9iajJwYXJhbShtZXRhT2JqKSArICcmJyArIGJleHBhcmFtcztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0bXBQYXJhbTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRlZmF1bHRFeHBhcmFtcztcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZGVmYXVsdEV4cGFyYW1zO1xuICB9XG59O1xuZXhwb3J0cy5tZXJnZUV4cGFyYW1zID0gbWVyZ2VFeHBhcmFtcztcblxuXG5mdW5jdGlvbiBnZXRFeFBhcmFtc0Zyb21NZXRhICgpIHtcbiAgdmFyIF8kID0gYXBsdXMgJiYgYXBsdXMuXyQgPyBhcGx1cy5fJCA6IHt9O1xuICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvIHx8IHt9O1xuICByZXR1cm4gbWV0YV9pbmZvWydhcGx1cy1leHBhcmFtcyddIHx8ICcnO1xufTtcblxuLy8gZXhwYXJhbXPlj4LmlbAtLS0tLS0gMlxuZnVuY3Rpb24gZ2V0RXhQYXJhbXMgKCkge1xuICB2YXIgY3VycmVudF9ub2RlID0gdXRpbERvbS5nZXRDdXJyZW50Tm9kZSgpO1xuICB2YXIgYl9leHBhcmFtcyA9IHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUoY3VycmVudF9ub2RlLCAnZXhwYXJhbXMnKTtcbiAgdmFyIGV4cGFyYW1zID0gbWVyZ2VFeHBhcmFtcyhiX2V4cGFyYW1zLCBnZXRFeFBhcmFtc0Zyb21NZXRhKCkpIHx8ICcnO1xuICByZXR1cm4gZXhwYXJhbXMgJiYgZXhwYXJhbXMucmVwbGFjZSgvJmFtcDsvZywgXCImXCIpLnJlcGxhY2UoL1xcYnVzZXIoaXxJKWQ9LywgXCJ1aWRhcGx1cz1cIik7XG59O1xuZXhwb3J0cy5nZXRFeFBhcmFtcyA9IGdldEV4UGFyYW1zO1xuXG4vKipcbiAqIOWHuuS6jua1gemHj+eahOiAg+iZke+8jGJlYWNvbui+k+WHuueahGV4cGFyYW1z5Y+q5Y+WIGV4cGFyYW1zX2tleV9uYW1lc++8iOingemFjee9ru+8iSDlhoXnmoTlh6DkuKrlrZfmrrVcbiAqIOiLpWV4cGFyYW1z5YaF5pyJdXNlcmlkIOaIluiAhSDlnKjlj5HpgIHnmoRQVumSn3VpZGFwbHVz5pyJ5YC8LCDliJnlnKjku6Tnrq3or7fmsYLnmoRnb2tleeWGheS5n+i/veWKoHVpZHBhbHVz5Y+C5pWwXG4gKiDoi6VleHBhcmFtc+WGheacieS8oOWFpXBjX2kvcHVfaSwg5YiZ5Zyo5Luk566t6K+35rGC55qEZ29rZXnlhoXkuZ/pu5jorqTov73liqBwY19pL3B1X2nlj4LmlbBcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IHJzXG4gKi9cbmV4cG9ydHMuZ2V0RXhwYXJhbXNJbmZvcyA9IGZ1bmN0aW9uKGV4cGFyYW1zX2tleV9uYW1lcywgbWV0YV9leGluZm8pIHtcbiAgdmFyIHJzID0ge307XG4gIHZhciBrZXlzID0gZXhwYXJhbXNfa2V5X25hbWVzIHx8IFsndWlkYXBsdXMnLCAncGNfaScsICdwdV9pJ107XG4gIHZhciB0bXBfaW5mbyA9IGdldEV4UGFyYW1zKCkgfHwgJyc7XG4gIHRtcF9pbmZvID0gdG1wX2luZm8ucmVwbGFjZSgvJmFwbHVzJi8sICcmJyk7XG4gIHZhciB0bXBfYXJyID0gcGFyYW0yYXJyKHRtcF9pbmZvKSB8fCBbXTtcbiAgXG4gIHZhciBjb25mID0gZnVuY3Rpb24oaykge1xuICAgIHJldHVybiB1dGlsQXJyYXkuaW5kZXhvZihrZXlzLCBrKSA+IC0xO1xuICB9OyAgXG4gIC8vIOWHuuS6jua1gemHj+eahOiAg+iZke+8jGJlYWNvbui+k+WHuueahGV4cGFyYW1z5Y+q5Y+WICBleHBhcmFtc19rZXlfbmFtZXPvvIjop4HphY3nva7vvInlhoXnmoTlh6DkuKrlrZfmrrVcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0bXBfYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHRtcF9vYmogPSB0bXBfYXJyW2ldO1xuICAgIHZhciBrID0gdG1wX29ialswXSB8fCAnJztcbiAgICB2YXIgdiA9IHRtcF9vYmpbMV0gfHwgJyc7XG4gICAgaWYgKGsgJiYgdiAmJiAobWV0YV9leGluZm8gPT09ICdFWFBBUkFNUycgfHwgY29uZihrKSkpIHtcbiAgICAgIHJzW2tdID0gdjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJzO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRXhpbmZvLmpzXG4vLyBtb2R1bGUgaWQgPSA2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZXhwYXJhbXMpIHtcbiAgdmFyIHJzID0ge307XG4gIHRyeSB7XG4gICAgLy8gdmFyIGV4cGFyYW1zID0gdXRpbEV4aW5mby5nZXRFeFBhcmFtcygpO1xuICAgIC8vIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmV4cGFyYW1zID0gZXhwYXJhbXM7XG4gICAgdmFyIHRtcE9iaiA9IGZvcm1hdC5wYXJhbTJvYmooZXhwYXJhbXMucmVwbGFjZSgvJmFtcDsvZywgJyYnKS5yZXBsYWNlKC9cXGJ1c2VyKGl8SSlkPS8sICd1aWRhcGx1cz0nKS5yZXBsYWNlKC8mYXBsdXMmLywgJyYnKSk7XG4gICAgLy8g5LuF5Y+WIFsndWlkYXBsdXMnLCAncGNfaScsICdwdV9pJ10g5LiJ5Liq5YC8XG4gICAgaWYgKHRtcE9iai51aWRhcGx1cykge1xuICAgICAgcnMudWlkYXBsdXMgPSB0bXBPYmoudWlkYXBsdXM7XG4gICAgfVxuICAgIHJzLnBjX2kgPSB0bXBPYmoucGNfaTtcbiAgICBycy5wdV9pID0gdG1wT2JqLnB1X2k7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKGUpO1xuICB9XG4gIHJldHVybiBycztcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvZ2V0RXhwYXJhbXNPYmouanNcbi8vIG1vZHVsZSBpZCA9IDcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX2IvY29uZmlnL3BsdWdpbnMvd2hhdF9zZW5kcHZfdG9fdXQyLmpzXG4gKlxuICogIOS9nOeUqO+8muWmguaenOW9k+WJjeeOr+Wig+a7oei2s3RvVVTmnaHku7bvvIzliJnlsIbmlLbpm4blj5HpgIHoh7NVVOeahOWPguaVsO+8jFxuICogICAgICAg5bm25bCG5pS26ZuG5Yiw55qE5Y+C5pWw5a2Y5pS+5Yiw5LiK5LiL5paH546v5aKD5LitOiBjb250ZXh0LndoZXJlX3RvX3NlbmRwdi5wdmRhdGFUb1VUXG4gKiAgZGVwczogIHdoZXJlX3RvX3NlbmRwdlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7IFxudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBjb29raWUgPSByZXF1aXJlKCdAdXRpbHMvY29va2llJyk7XG52YXIgdXRpbFVybCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsVXJsJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxuLyoqXG4gKiDmuIXnkIbmiZPngrnlj4LmlbBcbiAqIOWwhuaJgOacieWAvOS4uuepuueahOWPguaVsOWOu+aOie+8iGFwbHVz6Zmk5aSW77yJ77ybXG4gKiDlpoLmnpzmnInph43lpI3nmoTlj4LmlbDvvIzlj6rkv53nlZnmnIDlkI7kuIDkuKpcbiAqIEBwYXJhbSBkYXRhIHtBcnJheX1cbiAqL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMoZGF0YSkge1xuICB2YXIgbmV3X3BhcmFtcyA9IFtdO1xuICB2YXIgaTtcbiAgdmFyIGl0ZW07XG4gIHZhciBrZXlzID0ge307XG4gIHZhciBrO1xuICB2YXIgdjtcblxuICBmb3IgKGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaXRlbSA9IGRhdGFbaV07XG4gICAgayA9IGl0ZW1bMF07XG4gICAgaWYgKGsgJiYgay5pbmRleE9mKHV0aWwuc19wbGFpbl9vYmopID09IC0xICYmIGtleXMuaGFzT3duUHJvcGVydHkoaykpIGNvbnRpbnVlO1xuICAgIHYgPSBpdGVtWzFdO1xuICAgIGlmIChrID09ICdhcGx1cycgfHwgdikge1xuICAgICAgbmV3X3BhcmFtcy51bnNoaWZ0KFtrLCB2XSk7XG4gICAgICBrZXlzW2tdID0gMTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3X3BhcmFtcztcbn07XG5cbi8qKlxuICog5riF55CGdG9VVOaJk+eCueWPguaVsO+8jOWOu+mZpO+8mlxuICogbG9ndHlwZVxuICogY2FjaGVcbiAqIHNjclxuICogOjotcGxhaW4teHh4XG4gKiBzcG0tY250XG4gKiBAcGFyYW0gZGF0YVxuICovXG5mdW5jdGlvbiBjbGVhblBhcmFtc0ZvclRvVVQoZGF0YSkge1xuICB2YXIgbmV3X3BhcmFtcyA9IFtdLFxuICAgIGksXG4gICAgaXRlbSxcbiAgICBrLCB2LFxuICAgIGV4Y2x1ZGVQYXJtcyA9IHtcbiAgICAgIFwibG9ndHlwZVwiOiB0cnVlLFxuICAgICAgXCJjYWNoZVwiOiB0cnVlLFxuICAgICAgXCJzY3JcIjogdHJ1ZSxcbiAgICAgIFwic3BtLWNudFwiOiB0cnVlXG4gICAgfTtcblxuICBmb3IgKGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaXRlbSA9IGRhdGFbaV07XG4gICAgayA9IGl0ZW1bMF07XG4gICAgdiA9IGl0ZW1bMV07XG4gICAgaWYgKCh1dGlsRGFzaC5pc1N0YXJ0V2l0aChrLCB1dGlsLnNfcGxhaW5fb2JqKSAmJiAhdXRpbERhc2guaXNTdGFydFdpdGgoaywgdXRpbC5ta1BsYWluS2V5Rm9yRXhwYXJhbXMoKSkpIHx8IGV4Y2x1ZGVQYXJtc1trXSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIDIwMTYtMDgtMjQg55Cs5a2Q6ZyA5rGC77yMZXhwYXJhbXPljZXni6zlpITnkIbvvIx3aW5kdmFuZemHjOmcgOimgSBA6LCL5aOrXG4gICAgaWYgKHV0aWxEYXNoLmlzU3RhcnRXaXRoKGssIHV0aWwubWtQbGFpbktleUZvckV4cGFyYW1zKCkpKSB7XG4gICAgICB2YXIgZXhwYXJhbXNBcnIgPSB1dGlsLnBhcmFtMmFycih2KTtcbiAgICAgIGlmICh0eXBlb2YgZXhwYXJhbXNBcnIgPT09ICdvYmplY3QnICYmIGV4cGFyYW1zQXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IGV4cGFyYW1zQXJyLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgdmFyIGVJdGVtID0gZXhwYXJhbXNBcnJbal07XG4gICAgICAgICAgLy8g56m65YC85LiN6ZyA6KaBXG4gICAgICAgICAgaWYgKGVJdGVtICYmIGVJdGVtWzFdKSB7XG4gICAgICAgICAgICBuZXdfcGFyYW1zLnVuc2hpZnQoW2VJdGVtWzBdLCBlSXRlbVsxXV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIG5ld19wYXJhbXMudW5zaGlmdChbaywgdl0pO1xuICB9XG4gIHJldHVybiBuZXdfcGFyYW1zO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvLyAvLyDliJ3lp4vljJbmqKHlnZdcbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICAvLyDlhbPplK7or43kuI3lhYHorrjlupTnlKjmlrnopobnm5ZcbiAgICBrZXlJc0F2YWlsYWJsZTogZnVuY3Rpb24oaykge1xuICAgICAgdmFyIGJsYWNrcyA9IFsnZnVuY3R5cGUnLCAnZnVuY0lkJywgJ3NwbS1jbnQnLCAnc3BtLXVybCcsICdzcG0tcHJlJywgJ19pc2g1JywgJ19pc19nMnUnLCAnX2g1dXJsJywgJ2NuYScsICdpc29uZXBhZ2UnLCAnbHZlcicsICdqc3ZlciddO1xuICAgICAgaWYodXRpbEFycmF5LmluZGV4b2YoYmxhY2tzLCBrKSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIOW3sue7j+WSjFVU57qm5a6a5aW977yM5Lyg6YCS57uZVVTnmoTkuoznuqflj4LmlbDlj6rmlK/mjIHln7rmnKzmlbDmja7nsbvlnovvvIzkuI3mlK/mjIHlr7nosaFcbiAgICB2YWxJc0F2YWlsYWJsZTogZnVuY3Rpb24odikge1xuICAgICAgaWYgKHR5cGVvZiB2ID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgdiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgdXBVdERhdGE6IGZ1bmN0aW9uKGQsIG9iaikge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIGQgPSBkID8gZCA6IHt9O1xuICAgICAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3IgKHZhciBrIGluIG9iaikge1xuICAgICAgICAgIHZhciB2ID0gb2JqW2tdO1xuICAgICAgICAgIGlmKGsgJiYgX3NlbGYudmFsSXNBdmFpbGFibGUodikgJiYgX3NlbGYua2V5SXNBdmFpbGFibGUoaykpIHtcbiAgICAgICAgICAgIGRba10gPSB2OyAvLyDoh6rlrprkuYnlj4LmlbDnu5/nu5/pnIDopoHliqBcIl9cIuWJjee8gFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGQ7XG4gICAgfSxcblxuICAgIGdldFRvVXREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB2YXIgd2hhdF90b19zZW5kID0gY29udGV4dC53aGF0X3RvX3NlbmQgfHwge307XG4gICAgICB2YXIgbG9nZGF0YSA9IHdoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuICAgICAgdmFyIHNka19pbmZvID0gbG9nZGF0YS5zZGtfaW5mbyB8fCB7fTtcbiAgICAgIHZhciBldGFnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuZXRhZyB8fCB7fTtcblxuICAgICAgdmFyIGV4cGFyYW1zID0gY2xlYW5QYXJhbXNGb3JUb1VUKGNsZWFuUGFyYW1zKGxvZ2RhdGEuZXhwYXJhbXMgfHwgW10pKTtcbiAgICAgIGV4cGFyYW1zID0gdXRpbC5hcnIyb2JqKGV4cGFyYW1zKTtcbiAgICAgIC8vIHZhciB1c2VyZGF0YSA9IGNsZWFuUGFyYW1zRm9yVG9VVChjbGVhblBhcmFtcyhjb250ZXh0LnVzZXJkYXRhIHx8IFtdKSk7XG4gICAgICAvLyB1c2VyZGF0YSA9IHV0aWwuYXJyMm9iaih1c2VyZGF0YSk7XG4gICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhO1xuICAgICAgdmFyIHBhZ2V1cmwgPSBsb2NhdGlvbi5ocmVmO1xuXG4gICAgICB2YXIgZCA9IHtcbiAgICAgIH07XG4gICAgICAvLyAtLS0tMjAxNzAzMjcgYXBsdXPmlrDlop7pnIDmsYIgQOS5nemUoSgwMjc3MTcpXG4gICAgICAvLyAxLsKgYXBsdXPlop7liqAgc2Nt44CBIGlzc2I9MSjlpoLmnpx1cmzlkI7pnaLmnIlwb2ludOWPguaVsO+8ieOAgSBwZzFzdGVwayDkuInkuKrlj4LmlbDvvIzov5nkuInkuKrlj4LmlbDpg73mtonlj4pVUkzlj4LmlbDop6PmnpBcbiAgICAgIHZhciBzY20gPSB1dGlsVXJsLmdldFBhcmFtRnJvbVVybCgnc2NtJywgcGFnZXVybCkgfHwgJyc7XG4gICAgICBpZiAoc2NtKSB7XG4gICAgICAgIGRbJ3NjbSddID0gc2NtO1xuICAgICAgfVxuICAgICAgdmFyIHBnMXN0ZXBrID0gdXRpbFVybC5nZXRQYXJhbUZyb21VcmwoJ3BnMXN0ZXBrJywgcGFnZXVybCkgfHwgJyc7XG4gICAgICBpZiAocGcxc3RlcGspIHtcbiAgICAgICAgZFsncGcxc3RlcGsnXSA9IHBnMXN0ZXBrO1xuICAgICAgfVxuICAgICAgdmFyIHBvaW50ID0gdXRpbFVybC5nZXRQYXJhbUZyb21VcmwoJ3BvaW50JywgcGFnZXVybCkgfHwgJyc7XG4gICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgZFsnaXNzYiddID0gMTtcbiAgICAgIH1cbiAgICAgIGlmIChzZGtfaW5mbyAmJiBzZGtfaW5mby5tYW5zbmRsb2cpIHtcbiAgICAgICAgZC5tYW5zbmRsb2cgPSBzZGtfaW5mby5tYW5zbmRsb2c7XG4gICAgICB9XG5cbiAgICAgIGQgPSB0aGlzLnVwVXREYXRhKGQsIGV4cGFyYW1zKTsgIC8vIGJlYWNvbuWfi+eCueeahOW6lOeUqOWPguaVsFxuICAgICAgZCA9IHRoaXMudXBVdERhdGEoZCwgbG9nZGF0YS5nb2tleSk7XG4gICAgICBkID0gdGhpcy51cFV0RGF0YShkLCB1c2VyZGF0YSk7ICAvLyDlupTnlKjmlrnpgJrov4dzZW5kUFbmjqXlj6PkvKDpgJLnmoRwduWPguaVsFxuXG4gICAgICAvLyDlj4LmlbDnsbvlnovkuIDvvJrpnIDopoFVVOeJueauiuWkhOeQhueahO+8iGZ1bmN0eXBl77yMZnVuY0lk77yMdXJs77yMbG9na2V577yJXG4gICAgICBkLmZ1bmN0eXBlID0gJ3BhZ2UnO1xuICAgICAgZC5mdW5jSWQgPSAnMjAwMSc7XG4gICAgICBpZiAoYXBsdXMgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAgICAgICBkLnVybCA9IChsb2NhdGlvbi5wcm90b2NvbCB8fCAnaHR0cHM6JykgKyAnLy8nICsgbG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lOyAvLyBsb2NhdGlvbi5vcmlnaW4gKyBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGQudXJsID0gbG9jYXRpb24uaHJlZjtcbiAgICAgIH1cblxuICAgICAgLy8g5Y+C5pWw57G75Z6L5LqM77ya5LiN6ZyA6KaBVVTnibnmrorlpITnkIbnmoTvvIjlhbbku5ZhcGx1c+iHquWumuS5iWtleVxcdmFsdWXvvIlrZXnpnIDopoHkuIvliJLnur/lvIDlpLRcbiAgICAgIGQuX2lzaDUgPSAnMSc7ICAgIC8vIFVU5b+F6aG755qE5bGe5oCn77yM5YaZ5q275Y2z5Y+vXG4gICAgICBkLl9oNXVybCA9IHBhZ2V1cmw7XG4gICAgICBkLl90b1VUID0gMjtcbiAgICAgIGQuX2JyaWRnZU5hbWUgPSAnV2luZFZhbmUnO1xuICAgICAgZC5fYnJpZGdlVmVyc2lvbiA9ICczLjAuNCc7XG5cbiAgICAgIC8vIOWPguaVsOexu+Wei+S4ie+8muS4jemcgOimgVVU54m55q6K5aSE55CG77yM5LiUa2V55peg5LiL5YiS57q/5YmN57yAXG4gICAgICBpZiAoc3BtLnNwbV9jbnQpIGRbYXBsdXNTdGF0aWMuU1BNX0NOVF0gPSBzcG0uc3BtX2NudCB8fCAnJztcbiAgICAgIGlmIChzcG0uc3BtX3VybCkgZFthcGx1c1N0YXRpYy5TUE1fVVJMXSA9IHNwbS5zcG1fdXJsIHx8ICcnO1xuICAgICAgaWYgKHNwbS5zcG1fcHJlKSBkW2FwbHVzU3RhdGljLlNQTV9QUkVdID0gc3BtLnNwbV9wcmUgfHwgJyc7XG5cbiAgICAgIGQuY25hID0gZXRhZy5jbmEgfHwgY29va2llLmdldENvb2tpZUNuYSgnY25hJyk7XG4gICAgICBkLmx2ZXIgPSBzZGtfaW5mby5sdmVyO1xuICAgICAgZC5qc3ZlciA9IHNka19pbmZvLmpzdmVyO1xuICAgICAgZC5wdmVyID0gJzEuMC4wJztcbiAgICAgIGQuaXNvbmVwYWdlID0gLTE7XG4gICAgICB2YXIgdXRwYXJhbUNudCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy11dHBhcmFtJyk7XG4gICAgICBpZiAodXRwYXJhbUNudCkge1xuICAgICAgICBkWyd1dHBhcmFtLWNudCddID0gSlNPTi5zdHJpbmdpZnkodXRwYXJhbUNudCk7XG4gICAgICB9XG4gICAgICBkLl9pc19nMnVfID0gMTtcbiAgICAgIGQuX3Nsb2cgPSAxO1xuICAgICAgcmV0dXJuIGQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIHB25Y+R6YCB5Yiw5ZOq6YeM5Y67XG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjLndoYXRfdG9fc2VuZCB8fCB7fTtcbiAgICAgIHdoYXRfdG9fc2VuZC5wdmRhdGFUb1V0ID0gdGhpcy5nZXRUb1V0RGF0YSgpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kID0gd2hhdF90b19zZW5kO1xuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXQyLmpzXG4vLyBtb2R1bGUgaWQgPSA3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5qCH5YeG5bel5YW357G7XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gdmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJy4vdXRpbEFycmF5Jyk7XG4vLyB2YXIgZm9ybWF0ID0gcmVxdWlyZSgnLi9mb3JtYXQnKTtcblxudmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6JztcbmV4cG9ydHMubWtQbGFpbktleSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHNfcGxhaW5fb2JqICsgTWF0aC5yYW5kb20oKTtcbn07XG5leHBvcnRzLnNfcGxhaW5fb2JqID0gc19wbGFpbl9vYmo7XG5cbi8vIDIwMTYtMDgtMjQg55Cs5a2Q6ZyA5rGC77yMZXhwYXJhbXPljZXni6zlpITnkIbvvIx3aW5kdmFuZemHjOmcgOimgSBA6LCL5aOrXG5leHBvcnRzLm1rUGxhaW5LZXlGb3JFeHBhcmFtcyA9IGZ1bmN0aW9uKGtleV9wcmVmaXgpIHtcbiAgdmFyIF9rZXkgPSBrZXlfcHJlZml4IHx8IHNfcGxhaW5fb2JqO1xuICByZXR1cm4gX2tleSArICdleHBhcmFtcyc7XG59O1xuXG4vKipcbiAqIGFycmF5IHRvIHBhcmFtXG4gKiDlsIbkuIDkuKrnroDljZXnmoTmlbDnu4TovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j++8jFxuICog5YW25Lit5pWw57uE5Li6XG4gKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG4gKiDnmoTlvaLlvI/jgIJcbiAqIOS4jiBvYmoycGFyYW0g55u45q+U77yM6L+Z5Liq5pa55rOV55qE5aW95aSE5piv5Y+v5Lul5L+d6K+B5pyA5ZCO5Y+C5pWw55qE6aG65bqPXG4gKiBAcGFyYW0gYXJyIHtBcnJheX1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gYXJyMnBhcmFtKGFycikge1xuICB2YXIgYSA9IFtdLFxuICAgIGssXG4gICAgdixcbiAgICBpLFxuICAgIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgayA9IGFycltpXVswXTtcbiAgICB2ID0gYXJyW2ldWzFdO1xuICAgIGEucHVzaChrLmluZGV4T2Yoc19wbGFpbl9vYmopID09PSAwID8gdiA6IChrICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHYpKSk7XG4gIH1cbiAgcmV0dXJuIGEuam9pbignJicpO1xufTtcbmV4cG9ydHMuYXJyMnBhcmFtID0gYXJyMnBhcmFtO1xuXG5cbi8qKlxuICogcGFyYW0gdG8gYXJyYXlcbiAqIDIwMTYtMDgtMjQg5pS+5byA77yM55So5p2l5aSE55CGZXhwYXJhbXMgQOiwi+Wjq1xuICog5bCG5LiA5Liq566A5Y2V55qE5b2i5aaCIGE9MSZiPTImYz0zIOi/meagt+eahOWPguaVsOi9rOWMluS4uueugOWNleeahCBhcnJheSDmoLzlvI/vvIzlpoLvvJpcbiAqIFtbXCJhXCIsIFwiMVwiXSwgW1wiYlwiLCBcIjJcIl0sIFtcImNcIiwgXCIzXCJdXVxuICpcbiAqIEBwYXJhbSBwYXJhbXMge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5wYXJhbTJhcnIgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gIHZhciBhID0gcGFyYW1zLnNwbGl0KFwiJlwiKSxcbiAgICBpID0gMCwgbCA9IGEubGVuZ3RoLFxuICAgIGl0ZW0sXG4gICAgYXJyID0gW107XG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IGFbaV0uc3BsaXQoXCI9XCIpO1xuICAgIGFyci5wdXNoKFtpdGVtLnNoaWZ0KCksIGl0ZW0uam9pbihcIj1cIildKTtcbiAgfVxuXG4gIHJldHVybiBhcnI7XG59O1xuXG5leHBvcnRzLmFycjJvYmogPSBmdW5jdGlvbiAoYXJyKSB7XG4gIHZhciByZXQgPSB7fTtcbiAgdmFyIGs7XG4gIHZhciB2O1xuICB2YXIgaTtcbiAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgayA9IGFycltpXVswXTtcbiAgICB2ID0gYXJyW2ldWzFdO1xuICAgIHJldFtrXSA9IHY7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG4vLyDku4XmlK/mjIHkuIDnuqdqc29u57uT5p6EXG5leHBvcnRzLmpzb25MaWtlU3RyMkpTT04gPSBmdW5jdGlvbihqc29uU3RyKSB7XG4gIGlmICghanNvblN0ciB8fCB0eXBlb2YganNvblN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgdmFyIHN0ciA9IGpzb25TdHIucmVwbGFjZSgvWydcInt9XSsvZywgJycpO1xuICB2YXIgYXJyMSA9IHN0ci5zcGxpdCgnLCcpOyBcbiAgdmFyIGFycjIgPSBbXTsgXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuICAgIGFycjIucHVzaChhcnIxW2ldLnNwbGl0KCc6JykpO1xuICB9XG4gIHZhciByZXN1bHQgPSB0aGlzLmFycjJvYmooYXJyMik7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnRzLmNhbjJodHRwcyA9IGZ1bmN0aW9uKHVybCkge1xuICBpZiAodXJsLmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICB2YXIgcHJvdG9jYWwgPSAnaHR0cHM6JztcbiAgICBpZiAoLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcbiAgICAgIHByb3RvY2FsID0gJ2h0dHA6JztcbiAgICB9XG4gICAgdXJsID0gcHJvdG9jYWwgKyB1cmw7XG4gIH1cbiAgcmV0dXJuIHVybDtcbn07XG4gXG5leHBvcnRzLmNoZWNrRW1wdHlPYmogPSBmdW5jdGlvbihkYXRhKSB7XG4gIGlmICh0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PT0gMCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSA3MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogd2hhdF90b19zZW5kcHZfdW0ybmF0aXZlLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiDkvZznlKjvvJog5qGl5o6l5YaF5bWM5oOF5Ya15LiL77yMdW3ml6Xlv5fljY/orq7lj5HpgIFQVuaXpeW/l+e7mW5hdGl2ZVxuICogXG4gKiBkZXBzOiDml6BcbiAqIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqIFxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS91dGlscycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXRUb05hdGl2ZURhdGE6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIC8vIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gdXRpbERhc2guY2xvbmVEZWVwKGNvbnRleHQudXNlcmRhdGEpIHx8IHt9O1xuICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGNvbnRleHQud2hhdF90b19zZW5kIHx8IHt9O1xuICAgICAgdmFyIGxvZ2RhdGEgPSB3aGF0X3RvX3NlbmQubG9nZGF0YSB8fCB7fTtcbiAgICAgIHZhciBzZGtfaW5mbyA9IGxvZ2RhdGEuc2RrX2luZm8gfHwge307XG4gICAgICB2YXIgZXRhZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmV0YWcgfHwge307XG5cbiAgICAgIHZhciByZXN1bHQgPSB7fSAsc2RrQXJncyA9IHt9LCBjdXN0b21BcmdzID0ge307XG4gICAgICBzZGtBcmdzLmNuYSA9IGV0YWcuY25hO1xuICAgICAgc2RrQXJncy5sdmVyID0gc2RrX2luZm8ubHZlcjtcbiAgICAgIHNka0FyZ3MuanN2ZXIgPSBzZGtfaW5mby5qc3ZlcjtcbiAgICAgIHNka0FyZ3MuaWQgPSBhcGx1c1N0YXRpYy5QQUdFX1NUQVJUO1xuICAgICAgc2RrQXJncy50cyA9IERhdGUubm93KCk7IC8v5ZKM6KO4d2Vi5L6n5Lya5pyJ5beu5byCXG4gICAgICBzZGtBcmdzLnIgPSBsb2dkYXRhLmFyZzEgfHwgbG9nZGF0YS5sb2drZXkgfHwgJy0nO1xuICAgICAgc2RrQXJncy5pc19oNSA9ICcxJztcblxuICAgICAgaWYgKHVzZXJkYXRhLmhhc093blByb3BlcnR5KCdhdXRvc2VuZCcpKSB7XG4gICAgICAgIHNka0FyZ3MuaXNfYXV0byA9IDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAwO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjdXN0b21BcmdzID0gdXRpbERhc2guY2xvbmVEZWVwKHV0aWxzLmRlbGV0ZUluZm8odXNlcmRhdGEsIFtcbiAgICAgICAgJ19hbm9ueV9pZCcsICdfZGV2X2lkJywgJ19zZXNzaW9uX2lkJywgJ19zcmNfcG9zX2lkJyxcbiAgICAgICAgJ191c2VyX2lkJywgJ191c2VyX25pY2snXG4gICAgICBdKSk7XG5cbiAgICAgIGlmIChjdXN0b21BcmdzLmR1cmF0aW9uKSB7XG4gICAgICAgIHNka0FyZ3MuZHVyYXRpb24gPSBjdXN0b21BcmdzLmR1cmF0aW9uO1xuICAgICAgICBkZWxldGUgY3VzdG9tQXJncy5kdXJhdGlvbjtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1c3RvbUFyZ3MucGFnZV9zdGFydCkge1xuICAgICAgICBzZGtBcmdzLnBhZ2Vfc3RhcnQgPSBjdXN0b21BcmdzLnBhZ2Vfc3RhcnQ7XG4gICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLnBhZ2Vfc3RhcnQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChsb2dkYXRhLnVybCkge1xuICAgICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgY3VzdG9tQXJncy5zcG1CIHx8IGN1c3RvbUFyZ3MucGFnZV9uYW1lIHx8IGxvZ2RhdGEudXJsIHx8ICctJztcbiAgICAgICAgc2RrQXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG4gICAgICAgIHNka0FyZ3NbJ3NwbS1jbnQnXSA9IGVuY29kZVVSSUNvbXBvbmVudChzZGtBcmdzLnBhZ2VfbmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsb2dkYXRhLnByZSkge1xuICAgICAgICBzZGtBcmdzLnJlZl91cmwgPSBsb2dkYXRhLnByZSB8fCAnLSc7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIChjdXN0b21BcmdzLnBhZ2VfbmFtZSkge1xuICAgICAgLy8gICBkZWxldGUgY3VzdG9tQXJncy5wYWdlX25hbWU7XG4gICAgICAvLyB9XG4gICAgICBpZiAoY3VzdG9tQXJncy50cykge1xuICAgICAgICAvLyDliKDpmaRuYXRpdmXkv53nlZnlrZfmrrV0c1xuICAgICAgICBkZWxldGUgY3VzdG9tQXJncy50cztcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5zZGtBcmdzID0gdXRpbERhc2guY2xvbmVEZWVwKHNka0FyZ3MpO1xuICAgICAgcmVzdWx0LmN1c3AgPSBjdXN0b21BcmdzO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB2YXIgd2hhdF90b19zZW5kID0gYy53aGF0X3RvX3NlbmQgfHwge307XG4gICAgICB3aGF0X3RvX3NlbmQucHZkYXRhVG9VbU5hdGl2ZSA9IHRoaXMuZ2V0VG9OYXRpdmVEYXRhKCk7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQgPSB3aGF0X3RvX3NlbmQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91bTJuYXRpdmUuanNcbi8vIG1vZHVsZSBpZCA9IDczXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvY2FuX3RvX3NlbmRwdi5qc1xuICpcbiAqIOS9nOeUqO+8muWIpOaWrXB26IO95ZCm5Y+R6YCB77yM5LiN5Y+v5Lul5Y+R6YCB5YiZ5Lya5Lit5pat5ZCO57ut5omA5pyJ5Lit6Ze05Lu25omn6KGMXG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKbopoHmiafooYxzZW5kcHbnmoTlhaXlj6NcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIGNhbl90b19zZW5kcHYgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5jYW5fdG9fc2VuZHB2IHx8IHt9O1xuICAgICAgdmFyIGNvdW50ID0gXyQuc2VuZF9wdl9jb3VudCB8fCAwO1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cbiAgICAgIGlmIChjb25maWcuaXNfYXV0byAmJiBjb3VudCA+IDApIHtcbiAgICAgICAgcmV0dXJuICdkb25lJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbl90b19zZW5kcHYuZmxhZyA9ICdZRVMnO1xuICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5jYW5fdG9fc2VuZHB2ID0gY2FuX3RvX3NlbmRwdjtcbiAgICAgICAgXyQuc2VuZF9wdl9jb3VudCA9ICsrY291bnQ7XG4gICAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoJ18kJywgXyQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9jYW5fdG9fc2VuZHB2LmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3BsdWdpbnMvcHYvYWZ0ZXJfcHYuanNcbiAqXG4gKiDkvZznlKjvvJpwduWPkemAgeWujOavle+8jOWIhuWPkeS4gOS4quWujOaIkOS6i+S7tlxuICogZGVwczog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLy8gLy8g5Yid5aeL5YyW5qih5Z2XXG4gICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAvLyB9LFxuXG4gICAgLyoqXG4gICAgICog5piv5ZCm6KaB5omn6KGMc2VuZHB255qE5YWl5Y+jXG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICB2YXIgXyQgPSBhcGx1cy5fJCB8fCB7fTtcbiAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdwdl9jb250ZXh0JywgYyk7XG4gICAgICAvLyBwduWPkemAgeWujOavle+8jOWIhuWPkeS4gOS4quWujOaIkOS6i+S7tlxuICAgICAgdmFyIHNwbV9hYiA9IGFwbHVzLnNwbV9hYiB8fCBbXTtcbiAgICAgIHZhciBfc3BtYWIgPSBzcG1fYWIuam9pbignLicpO1xuICAgICAgdmFyIF9jb3VudCA9IF8kLnNlbmRfcHZfY291bnQ7XG5cbiAgICAgIHZhciBwdWJPYmogPSB7XG4gICAgICAgIGNuYTogYy5ldGFnLmNuYSxcbiAgICAgICAgY291bnQ6IF9jb3VudCxcbiAgICAgICAgc3BtYWJfcHJlOiBhcGx1cy5zcG1hYl9wcmVcbiAgICAgIH07XG4gICAgICB1dGlsUHVic3ViLmRvUHViTXNnKFsnc2VuZFBWJywgJ2NvbXBsZXRlJywgX3NwbWFiLCBwdWJPYmpdKTtcbiAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMoWydzZW5kUFYnLCAnY29tcGxldGUnLCBfc3BtYWIsIHB1Yk9ial0pO1xuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvYWZ0ZXJfcHYuanNcbi8vIG1vZHVsZSBpZCA9IDc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4vdXRpbEdvbGRsb2cnKTtcblxudmFyIEZOID0gJ2Z1bmN0aW9uJztcblxudmFyIGdldFB1YnN1YiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHB1YnN1YiA9IGFwbHVzLmFwbHVzX3B1YnN1YiB8fCB7fTtcbiAgdmFyIGZsYWcgPSB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOO1xuICByZXR1cm4gZmxhZyA/IHB1YnN1YiA6ICcnO1xufTtcblxuLyoqXG4gKiDliIblj5Hmtojmga/lt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvUHViTXNnID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5wdWJsaXNoID09PSBGTikge1xuICAgIHB1YnN1Yi5wdWJsaXNoLmFwcGx5KHB1YnN1YiwgYXJncyk7XG4gIH1cbn07XG5cbi8qKlxuICogY2FjaGXlvZPliY3nmoTliIblj5Hlh73mlbDnmoTlt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvQ2FjaGVQdWJzID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5jYWNoZVB1YnMgPT09IEZOKSB7XG4gICAgcHVic3ViLmNhY2hlUHVicy5hcHBseShwdWJzdWIsIGFyZ3MpO1xuICB9XG59O1xuXG4vKipcbiAqIOiuoumYhea2iOaBr+W3peWFt+WHveaVsFxuICogQHBhcmFtcyB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYihbIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXSlcbiAqL1xuZXhwb3J0cy5kb1N1Yk1zZyA9IGZ1bmN0aW9uKGtleSwgY2IpIHtcbiAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIuc3Vic2NyaWJlID09PSBGTikge1xuICAgIHB1YnN1Yi5zdWJzY3JpYmUoa2V5LCBjYik7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUHVic3ViLmpzXG4vLyBtb2R1bGUgaWQgPSA3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3BsdWdpbnMvcHYvd2hhdF90b19oamxqX3VzZXJkYXRhLmpzXG4gKlxuICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG4gKiAgICAgICAgICAg5bm25bCG5pS26ZuG5Yiw55qE6Ieq5a6a5LmJ5Y+C5pWw5Lul5pWw57uE5qC85byP6L+95Yqg5YiwbG9nZGF0YeWQjumdou+8mmxvZ2RhdGEuY29uY2F0KHVzZXJkYXRhKVxuICogIGRlcHM6IHdoYXRfdG9faGpsalxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy9pc0FycmF5Jyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIC8vIC8qKlxuICAgIC8vICAqIOWIneWni+WMluaooeWdl1xuICAgIC8vICAqL1xuICAgIC8vIGluaXQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICAvKipcbiAgICAgKiDph4fpm4bkuKrmgKfljJblj4LmlbBcbiAgICAgKlxuICAgICAqIHJlY29yZChsb2drZXksIGdta2V5LCBnb2tleSkgQVBJ5Lit55qEZ29rZXlcbiAgICAgKiBtZXRhOmFwbHVzLWV4aW5mb+S/oeaBrywgbWV0YTphcGx1cy1leGRhdGHkv6Hmga9cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gey4uLn1cbiAgICAgKi9cbiAgICBnZXRVc2VyRGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcbiAgICAgIHZhciBnb2tleSA9IGMud2hhdF90b19zZW5kLmxvZ2RhdGEuZ29rZXk7XG5cbiAgICAgIGdva2V5ID0gdXRpbERhc2guYXNzaWduKGdva2V5LCBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsZGF0YScpKTtcbiAgICAgIGdva2V5ID0gdXRpbERhc2guYXNzaWduKGdva2V5LCBmb3JtYXQucGFyYW0yb2JqKHVzZXJkYXRhLmdva2V5KSk7XG4gICAgICB2YXIgYXBsdXNFeGluZm8gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhpbmZvJyk7XG4gICAgICBpZiAoYXBsdXNFeGluZm8pIHtcbiAgICAgICAgZ29rZXkgPSB1dGlsRGFzaC5hc3NpZ24oZ29rZXksIGZvcm1hdC5wYXJhbTJvYmooYXBsdXNFeGluZm8pKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGV4ZGF0YSA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1leGRhdGEnKTtcbiAgICAgIGlmIChpc0FycmF5KGV4ZGF0YSkpIHtcbiAgICAgICAgZXhkYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgZ29rZXkgPSB1dGlsRGFzaC5hc3NpZ24oZ29rZXksIGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdva2V5ID0gdXRpbERhc2guYXNzaWduKGdva2V5LCBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGdva2V5O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6NcbiAgICAgKiDov5Tlm54nZG9uZSfnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gJ2RvbmUnIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5ID0gdGhpcy5nZXRVc2VyRGF0YSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91c2VyZGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gNzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L3doYXRfdG9faGpsal91c2VyZGF0YS5qc1xuICpcbiAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsGxvZ2RhdGHlkI7pnaLvvJpsb2dkYXRhLmNvbmNhdCh1c2VyZGF0YSlcbiAqICBkZXBzOiB3aGF0X3RvX2hqbGpcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEV4aW5mbyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRXhpbmZvJyk7XG52YXIgZ2V0RXhQYXJhbXNPYmogPSByZXF1aXJlKCcuLi9nZXRFeHBhcmFtc09iaicpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLy8gZ2V0Q29va2llVXNlckluZm86IGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgIHZhciBkID0ge307XG4gICAgLy8gICAvLyDml6Xlv5fmlLbpm4blt6Xlj7dcbiAgICAvLyAgIHZhciB3biA9IGNvb2tpZS5nZXRDb29raWUoJ3dvcmtubycpIHx8IGNvb2tpZS5nZXRDb29raWUoJ2VtcGxJZCcpO1xuICAgIC8vICAgaWYgKHduKSB7XG4gICAgLy8gICAgIGQud29ya25vID0gd247XG4gICAgLy8gICB9XG4gICAgLy8gICB2YXIgaG5nID0gY29va2llLmdldEhuZygpO1xuICAgIC8vICAgaWYgKGhuZykge1xuICAgIC8vICAgICBkLl9obmcgPSBjb29raWUuZ2V0SG5nKCk7XG4gICAgLy8gICB9XG4gICAgLy8gICByZXR1cm4gZDtcbiAgICAvLyB9LFxuXG4gICAgZ2V0RXhQYXJhbXNJbmZvOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZSA9IHV0aWxFeGluZm8uZ2V0RXhQYXJhbXMoKTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmV4cGFyYW1zID0gZTtcbiAgICAgIHJldHVybiBnZXRFeFBhcmFtc09iaihlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG4gICAgICog6L+U5ZueJ2RvbmUn57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuICdkb25lJyB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZ29rZXkgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YS5nb2tleTtcbiAgICAgIGdva2V5ID0gdXRpbERhc2guYXNzaWduKHRoaXMuZ2V0RXhQYXJhbXNJbmZvKCksIGdva2V5KTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5ID0gZ29rZXk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX3dlYi5qc1xuLy8gbW9kdWxlIGlkID0gNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfYi9jb25maWcvcGx1Z2lucy93aGF0X3RvX2hqbGpfdXQyLmpzXG4gKlxuICog5L2c55So77ya5pel5b+X5Y+R6YCB6IezVVTlj4LmlbDmlLbpm4bvvJpcbiAqXG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIOiOt+WPllVU5pel5b+X6ZyA6KaB55qE5Y+C5pWwXG4gICAgICog5Y+C5pWw57G75Z6L5LiA77ya6ZyA6KaBVVTnibnmrorlpITnkIbnmoTvvIhmdW5jdHlwZe+8jGZ1bmNJZO+8jHVybO+8jGxvZ2tlee+8iVxuICAgICAqIOWPguaVsOexu+Wei+S6jO+8muS4jemcgOimgVVU54m55q6K5aSE55CG55qE77yI5YW25LuWYXBsdXPoh6rlrprkuYlrZXlcXHZhbHVl77yJa2V56ZyA6KaB5LiL5YiS57q/5byA5aS0XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHtcbiAgICAgKiAgIGZ1bmN0eXBlOiBcImN0cmxcIixcbiAgICAgKiAgIGZ1bmNJZDogXCIyMTAxXCIsXG4gICAgICogICB1cmw6IFwiaHR0cHM6Ly9oNS5tLnRhb2Jhby5jb20vYnV5L3FpbmdkYW4vbGlzdC5odG1sXCIsXG4gICAgICogICBsb2drZXk6IFwiL3FpbmdkYW4uMi4zXCIsXG4gICAgICpcbiAgICAgKiAgIF9zcG1jbnQ6IFwiYTMxNDUuODE4MzczNy4wLjBcIixcbiAgICAgKiAgIF9zcG11cmw6IFwiYTAuYjAuYzAuZDBcIixcbiAgICAgKiAgIF9oNXVybDogXCIvL2g1Lm0udGFvYmFvLmNvbS9idXkvcWluZ2Rhbi9saXN0Lmh0bWw/c2NtPTIwMTkuMS40LjMxMSZpdGVtSWQ9NTI3MzUxNDYxNDU2LDUyNzAzODU1NTc1NiZzcG09YTIxNDEuMS53aWRnZXQuNCZsb2NhdGU9d2lkZ2V0LTRcIixcbiAgICAgKiAgIF9jbmE6IFwiMTIzNDQ0NjU0N1wiLFxuICAgICAqICAgX290aGVyczogXCJzb21ldmFsdWVcIiAsXG4gICAgICogICBfaXNoNTogXCIxXCIgIC8vIFVU5b+F6aG755qE5bGe5oCn77yM5YaZ5q275Y2z5Y+vXG4gICAgICogICBfaXNfZzJ1XzogXCIxXCIgLy8g5Y2V5Y+R5pe26ZyA6KaBXG4gICAgICogfVxuICAgICAqL1xuICAgIGdldFRvVXREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG4gICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuICAgICAgdmFyIGV0YWcgPSBjb250ZXh0LmV0YWcgfHwge307XG4gICAgICB2YXIgd2hhdF90b19zZW5kID0gY29udGV4dC53aGF0X3RvX3NlbmQgfHwge307XG4gICAgICB2YXIgbG9nZGF0YSA9IHdoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuICAgICAgdmFyIHNka19pbmZvID0gbG9nZGF0YS5zZGtfaW5mbyB8fCB7fTtcbiAgICAgIHZhciBnb2tleSA9IGxvZ2RhdGEuZ29rZXkgfHwge307XG5cbiAgICAgIHZhciBnb2tleUFyciA9IFtdO1xuICAgICAgdmFyIGdva2V5U3RyID0gJyc7XG4gICAgICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG4gICAgICAgIGlmIChbYXBsdXNTdGF0aWMuU1BNX0NOVCwgYXBsdXNTdGF0aWMuU1BNX1VSTCwgYXBsdXNTdGF0aWMuU1BNX1BSRV0uaW5kZXhPZihrKSA9PT0gLTEpIHtcbiAgICAgICAgICB2YXIgX3RtcFZhbHVlID0gZ29rZXlba107XG4gICAgICAgICAgaWYgKGdva2V5W2tdID09PSAndW5kZWZpbmVkJyB8fCBnb2tleVtrXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdG1wVmFsdWUgPSAnJztcbiAgICAgICAgICB9XG4gICAgICAgICAgZ29rZXlBcnIucHVzaChrICsgJz0nICsgX3RtcFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGdva2V5QXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZ29rZXlTdHIgPSBnb2tleUFyci5qb2luKCcmJyk7XG4gICAgICB9XG4gICAgICB2YXIgcGFnZXVybCA9IGxvY2F0aW9uLmhyZWY7XG4gICAgICB2YXIgZCA9IHt9O1xuICAgICAgLy8g5Y+C5pWw57G75Z6L5LiA77ya6ZyA6KaBVVTnibnmrorlpITnkIbnmoTvvIhmdW5jdHlwZe+8jGZ1bmNJZO+8jHVybO+8jGxvZ2tlee+8iVxuICAgICAgZC5mdW5jdHlwZSA9ICdjdHJsJztcbiAgICAgIGQuZnVuY0lkID0gbG9nZGF0YS5ldmVudF9jb2RlO1xuICAgICAgaWYgKGFwbHVzICYmIGFwbHVzLmdsb2JhbENvbmZpZyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgZC51cmwgPSAobG9jYXRpb24ucHJvdG9jb2wgfHwgJ2h0dHBzOicpICsgJy8vJyArIGxvY2F0aW9uLmhvc3QgKyBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGQudXJsID0gbG9jYXRpb24uaHJlZjtcbiAgICAgIH1cbiAgICAgIGQubG9na2V5ID0gbG9nZGF0YS5sb2drZXk7XG4gICAgICBkLmdva2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGdva2V5U3RyKTtcbiAgICAgIGQuZ21rZXkgPSBsb2dkYXRhLmdta2V5O1xuXG4gICAgICAvLyDlj4LmlbDnsbvlnovkuozvvJrkuI3pnIDopoFVVOeJueauiuWkhOeQhueahO+8iOWFtuS7lmFwbHVz6Ieq5a6a5LmJa2V5XFx2YWx1Ze+8iWtleemcgOimgeS4i+WIkue6v+W8gOWktFxuICAgICAgZC5faXNoNSA9ICcxJztcbiAgICAgIGQuX2g1dXJsID0gcGFnZXVybDtcbiAgICAgIGQuX2lzX2cydV8gPSAxO1xuICAgICAgZC5fc2xvZyA9IDE7XG4gICAgICBkLl90b1VUID0gMjtcbiAgICAgIGQuX2JyaWRnZU5hbWUgPSAnV2luZFZhbmUnO1xuICAgICAgZC5fYnJpZGdlVmVyc2lvbiA9ICczLjAuNCc7XG5cbiAgICAgIC8vIOWPguaVsOexu+Wei+S4ie+8muS4jemcgOimgVVU54m55q6K5aSE55CG77yM5LiUa2V55peg5LiL5YiS57q/5YmN57yAXG4gICAgICBpZiAoc3BtLnNwbV9jbnQpIGRbYXBsdXNTdGF0aWMuU1BNX0NOVF0gPSBzcG0uc3BtX2NudCB8fCAnJztcbiAgICAgIGlmIChzcG0uc3BtX3VybCkgZFthcGx1c1N0YXRpYy5TUE1fVVJMXSA9IHNwbS5zcG1fdXJsIHx8ICcnO1xuICAgICAgaWYgKHNwbS5zcG1fcHJlKSBkW2FwbHVzU3RhdGljLlNQTV9QUkVdID0gc3BtLnNwbV9wcmUgfHwgJyc7XG5cbiAgICAgIGQuY25hID0gZXRhZy5jbmE7XG4gICAgICBkLmx2ZXIgPSBzZGtfaW5mby5sdmVyO1xuICAgICAgZC5qc3ZlciA9IHNka19pbmZvLmpzdmVyO1xuICAgICAgLy8g5Y+v6KeG5YyW5Luk566t5qCH6K+GYXV0b3NlbmRcbiAgICAgIGlmICh1c2VyZGF0YS5oYXNPd25Qcm9wZXJ0eSgnYXV0b3NlbmQnKSkge1xuICAgICAgICBkLmF1dG9zZW5kID0gdXNlcmRhdGEuYXV0b3NlbmQ7XG4gICAgICB9XG4gICAgICB2YXIgdXRwYXJhbUNudCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy11dHBhcmFtJyk7XG4gICAgICBpZiAodXRwYXJhbUNudCkge1xuICAgICAgICBkWyd1dHBhcmFtLWNudCddID0gSlNPTi5zdHJpbmdpZnkodXRwYXJhbUNudCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG4gICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjLndoYXRfdG9fc2VuZCB8fCB7fTtcbiAgICAgIHdoYXRfdG9fc2VuZC5wdmRhdGFUb1V0ID0gdGhpcy5nZXRUb1V0RGF0YSgpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kID0gd2hhdF90b19zZW5kO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91dDIuanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiB3aGF0X3RvX2hqbGpfMm5hdGl2ZS5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiBcbiAqIOS9nOeUqO+8miDmoaXmjqXlhoXltYzmg4XlhrXkuIvvvIx1beaXpeW/l+WNj+iuruWPkemAgem7hOmHkeS7pOeureaXpeW/l+e7mW5hdGl2ZVxuICogXG4gKiBkZXBzOiDml6BcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3V0aWxzJyk7XG52YXIgYXBsdXNVdGlscyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgZ2V0VG9OYXRpdmVEYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuICAgICAgdmFyIHdoYXRfdG9fc2VuZCA9IGNvbnRleHQud2hhdF90b19zZW5kIHx8IHt9O1xuICAgICAgdmFyIGxvZ2RhdGEgPSB3aGF0X3RvX3NlbmQubG9nZGF0YSB8fCB7fTtcbiAgICAgIHZhciBzZGtfaW5mbyA9IGxvZ2RhdGEuc2RrX2luZm8gfHwge307XG5cbiAgICAgIHZhciByZXN1bHQgPSB7fSAsc2RrQXJncyA9IHt9LCBjdXN0b21BcmdzID0ge307XG4gICAgICBzZGtBcmdzLmNuYSA9IGV0YWcuY25hO1xuICAgICAgc2RrQXJncy5sdmVyID0gc2RrX2luZm8ubHZlcjtcbiAgICAgIHNka0FyZ3MuanN2ZXIgPSBzZGtfaW5mby5qc3ZlcjtcbiAgICAgIHNka0FyZ3MuaWQgPSB1c2VyZGF0YS5sb2drZXkgfHwgJy0nO1xuICAgICAgc2RrQXJncy50cyA9IERhdGUubm93KCk7IC8v5ZKM6KO4d2Vi5L6n5Lya5pyJ5beu5byCXG4gICAgICBzZGtBcmdzLmlzX2g1ID0gJzEnO1xuICAgICAgc2RrQXJncy5mdW5jSWQgPSBsb2dkYXRhLmV2ZW50X2NvZGU7XG5cbiAgICAgIGlmICh1c2VyZGF0YS5nb2tleSAmJiAodHlwZW9mIHVzZXJkYXRhLmdva2V5ID09PSAnc3RyaW5nJykgJiYgdXNlcmRhdGEuZ29rZXkubWF0Y2goJ2lzX2F1dG8nKSkge1xuICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2RrQXJncy5pc19hdXRvID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB1c2VyZGF0YS5nb2tleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY3VzdG9tQXJncyA9IGFwbHVzVXRpbHMuYXJyMm9iaihhcGx1c1V0aWxzLnBhcmFtMmFycih1c2VyZGF0YS5nb2tleSB8fCAnJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VzdG9tQXJncyA9IHV0aWxEYXNoLmNsb25lRGVlcCh1dGlscy5kZWxldGVJbmZvKHVzZXJkYXRhLmdva2V5LCBbXG4gICAgICAgICAgJ19hbm9ueV9pZCcsICdfZGV2X2lkJywgJ19zZXNzaW9uX2lkJywgJ19zcmNfcG9zX2lkJyxcbiAgICAgICAgICAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaydcbiAgICAgICAgXSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAobG9nZGF0YS51cmwpIHtcbiAgICAgICAgc2RrQXJncy5wYWdlX25hbWUgPSBhcGx1cy5nZXRQYWdlTmFtZSgpIHx8IGN1c3RvbUFyZ3Muc3BtQiB8fCBjdXN0b21BcmdzWydkYXRhLXBhZ2VuYW1lJ10gfHwgY3VzdG9tQXJncy5wYWdlX25hbWUgfHwgbG9nZGF0YS51cmwgfHwgJy0nO1xuICAgICAgICBzZGtBcmdzLnVybCA9IGxvZ2RhdGEudXJsIHx8ICctJztcbiAgICAgICAgaWYgKHNka0FyZ3MucGFnZV9uYW1lICYmIGN1c3RvbUFyZ3Muc3BtQykge1xuICAgICAgICAgIHNka0FyZ3NbJ3NwbS1jbnQnXSA9IFtlbmNvZGVVUklDb21wb25lbnQoc2RrQXJncy5wYWdlX25hbWUpLCBlbmNvZGVVUklDb21wb25lbnQoY3VzdG9tQXJncy5zcG1DKSwgZW5jb2RlVVJJQ29tcG9uZW50KGN1c3RvbUFyZ3Muc3BtRCldLmZpbHRlcihmdW5jdGlvbih2KXtcbiAgICAgICAgICAgIHJldHVybiAhIXY7XG4gICAgICAgICAgfSkuam9pbignLicpO1xuICAgICAgICAgIGRlbGV0ZSBjdXN0b21BcmdzLnNwbUM7XG4gICAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3Muc3BtQjtcbiAgICAgICAgICBkZWxldGUgY3VzdG9tQXJncy5zcG1EO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIChjdXN0b21BcmdzLnBhZ2VfbmFtZSB8fCBjdXN0b21BcmdzWydkYXRhLXBhZ2VuYW1lJ10pIHtcbiAgICAgIC8vICAgZGVsZXRlIGN1c3RvbUFyZ3MucGFnZV9uYW1lO1xuICAgICAgLy8gICBkZWxldGUgY3VzdG9tQXJnc1snZGF0YS1wYWdlbmFtZSddO1xuICAgICAgLy8gfVxuICAgICAgaWYgKGN1c3RvbUFyZ3MudHMpIHtcbiAgICAgICAgLy8g5Yig6ZmkbmF0aXZl5L+d55WZ5a2X5q61dHNcbiAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3MudHM7XG4gICAgICB9XG5cbiAgICAgIHZhciBjbG9uZVAgPSB1dGlsRGFzaC5jbG9uZURlZXAoY3VzdG9tQXJncyk7XG4gICAgICBmb3IgKHZhciBrIGluIGNsb25lUCkge1xuICAgICAgICBpZiAodHlwZW9mIGsgPT09ICdzdHJpbmcnICYmIHV0aWxzLnN0YXJ0c1dpdGgoaywgJ18nKSkge1xuICAgICAgICAgIHNka0FyZ3Nba10gPSBjbG9uZVBba107XG4gICAgICAgICAgZGVsZXRlIGN1c3RvbUFyZ3Nba107XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmVzdWx0LnNka0FyZ3MgPSB1dGlsRGFzaC5jbG9uZURlZXAoc2RrQXJncyk7XG4gICAgICByZXN1bHQuY3VzcCA9IGN1c3RvbUFyZ3M7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB3aGF0X3RvX3NlbmQgPSBjLndoYXRfdG9fc2VuZCB8fCB7fTtcbiAgICAgIHdoYXRfdG9fc2VuZC5oamxqZGF0YVRvVW1OYXRpdmUgPSB0aGlzLmdldFRvTmF0aXZlRGF0YSgpO1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kID0gd2hhdF90b19zZW5kO1xuICAgICAgcmV0dXJuOyBcbiAgICB9XG4gIH07XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VtMm5hdGl2ZS5qc1xuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuICogQVBJ5o+S5Lu2XG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9hcGkvbWFpbicpKHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX2FwaS5qc1xuLy8gbW9kdWxlIGlkID0gODFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuICogQVBJ5o+S5Lu2XG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSBsb2dDb25maWcge1xuICogICAgcHY6IHtcbiAqICAgICAgcGx1Z2luczogcmVxdWlyZSgnLi9saWJfbG9nL3BsdWdpbnNfcHYnKSxcbiAqICAgICAgY29udGV4dDogcmVxdWlyZSgnLi9saWJfbG9nL2NvbmZpZy9jb25maWdfdScpXG4gKiAgICB9LFxuICogICAgaGpsajoge1xuICogICAgICBwbHVnaW5zOiByZXF1aXJlKCcuL2xpYl9sb2cvcGx1Z2luc19oamxqJyksXG4gKiAgICAgIGNvbnRleHQ6IHJlcXVpcmUoJy4vbGliX2xvZy9jb25maWcvY29uZmlnX2hqbGpfdScpXG4gKiAgICB9XG4gKiAgfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChsb2dDb25maWcpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIGlmIChhcGx1cy5fYXBsdXNfYXBpKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIGFwbHVzLl9hcGx1c19hcGkgPSB7XG4gICAgICBzdGF0dXM6ICdjb21wbGV0ZSdcbiAgICB9O1xuICB9XG5cbiAgdmFyIGFwbHVzT2JqID0gcmVxdWlyZSgnLi9hcGx1cycpLnJ1bi5jcmVhdGUoe1xuICAgIGxvZ0NvbmZpZzogbG9nQ29uZmlnXG4gIH0pO1xuICBmb3IgKHZhciBrIGluIGFwbHVzT2JqKSB7XG4gICAgYXBsdXNba10gPSBhcGx1c09ialtrXTtcbiAgfVxuXG4gIC8vIOWIneWni+WMlnB2aWRcbiAgcmVxdWlyZSgnQHV0aWxzL3V0aWxQdmlkJykubWFrZVBWSWQoKTtcblxuICB2YXIgbXNnQXJyID0gWydhcGx1c1JlYWR5JywgJ2NvbXBsZXRlJ107XG4gIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNnQXJyKTtcbiAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dBcnIpO1xuXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBkb2MgPSBkb2N1bWVudDtcblxudmFyIEJhc2UgPSByZXF1aXJlKCdAY29yZS9CYXNlJyk7XG52YXIgY29va2llID0gcmVxdWlyZSgnQHV0aWxzL2Nvb2tpZScpO1xudmFyIHV0aWxFdmVudCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRXZlbnQnKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsR1EgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdRJyk7XG52YXIgUmVkdWNlciA9IHJlcXVpcmUoJ0Bjb3JlL1JlZHVjZXInKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG5cbnZhciBtZXRhSW5mbyA9IHJlcXVpcmUoJy4uL2xpYl9tZXRhL21ldGFJbmZvQWxpJyk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xudmFyIGZuX2JlZm9yZV9wdiA9IFtdO1xudmFyIGZuX2FmdGVyX3B2ID0gW107XG52YXIgZm5fYmVmb3JlX3JlY29yZCA9IFtdO1xudmFyIGZuX2FmdGVyX3JlY29yZCA9IFtdO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG52YXIgRU1QVFlfRk4gPSBmdW5jdGlvbiAoKSB7fTtcblxuZnVuY3Rpb24gZ2V0TW1zdGF0VGltZW91dCAoKSB7XG4gIHZhciB0aW1lID0gNTAwMDtcbiAgdHJ5IHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgbG9uZ3RpbWUgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtbW1zdGF0LXRpbWVvdXQnKTtcbiAgICBpZiAobG9uZ3RpbWUpIHtcbiAgICAgIHZhciB0aW1lSW50ID0gcGFyc2VJbnQobG9uZ3RpbWUpO1xuICAgICAgaWYgKHRpbWVJbnQgPj0gMTAwMCAmJiB0aW1lSW50IDw9IDEwMDAwKSB7XG4gICAgICAgIHRpbWUgID0gdGltZUludDtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiB0aW1lO1xufVxuXG5leHBvcnRzLnJ1biA9IEJhc2UuZXh0ZW5kKHtcbiAgLyoqXG4gICAqIOazqOWGjCBzZW5kUFYg5omn6KGM5LmL5YmN55qE5pa55rOVXG4gICAqIOi/meS6m+aWueazleWwhuWcqCBzZW5kUFYg5LmL5YmN5L6d5qyh5omn6KGM77yM5aaC5p6c5pyJ5LiA5Liq5pi+5byP6L+U5ZueIGZhbHNl77yM5YiZIHNlbmRQViDlsIbooqvlj5bmtohcbiAgICogQHBhcmFtIGZuIHtmdW5jdGlvbn1cbiAgICovXG4gIGJlZm9yZVNlbmRQVjogZnVuY3Rpb24gKGZuKSB7XG4gICAgZm5fYmVmb3JlX3B2LnB1c2goZm4pO1xuICB9LFxuXG4gIC8qKlxuICAgKiDms6jlhowgc2VuZFBWIOaJp+ihjOS5i+WQjueahOaWueazlVxuICAgKiDov5nkupvmlrnms5XlsIblnKggc2VuZFBWIOS5i+WQjuS+neasoeaJp+ihjFxuICAgKiBAcGFyYW0gZm4ge2Z1bmN0aW9ufVxuICAgKi9cbiAgLy8gYWZ0ZXJTZW5kUFY6IGZ1bmN0aW9uIChmbikge1xuICAvLyAgIGZuX2FmdGVyX3B2LnB1c2goZm4pO1xuICAvLyB9LFxuXG4gIC8qKlxuICAgKiBHRVQg6K+35rGC5LiA5Liq5Zu+54mH5Zyw5Z2A77yM5ZCR5pyN5Yqh5Zmo5Y+R6YCB5omT54K5XG4gICAqXG4gICAqIEBwYXJhbSB1cmwge1N0cmluZ31cbiAgICogQHBhcmFtIFtkYXRhU3RyXSB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW21ldGhvZF0ge1N0cmluZ30gIC8vIFBPU1QgT1IgR0VUXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIHNlbmQ6IGZ1bmN0aW9uICh1cmwsIGRhdGFTdHIsIG1ldGhvZCkge1xuICAgIHZhciBzcmM7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgLy8g5aaC5p6cdXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0XG4gICAgaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG4gICAgICB2YXIgcHJvdG9jYWwgPSBhcGx1c1N0YXRpYy5IVFRQUztcbiAgICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgICB9XG4gICAgICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgICB9XG4gICAgLy8g5oyH5a6a5LqGUE9TVOWImeS8mOWFiOaMiVBPU1Tlj5HpgIFcbiAgICAvLyDlvLnlhoXpu5jorqTkvJjlhYhzZW5kQmVhY29uXG4gICAgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnICYmIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3Iuc2VuZEJlYWNvbikge1xuICAgICAgc3JjID0gcmVxdWVzdC5wb3N0RGF0YSh1cmwsIGRhdGFTdHIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzcmMgPSByZXF1ZXN0LnNlbmRJbWcodXJsICsgJz8nICsgZGF0YVN0ciwgZ2V0TW1zdGF0VGltZW91dCgpKTtcbiAgICB9XG4gICAgYXBsdXMucmVxID0gc3JjO1xuICAgIHJldHVybiBzcmM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBbT2JqZWN0XSBjb25maWc6IHtcbiAgICogICBjaGVja3N1bTogMTExMTExMTEsICAgLy8g5qC55o2uc3BtYSxzcG1i6Ieq5Yqo55Sf5oiQ55qE5LiA5Liq5a2X56ym5LiyXG4gICAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2VcbiAgICogICBwYWdlX2lkOiAxMjMsICAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuICAgKiAgIGdva2V5OiAnJywgICAgICAgICAgICAvLyDnlKjmiLfoh6rlrprkuYnlj4LmlbDvvIjlkJHkuIvlhbzlrrnvvIxUT0RP5ZCO57ut5LiL5o6J77yJXG4gICAqIH1cbiAgICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhOiB7XG4gICAqICAgcmVmZXJyZXI6ICdodHRwOi8vd3d3LnRhb2Jhby5jb20nICAgLy8g5bCG5Lya5pu/5o2icHbor7fmsYLnmoRwcmXlj4LmlbBcbiAgICogICB4eHgxOiAndnZ2MScsXG4gICAqICAgeHh4MjogJ3Z2djInLFxuICAgKiAgIHh4eE46ICd2dnZOJyxcbiAgICogfSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG4gICAqL1xuICBzZW5kUFY6IGZ1bmN0aW9uIChjb25maWcsIHVzZXJkYXRhKSB7XG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICAgIC8vIDHjgIFiZWZvcmVTZW5kUFbvvIzlpoLmnpzku7vmhI/kuIDkuKrlh73mlbDov5Tlm57lgLzkuLogZmFsc2XvvIzliJnkuK3mlq3lubbpgIDlh7rvvIzkuI3lj5HpgIEgUFYg6K+35rGCXG4gICAgaWYgKHV0aWxEYXNoLmFueShmbl9iZWZvcmVfcHYsIGZ1bmN0aW9uIChmbikge1xuICAgICAgcmV0dXJuIGZuKGFwbHVzLCBjb25maWcpID09PSBmYWxzZTtcbiAgICB9KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgc2tpcFJ1bGVzID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfU0tJUF9BUFZfUlVMRVMpIHx8IFtdO1xuICAgIGlmICh1dGlsQXJyYXkuaXRlbU1hdGNoKHNraXBSdWxlcywgbG9jYXRpb24uaHJlZikgJiYgY29uZmlnLmlzX2F1dG8pIHtcbiAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIC8vICAgbXNnOiAn5qC55o2u6KeE5YiZOicgKyBza2lwUnVsZXMgKyAnLCDlv73nlaXoh6rliqhwduS4iuaKpScgKyBsb2NhdGlvbi5ocmVmXG4gICAgICAvLyB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gMuOAgeaJp+ihjCBzZW5kcHYg5o+S5Lu2XG4gICAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICAgIGNvbmZpZy5yZWNvcmRUeXBlID0gJ1BWJzsgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG4gICAgXG4gICAgdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcbiAgICB2YXIgaXNBbGkgPSBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGk7IFxuICAgIGlmIChpc0FsaSB8fCBpc1VNKSB7XG4gICAgICBjb25maWcubWV0aG9kID0gJ1BPU1QnO1xuICAgIH1cblxuICAgIHZhciBwdiA9IGFwbHVzLmxvZ0NvbmZpZy5wdjtcbiAgICByZWR1Y2VyLnJ1bih7XG4gICAgICBwbHVnaW5zOiBwdi5wbHVnaW5zLFxuICAgICAgY29udGV4dDogdXRpbERhc2guY2xvbmVEZWVwKHB2LmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuICAgIH0sIHtcbiAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgdXNlcmRhdGE6IHVzZXJkYXRhLFxuICAgICAgcHVic3ViVHlwZTogJ3B2JyxcbiAgICAgIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9wdixcbiAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2J1xuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW1zIGNvbmZpZyB7XG4gICAqICAgY29tcG9uZW50SWQ6IDE0NjAwOFxuICAgKiAgIHBhZ2VJZDog6YeH6ZuG566h55CG5bmz5Y+w5LiK55Sf5oiQ55qE5ZSv5LiA55qEcGFnZUlkIGh0dHBzOi8vbG9nMi1kYWlseS5hbGliYWJhLm5ldC90cmFjay9kZXZlbG9wL2FyZWEtbWFuYWdlbWVudC9kZXRhaWwvMTQ2MDAzLzg4MDAwNC8xNDYwMDhcbiAgICogfVxuICAgKi9cbiAgcGFnZUVudGVyOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKGFwbHVzU3RhdGljLlBVQkxJU0gsIFthcGx1c1N0YXRpYy5QQUdFX0VOVEVSLCBjb25maWddKTtcbiAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuQ0FDSEVfUFVCUywgW2FwbHVzU3RhdGljLlBBR0VfRU5URVIsIGNvbmZpZ10pO1xuICB9LFxuXG4gIC8qKlxuICAgKiDlhbzlrrl3ZWJ2aWV35YaF5Zue6LCDZ29sZGxvZy5nZXRQYXJhbeaOpeWPo+eahOWdkVxuICAgKi9cbiAgZ2V0UGFyYW06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHNpZCkge1xuICAgIHZhciB3diA9IHdpbmRvdy5XaW5kVmFuZSB8fCB7fTtcbiAgICB2YXIgdmFsdWUgPSB3diAmJiB0eXBlb2Ygd3YuZ2V0UGFyYW0gPT09ICdmdW5jdGlvbicgPyB3di5nZXRQYXJhbShzaWQpIDogJyc7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuXG4gIGJlZm9yZVJlY29yZDogZnVuY3Rpb24gKGZuKSB7XG4gICAgZm5fYmVmb3JlX3JlY29yZC5wdXNoKGZuKTtcbiAgfSxcblxuICBhZnRlclJlY29yZDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGZuKSB7XG4gICAgZm5fYWZ0ZXJfcmVjb3JkLnB1c2goZm4pO1xuICB9LFxuXG4gIC8qKlxuICAgKiDlj5HpgIHpu4Tph5Hku6Tnrq3miZPngrlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGxvZ2tleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZ21rZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGdva2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2Qg6K+35rGC5pa55rOV5Li6IFBPU1Qgb3IgR0VUXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBjYlxuICAgKi9cbiAgcmVjb3JkOiBmdW5jdGlvbiAobG9na2V5LCBnbWtleSwgZ29rZXksIG1ldGhvZCwgY2IpIHtcbiAgICAvLyBtZXRob2QgPSAnR0VUJzsgLy8gdXRpbC5pc1N0cmluZyhtZXRob2QpID8gbWV0aG9kLnRvVXBwZXJDYXNlKCkgOiAnR0VUJztcbiAgICAvLyBiZWZvcmVSZWNvcmQg77yM5aaC5p6c5Lu75oSP5LiA5Liq5Ye95pWw6L+U5Zue5YC85Li6IGZhbHNl77yM5YiZ5Lit5pat5bm26YCA5Ye677yM5LiN5Y+R6YCBIHJlY29yZCDor7fmsYJcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgaXNBbGkgPSBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGk7XG4gICAgdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcbiAgICBpZiAobG9na2V5ICYmIGxvZ2tleS5pbmRleE9mKCcvJykgIT09IDAgJiYgaXNBbGkpIHtcbiAgICAgIGxvZ2tleSA9ICcvJyArIGxvZ2tleTtcbiAgICB9XG4gICAgaWYgKHV0aWxEYXNoLmFueShmbl9iZWZvcmVfcmVjb3JkLCBmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHJldHVybiBmbihhcGx1cykgPT09IGZhbHNlO1xuICAgIH0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcbiAgICB2YXIgaGpsaiA9IGFwbHVzLmxvZ0NvbmZpZy5oamxqO1xuICAgIHJlZHVjZXIucnVuKHtcbiAgICAgIHBsdWdpbnM6IGhqbGoucGx1Z2lucyxcbiAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuICAgIH0sIHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcbiAgICAgICAgbWV0aG9kOiBpc1VNID8gKG1ldGhvZCB8fCAnUE9TVCcpIDogbWV0aG9kXG4gICAgICAgIC8vIG1ldGhvZDogbWV0aG9kIHx8ICdQT1NUJ1xuICAgICAgfSxcbiAgICAgIHVzZXJkYXRhOiB7XG4gICAgICAgIGxvZ2tleTogbG9na2V5LFxuICAgICAgICBnbWtleTogZ21rZXksXG4gICAgICAgIGdva2V5OiBnb2tleSB8fCB7fVxuICAgICAgfSxcbiAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcbiAgICAgIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9yZWNvcmQsXG4gICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICBpZiAoaXNGdW5jdGlvbihjYikpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiDmmrTpnLLnu5lhcGx1c19zcG0uanMsIOWPkemAgeWPr+inhuWMlum7hOmHkeS7pOeurVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbG9na2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBnbWtleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZ29rZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCDor7fmsYLmlrnms5XkuLogUE9TVCBvciBHRVRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNiXG4gICAqL1xuICByZWNvcmRVZGF0YTogZnVuY3Rpb24gKGxvZ2tleSwgZ21rZXksIGdva2V5LCBtZXRob2QsIGNiKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICAgIHZhciBoamxqID0gYXBsdXMubG9nQ29uZmlnLmhqbGo7XG4gICAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpO1xuICAgIHJlZHVjZXIucnVuKHtcbiAgICAgIHBsdWdpbnM6IGhqbGoucGx1Z2lucyxcbiAgICAgIGNvbnRleHQ6IHV0aWxEYXNoLmNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuICAgIH0sIHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICByZWNvcmRUeXBlOiAnREFUQUNMSUNLX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcbiAgICAgICAgbWV0aG9kOiBpc0FsaSA/IG1ldGhvZCA6IChtZXRob2QgfHwgJ1BPU1QnKVxuICAgICAgfSxcbiAgICAgIHVzZXJkYXRhOiB7XG4gICAgICAgIGxvZ2tleTogbG9na2V5LFxuICAgICAgICBnbWtleTogZ21rZXksXG4gICAgICAgIGdva2V5OiBnb2tleSB8fCB7fVxuICAgICAgfSxcbiAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcbiAgICAgIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9yZWNvcmQsXG4gICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICBpZiAoaXNGdW5jdGlvbihjYikpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICog5pu05paw6aG16Z2i55qEIGHjgIFiIOS9jVxuICAgKiDpnIDmsYLlj4Lop4HvvJpodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS9hbGlsb2cva2IvaXNzdWVzLzEzN1xuICAgKiBAcGFyYW0gYSB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW2JdIHtTdHJpbmd9XG4gICAqIEBwYXJhbSBbY2JdIHtGdW5jdGlvbn1cbiAgICovXG4gIHNldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChhLCBiLCBjYikge1xuICAgIC8qXG4gICAgICogW3NwbUZsYWddIHtib29sZWFufSAyMDE4LzMvMTItNC8zIOivpeagh+ivhuS4unRydWXvvIzooajnpLpzcG0tcHJl5ZKMc3BtLXVybOS4jeS8muaUueWPmFxuICAgICAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2x6ZHRyYWNraW5nL3ZveWFnZXJhcHAvcGRwdjMjYXBsdXMtdHJhY2tpbmctbGliXG4gICAgICovXG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIHNwbUZsYWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtc3BtLWZpeGVkJyk7XG4gICAgdmFyIGNhbGxiYWNrID0gdHlwZW9mIGNiID09PSAnZnVuY3Rpb24nID8gY2IgOiBmdW5jdGlvbiAoKSB7fTtcbiAgICAvLyDmm7TmlrDlhoXpg6jlj5jph4/lgLxcbiAgICBhcGx1cy5zcG1fYWIgPSBhcGx1cy5zcG1fYWIgfHwgW107XG4gICAgdmFyIG9sZF9zcG1hYiA9IHV0aWxEYXNoLmNsb25lRGVlcChhcGx1cy5zcG1fYWIpO1xuXG5cbiAgICBpZiAoYSkge1xuICAgICAgYXBsdXMuc3BtX2FiWzBdID0gJycgKyBhO1xuICAgICAgYXBsdXMuXyQuc3BtLmRhdGEuYSA9ICcnICsgYTtcbiAgICB9XG4gICAgaWYgKGIpIHtcbiAgICAgIGFwbHVzLnNwbV9hYlsxXSA9ICcnICsgYjtcbiAgICAgIGFwbHVzLl8kLnNwbS5kYXRhLmIgPSAnJyArICBiO1xuICAgIH1cblxuICAgIC8vIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgdmFyIG1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKTtcbiAgICAvLyDnlJ/miJAgUFYg5omT54K555qE5pWw5o2uIFRPRE9cbiAgICBhcGx1cy5zcG1BUEkgJiYgYXBsdXMuc3BtQVBJLnNwYUluaXQoYXBsdXMsIG1ldGFfaW5mbywgb2xkX3NwbWFiKTtcblxuICAgIGlmIChzcG1GbGFnICE9PSAnMScpIHtcbiAgICAgIHZhciBfc3BtYWJfcHJlID0gb2xkX3NwbWFiLmpvaW4oJy4nKTtcbiAgICAgIGFwbHVzLnNwbWFiX3ByZSA9IF9zcG1hYl9wcmU7XG4gICAgfVxuICAgIHZhciBtc2dzID0gWydzZXRQYWdlU1BNJywge1xuICAgICAgc3BtYWJfcHJlOiBhcGx1cy5zcG1hYl9wcmUsXG4gICAgICBzcG1hYjogYXBsdXMuc3BtX2FiLmpvaW4oJy4nKVxuICAgIH1dO1xuICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblxuICAgIC8vIHJlc2V0TWV0YUFuZEJvZHkoKTtcbiAgICAvLyByZXNldE1vZHVsZXMoKTtcblxuICAgIGNhbGxiYWNrKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWKqOaAgemFjee9rm1ldGFcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtcbiAgICogQHBhcmFtIHtPYmplY3R9IHZcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMge1xuICAgKiAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcbiAgICogICBwcmlvcml0eTogMSwgLy8g6K6+572u5LqG5LyY5YWI57qnMe+8jOWQjOaXtuaciTxtZXRhIG5hbWU9XCJhcGx1cy14LXNldHRpbmdzXCIgY29udGVudD1cIiR7YXBsdXPmj5Lku7blkI19JFwiPu+8jOi/meWPquiDveiuvue9ruS4gOasoVxuICAgKiB9XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBzZXRNZXRhSW5mbzogZnVuY3Rpb24oYXJnMSwgdmFsdWUsIG9wdHMpIHtcbiAgICB2YXIgaztcbiAgICB2YXIgdjtcbiAgICB2YXIgZGVmYXVsdE1vZGUgPSAnT1ZFUldSSVRFJztcbiAgICB2YXIgbW9kZSA9IGRlZmF1bHRNb2RlO1xuICAgIGlmICh0eXBlb2YgYXJnMSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGsgPSBhcmcxLm1ldGFOYW1lO1xuICAgICAgdiA9IGFyZzEubWV0YVZhbHVlO1xuICAgICAgbW9kZSA9IGFyZzEubW9kZSB8fCBkZWZhdWx0TW9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgayA9IGFyZzE7XG4gICAgICB2ID0gdmFsdWU7XG4gICAgfVxuICAgIGlmIChtb2RlID09PSBkZWZhdWx0TW9kZSkge1xuICAgICAgaWYgKG1ldGFJbmZvLnNldE1ldGFJbmZvKGssIHYsIG9wdHMpKSB7XG4gICAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICAgIF8kLm1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKTtcbiAgICAgICAgdmFyIHJzID0gdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cbiAgICAgICAgdmFyIG1zZ3MgPSBbJ3NldE1ldGFJbmZvJywgaywgdiwgb3B0c107XG4gICAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG4gICAgICAgIHJldHVybiBycztcbiAgICAgIH0gXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmFwcGVuZE1ldGFJbmZvKGssIHYpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG4gICAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuICAgKiAgLSBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgY2FsbGVkIG9uIEFycmF5IHZhbHVlcy5cbiAgICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuICAgKiAgQHBhcmFtIGtcbiAgICogIEBwYXJhbSB2XG4gICAqL1xuICBhcHBlbmRNZXRhSW5mbzogbWV0YUluZm8uYXBwZW5kTWV0YUluZm8sXG5cbiAgLyoqXG4gICAqIGh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9wcm9qZWN0L2FwbHVzX2Nsb3VkIzMzMmRlNjJjXG4gICAqL1xuICB1cGRhdGVQYWdlUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICBpZiAocHJvcGVydGllcyAmJiB0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChwcm9wZXJ0aWVzLl9wYWdlKSB7XG4gICAgICAgIHByb3BlcnRpZXMucGFnZU5hbWUgPSBwcm9wZXJ0aWVzLl9wYWdlO1xuICAgICAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtcGFnZW5hbWUnLCBwcm9wZXJ0aWVzLnBhZ2VOYW1lKTtcbiAgICAgICAgZGVsZXRlIHByb3BlcnRpZXMuX3BhZ2U7XG4gICAgICB9XG4gICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtY3B2ZGF0YScsIHByb3BlcnRpZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgIG1zZzogJ3dhcm5pbmc6IHR5cGVvZiB1cGRhdGVQYWdlUHJvcGVydGllc1xcJ3MgcGFyYW1zIG11c3QgYmUgb2JqZWN0J1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCM2MDM0YzFkYVxuICAgKi9cbiAgdXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocHJvcGVydGllcykge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGFwbHVzLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1uZXh0cGFnZS1wcm9wZXJ0aWVzJywgcHJvcGVydGllcyk7ICBcbiAgICB9IGVsc2Uge1xuICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICBtc2c6ICd3YXJuaW5nOiB0eXBlb2YgdXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzXFwncyBwYXJhbXMgbXVzdCBiZSBvYmplY3QnXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gdmFyIHEgPSAod2luZG93LmdvbGRsb2dfcXVldWUgfHwgKHdpbmRvdy5nb2xkbG9nX3F1ZXVlID0gW10pKTtcbiAgICAvLyBxLnB1c2goe1xuICAgIC8vICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgLy8gICBhcmd1bWVudHM6IFsnTmF0aXZlNEFwbHVzRXhlY1JlYWR5JywgZnVuY3Rpb24oc3RhdHVzKXtcbiAgICAvLyAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgIC8vICAgICAgIC8vIOmFjee9rm1ldGFcbiAgICAvLyAgICAgICBpZiAodHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gICAgICAgICB3aW5kb3cuQXBsdXM0VVQudXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgIC8vICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgLy8gICAgICAgICAgIG1zZzogJ3dhcm5pbmc6IHR5cGVvZiB1cGRhdGVQYWdlUHJvcGVydGllc1xcJ3MgcGFyYW1zIG11c3QgYmUgb2JqZWN0J1xuICAgIC8vICAgICAgICAgfSk7XG4gICAgLy8gICAgICAgfVxuICAgIC8vICAgICB9XG4gICAgLy8gICB9XVxuICAgIC8vIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBnZXQgbWV0YUluZm8gYnkga2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBtZXRhSW5mby5nZXRNZXRhSW5mbyhrKTtcbiAgfSxcblxuICAvLyDkuovku7bnu5HlrprmjqXlj6PvvIzku47moLjlv4PlupPmmrTpnLLlh7rljrvkvpthcGx1c0pT5o+S5Lu25L2/55SoXG4gIG9uOiB1dGlsRXZlbnQub24sXG4gIC8vIOa3seW6puWFi+mahu+8jOS7juaguOW/g+W6k+aatOmcsuWHuuWOu+S+m2FwbHVzSlPmj5Lku7bkvb/nlKhcbiAgY2xvbmVEZWVwOiB1dGlsRGFzaC5jbG9uZURlZXAsXG4gIHNldENvb2tpZTogY29va2llLnNldENvb2tpZSxcbiAgZ2V0Q29va2llOiBjb29raWUuZ2V0Q29va2llLFxuXG4gIC8vIFdFQuerr+aaguS4jemcgOimgeWunueOsFxuICBwYWdlQXBwZWFyOiBFTVBUWV9GTixcblxuICAvLyBXRULnq6/mmoLkuI3pnIDopoHlrp7njrBcbiAgcGFnZURpc2FwcGVhcjogRU1QVFlfRk4sXG5cbiAgdXBkYXRlUGFnZVV0cGFyYW06IEVNUFRZX0ZOLFxuXG4gIHVwZGF0ZU5leHRQYWdlVXRwYXJhbTogRU1QVFlfRk4sXG5cbiAgLyoqXG4gICAqIEBwYXJhbXMge09iamVjdH0gcHJvcGVydGllc1xuICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG4gICAqL1xuICB1cGRhdGVTZXNzaW9uUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICBpZiAodHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICBhcGx1cy5zZXRNZXRhSW5mbygnX3Nlc3Npb25fYXJncycsIHByb3BlcnRpZXMpO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIOWPi+ebn+S6keS4iuiuvue9rumhtemdoue8lueggVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGFnZW5hbWVcbiAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuICAgKiAqLyAgXG4gIHNldFBhZ2VOYW1lOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYWdlbmFtZSkge1xuICAgIGlmICghcGFnZW5hbWUgfHwgdHlwZW9mIHBhZ2VuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICBtc2c6ICdzZXRQYWdlTmFtZSBmYWlsZWQ6ICcgKyAnIHBhZ2VuYW1lPScgKyBwYWdlbmFtZSBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgYm9keSA9IGRvYy5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgdHJ5IHtcbiAgICAgIGJvZHkuc2V0QXR0cmlidXRlKCdkYXRhLXBhZ2VuYW1lJywgcGFnZW5hbWUpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICBtc2c6ICdzZXRQYWdlTmFtZSBmYWlsZWQ6ICcgKyAnIGVycj0nICsgZSBcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBnZXRQYWdlTmFtZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdpbmRvdy5kb2N1bWVudC5ib2R5ICYmIHdpbmRvdy5kb2N1bWVudC5ib2R5LmRhdGFzZXQgJiYgd2luZG93LmRvY3VtZW50LmJvZHkuZGF0YXNldC5wYWdlbmFtZSkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5kb2N1bWVudC5ib2R5LmRhdGFzZXQucGFnZW5hbWU7XG4gICAgfSBcbiAgICByZXR1cm4gJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiOt+WPluWFg+e0oOeahHNwbS1hbmNob3ItaWRcbiAgICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnQgXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IGRhdGEtc3BtLWFuY2hvci1pZFxuICAgKi9cblxuICBnZXRFbGVtZW50U1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50IHx8ICFlbGVtZW50LmRhdGFzZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNwbS1hbmNob3ItaWQnKTtcbiAgfVxufSk7XG5cbi8vIGV4cG9ydHMucnVuID0gb3BlbkFQSS5pbml0KHJ1bik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9hcGkvYXBsdXMuanNcbi8vIG1vZHVsZSBpZCA9IDgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgQ29tcG9zZSA9IHJlcXVpcmUoJ0Bjb3JlL2NvbXBvc2UnKTtcbnZhciBwbHVnaW5zTG9hZGVyID0gcmVxdWlyZSgnQGNvcmUvcGx1Z2luc0xvYWRlcicpO1xuXG4vKipcbiAqIHNlbnB2XG4gKiBAcGFyYW0gW09iamVjdF0gY29uZmlnOiB7XG4gKiAgIGNoZWNrc3VtOiAxMTExMTExMSwgICAvLyDmoLnmja5zcG1hLHNwbWLoh6rliqjnlJ/miJDnmoTkuIDkuKrlrZfnrKbkuLJcbiAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2VcbiAqICAgcGFnZV9pZDogMTIzLCAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuICogICBnb2tleTogJycsICAgICAgICAgICAvLyDnm67liY3lt7Lnu4/lpLHmlYhcbiAqICAgcmVmZXJyZXI6ICdodHRwOi8vd3d3LnRhb2Jhby5jb20nICAgLy8g5bCG5Lya5pu/5o2icHbor7fmsYLnmoRwcmXlj4LmlbBcbiAqIH0gLy8g5ZCMIGFwbHVzLmxhdW5jaOesrOS6jOS4quWFpeWPguKAnG1hbnVhbOKAnVxuICpcbiAqIEBwYXJhbSBbT2JqZWN0XSB1c2VyZGF0YSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG4gKlxuICogQHBhcmFtIFtPYmplY3RdIG9iaiAtIHtmbl9hZnRlcl9wdjogZm5fYWZ0ZXJfcHYsIHh4eDogeHh4fVxuICpcbiAqIHN0ZXAxOiBsb2FkZXIgcGx1Z2lucyAgbWlkZGxld2FyZVxuICogc3RlcDI6IGxvYWRlciBkb1NlbmRQdiBtaWRkbGV3YXJlXG4gKiBzdGVwMzogcnVuIG1pZGRsZXdhcmVzXG4gKi9cblxudmFyIFJlZHVjZXIgPSBmdW5jdGlvbigpIHtcbn07XG5cbi8qKlxuICogQHBhcmFtcyBPYmplY3QgQ09ORklHIHtcbiAqICAgY29udGV4dDogeHh4LFxuICogICBwbHVnaW5zOiB4eHggXG4gKiB9XG4gKiBAcGFyYW1zIE9iamVjdCBvcHRzIHtcbiAqICAgY29uZmlnOiBjb25maWcsXG4gKiAgIHVzZXJkYXRhOiB1c2VyZGF0YSxcbiAqICAgcHVic3ViVHlwZTogJ3B2JyB8fCAnaGpsaicgfHwgJ3ByZXB2J1xuICogICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9wdicgfHwgJ213X2NoYW5nZV9oamxqJyB8fCAnbXdfY2hhbmdlX3ByZXB2J1xuICogICBtZXNzYWdlRm5RdWV1ZTogW2ZuMSwgZm4yIC4uLl1cbiAqIH1cbiAqL1xuUmVkdWNlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKENPTkZJRywgb3B0cywgY2FsbGJhY2spIHtcbiAgLy8gMeOAgWluaXQgcGx1Z2luc1xuICB2YXIgcGwgPSBuZXcgcGx1Z2luc0xvYWRlcigpO1xuICBwbC5pbml0KHtcbiAgICBtaWRkbGV3YXJlOiBbXSxcbiAgICBjb25maWc6IG9wdHMuY29uZmlnLFxuICAgIHBsdWdpbnM6IENPTkZJRy5wbHVnaW5zXG4gIH0pO1xuICB2YXIgbWlkZGxld2FyZSA9IHBsLnJ1bigpO1xuXG4gIC8vIOWIneWni+WMluS4iuS4i+aWh+eOr+Wig++8jGNvbnRleHTlhoXnmoRkYXRh5bCG5Lya5Zyo5ZCE5Liq5o+S5Lu25Lit6L+b6KGM6LWL5YC85oiW6ICF5L+u5pS577yI6YeN6KaB77yJXG4gIHZhciBjb250ZXh0ID0gaXNGdW5jdGlvbihDT05GSUcuY29udGV4dCkgPyBuZXcgQ09ORklHLmNvbnRleHQoKSA6IENPTkZJRy5jb250ZXh0O1xuICBjb250ZXh0LnVzZXJkYXRhID0gb3B0cy51c2VyZGF0YTtcbiAgY29udGV4dC5sb2dnZXIgPSB1dGlsTG9nZ2VyLmxvZ2dlcjtcblxuICB2YXIgYXBwID0ge1xuICAgIGNvbnRleHQ6IGNvbnRleHQsXG4gICAgcHVic3ViOiB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdhcGx1c19wdWJzdWInKSxcbiAgICBwdWJzdWJUeXBlOiBvcHRzICYmIG9wdHMucHVic3ViVHlwZVxuICB9O1xuXG4gIHZhciBjb21wb3NlID0gbmV3IENvbXBvc2UoKTtcbiAgY29tcG9zZS5jcmVhdGUoYXBwKTtcbiAgLy8g5omn6KGM5Lit6Ze05Lu2XG4gIGNvbXBvc2Uud3JhcChtaWRkbGV3YXJlLCBmdW5jdGlvbigpIHtcbiAgICBhcHAuY29udGV4dC5zdGF0dXMgPSBhcGx1c1N0YXRpYy5DT01QTEVURTtcbiAgICBpZiAob3B0cykge1xuICAgICAgaWYgKG9wdHMubWlkZGxld2FyZU1lc3NhZ2VLZXkpIHtcbiAgICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhbb3B0cy5taWRkbGV3YXJlTWVzc2FnZUtleSwgYXBwLmNvbnRleHRdKTsgIFxuICAgICAgfVxuICAgICAgaWYgKG9wdHMubWVzc2FnZUZuUXVldWUpIHtcbiAgICAgICAgZWFjaChvcHRzLm1lc3NhZ2VGblF1ZXVlLCBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICBmbih1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyksIENPTkZJRyk7XG4gICAgICAgIH0pOyAgXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgY2FsbGJhY2soYXBwLmNvbnRleHQpO1xuICAgIH1cbiAgfSkoKTtcblxufTtcbm1vZHVsZS5leHBvcnRzID0gUmVkdWNlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvUmVkdWNlci5qc1xuLy8gbW9kdWxlIGlkID0gODRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvY29tcG9zZS5qc1xuICog5Ye95pWw6Zif5YiX5YyF6KOF5ZmoIEV4cG9zZSBjb21wb3NpdG9yXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblxuZnVuY3Rpb24gY29tcG9zZSAoKSB7fTtcblxuY29tcG9zZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgLyoqXG4gICAqIGNyZWF0ZeWunumZheS4iuaYr+WvuW5ld+eahOWwgeijhe+8m1xuICAgKiBjcmVhdGXov5Tlm57nmoTlrp7kvovlrp7pmYXkuIrlsLHmmK9uZXfmnoTpgKDlh7rnmoTlrp7kvovvvJtcbiAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuICAgKi9cbiAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuICAgIGlmICh0eXBlb2YgdGhpc1tuYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXNbbmFtZV0gPSBwcm9wc1tuYW1lXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5jb21wb3NlLnByb3RvdHlwZS5jYWxsZWRMaXN0ID0gW107XG5cbmNvbXBvc2UucHJvdG90eXBlLnNldENhbGxlZExpc3QgPSBmdW5jdGlvbihpKSB7XG4gIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0aGlzLmNhbGxlZExpc3QsIGkpID09PSAtMSkge1xuICAgIHRoaXMuY2FsbGVkTGlzdC5wdXNoKGkpO1xuICB9XG59O1xuXG5jb21wb3NlLnByb3RvdHlwZS5yZXNldENhbGxlZExpc3QgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jYWxsZWRMaXN0ID0gW107XG59O1xuXG5jb21wb3NlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24obXcsIGNhbGxiYWNrKSB7XG4gIHZhciBjb250ZXh0ID0gdGhpcztcbiAgdmFyIGN0eCA9IHRoaXMuY29udGV4dCB8fCB7fTtcbiAgdmFyIGNvbXBvc2UgPSBjdHguY29tcG9zZSB8fCB7fTtcbiAgdmFyIG1heFRpbWVvdXQgPSBjb21wb3NlLm1heFRpbWVvdXQgfHwgMTAgKiAxMDAwO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICB2YXIgc2l6ZSA9IG13Lmxlbmd0aDsgLy8g5Lit6Ze05Lu26Zif5YiX6ZW/5bqmXG4gICAgdmFyIGkgPSAwOyAvLyDkuK3pl7Tku7bntKLlvJVcbiAgICB2YXIgaiA9IDA7IC8vIOS4gOS4quagh+ivhu+8jDAt5Yid5aeL54q25oCB77yMMS3kuK3pl7Tku7blm57osIPmiafooYzkuoZcbiAgICB2YXIgc2xlZXBIYW5kZXIxO1xuICAgIHZhciBydW4gPSBmdW5jdGlvbihpbmRleCwgc3RhdHVzKSB7XG4gICAgICAvLyBjb250ZXh0LnB1YnN1YkluZm8oY29udGV4dCwgbXdbaV0pO1xuICAgICAgLy8g5Lit6Ze05Lu26Zif5YiX5omn6KGM5a6M5q+V5ZCO6L+U5ZueXG4gICAgICBpZiAoaSA9PT0gc2l6ZSkge1xuICAgICAgICBzdGF0ZSA9ICdkb25lJztcbiAgICAgICAgY29udGV4dC5yZXNldENhbGxlZExpc3QoKTsgLy8g6YeN572uY2FsbGVkTGlzdOWPmOmHj1xuICAgICAgICAvLyBzdGF0dXPlpoLmnpznrYnkuo5kb25l77yM6K+05piO5piv5Lit6YCU6YCA5Ye655qE5Lit6Ze05Lu277yM5LiN6ZyA6KaB5omn6KGM5Zue6LCDXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSAmJiBzdGF0dXMgIT09IHN0YXRlKSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCBzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJUaW1lb3V0KHNsZWVwSGFuZGVyMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIHZhciBjYl9zdGF0ZSA9IG51bGw7XG4gICAgICAvLyDkv53or4Hmr4/kuKrkuK3pl7Tku7blj6rkvJrmiafooYzkuIDmrKFcbiAgICAgIGlmICh1dGlsQXJyYXkuaW5kZXhvZihjb250ZXh0LmNhbGxlZExpc3QsIGkpID09PSAtMSkge1xuICAgICAgICBjb250ZXh0LnNldENhbGxlZExpc3QgJiYgY29udGV4dC5zZXRDYWxsZWRMaXN0KGkpO1xuICAgICAgICBpZiAobXcgJiYgbXdbaV0gJiYgaXNGdW5jdGlvbihtd1tpXVswXSkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcGFyYW1zIHtBcnJheX0gbWlkZGxld2FyZVxuICAgICAgICAgICAgICogQHBhcmFtcyB7QXJyYXl9IG1zZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzdGF0ZSA9IG13W2ldWzBdLmNhbGwoY29udGV4dCwgc3RhdGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICBqID0gMTsgIC8vIDEt5Lit6Ze05Lu25Zue6LCD5omn6KGM5LqGXG4gICAgICAgICAgICAgIHJ1bihpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgICAgICAgICAgbXNnOiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyDnirbmgIHkuLpwYXVzZeetieW+hTIwMG1z6L2u6K+i77yM54q25oCB5Li6bnVtYmVy57G75Z6L55qE5pWw5YC8562J5b6Fc3RhdGVtc+i9ruivolxuICAgICAgdmFyIGlzTnVtYmVyID0gdHlwZW9mIHN0YXRlID09PSAnbnVtYmVyJztcbiAgICAgIGlmIChzdGF0ZSA9PT0gJ3BhdXNlJyB8fCBpc051bWJlcikge1xuICAgICAgICBqID0gMDtcbiAgICAgICAgLy8g5pyA5aSn562J5b6F5pe26ZW/XG4gICAgICAgIHZhciBfdGltZV9vdXQgPSBpc051bWJlciA/IHN0YXRlIDogbWF4VGltZW91dDtcbiAgICAgICAgdmFyIF9td19uYW1lID0gbXdbaV0gPyBtd1tpXVsxXSA6ICcnO1xuICAgICAgICBzbGVlcEhhbmRlcjEgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChqID09PSAwKSB7XG4gICAgICAgICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgICAgIG1zZzogJ2p1bXAgdGhlIG1pZGRsZXdhcmUgYWJvdXQgJyArIF9td19uYW1lICsgJywgYmVjYXVzZSB3YWl0aW5nIHRpbWVvdXQgbWF4VGltZW91dCA9ICcgKyBfdGltZV9vdXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdGUgPSBudWxsO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgcnVuKGkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgX3RpbWVfb3V0KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkb25lJykge1xuICAgICAgICAvLyDnirbmgIHkuLpkb25l6KGo56S657uT5p2f77yM5LiN566h5ZCO6Z2i6L+Y5pyJ5rKh5pyJ5Lit6Ze05Lu26YO957uT5p2fXG4gICAgICAgIGkgPSBzaXplO1xuICAgICAgICBydW4oaSwgc3RhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g6buY6K6k54q25oCB77yM5Y+q566h5omn6KGM5Lit6Ze05Lu26Zif5YiXXG4gICAgICAgIGkrKztcbiAgICAgICAgcnVuKGkpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKGNvbnRleHQuY2FsbGVkTGlzdCAmJiBjb250ZXh0LmNhbGxlZExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgY29udGV4dC5yZXNldENhbGxlZExpc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bihpKTtcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY29tcG9zZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL2NvbXBvc2UuanNcbi8vIG1vZHVsZSBpZCA9IDg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvcGx1Z2luc0xvYWRlci5qc1xuICog5o+S5Lu25Yqg6L295ZmoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ0B1dGlscy9hc3NpZ24nKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW1zIG9wdHMge1xuICAgICAqICAgbWlkZGxld2FyZTogW10sXG4gICAgICogICBwbHVnaW5zOiBbXSxcbiAgICAgKiAgIGNvbmZpZzoge31cbiAgICAgKiB9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24ob3B0cykge1xuICAgICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICAgIGlmIChvcHRzICYmIHR5cGVvZiBvcHRzLm1pZGRsZXdhcmUgPT09ICdvYmplY3QnICYmIG9wdHMubWlkZGxld2FyZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMubWlkZGxld2FyZSA9IG9wdHMubWlkZGxld2FyZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWlkZGxld2FyZSA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5wbHVnaW5zX25hbWUgPSBbXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5YiG5Y+R6K6i6ZiF5Y+Y5YyWXG4gICAgICogQHBhcmFtIG8ge1xuICAgICAqICAgcHVic3ViOiB7Li4ufSxcbiAgICAgKiAgIGNvbnRleHQ6IHsuLi59XG4gICAgICogfSxcbiAgICAgKiBAcGFyYW0gbXcg5b2T5YmN5omn6KGM55qE5Lit6Ze05Lu2XG4gICAgICovXG4gICAgcHVic3ViSW5mbzogZnVuY3Rpb24oY3R4LCBtdykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHB1YnN1YiA9IGN0eC5wdWJzdWI7XG4gICAgICAgIGlmIChwdWJzdWIpIHtcbiAgICAgICAgICBwdWJzdWIucHVibGlzaCgncGx1Z2luc19jaGFuZ2VfJyArIGN0eC5wdWJzdWJUeXBlLCBtdyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgIG1zZzogZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgIGlmKCFpbmRleCkgaW5kZXggPSAwO1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHZhciBtaWRkbGV3YXJlID0gdGhpcy5taWRkbGV3YXJlO1xuICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdHMgfHwge307XG4gICAgICB2YXIgcGx1Z2lucyA9IG9wdHMucGx1Z2lucztcbiAgICAgIGlmIChwbHVnaW5zICYmIHR5cGVvZiBwbHVnaW5zID09PSAnb2JqZWN0JyAmJiBwbHVnaW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHBsdWdpbiA9IHBsdWdpbnNbaW5kZXhdO1xuICAgICAgICB0aGlzLnBsdWdpbnNfbmFtZS5wdXNoKHBsdWdpbi5uYW1lKTtcbiAgICAgICAgbWlkZGxld2FyZS5wdXNoKFtmdW5jdGlvbihzdGF0ZSwgY2Ipe1xuICAgICAgICAgIF9zZWxmLnB1YnN1YkluZm8odGhpcywgcGx1Z2luKTtcbiAgICAgICAgICAvLyDojrflj5bmj5Lku7bmqKHlnZfot6/lvoTlubbliJ3lp4vljJZcbiAgICAgICAgICB2YXIgbSA9IG5ldyBwbHVnaW4ucGF0aCgpO1xuXG4gICAgICAgICAgLy8g5Li66IqC55yB5Luj56CB6YeP77yM6buY6K6k55qE5Yid5aeL5YyW5pa55rOV5Zyo5Yqg6L295Zmo5YaF5YGa5YWc5bqV5aSE55CG77yM5Y2z5o+S5Lu25YaF5peg54m55q6K5oOF5Ya15peg6ZyA5a6e546waW5pdOaWueazlVxuICAgICAgICAgIGlmICghbS5pbml0KSB7XG4gICAgICAgICAgICBtLmluaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8g5bCG5LiK5LiL5paH5rOo5YWl5Yiw5o+S5Lu25YaFXG4gICAgICAgICAgbS5pbml0KHtcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dCxcbiAgICAgICAgICAgIGNvbmZpZzogYXNzaWduKHBsdWdpbi5jb25maWcgfHwge30sIG9wdHMuY29uZmlnKVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBtLnJ1bihzdGF0ZSwgZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgLy8g6L+Z6YeM5L2/55SoMeavq+enkuW7tui/n+aJp+ihjO+8jOmYsuatouS4remXtOS7tuS4u+S9k+WGheeahGNhbGxiYWNr5YWI5omn6KGM77yM5a+86Ie05qGG5p625ou/5LiN5Yiw5Lit6Ze05Lu2cmV0dXJu55qE562J5b6F5pe26ZW/77yM5LuO6ICM5a+86Ie055uR5o6n5byC5bi4XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgY2IocGx1Z2luLCBtc2cpO1xuICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sIHBsdWdpbi5uYW1lXSk7XG5cbiAgICAgICAgaW5kZXgrKztcbiAgICAgICAgaWYocGx1Z2luc1tpbmRleF0pe1xuICAgICAgICAgIHJldHVybiB0aGlzLnJ1bihpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBtaWRkbGV3YXJlO1xuICAgIH1cbiAgfTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9wbHVnaW5zTG9hZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA4NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3NyYy9hcGx1cy5qc1xuICogcmVxdWVzdFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBqaXpoYS53eWpAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyDlj5HpgIHlm77niYdHRVTor7fmsYJcbmV4cG9ydHMuc2VuZEltZyA9IGZ1bmN0aW9uKHNyYywgdGltZW91dCkge1xuICB2YXIgd2luID0gd2luZG93IHx8IHt9O1xuICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gIHZhciBybmRfaWQgPSBcIl9pbWdfXCIgKyBNYXRoLnJhbmRvbSgpO1xuXG4gIC8vIOWcqOWFqOWxgOWPmOmHj+S4reW8leeUqCBpbWfvvIzpmLLmraIgaW1nIOiiq+Weg+WcvuWbnuaUtuacuuWItui/h+aXqeWbnuaUtumAoOaIkOivt+axguWPkemAgeWksei0pVxuICAvLyDlj4LogIPvvJpodHRwOi8vb2xkai5uZXQvYXJ0aWNsZS9vbmUtdGhpbmctdG8tbm90aWNlLWFib3V0LW5ldy1pbWFnZS9cbiAgd2luW3JuZF9pZF0gPSBpbWc7XG5cbiAgdmFyIHJlbW92ZVJuZElkID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKCkge1xuICAgIGlmICh3aW5bcm5kX2lkXSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGVsZXRlIHdpbltybmRfaWRdO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB3aW5bcm5kX2lkXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgaW1nLm9ubG9hZCA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcbiAgICByZW1vdmVSbmRJZCgpO1xuICB9O1xuICBpbWcub25lcnJvciA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcbiAgICByZW1vdmVSbmRJZCgpO1xuICB9O1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgaWYgKHdpbmRvd1tybmRfaWRdKSB7XG4gICAgICB3aW5kb3dbcm5kX2lkXS5zcmMgPSAnJztcbiAgICAgIHJlbW92ZVJuZElkKCk7XG4gICAgfVxuICB9LCB0aW1lb3V0IHx8IDUwMDApO1xuXG4gIGltZy5zcmMgPSBzcmM7XG4gIGltZyA9IG51bGw7IC8vIOWIoOmZpOS4tOaXtuWPmOmHj+eahOW8leeUqFxuICByZXR1cm4gc3JjO1xufTtcblxuLy8g5Y+R6YCBc2VuZEJlYWNvbiBwb3N06K+35rGCXG5leHBvcnRzLnBvc3REYXRhID0gZnVuY3Rpb24gKHVybCwgZGF0YSkge1xuICAvLyBmb3IgKHZhciBrIGluIGRhdGEpIHtcbiAgLy8gICBpZiAoayAhPT0gJ2NuYScpIHtcbiAgLy8gICAgIGRhdGFba10gPSBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtrXSk7XG4gIC8vICAgfVxuICAvLyB9XG4gIG5hdmlnYXRvci5zZW5kQmVhY29uKHVybCwgZGF0YSk7XG4gIHJldHVybiB1cmw7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2FwaS9yZXF1ZXN0LmpzXG4vLyBtb2R1bGUgaWQgPSA4N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogcHZpZFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnLi91dGlsUHVic3ViJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuL3V0aWxHb2xkbG9nJyk7XG52YXIgbG9nSWQgPSByZXF1aXJlKCcuL2xvZ0lkJyk7XG5cbi8qKlxuICog5Yik5pat5piv5ZCm56aB55So5LqGcHZpZFxuICogQHJldHVybiBbQm9vbGVhbl1cbiAqL1xuZnVuY3Rpb24gaXNEaXNhYmxlUHZpZCAoKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgZGlzYWJsZVB2aWQ7XG4gIHRyeSB7XG4gICAgdmFyIG1ldGFfdmFsdWUgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZGlzYWJsZS1wdmlkJykgKyAnJztcbiAgICBpZiAobWV0YV92YWx1ZSA9PT0gJ3RydWUnKSB7XG4gICAgICBkaXNhYmxlUHZpZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChtZXRhX3ZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICBkaXNhYmxlUHZpZCA9IGZhbHNlO1xuICAgIH1cbiAgfSBjYXRjaChlcnIpe1xuICB9XG4gIHJldHVybiBkaXNhYmxlUHZpZDtcbn07XG5leHBvcnRzLmlzRGlzYWJsZVB2aWQgPSBpc0Rpc2FibGVQdmlkO1xuXG4vKipcbiAqIOWkhOeQhumhtemdouS4iueahCBwdiBpZFxuICovXG5leHBvcnRzLm1ha2VQVklkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHByZV9wdmlkID0gYXBsdXMucHZpZDtcbiAgdmFyIHVybCA9IGxvY2F0aW9uICYmIGxvY2F0aW9uLmhyZWY7XG4gIHZhciB0aXRsZSA9IGRvY3VtZW50ICYmIGRvY3VtZW50LnRpdGxlO1xuICBhcGx1cy5wdmlkID0gbG9nSWQuZ2V0TG9nSWQodXJsLCB0aXRsZSk7XG4gIHZhciBtc2dzID0gWydwdmlkQ2hhbmdlJywge1xuICAgIHByZV9wdmlkOiBwcmVfcHZpZCxcbiAgICBwdmlkOiBhcGx1cy5wdmlkXG4gIH1dO1xuICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICByZXR1cm4gaXNEaXNhYmxlUHZpZCgpID8gJycgOiBhcGx1cy5wdmlkO1xufTtcblxuZXhwb3J0cy5nZXRQdklkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgcmV0dXJuIGlzRGlzYWJsZVB2aWQoKSA/ICcnIDogYXBsdXMucHZpZDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUHZpZC5qc1xuLy8gbW9kdWxlIGlkID0gODhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvaW5pdC9pbml0TG9hZF9iYXNlLmpzXG4gKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBAYXV0aG9yIGppemhhLnd5aiBAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWN0aW9uID0gcmVxdWlyZSgnLi9hY3Rpb24nKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46ICBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuICAgICAgdmFyIEFQTFVTX1FVRVVFID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRTtcblxuICAgICAgdmFyIGNvbnRleHQgPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gICAgICB2YXIgcXVlID0gY29udGV4dFtBUExVU19RVUVVRV0gfHwgW107XG4gICAgICB2YXIgcnMgPSBhY3Rpb24uZ2V0Rm9ybWF0UXVldWUocXVlLCAnbWV0YVF1ZXVlJyk7XG4gICAgICBjb250ZXh0W0FQTFVTX1FVRVVFXSA9IHJzLnF1ZXVlO1xuICAgICAgYWN0aW9uLnByb2Nlc3NHb2xkbG9nUXVldWUocnMuZm9ybWF0UXVldWUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9tZXRhX3F1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSA4OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG4vKipcbiAqIEBwYXJhbXMge0FycmF5fSBRVUVVRVxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuICogfVxuICovXG52YXIgcHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IGZ1bmN0aW9uIChRVUVVRSwgb3B0cykge1xuICBmdW5jdGlvbiBmKCkge1xuICAgIGlmICghUVVFVUUgfHwgIXV0aWxBcnJheS5pc0FycmF5KFFVRVVFKSB8fCAhUVVFVUUubGVuZ3RoKSByZXR1cm47XG4gICAgLy8g5o6S5bqPXG4gICAgdmFyIHF1ZSA9IGdldEZvcm1hdFF1ZXVlKFFVRVVFKS5xdWV1ZTtcbiAgICB2YXIgdGFzayA9IHt9O1xuICAgIHZhciBkZWxheVRhc2tzID0gW107XG4gICAgd2hpbGUgKHRhc2sgPSBxdWUuc2hpZnQoKSkgeyAvLyDkvp3mrKHmiafooYwgd2luZG93LmFwbHVzX3F1ZXVlIOS4reeahOS7u+WKoVxuICAgICAgcHJvY2Vzc1Rhc2sodGFzaywgb3B0cywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgZGVsYXlUYXNrcy5wdXNoKHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChkZWxheVRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGFzayA9IGRlbGF5VGFza3Muc2hpZnQoKSkge1xuICAgICAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDApO1xuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICBmKCk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIG1zZzogZVxuICAgIH0pO1xuICB9XG59O1xuZXhwb3J0cy5wcm9jZXNzR29sZGxvZ1F1ZXVlID0gcHJvY2Vzc0dvbGRsb2dRdWV1ZTtcblxuZnVuY3Rpb24gZ2V0TWV0YUluZm8oKSB7XG4gIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcbiAgcmV0dXJuIG1ldGFfaW5mbztcbn1cblxuZnVuY3Rpb24gZ2V0QXBsdXNIb2xkVHlwZSAoKSB7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgdWFpZCA9IG1ldGFfaW5mby51YWlkICsgJyc7XG4gIGlmICh1YWlkID09PSAnMScgJiYgIW1ldGFfaW5mby5fYW5vbnlfaWQpIHtcbiAgICByZXR1cm4gJ0JMT0NLJztcbiAgfVxuICByZXR1cm4gbWV0YV9pbmZvWydfaG9sZCddIHx8IG1ldGFfaW5mb1snYXBsdXMtd2FpdGluZyddO1xufVxuXG52YXIgQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUgPSBbXTtcbnZhciBBUExVU19IT0xEX0FOT05ZX1FVRVVFID0gW107XG52YXIgQVBMVVNfSE9MRF9RVUVVRSA9IFtdO1xuXG5mdW5jdGlvbiBmaWx0ZXJUYXNrICh0YXNrKSB7XG4gIHZhciBob2xkVHlwZSA9IGdldEFwbHVzSG9sZFR5cGUoKTtcbiAgLy8gY29uc29sZS5sb2coJ2hvbGRUeXBlID09PSAnLCBob2xkVHlwZSk7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgZmxhZyA9IHRydWU7XG5cbiAgLy8gMDogXCJfaG9sZFwiXG4gIC8vIDE6IFwiU1RBUlRcIlxuICB2YXIgYXJncyA9IHRhc2suYXJndW1lbnRzIHx8IFtdO1xuICB2YXIgbWV0YUtleSA9IGFyZ3NbMF07XG4gIHZhciBtZXRhVmFsdWUgPSBhcmdzWzFdO1xuICB2YXIgU1RBUlQgPSAnU1RBUlQnO1xuICBpZiAobWV0YUtleSA9PT0gJ19ob2xkJyAmJiBtZXRhVmFsdWUgPT09IFNUQVJUKSB7XG4gICAgcmV0dXJuIFNUQVJUO1xuICB9XG4gIGlmIChtZXRhS2V5ID09PSAnX2Fub255X2lkJyAmJiBtZXRhVmFsdWUpIHtcbiAgICByZXR1cm4gU1RBUlQ7XG4gIH1cbiAgaWYgKHRhc2sgJiYgL3NlbmRQVnxyZWNvcmR8c2V0UGFnZVNQTXxzZXRNZXRhSW5mb3xhcHBlbmRNZXRhSW5mbyQvLnRlc3QodGFzay5hY3Rpb24pKSB7XG4gICAgc3dpdGNoIChob2xkVHlwZSkge1xuICAgIGNhc2UgJ0JMT0NLJzpcbiAgICAgIGlmICghbWV0YV9pbmZvW2hvbGRUeXBlXSkge1xuICAgICAgICBBUExVU19IT0xEX1FVRVVFLnB1c2godGFzayk7XG4gICAgICAgIGZsYWcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZsYWc7XG59XG5cblxuLy8gdmFyIHByb2Nlc3NlZCA9IGZhbHNlO1xuZnVuY3Rpb24gcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUgKG9wdHMpIHtcbiAgLy8gaWYgKCFwcm9jZXNzZWQpIHtcbiAgLy8gICBwcm9jZXNzZWQgPSB0cnVlO1xuICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1FVRVVFLCBvcHRzKTsgIFxuICAvLyB9XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSBxdWV1ZU5hbWU6IGFwbHVzX3F1ZXVlIHx8IGdvbGRsb2dfcXVldWVcbiAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG4gKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcbiAqIH1cbiAqL1xuZXhwb3J0cy5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUgPSBmdW5jdGlvbiAocXVldWVOYW1lLCBvcHRzKSB7XG4gIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuICBxdWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuU0VUX01FVEFfSU5GTywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9VU0VSX0lEICYmIHZhbHVlKSB7XG4gICAgICAgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9BTk9OWV9JRCAmJiB2YWx1ZSkge1xuICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfQU5PTllfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdfaG9sZCcgJiYgdmFsdWUgPT09ICdTVEFSVCcpIHtcbiAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXRNZXRob2ROYW1lIChrZXksIGlzT3BlbkFwaSkge1xuICBpZiAoaXNPcGVuQXBpICYmIGFwbHVzU3RhdGljLm9wZW5BUElzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAga2V5ID0gJ18nICsga2V5O1xuICB9XG4gIHJldHVybiBrZXk7XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSB0YXNrXG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG4gKiB9XG4gKi9cbnZhciBwcm9jZXNzVGFzayA9IGZ1bmN0aW9uKHRhc2ssIG9wdHMsIGNhbGxiYWNrKSB7XG4gIHZhciBpc09wZW5BcGkgPSAhIW9wdHMuaXNPcGVuQXBpO1xuICB2YXIgYWN0aW9uID0gdGFzayA/IHRhc2suYWN0aW9uIDogJyc7XG4gIHZhciBhcmdzID0gdGFzayA/IHRhc2suYXJndW1lbnRzIDogJyc7XG5cbiAgdmFyIHJlc3VsdCA9IGZpbHRlclRhc2sodGFzayk7XG4gIGlmICghcmVzdWx0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZXh0ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB0cnkgeyAvLyDnoa7kv53mn5DkuKrku7vliqHmiafooYzlpLHotKXkuI3kvJrlvbHlk43lhbblroPku7vliqFcbiAgICBpZiAoYWN0aW9uICYmIGFyZ3MgJiYgdXRpbEFycmF5LmlzQXJyYXkoYXJncykpIHtcbiAgICAgIHZhciBhID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gICAgICB2YXIgb2JqID0gY29udGV4dDtcbiAgICAgIHZhciBfZm4gPSBjb250ZXh0O1xuICAgICAgdmFyIG1ldGhvZE5hbWU7XG4gICAgICBpZiAoYS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgb2JqID0gY29udGV4dFthWzBdXVthWzFdXSB8fCB7fTtcbiAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYVsyXSwgaXNPcGVuQXBpKTtcbiAgICAgICAgX2ZuID0gb2JqW21ldGhvZE5hbWVdID8gb2JqW21ldGhvZE5hbWVdIDogJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAoYS5sZW5ndGgpIHtcbiAgICAgICAgICBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShhLnNoaWZ0KCksIGlzT3BlbkFwaSk7XG4gICAgICAgICAgX2ZuID0gb2JqID0gb2JqW21ldGhvZE5hbWVdO1xuICAgICAgICAgIGlmICghb2JqKSB7IC8vIOmdnuazlSBhY3Rpb25cbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc0Z1bmN0aW9uKF9mbikpIHtcbiAgICAgICAgX2ZuLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0ID09PSAnU1RBUlQnKSB7XG4gICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgbXNnOiBlXG4gICAgfSk7XG4gIH1cbn07XG5leHBvcnRzLnByb2Nlc3NUYXNrID0gcHJvY2Vzc1Rhc2s7XG5cbnZhciBnZXRGb3JtYXRRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZSwgdHlwZSkge1xuICB2YXIgcXVldWVNYXAgPSB7XG4gICAgc3Vic2NyaWJlTXdDaGFuZ2VRdWV1ZTogW10sXG4gICAgc3Vic2NyaWJlTWV0YVF1ZXVlOiBbXSxcbiAgICBzdWJzY3JpYmVRdWV1ZTogW10sXG4gICAgbWV0YVF1ZXVlOiBbXSxcbiAgICBvdGhlcnNRdWV1ZTogW11cbiAgfTtcblxuICB2YXIgcSA9IFtdO1xuICB2YXIgdGFzayA9IHt9O1xuICB3aGlsZSAodGFzayA9IHF1ZXVlLnNoaWZ0KCkpIHsgLy8g5L6d5qyh5omn6KGMIHdpbmRvdy5hcGx1c19xdWV1ZSDkuK3nmoTku7vliqFcbiAgICB0cnkge1xuICAgICAgdmFyIGFjID0gdGFzay5hY3Rpb247XG4gICAgICB2YXIga2V5ID0gdGFzay5hcmd1bWVudHNbMF07XG4gICAgICBpZiAoL3N1YnNjcmliZS8udGVzdChhYykpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3NldE1ldGFJbmZvJykge1xuICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWIHx8IGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEopIHtcbiAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgvTWV0YUluZm8vLnRlc3QoYWMpKSB7XG4gICAgICAgIHF1ZXVlTWFwLm1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVNYXAub3RoZXJzUXVldWUucHVzaCh0YXNrKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgIG1zZzogZVxuICAgICAgfSk7XG4gICAgICBxdWV1ZU1hcC5vdGhlcnNRdWV1ZS5wdXNoKHRhc2spO1xuICAgIH1cbiAgfVxuICB2YXIgZm9ybWF0UXVldWU7XG4gIGlmICh0eXBlICYmIHF1ZXVlTWFwW3R5cGVdKSB7XG4gICAgZm9ybWF0UXVldWUgPSBxdWV1ZU1hcFt0eXBlXTtcbiAgICBxdWV1ZU1hcFt0eXBlXSA9IFtdO1xuICB9XG4gIHEgPSBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLmNvbmNhdChxdWV1ZU1hcC5tZXRhUXVldWUpO1xuICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlUXVldWUpO1xuICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlTWV0YVF1ZXVlLCBxdWV1ZU1hcC5vdGhlcnNRdWV1ZSk7XG4gIHJldHVybiB7XG4gICAgcXVldWU6IHEsXG4gICAgZm9ybWF0UXVldWU6IGZvcm1hdFF1ZXVlXG4gIH07XG59O1xuZXhwb3J0cy5nZXRGb3JtYXRRdWV1ZSA9IGdldEZvcm1hdFF1ZXVlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfcXVldWUvYWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbERhdGEgPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhdGEnKTtcbnZhciB1dGlsRG9tID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEb20nKTtcbnZhciB1dGlsRXRhZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRXRhZycpO1xudmFyIHV0aWxTdG9yZSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsU3RvcmUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBwduWPkemAgeWIsOWTqumHjOWOu1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuICAgICAgaWYgKHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgICAgdmFyIF9jbmEgPSB1dGlsRGF0YS5nZXRMc0NuYShhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkVUQUdfU1RPUkFHRV9LRVksIF9zZWxmLnRvZGF5KTtcbiAgICAgICAgaWYgKCFfY25hKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGFwbHVzX3Job3N0X3YgPSBhcGx1cy5fJC5tZXRhX2luZm9bJ2FwbHVzLXJob3N0LXYnXTtcbiAgICAgICAgICAgIGlmIChhcGx1c19yaG9zdF92KSB7XG4gICAgICAgICAgICAgIF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnLmVnVXJsID0gYXBsdXNfcmhvc3RfdiArICcvZWcuanMnO1xuICAgICAgICAgICAgICB2YXIgZWdVcmwgPSB1dGlsRXRhZy5nZXRVcmwoX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcgfHwge30pO1xuICAgICAgICAgICAgICB1dGlsRG9tLmxvYWRTY3JpcHQoZWdVcmwsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvLyB2YXIgRXRhZyA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ0V0YWcnKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyICYmIGVyci50eXBlICE9PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICB1dGlsRGF0YS5zZXRMc0NuYShhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkVUQUdfU1RPUkFHRV9LRVksIF9zZWxmLnRvZGF5LCBhcGx1cy5FdGFnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9ldGFnX3dlYl9zeW5jLmpzXG4vLyBtb2R1bGUgaWQgPSA5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9pbml0L2luaXRMb2FkX2Jhc2UuanNcbiAqIOWIneWni+WMluWfuuehgOaooeWdl++8jOS4jeiDveebtOaOpeS9v+eUqO+8jOmcgOimgemAmui/h2luaXRMb2FkX3BjLmpz5oiWaW5pdExvYWRfd2FwLmpz562J5YW35L2T55qE5Zy65pmv5qih5Z2X6LCD55SoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIEBhdXRob3Igaml6aGEud3lqIEBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYWN0aW9uID0gcmVxdWlyZSgnLi9hY3Rpb24nKTtcblxudmFyIFF1ZXVlID0gQmFzZS5leHRlbmQoe1xuICBwdXNoOiBmdW5jdGlvbih0YXNrKSB7XG4gICAgdGhpcy5sZW5ndGgrKztcbiAgICBhY3Rpb24ucHJvY2Vzc1Rhc2sodGFzaywgdGhpcy5vcHRzKTsgIFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHByb2Nlc3NBcGx1c1F1ZXVlOiBmdW5jdGlvbiAocXVldWVOYW1lKSB7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgcXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUocXVldWVOYW1lKTtcbiAgICAgIGFjdGlvbi5wcm9jZXNzR29sZGxvZ1F1ZXVlKHF1ZSwgb3B0cyk7XG4gICAgICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUsIFF1ZXVlLmNyZWF0ZSh7XG4gICAgICAgIG9wdHM6IG9wdHMsIFxuICAgICAgICBzdGFydExlbmd0aDogcXVlLmxlbmd0aCxcbiAgICAgICAgbGVuZ3RoOiAwXG4gICAgICB9KSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbXMge1N0cmluZ30gdHlwZVxuICAgICAqL1xuICAgIHJ1bjogIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1c19jb25maWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWc7XG4gICAgICB2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFO1xuXG4gICAgICB0aGlzLnByb2Nlc3NBcGx1c1F1ZXVlKEFQTFVTX1FVRVVFKTtcblxuICAgICAgaWYgKEFQTFVTX1FVRVVFID09PSAnYXBsdXNfcXVldWUnKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc0FwbHVzUXVldWUoJ2dvbGRsb2dfcXVldWUnKTtcbiAgICAgIH1cbiAgICAgIGFjdGlvbi5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUoQVBMVVNfUVVFVUUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hcGx1c19xdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gOTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOi/meaYr+S4gOS4quWKoOi9veWZqO+8jOeUqOS6jueDreWKoOi9vUpT5o+S5Lu2XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIHV0aWxEb20gPSByZXF1aXJlKCdAdXRpbHMvdXRpbERvbScpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbi8vIHZhciBwbHVnaW5Mb2FkZXJNYXAgPSB7fTtcbi8qKlxuICogRE9NUmVhZHnlkI7lvIDlp4vmiafooYzliqDovb1hcGx1c0pT5o+S5Lu255qE5Yqo5L2cXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbXMge09iamVjdH0gb3B0aW9ucyB7XG4gICAgICogICBsb2dDb25maWc6IHtsb2dDb25maWd9XG4gICAgICogfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfSxcblxuICAgIC8vIC8qKlxuICAgIC8vICAqIOWKoOi9veiHquWKqOabneWFiVxc6Ieq5Yqo54K55Ye755qEanNcbiAgICAvLyAgKiBAcGFyYW1zIHtTdHJpbmd9IG1ldGFLZXkgJ2FwbHVzLWF1dG8tZXhwJyB8ICdhcGx1cy1hdXRvLWNsaydcbiAgICAvLyAgKiBAcGFyYW1zIHtTdHJpbmd9IG1ldGFWYWx1ZVxuICAgIC8vICAqL1xuICAgIC8vIGxvYWRBcGx1c1BsdWdpbjogZnVuY3Rpb24gKG1ldGFLZXkpIHtcbiAgICAvLyAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuICAgIC8vICAgdmFyIGNkblBhdGggPSBjb25maWdbbWV0YUtleV07XG4gICAgLy8gICB2YXIgcGx1Z2luX3BhdGhzID0gYXBsdXMuZ2V0Q2RuUGF0aCgpICsgY2RuUGF0aDtcbiAgICAvLyAgIGlmIChjZG5QYXRoICYmICFhcGx1c1tjb25maWcuZ2xvYmFsTmFtZV0gJiYgIXBsdWdpbkxvYWRlck1hcFtjZG5QYXRoXSkge1xuICAgIC8vICAgICB1dGlsRG9tLmFkZFNjcmlwdChwbHVnaW5fcGF0aHMpO1xuICAgIC8vICAgICBwbHVnaW5Mb2FkZXJNYXBbY2RuUGF0aF0gPSB0cnVlO1xuICAgIC8vICAgfVxuICAgIC8vIH0sXG5cbiAgICBhZGRTdHlsZTogZnVuY3Rpb24gKGlkLCBzdHlsZVVybCkge1xuICAgICAgdmFyIHN0eWxlSWQgPSBpZCArICdfc3R5bGUnO1xuICAgICAgdmFyIHN0eWxlTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0eWxlSWQpO1xuICAgICAgaWYgKCFzdHlsZU5vZGUpIHtcbiAgICAgICAgc3R5bGVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICBzdHlsZU5vZGUuaWQgPSBzdHlsZUlkO1xuICAgICAgICBzdHlsZU5vZGUuaHJlZiA9IHN0eWxlVXJsO1xuICAgICAgICBzdHlsZU5vZGUucmVsID0gJ3N0eWxlc2hlZXQnO1xuICAgICAgICBzdHlsZU5vZGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJykuaXRlbSgwKS5hcHBlbmRDaGlsZChzdHlsZU5vZGUpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHZhciBpc19pbl9pZnJhbWUgPSBwYXJlbnQgIT09IHNlbGY7ICAvLyDlvZPliY3pobXpnaLmmK/lkKblnKggaWZyYW1lIOS4rVxuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICBpZiAoIWlzX2luX2lmcmFtZSAmJiBjb25maWcudXJsUnVsZXMpIHtcbiAgICAgICAgZWFjaChjb25maWcudXJsUnVsZXMsIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAodi5ydWxlKTtcbiAgICAgICAgICB2YXIgbWF0Y2hlZEluTFM7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG1hdGNoZWRJbkxTID0gdi5pZCA/IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHYuaWQpIDogJyc7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICBpZiAocmVnLnRlc3QobG9jYXRpb24uaHJlZikgfHwgbWF0Y2hlZEluTFMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHYuaWQsIHRydWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIGlmICh1dGlsQXJyYXkuaXNBcnJheSh2LmNkblBhdGgpKSB7XG4gICAgICAgICAgICAgIGVhY2godi5jZG5QYXRoLCBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICAgICAgICAgIGlmICgvXFwuY3NzJC8udGVzdChwYXRoKSkge1xuICAgICAgICAgICAgICAgICAgX3NlbGYuYWRkU3R5bGUodi5pZCwgcGF0aCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvXFwuanMvLnRlc3QocGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgIHV0aWxEb20uYWRkU2NyaXB0KHBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB1dGlsRG9tLmFkZFNjcmlwdCh2LmNkblBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdzZXRNZXRhSW5mbycsIGZ1bmN0aW9uIChtZXRhS2V5LCBtZXRhVmF1ZSkge1xuICAgICAgLy8gICBfc2VsZi5sb2FkQXBsdXNQbHVnaW4obWV0YUtleSwgbWV0YVZhdWUpO1xuICAgICAgLy8gfSk7XG4gICAgICAvLyBpZiAoL2FwbHVzX3dlYnZ0X21lc3NhZ2VyLy50ZXN0KGxvY2F0aW9uLmhyZWYpKSB7XG4gICAgICAvLyAgIHV0aWxEb20uYWRkU2NyaXB0KHBsdWdpbl9wYXRocyk7XG4gICAgICAvLyB9XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9ob3QvaG90X2xvYWRlci5qc1xuLy8gbW9kdWxlIGlkID0gOTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbi8qKlxuICogYWxpbG9nL3Mvc3JjL2FwbHVzLmpzXG4gKiDmqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIGppemhhLnd5akBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwbHVzX2NvbmZpZykge1xuICB0cnkge1xuICAgIHZhciB3aW4gPSB3aW5kb3c7XG4gICAgdmFyIF9rID0gJ2dfdGJfYXBsdXNfbG9hZGVkJztcbiAgICBpZiAod2luW19rXSkgcmV0dXJuO1xuICAgIHdpbltfa10gPSAxO1xuICAgIHJlcXVpcmUoJ0B1dGlscy9kZWJ1ZycpLmlzRGVidWdBcGx1cygpO1xuICAgIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbiAgICB2YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG4gICAgdmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG4gICAgdmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xuICAgIHZhciBhcGx1c2luaXQgPSByZXF1aXJlKCdAY29yZS9hcGx1c2luaXQnKTtcblxuICAgIHZhciBSVU5OSU5HID0gJ3J1bm5pbmcnO1xuICAgIC8vIHZhciBDT01QTEVURSA9ICdjb21wbGV0ZSc7XG4gICAgdmFyIGFwbHVzU3RhdHVzID0gWydhcGx1c1JlYWR5JywgUlVOTklOR107XG4gICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhhcGx1c1N0YXR1cyk7XG5cbiAgICBhcGx1c2luaXQucnVuKHtcbiAgICAgIHBsdWdpbnM6IGFwbHVzX2NvbmZpZy5wbHVnaW5zLFxuICAgICAgY29udGV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29uZmlnX3B2X2NvbnRleHQgPSB7XG4gICAgICAgICAgUEFHRV9MT0FEX1RJTUU6IG5ldyBEYXRlKClcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFBMVUdJTlNfUFYgPSBbXTtcbiAgICAgICAgZWFjaChhcGx1c19jb25maWcucGx1Z2lucywgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWcgfHwge307XG4gICAgICAgICAgaWYgKHYubmFtZSA9PT0gJ2FwbHVzX2xvZ19pbmplY3QnICYmIHYuY29uZmlnICYmIHYuY29uZmlnLnBsdWdpbnMpIHtcbiAgICAgICAgICAgIFBMVUdJTlNfUFYgPSB2LmNvbmZpZy5wbHVnaW5zLnB2O1xuICAgICAgICAgICAgZWFjaChQTFVHSU5TX1BWLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdXRpbERhc2guYXNzaWduKGNvbmZpZ19wdl9jb250ZXh0LCB7XG4gICAgICAgICAgYXBsdXNfY29uZmlnOiBhcGx1c19jb25maWdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICBtc2c6ICdBUExVUyBJTklUIFNVQ0NFU1MnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIFRPRE8g5Yqg55uR5o6nXG4gICAgLy8gY29uc29sZS5sb2coZSk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c193ZWJfYmFzaWMuanNcbi8vIG1vZHVsZSBpZCA9IDk0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuL3V0aWxHb2xkbG9nJyk7XG5cbnZhciBpc0RlYnVnO1xuXG4vKipcbiAqIOaYr+WQpuW8gOWQr2RlYnVn5qih5byP5YWl5Y+j77yM5ZyodXJs5Lit5Yqg5YWlZGVidWdBcGx1cz10cnVlXG4gKi9cbmV4cG9ydHMuaXNEZWJ1Z0FwbHVzID0gZnVuY3Rpb24gKGRlYnVnKSB7XG4gIGlmICh0eXBlb2YgaXNEZWJ1ZyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIGlzRGVidWc7XG4gIH1cbiAgLy9wYXJhbWV0ZXIgaXMgaW52YWxpZFxuICBpZiAodHlwZW9mIGRlYnVnID09PSAnYm9vbGVhbicpIHtcbiAgICBpc0RlYnVnID0gZGVidWc7XG4gIH1cbiAgaWYgKGxvY2FsU3RvcmFnZSAmJiBsb2NhdGlvbikge1xuICAgIHZhciBtYXRjaF92YWx1ZSA9IGxvY2F0aW9uLmhyZWYubWF0Y2goL2FwbHVzRGVidWc9KHRydWV8ZmFsc2UpLyk7XG4gICAgaWYgKG1hdGNoX3ZhbHVlICYmIG1hdGNoX3ZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhcGx1c0RlYnVnJywgbWF0Y2hfdmFsdWVbMV0pO1xuICAgIH1cbiAgICBpc0RlYnVnID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FwbHVzRGVidWcnKSA9PT0gJ3RydWUnO1xuICB9IGVsc2Uge1xuICAgIGlzRGVidWcgPSBmYWxzZTtcbiAgfVxuICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdhcGx1c0RlYnVnJywgaXNEZWJ1Zyk7ICBcbiAgcmV0dXJuIGlzRGVidWc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZGVidWcuanNcbi8vIG1vZHVsZSBpZCA9IDk1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBhcGx1cyBBUElcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVkdWNlciA9IHJlcXVpcmUoJ0Bjb3JlL1JlZHVjZXInKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcblxuLyoqXG4gKiDlsIblkI7nu63nmoRpbml05Yqo5L2c6YO95YGa5oiQ5o+S5Lu277yM55uu5YmN5Y+q5pyJd2hlcmVfdG9fc2VuZHB25LiA6aG5XG4gKlxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgcGx1Z2luc1xuICogICBjb250ZXh0XG4gKiB9XG4gKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqXG4gKi9cbmV4cG9ydHMucnVuID0gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG4gIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcbiAgcmVkdWNlci5ydW4oe1xuICAgIHBsdWdpbnM6IG9wdHMucGx1Z2lucyxcbiAgICBjb250ZXh0OiBvcHRzLmNvbnRleHRcbiAgfSwge1xuICAgIGNvbmZpZzoge30sXG4gICAgdXNlcmRhdGE6IHt9LFxuICAgIHB1YnN1YlR5cGU6ICdhcGx1c2luaXQnLFxuICAgIG1lc3NhZ2VGblF1ZXVlOiBbXSxcbiAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9hcGx1c2luaXQnXG4gIH0sIGZ1bmN0aW9uIChjdHgpIHtcbiAgICB2YXIgbXNncyA9IFsnYXBsdXNJbml0Q29udGV4dCcsIGN0eF07XG4gICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcbiAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgY2FsbGJhY2soY3R4KTtcbiAgICB9XG4gIH0pO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvYXBsdXNpbml0LmpzXG4vLyBtb2R1bGUgaWQgPSA5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9